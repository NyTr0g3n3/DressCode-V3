(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function eC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xg={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function WN(){if(JT)return $u;JT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return $u.Fragment=e,$u.jsx=n,$u.jsxs=n,$u}var YT;function QN(){return YT||(YT=1,xg.exports=WN()),xg.exports}var A=QN(),Ng={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function XN(){if(jT)return Oe;jT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=T&&B[T]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,U={};function H(B,Z,fe){this.props=B,this.context=Z,this.refs=U,this.updater=fe||x}H.prototype.isReactComponent={},H.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},H.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function F(){}F.prototype=H.prototype;function q(B,Z,fe){this.props=B,this.context=Z,this.refs=U,this.updater=fe||x}var J=q.prototype=new F;J.constructor=q,M(J,H.prototype),J.isPureReactComponent=!0;var te=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(B,Z,fe){var he=fe.ref;return{$$typeof:t,type:B,key:Z,ref:he!==void 0?he:null,props:fe}}function V(B,Z){return N(B.type,Z,B.props)}function P(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function L(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(fe){return Z[fe]})}var O=/\/+/g;function Ie(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):Z.toString(36)}function ve(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(G,G):(B.status="pending",B.then(function(Z){B.status==="pending"&&(B.status="fulfilled",B.value=Z)},function(Z){B.status==="pending"&&(B.status="rejected",B.reason=Z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ee(B,Z,fe,he,we){var Ve=typeof B;(Ve==="undefined"||Ve==="boolean")&&(B=null);var qe=!1;if(B===null)qe=!0;else switch(Ve){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(B.$$typeof){case t:case e:qe=!0;break;case g:return qe=B._init,ee(qe(B._payload),Z,fe,he,we)}}if(qe)return we=we(B),qe=he===""?"."+Ie(B,0):he,te(we)?(fe="",qe!=null&&(fe=qe.replace(O,"$&/")+"/"),ee(we,Z,fe,"",function(Gn){return Gn})):we!=null&&(P(we)&&(we=V(we,fe+(we.key==null||B&&B.key===we.key?"":(""+we.key).replace(O,"$&/")+"/")+qe)),Z.push(we)),1;qe=0;var Ht=he===""?".":he+":";if(te(B))for(var At=0;At<B.length;At++)he=B[At],Ve=Ht+Ie(he,At),qe+=ee(he,Z,fe,Ve,we);else if(At=w(B),typeof At=="function")for(B=At.call(B),At=0;!(he=B.next()).done;)he=he.value,Ve=Ht+Ie(he,At++),qe+=ee(he,Z,fe,Ve,we);else if(Ve==="object"){if(typeof B.then=="function")return ee(ve(B),Z,fe,he,we);throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ce(B,Z,fe){if(B==null)return B;var he=[],we=0;return ee(B,he,"","",function(Ve){return Z.call(fe,Ve,we++)}),he}function pe(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(fe){(B._status===0||B._status===-1)&&(B._status=1,B._result=fe)},function(fe){(B._status===0||B._status===-1)&&(B._status=2,B._result=fe)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var Re=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ge={map:ce,forEach:function(B,Z,fe){ce(B,function(){Z.apply(this,arguments)},fe)},count:function(B){var Z=0;return ce(B,function(){Z++}),Z},toArray:function(B){return ce(B,function(Z){return Z})||[]},only:function(B){if(!P(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Oe.Activity=E,Oe.Children=ge,Oe.Component=H,Oe.Fragment=n,Oe.Profiler=s,Oe.PureComponent=q,Oe.StrictMode=i,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return I.H.useMemoCache(B)}},Oe.cache=function(B){return function(){return B.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(B,Z,fe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var he=M({},B.props),we=B.key;if(Z!=null)for(Ve in Z.key!==void 0&&(we=""+Z.key),Z)!R.call(Z,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&Z.ref===void 0||(he[Ve]=Z[Ve]);var Ve=arguments.length-2;if(Ve===1)he.children=fe;else if(1<Ve){for(var qe=Array(Ve),Ht=0;Ht<Ve;Ht++)qe[Ht]=arguments[Ht+2];he.children=qe}return N(B.type,we,he)},Oe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Oe.createElement=function(B,Z,fe){var he,we={},Ve=null;if(Z!=null)for(he in Z.key!==void 0&&(Ve=""+Z.key),Z)R.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(we[he]=Z[he]);var qe=arguments.length-2;if(qe===1)we.children=fe;else if(1<qe){for(var Ht=Array(qe),At=0;At<qe;At++)Ht[At]=arguments[At+2];we.children=Ht}if(B&&B.defaultProps)for(he in qe=B.defaultProps,qe)we[he]===void 0&&(we[he]=qe[he]);return N(B,Ve,we)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(B){return{$$typeof:c,render:B}},Oe.isValidElement=P,Oe.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:pe}},Oe.memo=function(B,Z){return{$$typeof:h,type:B,compare:Z===void 0?null:Z}},Oe.startTransition=function(B){var Z=I.T,fe={};I.T=fe;try{var he=B(),we=I.S;we!==null&&we(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(G,Re)}catch(Ve){Re(Ve)}finally{Z!==null&&fe.types!==null&&(Z.types=fe.types),I.T=Z}},Oe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Oe.use=function(B){return I.H.use(B)},Oe.useActionState=function(B,Z,fe){return I.H.useActionState(B,Z,fe)},Oe.useCallback=function(B,Z){return I.H.useCallback(B,Z)},Oe.useContext=function(B){return I.H.useContext(B)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(B,Z){return I.H.useDeferredValue(B,Z)},Oe.useEffect=function(B,Z){return I.H.useEffect(B,Z)},Oe.useEffectEvent=function(B){return I.H.useEffectEvent(B)},Oe.useId=function(){return I.H.useId()},Oe.useImperativeHandle=function(B,Z,fe){return I.H.useImperativeHandle(B,Z,fe)},Oe.useInsertionEffect=function(B,Z){return I.H.useInsertionEffect(B,Z)},Oe.useLayoutEffect=function(B,Z){return I.H.useLayoutEffect(B,Z)},Oe.useMemo=function(B,Z){return I.H.useMemo(B,Z)},Oe.useOptimistic=function(B,Z){return I.H.useOptimistic(B,Z)},Oe.useReducer=function(B,Z,fe){return I.H.useReducer(B,Z,fe)},Oe.useRef=function(B){return I.H.useRef(B)},Oe.useState=function(B){return I.H.useState(B)},Oe.useSyncExternalStore=function(B,Z,fe){return I.H.useSyncExternalStore(B,Z,fe)},Oe.useTransition=function(){return I.H.useTransition()},Oe.version="19.2.0",Oe}var WT;function iv(){return WT||(WT=1,Ng.exports=XN()),Ng.exports}var $=iv();const Sn=eC($);var Dg={exports:{}},Ju={},Mg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function ZN(){return QT||(QT=1,(function(t){function e(ee,ce){var pe=ee.length;ee.push(ce);e:for(;0<pe;){var Re=pe-1>>>1,ge=ee[Re];if(0<s(ge,ce))ee[Re]=ce,ee[pe]=ge,pe=Re;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],pe=ee.pop();if(pe!==ce){ee[0]=pe;e:for(var Re=0,ge=ee.length,B=ge>>>1;Re<B;){var Z=2*(Re+1)-1,fe=ee[Z],he=Z+1,we=ee[he];if(0>s(fe,pe))he<ge&&0>s(we,fe)?(ee[Re]=we,ee[he]=pe,Re=he):(ee[Re]=fe,ee[Z]=pe,Re=Z);else if(he<ge&&0>s(we,pe))ee[Re]=we,ee[he]=pe,Re=he;else break e}}return ce}function s(ee,ce){var pe=ee.sortIndex-ce.sortIndex;return pe!==0?pe:ee.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,E=null,T=3,w=!1,x=!1,M=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function J(ee){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=ee)i(h),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(h)}}function te(ee){if(M=!1,J(ee),!x)if(n(d)!==null)x=!0,G||(G=!0,L());else{var ce=n(h);ce!==null&&ve(te,ce.startTime-ee)}}var G=!1,I=-1,R=5,N=-1;function V(){return U?!0:!(t.unstable_now()-N<R)}function P(){if(U=!1,G){var ee=t.unstable_now();N=ee;var ce=!0;try{e:{x=!1,M&&(M=!1,F(I),I=-1),w=!0;var pe=T;try{t:{for(J(ee),E=n(d);E!==null&&!(E.expirationTime>ee&&V());){var Re=E.callback;if(typeof Re=="function"){E.callback=null,T=E.priorityLevel;var ge=Re(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof ge=="function"){E.callback=ge,J(ee),ce=!0;break t}E===n(d)&&i(d),J(ee)}else i(d);E=n(d)}if(E!==null)ce=!0;else{var B=n(h);B!==null&&ve(te,B.startTime-ee),ce=!1}}break e}finally{E=null,T=pe,w=!1}ce=void 0}}finally{ce?L():G=!1}}}var L;if(typeof q=="function")L=function(){q(P)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ie=O.port2;O.port1.onmessage=P,L=function(){Ie.postMessage(null)}}else L=function(){H(P,0)};function ve(ee,ce){I=H(function(){ee(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var pe=T;T=ce;try{return ee()}finally{T=pe}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var pe=T;T=ee;try{return ce()}finally{T=pe}},t.unstable_scheduleCallback=function(ee,ce,pe){var Re=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Re+pe:Re):pe=Re,ee){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=pe+ge,ee={id:g++,callback:ce,priorityLevel:ee,startTime:pe,expirationTime:ge,sortIndex:-1},pe>Re?(ee.sortIndex=pe,e(h,ee),n(d)===null&&ee===n(h)&&(M?(F(I),I=-1):M=!0,ve(te,pe-Re))):(ee.sortIndex=ge,e(d,ee),x||w||(x=!0,G||(G=!0,L()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var ce=T;return function(){var pe=T;T=ce;try{return ee.apply(this,arguments)}finally{T=pe}}}})(Pg)),Pg}var XT;function eD(){return XT||(XT=1,Mg.exports=ZN()),Mg.exports}var kg={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function tD(){if(ZT)return Yn;ZT=1;var t=iv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(d,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,g)},Yn.flushSync=function(d){var h=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=g,i.d.f()}},Yn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Yn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Yn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var g=h.as,E=c(g,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):g==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Yn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,E=c(g,h.crossOrigin);i.d.L(d,g,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yn.preloadModule=function(d,h){if(typeof d=="string")if(h){var g=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Yn.requestFormReset=function(d){i.d.r(d)},Yn.unstable_batchedUpdates=function(d,h){return d(h)},Yn.useFormState=function(d,h,g){return l.H.useFormState(d,h,g)},Yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Yn.version="19.2.0",Yn}var eS;function tC(){if(eS)return kg.exports;eS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kg.exports=tD(),kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function nD(){if(tS)return Ju;tS=1;var t=eD(),e=iv(),n=tC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var b=!1,D=v.child;D;){if(D===u){b=!0,u=v,f=_;break}if(D===f){b=!0,f=v,u=_;break}D=D.sibling}if(!b){for(D=_.child;D;){if(D===u){b=!0,u=_,f=v;break}if(D===f){b=!0,f=_,u=v;break}D=D.sibling}if(!b)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case M:return"Fragment";case H:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case G:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case q:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case J:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:Ie(r.type)||"Memo";case R:o=r._payload,r=r._init;try{return Ie(r(o))}catch{}}return null}var ve=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Re=[],ge=-1;function B(r){return{current:r}}function Z(r){0>ge||(r.current=Re[ge],Re[ge]=null,ge--)}function fe(r,o){ge++,Re[ge]=r.current,r.current=o}var he=B(null),we=B(null),Ve=B(null),qe=B(null);function Ht(r,o){switch(fe(Ve,o),fe(we,r),fe(he,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?gT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=gT(o),r=yT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(he),fe(he,r)}function At(){Z(he),Z(we),Z(Ve)}function Gn(r){r.memoizedState!==null&&fe(qe,r);var o=he.current,u=yT(o,r.type);o!==u&&(fe(we,r),fe(he,u))}function di(r){we.current===r&&(Z(he),Z(we)),qe.current===r&&(Z(qe),zu._currentValue=pe)}var vn,bn;function kn(r){if(vn===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);vn=o&&o[1]||"",bn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vn+r+bn}var wn=!1;function Cn(r,o){if(!r||wn)return"";wn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var X=ne}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ne){X=ne}r.call(oe.prototype)}}else{try{throw Error()}catch(ne){X=ne}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&X&&typeof ne.stack=="string")return[ne.stack,X.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),b=_[0],D=_[1];if(b&&D){var z=b.split(`
`),Q=D.split(`
`);for(v=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===z.length||v===Q.length)for(f=z.length-1,v=Q.length-1;1<=f&&0<=v&&z[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(z[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||z[f]!==Q[v]){var re=`
`+z[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{wn=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?kn(u):""}function Fi(r,o){switch(r.tag){case 26:case 27:case 5:return kn(r.type);case 16:return kn("Lazy");case 13:return r.child!==o&&o!==null?kn("Suspense Fallback"):kn("Suspense");case 19:return kn("SuspenseList");case 0:case 15:return Cn(r.type,!1);case 11:return Cn(r.type.render,!1);case 1:return Cn(r.type,!0);case 31:return kn("Activity");default:return""}}function Ae(r){try{var o="",u=null;do o+=Fi(r,u),u=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var xt=Object.prototype.hasOwnProperty,Ft=t.unstable_scheduleCallback,_n=t.unstable_cancelCallback,ar=t.unstable_shouldYield,qi=t.unstable_requestPaint,ht=t.unstable_now,en=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,Gt=t.unstable_UserBlockingPriority,an=t.unstable_NormalPriority,ln=t.unstable_LowPriority,Ts=t.unstable_IdlePriority,Xl=t.log,Kn=t.unstable_setDisableYieldValue,bi=null,In=null;function le(r){if(typeof Xl=="function"&&Kn(r),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(bi,r)}catch{}}var be=Math.clz32?Math.clz32:_t,Se=Math.log,Ge=Math.LN2;function _t(r){return r>>>=0,r===0?32:31-(Se(r)/Ge|0)|0}var Ye=256,je=262144,ot=4194304;function it(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function De(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var D=f&134217727;return D!==0?(f=D&~_,f!==0?v=it(f):(b&=D,b!==0?v=it(b):u||(u=D&~r,u!==0&&(v=it(u))))):(D=f&~_,D!==0?v=it(D):b!==0?v=it(b):u||(u=f&~r,u!==0&&(v=it(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function Ke(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function En(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(){var r=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),r}function tn(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Nt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Et(r,o,u,f,v,_){var b=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var D=r.entanglements,z=r.expirationTimes,Q=r.hiddenUpdates;for(u=b&~u;0<u;){var re=31-be(u),oe=1<<re;D[re]=0,z[re]=-1;var X=Q[re];if(X!==null)for(Q[re]=null,re=0;re<X.length;re++){var ne=X[re];ne!==null&&(ne.lane&=-536870913)}u&=~oe}f!==0&&ni(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(b&~o))}function ni(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-be(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function qt(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-be(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function $n(r,o){var u=o&-o;return u=(u&42)!==0?1:zi(u),(u&(r.suspendedLanes|o))!==0?0:u}function zi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Vn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ii(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:qT(r.type))}function Hr(r,o){var u=ce.p;try{return ce.p=r,o()}finally{ce.p=u}}var wi=Math.random().toString(36).slice(2),Mt="__reactFiber$"+wi,nn="__reactProps$"+wi,Ci="__reactContainer$"+wi,Hi="__reactEvents$"+wi,Ii="__reactListeners$"+wi,Po="__reactHandles$"+wi,lr="__reactResources$"+wi,Gi="__reactMarker$"+wi;function Ki(r){delete r[Mt],delete r[nn],delete r[Hi],delete r[Ii],delete r[Po]}function hi(r){var o=r[Mt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Ci]||u[Mt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=bT(r);r!==null;){if(u=r[Mt])return u;r=bT(r)}return o}r=u,u=r.parentNode}return null}function $i(r){if(r=r[Mt]||r[Ci]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function br(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function ri(r){var o=r[lr];return o||(o=r[lr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Bt(r){r[Gi]=!0}var ur=new Set,cr={};function si(r,o){wr(r,o),wr(r+"Capture",o)}function wr(r,o){for(cr[r]=o,r=0;r<o.length;r++)ur.add(o[r])}var Np=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zl={},eu={};function rf(r){return xt.call(eu,r)?!0:xt.call(Zl,r)?!1:Np.test(r)?eu[r]=!0:(Zl[r]=!0,!1)}function Ss(r,o,u){if(rf(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function As(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Ji(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}function oi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sf(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Dp(r,o,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(b){u=""+b,_.call(this,b)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ia(r){if(!r._valueTracker){var o=sf(r)?"checked":"value";r._valueTracker=Dp(r,o,""+r[o])}}function tu(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=sf(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Ra(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Gr=/[\n"\\]/g;function Yt(r){return r.replace(Gr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bs(r,o,u,f,v,_,b,D){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),o!=null?b==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+oi(o)):r.value!==""+oi(o)&&(r.value=""+oi(o)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),o!=null?xa(r,b,oi(o)):u!=null?xa(r,b,oi(u)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+oi(D):r.removeAttribute("name")}function ko(r,o,u,f,v,_,b,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Ia(r);return}u=u!=null?""+oi(u):"",o=o!=null?""+oi(o):u,D||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=D?r.checked:!!f,r.defaultChecked=!!f,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b),Ia(r)}function xa(r,o,u){o==="number"&&Ra(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function lt(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+oi(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Vo(r,o,u){if(o!=null&&(o=""+oi(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+oi(u):""}function ws(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(ve(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=oi(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),Ia(r)}function Yi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Mp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nu(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Mp.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function of(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&nu(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&nu(r,_,o[_])}function iu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cr(r){return kp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Rn(){}var Na=null;function Da(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Kr=null,Ri=null;function af(r){var o=$i(r);if(o&&(r=o.stateNode)){var u=r[nn]||null;e:switch(r=o.stateNode,o.type){case"input":if(bs(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Yt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[nn]||null;if(!v)throw Error(i(90));bs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&tu(f)}break e;case"textarea":Vo(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&lt(r,!!u.multiple,o,!1)}}}var ru=!1;function lf(r,o,u){if(ru)return r(o,u);ru=!0;try{var f=r(o);return f}finally{if(ru=!1,(Kr!==null||Ri!==null)&&(rd(),Kr&&(o=Kr,r=Ri,Ri=Kr=null,af(o),r)))for(o=0;o<r.length;o++)af(r[o])}}function pi(r,o){var u=r.stateNode;if(u===null)return null;var f=u[nn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),su=!1;if(fr)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){su=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{su=!1}var xi=null,Ma=null,Rr=null;function Cs(){if(Rr)return Rr;var r,o=Ma,u=o.length,f,v="value"in xi?xi.value:xi.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var b=u-r;for(f=1;f<=b&&o[u-f]===v[_-f];f++);return Rr=v.slice(r,1<f?1-f:void 0)}function Lo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Is(){return!0}function Pt(){return!1}function Jn(r){function o(u,f,v,_,b){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(u=r[D],this[D]=u?u(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Is:Pt,this.isPropagationStopped=Pt,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),o}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oo=Jn($r),Rs=E({},$r,{view:0,detail:0}),uf=Jn(Rs),xs,Pa,ai,Uo=E({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(xs=r.screenX-ai.screenX,Pa=r.screenY-ai.screenY):Pa=xs=0,ai=r),xs)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),cf=Jn(Uo),Fo=E({},Uo,{dataTransfer:0}),ff=Jn(Fo),ou=E({},Rs,{relatedTarget:0}),Ns=Jn(ou),df=E({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),ka=Jn(df),Vp=E({},$r,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),hf=Jn(Vp),qo=E({},$r,{data:0}),au=Jn(qo),pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=uu[r])?!!o[r]:!1}function Ds(){return mf}var gf=E({},Rs,{key:function(r){if(r.key){var o=pf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Lo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?lu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(r){return r.type==="keypress"?Lo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Lo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yf=Jn(gf),Jr=E({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=Jn(Jr),vf=E({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),_f=Jn(vf),Ef=E({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=Jn(Ef),li=E({},Uo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=Jn(li),Sf=E({},$r,{newState:0,oldState:0}),Ms=Jn(Sf),m=[9,13,27,32],S=fr&&"CompositionEvent"in window,C=null;fr&&"documentMode"in document&&(C=document.documentMode);var k=fr&&"TextEvent"in window&&!C,j=fr&&(!S||C&&8<C&&11>=C),ie=" ",de=!1;function gt(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function un(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $e=!1;function xn(r,o){switch(r){case"compositionend":return un(o);case"keypress":return o.which!==32?null:(de=!0,ie);case"textInput":return r=o.data,r===ie&&de?null:r;default:return null}}function Nn(r,o){if($e)return r==="compositionend"||!S&&gt(r,o)?(r=Cs(),Rr=Ma=xi=null,$e=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return j&&o.locale!=="ko"?null:o.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Ps[r.type]:o==="textarea"}function Bo(r,o,u,f){Kr?Ri?Ri.push(f):Ri=[f]:Kr=f,o=fd(o,"onChange"),0<o.length&&(u=new Oo("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Yr=null,fu=null;function A1(r){cT(r,0)}function Af(r){var o=br(r);if(tu(o))return r}function x0(r,o){if(r==="change")return o}var N0=!1;if(fr){var Lp;if(fr){var Op="oninput"in document;if(!Op){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Op=typeof D0.oninput=="function"}Lp=Op}else Lp=!1;N0=Lp&&(!document.documentMode||9<document.documentMode)}function M0(){Yr&&(Yr.detachEvent("onpropertychange",P0),fu=Yr=null)}function P0(r){if(r.propertyName==="value"&&Af(fu)){var o=[];Bo(o,fu,r,Da(r)),lf(A1,o)}}function b1(r,o,u){r==="focusin"?(M0(),Yr=o,fu=u,Yr.attachEvent("onpropertychange",P0)):r==="focusout"&&M0()}function w1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Af(fu)}function C1(r,o){if(r==="click")return Af(o)}function I1(r,o){if(r==="input"||r==="change")return Af(o)}function R1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ni=typeof Object.is=="function"?Object.is:R1;function du(r,o){if(Ni(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!xt.call(o,v)||!Ni(r[v],o[v]))return!1}return!0}function k0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function V0(r,o){var u=k0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=k0(u)}}function L0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?L0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function O0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ra(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ra(r.document)}return o}function Up(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var x1=fr&&"documentMode"in document&&11>=document.documentMode,La=null,Fp=null,hu=null,qp=!1;function U0(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;qp||La==null||La!==Ra(f)||(f=La,"selectionStart"in f&&Up(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),hu&&du(hu,f)||(hu=f,f=fd(Fp,"onSelect"),0<f.length&&(o=new Oo("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=La)))}function zo(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Oa={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},Bp={},F0={};fr&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Ho(r){if(Bp[r])return Bp[r];if(!Oa[r])return r;var o=Oa[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in F0)return Bp[r]=o[u];return r}var q0=Ho("animationend"),B0=Ho("animationiteration"),z0=Ho("animationstart"),N1=Ho("transitionrun"),D1=Ho("transitionstart"),M1=Ho("transitioncancel"),H0=Ho("transitionend"),G0=new Map,zp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zp.push("scrollEnd");function dr(r,o){G0.set(r,o),si(o,[r])}var bf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ji=[],Ua=0,Hp=0;function wf(){for(var r=Ua,o=Hp=Ua=0;o<r;){var u=ji[o];ji[o++]=null;var f=ji[o];ji[o++]=null;var v=ji[o];ji[o++]=null;var _=ji[o];if(ji[o++]=null,f!==null&&v!==null){var b=f.pending;b===null?v.next=v:(v.next=b.next,b.next=v),f.pending=v}_!==0&&K0(u,v,_)}}function Cf(r,o,u,f){ji[Ua++]=r,ji[Ua++]=o,ji[Ua++]=u,ji[Ua++]=f,Hp|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Gp(r,o,u,f){return Cf(r,o,u,f),If(r)}function Go(r,o){return Cf(r,null,null,o),If(r)}function K0(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-be(u),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),_):null}function If(r){if(50<Vu)throw Vu=0,Zm=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Fa={};function P1(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(r,o,u,f){return new P1(r,o,u,f)}function Kp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jr(r,o){var u=r.alternate;return u===null?(u=Di(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function $0(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Rf(r,o,u,f,v,_){var b=0;if(f=r,typeof r=="function")Kp(r)&&(b=1);else if(typeof r=="string")b=UN(r,u,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Di(31,u,o,v),r.elementType=N,r.lanes=_,r;case M:return Ko(u.children,v,_,o);case U:b=8,v|=24;break;case H:return r=Di(12,u,o,v|2),r.elementType=H,r.lanes=_,r;case te:return r=Di(13,u,o,v),r.elementType=te,r.lanes=_,r;case G:return r=Di(19,u,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:b=10;break e;case F:b=9;break e;case J:b=11;break e;case I:b=14;break e;case R:b=16,f=null;break e}b=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Di(b,u,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function Ko(r,o,u,f){return r=Di(7,r,f,o),r.lanes=u,r}function $p(r,o,u){return r=Di(6,r,null,o),r.lanes=u,r}function J0(r){var o=Di(18,null,null,0);return o.stateNode=r,o}function Jp(r,o,u){return o=Di(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Y0=new WeakMap;function Wi(r,o){if(typeof r=="object"&&r!==null){var u=Y0.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Ae(o)},Y0.set(r,o),o)}return{value:r,source:o,stack:Ae(o)}}var qa=[],Ba=0,xf=null,pu=0,Qi=[],Xi=0,ks=null,xr=1,Nr="";function Wr(r,o){qa[Ba++]=pu,qa[Ba++]=xf,xf=r,pu=o}function j0(r,o,u){Qi[Xi++]=xr,Qi[Xi++]=Nr,Qi[Xi++]=ks,ks=r;var f=xr;r=Nr;var v=32-be(f)-1;f&=~(1<<v),u+=1;var _=32-be(o)+v;if(30<_){var b=v-v%5;_=(f&(1<<b)-1).toString(32),f>>=b,v-=b,xr=1<<32-be(o)+v|u<<v|f,Nr=_+r}else xr=1<<_|u<<v|f,Nr=r}function Yp(r){r.return!==null&&(Wr(r,1),j0(r,1,0))}function jp(r){for(;r===xf;)xf=qa[--Ba],qa[Ba]=null,pu=qa[--Ba],qa[Ba]=null;for(;r===ks;)ks=Qi[--Xi],Qi[Xi]=null,Nr=Qi[--Xi],Qi[Xi]=null,xr=Qi[--Xi],Qi[Xi]=null}function W0(r,o){Qi[Xi++]=xr,Qi[Xi++]=Nr,Qi[Xi++]=ks,xr=o.id,Nr=o.overflow,ks=r}var Ln=null,kt=null,rt=!1,Vs=null,Zi=!1,Wp=Error(i(519));function Ls(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(Wi(o,r)),Wp}function Q0(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Mt]=r,o[nn]=f,u){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(u=0;u<Ou.length;u++)Qe(Ou[u],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),ko(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),ws(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||pT(o.textContent,u)?(f.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),f.onScroll!=null&&Qe("scroll",o),f.onScrollEnd!=null&&Qe("scrollend",o),f.onClick!=null&&(o.onclick=Rn),o=!0):o=!1,o||Ls(r,!0)}function X0(r){for(Ln=r.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:Ln=Ln.return}}function za(r){if(r!==Ln)return!1;if(!rt)return X0(r),rt=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||pg(r.type,r.memoizedProps)),u=!u),u&&kt&&Ls(r),X0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));kt=AT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));kt=AT(r)}else o===27?(o=kt,Ws(r.type)?(r=_g,_g=null,kt=r):kt=o):kt=Ln?tr(r.stateNode.nextSibling):null;return!0}function $o(){kt=Ln=null,rt=!1}function Qp(){var r=Vs;return r!==null&&(_i===null?_i=r:_i.push.apply(_i,r),Vs=null),r}function mu(r){Vs===null?Vs=[r]:Vs.push(r)}var Xp=B(null),Jo=null,Qr=null;function Os(r,o,u){fe(Xp,o._currentValue),o._currentValue=u}function Xr(r){r._currentValue=Xp.current,Z(Xp)}function Zp(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function em(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var b=v.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=v;for(var z=0;z<o.length;z++)if(D.context===o[z]){_.lanes|=u,D=_.alternate,D!==null&&(D.lanes|=u),Zp(_.return,u,r),f||(b=null);break e}_=D.next}}else if(v.tag===18){if(b=v.return,b===null)throw Error(i(341));b.lanes|=u,_=b.alternate,_!==null&&(_.lanes|=u),Zp(b,u,r),b=null}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===r){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}}function Ha(r,o,u,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var b=v.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var D=v.type;Ni(v.pendingProps.value,b.value)||(r!==null?r.push(D):r=[D])}}else if(v===qe.current){if(b=v.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(zu):r=[zu])}v=v.return}r!==null&&em(o,r,u,f),o.flags|=262144}function Nf(r){for(r=r.firstContext;r!==null;){if(!Ni(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Yo(r){Jo=r,Qr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function On(r){return Z0(Jo,r)}function Df(r,o){return Jo===null&&Yo(r),Z0(r,o)}function Z0(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Qr===null){if(r===null)throw Error(i(308));Qr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Qr=Qr.next=o;return u}var k1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},V1=t.unstable_scheduleCallback,L1=t.unstable_NormalPriority,cn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new k1,data:new Map,refCount:0}}function gu(r){r.refCount--,r.refCount===0&&V1(L1,function(){r.controller.abort()})}var yu=null,nm=0,Ga=0,Ka=null;function O1(r,o){if(yu===null){var u=yu=[];nm=0,Ga=sg(),Ka={status:"pending",value:void 0,then:function(f){u.push(f)}}}return nm++,o.then(e_,e_),o}function e_(){if(--nm===0&&yu!==null){Ka!==null&&(Ka.status="fulfilled");var r=yu;yu=null,Ga=0,Ka=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function U1(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var t_=ee.S;ee.S=function(r,o){UE=ht(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&O1(r,o),t_!==null&&t_(r,o)};var jo=B(null);function im(){var r=jo.current;return r!==null?r:Rt.pooledCache}function Mf(r,o){o===null?fe(jo,jo.current):fe(jo,o.pool)}function n_(){var r=im();return r===null?null:{parent:cn._currentValue,pool:r}}var $a=Error(i(460)),rm=Error(i(474)),Pf=Error(i(542)),kf={then:function(){}};function i_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function r_(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Rn,Rn),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,o_(r),r;default:if(typeof o.status=="string")o.then(Rn,Rn);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,o_(r),r}throw Qo=o,$a}}function Wo(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Qo=u,$a):u}}var Qo=null;function s_(){if(Qo===null)throw Error(i(459));var r=Qo;return Qo=null,r}function o_(r){if(r===$a||r===Pf)throw Error(i(483))}var Ja=null,vu=0;function Vf(r){var o=vu;return vu+=1,Ja===null&&(Ja=[]),r_(Ja,r,o)}function _u(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Lf(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function a_(r){function o(Y,K){if(r){var W=Y.deletions;W===null?(Y.deletions=[K],Y.flags|=16):W.push(K)}}function u(Y,K){if(!r)return null;for(;K!==null;)o(Y,K),K=K.sibling;return null}function f(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function v(Y,K){return Y=jr(Y,K),Y.index=0,Y.sibling=null,Y}function _(Y,K,W){return Y.index=W,r?(W=Y.alternate,W!==null?(W=W.index,W<K?(Y.flags|=67108866,K):W):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function b(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function D(Y,K,W,se){return K===null||K.tag!==6?(K=$p(W,Y.mode,se),K.return=Y,K):(K=v(K,W),K.return=Y,K)}function z(Y,K,W,se){var xe=W.type;return xe===M?re(Y,K,W.props.children,se,W.key):K!==null&&(K.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Wo(xe)===K.type)?(K=v(K,W.props),_u(K,W),K.return=Y,K):(K=Rf(W.type,W.key,W.props,null,Y.mode,se),_u(K,W),K.return=Y,K)}function Q(Y,K,W,se){return K===null||K.tag!==4||K.stateNode.containerInfo!==W.containerInfo||K.stateNode.implementation!==W.implementation?(K=Jp(W,Y.mode,se),K.return=Y,K):(K=v(K,W.children||[]),K.return=Y,K)}function re(Y,K,W,se,xe){return K===null||K.tag!==7?(K=Ko(W,Y.mode,se,xe),K.return=Y,K):(K=v(K,W),K.return=Y,K)}function oe(Y,K,W){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=$p(""+K,Y.mode,W),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return W=Rf(K.type,K.key,K.props,null,Y.mode,W),_u(W,K),W.return=Y,W;case x:return K=Jp(K,Y.mode,W),K.return=Y,K;case R:return K=Wo(K),oe(Y,K,W)}if(ve(K)||L(K))return K=Ko(K,Y.mode,W,null),K.return=Y,K;if(typeof K.then=="function")return oe(Y,Vf(K),W);if(K.$$typeof===q)return oe(Y,Df(Y,K),W);Lf(Y,K)}return null}function X(Y,K,W,se){var xe=K!==null?K.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return xe!==null?null:D(Y,K,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===xe?z(Y,K,W,se):null;case x:return W.key===xe?Q(Y,K,W,se):null;case R:return W=Wo(W),X(Y,K,W,se)}if(ve(W)||L(W))return xe!==null?null:re(Y,K,W,se,null);if(typeof W.then=="function")return X(Y,K,Vf(W),se);if(W.$$typeof===q)return X(Y,K,Df(Y,W),se);Lf(Y,W)}return null}function ne(Y,K,W,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Y=Y.get(W)||null,D(K,Y,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return Y=Y.get(se.key===null?W:se.key)||null,z(K,Y,se,xe);case x:return Y=Y.get(se.key===null?W:se.key)||null,Q(K,Y,se,xe);case R:return se=Wo(se),ne(Y,K,W,se,xe)}if(ve(se)||L(se))return Y=Y.get(W)||null,re(K,Y,se,xe,null);if(typeof se.then=="function")return ne(Y,K,W,Vf(se),xe);if(se.$$typeof===q)return ne(Y,K,W,Df(K,se),xe);Lf(K,se)}return null}function Te(Y,K,W,se){for(var xe=null,ut=null,Ce=K,He=K=0,et=null;Ce!==null&&He<W.length;He++){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var ct=X(Y,Ce,W[He],se);if(ct===null){Ce===null&&(Ce=et);break}r&&Ce&&ct.alternate===null&&o(Y,Ce),K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct,Ce=et}if(He===W.length)return u(Y,Ce),rt&&Wr(Y,He),xe;if(Ce===null){for(;He<W.length;He++)Ce=oe(Y,W[He],se),Ce!==null&&(K=_(Ce,K,He),ut===null?xe=Ce:ut.sibling=Ce,ut=Ce);return rt&&Wr(Y,He),xe}for(Ce=f(Ce);He<W.length;He++)et=ne(Ce,Y,He,W[He],se),et!==null&&(r&&et.alternate!==null&&Ce.delete(et.key===null?He:et.key),K=_(et,K,He),ut===null?xe=et:ut.sibling=et,ut=et);return r&&Ce.forEach(function(to){return o(Y,to)}),rt&&Wr(Y,He),xe}function Me(Y,K,W,se){if(W==null)throw Error(i(151));for(var xe=null,ut=null,Ce=K,He=K=0,et=null,ct=W.next();Ce!==null&&!ct.done;He++,ct=W.next()){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var to=X(Y,Ce,ct.value,se);if(to===null){Ce===null&&(Ce=et);break}r&&Ce&&to.alternate===null&&o(Y,Ce),K=_(to,K,He),ut===null?xe=to:ut.sibling=to,ut=to,Ce=et}if(ct.done)return u(Y,Ce),rt&&Wr(Y,He),xe;if(Ce===null){for(;!ct.done;He++,ct=W.next())ct=oe(Y,ct.value,se),ct!==null&&(K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct);return rt&&Wr(Y,He),xe}for(Ce=f(Ce);!ct.done;He++,ct=W.next())ct=ne(Ce,Y,He,ct.value,se),ct!==null&&(r&&ct.alternate!==null&&Ce.delete(ct.key===null?He:ct.key),K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct);return r&&Ce.forEach(function(jN){return o(Y,jN)}),rt&&Wr(Y,He),xe}function Ct(Y,K,W,se){if(typeof W=="object"&&W!==null&&W.type===M&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var xe=W.key;K!==null;){if(K.key===xe){if(xe=W.type,xe===M){if(K.tag===7){u(Y,K.sibling),se=v(K,W.props.children),se.return=Y,Y=se;break e}}else if(K.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Wo(xe)===K.type){u(Y,K.sibling),se=v(K,W.props),_u(se,W),se.return=Y,Y=se;break e}u(Y,K);break}else o(Y,K);K=K.sibling}W.type===M?(se=Ko(W.props.children,Y.mode,se,W.key),se.return=Y,Y=se):(se=Rf(W.type,W.key,W.props,null,Y.mode,se),_u(se,W),se.return=Y,Y=se)}return b(Y);case x:e:{for(xe=W.key;K!==null;){if(K.key===xe)if(K.tag===4&&K.stateNode.containerInfo===W.containerInfo&&K.stateNode.implementation===W.implementation){u(Y,K.sibling),se=v(K,W.children||[]),se.return=Y,Y=se;break e}else{u(Y,K);break}else o(Y,K);K=K.sibling}se=Jp(W,Y.mode,se),se.return=Y,Y=se}return b(Y);case R:return W=Wo(W),Ct(Y,K,W,se)}if(ve(W))return Te(Y,K,W,se);if(L(W)){if(xe=L(W),typeof xe!="function")throw Error(i(150));return W=xe.call(W),Me(Y,K,W,se)}if(typeof W.then=="function")return Ct(Y,K,Vf(W),se);if(W.$$typeof===q)return Ct(Y,K,Df(Y,W),se);Lf(Y,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,K!==null&&K.tag===6?(u(Y,K.sibling),se=v(K,W),se.return=Y,Y=se):(u(Y,K),se=$p(W,Y.mode,se),se.return=Y,Y=se),b(Y)):u(Y,K)}return function(Y,K,W,se){try{vu=0;var xe=Ct(Y,K,W,se);return Ja=null,xe}catch(Ce){if(Ce===$a||Ce===Pf)throw Ce;var ut=Di(29,Ce,null,Y.mode);return ut.lanes=se,ut.return=Y,ut}finally{}}}var Xo=a_(!0),l_=a_(!1),Us=!1;function sm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function om(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function qs(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(pt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=If(r),K0(r,null,u),o}return Cf(r,f,o,u),If(r)}function Eu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,qt(r,u)}}function am(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var b={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=b:_=_.next=b,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var lm=!1;function Tu(){if(lm){var r=Ka;if(r!==null)throw r}}function Su(r,o,u,f){lm=!1;var v=r.updateQueue;Us=!1;var _=v.firstBaseUpdate,b=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var z=D,Q=z.next;z.next=null,b===null?_=Q:b.next=Q,b=z;var re=r.alternate;re!==null&&(re=re.updateQueue,D=re.lastBaseUpdate,D!==b&&(D===null?re.firstBaseUpdate=Q:D.next=Q,re.lastBaseUpdate=z))}if(_!==null){var oe=v.baseState;b=0,re=Q=z=null,D=_;do{var X=D.lane&-536870913,ne=X!==D.lane;if(ne?(Ze&X)===X:(f&X)===X){X!==0&&X===Ga&&(lm=!0),re!==null&&(re=re.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Te=r,Me=D;X=o;var Ct=u;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){oe=Te.call(Ct,oe,X);break e}oe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,X=typeof Te=="function"?Te.call(Ct,oe,X):Te,X==null)break e;oe=E({},oe,X);break e;case 2:Us=!0}}X=D.callback,X!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[X]:ne.push(X))}else ne={lane:X,tag:D.tag,payload:D.payload,callback:D.callback,next:null},re===null?(Q=re=ne,z=oe):re=re.next=ne,b|=X;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(z=oe),v.baseState=z,v.firstBaseUpdate=Q,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),Ks|=b,r.lanes=b,r.memoizedState=oe}}function u_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function c_(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)u_(u[r],o)}var Ya=B(null),Of=B(0);function f_(r,o){r=as,fe(Of,r),fe(Ya,o),as=r|o.baseLanes}function um(){fe(Of,as),fe(Ya,Ya.current)}function cm(){as=Of.current,Z(Ya),Z(Of)}var Mi=B(null),er=null;function Bs(r){var o=r.alternate;fe(rn,rn.current&1),fe(Mi,r),er===null&&(o===null||Ya.current!==null||o.memoizedState!==null)&&(er=r)}function fm(r){fe(rn,rn.current),fe(Mi,r),er===null&&(er=r)}function d_(r){r.tag===22?(fe(rn,rn.current),fe(Mi,r),er===null&&(er=r)):zs()}function zs(){fe(rn,rn.current),fe(Mi,Mi.current)}function Pi(r){Z(Mi),er===r&&(er=null),Z(rn)}var rn=B(0);function Uf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||yg(u)||vg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Zr=0,ze=null,bt=null,fn=null,Ff=!1,ja=!1,Zo=!1,qf=0,Au=0,Wa=null,F1=0;function jt(){throw Error(i(321))}function dm(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Ni(r[u],o[u]))return!1;return!0}function hm(r,o,u,f,v,_){return Zr=_,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ee.H=r===null||r.memoizedState===null?j_:Rm,Zo=!1,_=u(f,v),Zo=!1,ja&&(_=p_(o,u,f,v)),h_(r),_}function h_(r){ee.H=Cu;var o=bt!==null&&bt.next!==null;if(Zr=0,fn=bt=ze=null,Ff=!1,Au=0,Wa=null,o)throw Error(i(300));r===null||dn||(r=r.dependencies,r!==null&&Nf(r)&&(dn=!0))}function p_(r,o,u,f){ze=r;var v=0;do{if(ja&&(Wa=null),Au=0,ja=!1,25<=v)throw Error(i(301));if(v+=1,fn=bt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=W_,_=o(u,f)}while(ja);return _}function q1(){var r=ee.H,o=r.useState()[0];return o=typeof o.then=="function"?bu(o):o,r=r.useState()[0],(bt!==null?bt.memoizedState:null)!==r&&(ze.flags|=1024),o}function pm(){var r=qf!==0;return qf=0,r}function mm(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function gm(r){if(Ff){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ff=!1}Zr=0,fn=bt=ze=null,ja=!1,Au=qf=0,Wa=null}function ui(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ze.memoizedState=fn=r:fn=fn.next=r,fn}function sn(){if(bt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=bt.next;var o=fn===null?ze.memoizedState:fn.next;if(o!==null)fn=o,bt=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));bt=r,r={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},fn===null?ze.memoizedState=fn=r:fn=fn.next=r}return fn}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(r){var o=Au;return Au+=1,Wa===null&&(Wa=[]),r=r_(Wa,r,o),o=ze,(fn===null?o.memoizedState:fn.next)===null&&(o=o.alternate,ee.H=o===null||o.memoizedState===null?j_:Rm),r}function zf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bu(r);if(r.$$typeof===q)return On(r)}throw Error(i(438,String(r)))}function ym(r){var o=null,u=ze.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=ze.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Bf(),ze.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=V;return o.index++,u}function es(r,o){return typeof o=="function"?o(r):o}function Hf(r){var o=sn();return vm(o,bt,r)}function vm(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var b=v.next;v.next=_.next,_.next=b}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var D=b=null,z=null,Q=o,re=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Ze&oe)===oe:(Zr&oe)===oe){var X=Q.revertLane;if(X===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===Ga&&(re=!0);else if((Zr&X)===X){Q=Q.next,X===Ga&&(re=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(D=z=oe,b=_):z=z.next=oe,ze.lanes|=X,Ks|=X;oe=Q.action,Zo&&u(_,oe),_=Q.hasEagerState?Q.eagerState:u(_,oe)}else X={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(D=z=X,b=_):z=z.next=X,ze.lanes|=oe,Ks|=oe;Q=Q.next}while(Q!==null&&Q!==o);if(z===null?b=_:z.next=D,!Ni(_,r.memoizedState)&&(dn=!0,re&&(u=Ka,u!==null)))throw u;r.memoizedState=_,r.baseState=b,r.baseQueue=z,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function _m(r){var o=sn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var b=v=v.next;do _=r(_,b.action),b=b.next;while(b!==v);Ni(_,o.memoizedState)||(dn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function m_(r,o,u){var f=ze,v=sn(),_=rt;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var b=!Ni((bt||v).memoizedState,u);if(b&&(v.memoizedState=u,dn=!0),v=v.queue,Sm(v_.bind(null,f,v,r),[r]),v.getSnapshot!==o||b||fn!==null&&fn.memoizedState.tag&1){if(f.flags|=2048,Qa(9,{destroy:void 0},y_.bind(null,f,v,u,o),null),Rt===null)throw Error(i(349));_||(Zr&127)!==0||g_(f,o,u)}return u}function g_(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=ze.updateQueue,o===null?(o=Bf(),ze.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function y_(r,o,u,f){o.value=u,o.getSnapshot=f,__(o)&&E_(r)}function v_(r,o,u){return u(function(){__(o)&&E_(r)})}function __(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Ni(r,u)}catch{return!0}}function E_(r){var o=Go(r,2);o!==null&&Ei(o,r,2)}function Em(r){var o=ui();if(typeof r=="function"){var u=r;if(r=u(),Zo){le(!0);try{u()}finally{le(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:r},o}function T_(r,o,u,f){return r.baseState=u,vm(r,bt,typeof f=="function"?f:es)}function B1(r,o,u,f,v){if($f(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){_.listeners.push(b)}};ee.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,S_(o,_)):(_.next=u.next,o.pending=u.next=_)}}function S_(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=ee.T,b={};ee.T=b;try{var D=u(v,f),z=ee.S;z!==null&&z(b,D),A_(r,o,D)}catch(Q){Tm(r,o,Q)}finally{_!==null&&b.types!==null&&(_.types=b.types),ee.T=_}}else try{_=u(v,f),A_(r,o,_)}catch(Q){Tm(r,o,Q)}}function A_(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){b_(r,o,f)},function(f){return Tm(r,o,f)}):b_(r,o,u)}function b_(r,o,u){o.status="fulfilled",o.value=u,w_(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,S_(r,u)))}function Tm(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,w_(o),o=o.next;while(o!==f)}r.action=null}function w_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function C_(r,o){return o}function I_(r,o){if(rt){var u=Rt.formState;if(u!==null){e:{var f=ze;if(rt){if(kt){t:{for(var v=kt,_=Zi;v.nodeType!==8;){if(!_){v=null;break t}if(v=tr(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){kt=tr(v.nextSibling),f=v.data==="F!";break e}}Ls(f)}f=!1}f&&(o=u[0])}}return u=ui(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:o},u.queue=f,u=$_.bind(null,ze,f),f.dispatch=u,f=Em(!1),_=Im.bind(null,ze,!1,f.queue),f=ui(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=B1.bind(null,ze,v,_,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function R_(r){var o=sn();return x_(o,bt,r)}function x_(r,o,u){if(o=vm(r,o,C_)[0],r=Hf(es)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=bu(o)}catch(b){throw b===$a?Pf:b}else f=o;o=sn();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(ze.flags|=2048,Qa(9,{destroy:void 0},z1.bind(null,v,u),null)),[f,_,r]}function z1(r,o){r.action=o}function N_(r){var o=sn(),u=bt;if(u!==null)return x_(o,u,r);sn(),o=o.memoizedState,u=sn();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Qa(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Bf(),ze.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function D_(){return sn().memoizedState}function Gf(r,o,u,f){var v=ui();ze.flags|=r,v.memoizedState=Qa(1|o,{destroy:void 0},u,f===void 0?null:f)}function Kf(r,o,u,f){var v=sn();f=f===void 0?null:f;var _=v.memoizedState.inst;bt!==null&&f!==null&&dm(f,bt.memoizedState.deps)?v.memoizedState=Qa(o,_,u,f):(ze.flags|=r,v.memoizedState=Qa(1|o,_,u,f))}function M_(r,o){Gf(8390656,8,r,o)}function Sm(r,o){Kf(2048,8,r,o)}function H1(r){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Bf(),ze.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function P_(r){var o=sn().memoizedState;return H1({ref:o,nextImpl:r}),function(){if((pt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function k_(r,o){return Kf(4,2,r,o)}function V_(r,o){return Kf(4,4,r,o)}function L_(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function O_(r,o,u){u=u!=null?u.concat([r]):null,Kf(4,4,L_.bind(null,o,r),u)}function Am(){}function U_(r,o){var u=sn();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&dm(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function F_(r,o){var u=sn();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&dm(o,f[1]))return f[0];if(f=r(),Zo){le(!0);try{r()}finally{le(!1)}}return u.memoizedState=[f,o],f}function bm(r,o,u){return u===void 0||(Zr&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=qE(),ze.lanes|=r,Ks|=r,u)}function q_(r,o,u,f){return Ni(u,o)?u:Ya.current!==null?(r=bm(r,u,f),Ni(r,o)||(dn=!0),r):(Zr&42)===0||(Zr&1073741824)!==0&&(Ze&261930)===0?(dn=!0,r.memoizedState=u):(r=qE(),ze.lanes|=r,Ks|=r,o)}function B_(r,o,u,f,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var b=ee.T,D={};ee.T=D,Im(r,!1,o,u);try{var z=v(),Q=ee.S;if(Q!==null&&Q(D,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=U1(z,f);wu(r,o,re,Li(r))}else wu(r,o,f,Li(r))}catch(oe){wu(r,o,{then:function(){},status:"rejected",reason:oe},Li())}finally{ce.p=_,b!==null&&D.types!==null&&(b.types=D.types),ee.T=b}}function G1(){}function wm(r,o,u,f){if(r.tag!==5)throw Error(i(476));var v=z_(r).queue;B_(r,v,o,pe,u===null?G1:function(){return H_(r),u(f)})}function z_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:pe},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function H_(r){var o=z_(r);o.next===null&&(o=r.alternate.memoizedState),wu(r,o.next.queue,{},Li())}function Cm(){return On(zu)}function G_(){return sn().memoizedState}function K_(){return sn().memoizedState}function K1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Li();r=Fs(u);var f=qs(o,r,u);f!==null&&(Ei(f,o,u),Eu(f,o,u)),o={cache:tm()},r.payload=o;return}o=o.return}}function $1(r,o,u){var f=Li();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$f(r)?J_(o,u):(u=Gp(r,o,u,f),u!==null&&(Ei(u,r,f),Y_(u,o,f)))}function $_(r,o,u){var f=Li();wu(r,o,u,f)}function wu(r,o,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if($f(r))J_(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var b=o.lastRenderedState,D=_(b,u);if(v.hasEagerState=!0,v.eagerState=D,Ni(D,b))return Cf(r,o,v,0),Rt===null&&wf(),!1}catch{}finally{}if(u=Gp(r,o,v,f),u!==null)return Ei(u,r,f),Y_(u,o,f),!0}return!1}function Im(r,o,u,f){if(f={lane:2,revertLane:sg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},$f(r)){if(o)throw Error(i(479))}else o=Gp(r,u,f,2),o!==null&&Ei(o,r,2)}function $f(r){var o=r.alternate;return r===ze||o!==null&&o===ze}function J_(r,o){ja=Ff=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function Y_(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,qt(r,u)}}var Cu={readContext:On,use:zf,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};Cu.useEffectEvent=jt;var j_={readContext:On,use:zf,useCallback:function(r,o){return ui().memoizedState=[r,o===void 0?null:o],r},useContext:On,useEffect:M_,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Gf(4194308,4,L_.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Gf(4194308,4,r,o)},useInsertionEffect:function(r,o){Gf(4,2,r,o)},useMemo:function(r,o){var u=ui();o=o===void 0?null:o;var f=r();if(Zo){le(!0);try{r()}finally{le(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=ui();if(u!==void 0){var v=u(o);if(Zo){le(!0);try{u(o)}finally{le(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=$1.bind(null,ze,r),[f.memoizedState,r]},useRef:function(r){var o=ui();return r={current:r},o.memoizedState=r},useState:function(r){r=Em(r);var o=r.queue,u=$_.bind(null,ze,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Am,useDeferredValue:function(r,o){var u=ui();return bm(u,r,o)},useTransition:function(){var r=Em(!1);return r=B_.bind(null,ze,r.queue,!0,!1),ui().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=ze,v=ui();if(rt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Rt===null)throw Error(i(349));(Ze&127)!==0||g_(f,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,M_(v_.bind(null,f,_,r),[r]),f.flags|=2048,Qa(9,{destroy:void 0},y_.bind(null,f,_,u,o),null),u},useId:function(){var r=ui(),o=Rt.identifierPrefix;if(rt){var u=Nr,f=xr;u=(f&~(1<<32-be(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=qf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=F1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Cm,useFormState:I_,useActionState:I_,useOptimistic:function(r){var o=ui();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Im.bind(null,ze,!0,u),u.dispatch=o,[r,o]},useMemoCache:ym,useCacheRefresh:function(){return ui().memoizedState=K1.bind(null,ze)},useEffectEvent:function(r){var o=ui(),u={impl:r};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Rm={readContext:On,use:zf,useCallback:U_,useContext:On,useEffect:Sm,useImperativeHandle:O_,useInsertionEffect:k_,useLayoutEffect:V_,useMemo:F_,useReducer:Hf,useRef:D_,useState:function(){return Hf(es)},useDebugValue:Am,useDeferredValue:function(r,o){var u=sn();return q_(u,bt.memoizedState,r,o)},useTransition:function(){var r=Hf(es)[0],o=sn().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:m_,useId:G_,useHostTransitionStatus:Cm,useFormState:R_,useActionState:R_,useOptimistic:function(r,o){var u=sn();return T_(u,bt,r,o)},useMemoCache:ym,useCacheRefresh:K_};Rm.useEffectEvent=P_;var W_={readContext:On,use:zf,useCallback:U_,useContext:On,useEffect:Sm,useImperativeHandle:O_,useInsertionEffect:k_,useLayoutEffect:V_,useMemo:F_,useReducer:_m,useRef:D_,useState:function(){return _m(es)},useDebugValue:Am,useDeferredValue:function(r,o){var u=sn();return bt===null?bm(u,r,o):q_(u,bt.memoizedState,r,o)},useTransition:function(){var r=_m(es)[0],o=sn().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:m_,useId:G_,useHostTransitionStatus:Cm,useFormState:N_,useActionState:N_,useOptimistic:function(r,o){var u=sn();return bt!==null?T_(u,bt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:ym,useCacheRefresh:K_};W_.useEffectEvent=P_;function xm(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Nm={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Li(),v=Fs(f);v.payload=o,u!=null&&(v.callback=u),o=qs(r,v,f),o!==null&&(Ei(o,r,f),Eu(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Li(),v=Fs(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=qs(r,v,f),o!==null&&(Ei(o,r,f),Eu(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Li(),f=Fs(u);f.tag=2,o!=null&&(f.callback=o),o=qs(r,f,u),o!==null&&(Ei(o,r,u),Eu(o,r,u))}};function Q_(r,o,u,f,v,_,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,b):o.prototype&&o.prototype.isPureReactComponent?!du(u,f)||!du(v,_):!0}function X_(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&Nm.enqueueReplaceState(o,o.state,null)}function ea(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function Z_(r){bf(r)}function eE(r){console.error(r)}function tE(r){bf(r)}function Jf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function nE(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Dm(r,o,u){return u=Fs(u),u.tag=3,u.payload={element:null},u.callback=function(){Jf(r,o)},u}function iE(r){return r=Fs(r),r.tag=3,r}function rE(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){nE(o,u,f)}}var b=u.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){nE(o,u,f),typeof v!="function"&&($s===null?$s=new Set([this]):$s.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function J1(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Ha(o,u,v,!0),u=Mi.current,u!==null){switch(u.tag){case 31:case 13:return er===null?sd():u.alternate===null&&Wt===0&&(Wt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===kf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),ng(r,f,v)),!1;case 22:return u.flags|=65536,f===kf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),ng(r,f,v)),!1}throw Error(i(435,u.tag))}return ng(r,f,v),sd(),!1}if(rt)return o=Mi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Wp&&(r=Error(i(422),{cause:f}),mu(Wi(r,u)))):(f!==Wp&&(o=Error(i(423),{cause:f}),mu(Wi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=Wi(f,u),v=Dm(r.stateNode,f,v),am(r,v),Wt!==4&&(Wt=2)),!1;var _=Error(i(520),{cause:f});if(_=Wi(_,u),ku===null?ku=[_]:ku.push(_),Wt!==4&&(Wt=2),o===null)return!0;f=Wi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Dm(u.stateNode,f,r),am(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=iE(v),rE(v,r,u,f),am(u,v),!1}u=u.return}while(u!==null);return!1}var Mm=Error(i(461)),dn=!1;function Un(r,o,u,f){o.child=r===null?l_(o,null,u,f):Xo(o,r.child,u,f)}function sE(r,o,u,f,v){u=u.render;var _=o.ref;if("ref"in f){var b={};for(var D in f)D!=="ref"&&(b[D]=f[D])}else b=f;return Yo(o),f=hm(r,o,u,b,_,v),D=pm(),r!==null&&!dn?(mm(r,o,v),ts(r,o,v)):(rt&&D&&Yp(o),o.flags|=1,Un(r,o,f,v),o.child)}function oE(r,o,u,f,v){if(r===null){var _=u.type;return typeof _=="function"&&!Kp(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,aE(r,o,_,f,v)):(r=Rf(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!qm(r,v)){var b=_.memoizedProps;if(u=u.compare,u=u!==null?u:du,u(b,f)&&r.ref===o.ref)return ts(r,o,v)}return o.flags|=1,r=jr(_,f),r.ref=o.ref,r.return=o,o.child=r}function aE(r,o,u,f,v){if(r!==null){var _=r.memoizedProps;if(du(_,f)&&r.ref===o.ref)if(dn=!1,o.pendingProps=f=_,qm(r,v))(r.flags&131072)!==0&&(dn=!0);else return o.lanes=r.lanes,ts(r,o,v)}return Pm(r,o,u,f,v)}function lE(r,o,u,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return uE(r,o,_,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Mf(o,_!==null?_.cachePool:null),_!==null?f_(o,_):um(),d_(o);else return f=o.lanes=536870912,uE(r,o,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Mf(o,_.cachePool),f_(o,_),zs(),o.memoizedState=null):(r!==null&&Mf(o,null),um(),zs());return Un(r,o,v,u),o.child}function Iu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function uE(r,o,u,f,v){var _=im();return _=_===null?null:{parent:cn._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Mf(o,null),um(),d_(o),r!==null&&Ha(r,o,f,!0),o.childLanes=v,null}function Yf(r,o){return o=Wf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function cE(r,o,u){return Xo(o,r.child,null,u),r=Yf(o,o.pendingProps),r.flags|=2,Pi(o),o.memoizedState=null,r}function Y1(r,o,u){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(rt){if(f.mode==="hidden")return r=Yf(o,f),o.lanes=536870912,Iu(null,r);if(fm(o),(r=kt)?(r=ST(r,Zi),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:ks!==null?{id:xr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},u=J0(r),u.return=o,o.child=u,Ln=o,kt=null)):r=null,r===null)throw Ls(o);return o.lanes=536870912,null}return Yf(o,f)}var _=r.memoizedState;if(_!==null){var b=_.dehydrated;if(fm(o),v)if(o.flags&256)o.flags&=-257,o=cE(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(dn||Ha(r,o,u,!1),v=(u&r.childLanes)!==0,dn||v){if(f=Rt,f!==null&&(b=$n(f,u),b!==0&&b!==_.retryLane))throw _.retryLane=b,Go(r,b),Ei(f,r,b),Mm;sd(),o=cE(r,o,u)}else r=_.treeContext,kt=tr(b.nextSibling),Ln=o,rt=!0,Vs=null,Zi=!1,r!==null&&W0(o,r),o=Yf(o,f),o.flags|=4096;return o}return r=jr(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function jf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Pm(r,o,u,f,v){return Yo(o),u=hm(r,o,u,f,void 0,v),f=pm(),r!==null&&!dn?(mm(r,o,v),ts(r,o,v)):(rt&&f&&Yp(o),o.flags|=1,Un(r,o,u,v),o.child)}function fE(r,o,u,f,v,_){return Yo(o),o.updateQueue=null,u=p_(o,f,u,v),h_(r),f=pm(),r!==null&&!dn?(mm(r,o,_),ts(r,o,_)):(rt&&f&&Yp(o),o.flags|=1,Un(r,o,u,_),o.child)}function dE(r,o,u,f,v){if(Yo(o),o.stateNode===null){var _=Fa,b=u.contextType;typeof b=="object"&&b!==null&&(_=On(b)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nm,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},sm(o),b=u.contextType,_.context=typeof b=="object"&&b!==null?On(b):Fa,_.state=o.memoizedState,b=u.getDerivedStateFromProps,typeof b=="function"&&(xm(o,u,b,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(b=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),b!==_.state&&Nm.enqueueReplaceState(_,_.state,null),Su(o,f,_,v),Tu(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var D=o.memoizedProps,z=ea(u,D);_.props=z;var Q=_.context,re=u.contextType;b=Fa,typeof re=="object"&&re!==null&&(b=On(re));var oe=u.getDerivedStateFromProps;re=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||Q!==b)&&X_(o,_,f,b),Us=!1;var X=o.memoizedState;_.state=X,Su(o,f,_,v),Tu(),Q=o.memoizedState,D||X!==Q||Us?(typeof oe=="function"&&(xm(o,u,oe,f),Q=o.memoizedState),(z=Us||Q_(o,u,z,f,X,Q,b))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),_.props=f,_.state=Q,_.context=b,f=z):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,om(r,o),b=o.memoizedProps,re=ea(u,b),_.props=re,oe=o.pendingProps,X=_.context,Q=u.contextType,z=Fa,typeof Q=="object"&&Q!==null&&(z=On(Q)),D=u.getDerivedStateFromProps,(Q=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==oe||X!==z)&&X_(o,_,f,z),Us=!1,X=o.memoizedState,_.state=X,Su(o,f,_,v),Tu();var ne=o.memoizedState;b!==oe||X!==ne||Us||r!==null&&r.dependencies!==null&&Nf(r.dependencies)?(typeof D=="function"&&(xm(o,u,D,f),ne=o.memoizedState),(re=Us||Q_(o,u,re,f,X,ne,z)||r!==null&&r.dependencies!==null&&Nf(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,z)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=z,f=re):(typeof _.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,jf(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=Xo(o,r.child,null,v),o.child=Xo(o,null,u,v)):Un(r,o,u,v),o.memoizedState=_.state,r=o.child):r=ts(r,o,v),r}function hE(r,o,u,f){return $o(),o.flags|=256,Un(r,o,u,f),o.child}var km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(r){return{baseLanes:r,cachePool:n_()}}function Lm(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Vi),r}function pE(r,o,u){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,b;if((b=_)||(b=r!==null&&r.memoizedState===null?!1:(rn.current&2)!==0),b&&(v=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,r===null){if(rt){if(v?Bs(o):zs(),(r=kt)?(r=ST(r,Zi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:ks!==null?{id:xr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},u=J0(r),u.return=o,o.child=u,Ln=o,kt=null)):r=null,r===null)throw Ls(o);return vg(r)?o.lanes=32:o.lanes=536870912,null}var D=f.children;return f=f.fallback,v?(zs(),v=o.mode,D=Wf({mode:"hidden",children:D},v),f=Ko(f,v,u,null),D.return=o,f.return=o,D.sibling=f,o.child=D,f=o.child,f.memoizedState=Vm(u),f.childLanes=Lm(r,b,u),o.memoizedState=km,Iu(null,f)):(Bs(o),Om(o,D))}var z=r.memoizedState;if(z!==null&&(D=z.dehydrated,D!==null)){if(_)o.flags&256?(Bs(o),o.flags&=-257,o=Um(r,o,u)):o.memoizedState!==null?(zs(),o.child=r.child,o.flags|=128,o=null):(zs(),D=f.fallback,v=o.mode,f=Wf({mode:"visible",children:f.children},v),D=Ko(D,v,u,null),D.flags|=2,f.return=o,D.return=o,f.sibling=D,o.child=f,Xo(o,r.child,null,u),f=o.child,f.memoizedState=Vm(u),f.childLanes=Lm(r,b,u),o.memoizedState=km,o=Iu(null,f));else if(Bs(o),vg(D)){if(b=D.nextSibling&&D.nextSibling.dataset,b)var Q=b.dgst;b=Q,f=Error(i(419)),f.stack="",f.digest=b,mu({value:f,source:null,stack:null}),o=Um(r,o,u)}else if(dn||Ha(r,o,u,!1),b=(u&r.childLanes)!==0,dn||b){if(b=Rt,b!==null&&(f=$n(b,u),f!==0&&f!==z.retryLane))throw z.retryLane=f,Go(r,f),Ei(b,r,f),Mm;yg(D)||sd(),o=Um(r,o,u)}else yg(D)?(o.flags|=192,o.child=r.child,o=null):(r=z.treeContext,kt=tr(D.nextSibling),Ln=o,rt=!0,Vs=null,Zi=!1,r!==null&&W0(o,r),o=Om(o,f.children),o.flags|=4096);return o}return v?(zs(),D=f.fallback,v=o.mode,z=r.child,Q=z.sibling,f=jr(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,Q!==null?D=jr(Q,D):(D=Ko(D,v,u,null),D.flags|=2),D.return=o,f.return=o,f.sibling=D,o.child=f,Iu(null,f),f=o.child,D=r.child.memoizedState,D===null?D=Vm(u):(v=D.cachePool,v!==null?(z=cn._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=n_(),D={baseLanes:D.baseLanes|u,cachePool:v}),f.memoizedState=D,f.childLanes=Lm(r,b,u),o.memoizedState=km,Iu(r.child,f)):(Bs(o),u=r.child,r=u.sibling,u=jr(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(b=o.deletions,b===null?(o.deletions=[r],o.flags|=16):b.push(r)),o.child=u,o.memoizedState=null,u)}function Om(r,o){return o=Wf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Wf(r,o){return r=Di(22,r,null,o),r.lanes=0,r}function Um(r,o,u){return Xo(o,r.child,null,u),r=Om(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function mE(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),Zp(r.return,o,u)}function Fm(r,o,u,f,v,_){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=u,b.tailMode=v,b.treeForkCount=_)}function gE(r,o,u){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var b=rn.current,D=(b&2)!==0;if(D?(b=b&1|2,o.flags|=128):b&=1,fe(rn,b),Un(r,o,f,u),f=rt?pu:0,!D&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&mE(r,u,o);else if(r.tag===19)mE(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Uf(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Fm(o,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Uf(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}Fm(o,!0,u,null,_,f);break;case"together":Fm(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function ts(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ks|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Ha(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=jr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=jr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function qm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Nf(r)))}function j1(r,o,u){switch(o.tag){case 3:Ht(o,o.stateNode.containerInfo),Os(o,cn,r.memoizedState.cache),$o();break;case 27:case 5:Gn(o);break;case 4:Ht(o,o.stateNode.containerInfo);break;case 10:Os(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,fm(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Bs(o),o.flags|=128,null):(u&o.child.childLanes)!==0?pE(r,o,u):(Bs(o),r=ts(r,o,u),r!==null?r.sibling:null);Bs(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Ha(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return gE(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(rn,rn.current),f)break;return null;case 22:return o.lanes=0,lE(r,o,u,o.pendingProps);case 24:Os(o,cn,r.memoizedState.cache)}return ts(r,o,u)}function yE(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)dn=!0;else{if(!qm(r,u)&&(o.flags&128)===0)return dn=!1,j1(r,o,u);dn=(r.flags&131072)!==0}else dn=!1,rt&&(o.flags&1048576)!==0&&j0(o,pu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=Wo(o.elementType),o.type=r,typeof r=="function")Kp(r)?(f=ea(r,f),o.tag=1,o=dE(null,o,r,f,u)):(o.tag=0,o=Pm(null,o,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===J){o.tag=11,o=sE(null,o,r,f,u);break e}else if(v===I){o.tag=14,o=oE(null,o,r,f,u);break e}}throw o=Ie(r)||r,Error(i(306,o,""))}}return o;case 0:return Pm(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=ea(f,o.pendingProps),dE(r,o,f,v,u);case 3:e:{if(Ht(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,om(r,o),Su(o,f,null,u);var b=o.memoizedState;if(f=b.cache,Os(o,cn,f),f!==_.cache&&em(o,[cn],u,!0),Tu(),f=b.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=hE(r,o,f,u);break e}else if(f!==v){v=Wi(Error(i(424)),o),mu(v),o=hE(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(kt=tr(r.firstChild),Ln=o,rt=!0,Vs=null,Zi=!0,u=l_(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if($o(),f===v){o=ts(r,o,u);break e}Un(r,o,f,u)}o=o.child}return o;case 26:return jf(r,o),r===null?(u=RT(o.type,null,o.pendingProps,null))?o.memoizedState=u:rt||(u=o.type,r=o.pendingProps,f=dd(Ve.current).createElement(u),f[Mt]=o,f[nn]=r,Fn(f,u,r),Bt(f),o.stateNode=f):o.memoizedState=RT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Gn(o),r===null&&rt&&(f=o.stateNode=wT(o.type,o.pendingProps,Ve.current),Ln=o,Zi=!0,v=kt,Ws(o.type)?(_g=v,kt=tr(f.firstChild)):kt=v),Un(r,o,o.pendingProps.children,u),jf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&rt&&((v=f=kt)&&(f=wN(f,o.type,o.pendingProps,Zi),f!==null?(o.stateNode=f,Ln=o,kt=tr(f.firstChild),Zi=!1,v=!0):v=!1),v||Ls(o)),Gn(o),v=o.type,_=o.pendingProps,b=r!==null?r.memoizedProps:null,f=_.children,pg(v,_)?f=null:b!==null&&pg(v,b)&&(o.flags|=32),o.memoizedState!==null&&(v=hm(r,o,q1,null,null,u),zu._currentValue=v),jf(r,o),Un(r,o,f,u),o.child;case 6:return r===null&&rt&&((r=u=kt)&&(u=CN(u,o.pendingProps,Zi),u!==null?(o.stateNode=u,Ln=o,kt=null,r=!0):r=!1),r||Ls(o)),null;case 13:return pE(r,o,u);case 4:return Ht(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Xo(o,null,f,u):Un(r,o,f,u),o.child;case 11:return sE(r,o,o.type,o.pendingProps,u);case 7:return Un(r,o,o.pendingProps,u),o.child;case 8:return Un(r,o,o.pendingProps.children,u),o.child;case 12:return Un(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Os(o,o.type,f.value),Un(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Yo(o),v=On(v),f=f(v),o.flags|=1,Un(r,o,f,u),o.child;case 14:return oE(r,o,o.type,o.pendingProps,u);case 15:return aE(r,o,o.type,o.pendingProps,u);case 19:return gE(r,o,u);case 31:return Y1(r,o,u);case 22:return lE(r,o,u,o.pendingProps);case 24:return Yo(o),f=On(cn),r===null?(v=im(),v===null&&(v=Rt,_=tm(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:f,cache:v},sm(o),Os(o,cn,v)):((r.lanes&u)!==0&&(om(r,o),Su(o,null,null,u),Tu()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Os(o,cn,f)):(f=_.cache,Os(o,cn,f),f!==v.cache&&em(o,[cn],u,!0))),Un(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ns(r){r.flags|=4}function Bm(r,o,u,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(GE())r.flags|=8192;else throw Qo=kf,rm}else r.flags&=-16777217}function vE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!PT(o))if(GE())r.flags|=8192;else throw Qo=kf,rm}function Qf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Bi():536870912,r.lanes|=o,tl|=o)}function Ru(r,o){if(!rt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Vt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function W1(r,o,u){var f=o.pendingProps;switch(jp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(o),null;case 1:return Vt(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Xr(cn),At(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(za(o)?ns(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Qp())),Vt(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(ns(o),_!==null?(Vt(o),vE(o,_)):(Vt(o),Bm(o,v,null,f,u))):_?_!==r.memoizedState?(ns(o),Vt(o),vE(o,_)):(Vt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ns(o),Vt(o),Bm(o,v,r,f,u)),null;case 27:if(di(o),u=Ve.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ns(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Vt(o),null}r=he.current,za(o)?Q0(o):(r=wT(v,f,u),o.stateNode=r,ns(o))}return Vt(o),null;case 5:if(di(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ns(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Vt(o),null}if(_=he.current,za(o))Q0(o);else{var b=dd(Ve.current);switch(_){case 1:_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=b.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?b.createElement(v,{is:f.is}):b.createElement(v)}}_[Mt]=o,_[nn]=f;e:for(b=o.child;b!==null;){if(b.tag===5||b.tag===6)_.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===o)break e;for(;b.sibling===null;){if(b.return===null||b.return===o)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}o.stateNode=_;e:switch(Fn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ns(o)}}return Vt(o),Bm(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ns(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Ve.current,za(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=Ln,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Mt]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||pT(r.nodeValue,u)),r||Ls(o,!0)}else r=dd(r).createTextNode(f),r[Mt]=o,o.stateNode=r}return Vt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(f=za(o),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Mt]=o}else $o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vt(o),r=!1}else u=Qp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Pi(o),o):(Pi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Vt(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=za(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Mt]=o}else $o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vt(o),v=!1}else v=Qp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Pi(o),o):(Pi(o),null)}return Pi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Qf(o,o.updateQueue),Vt(o),null);case 4:return At(),r===null&&ug(o.stateNode.containerInfo),Vt(o),null;case 10:return Xr(o.type),Vt(o),null;case 19:if(Z(rn),f=o.memoizedState,f===null)return Vt(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)Ru(f,!1);else{if(Wt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Uf(r),_!==null){for(o.flags|=128,Ru(f,!1),r=_.updateQueue,o.updateQueue=r,Qf(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)$0(u,r),u=u.sibling;return fe(rn,rn.current&1|2),rt&&Wr(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&ht()>nd&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304)}else{if(!v)if(r=Uf(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Qf(o,r),Ru(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!rt)return Vt(o),null}else 2*ht()-f.renderingStartTime>nd&&u!==536870912&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=ht(),r.sibling=null,u=rn.current,fe(rn,v?u&1|2:u&1),rt&&Wr(o,f.treeForkCount),r):(Vt(o),null);case 22:case 23:return Pi(o),cm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Vt(o),o.subtreeFlags&6&&(o.flags|=8192)):Vt(o),u=o.updateQueue,u!==null&&Qf(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&Z(jo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Xr(cn),Vt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Q1(r,o){switch(jp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Xr(cn),At(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return di(o),null;case 31:if(o.memoizedState!==null){if(Pi(o),o.alternate===null)throw Error(i(340));$o()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Pi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));$o()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Z(rn),null;case 4:return At(),null;case 10:return Xr(o.type),null;case 22:case 23:return Pi(o),cm(),r!==null&&Z(jo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Xr(cn),null;case 25:return null;default:return null}}function _E(r,o){switch(jp(o),o.tag){case 3:Xr(cn),At();break;case 26:case 27:case 5:di(o);break;case 4:At();break;case 31:o.memoizedState!==null&&Pi(o);break;case 13:Pi(o);break;case 19:Z(rn);break;case 10:Xr(o.type);break;case 22:case 23:Pi(o),cm(),r!==null&&Z(jo);break;case 24:Xr(cn)}}function xu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var _=u.create,b=u.inst;f=_(),b.destroy=f}u=u.next}while(u!==v)}}catch(D){St(o,o.return,D)}}function Hs(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var b=f.inst,D=b.destroy;if(D!==void 0){b.destroy=void 0,v=o;var z=u,Q=D;try{Q()}catch(re){St(v,z,re)}}}f=f.next}while(f!==_)}}catch(re){St(o,o.return,re)}}function EE(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{c_(o,u)}catch(f){St(r,r.return,f)}}}function TE(r,o,u){u.props=ea(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){St(r,o,f)}}function Nu(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){St(r,o,v)}}function Dr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){St(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){St(r,o,v)}else u.current=null}function SE(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){St(r,r.return,v)}}function zm(r,o,u){try{var f=r.stateNode;_N(f,r.type,u,o),f[nn]=o}catch(v){St(r,r.return,v)}}function AE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ws(r.type)||r.tag===4}function Hm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||AE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gm(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Rn));else if(f!==4&&(f===27&&Ws(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Gm(r,o,u),r=r.sibling;r!==null;)Gm(r,o,u),r=r.sibling}function Xf(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&Ws(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Xf(r,o,u),r=r.sibling;r!==null;)Xf(r,o,u),r=r.sibling}function bE(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Fn(o,f,u),o[Mt]=r,o[nn]=u}catch(_){St(r,r.return,_)}}var is=!1,hn=!1,Km=!1,wE=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function X1(r,o){if(r=r.containerInfo,dg=_d,r=O0(r),Up(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var b=0,D=-1,z=-1,Q=0,re=0,oe=r,X=null;t:for(;;){for(var ne;oe!==u||v!==0&&oe.nodeType!==3||(D=b+v),oe!==_||f!==0&&oe.nodeType!==3||(z=b+f),oe.nodeType===3&&(b+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)X=oe,oe=ne;for(;;){if(oe===r)break t;if(X===u&&++Q===v&&(D=b),X===_&&++re===f&&(z=b),(ne=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=ne}u=D===-1||z===-1?null:{start:D,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(hg={focusedElem:r,selectionRange:u},_d=!1,Dn=o;Dn!==null;)if(o=Dn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Dn=r;else for(;Dn!==null;){switch(o=Dn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var Te=ea(u.type,v);r=f.getSnapshotBeforeUpdate(Te,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Me){St(u,u.return,Me)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)gg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":gg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Dn=r;break}Dn=o.return}}function CE(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ss(r,u),f&4&&xu(5,u);break;case 1:if(ss(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(b){St(u,u.return,b)}else{var v=ea(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(b){St(u,u.return,b)}}f&64&&EE(u),f&512&&Nu(u,u.return);break;case 3:if(ss(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{c_(r,o)}catch(b){St(u,u.return,b)}}break;case 27:o===null&&f&4&&bE(u);case 26:case 5:ss(r,u),o===null&&f&4&&SE(u),f&512&&Nu(u,u.return);break;case 12:ss(r,u);break;case 31:ss(r,u),f&4&&xE(r,u);break;case 13:ss(r,u),f&4&&NE(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=aN.bind(null,u),IN(r,u))));break;case 22:if(f=u.memoizedState!==null||is,!f){o=o!==null&&o.memoizedState!==null||hn,v=is;var _=hn;is=f,(hn=o)&&!_?os(r,u,(u.subtreeFlags&8772)!==0):ss(r,u),is=v,hn=_}break;case 30:break;default:ss(r,u)}}function IE(r){var o=r.alternate;o!==null&&(r.alternate=null,IE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Ki(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var zt=null,gi=!1;function rs(r,o,u){for(u=u.child;u!==null;)RE(r,o,u),u=u.sibling}function RE(r,o,u){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(bi,u)}catch{}switch(u.tag){case 26:hn||Dr(u,o),rs(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:hn||Dr(u,o);var f=zt,v=gi;Ws(u.type)&&(zt=u.stateNode,gi=!1),rs(r,o,u),Fu(u.stateNode),zt=f,gi=v;break;case 5:hn||Dr(u,o);case 6:if(f=zt,v=gi,zt=null,rs(r,o,u),zt=f,gi=v,zt!==null)if(gi)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(u.stateNode)}catch(_){St(u,o,_)}else try{zt.removeChild(u.stateNode)}catch(_){St(u,o,_)}break;case 18:zt!==null&&(gi?(r=zt,ET(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),ul(r)):ET(zt,u.stateNode));break;case 4:f=zt,v=gi,zt=u.stateNode.containerInfo,gi=!0,rs(r,o,u),zt=f,gi=v;break;case 0:case 11:case 14:case 15:Hs(2,u,o),hn||Hs(4,u,o),rs(r,o,u);break;case 1:hn||(Dr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&TE(u,o,f)),rs(r,o,u);break;case 21:rs(r,o,u);break;case 22:hn=(f=hn)||u.memoizedState!==null,rs(r,o,u),hn=f;break;default:rs(r,o,u)}}function xE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ul(r)}catch(u){St(o,o.return,u)}}}function NE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ul(r)}catch(u){St(o,o.return,u)}}function Z1(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new wE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new wE),o;default:throw Error(i(435,r.tag))}}function Zf(r,o){var u=Z1(r);o.forEach(function(f){if(!u.has(f)){u.add(f);var v=lN.bind(null,r,f);f.then(v,v)}})}function yi(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=r,b=o,D=b;e:for(;D!==null;){switch(D.tag){case 27:if(Ws(D.type)){zt=D.stateNode,gi=!1;break e}break;case 5:zt=D.stateNode,gi=!1;break e;case 3:case 4:zt=D.stateNode.containerInfo,gi=!0;break e}D=D.return}if(zt===null)throw Error(i(160));RE(_,b,v),zt=null,gi=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)DE(o,r),o=o.sibling}var hr=null;function DE(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yi(o,r),vi(r),f&4&&(Hs(3,r,r.return),xu(3,r),Hs(5,r,r.return));break;case 1:yi(o,r),vi(r),f&512&&(hn||u===null||Dr(u,u.return)),f&64&&is&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=hr;if(yi(o,r),vi(r),f&512&&(hn||u===null||Dr(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Gi]||_[Mt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Fn(_,f,u),_[Mt]=r,Bt(_),f=_;break e;case"link":var b=DT("link","href",v).get(f+(u.href||""));if(b){for(var D=0;D<b.length;D++)if(_=b[D],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){b.splice(D,1);break t}}_=v.createElement(f),Fn(_,f,u),v.head.appendChild(_);break;case"meta":if(b=DT("meta","content",v).get(f+(u.content||""))){for(D=0;D<b.length;D++)if(_=b[D],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){b.splice(D,1);break t}}_=v.createElement(f),Fn(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Mt]=r,Bt(_),f=_}r.stateNode=f}else MT(v,r.type,r.stateNode);else r.stateNode=NT(v,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?MT(v,r.type,r.stateNode):NT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&zm(r,r.memoizedProps,u.memoizedProps)}break;case 27:yi(o,r),vi(r),f&512&&(hn||u===null||Dr(u,u.return)),u!==null&&f&4&&zm(r,r.memoizedProps,u.memoizedProps);break;case 5:if(yi(o,r),vi(r),f&512&&(hn||u===null||Dr(u,u.return)),r.flags&32){v=r.stateNode;try{Yi(v,"")}catch(Te){St(r,r.return,Te)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,zm(r,v,u!==null?u.memoizedProps:v)),f&1024&&(Km=!0);break;case 6:if(yi(o,r),vi(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(Te){St(r,r.return,Te)}}break;case 3:if(md=null,v=hr,hr=hd(o.containerInfo),yi(o,r),hr=v,vi(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{ul(o.containerInfo)}catch(Te){St(r,r.return,Te)}Km&&(Km=!1,ME(r));break;case 4:f=hr,hr=hd(r.stateNode.containerInfo),yi(o,r),vi(r),hr=f;break;case 12:yi(o,r),vi(r);break;case 31:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Zf(r,f)));break;case 13:yi(o,r),vi(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(td=ht()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Zf(r,f)));break;case 22:v=r.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,Q=is,re=hn;if(is=Q||v,hn=re||z,yi(o,r),hn=re,is=Q,vi(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||z||is||hn||ta(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){z=u=o;try{if(_=z.stateNode,v)b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{D=z.stateNode;var oe=z.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;D.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Te){St(z,z.return,Te)}}}else if(o.tag===6){if(u===null){z=o;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(Te){St(z,z.return,Te)}}}else if(o.tag===18){if(u===null){z=o;try{var ne=z.stateNode;v?TT(ne,!0):TT(z.stateNode,!1)}catch(Te){St(z,z.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Zf(r,u))));break;case 19:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Zf(r,f)));break;case 30:break;case 21:break;default:yi(o,r),vi(r)}}function vi(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(AE(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=Hm(r);Xf(r,_,v);break;case 5:var b=u.stateNode;u.flags&32&&(Yi(b,""),u.flags&=-33);var D=Hm(r);Xf(r,D,b);break;case 3:case 4:var z=u.stateNode.containerInfo,Q=Hm(r);Gm(r,Q,z);break;default:throw Error(i(161))}}catch(re){St(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ME(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ME(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ss(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)CE(r,o.alternate,o),o=o.sibling}function ta(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Hs(4,o,o.return),ta(o);break;case 1:Dr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&TE(o,o.return,u),ta(o);break;case 27:Fu(o.stateNode);case 26:case 5:Dr(o,o.return),ta(o);break;case 22:o.memoizedState===null&&ta(o);break;case 30:ta(o);break;default:ta(o)}r=r.sibling}}function os(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,b=_.flags;switch(_.tag){case 0:case 11:case 15:os(v,_,u),xu(4,_);break;case 1:if(os(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){St(f,f.return,Q)}if(f=_,v=f.updateQueue,v!==null){var D=f.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)u_(z[v],D)}catch(Q){St(f,f.return,Q)}}u&&b&64&&EE(_),Nu(_,_.return);break;case 27:bE(_);case 26:case 5:os(v,_,u),u&&f===null&&b&4&&SE(_),Nu(_,_.return);break;case 12:os(v,_,u);break;case 31:os(v,_,u),u&&b&4&&xE(v,_);break;case 13:os(v,_,u),u&&b&4&&NE(v,_);break;case 22:_.memoizedState===null&&os(v,_,u),Nu(_,_.return);break;case 30:break;default:os(v,_,u)}o=o.sibling}}function $m(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&gu(u))}function Jm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&gu(r))}function pr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)PE(r,o,u,f),o=o.sibling}function PE(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:pr(r,o,u,f),v&2048&&xu(9,o);break;case 1:pr(r,o,u,f);break;case 3:pr(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&gu(r)));break;case 12:if(v&2048){pr(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,b=_.id,D=_.onPostCommit;typeof D=="function"&&D(b,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(z){St(o,o.return,z)}}else pr(r,o,u,f);break;case 31:pr(r,o,u,f);break;case 13:pr(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,b=o.alternate,o.memoizedState!==null?_._visibility&2?pr(r,o,u,f):Du(r,o):_._visibility&2?pr(r,o,u,f):(_._visibility|=2,Xa(r,o,u,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&$m(b,o);break;case 24:pr(r,o,u,f),v&2048&&Jm(o.alternate,o);break;default:pr(r,o,u,f)}}function Xa(r,o,u,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,b=o,D=u,z=f,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Xa(_,b,D,z,v),xu(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?Xa(_,b,D,z,v):Du(_,b):(re._visibility|=2,Xa(_,b,D,z,v)),v&&Q&2048&&$m(b.alternate,b);break;case 24:Xa(_,b,D,z,v),v&&Q&2048&&Jm(b.alternate,b);break;default:Xa(_,b,D,z,v)}o=o.sibling}}function Du(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:Du(u,f),v&2048&&$m(f.alternate,f);break;case 24:Du(u,f),v&2048&&Jm(f.alternate,f);break;default:Du(u,f)}o=o.sibling}}var Mu=8192;function Za(r,o,u){if(r.subtreeFlags&Mu)for(r=r.child;r!==null;)kE(r,o,u),r=r.sibling}function kE(r,o,u){switch(r.tag){case 26:Za(r,o,u),r.flags&Mu&&r.memoizedState!==null&&FN(u,hr,r.memoizedState,r.memoizedProps);break;case 5:Za(r,o,u);break;case 3:case 4:var f=hr;hr=hd(r.stateNode.containerInfo),Za(r,o,u),hr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=Mu,Mu=16777216,Za(r,o,u),Mu=f):Za(r,o,u));break;default:Za(r,o,u)}}function VE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Pu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];Dn=f,OE(f,r)}VE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)LE(r),r=r.sibling}function LE(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&Hs(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,ed(r)):Pu(r);break;default:Pu(r)}}function ed(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];Dn=f,OE(f,r)}VE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Hs(8,o,o.return),ed(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,ed(o));break;default:ed(o)}r=r.sibling}}function OE(r,o){for(;Dn!==null;){var u=Dn;switch(u.tag){case 0:case 11:case 15:Hs(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:gu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Dn=f;else e:for(u=r;Dn!==null;){f=Dn;var v=f.sibling,_=f.return;if(IE(f),f===u){Dn=null;break e}if(v!==null){v.return=_,Dn=v;break e}Dn=_}}}var eN={getCacheForType:function(r){var o=On(cn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return On(cn).controller.signal}},tN=typeof WeakMap=="function"?WeakMap:Map,pt=0,Rt=null,We=null,Ze=0,Tt=0,ki=null,Gs=!1,el=!1,Ym=!1,as=0,Wt=0,Ks=0,na=0,jm=0,Vi=0,tl=0,ku=null,_i=null,Wm=!1,td=0,UE=0,nd=1/0,id=null,$s=null,Tn=0,Js=null,nl=null,ls=0,Qm=0,Xm=null,FE=null,Vu=0,Zm=null;function Li(){return(pt&2)!==0&&Ze!==0?Ze&-Ze:ee.T!==null?sg():ii()}function qE(){if(Vi===0)if((Ze&536870912)===0||rt){var r=je;je<<=1,(je&3932160)===0&&(je=262144),Vi=r}else Vi=536870912;return r=Mi.current,r!==null&&(r.flags|=32),Vi}function Ei(r,o,u){(r===Rt&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)&&(il(r,0),Ys(r,Ze,Vi,!1)),Nt(r,u),((pt&2)===0||r!==Rt)&&(r===Rt&&((pt&2)===0&&(na|=u),Wt===4&&Ys(r,Ze,Vi,!1)),Mr(r))}function BE(r,o,u){if((pt&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Ke(r,o),v=f?rN(r,o):tg(r,o,!0),_=f;do{if(v===0){el&&!f&&Ys(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!nN(u)){v=tg(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;e:{var D=r;v=ku;var z=D.current.memoizedState.isDehydrated;if(z&&(il(D,b).flags|=256),b=tg(D,b,!1),b!==2){if(Ym&&!z){D.errorRecoveryDisabledLanes|=_,na|=_,v=4;break e}_=_i,_i=v,_!==null&&(_i===null?_i=_:_i.push.apply(_i,_))}v=b}if(_=!1,v!==2)continue}}if(v===1){il(r,0),Ys(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ys(f,o,Vi,!Gs);break e;case 2:_i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=td+300-ht(),10<v)){if(Ys(f,o,Vi,!Gs),De(f,0,!0)!==0)break e;ls=o,f.timeoutHandle=vT(zE.bind(null,f,u,_i,id,Wm,o,Vi,na,tl,Gs,_,"Throttled",-0,0),v);break e}zE(f,u,_i,id,Wm,o,Vi,na,tl,Gs,_,null,-0,0)}}break}while(!0);Mr(r)}function zE(r,o,u,f,v,_,b,D,z,Q,re,oe,X,ne){if(r.timeoutHandle=-1,oe=o.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rn},kE(o,_,oe);var Te=(_&62914560)===_?td-ht():(_&4194048)===_?UE-ht():0;if(Te=qN(oe,Te),Te!==null){ls=_,r.cancelPendingCommit=Te(WE.bind(null,r,o,_,u,f,v,b,D,z,re,oe,null,X,ne)),Ys(r,_,b,!Q);return}}WE(r,o,_,u,f,v,b,D,z)}function nN(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!Ni(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ys(r,o,u,f){o&=~jm,o&=~na,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-be(v),b=1<<_;f[_]=-1,v&=~b}u!==0&&ni(r,u,o)}function rd(){return(pt&6)===0?(Lu(0),!1):!0}function eg(){if(We!==null){if(Tt===0)var r=We.return;else r=We,Qr=Jo=null,gm(r),Ja=null,vu=0,r=We;for(;r!==null;)_E(r.alternate,r),r=r.return;We=null}}function il(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,SN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ls=0,eg(),Rt=r,We=u=jr(r.current,null),Ze=o,Tt=0,ki=null,Gs=!1,el=Ke(r,o),Ym=!1,tl=Vi=jm=na=Ks=Wt=0,_i=ku=null,Wm=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-be(f),_=1<<v;o|=r[v],f&=~_}return as=o,wf(),u}function HE(r,o){ze=null,ee.H=Cu,o===$a||o===Pf?(o=s_(),Tt=3):o===rm?(o=s_(),Tt=4):Tt=o===Mm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ki=o,We===null&&(Wt=1,Jf(r,Wi(o,r.current)))}function GE(){var r=Mi.current;return r===null?!0:(Ze&4194048)===Ze?er===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===er:!1}function KE(){var r=ee.H;return ee.H=Cu,r===null?Cu:r}function $E(){var r=ee.A;return ee.A=eN,r}function sd(){Wt=4,Gs||(Ze&4194048)!==Ze&&Mi.current!==null||(el=!0),(Ks&134217727)===0&&(na&134217727)===0||Rt===null||Ys(Rt,Ze,Vi,!1)}function tg(r,o,u){var f=pt;pt|=2;var v=KE(),_=$E();(Rt!==r||Ze!==o)&&(id=null,il(r,o)),o=!1;var b=Wt;e:do try{if(Tt!==0&&We!==null){var D=We,z=ki;switch(Tt){case 8:eg(),b=6;break e;case 3:case 2:case 9:case 6:Mi.current===null&&(o=!0);var Q=Tt;if(Tt=0,ki=null,rl(r,D,z,Q),u&&el){b=0;break e}break;default:Q=Tt,Tt=0,ki=null,rl(r,D,z,Q)}}iN(),b=Wt;break}catch(re){HE(r,re)}while(!0);return o&&r.shellSuspendCounter++,Qr=Jo=null,pt=f,ee.H=v,ee.A=_,We===null&&(Rt=null,Ze=0,wf()),b}function iN(){for(;We!==null;)JE(We)}function rN(r,o){var u=pt;pt|=2;var f=KE(),v=$E();Rt!==r||Ze!==o?(id=null,nd=ht()+500,il(r,o)):el=Ke(r,o);e:do try{if(Tt!==0&&We!==null){o=We;var _=ki;t:switch(Tt){case 1:Tt=0,ki=null,rl(r,o,_,1);break;case 2:case 9:if(i_(_)){Tt=0,ki=null,YE(o);break}o=function(){Tt!==2&&Tt!==9||Rt!==r||(Tt=7),Mr(r)},_.then(o,o);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:i_(_)?(Tt=0,ki=null,YE(o)):(Tt=0,ki=null,rl(r,o,_,7));break;case 5:var b=null;switch(We.tag){case 26:b=We.memoizedState;case 5:case 27:var D=We;if(b?PT(b):D.stateNode.complete){Tt=0,ki=null;var z=D.sibling;if(z!==null)We=z;else{var Q=D.return;Q!==null?(We=Q,od(Q)):We=null}break t}}Tt=0,ki=null,rl(r,o,_,5);break;case 6:Tt=0,ki=null,rl(r,o,_,6);break;case 8:eg(),Wt=6;break e;default:throw Error(i(462))}}sN();break}catch(re){HE(r,re)}while(!0);return Qr=Jo=null,ee.H=f,ee.A=v,pt=u,We!==null?0:(Rt=null,Ze=0,wf(),Wt)}function sN(){for(;We!==null&&!ar();)JE(We)}function JE(r){var o=yE(r.alternate,r,as);r.memoizedProps=r.pendingProps,o===null?od(r):We=o}function YE(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=fE(u,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=fE(u,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:gm(o);default:_E(u,o),o=We=$0(o,as),o=yE(u,o,as)}r.memoizedProps=r.pendingProps,o===null?od(r):We=o}function rl(r,o,u,f){Qr=Jo=null,gm(o),Ja=null,vu=0;var v=o.return;try{if(J1(r,v,o,u,Ze)){Wt=1,Jf(r,Wi(u,r.current)),We=null;return}}catch(_){if(v!==null)throw We=v,_;Wt=1,Jf(r,Wi(u,r.current)),We=null;return}o.flags&32768?(rt||f===1?r=!0:el||(Ze&536870912)!==0?r=!1:(Gs=r=!0,(f===2||f===9||f===3||f===6)&&(f=Mi.current,f!==null&&f.tag===13&&(f.flags|=16384))),jE(o,r)):od(o)}function od(r){var o=r;do{if((o.flags&32768)!==0){jE(o,Gs);return}r=o.return;var u=W1(o.alternate,o,as);if(u!==null){We=u;return}if(o=o.sibling,o!==null){We=o;return}We=o=r}while(o!==null);Wt===0&&(Wt=5)}function jE(r,o){do{var u=Q1(r.alternate,r);if(u!==null){u.flags&=32767,We=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){We=r;return}We=r=u}while(r!==null);Wt=6,We=null}function WE(r,o,u,f,v,_,b,D,z){r.cancelPendingCommit=null;do ad();while(Tn!==0);if((pt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Hp,Et(r,u,_,b,D,z),r===Rt&&(We=Rt=null,Ze=0),nl=o,Js=r,ls=u,Qm=_,Xm=v,FE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uN(an,function(){return tT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,v=ce.p,ce.p=2,b=pt,pt|=4;try{X1(r,o,u)}finally{pt=b,ce.p=v,ee.T=f}}Tn=1,QE(),XE(),ZE()}}function QE(){if(Tn===1){Tn=0;var r=Js,o=nl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=pt;pt|=4;try{DE(o,r);var _=hg,b=O0(r.containerInfo),D=_.focusedElem,z=_.selectionRange;if(b!==D&&D&&D.ownerDocument&&L0(D.ownerDocument.documentElement,D)){if(z!==null&&Up(D)){var Q=z.start,re=z.end;if(re===void 0&&(re=Q),"selectionStart"in D)D.selectionStart=Q,D.selectionEnd=Math.min(re,D.value.length);else{var oe=D.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var ne=X.getSelection(),Te=D.textContent.length,Me=Math.min(z.start,Te),Ct=z.end===void 0?Me:Math.min(z.end,Te);!ne.extend&&Me>Ct&&(b=Ct,Ct=Me,Me=b);var Y=V0(D,Me),K=V0(D,Ct);if(Y&&K&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==K.node||ne.focusOffset!==K.offset)){var W=oe.createRange();W.setStart(Y.node,Y.offset),ne.removeAllRanges(),Me>Ct?(ne.addRange(W),ne.extend(K.node,K.offset)):(W.setEnd(K.node,K.offset),ne.addRange(W))}}}}for(oe=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<oe.length;D++){var se=oe[D];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}_d=!!dg,hg=dg=null}finally{pt=v,ce.p=f,ee.T=u}}r.current=o,Tn=2}}function XE(){if(Tn===2){Tn=0;var r=Js,o=nl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=pt;pt|=4;try{CE(r,o.alternate,o)}finally{pt=v,ce.p=f,ee.T=u}}Tn=3}}function ZE(){if(Tn===4||Tn===3){Tn=0,qi();var r=Js,o=nl,u=ls,f=FE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Tn=5:(Tn=0,nl=Js=null,eT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&($s=null),Vn(u),o=o.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(bi,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=ee.T,v=ce.p,ce.p=2,ee.T=null;try{for(var _=r.onRecoverableError,b=0;b<f.length;b++){var D=f[b];_(D.value,{componentStack:D.stack})}}finally{ee.T=o,ce.p=v}}(ls&3)!==0&&ad(),Mr(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===Zm?Vu++:(Vu=0,Zm=r):Vu=0,Lu(0)}}function eT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,gu(o)))}function ad(){return QE(),XE(),ZE(),tT()}function tT(){if(Tn!==5)return!1;var r=Js,o=Qm;Qm=0;var u=Vn(ls),f=ee.T,v=ce.p;try{ce.p=32>u?32:u,ee.T=null,u=Xm,Xm=null;var _=Js,b=ls;if(Tn=0,nl=Js=null,ls=0,(pt&6)!==0)throw Error(i(331));var D=pt;if(pt|=4,LE(_.current),PE(_,_.current,b,u),pt=D,Lu(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(bi,_)}catch{}return!0}finally{ce.p=v,ee.T=f,eT(r,o)}}function nT(r,o,u){o=Wi(u,o),o=Dm(r.stateNode,o,2),r=qs(r,o,2),r!==null&&(Nt(r,2),Mr(r))}function St(r,o,u){if(r.tag===3)nT(r,r,u);else for(;o!==null;){if(o.tag===3){nT(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($s===null||!$s.has(f))){r=Wi(u,r),u=iE(2),f=qs(o,u,2),f!==null&&(rE(u,f,o,r),Nt(f,2),Mr(f));break}}o=o.return}}function ng(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new tN;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(Ym=!0,v.add(u),r=oN.bind(null,r,o,u),o.then(r,r))}function oN(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Rt===r&&(Ze&u)===u&&(Wt===4||Wt===3&&(Ze&62914560)===Ze&&300>ht()-td?(pt&2)===0&&il(r,0):jm|=u,tl===Ze&&(tl=0)),Mr(r)}function iT(r,o){o===0&&(o=Bi()),r=Go(r,o),r!==null&&(Nt(r,o),Mr(r))}function aN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),iT(r,u)}function lN(r,o){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),iT(r,u)}function uN(r,o){return Ft(r,o)}var ld=null,sl=null,ig=!1,ud=!1,rg=!1,js=0;function Mr(r){r!==sl&&r.next===null&&(sl===null?ld=sl=r:sl=sl.next=r),ud=!0,ig||(ig=!0,fN())}function Lu(r,o){if(!rg&&ud){rg=!0;do for(var u=!1,f=ld;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var b=f.suspendedLanes,D=f.pingedLanes;_=(1<<31-be(42|r)+1)-1,_&=v&~(b&~D),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,aT(f,_))}else _=Ze,_=De(f,f===Rt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Ke(f,_)||(u=!0,aT(f,_));f=f.next}while(u);rg=!1}}function cN(){rT()}function rT(){ud=ig=!1;var r=0;js!==0&&TN()&&(r=js);for(var o=ht(),u=null,f=ld;f!==null;){var v=f.next,_=sT(f,o);_===0?(f.next=null,u===null?ld=v:u.next=v,v===null&&(sl=u)):(u=f,(r!==0||(_&3)!==0)&&(ud=!0)),f=v}Tn!==0&&Tn!==5||Lu(r),js!==0&&(js=0)}function sT(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var b=31-be(_),D=1<<b,z=v[b];z===-1?((D&u)===0||(D&f)!==0)&&(v[b]=En(D,o)):z<=o&&(r.expiredLanes|=D),_&=~D}if(o=Rt,u=Ze,u=De(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&_n(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Ke(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&_n(f),Vn(u)){case 2:case 8:u=Gt;break;case 32:u=an;break;case 268435456:u=Ts;break;default:u=an}return f=oT.bind(null,r),u=Ft(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&_n(f),r.callbackPriority=2,r.callbackNode=null,2}function oT(r,o){if(Tn!==0&&Tn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(ad()&&r.callbackNode!==u)return null;var f=Ze;return f=De(r,r===Rt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(BE(r,f,o),sT(r,ht()),r.callbackNode!=null&&r.callbackNode===u?oT.bind(null,r):null)}function aT(r,o){if(ad())return null;BE(r,o,!0)}function fN(){AN(function(){(pt&6)!==0?Ft(Be,cN):rT()})}function sg(){if(js===0){var r=Ga;r===0&&(r=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),js=r}return js}function lT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Cr(""+r)}function uT(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function dN(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var _=lT((v[nn]||null).action),b=f.submitter;b&&(o=(o=b[nn]||null)?lT(o.formAction):b.getAttribute("formAction"),o!==null&&(_=o,b=null));var D=new Oo("action","action",null,f,v);r.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(js!==0){var z=b?uT(v,b):new FormData(v);wm(u,{pending:!0,data:z,method:v.method,action:_},null,z)}}else typeof _=="function"&&(D.preventDefault(),z=b?uT(v,b):new FormData(v),wm(u,{pending:!0,data:z,method:v.method,action:_},_,z))},currentTarget:v}]})}}for(var og=0;og<zp.length;og++){var ag=zp[og],hN=ag.toLowerCase(),pN=ag[0].toUpperCase()+ag.slice(1);dr(hN,"on"+pN)}dr(q0,"onAnimationEnd"),dr(B0,"onAnimationIteration"),dr(z0,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(N1,"onTransitionRun"),dr(D1,"onTransitionStart"),dr(M1,"onTransitionCancel"),dr(H0,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function cT(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var b=f.length-1;0<=b;b--){var D=f[b],z=D.instance,Q=D.currentTarget;if(D=D.listener,z!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){bf(re)}v.currentTarget=null,_=z}else for(b=0;b<f.length;b++){if(D=f[b],z=D.instance,Q=D.currentTarget,D=D.listener,z!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){bf(re)}v.currentTarget=null,_=z}}}}function Qe(r,o){var u=o[Hi];u===void 0&&(u=o[Hi]=new Set);var f=r+"__bubble";u.has(f)||(fT(o,r,2,!1),u.add(f))}function lg(r,o,u){var f=0;o&&(f|=4),fT(u,r,f,o)}var cd="_reactListening"+Math.random().toString(36).slice(2);function ug(r){if(!r[cd]){r[cd]=!0,ur.forEach(function(u){u!=="selectionchange"&&(mN.has(u)||lg(u,!1,r),lg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[cd]||(o[cd]=!0,lg("selectionchange",!1,o))}}function fT(r,o,u,f){switch(qT(o)){case 2:var v=HN;break;case 8:v=GN;break;default:v=bg}u=v.bind(null,o,u,r),v=void 0,!su||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function cg(r,o,u,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var D=f.stateNode.containerInfo;if(D===v)break;if(b===4)for(b=f.return;b!==null;){var z=b.tag;if((z===3||z===4)&&b.stateNode.containerInfo===v)return;b=b.return}for(;D!==null;){if(b=hi(D),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){f=_=b;continue e}D=D.parentNode}}f=f.return}lf(function(){var Q=_,re=Da(u),oe=[];e:{var X=G0.get(r);if(X!==void 0){var ne=Oo,Te=r;switch(r){case"keypress":if(Lo(u)===0)break e;case"keydown":case"keyup":ne=yf;break;case"focusin":Te="focus",ne=Ns;break;case"focusout":Te="blur",ne=Ns;break;case"beforeblur":case"afterblur":ne=Ns;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=_f;break;case q0:case B0:case z0:ne=ka;break;case H0:ne=Va;break;case"scroll":case"scrollend":ne=uf;break;case"wheel":ne=Tf;break;case"copy":case"cut":case"paste":ne=hf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=cu;break;case"toggle":case"beforetoggle":ne=Ms}var Me=(o&4)!==0,Ct=!Me&&(r==="scroll"||r==="scrollend"),Y=Me?X!==null?X+"Capture":null:X;Me=[];for(var K=Q,W;K!==null;){var se=K;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||Y===null||(se=pi(K,Y),se!=null&&Me.push(Uu(K,se,W))),Ct)break;K=K.return}0<Me.length&&(X=new ne(X,Te,null,u,re),oe.push({event:X,listeners:Me}))}}if((o&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",X&&u!==Na&&(Te=u.relatedTarget||u.fromElement)&&(hi(Te)||Te[Ci]))break e;if((ne||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(Te=u.relatedTarget||u.toElement,ne=Q,Te=Te?hi(Te):null,Te!==null&&(Ct=a(Te),Me=Te.tag,Te!==Ct||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(ne=null,Te=Q),ne!==Te)){if(Me=cf,se="onMouseLeave",Y="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(Me=cu,se="onPointerLeave",Y="onPointerEnter",K="pointer"),Ct=ne==null?X:br(ne),W=Te==null?X:br(Te),X=new Me(se,K+"leave",ne,u,re),X.target=Ct,X.relatedTarget=W,se=null,hi(re)===Q&&(Me=new Me(Y,K+"enter",Te,u,re),Me.target=W,Me.relatedTarget=Ct,se=Me),Ct=se,ne&&Te)t:{for(Me=gN,Y=ne,K=Te,W=0,se=Y;se;se=Me(se))W++;se=0;for(var xe=K;xe;xe=Me(xe))se++;for(;0<W-se;)Y=Me(Y),W--;for(;0<se-W;)K=Me(K),se--;for(;W--;){if(Y===K||K!==null&&Y===K.alternate){Me=Y;break t}Y=Me(Y),K=Me(K)}Me=null}else Me=null;ne!==null&&dT(oe,X,ne,Me,!1),Te!==null&&Ct!==null&&dT(oe,Ct,Te,Me,!0)}}e:{if(X=Q?br(Q):window,ne=X.nodeName&&X.nodeName.toLowerCase(),ne==="select"||ne==="input"&&X.type==="file")var ut=x0;else if(mi(X))if(N0)ut=I1;else{ut=w1;var Ce=b1}else ne=X.nodeName,!ne||ne.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&iu(Q.elementType)&&(ut=x0):ut=C1;if(ut&&(ut=ut(r,Q))){Bo(oe,ut,u,re);break e}Ce&&Ce(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&xa(X,"number",X.value)}switch(Ce=Q?br(Q):window,r){case"focusin":(mi(Ce)||Ce.contentEditable==="true")&&(La=Ce,Fp=Q,hu=null);break;case"focusout":hu=Fp=La=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,U0(oe,u,re);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":U0(oe,u,re)}var He;if(S)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else $e?gt(r,u)&&(et="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(et="onCompositionStart");et&&(j&&u.locale!=="ko"&&($e||et!=="onCompositionStart"?et==="onCompositionEnd"&&$e&&(He=Cs()):(xi=re,Ma="value"in xi?xi.value:xi.textContent,$e=!0)),Ce=fd(Q,et),0<Ce.length&&(et=new au(et,r,null,u,re),oe.push({event:et,listeners:Ce}),He?et.data=He:(He=un(u),He!==null&&(et.data=He)))),(He=k?xn(r,u):Nn(r,u))&&(et=fd(Q,"onBeforeInput"),0<et.length&&(Ce=new au("onBeforeInput","beforeinput",null,u,re),oe.push({event:Ce,listeners:et}),Ce.data=He)),dN(oe,r,Q,u,re)}cT(oe,o)})}function Uu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function fd(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=pi(r,u),v!=null&&f.unshift(Uu(r,v,_)),v=pi(r,o),v!=null&&f.push(Uu(r,v,_))),r.tag===3)return f;r=r.return}return[]}function gN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dT(r,o,u,f,v){for(var _=o._reactName,b=[];u!==null&&u!==f;){var D=u,z=D.alternate,Q=D.stateNode;if(D=D.tag,z!==null&&z===f)break;D!==5&&D!==26&&D!==27||Q===null||(z=Q,v?(Q=pi(u,_),Q!=null&&b.unshift(Uu(u,Q,z))):v||(Q=pi(u,_),Q!=null&&b.push(Uu(u,Q,z)))),u=u.return}b.length!==0&&r.push({event:o,listeners:b})}var yN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function hT(r){return(typeof r=="string"?r:""+r).replace(yN,`
`).replace(vN,"")}function pT(r,o){return o=hT(o),hT(r)===o}function wt(r,o,u,f,v,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Yi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Yi(r,""+f);break;case"className":As(r,"class",f);break;case"tabIndex":As(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":As(r,u,f);break;case"style":of(r,f,_);break;case"data":if(o!=="object"){As(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Cr(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&wt(r,o,"name",v.name,v,null),wt(r,o,"formEncType",v.formEncType,v,null),wt(r,o,"formMethod",v.formMethod,v,null),wt(r,o,"formTarget",v.formTarget,v,null)):(wt(r,o,"encType",v.encType,v,null),wt(r,o,"method",v.method,v,null),wt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Cr(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Rn);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Cr(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),Ss(r,"popover",f);break;case"xlinkActuate":Ji(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ji(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ji(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ji(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ji(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ji(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ji(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ji(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ji(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ss(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Pp.get(u)||u,Ss(r,u,f))}}function fg(r,o,u,f,v,_){switch(u){case"style":of(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Yi(r,f):(typeof f=="number"||typeof f=="bigint")&&Yi(r,""+f);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[nn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Ss(r,u,f)}}}function Fn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var b=u[_];if(b!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,_,b,u,null)}}v&&wt(r,o,"srcSet",u.srcSet,u,null),f&&wt(r,o,"src",u.src,u,null);return;case"input":Qe("invalid",r);var D=_=b=v=null,z=null,Q=null;for(f in u)if(u.hasOwnProperty(f)){var re=u[f];if(re!=null)switch(f){case"name":v=re;break;case"type":b=re;break;case"checked":z=re;break;case"defaultChecked":Q=re;break;case"value":_=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:wt(r,o,f,re,u,null)}}ko(r,_,D,z,Q,b,v,!1);return;case"select":Qe("invalid",r),f=b=_=null;for(v in u)if(u.hasOwnProperty(v)&&(D=u[v],D!=null))switch(v){case"value":_=D;break;case"defaultValue":b=D;break;case"multiple":f=D;default:wt(r,o,v,D,u,null)}o=_,u=b,r.multiple=!!f,o!=null?lt(r,!!f,o,!1):u!=null&&lt(r,!!f,u,!0);return;case"textarea":Qe("invalid",r),_=v=f=null;for(b in u)if(u.hasOwnProperty(b)&&(D=u[b],D!=null))switch(b){case"value":f=D;break;case"defaultValue":v=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:wt(r,o,b,D,u,null)}ws(r,f,v,_);return;case"option":for(z in u)if(u.hasOwnProperty(z)&&(f=u[z],f!=null))switch(z){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:wt(r,o,z,f,u,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(f=0;f<Ou.length;f++)Qe(Ou[f],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(f=u[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,Q,f,u,null)}return;default:if(iu(o)){for(re in u)u.hasOwnProperty(re)&&(f=u[re],f!==void 0&&fg(r,o,re,f,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(f=u[D],f!=null&&wt(r,o,D,f,u,null))}function _N(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,b=null,D=null,z=null,Q=null,re=null;for(ne in u){var oe=u[ne];if(u.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":z=oe;default:f.hasOwnProperty(ne)||wt(r,o,ne,null,f,oe)}}for(var X in f){var ne=f[X];if(oe=u[X],f.hasOwnProperty(X)&&(ne!=null||oe!=null))switch(X){case"type":_=ne;break;case"name":v=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":b=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==oe&&wt(r,o,X,ne,f,oe)}}bs(r,b,D,z,Q,re,_,v);return;case"select":ne=b=D=X=null;for(_ in u)if(z=u[_],u.hasOwnProperty(_)&&z!=null)switch(_){case"value":break;case"multiple":ne=z;default:f.hasOwnProperty(_)||wt(r,o,_,null,f,z)}for(v in f)if(_=f[v],z=u[v],f.hasOwnProperty(v)&&(_!=null||z!=null))switch(v){case"value":X=_;break;case"defaultValue":D=_;break;case"multiple":b=_;default:_!==z&&wt(r,o,v,_,f,z)}o=D,u=b,f=ne,X!=null?lt(r,!!u,X,!1):!!f!=!!u&&(o!=null?lt(r,!!u,o,!0):lt(r,!!u,u?[]:"",!1));return;case"textarea":ne=X=null;for(D in u)if(v=u[D],u.hasOwnProperty(D)&&v!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:wt(r,o,D,null,f,v)}for(b in f)if(v=f[b],_=u[b],f.hasOwnProperty(b)&&(v!=null||_!=null))switch(b){case"value":X=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&wt(r,o,b,v,f,_)}Vo(r,X,ne);return;case"option":for(var Te in u)if(X=u[Te],u.hasOwnProperty(Te)&&X!=null&&!f.hasOwnProperty(Te))switch(Te){case"selected":r.selected=!1;break;default:wt(r,o,Te,null,f,X)}for(z in f)if(X=f[z],ne=u[z],f.hasOwnProperty(z)&&X!==ne&&(X!=null||ne!=null))switch(z){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:wt(r,o,z,X,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in u)X=u[Me],u.hasOwnProperty(Me)&&X!=null&&!f.hasOwnProperty(Me)&&wt(r,o,Me,null,f,X);for(Q in f)if(X=f[Q],ne=u[Q],f.hasOwnProperty(Q)&&X!==ne&&(X!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:wt(r,o,Q,X,f,ne)}return;default:if(iu(o)){for(var Ct in u)X=u[Ct],u.hasOwnProperty(Ct)&&X!==void 0&&!f.hasOwnProperty(Ct)&&fg(r,o,Ct,void 0,f,X);for(re in f)X=f[re],ne=u[re],!f.hasOwnProperty(re)||X===ne||X===void 0&&ne===void 0||fg(r,o,re,X,f,ne);return}}for(var Y in u)X=u[Y],u.hasOwnProperty(Y)&&X!=null&&!f.hasOwnProperty(Y)&&wt(r,o,Y,null,f,X);for(oe in f)X=f[oe],ne=u[oe],!f.hasOwnProperty(oe)||X===ne||X==null&&ne==null||wt(r,o,oe,X,f,ne)}function mT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,b=v.initiatorType,D=v.duration;if(_&&D&&mT(b)){for(b=0,D=v.responseEnd,f+=1;f<u.length;f++){var z=u[f],Q=z.startTime;if(Q>D)break;var re=z.transferSize,oe=z.initiatorType;re&&mT(oe)&&(z=z.responseEnd,b+=re*(z<D?1:(D-Q)/(z-Q)))}if(--f,o+=8*(_+b)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var dg=null,hg=null;function dd(r){return r.nodeType===9?r:r.ownerDocument}function gT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function pg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var mg=null;function TN(){var r=window.event;return r&&r.type==="popstate"?r===mg?!1:(mg=r,!0):(mg=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,SN=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,AN=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(r){return _T.resolve(null).then(r).catch(bN)}:vT;function bN(r){setTimeout(function(){throw r})}function Ws(r){return r==="head"}function ET(r,o){var u=o,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),ul(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Fu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Fu(u);for(var _=u.firstChild;_;){var b=_.nextSibling,D=_.nodeName;_[Gi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=b}}else u==="body"&&Fu(r.ownerDocument.body);u=v}while(u);ul(o)}function TT(r,o){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function gg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":gg(u),Ki(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function wN(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Gi])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=tr(r.nextSibling),r===null)break}return null}function CN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=tr(r.nextSibling),r===null))return null;return r}function ST(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=tr(r.nextSibling),r===null))return null;return r}function yg(r){return r.data==="$?"||r.data==="$~"}function vg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function IN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function tr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var _g=null;function AT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return tr(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function bT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function wT(r,o,u){switch(o=dd(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Fu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Ki(r)}var nr=new Map,CT=new Set;function hd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var us=ce.d;ce.d={f:RN,r:xN,D:NN,C:DN,L:MN,m:PN,X:VN,S:kN,M:LN};function RN(){var r=us.f(),o=rd();return r||o}function xN(r){var o=$i(r);o!==null&&o.tag===5&&o.type==="form"?H_(o):us.r(r)}var ol=typeof document>"u"?null:document;function IT(r,o,u){var f=ol;if(f&&typeof o=="string"&&o){var v=Yt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),CT.has(v)||(CT.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Fn(o,"link",r),Bt(o),f.head.appendChild(o)))}}function NN(r){us.D(r),IT("dns-prefetch",r,null)}function DN(r,o){us.C(r,o),IT("preconnect",r,o)}function MN(r,o,u){us.L(r,o,u);var f=ol;if(f&&r&&o){var v='link[rel="preload"][as="'+Yt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Yt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Yt(u.imageSizes)+'"]')):v+='[href="'+Yt(r)+'"]';var _=v;switch(o){case"style":_=al(r);break;case"script":_=ll(r)}nr.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),nr.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(qu(_))||o==="script"&&f.querySelector(Bu(_))||(o=f.createElement("link"),Fn(o,"link",r),Bt(o),f.head.appendChild(o)))}}function PN(r,o){us.m(r,o);var u=ol;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Yt(f)+'"][href="'+Yt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ll(r)}if(!nr.has(_)&&(r=E({rel:"modulepreload",href:r},o),nr.set(_,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Bu(_)))return}f=u.createElement("link"),Fn(f,"link",r),Bt(f),u.head.appendChild(f)}}}function kN(r,o,u){us.S(r,o,u);var f=ol;if(f&&r){var v=ri(f).hoistableStyles,_=al(r);o=o||"default";var b=v.get(_);if(!b){var D={loading:0,preload:null};if(b=f.querySelector(qu(_)))D.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=nr.get(_))&&Eg(r,u);var z=b=f.createElement("link");Bt(z),Fn(z,"link",r),z._p=new Promise(function(Q,re){z.onload=Q,z.onerror=re}),z.addEventListener("load",function(){D.loading|=1}),z.addEventListener("error",function(){D.loading|=2}),D.loading|=4,pd(b,o,f)}b={type:"stylesheet",instance:b,count:1,state:D},v.set(_,b)}}}function VN(r,o){us.X(r,o);var u=ol;if(u&&r){var f=ri(u).hoistableScripts,v=ll(r),_=f.get(v);_||(_=u.querySelector(Bu(v)),_||(r=E({src:r,async:!0},o),(o=nr.get(v))&&Tg(r,o),_=u.createElement("script"),Bt(_),Fn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function LN(r,o){us.M(r,o);var u=ol;if(u&&r){var f=ri(u).hoistableScripts,v=ll(r),_=f.get(v);_||(_=u.querySelector(Bu(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=nr.get(v))&&Tg(r,o),_=u.createElement("script"),Bt(_),Fn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function RT(r,o,u,f){var v=(v=Ve.current)?hd(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=al(u.href),u=ri(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=al(u.href);var _=ri(v).hoistableStyles,b=_.get(r);if(b||(v=v.ownerDocument||v,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,b),(_=v.querySelector(qu(r)))&&!_._p&&(b.instance=_,b.state.loading=5),nr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},nr.set(r,u),_||ON(v,r,u,b.state))),o&&f===null)throw Error(i(528,""));return b}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ll(u),u=ri(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function al(r){return'href="'+Yt(r)+'"'}function qu(r){return'link[rel="stylesheet"]['+r+"]"}function xT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function ON(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Fn(o,"link",u),Bt(o),r.head.appendChild(o))}function ll(r){return'[src="'+Yt(r)+'"]'}function Bu(r){return"script[async]"+r}function NT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Yt(u.href)+'"]');if(f)return o.instance=f,Bt(f),f;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Bt(f),Fn(f,"style",v),pd(f,u.precedence,r),o.instance=f;case"stylesheet":v=al(u.href);var _=r.querySelector(qu(v));if(_)return o.state.loading|=4,o.instance=_,Bt(_),_;f=xT(u),(v=nr.get(v))&&Eg(f,v),_=(r.ownerDocument||r).createElement("link"),Bt(_);var b=_;return b._p=new Promise(function(D,z){b.onload=D,b.onerror=z}),Fn(_,"link",f),o.state.loading|=4,pd(_,u.precedence,r),o.instance=_;case"script":return _=ll(u.src),(v=r.querySelector(Bu(_)))?(o.instance=v,Bt(v),v):(f=u,(v=nr.get(_))&&(f=E({},u),Tg(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Bt(v),Fn(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,pd(f,u.precedence,r));return o.instance}function pd(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,b=0;b<f.length;b++){var D=f[b];if(D.dataset.precedence===o)_=D;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Eg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Tg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var md=null;function DT(r,o,u){if(md===null){var f=new Map,v=md=new Map;v.set(u,f)}else v=md,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[Gi]||_[Mt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var b=_.getAttribute(o)||"";b=r+b;var D=f.get(b);D?D.push(_):f.set(b,[_])}}return f}function MT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function UN(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function PT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function FN(r,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=al(f.href),_=o.querySelector(qu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=gd.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,Bt(_);return}_=o.ownerDocument||o,f=xT(f),(v=nr.get(v))&&Eg(f,v),_=_.createElement("link"),Bt(_);var b=_;b._p=new Promise(function(D,z){b.onload=D,b.onerror=z}),Fn(_,"link",f),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=gd.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Sg=0;function qN(r,o){return r.stylesheets&&r.count===0&&vd(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&vd(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&Sg===0&&(Sg=62500*EN());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&vd(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Sg?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var yd=null;function vd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,yd=new Map,o.forEach(BN,r),yd=null,gd.call(r))}function BN(r,o){if(!(o.state.loading&4)){var u=yd.get(r);if(u)var f=u.get(null);else{u=new Map,yd.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var b=v[_];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(u.set(b.dataset.precedence,b),f=b)}f&&u.set(null,f)}v=o.instance,b=v.getAttribute("data-precedence"),_=u.get(b)||f,_===f&&u.set(null,v),u.set(b,v),this.count++,f=gd.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var zu={$$typeof:q,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function zN(r,o,u,f,v,_,b,D,z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tn(0),this.hiddenUpdates=tn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function kT(r,o,u,f,v,_,b,D,z,Q,re,oe){return r=new zN(r,o,u,b,z,Q,re,oe,D),o=1,_===!0&&(o|=24),_=Di(3,null,null,o),r.current=_,_.stateNode=r,o=tm(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},sm(_),r}function VT(r){return r?(r=Fa,r):Fa}function LT(r,o,u,f,v,_){v=VT(v),f.context===null?f.context=v:f.pendingContext=v,f=Fs(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=qs(r,f,o),u!==null&&(Ei(u,r,o),Eu(u,r,o))}function OT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Ag(r,o){OT(r,o),(r=r.alternate)&&OT(r,o)}function UT(r){if(r.tag===13||r.tag===31){var o=Go(r,67108864);o!==null&&Ei(o,r,67108864),Ag(r,67108864)}}function FT(r){if(r.tag===13||r.tag===31){var o=Li();o=zi(o);var u=Go(r,o);u!==null&&Ei(u,r,o),Ag(r,o)}}var _d=!0;function HN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=2,bg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function GN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=8,bg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function bg(r,o,u,f){if(_d){var v=wg(f);if(v===null)cg(r,o,f,Ed,u),BT(r,f);else if($N(v,r,o,u,f))f.stopPropagation();else if(BT(r,f),o&4&&-1<KN.indexOf(r)){for(;v!==null;){var _=$i(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var b=it(_.pendingLanes);if(b!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;b;){var z=1<<31-be(b);D.entanglements[1]|=z,b&=~z}Mr(_),(pt&6)===0&&(nd=ht()+500,Lu(0))}}break;case 31:case 13:D=Go(_,2),D!==null&&Ei(D,_,2),rd(),Ag(_,2)}if(_=wg(f),_===null&&cg(r,o,f,Ed,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else cg(r,o,f,null,u)}}function wg(r){return r=Da(r),Cg(r)}var Ed=null;function Cg(r){if(Ed=null,r=hi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ed=r,null}function qT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(en()){case Be:return 2;case Gt:return 8;case an:case ln:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var Ig=!1,Qs=null,Xs=null,Zs=null,Hu=new Map,Gu=new Map,eo=[],KN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BT(r,o){switch(r){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Hu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(o.pointerId)}}function Ku(r,o,u,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=$i(o),o!==null&&UT(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function $N(r,o,u,f,v){switch(o){case"focusin":return Qs=Ku(Qs,r,o,u,f,v),!0;case"dragenter":return Xs=Ku(Xs,r,o,u,f,v),!0;case"mouseover":return Zs=Ku(Zs,r,o,u,f,v),!0;case"pointerover":var _=v.pointerId;return Hu.set(_,Ku(Hu.get(_)||null,r,o,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Gu.set(_,Ku(Gu.get(_)||null,r,o,u,f,v)),!0}return!1}function zT(r){var o=hi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Hr(r.priority,function(){FT(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Hr(r.priority,function(){FT(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Td(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=wg(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Na=f,u.target.dispatchEvent(f),Na=null}else return o=$i(u),o!==null&&UT(o),r.blockedOn=u,!1;o.shift()}return!0}function HT(r,o,u){Td(r)&&u.delete(o)}function JN(){Ig=!1,Qs!==null&&Td(Qs)&&(Qs=null),Xs!==null&&Td(Xs)&&(Xs=null),Zs!==null&&Td(Zs)&&(Zs=null),Hu.forEach(HT),Gu.forEach(HT)}function Sd(r,o){r.blockedOn===o&&(r.blockedOn=null,Ig||(Ig=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JN)))}var Ad=null;function GT(r){Ad!==r&&(Ad=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ad===r&&(Ad=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(Cg(f||u)===null)continue;break}var _=$i(u);_!==null&&(r.splice(o,3),o-=3,wm(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function ul(r){function o(z){return Sd(z,r)}Qs!==null&&Sd(Qs,r),Xs!==null&&Sd(Xs,r),Zs!==null&&Sd(Zs,r),Hu.forEach(o),Gu.forEach(o);for(var u=0;u<eo.length;u++){var f=eo[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<eo.length&&(u=eo[0],u.blockedOn===null);)zT(u),u.blockedOn===null&&eo.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],b=v[nn]||null;if(typeof _=="function")b||GT(u);else if(b){var D=null;if(_&&_.hasAttribute("formAction")){if(v=_,b=_[nn]||null)D=b.formAction;else if(Cg(v)!==null)continue}else D=b.action;typeof D=="function"?u[f+1]=D:(u.splice(f,3),f-=3),GT(u)}}}function KT(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(b){return v=b})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Rg(r){this._internalRoot=r}bd.prototype.render=Rg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=Li();LT(u,f,r,o,null,null)},bd.prototype.unmount=Rg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;LT(r.current,2,null,r,null,null),rd(),o[Ci]=null}};function bd(r){this._internalRoot=r}bd.prototype.unstable_scheduleHydration=function(r){if(r){var o=ii();r={blockedOn:null,target:r,priority:o};for(var u=0;u<eo.length&&o!==0&&o<eo[u].priority;u++);eo.splice(u,0,r),u===0&&zT(r)}};var $T=e.version;if($T!=="19.2.0")throw Error(i(527,$T,"19.2.0"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var YN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{bi=wd.inject(YN),In=wd}catch{}}return Ju.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",v=Z_,_=eE,b=tE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),o=kT(r,1,!1,null,null,u,f,null,v,_,b,KT),r[Ci]=o.current,ug(r),new Rg(o)},Ju.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,v="",_=Z_,b=eE,D=tE,z=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(z=u.formState)),o=kT(r,1,!0,o,u??null,f,v,z,_,b,D,KT),o.context=VT(null),u=o.current,f=Li(),f=zi(f),v=Fs(f),v.callback=null,qs(u,v,f),u=f,o.current.lanes=u,Nt(o,u),Mr(o),r[Ci]=o.current,ug(r),new bd(o)},Ju.version="19.2.0",Ju}var nS;function iD(){if(nS)return Dg.exports;nS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dg.exports=nD(),Dg.exports}var rD=iD();const sD=eC(rD),oD=()=>{};var iS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},iC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,g=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,w=h&63;d||(w=64,l||(T=64)),i.push(n[g],n[E],n[T],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new lD;const T=a<<2|c>>4;if(i.push(T),h!==64){const w=c<<4&240|h>>2;if(i.push(w),E!==64){const x=h<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uD=function(t){const e=nC(t);return iC.encodeByteArray(e,!0)},gh=function(t){return uD(t).replace(/\./g,"")},rC=function(t){try{return iC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=()=>cD().__FIREBASE_DEFAULTS__,dD=()=>{if(typeof process>"u"||typeof iS>"u")return;const t=iS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rC(t[1]);return e&&JSON.parse(e)},Xh=()=>{try{return oD()||fD()||dD()||hD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sC=t=>{var e,n;return(n=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oC=t=>{const e=sC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},aC=()=>{var t;return(t=Xh())===null||t===void 0?void 0:t.config},lC=t=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gh(JSON.stringify(n)),gh(JSON.stringify(l)),""].join(".")}const dc={};function mD(){const t={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?t.emulator.push(e):t.prod.push(e);return t}function gD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rS=!1;function sv(t,e){if(typeof window>"u"||typeof document>"u"||!Co(window.location.host)||dc[t]===e||dc[t]||rS)return;dc[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=mD().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{rS=!0,l()},T}function g(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=gD(i),w=n("text"),x=document.getElementById(w)||document.createElement("span"),M=n("learnmore"),U=document.getElementById(M)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;c(q),g(U,M);const J=h();d(F,H),q.append(F,x,U,J),document.body.appendChild(q)}a?(x.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function vD(){var t;const e=(t=Xh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _D(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ED(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SD(){const t=ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AD(){return!vD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bD(){try{return typeof indexedDB=="object"}catch{return!1}}function wD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="FirebaseError";class zr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=CD,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?ID(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new zr(s,c,i)}}function ID(t,e){return t.replace(RD,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const RD=/\{\$([^}]+)}/g;function xD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(sS(a)&&sS(l)){if(!pa(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function sS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function nc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ND(t,e){const n=new DD(t,e);return n.subscribe.bind(n)}class DD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");MD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Vg),s.error===void 0&&(s.error=Vg),s.complete===void 0&&(s.complete=Vg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class vo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new pD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VD(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kD(t){return t===ra?void 0:t}function VD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const OD={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},UD=tt.INFO,FD={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},qD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=FD[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=UD,this._logHandler=qD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const BD=(t,e)=>e.some(n=>t instanceof n);let oS,aS;function zD(){return oS||(oS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HD(){return aS||(aS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cC=new WeakMap,iy=new WeakMap,fC=new WeakMap,Lg=new WeakMap,av=new WeakMap;function GD(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(ho(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&cC.set(n,t)}).catch(()=>{}),av.set(e,t),e}function KD(t){if(iy.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});iy.set(t,e)}let ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $D(t){ry=t(ry)}function JD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Og(this),e,...n);return fC.set(i,e.sort?e.sort():[e]),ho(i)}:HD().includes(t)?function(...e){return t.apply(Og(this),e),ho(cC.get(this))}:function(...e){return ho(t.apply(Og(this),e))}}function YD(t){return typeof t=="function"?JD(t):(t instanceof IDBTransaction&&KD(t),BD(t,zD())?new Proxy(t,ry):t)}function ho(t){if(t instanceof IDBRequest)return GD(t);if(Lg.has(t))return Lg.get(t);const e=YD(t);return e!==t&&(Lg.set(t,e),av.set(e,t)),e}const Og=t=>av.get(t);function jD(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=ho(l);return i&&l.addEventListener("upgradeneeded",d=>{i(ho(l.result),d.oldVersion,d.newVersion,ho(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const WD=["get","getKey","getAll","getAllKeys","count"],QD=["put","add","delete","clear"],Ug=new Map;function lS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ug.get(e))return Ug.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=QD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||WD.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return Ug.set(e,a),a}$D(t=>({...t,get:(e,n,i)=>lS(e,n)||t.get(e,n,i),has:(e,n)=>!!lS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ZD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sy="@firebase/app",uS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new ov("@firebase/app"),e2="@firebase/app-compat",t2="@firebase/analytics-compat",n2="@firebase/analytics",i2="@firebase/app-check-compat",r2="@firebase/app-check",s2="@firebase/auth",o2="@firebase/auth-compat",a2="@firebase/database",l2="@firebase/data-connect",u2="@firebase/database-compat",c2="@firebase/functions",f2="@firebase/functions-compat",d2="@firebase/installations",h2="@firebase/installations-compat",p2="@firebase/messaging",m2="@firebase/messaging-compat",g2="@firebase/performance",y2="@firebase/performance-compat",v2="@firebase/remote-config",_2="@firebase/remote-config-compat",E2="@firebase/storage",T2="@firebase/storage-compat",S2="@firebase/firestore",A2="@firebase/ai",b2="@firebase/firestore-compat",w2="firebase",C2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="[DEFAULT]",I2={[sy]:"fire-core",[e2]:"fire-core-compat",[n2]:"fire-analytics",[t2]:"fire-analytics-compat",[r2]:"fire-app-check",[i2]:"fire-app-check-compat",[s2]:"fire-auth",[o2]:"fire-auth-compat",[a2]:"fire-rtdb",[l2]:"fire-data-connect",[u2]:"fire-rtdb-compat",[c2]:"fire-fn",[f2]:"fire-fn-compat",[d2]:"fire-iid",[h2]:"fire-iid-compat",[p2]:"fire-fcm",[m2]:"fire-fcm-compat",[g2]:"fire-perf",[y2]:"fire-perf-compat",[v2]:"fire-rc",[_2]:"fire-rc-compat",[E2]:"fire-gcs",[T2]:"fire-gcs-compat",[S2]:"fire-fst",[b2]:"fire-fst-compat",[A2]:"fire-vertex","fire-js":"fire-js",[w2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,R2=new Map,ay=new Map;function cS(t,e){try{t.container.addComponent(e)}catch(n){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ma(t){const e=t.name;if(ay.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;ay.set(e,t);for(const n of yh.values())cS(n,t);for(const n of R2.values())cS(n,t);return!0}function Zh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new zc("app","Firebase",x2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=C2;function dC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:oy,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw po.create("bad-app-name",{appName:String(s)});if(n||(n=aC()),!n)throw po.create("no-options");const a=yh.get(s);if(a){if(pa(n,a.options)&&pa(i,a.config))return a;throw po.create("duplicate-app",{appName:s})}const l=new LD(s);for(const d of ay.values())l.addComponent(d);const c=new N2(n,i,l);return yh.set(s,c),c}function lv(t=oy){const e=yh.get(t);if(!e&&t===oy&&aC())return dC();if(!e)throw po.create("no-app",{appName:t});return e}function Vr(t,e,n){var i;let s=(i=I2[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(c.join(" "));return}ma(new vo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebase-heartbeat-database",M2=1,Nc="firebase-heartbeat-store";let Fg=null;function hC(){return Fg||(Fg=jD(D2,M2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw po.create("idb-open",{originalErrorMessage:t.message})})),Fg}async function P2(t){try{const n=(await hC()).transaction(Nc),i=await n.objectStore(Nc).get(pC(t));return await n.done,i}catch(e){if(e instanceof zr)ps.warn(e.message);else{const n=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(n.message)}}}async function fS(t,e){try{const i=(await hC()).transaction(Nc,"readwrite");await i.objectStore(Nc).put(e,pC(t)),await i.done}catch(n){if(n instanceof zr)ps.warn(n.message);else{const i=po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ps.warn(i.message)}}}function pC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=1024,V2=30;class L2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=dS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>V2){const l=F2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dS(),{heartbeatsToSend:i,unsentEntries:s}=O2(this._heartbeatsCache.heartbeats),a=gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ps.warn(n),""}}}function dS(){return new Date().toISOString().substring(0,10)}function O2(t,e=k2){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),hS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),hS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bD()?wD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hS(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}function F2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){ma(new vo("platform-logger",e=>new XD(e),"PRIVATE")),ma(new vo("heartbeat",e=>new L2(e),"PRIVATE")),Vr(sy,uS,t),Vr(sy,uS,"esm2017"),Vr("fire-js","")}q2("");function uv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function mC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B2=mC,gC=new zc("auth","Firebase",mC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new ov("@firebase/auth");function z2(t,...e){vh.logLevel<=tt.WARN&&vh.warn(`Auth (${Sa}): ${t}`,...e)}function Qd(t,...e){vh.logLevel<=tt.ERROR&&vh.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw fv(t,...e)}function Er(t,...e){return fv(t,...e)}function cv(t,e,n){const i=Object.assign(Object.assign({},B2()),{[e]:n});return new zc("auth","Firebase",i).create(e,{appName:t.name})}function hs(t){return cv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H2(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&or(t,"argument-error"),cv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return gC.create(t,...e)}function Pe(t,e,...n){if(!t)throw fv(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function ms(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G2(){return pS()==="http:"||pS()==="https:"}function pS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G2()||ED()||"connection"in navigator)?navigator.onLine:!0}function $2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=yD()||TD()}get(){return K2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],j2=new Gc(3e4,6e4);function Io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ro(t,e,n,i,s={}){return vC(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Hc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return _D()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Co(t.emulatorConfig.host)&&(h.credentials="include"),yC.fetch()(await _C(t,t.config.apiHost,n,c),h)})}async function vC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},J2),e);try{const s=new Q2(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Cd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Cd(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Cd(t,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw cv(t,g,h);or(t,g)}}catch(s){if(s instanceof zr)throw s;or(t,"network-request-failed",{message:String(s)})}}async function Kc(t,e,n,i,s={}){const a=await Ro(t,e,n,i,s);return"mfaPendingCredential"in a&&or(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function _C(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?dv(t.config,s):`${t.config.apiScheme}://${s}`;return Y2.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function W2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Er(this.auth,"network-request-failed")),j2.get())})}}function Cd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Er(t,e,i);return s.customData._tokenResponse=n,s}function mS(t){return t!==void 0&&t.enterprise!==void 0}class X2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z2(t,e){return Ro(t,"GET","/v2/recaptchaConfig",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e){return Ro(t,"POST","/v1/accounts:delete",e)}async function _h(t,e){return Ro(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tM(t,e=!1){const n=$t(t),i=await n.getIdToken(e),s=hv(i);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:hc(qg(s.auth_time)),issuedAtTime:hc(qg(s.iat)),expirationTime:hc(qg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function qg(t){return Number(t)*1e3}function hv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=rC(n);return s?JSON.parse(s):(Qd("Failed to decode base64 JWT payload"),null)}catch(s){return Qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gS(t){const e=hv(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zr&&nM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function nM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Dc(t,_h(n,{idToken:i}));Pe(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?EC(a.providerUserInfo):[],c=sM(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new uy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,E)}async function rM(t){const e=$t(t);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sM(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function EC(t){return t.map(e=>{var{providerId:n}=e,i=uv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){const n=await vC(t,{},async()=>{const i=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await _C(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&Co(t.emulatorConfig.host)&&(d.credentials="include"),yC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aM(t,e){return Ro(t,"POST","/v2/accounts:revokeToken",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=gS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await oM(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new Sl;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Pe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=uv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new uy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tM(this,e)}reload(){return rM(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await Dc(this,eM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,c,d,h,g;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,x=(l=n.photoURL)!==null&&l!==void 0?l:void 0,M=(c=n.tenantId)!==null&&c!==void 0?c:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,H=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:q,emailVerified:J,isAnonymous:te,providerData:G,stsTokenManager:I}=n;Pe(q&&I,e,"internal-error");const R=Sl.fromJSON(this.name,I);Pe(typeof q=="string",e,"internal-error"),no(E,e.name),no(T,e.name),Pe(typeof J=="boolean",e,"internal-error"),Pe(typeof te=="boolean",e,"internal-error"),no(w,e.name),no(x,e.name),no(M,e.name),no(U,e.name),no(H,e.name),no(F,e.name);const N=new yr({uid:q,auth:e,email:T,emailVerified:J,displayName:E,isAnonymous:te,photoURL:x,phoneNumber:w,tenantId:M,stsTokenManager:R,createdAt:H,lastLoginAt:F});return G&&Array.isArray(G)&&(N.providerData=G.map(V=>Object.assign({},V))),U&&(N._redirectEventId=U),N}static async _fromIdTokenResponse(e,n,i=!1){const s=new Sl;s.updateFromServerResponse(n);const a=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Eh(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?EC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Sl;c.updateFromIdToken(i);const d=new yr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;function ds(t){ms(t instanceof Function,"Expected a class definition");let e=yS.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TC.type="NONE";const vS=TC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Al{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Xd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xd("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _h(this.auth,{idToken:e}).catch(()=>{});return n?yr._fromGetAccountInfoResponse(this.auth,n,e):null}return yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Al(ds(vS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||ds(vS);const l=Xd(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){let E;if(typeof g=="string"){const T=await _h(e,{idToken:g}).catch(()=>{});if(!T)break;E=await yr._fromGetAccountInfoResponse(e,T,g)}else E=yr._fromJSON(e,g);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Al(a,e,i):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Al(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IC(e))return"Blackberry";if(RC(e))return"Webos";if(AC(e))return"Safari";if((e.includes("chrome/")||bC(e))&&!e.includes("edge/"))return"Chrome";if(CC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function SC(t=ti()){return/firefox\//i.test(t)}function AC(t=ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bC(t=ti()){return/crios\//i.test(t)}function wC(t=ti()){return/iemobile/i.test(t)}function CC(t=ti()){return/android/i.test(t)}function IC(t=ti()){return/blackberry/i.test(t)}function RC(t=ti()){return/webos/i.test(t)}function pv(t=ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lM(t=ti()){var e;return pv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uM(){return SD()&&document.documentMode===10}function xC(t=ti()){return pv(t)||CC(t)||RC(t)||IC(t)||/windows phone/i.test(t)||wC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e=[]){let n;switch(t){case"Browser":n=_S(ti());break;case"Worker":n=`${_S(ti())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e={}){return Ro(t,"GET","/v2/passwordPolicy",Io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=6;class hM{constructor(e){var n,i,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:dM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ES(this),this.idTokenSubscription=new ES(this),this.beforeStateQueue=new cM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _h(this,{idToken:e}),i=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(hs(this));const n=e?$t(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fM(this),n=new hM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await aM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&z2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xo(t){return $t(t)}class ES{constructor(e){this.auth=e,this.observer=null,this.addObserver=ND(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mM(t){ep=t}function DC(t){return ep.loadJS(t)}function gM(){return ep.recaptchaEnterpriseScript}function yM(){return ep.gapiScript}function vM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class _M{constructor(){this.enterprise=new EM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class EM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TM="recaptcha-enterprise",MC="NO_RECAPTCHA";class SM{constructor(e){this.type=TM,this.auth=xo(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{Z2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new X2(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,l,c){const d=window.grecaptcha;mS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(MC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _M().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&mS(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gM();d.length!==0&&(d+=c),DC(d).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function TS(t,e,n,i=!1,s=!1){const a=new SM(t);let l;if(s)l=MC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function cy(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await TS(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await TS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e){const n=Zh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(pa(a,e??{}))return s;or(s,"already-initialized")}return n.initialize({options:e})}function bM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function wM(t,e,n){const i=xo(t);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=PC(e),{host:l,port:c}=CM(e),d=c===null?"":`:${c}`,h={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(pa(h,i.config.emulator)&&pa(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Co(l)?(rv(`${a}//${l}${d}`),sv("Auth",!0)):IM()}function PC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CM(t){const e=PC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:SS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:SS(l)}}}function SS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function RM(t,e){return Ro(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,e))}async function DM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends mv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Mc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Mc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cy(e,n,"signInWithPassword",xM);case"emailLink":return NM(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cy(e,i,"signUpPassword",RM);case"emailLink":return DM(e,{idToken:n,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="http://localhost";class ga extends mv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=uv(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new ga(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:MM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kM(t){const e=tc(nc(t)).link,n=e?tc(nc(e)).deep_link_id:null,i=tc(nc(t)).deep_link_id;return(i?tc(nc(i)).link:null)||i||n||e||t}class gv{constructor(e){var n,i,s,a,l,c;const d=tc(nc(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(i=d.oobCode)!==null&&i!==void 0?i:null,E=PM((s=d.mode)!==null&&s!==void 0?s:null);Pe(h&&g&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=kM(e);try{return new gv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.providerId=zl.PROVIDER_ID}static credential(e,n){return Mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=gv.parseLink(n);return Pe(i,"argument-error"),Mc._fromEmailAndCode(e,i.code,i.tenantId)}}zl.PROVIDER_ID="password";zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends $c{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return cs.credential(n,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends $c{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.GITHUB_SIGN_IN_METHOD="github.com";ro.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends $c{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return so.credential(n,i)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return Kc(t,"POST","/v1/accounts:signUp",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await yr._fromIdTokenResponse(e,i,s),l=AS(i);return new ya({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=AS(i);return new ya({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function AS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends zr{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Th(e,n,i,s)}}function kC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(t,a,e,i):a})}async function LM(t,e,n=!1){const i=await Dc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ya._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(hs(i));const s="reauthenticate";try{const a=await Dc(t,kC(i,s,e,t),n);Pe(a.idToken,i,"internal-error");const l=hv(a.idToken);Pe(l,i,"internal-error");const{sub:c}=l;return Pe(t.uid===c,i,"user-mismatch"),ya._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&or(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e,n=!1){if(Si(t.app))return Promise.reject(hs(t));const i="signIn",s=await kC(t,i,e),a=await ya._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function UM(t,e){return VC(xo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t){const e=xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FM(t,e,n){if(Si(t.app))return Promise.reject(hs(t));const i=xo(t),l=await cy(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&LC(t),d}),c=await ya._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function qM(t,e,n){return Si(t.app)?Promise.reject(hs(t)):UM($t(t),zl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&LC(t),i})}function BM(t,e,n,i){return $t(t).onIdTokenChanged(e,n,i)}function zM(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function HM(t,e,n,i){return $t(t).onAuthStateChanged(e,n,i)}function GM(t){return $t(t).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=1e3,$M=10;class UC extends OC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);uM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$M):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UC.type="LOCAL";const JM=UC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC extends OC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FC.type="SESSION";const qC=FC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new tp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await YM(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=vv("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function WM(t){Lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function QM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZM(){return BC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="firebaseLocalStorageDb",eP=1,Ah="firebaseLocalStorage",HC="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function np(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function tP(){const t=indexedDB.deleteDatabase(zC);return new Jc(t).toPromise()}function fy(){const t=indexedDB.open(zC,eP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ah,{keyPath:HC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ah)?e(i):(i.close(),await tP(),e(await fy()))})})}async function bS(t,e,n){const i=np(t,!0).put({[HC]:e,value:n});return new Jc(i).toPromise()}async function nP(t,e){const n=np(t,!1).get(e),i=await new Jc(n).toPromise();return i===void 0?null:i.value}function wS(t,e){const n=np(t,!0).delete(e);return new Jc(n).toPromise()}const iP=800,rP=3;class GC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>rP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await QM(),!this.activeServiceWorker)return;this.sender=new jM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await bS(e,Sh,"1"),await wS(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>bS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nP(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=np(s,!1).getAll();return new Jc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GC.type="LOCAL";const sP=GC;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e){return e?ds(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends mv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oP(t){return VC(t.auth,new _v(t),t.bypassAuthState)}function aP(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),OM(n,new _v(t),t.bypassAuthState)}async function lP(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),LM(n,new _v(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oP;case"linkViaPopup":case"linkViaRedirect":return lP;case"reauthViaPopup":case"reauthViaRedirect":return aP;default:or(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new Gc(2e3,1e4);async function cP(t,e,n){if(Si(t.app))return Promise.reject(Er(t,"operation-not-supported-in-this-environment"));const i=xo(t);H2(t,e,yv);const s=KC(i,n);return new oa(i,"signInViaPopup",e,s).executeNotNull()}class oa extends $C{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uP.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="pendingRedirect",Zd=new Map;class dP extends $C{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const i=await hP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hP(t,e){const n=gP(e),i=mP(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function pP(t,e){Zd.set(t._key(),e)}function mP(t){return ds(t._redirectPersistence)}function gP(t){return Xd(fP,t.config.apiKey,t.name)}async function yP(t,e,n=!1){if(Si(t.app))return Promise.reject(hs(t));const i=xo(t),s=KC(i,e),l=await new dP(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=600*1e3;class _P{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!JC(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vP&&this.cachedEventUids.clear(),this.cachedEventUids.has(CS(e))}saveEventToCache(e){this.cachedEventUids.add(CS(e)),this.lastProcessedEventTime=Date.now()}}function CS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e={}){return Ro(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AP=/^https?/;async function bP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TP(t);for(const n of e)try{if(wP(n))return}catch{}or(t,"unauthorized-domain")}function wP(t){const e=ly(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!AP.test(n))return!1;if(SP.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new Gc(3e4,6e4);function IS(){const t=Lr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IP(t){return new Promise((e,n)=>{var i,s,a;function l(){IS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IS(),n(Er(t,"network-request-failed"))},timeout:CP.get()})}if(!((s=(i=Lr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Lr().gapi)===null||a===void 0)&&a.load)l();else{const c=vM("iframefcb");return Lr()[c]=()=>{gapi.load?l():n(Er(t,"network-request-failed"))},DC(`${yM()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw eh=null,e})}let eh=null;function RP(t){return eh=eh||IP(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=new Gc(5e3,15e3),NP="__/auth/iframe",DP="emulator/auth/iframe",MP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kP(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dv(e,DP):`https://${t.config.authDomain}/${NP}`,i={apiKey:e.apiKey,appName:t.name,v:Sa},s=PP.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Hc(i).slice(1)}`}async function VP(t){const e=await RP(t),n=Lr().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:kP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MP,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Er(t,"network-request-failed"),c=Lr().setTimeout(()=>{a(l)},xP.get());function d(){Lr().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OP=500,UP=600,FP="_blank",qP="http://localhost";class RS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BP(t,e,n,i=OP,s=UP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},LP),{width:i.toString(),height:s.toString(),top:a,left:l}),h=ti().toLowerCase();n&&(c=bC(h)?FP:n),SC(h)&&(e=e||qP,d.scrollbars="yes");const g=Object.entries(d).reduce((T,[w,x])=>`${T}${w}=${x},`,"");if(lM(h)&&c!=="_self")return zP(e||"",c),new RS(null);const E=window.open(e||"",c,g);Pe(E,t,"popup-blocked");try{E.focus()}catch{}return new RS(E)}function zP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="__/auth/handler",GP="emulator/auth/handler",KP=encodeURIComponent("fac");async function xS(t,e,n,i,s,a){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Sa,eventId:s};if(e instanceof yv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",xD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,E]of Object.entries({}))l[g]=E}if(e instanceof $c){const g=e.getScopes().filter(E=>E!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${KP}=${encodeURIComponent(d)}`:"";return`${$P(t)}?${Hc(c).slice(1)}${h}`}function $P({config:t}){return t.emulator?dv(t,GP):`https://${t.authDomain}/${HP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="webStorageSupport";class JP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qC,this._completeRedirectFn=yP,this._overrideRedirectResult=pP}async _openPopup(e,n,i,s){var a;ms((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await xS(e,n,i,ly(),s);return BP(e,l,vv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await xS(e,n,i,ly(),s);return WM(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ms(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await VP(e),i=new _P(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bg,{type:Bg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Bg];l!==void 0&&n(!!l),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xC()||AC()||pv()}}const YP=JP;var NS="@firebase/auth",DS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QP(t){ma(new vo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NC(t)},h=new pM(i,s,a,d);return bM(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ma(new vo("auth-internal",e=>{const n=xo(e.getProvider("auth").getImmediate());return(i=>new jP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(NS,DS,WP(t)),Vr(NS,DS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=300,ZP=lC("authIdTokenMaxAge")||XP;let MS=null;const ek=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ZP)return;const s=n==null?void 0:n.token;MS!==s&&(MS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tk(t=lv()){const e=Zh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AM(t,{popupRedirectResolver:YP,persistence:[sP,JM,qC]}),i=lC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=ek(a.toString());zM(n,l,()=>l(n.currentUser)),BM(n,c=>l(c))}}const s=sC("auth");return s&&wM(n,`http://${s}`),n}function nk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Er("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",nk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QP("Browser");var ik="firebase",rk="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(ik,rk,"app");var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,YC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function N(){}N.prototype=R.prototype,I.D=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(V,P,L){for(var O=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)O[Ie-2]=arguments[Ie];return R.prototype[P].apply(V,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,R,N){N||(N=0);var V=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)V[P]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(P=0;16>P;++P)V[P]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],P=I.g[2];var L=I.g[3],O=R+(L^N&(P^L))+V[0]+3614090360&4294967295;R=N+(O<<7&4294967295|O>>>25),O=L+(P^R&(N^P))+V[1]+3905402710&4294967295,L=R+(O<<12&4294967295|O>>>20),O=P+(N^L&(R^N))+V[2]+606105819&4294967295,P=L+(O<<17&4294967295|O>>>15),O=N+(R^P&(L^R))+V[3]+3250441966&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(L^N&(P^L))+V[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=L+(P^R&(N^P))+V[5]+1200080426&4294967295,L=R+(O<<12&4294967295|O>>>20),O=P+(N^L&(R^N))+V[6]+2821735955&4294967295,P=L+(O<<17&4294967295|O>>>15),O=N+(R^P&(L^R))+V[7]+4249261313&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(L^N&(P^L))+V[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=L+(P^R&(N^P))+V[9]+2336552879&4294967295,L=R+(O<<12&4294967295|O>>>20),O=P+(N^L&(R^N))+V[10]+4294925233&4294967295,P=L+(O<<17&4294967295|O>>>15),O=N+(R^P&(L^R))+V[11]+2304563134&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(L^N&(P^L))+V[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=L+(P^R&(N^P))+V[13]+4254626195&4294967295,L=R+(O<<12&4294967295|O>>>20),O=P+(N^L&(R^N))+V[14]+2792965006&4294967295,P=L+(O<<17&4294967295|O>>>15),O=N+(R^P&(L^R))+V[15]+1236535329&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(P^L&(N^P))+V[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=L+(N^P&(R^N))+V[6]+3225465664&4294967295,L=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(L^R))+V[11]+643717713&4294967295,P=L+(O<<14&4294967295|O>>>18),O=N+(L^R&(P^L))+V[0]+3921069994&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^L&(N^P))+V[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=L+(N^P&(R^N))+V[10]+38016083&4294967295,L=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(L^R))+V[15]+3634488961&4294967295,P=L+(O<<14&4294967295|O>>>18),O=N+(L^R&(P^L))+V[4]+3889429448&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^L&(N^P))+V[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=L+(N^P&(R^N))+V[14]+3275163606&4294967295,L=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(L^R))+V[3]+4107603335&4294967295,P=L+(O<<14&4294967295|O>>>18),O=N+(L^R&(P^L))+V[8]+1163531501&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^L&(N^P))+V[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=L+(N^P&(R^N))+V[2]+4243563512&4294967295,L=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(L^R))+V[7]+1735328473&4294967295,P=L+(O<<14&4294967295|O>>>18),O=N+(L^R&(P^L))+V[12]+2368359562&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(N^P^L)+V[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=L+(R^N^P)+V[8]+2272392833&4294967295,L=R+(O<<11&4294967295|O>>>21),O=P+(L^R^N)+V[11]+1839030562&4294967295,P=L+(O<<16&4294967295|O>>>16),O=N+(P^L^R)+V[14]+4259657740&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^L)+V[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=L+(R^N^P)+V[4]+1272893353&4294967295,L=R+(O<<11&4294967295|O>>>21),O=P+(L^R^N)+V[7]+4139469664&4294967295,P=L+(O<<16&4294967295|O>>>16),O=N+(P^L^R)+V[10]+3200236656&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^L)+V[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=L+(R^N^P)+V[0]+3936430074&4294967295,L=R+(O<<11&4294967295|O>>>21),O=P+(L^R^N)+V[3]+3572445317&4294967295,P=L+(O<<16&4294967295|O>>>16),O=N+(P^L^R)+V[6]+76029189&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^L)+V[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=L+(R^N^P)+V[12]+3873151461&4294967295,L=R+(O<<11&4294967295|O>>>21),O=P+(L^R^N)+V[15]+530742520&4294967295,P=L+(O<<16&4294967295|O>>>16),O=N+(P^L^R)+V[2]+3299628645&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(P^(N|~L))+V[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=L+(N^(R|~P))+V[7]+1126891415&4294967295,L=R+(O<<10&4294967295|O>>>22),O=P+(R^(L|~N))+V[14]+2878612391&4294967295,P=L+(O<<15&4294967295|O>>>17),O=N+(L^(P|~R))+V[5]+4237533241&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~L))+V[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=L+(N^(R|~P))+V[3]+2399980690&4294967295,L=R+(O<<10&4294967295|O>>>22),O=P+(R^(L|~N))+V[10]+4293915773&4294967295,P=L+(O<<15&4294967295|O>>>17),O=N+(L^(P|~R))+V[1]+2240044497&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~L))+V[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=L+(N^(R|~P))+V[15]+4264355552&4294967295,L=R+(O<<10&4294967295|O>>>22),O=P+(R^(L|~N))+V[6]+2734768916&4294967295,P=L+(O<<15&4294967295|O>>>17),O=N+(L^(P|~R))+V[13]+1309151649&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~L))+V[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=L+(N^(R|~P))+V[11]+3174756917&4294967295,L=R+(O<<10&4294967295|O>>>22),O=P+(R^(L|~N))+V[2]+718787259&4294967295,P=L+(O<<15&4294967295|O>>>17),O=N+(L^(P|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+L&4294967295}i.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var N=R-this.blockSize,V=this.B,P=this.h,L=0;L<R;){if(P==0)for(;L<=N;)s(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<R;)if(V[P++]=I.charCodeAt(L++),P==this.blockSize){s(this,V),P=0;break}}else for(;L<R;)if(V[P++]=I[L++],P==this.blockSize){s(this,V),P=0;break}}this.h=P,this.o+=R},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var N=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=N&255,N/=256;for(this.u(I),I=Array(16),R=N=0;4>R;++R)for(var V=0;32>V;V+=8)I[N++]=this.g[R]>>>V&255;return I};function a(I,R){var N=c;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function l(I,R){this.h=R;for(var N=[],V=!0,P=I.length-1;0<=P;P--){var L=I[P]|0;V&&L==R||(N[P]=L,V=!1)}this.g=N}var c={};function d(I){return-128<=I&&128>I?a(I,function(R){return new l([R|0],0>R?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return U(h(-I));for(var R=[],N=1,V=0;I>=N;V++)R[V]=I/N|0,N*=4294967296;return new l(R,0)}function g(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return U(g(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(R,8)),V=E,P=0;P<I.length;P+=8){var L=Math.min(8,I.length-P),O=parseInt(I.substring(P,P+L),R);8>L?(L=h(Math.pow(R,L)),V=V.j(L).add(h(O))):(V=V.j(N),V=V.add(h(O)))}return V}var E=d(0),T=d(1),w=d(16777216);t=l.prototype,t.m=function(){if(M(this))return-U(this).m();for(var I=0,R=1,N=0;N<this.g.length;N++){var V=this.i(N);I+=(0<=V?V:4294967296+V)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(M(this))return"-"+U(this).toString(I);for(var R=h(Math.pow(I,6)),N=this,V="";;){var P=J(N,R).g;N=H(N,P.j(R));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=P,x(N))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=H(this,I),M(I)?-1:x(I)?0:1};function U(I){for(var R=I.g.length,N=[],V=0;V<R;V++)N[V]=~I.g[V];return new l(N,~I.h).add(T)}t.abs=function(){return M(this)?U(this):this},t.add=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],V=0,P=0;P<=R;P++){var L=V+(this.i(P)&65535)+(I.i(P)&65535),O=(L>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);V=O>>>16,L&=65535,O&=65535,N[P]=O<<16|L}return new l(N,N[N.length-1]&-2147483648?-1:0)};function H(I,R){return I.add(U(R))}t.j=function(I){if(x(this)||x(I))return E;if(M(this))return M(I)?U(this).j(U(I)):U(U(this).j(I));if(M(I))return U(this.j(U(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var R=this.g.length+I.g.length,N=[],V=0;V<2*R;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<I.g.length;P++){var L=this.i(V)>>>16,O=this.i(V)&65535,Ie=I.i(P)>>>16,ve=I.i(P)&65535;N[2*V+2*P]+=O*ve,F(N,2*V+2*P),N[2*V+2*P+1]+=L*ve,F(N,2*V+2*P+1),N[2*V+2*P+1]+=O*Ie,F(N,2*V+2*P+1),N[2*V+2*P+2]+=L*Ie,F(N,2*V+2*P+2)}for(V=0;V<R;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=R;V<2*R;V++)N[V]=0;return new l(N,0)};function F(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function q(I,R){this.g=I,this.h=R}function J(I,R){if(x(R))throw Error("division by zero");if(x(I))return new q(E,E);if(M(I))return R=J(U(I),R),new q(U(R.g),U(R.h));if(M(R))return R=J(I,U(R)),new q(U(R.g),R.h);if(30<I.g.length){if(M(I)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var N=T,V=R;0>=V.l(I);)N=te(N),V=te(V);var P=G(N,1),L=G(V,1);for(V=G(V,2),N=G(N,2);!x(V);){var O=L.add(V);0>=O.l(I)&&(P=P.add(N),L=O),V=G(V,1),N=G(N,1)}return R=H(I,P.j(R)),new q(P,R)}for(P=E;0<=I.l(R);){for(N=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=h(N),O=L.j(R);M(O)||0<O.l(I);)N-=V,L=h(N),O=L.j(R);x(L)&&(L=T),P=P.add(L),I=H(I,O)}return new q(P,I)}t.A=function(I){return J(this,I).h},t.and=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],V=0;V<R;V++)N[V]=this.i(V)&I.i(V);return new l(N,this.h&I.h)},t.or=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],V=0;V<R;V++)N[V]=this.i(V)|I.i(V);return new l(N,this.h|I.h)},t.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],V=0;V<R;V++)N[V]=this.i(V)^I.i(V);return new l(N,this.h^I.h)};function te(I){for(var R=I.g.length+1,N=[],V=0;V<R;V++)N[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(N,I.h)}function G(I,R){var N=R>>5;R%=32;for(var V=I.g.length-N,P=[],L=0;L<V;L++)P[L]=0<R?I.i(L+N)>>>R|I.i(L+N+1)<<32-R:I.i(L+N);return new l(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,YC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,mo=l}).apply(typeof PS<"u"?PS:typeof self<"u"?self:typeof window<"u"?window:{});var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jC,ic,WC,th,dy,QC,XC,ZC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,C){return m==Array.prototype||m==Object.prototype||(m[S]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Id=="object"&&Id];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var C=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var j=m[k];if(!(j in C))break e;C=C[j]}m=m[m.length-1],k=C[m],S=S(k),S!=k&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var C=0,k=!1,j={next:function(){if(!k&&C<m.length){var ie=C++;return{value:S(ie,m[ie]),done:!1}}return k=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function g(m,S,C){return m.call.apply(m.bind,arguments)}function E(m,S,C){if(!m)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,k),m.apply(S,j)}}return function(){return m.apply(S,arguments)}}function T(m,S,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:E,T.apply(null,arguments)}function w(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var k=C.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function x(m,S){function C(){}C.prototype=S.prototype,m.aa=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(k,j,ie){for(var de=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)de[gt-2]=arguments[gt];return S.prototype[j].apply(k,de)}}function M(m){const S=m.length;if(0<S){const C=Array(S);for(let k=0;k<S;k++)C[k]=m[k];return C}return[]}function U(m,S){for(let C=1;C<arguments.length;C++){const k=arguments[C];if(d(k)){const j=m.length||0,ie=k.length||0;m.length=j+ie;for(let de=0;de<ie;de++)m[j+de]=k[de]}else m.push(k)}}class H{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function q(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function J(m){return J[" "](m),m}J[" "]=function(){};var te=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function G(m,S,C){for(const k in m)S.call(C,m[k],k,m)}function I(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function R(m){const S={};for(const C in m)S[C]=m[C];return S}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,S){let C,k;for(let j=1;j<arguments.length;j++){k=arguments[j];for(C in k)m[C]=k[C];for(let ie=0;ie<N.length;ie++)C=N[ie],Object.prototype.hasOwnProperty.call(k,C)&&(m[C]=k[C])}}function P(m){var S=1;m=m.split(":");const C=[];for(;0<S&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function L(m){c.setTimeout(()=>{throw m},0)}function O(){var m=Re;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class Ie{constructor(){this.h=this.g=null}add(S,C){const k=ve.get();k.set(S,C),this.h?this.h.next=k:this.g=k,this.h=k}}var ve=new H(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,pe=!1,Re=new Ie,ge=()=>{const m=c.Promise.resolve(void 0);ce=()=>{m.then(B)}};var B=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(C){L(C)}var S=ve;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}pe=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function we(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(te){e:{try{J(S.nodeName);var j=!0;break e}catch{}j=!1}j||(S=null)}}else C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement);this.relatedTarget=S,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&we.aa.h.call(this)}}x(we,fe);var Ve={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function At(m,S,C,k,j){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!k,this.ha=j,this.key=++Ht,this.da=this.fa=!1}function Gn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function di(m){this.src=m,this.g={},this.h=0}di.prototype.add=function(m,S,C,k,j){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var de=bn(m,S,k,j);return-1<de?(S=m[de],C||(S.fa=!1)):(S=new At(S,this.src,ie,!!k,j),S.fa=C,m.push(S)),S};function vn(m,S){var C=S.type;if(C in m.g){var k=m.g[C],j=Array.prototype.indexOf.call(k,S,void 0),ie;(ie=0<=j)&&Array.prototype.splice.call(k,j,1),ie&&(Gn(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function bn(m,S,C,k){for(var j=0;j<m.length;++j){var ie=m[j];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==k)return j}return-1}var kn="closure_lm_"+(1e6*Math.random()|0),wn={};function Cn(m,S,C,k,j){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)Cn(m,S[ie],C,k,j);return null}return C=en(C),m&&m[qe]?m.K(S,C,h(k)?!!k.capture:!1,j):Fi(m,S,C,!1,k,j)}function Fi(m,S,C,k,j,ie){if(!S)throw Error("Invalid event type");var de=h(j)?!!j.capture:!!j,gt=qi(m);if(gt||(m[kn]=gt=new di(m)),C=gt.add(S,C,k,de,ie),C.proxy)return C;if(k=Ae(),C.proxy=k,k.src=m,k.listener=C,m.addEventListener)he||(j=de),j===void 0&&(j=!1),m.addEventListener(S.toString(),k,j);else if(m.attachEvent)m.attachEvent(_n(S.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ae(){function m(C){return S.call(m.src,m.listener,C)}const S=ar;return m}function xt(m,S,C,k,j){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)xt(m,S[ie],C,k,j);else k=h(k)?!!k.capture:!!k,C=en(C),m&&m[qe]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],C=bn(ie,C,k,j),-1<C&&(Gn(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=qi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=bn(S,C,k,j)),(C=-1<m?S[m]:null)&&Ft(C))}function Ft(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[qe])vn(S.i,m);else{var C=m.type,k=m.proxy;S.removeEventListener?S.removeEventListener(C,k,m.capture):S.detachEvent?S.detachEvent(_n(C),k):S.addListener&&S.removeListener&&S.removeListener(k),(C=qi(S))?(vn(C,m),C.h==0&&(C.src=null,S[kn]=null)):Gn(m)}}}function _n(m){return m in wn?wn[m]:wn[m]="on"+m}function ar(m,S){if(m.da)m=!0;else{S=new we(S,this);var C=m.listener,k=m.ha||m.src;m.fa&&Ft(m),m=C.call(k,S)}return m}function qi(m){return m=m[kn],m instanceof di?m:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function en(m){return typeof m=="function"?m:(m[ht]||(m[ht]=function(S){return m.handleEvent(S)}),m[ht])}function Be(){Z.call(this),this.i=new di(this),this.M=this,this.F=null}x(Be,Z),Be.prototype[qe]=!0,Be.prototype.removeEventListener=function(m,S,C,k){xt(this,m,S,C,k)};function Gt(m,S){var C,k=m.F;if(k)for(C=[];k;k=k.F)C.push(k);if(m=m.M,k=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var j=S;S=new fe(k,m),V(S,j)}if(j=!0,C)for(var ie=C.length-1;0<=ie;ie--){var de=S.g=C[ie];j=an(de,k,!0,S)&&j}if(de=S.g=m,j=an(de,k,!0,S)&&j,j=an(de,k,!1,S)&&j,C)for(ie=0;ie<C.length;ie++)de=S.g=C[ie],j=an(de,k,!1,S)&&j}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var C=m.g[S],k=0;k<C.length;k++)Gn(C[k]);delete m.g[S],m.h--}}this.F=null},Be.prototype.K=function(m,S,C,k){return this.i.add(String(m),S,!1,C,k)},Be.prototype.L=function(m,S,C,k){return this.i.add(String(m),S,!0,C,k)};function an(m,S,C,k){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var j=!0,ie=0;ie<S.length;++ie){var de=S[ie];if(de&&!de.da&&de.capture==C){var gt=de.listener,un=de.ha||de.src;de.fa&&vn(m.i,de),j=gt.call(un,k)!==!1&&j}}return j&&!k.defaultPrevented}function ln(m,S,C){if(typeof m=="function")C&&(m=T(m,C));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function Ts(m){m.g=ln(()=>{m.g=null,m.i&&(m.i=!1,Ts(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Xl extends Z{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ts(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(m){Z.call(this),this.h=m,this.g={}}x(Kn,Z);var bi=[];function In(m){G(m.g,function(S,C){this.g.hasOwnProperty(C)&&Ft(S)},m),m.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),In(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=c.JSON.stringify,be=c.JSON.parse,Se=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Ge(){}Ge.prototype.h=null;function _t(m){return m.h||(m.h=m.i())}function Ye(){}var je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){fe.call(this,"d")}x(ot,fe);function it(){fe.call(this,"c")}x(it,fe);var De={},Ke=null;function En(){return Ke=Ke||new Be}De.La="serverreachability";function Bi(m){fe.call(this,De.La,m)}x(Bi,fe);function tn(m){const S=En();Gt(S,new Bi(S))}De.STAT_EVENT="statevent";function Nt(m,S){fe.call(this,De.STAT_EVENT,m),this.stat=S}x(Nt,fe);function Et(m){const S=En();Gt(S,new Nt(S,m))}De.Ma="timingevent";function ni(m,S){fe.call(this,De.Ma,m),this.size=S}x(ni,fe);function qt(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function zi(m,S,C,k,j,ie){m.info(function(){if(m.g)if(ie)for(var de="",gt=ie.split("&"),un=0;un<gt.length;un++){var $e=gt[un].split("=");if(1<$e.length){var xn=$e[0];$e=$e[1];var Nn=xn.split("_");de=2<=Nn.length&&Nn[1]=="type"?de+(xn+"="+$e+"&"):de+(xn+"=redacted&")}}else de=null;else de=ie;return"XMLHTTP REQ ("+k+") [attempt "+j+"]: "+S+`
`+C+`
`+de})}function Vn(m,S,C,k,j,ie,de){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+j+"]: "+S+`
`+C+`
`+ie+" "+de})}function ii(m,S,C,k){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+wi(m,C)+(k?" "+k:"")})}function Hr(m,S){m.info(function(){return"TIMEOUT: "+S})}$n.prototype.info=function(){};function wi(m,S){if(!m.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var k=C[m];if(!(2>k.length)){var j=k[1];if(Array.isArray(j)&&!(1>j.length)){var ie=j[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var de=1;de<j.length;de++)j[de]=""}}}}return le(C)}catch{return S}}var Mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function Hi(){}x(Hi,Ge),Hi.prototype.g=function(){return new XMLHttpRequest},Hi.prototype.i=function(){return{}},Ci=new Hi;function Ii(m,S,C,k){this.j=m,this.i=S,this.l=C,this.R=k||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Po}function Po(){this.i=null,this.g="",this.h=!1}var lr={},Gi={};function Ki(m,S,C){m.L=1,m.v=Vo(Yt(S)),m.m=C,m.P=!0,hi(m,null)}function hi(m,S){m.F=Date.now(),ri(m),m.A=Yt(m.v);var C=m.A,k=m.R;Array.isArray(k)||(k=[String(k)]),Kr(C.i,"t",k),m.C=0,C=m.j.J,m.h=new Po,m.g=_f(m.j,C?S:null,!m.m),0<m.O&&(m.M=new Xl(T(m.Y,m,m.g),m.O)),S=m.U,C=m.g,k=m.ca;var j="readystatechange";Array.isArray(j)||(j&&(bi[0]=j.toString()),j=bi);for(var ie=0;ie<j.length;ie++){var de=Cn(C,j[ie],k||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.H?R(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),tn(),zi(m.i,m.u,m.A,m.l,m.R,m.m)}Ii.prototype.ca=function(m){m=m.target;const S=this.M;S&&ai(m)==3?S.j():this.Y(m)},Ii.prototype.Y=function(m){try{if(m==this.g)e:{const Nn=ai(this.g);var S=this.g.Ba();const Ps=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||Uo(this.g)))){this.J||Nn!=4||S==7||(S==8||0>=Ps?tn(3):tn(2)),ur(this);var C=this.g.Z();this.X=C;t:if($i(this)){var k=Uo(this.g);m="";var j=k.length,ie=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),cr(this);var de="";break t}this.h.i=new c.TextDecoder}for(S=0;S<j;S++)this.h.h=!0,m+=this.h.i.decode(k[S],{stream:!(ie&&S==j-1)});k.length=0,this.h.g+=m,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=C==200,Vn(this.i,this.u,this.A,this.l,this.R,Nn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,un=this.g;if((gt=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(gt)){var $e=gt;break t}}$e=null}if(C=$e)ii(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wr(this,C);else{this.o=!1,this.s=3,Et(12),si(this),cr(this);break e}}if(this.P){C=!0;let mi;for(;!this.J&&this.C<de.length;)if(mi=br(this,de),mi==Gi){Nn==4&&(this.s=4,Et(14),C=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(mi==lr){this.s=4,Et(15),ii(this.i,this.l,de,"[Invalid Chunk]"),C=!1;break}else ii(this.i,this.l,mi,null),wr(this,mi);if($i(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||de.length!=0||this.h.h||(this.s=1,Et(16),C=!1),this.o=this.o&&C,!C)ii(this.i,this.l,de,"[Invalid Chunked Response]"),si(this),cr(this);else if(0<de.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),uu(xn),xn.M=!0,Et(11))}}else ii(this.i,this.l,de,null),wr(this,de);Nn==4&&si(this),this.o&&!this.J&&(Nn==4?gf(this.j,this):(this.o=!1,ri(this)))}else cf(this.g),C==400&&0<de.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),si(this),cr(this)}}}catch{}finally{}};function $i(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function br(m,S){var C=m.C,k=S.indexOf(`
`,C);return k==-1?Gi:(C=Number(S.substring(C,k)),isNaN(C)?lr:(k+=1,k+C>S.length?Gi:(S=S.slice(k,k+C),m.C=k+C,S)))}Ii.prototype.cancel=function(){this.J=!0,si(this)};function ri(m){m.S=Date.now()+m.I,Bt(m,m.I)}function Bt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=qt(T(m.ba,m),S)}function ur(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ii.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Hr(this.i,this.A),this.L!=2&&(tn(),Et(17)),si(this),this.s=2,cr(this)):Bt(this,this.S-m)};function cr(m){m.j.G==0||m.J||gf(m.j,m)}function si(m){ur(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,In(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function wr(m,S){try{var C=m.j;if(C.G!=0&&(C.g==m||Ss(C.h,m))){if(!m.K&&Ss(C.h,m)&&C.G==3){try{var k=C.Da.g.parse(S)}catch{k=null}if(Array.isArray(k)&&k.length==3){var j=k;if(j[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Ds(C),Ns(C);else break e;lu(C),Et(18)}}else C.za=j[1],0<C.za-C.T&&37500>j[2]&&C.F&&C.v==0&&!C.C&&(C.C=qt(T(C.Za,C),6e3));if(1>=rf(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Jr(C,11)}else if((m.K||C.g==m)&&Ds(C),!F(S))for(j=C.Da.g.parse(S),S=0;S<j.length;S++){let $e=j[S];if(C.T=$e[0],$e=$e[1],C.G==2)if($e[0]=="c"){C.K=$e[1],C.ia=$e[2];const xn=$e[3];xn!=null&&(C.la=xn,C.j.info("VER="+C.la));const Nn=$e[4];Nn!=null&&(C.Aa=Nn,C.j.info("SVER="+C.Aa));const Ps=$e[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(k=1.5*Ps,C.L=k,C.j.info("backChannelRequestTimeoutMs_="+k)),k=C;const mi=m.g;if(mi){const Bo=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var ie=k.h;ie.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(As(ie,ie.h),ie.h=null))}if(k.D){const Yr=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Yr&&(k.ya=Yr,lt(k.I,k.D,Yr))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),k=C;var de=m;if(k.qa=vf(k,k.J?k.ia:null,k.W),de.K){Ji(k.h,de);var gt=de,un=k.L;un&&(gt.I=un),gt.B&&(ur(gt),ri(gt)),k.g=de}else pf(k);0<C.i.length&&ka(C)}else $e[0]!="stop"&&$e[0]!="close"||Jr(C,7);else C.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Jr(C,7):ou(C):$e[0]!="noop"&&C.l&&C.l.ta($e),C.v=0)}}tn(4)}catch{}}var Np=class{constructor(m,S){this.g=m,this.map=S}};function Zl(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function rf(m){return m.h?1:m.g?m.g.size:0}function Ss(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function As(m,S){m.g?m.g.add(S):m.h=S}function Ji(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}Zl.prototype.cancel=function(){if(this.i=oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function oi(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.D);return S}return M(m.i)}function sf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],C=m.length,k=0;k<C;k++)S.push(m[k]);return S}S=[],C=0;for(k in m)S[C++]=m[k];return S}function Dp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var C=0;C<m;C++)S.push(C);return S}S=[],C=0;for(const k in m)S[C++]=k;return S}}}function Ia(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var C=Dp(m),k=sf(m),j=k.length,ie=0;ie<j;ie++)S.call(void 0,k[ie],C&&C[ie],m)}var tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(m,S){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var k=m[C].indexOf("="),j=null;if(0<=k){var ie=m[C].substring(0,k);j=m[C].substring(k+1)}else ie=m[C];S(ie,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Gr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Gr){this.h=m.h,bs(this,m.j),this.o=m.o,this.g=m.g,ko(this,m.s),this.l=m.l;var S=m.i,C=new Cr;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),xa(this,C),this.m=m.m}else m&&(S=String(m).match(tu))?(this.h=!1,bs(this,S[1]||"",!0),this.o=ws(S[2]||""),this.g=ws(S[3]||"",!0),ko(this,S[4]),this.l=ws(S[5]||"",!0),xa(this,S[6]||"",!0),this.m=ws(S[7]||"")):(this.h=!1,this.i=new Cr(null,this.h))}Gr.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Yi(S,nu,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Yi(S,nu,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Yi(C,C.charAt(0)=="/"?iu:of,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Yi(C,kp)),m.join("")};function Yt(m){return new Gr(m)}function bs(m,S,C){m.j=C?ws(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function ko(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function xa(m,S,C){S instanceof Cr?(m.i=S,af(m.i,m.h)):(C||(S=Yi(S,Pp)),m.i=new Cr(S,m.h))}function lt(m,S,C){m.i.set(S,C)}function Vo(m){return lt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ws(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Yi(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,Mp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Mp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var nu=/[#\/\?@]/g,of=/[#\?:]/g,iu=/[#\?]/g,Pp=/[#\?@]/g,kp=/#/g;function Cr(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Rn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ra(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Cr.prototype,t.add=function(m,S){Rn(this),this.i=null,m=Ri(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function Na(m,S){Rn(m),S=Ri(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Da(m,S){return Rn(m),S=Ri(m,S),m.g.has(S)}t.forEach=function(m,S){Rn(this),this.g.forEach(function(C,k){C.forEach(function(j){m.call(S,j,k,this)},this)},this)},t.na=function(){Rn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let k=0;k<S.length;k++){const j=m[k];for(let ie=0;ie<j.length;ie++)C.push(S[k])}return C},t.V=function(m){Rn(this);let S=[];if(typeof m=="string")Da(this,m)&&(S=S.concat(this.g.get(Ri(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)S=S.concat(m[C])}return S},t.set=function(m,S){return Rn(this),this.i=null,m=Ri(this,m),Da(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Kr(m,S,C){Na(m,S),0<C.length&&(m.i=null,m.g.set(Ri(m,S),M(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var k=S[C];const ie=encodeURIComponent(String(k)),de=this.V(k);for(k=0;k<de.length;k++){var j=ie;de[k]!==""&&(j+="="+encodeURIComponent(String(de[k]))),m.push(j)}}return this.i=m.join("&")};function Ri(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function af(m,S){S&&!m.j&&(Rn(m),m.i=null,m.g.forEach(function(C,k){var j=k.toLowerCase();k!=j&&(Na(this,k),Kr(this,j,C))},m)),m.j=S}function ru(m,S){const C=new $n;if(c.Image){const k=new Image;k.onload=w(pi,C,"TestLoadImage: loaded",!0,S,k),k.onerror=w(pi,C,"TestLoadImage: error",!1,S,k),k.onabort=w(pi,C,"TestLoadImage: abort",!1,S,k),k.ontimeout=w(pi,C,"TestLoadImage: timeout",!1,S,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else S(!1)}function lf(m,S){const C=new $n,k=new AbortController,j=setTimeout(()=>{k.abort(),pi(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:k.signal}).then(ie=>{clearTimeout(j),ie.ok?pi(C,"TestPingServer: ok",!0,S):pi(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(j),pi(C,"TestPingServer: error",!1,S)})}function pi(m,S,C,k,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),k(C)}catch{}}function fr(){this.g=new Se}function su(m,S,C){const k=C||"";try{Ia(m,function(j,ie){let de=j;h(j)&&(de=le(j)),S.push(k+ie+"="+encodeURIComponent(de))})}catch(j){throw S.push(k+"type="+encodeURIComponent("_badmap")),j}}function Ir(m){this.l=m.Ub||null,this.j=m.eb||!1}x(Ir,Ge),Ir.prototype.g=function(){return new xi(this.l,this.j)},Ir.prototype.i=(function(m){return function(){return m}})({});function xi(m,S){Be.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(xi,Be),t=xi.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,Cs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ma(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ma(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Rr(this):Cs(this),this.readyState==3&&Ma(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Rr(this))},t.Qa=function(m){this.g&&(this.response=m,Rr(this))},t.ga=function(){this.g&&Rr(this)};function Rr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Cs(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function Cs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Lo(m){let S="";return G(m,function(C,k){S+=k,S+=":",S+=C,S+=`\r
`}),S}function Is(m,S,C){e:{for(k in C){var k=!1;break e}k=!0}k||(C=Lo(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):lt(m,S,C))}function Pt(m){Be.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Pt,Be);var Jn=/^https?$/i,$r=["POST","PUT"];t=Pt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,C,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?_t(this.o):_t(Ci),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){Oo(this,ie);return}if(m=C||"",C=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var j in k)C.set(j,k[j]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ie of k.keys())C.set(ie,k.get(ie));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),j=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call($r,S,void 0))||k||j||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,de]of C)this.g.setRequestHeader(ie,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){Oo(this,ie)}};function Oo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Rs(m),xs(m)}function Rs(m){m.A||(m.A=!0,Gt(m,"complete"),Gt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Gt(this,"complete"),Gt(this,"abort"),xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),Pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uf(this):this.bb())},t.bb=function(){uf(this)};function uf(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ai(m)!=4||m.Z()!=2)){if(m.u&&ai(m)==4)ln(m.Ea,0,m);else if(Gt(m,"readystatechange"),ai(m)==4){m.h=!1;try{const de=m.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var k;if(k=de===0){var j=String(m.D).match(tu)[1]||null;!j&&c.self&&c.self.location&&(j=c.self.location.protocol.slice(0,-1)),k=!Jn.test(j?j.toLowerCase():"")}C=k}if(C)Gt(m,"complete"),Gt(m,"success");else{m.m=6;try{var ie=2<ai(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Rs(m)}}finally{xs(m)}}}}function xs(m,S){if(m.g){Pa(m);const C=m.g,k=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Gt(m,"ready");try{C.onreadystatechange=k}catch{}}}function Pa(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ai(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),be(S)}};function Uo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function cf(m){const S={};m=(m.g&&2<=ai(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(F(m[k]))continue;var C=P(m[k]);const j=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[j]||[];S[j]=ie,ie.push(C)}I(S,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function ff(m){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,m),this.cb=Fo("retryDelaySeedMs",1e4,m),this.Wa=Fo("forwardChannelMaxRetries",2,m),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Zl(m&&m.concurrentRequestLimit),this.Da=new fr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ff.prototype,t.la=8,t.G=1,t.connect=function(m,S,C,k){Et(0),this.W=m,this.H=S||{},C&&k!==void 0&&(this.H.OSID=C,this.H.OAID=k),this.F=this.X,this.I=vf(this,null,this.W),ka(this)};function ou(m){if(df(m),m.G==3){var S=m.U++,C=Yt(m.I);if(lt(C,"SID",m.K),lt(C,"RID",S),lt(C,"TYPE","terminate"),qo(m,C),S=new Ii(m,m.j,S),S.L=2,S.v=Vo(Yt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.v,C=!0),C||(S.g=_f(S.j,null),S.g.ea(S.v)),S.F=Date.now(),ri(S)}cu(m)}function Ns(m){m.g&&(uu(m),m.g.cancel(),m.g=null)}function df(m){Ns(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ds(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function ka(m){if(!eu(m.h)&&!m.s){m.s=!0;var S=m.Ga;ce||ge(),pe||(ce(),pe=!0),Re.add(S,m),m.B=0}}function Vp(m,S){return rf(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=qt(T(m.Ga,m,S),yf(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const j=new Ii(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=R(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(j.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var k=this.i[C];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(S+=k,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=au(this,j,S),C=Yt(this.I),lt(C,"RID",m),lt(C,"CVER",22),this.D&&lt(C,"X-HTTP-Session-Id",this.D),qo(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(Lo(ie)))+"&"+S:this.m&&Is(C,this.m,ie)),As(this.h,j),this.Ua&&lt(C,"TYPE","init"),this.P?(lt(C,"$req",S),lt(C,"SID","null"),j.T=!0,Ki(j,C,null)):Ki(j,C,S),this.G=2}}else this.G==3&&(m?hf(this,m):this.i.length==0||eu(this.h)||hf(this))};function hf(m,S){var C;S?C=S.l:C=m.U++;const k=Yt(m.I);lt(k,"SID",m.K),lt(k,"RID",C),lt(k,"AID",m.T),qo(m,k),m.m&&m.o&&Is(k,m.m,m.o),C=new Ii(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),S&&(m.i=S.D.concat(m.i)),S=au(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),As(m.h,C),Ki(C,k,S)}function qo(m,S){m.H&&G(m.H,function(C,k){lt(S,k,C)}),m.l&&Ia({},function(C,k){lt(S,k,C)})}function au(m,S,C){C=Math.min(m.i.length,C);var k=m.l?T(m.l.Na,m.l,m):null;e:{var j=m.i;let ie=-1;for(;;){const de=["count="+C];ie==-1?0<C?(ie=j[0].g,de.push("ofs="+ie)):ie=0:de.push("ofs="+ie);let gt=!0;for(let un=0;un<C;un++){let $e=j[un].g;const xn=j[un].map;if($e-=ie,0>$e)ie=Math.max(0,j[un].g-100),gt=!1;else try{su(xn,de,"req"+$e+"_")}catch{k&&k(xn)}}if(gt){k=de.join("&");break e}}}return m=m.i.splice(0,C),S.D=m,k}function pf(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ce||ge(),pe||(ce(),pe=!0),Re.add(S,m),m.v=0}}function lu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=qt(T(m.Fa,m),yf(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=qt(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Ns(this),mf(this))};function uu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function mf(m){m.g=new Ii(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Yt(m.qa);lt(S,"RID","rpc"),lt(S,"SID",m.K),lt(S,"AID",m.T),lt(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&lt(S,"TO",m.ja),lt(S,"TYPE","xmlhttp"),qo(m,S),m.m&&m.o&&Is(S,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Vo(Yt(S)),C.m=null,C.P=!0,hi(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Ns(this),lu(this),Et(19))};function Ds(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function gf(m,S){var C=null;if(m.g==S){Ds(m),uu(m),m.g=null;var k=2}else if(Ss(m.h,S))C=S.D,Ji(m.h,S),k=1;else return;if(m.G!=0){if(S.o)if(k==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var j=m.B;k=En(),Gt(k,new ni(k,C)),ka(m)}else pf(m);else if(j=S.s,j==3||j==0&&0<S.X||!(k==1&&Vp(m,S)||k==2&&lu(m)))switch(C&&0<C.length&&(S=m.h,S.i=S.i.concat(C)),j){case 1:Jr(m,5);break;case 4:Jr(m,10);break;case 3:Jr(m,6);break;default:Jr(m,2)}}}function yf(m,S){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*S}function Jr(m,S){if(m.j.info("Error code "+S),S==2){var C=T(m.fb,m),k=m.Xa;const j=!k;k=new Gr(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bs(k,"https"),Vo(k),j?ru(k.toString(),C):lf(k.toString(),C)}else Et(2);m.G=0,m.l&&m.l.sa(S),cu(m),df(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function cu(m){if(m.G=0,m.ka=[],m.l){const S=oi(m.h);(S.length!=0||m.i.length!=0)&&(U(m.ka,S),U(m.ka,m.i),m.h.i.length=0,M(m.i),m.i.length=0),m.l.ra()}}function vf(m,S,C){var k=C instanceof Gr?Yt(C):new Gr(C);if(k.g!="")S&&(k.g=S+"."+k.g),ko(k,k.s);else{var j=c.location;k=j.protocol,S=S?S+"."+j.hostname:j.hostname,j=+j.port;var ie=new Gr(null);k&&bs(ie,k),S&&(ie.g=S),j&&ko(ie,j),C&&(ie.l=C),k=ie}return C=m.D,S=m.ya,C&&S&&lt(k,C,S),lt(k,"VER",m.la),qo(m,k),k}function _f(m,S,C){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new Pt(new Ir({eb:C})):new Pt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ef(){}t=Ef.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Va(){}Va.prototype.g=function(m,S){return new li(m,S)};function li(m,S){Be.call(this),this.g=new ff(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Ms(this)}x(li,Be),li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){ou(this.g)},li.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=le(m),m=C);S.i.push(new Np(S.Ya++,m)),S.G==3&&ka(S)},li.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,li.aa.N.call(this)};function Tf(m){ot.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}x(Tf,ot);function Sf(){it.call(this),this.status=1}x(Sf,it);function Ms(m){this.g=m}x(Ms,Ef),Ms.prototype.ua=function(){Gt(this.g,"a")},Ms.prototype.ta=function(m){Gt(this.g,new Tf(m))},Ms.prototype.sa=function(m){Gt(this.g,new Sf)},Ms.prototype.ra=function(){Gt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,ZC=function(){return new Va},XC=function(){return En()},QC=De,dy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,th=Mt,nn.COMPLETE="complete",WC=nn,Ye.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",Be.prototype.listen=Be.prototype.K,ic=Ye,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,jC=Pt}).apply(typeof Id<"u"?Id:typeof self<"u"?self:typeof window<"u"?window:{});const kS="@firebase/firestore",VS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new ov("@firebase/firestore");function ml(){return va.logLevel}function _e(t,...e){if(va.logLevel<=tt.DEBUG){const n=e.map(Ev);va.debug(`Firestore (${Hl}): ${t}`,...n)}}function gs(t,...e){if(va.logLevel<=tt.ERROR){const n=e.map(Ev);va.error(`Firestore (${Hl}): ${t}`,...n)}}function _o(t,...e){if(va.logLevel<=tt.WARN){const n=e.map(Ev);va.warn(`Firestore (${Hl}): ${t}`,...n)}}function Ev(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,eI(t,i,n)}function eI(t,e,n){let i=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gs(i),new Error(i)}function vt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||eI(e,s,i)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xn.UNAUTHENTICATED)))}shutdown(){}}class ok{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ak{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new la;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new la,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new la)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vt(typeof i.accessToken=="string",31837,{l:i}),new tI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class lk{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uk{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new lk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ck{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){vt(this.o===void 0,3512);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new LS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=fk(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function hy(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Je(i,s);{const a=nI(),l=dk(a.encode(OS(t,n)),a.encode(OS(e,n)));return l!==0?l:Je(i,s)}}n+=i>65535?2:1}return Je(t.length,e.length)}function OS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function dk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Je(t[n],e[n]);return Je(t.length,e.length)}function Pl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="__name__";class kr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ke(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return kr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=kr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Je(e.length,n.length)}static compareSegments(e,n){const i=kr.isNumericId(e),s=kr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?kr.extractNumericId(e).compare(kr.extractNumericId(n)):hy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class Dt extends kr{construct(e,n,i){return new Dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Dt(n)}static emptyPath(){return new Dt([])}}const hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends kr{construct(e,n,i){return new zn(e,n,i)}static isValidIdentifier(e){return hk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===US}static keyField(){return new zn([US])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Ee(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(n)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Dt.fromString(e))}static fromName(e){return new Ne(Dt.fromString(e).popFirst(5))}static empty(){return new Ne(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e,n){if(!n)throw new Ee(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pk(t,e,n,i){if(e===!0&&i===!0)throw new Ee(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FS(t){if(!Ne.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qS(t){if(Ne.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function go(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ip(t);throw new Ee(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yc(t,e){if(!rI(t))throw new Ee(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=-62135596800,zS=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*zS);return new Ut(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<BS)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zS}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-BS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:gn("string",Ut._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Ut(0,0))}static max(){return new Le(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function mk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new Eo(s,Ne.empty(),e)}function gk(t){return new Eo(t.readTime,t.key,Pc)}class Eo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Eo(Le.min(),Ne.empty(),Pc)}static max(){return new Eo(Le.max(),Ne.empty(),Pc)}}function yk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==vk)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(d=>i(d)))})),l=!0,a===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((g=>{l[h]=g,++c,c===a&&i(l)}),(g=>s(g)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function Ek(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}rp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=-1;function sp(t){return t==null}function bh(t){return t===0&&1/t==-1/0}function Tk(t){return typeof t=="number"&&Number.isInteger(t)&&!bh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="";function Sk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=HS(e)),e=Ak(t.get(n),e);return HS(e)}function Ak(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case sI:n+="";break;default:n+=a}}return n}function HS(t){return t+sI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rd(this.root,e,this.comparator,!0)}}class Rd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Bn.RED,this.left=s??Bn.EMPTY,this.right=a??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Bn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KS(this.data.getIterator())}getIteratorFrom(e){return new KS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class KS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Oi([])}unionWith(e){let n=new An(zn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new aI("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const bk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(vt(!!t,39018),typeof t=="string"){let e=0;const n=bk.exec(t);if(vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:on(t.seconds),nanos:on(t.nanos)}}function on(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function So(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="server_timestamp",uI="__type__",cI="__previous_value__",fI="__local_write_time__";function Av(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[uI])===null||n===void 0?void 0:n.stringValue)===lI}function op(t){const e=t.mapValue.fields[cI];return Av(e)?op(e):e}function kc(t){const e=To(t.mapValue.fields[fI].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,i,s,a,l,c,d,h,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=g}}const wh="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="__type__",Ck="__max__",xd={mapValue:{}},hI="__vector__",Ch="value";function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Av(t)?4:Rk(t)?9007199254740991:Ik(t)?10:11:ke(28295,{value:t})}function Br(t,e){if(t===e)return!0;const n=Ao(t);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=To(s.timestampValue),c=To(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return So(s.bytesValue).isEqual(So(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return on(s.geoPointValue.latitude)===on(a.geoPointValue.latitude)&&on(s.geoPointValue.longitude)===on(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return on(s.integerValue)===on(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=on(s.doubleValue),c=on(a.doubleValue);return l===c?bh(l)===bh(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Pl(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(GS(l)!==GS(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Br(l[d],c[d])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Lc(t,e){return(t.values||[]).find((n=>Br(n,e)))!==void 0}function kl(t,e){if(t===e)return 0;const n=Ao(t),i=Ao(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=on(a.integerValue||a.doubleValue),d=on(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return $S(t.timestampValue,e.timestampValue);case 4:return $S(kc(t),kc(e));case 5:return hy(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=So(a),d=So(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const g=Je(c[h],d[h]);if(g!==0)return g}return Je(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Je(on(a.latitude),on(l.latitude));return c!==0?c:Je(on(a.longitude),on(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JS(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var c,d,h,g;const E=a.fields||{},T=l.fields||{},w=(c=E[Ch])===null||c===void 0?void 0:c.arrayValue,x=(d=T[Ch])===null||d===void 0?void 0:d.arrayValue,M=Je(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0);return M!==0?M:JS(w,x)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===xd.mapValue&&l===xd.mapValue)return 0;if(a===xd.mapValue)return 1;if(l===xd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=l.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let E=0;E<d.length&&E<g.length;++E){const T=hy(d[E],g[E]);if(T!==0)return T;const w=kl(c[d[E]],h[g[E]]);if(w!==0)return w}return Je(d.length,g.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{le:n})}}function $S(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=To(t),i=To(e),s=Je(n.seconds,i.seconds);return s!==0?s:Je(n.nanos,i.nanos)}function JS(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=kl(n[s],i[s]);if(a)return a}return Je(n.length,i.length)}function Vl(t){return py(t)}function py(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=To(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return So(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=py(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${py(n.fields[l])}`;return s+"}"})(t.mapValue):ke(61005,{value:t})}function nh(t){switch(Ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=op(t);return e?16+nh(e):16;case 5:return 2*t.stringValue.length;case 6:return So(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+nh(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return No(i.fields,((a,l)=>{s+=a.length+nh(l)})),s})(t.mapValue);default:throw ke(13486,{value:t})}}function YS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function my(t){return!!t&&"integerValue"in t}function bv(t){return!!t&&"arrayValue"in t}function jS(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function Ik(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[dI])===null||n===void 0?void 0:n.stringValue)===hI}function pc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=pc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Rk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ck}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=zn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=pc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];ih(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){No(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new Ai(pc(this.value))}}function pI(t){const e=[];return No(t.fields,((n,i)=>{const s=new zn([n]);if(ih(i)){const a=pI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Le.min(),Le.min(),Le.min(),Ai.empty(),0)}static newFoundDocument(e,n,i,s){return new Zn(e,1,n,Le.min(),i,s,0)}static newNoDocument(e,n){return new Zn(e,2,n,Le.min(),Le.min(),Ai.empty(),0)}static newUnknownDocument(e,n){return new Zn(e,3,n,Le.min(),Le.min(),Ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function QS(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=kl(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function XS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n="asc"){this.field=e,this.dir=n}}function xk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{}class mn extends mI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Dk(e,n,i):n==="array-contains"?new kk(e,i):n==="in"?new Vk(e,i):n==="not-in"?new Lk(e,i):n==="array-contains-any"?new Ok(e,i):new mn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Mk(e,i):new Pk(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kl(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(kl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends mI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Sr(e,n)}matches(e){return gI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gI(t){return t.op==="and"}function yI(t){return Nk(t)&&gI(t)}function Nk(t){for(const e of t.filters)if(e instanceof Sr)return!1;return!0}function gy(t){if(t instanceof mn)return t.field.canonicalString()+t.op.toString()+Vl(t.value);if(yI(t))return t.filters.map((e=>gy(e))).join(",");{const e=t.filters.map((n=>gy(n))).join(",");return`${t.op}(${e})`}}function vI(t,e){return t instanceof mn?(function(i,s){return s instanceof mn&&i.op===s.op&&i.field.isEqual(s.field)&&Br(i.value,s.value)})(t,e):t instanceof Sr?(function(i,s){return s instanceof Sr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&vI(l,s.filters[c])),!0):!1})(t,e):void ke(19439)}function _I(t){return t instanceof mn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vl(n.value)}`})(t):t instanceof Sr?(function(n){return n.op.toString()+" {"+n.getFilters().map(_I).join(" ,")+"}"})(t):"Filter"}class Dk extends mn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mk extends mn{constructor(e,n){super(e,"in",n),this.keys=EI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Pk extends mn{constructor(e,n){super(e,"not-in",n),this.keys=EI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function EI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class kk extends mn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bv(n)&&Lc(n.arrayValue,this.value)}}class Vk extends mn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class Lk extends mn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class Ok extends mn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Lc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Pe=null}}function ZS(t,e=null,n=[],i=[],s=null,a=null,l=null){return new Uk(t,e,n,i,s,a,l)}function wv(t){const e=Fe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>gy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Vl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Vl(i))).join(",")),e.Pe=n}return e.Pe}function Cv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XS(t.startAt,e.startAt)&&XS(t.endAt,e.endAt)}function yy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Fk(t,e,n,i,s,a,l,c){return new jc(t,e,n,i,s,a,l,c)}function Iv(t){return new jc(t)}function eA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TI(t){return t.collectionGroup!==null}function mc(t){const e=Fe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new An(zn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Rh(a,i))})),n.has(zn.keyField().canonicalString())||e.Te.push(new Rh(zn.keyField(),i))}return e.Te}function Or(t){const e=Fe(t);return e.Ie||(e.Ie=qk(e,mc(t))),e.Ie}function qk(t,e){if(t.limitType==="F")return ZS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Rh(s.field,a)}));const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return ZS(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function vy(t,e){const n=t.filters.concat([e]);return new jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _y(t,e,n){return new jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ap(t,e){return Cv(Or(t),Or(e))&&t.limitType===e.limitType}function SI(t){return`${wv(Or(t))}|lt:${t.limitType}`}function gl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>_I(s))).join(", ")}]`),sp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Vl(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Vl(s))).join(",")),`Target(${i})`})(Or(t))}; limitType=${t.limitType})`}function lp(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of mc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,d){const h=QS(l,c,d);return l.inclusive?h<=0:h<0})(i.startAt,mc(i),s)||i.endAt&&!(function(l,c,d){const h=QS(l,c,d);return l.inclusive?h>=0:h>0})(i.endAt,mc(i),s))})(t,e)}function Bk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AI(t){return(e,n)=>{let i=!1;for(const s of mc(t)){const a=zk(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function zk(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const d=l.data.field(a),h=c.data.field(a);return d!==null&&h!==null?kl(d,h):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return oI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new Jt(Ne.comparator);function ys(){return Hk}const bI=new Jt(Ne.comparator);function rc(...t){let e=bI;for(const n of t)e=e.insert(n.key,n);return e}function wI(t){let e=bI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function aa(){return gc()}function CI(){return gc()}function gc(){return new Aa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Gk=new Jt(Ne.comparator),Kk=new An(Ne.comparator);function nt(...t){let e=Kk;for(const n of t)e=e.add(n);return e}const $k=new An(Je);function Jk(){return $k}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bh(e)?"-0":e}}function II(t){return{integerValue:""+t}}function Yk(t,e){return Tk(e)?II(e):Rv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function jk(t,e,n){return t instanceof xh?(function(s,a){const l={fields:{[uI]:{stringValue:lI},[fI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Av(a)&&(a=op(a)),a&&(l.fields[cI]=a),{mapValue:l}})(n,e):t instanceof Oc?xI(t,e):t instanceof Uc?NI(t,e):(function(s,a){const l=RI(s,a),c=tA(l)+tA(s.Ee);return my(l)&&my(s.Ee)?II(c):Rv(s.serializer,c)})(t,e)}function Wk(t,e,n){return t instanceof Oc?xI(t,e):t instanceof Uc?NI(t,e):n}function RI(t,e){return t instanceof Nh?(function(i){return my(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class xh extends up{}class Oc extends up{constructor(e){super(),this.elements=e}}function xI(t,e){const n=DI(e);for(const i of t.elements)n.some((s=>Br(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Uc extends up{constructor(e){super(),this.elements=e}}function NI(t,e){let n=DI(e);for(const i of t.elements)n=n.filter((s=>!Br(s,i)));return{arrayValue:{values:n}}}class Nh extends up{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function tA(t){return on(t.integerValue||t.doubleValue)}function DI(t){return bv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Qk(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Oc&&s instanceof Oc||i instanceof Uc&&s instanceof Uc?Pl(i.elements,s.elements,Br):i instanceof Nh&&s instanceof Nh?Br(i.Ee,s.Ee):i instanceof xh&&s instanceof xh})(t.transform,e.transform)}class Xk{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cp{}function MI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xv(t.key,Tr.none()):new Wc(t.key,t.data,Tr.none());{const n=t.data,i=Ai.empty();let s=new An(zn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Do(t.key,i,new Oi(s.toArray()),Tr.none())}}function Zk(t,e,n){t instanceof Wc?(function(s,a,l){const c=s.value.clone(),d=iA(s.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Do?(function(s,a,l){if(!rh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=iA(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(PI(s)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function yc(t,e,n,i){return t instanceof Wc?(function(a,l,c,d){if(!rh(a.precondition,l))return c;const h=a.value.clone(),g=rA(a.fieldTransforms,d,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Do?(function(a,l,c,d){if(!rh(a.precondition,l))return c;const h=rA(a.fieldTransforms,d,l),g=l.data;return g.setAll(PI(a)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,l,c){return rh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function eV(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=RI(i.transform,s||null);a!=null&&(n===null&&(n=Ai.empty()),n.set(i.field,a))}return n||null}function nA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Pl(i,s,((a,l)=>Qk(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wc extends cp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Do extends cp{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function PI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function iA(t,e,n){const i=new Map;vt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,Wk(l,c,n[s]))}return i}function rA(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,jk(a,l,e))}return i}class xv extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tV extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Zk(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=CI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const d=MI(l,c);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Le.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>nA(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>nA(n,i)))}}class Nv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){vt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return Gk})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Nv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,at;function sV(t){switch(t){case ae.OK:return ke(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function kI(t){if(t===void 0)return gs("GRPC error has no .code"),ae.UNKNOWN;switch(t){case pn.OK:return ae.OK;case pn.CANCELLED:return ae.CANCELLED;case pn.UNKNOWN:return ae.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ae.INTERNAL;case pn.UNAVAILABLE:return ae.UNAVAILABLE;case pn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case pn.NOT_FOUND:return ae.NOT_FOUND;case pn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case pn.ABORTED:return ae.ABORTED;case pn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case pn.DATA_LOSS:return ae.DATA_LOSS;default:return ke(39323,{code:t})}}(at=pn||(pn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new mo([4294967295,4294967295],0);function sA(t){const e=nI().encode(t),n=new YC;return n.update(e),new Uint8Array(n.digest())}function oA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([n,i],0),new mo([s,a],0)]}class Dv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sc(`Invalid padding: ${n}`);if(i<0)throw new sc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=mo.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(mo.fromNumber(i)));return s.compare(oV)===1&&(s=new mo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=sA(e),[i,s]=oA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Dv(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=sA(e),[i,s]=oA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Qc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fp(Le.min(),s,new Jt(Je),ys(),nt())}}class Qc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Qc(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class VI{constructor(e,n){this.targetId=e,this.De=n}}class LI{constructor(e,n,i=Hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class aA{constructor(){this.ve=0,this.Ce=lA(),this.Fe=Hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nt(),n=nt(),i=nt();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ke(38017,{changeType:a})}})),new Qc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=lA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class aV{constructor(e){this.We=e,this.Ge=new Map,this.ze=ys(),this.je=Nd(),this.Je=Nd(),this.He=new Jt(Je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(yy(a))if(i===0){const l=new Ne(a.path);this.Xe(n,l,Zn.newNoDocument(l,Le.min()))}else vt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=So(i).toUint8Array()}catch(d){if(d instanceof aI)return _o("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Dv(l,s,a)}catch(d){return _o(d instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,l)=>{const c=this.st(l);if(c){if(a.current&&yy(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Zn.newNoDocument(d,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}}));let i=nt();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new fp(e,n,this.He,this.ze,i);return this.ze=ys(),this.je=Nd(),this.Je=Nd(),this.He=new Jt(Je),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new aA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new An(Je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new An(Je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new aA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Nd(){return new Jt(Ne.comparator)}function lA(){return new Jt(Ne.comparator)}const lV={asc:"ASCENDING",desc:"DESCENDING"},uV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cV={and:"AND",or:"OR"};class fV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ey(t,e){return t.useProto3Json||sp(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dV(t,e){return Dh(t,e.toTimestamp())}function Ur(t){return vt(!!t,49232),Le.fromTimestamp((function(n){const i=To(n);return new Ut(i.seconds,i.nanos)})(t))}function Mv(t,e){return Ty(t,e).canonicalString()}function Ty(t,e){const n=(function(s){return new Dt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function UI(t){const e=Dt.fromString(t);return vt(HI(e),10190,{key:e.toString()}),e}function Sy(t,e){return Mv(t.databaseId,e.path)}function zg(t,e){const n=UI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(qI(n))}function FI(t,e){return Mv(t.databaseId,e)}function hV(t){const e=UI(t);return e.length===4?Dt.emptyPath():qI(e)}function Ay(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qI(t){return vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uA(t,e,n){return{name:Sy(t,e),fields:n.value.mapValue.fields}}function pV(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,g){return h.useProto3Json?(vt(g===void 0||typeof g=="string",58123),Hn.fromBase64String(g||"")):(vt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Hn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const g=h.code===void 0?ae.UNKNOWN:kI(h.code);return new Ee(g,h.message||"")})(l);n=new LI(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=zg(t,i.document.name),a=Ur(i.document.updateTime),l=i.document.createTime?Ur(i.document.createTime):Le.min(),c=new Ai({mapValue:{fields:i.document.fields}}),d=Zn.newFoundDocument(s,a,l,c),h=i.targetIds||[],g=i.removedTargetIds||[];n=new sh(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=zg(t,i.document),a=i.readTime?Ur(i.readTime):Le.min(),l=Zn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new sh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=zg(t,i.document),a=i.removedTargetIds||[];n=new sh([],a,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new rV(s,a),c=i.targetId;n=new VI(c,l)}}return n}function mV(t,e){let n;if(e instanceof Wc)n={update:uA(t,e.key,e.value)};else if(e instanceof xv)n={delete:Sy(t,e.key)};else if(e instanceof Do)n={update:uA(t,e.key,e.data),updateMask:bV(e.fieldMask)};else{if(!(e instanceof tV))return ke(16599,{Rt:e.type});n={verify:Sy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof xh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw ke(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:dV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(t,e.precondition)),n}function gV(t,e){return t&&t.length>0?(vt(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?Ur(s.updateTime):Ur(a);return l.isEqual(Le.min())&&(l=Ur(a)),new Xk(l,s.transformResults||[])})(n,e)))):[]}function yV(t,e){return{documents:[FI(t,e.path)]}}function vV(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=FI(t,s);const a=(function(h){if(h.length!==0)return zI(Sr.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((g=>(function(T){return{field:yl(T.field),direction:TV(T.dir)}})(g)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=Ey(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function _V(t){let e=hV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){vt(i===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=(function(E){const T=BI(E);return T instanceof Sr&&yI(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(E){return E.map((T=>(function(x){return new Rh(vl(x.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,sp(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,w=E.values||[];return new Ih(w,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,w=E.values||[];return new Ih(w,T)})(n.endAt)),Fk(e,s,l,a,c,"F",d,h)}function EV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=vl(n.unaryFilter.field);return mn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=vl(n.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=vl(n.unaryFilter.field);return mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=vl(n.unaryFilter.field);return mn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return mn.create(vl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Sr.create(n.compositeFilter.filters.map((i=>BI(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function TV(t){return lV[t]}function SV(t){return uV[t]}function AV(t){return cV[t]}function yl(t){return{fieldPath:t.canonicalString()}}function vl(t){return zn.fromServerFormat(t.fieldPath)}function zI(t){return t instanceof mn?(function(n){if(n.op==="=="){if(WS(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NAN"}};if(jS(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WS(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NAN"}};if(jS(n.value))return{unaryFilter:{field:yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(n.field),op:SV(n.op),value:n.value}}})(t):t instanceof Sr?(function(n){const i=n.getFilters().map((s=>zI(s)));return i.length===1?i[0]:{compositeFilter:{op:AV(n.op),filters:i}}})(t):ke(54877,{filter:t})}function bV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function HI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,i,s,a=Le.min(),l=Le.min(),c=Hn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.gt=e}}function CV(t){const e=_V({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_y(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.Dn=new RV}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Eo.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class RV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new An(Dt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new An(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GI=41943040;class Ti{static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(GI,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ll(0)}static ur(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="LruGarbageCollector",xV=1048576;function dA([t,e],[n,i]){const s=Je(t,n);return s===0?Je(e,i):s}class NV{constructor(e){this.Tr=e,this.buffer=new An(dA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();dA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(fA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?_e(fA,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.Rr(3e5)}))}}class MV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(rp.ue);const i=new NV(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(cA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,l,c,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),ml()<=tt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function PV(t,e){return new MV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.changes=new Aa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&yc(i.mutation,s,Oi.empty(),Ut.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,nt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=nt()){const s=aa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=rc();return a.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=aa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,nt())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=ys();const l=gc(),c=(function(){return gc()})();return n.forEach(((d,h)=>{const g=i.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Do)?a=a.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),yc(g.mutation,h,g.mutation.getFieldMask(),Ut.now())):l.set(h.key,Oi.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,g)=>l.set(h,g))),n.forEach(((h,g)=>{var E;return c.set(h,new VV(g,(E=l.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=gc();let s=new Jt(((l,c)=>l-c)),a=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let g=i.get(d)||Oi.empty();g=c.applyToLocalView(h,g),i.set(d,g);const E=(s.get(c.batchId)||nt()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,g=d.value,E=CI();g.forEach((T=>{if(!a.has(T)){const w=MI(n.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ue.resolve(aa());let c=Pc,d=a;return l.next((h=>ue.forEach(h,((g,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next((T=>{d=d.insert(g,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,nt()))).next((g=>({batchId:c,changes:wI(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=rc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=rc();return this.indexManager.getCollectionParents(e,a).next((c=>ue.forEach(c,(d=>{const h=(function(E,T){return new jc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((g=>{g.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((d,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,Zn.newInvalidDocument(g)))}));let c=rc();return l.forEach(((d,h)=>{const g=a.get(d);g!==void 0&&yc(g.mutation,h,Oi.empty(),Ut.now()),lp(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ur(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:CV(s.bundledQuery),readTime:Ur(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.overlays=new Jt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=aa();return ue.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=aa(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Jt(((h,g)=>h-g));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let g=a.get(h.largestBatchId);g===null&&(g=aa(),a=a.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=aa(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,g)=>c.set(h,g))),!(c.size()>=s)););return ue.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new iV(n,i));let a=this.kr.get(n);a===void 0&&(a=nt(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.qr=new An(Pn.Qr),this.$r=new An(Pn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Pn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Pn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Dt([])),i=new Pn(n,e),s=new Pn(n,e+1),a=[];return this.$r.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Dt([])),i=new Pn(n,e),s=new Pn(n,e+1);let a=nt();return this.$r.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new Pn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Pn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new An(Pn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new nV(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new Pn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Sv:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Pn(n,0),s=new Pn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new An(Je);return n.forEach((s=>{const a=new Pn(s,0),l=new Pn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),ue.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Pn(new Ne(a),0);let c=new An(Je);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),l),ue.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){vt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ue.forEach(n.mutations,(s=>{const a=new Pn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Pn(n,0),s=this.Yr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.ni=e,this.docs=(function(){return new Jt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(n))}getEntries(e,n){let i=ys();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Zn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=ys();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||yk(gk(g),i)<=0||(s.has(g.key)||lp(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,s){ke(9500)}ri(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new zV(this)}getSize(e){return ue.resolve(this.size)}}class zV extends kV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.persistence=e,this.ii=new Aa((n=>wv(n)),Cv),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.si=0,this.oi=new Pv,this.targetCount=0,this._i=Ll.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(a).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.ai={},this.overlays={},this.ui=new rp(0),this.ci=!1,this.ci=!0,this.li=new FV,this.referenceDelegate=e(this),this.hi=new HV(this),this.indexManager=new IV,this.remoteDocumentCache=(function(s){return new BV(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new wV(n),this.Ti=new OV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new qV(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const s=new GV(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return ue.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class GV extends _k{constructor(e){super(),this.currentSequenceNumber=e}}class kv{constructor(e){this.persistence=e,this.Ai=new Pv,this.Ri=null}static Vi(e){return new kv(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Le.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.gi=new Aa((i=>Sk(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=PV(this,n)}static Vi(e,n){return new Mh(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Le.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nh(e.data.value)),n}Sr(e,n,i){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=nt(),s=nt();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Vv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return AD()?8:Ek(ti())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new KV;return this.ws(e,n,l).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(ml()<=tt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(ml()<=tt.DEBUG&&_e("QueryEngine","Query:",gl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(ml()<=tt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(n))):ue.resolve())}ps(e,n){if(eA(n))return ue.resolve(null);let i=Or(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=_y(n,null,"F"),i=Or(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=nt(...a);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,l,d.readTime)?this.ps(e,_y(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return eA(n)||s.isEqual(Le.min())?ue.resolve(null):this.gs.getDocuments(e,i).next((a=>{const l=this.bs(n,a);return this.Ds(n,l,i,s)?ue.resolve(null):(ml()<=tt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gl(n)),this.vs(e,l,n,mk(s,Pc)).next((c=>c)))}))}bs(e,n){let i=new An(AI(e));return n.forEach(((s,a)=>{lp(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return ml()<=tt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",gl(n)),this.gs.getDocumentsMatchingQuery(e,n,Eo.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LocalStore",JV=3e8;class YV{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(Je),this.Ms=new Aa((a=>wv(a)),Cv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function jV(t,e,n,i){return new YV(t,e,n,i)}async function $I(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let d=nt();for(const h of s){l.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of a){c.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function WV(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,g){const E=h.batch,T=E.keys();let w=ue.resolve();return T.forEach((x=>{w=w.next((()=>g.getEntry(d,x))).next((M=>{const U=h.docVersions.get(x);vt(U!==null,48541),M.version.compareTo(U)<0&&(E.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),g.addEntry(M)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=nt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function JI(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function QV(t,e){const n=Fe(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((g,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,g.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,g.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Hn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,i)),s=s.insert(E,w),(function(M,U,H){return M.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=JV?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,w,g)&&c.push(n.hi.updateTargetData(a,w))}));let d=ys(),h=nt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))})),c.push(XV(a,l,e.documentUpdates).next((g=>{d=g.Ls,h=g.ks}))),!i.isEqual(Le.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(g)}return ue.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function XV(t,e,n){let i=nt(),s=nt();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=ys();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Le.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):_e(Lv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:l,ks:s}}))}function ZV(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function eL(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(i).next((l=>(s=new co(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function by(t,e,n){const i=Fe(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Kl(l))throw l;_e(Lv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function hA(t,e,n){const i=Fe(t);let s=Le.min(),a=nt();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,h,g){const E=Fe(d),T=E.Ms.get(g);return T!==void 0?ue.resolve(E.Fs.get(T)):E.hi.getTargetData(h,g)})(i,l,Or(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:Le.min(),n?a:nt()))).next((c=>(tL(i,Bk(e),c),{documents:c,qs:a})))))}function tL(t,e,n){let i=t.xs.get(e)||Le.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class pA{constructor(){this.activeTargetIds=Jk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nL{constructor(){this.Fo=new pA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new pA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="ConnectivityMonitor";class gA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(mA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(mA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd=null;function wy(){return Dd===null?Dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dd++,"0x"+Dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="RestConnection",rL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===wh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const l=wy(),c=this.Go(e,n.toUriEncodedString());_e(Hg,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),g=Co(h);return this.jo(e,c,d,i,g).then((E=>(_e(Hg,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw _o(Hg,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,l){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=rL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class aL extends sL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const l=wy();return new Promise(((c,d)=>{const h=new jC;h.setWithCredentials(!0),h.listenOnce(WC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case th.NO_ERROR:const E=h.getResponseJson();_e(jn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case th.TIMEOUT:_e(jn,`RPC '${e}' ${l} timed out`),d(new Ee(ae.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const T=h.getStatus();if(_e(jn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w==null?void 0:w.error;if(x&&x.status&&x.message){const M=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(F)>=0?F:ae.UNKNOWN})(x.status);d(new Ee(M,x.message))}else d(new Ee(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ee(ae.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:l,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{_e(jn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);_e(jn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",g,i,15)}))}P_(e,n,i){const s=wy(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZC(),c=XC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const g=a.join("");_e(jn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const E=l.createWebChannel(g,d);this.T_(E);let T=!1,w=!1;const x=new oL({Ho:U=>{w?_e(jn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(T||(_e(jn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),_e(jn,`RPC '${e}' stream ${s} sending:`,U),E.send(U))},Yo:()=>E.close()}),M=(U,H,F)=>{U.listen(H,(q=>{try{F(q)}catch(J){setTimeout((()=>{throw J}),0)}}))};return M(E,ic.EventType.OPEN,(()=>{w||(_e(jn,`RPC '${e}' stream ${s} transport opened.`),x.s_())})),M(E,ic.EventType.CLOSE,(()=>{w||(w=!0,_e(jn,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(E))})),M(E,ic.EventType.ERROR,(U=>{w||(w=!0,_o(jn,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),x.__(new Ee(ae.UNAVAILABLE,"The operation could not be completed")))})),M(E,ic.EventType.MESSAGE,(U=>{var H;if(!w){const F=U.data[0];vt(!!F,16349);const q=F,J=(q==null?void 0:q.error)||((H=q[0])===null||H===void 0?void 0:H.error);if(J){_e(jn,`RPC '${e}' stream ${s} received error:`,J);const te=J.status;let G=(function(N){const V=pn[N];if(V!==void 0)return kI(V)})(te),I=J.message;G===void 0&&(G=ae.INTERNAL,I="Unknown error status: "+te+" with message "+J.message),w=!0,x.__(new Ee(G,I)),E.close()}else _e(jn,`RPC '${e}' stream ${s} received:`,F),x.a_(F)}})),M(c,QC.STAT_EVENT,(U=>{U.stat===dy.PROXY?_e(jn,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===dy.NOPROXY&&_e(jn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.o_()}),0),x}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return new fV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="PersistentStream";class jI{constructor(e,n,i,s,a,l,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new YI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(gs(n.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Ee(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(yA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(yA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lL extends jI{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=pV(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Le.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?Ur(l.readTime):Le.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Ay(this.serializer),n.addTarget=(function(a,l){let c;const d=l.target;if(c=yy(d)?{documents:yV(a,d)}:{query:vV(a,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=OI(a,l.resumeToken);const h=Ey(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Le.min())>0){c.readTime=Dh(a,l.snapshotVersion.toTimestamp());const h=Ey(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=EV(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Ay(this.serializer),n.removeTarget=e,this.k_(n)}}class uL extends jI{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=gV(e.writeResults,e.commitTime),i=Ur(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Ay(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>mV(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{}class fL extends cL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Ty(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ae.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,Ty(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(ae.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class dL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(gs(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class hL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{ba(this)&&(_e(_a,"Restarting streams for network reachability change."),await(async function(d){const h=Fe(d);h.Ia.add(4),await Xc(h),h.Aa.set("Unknown"),h.Ia.delete(4),await hp(h)})(this))}))})),this.Aa=new dL(i,s)}}async function hp(t){if(ba(t))for(const e of t.da)await e(!0)}async function Xc(t){for(const e of t.da)await e(!1)}function WI(t,e){const n=Fe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),qv(n)?Fv(n):$l(n).x_()&&Uv(n,e))}function Ov(t,e){const n=Fe(t),i=$l(n);n.Ta.delete(e),i.x_()&&QI(n,e),n.Ta.size===0&&(i.x_()?i.B_():ba(n)&&n.Aa.set("Unknown"))}function Uv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$l(t).H_(e)}function QI(t,e){t.Ra.$e(e),$l(t).Y_(e)}function Fv(t){t.Ra=new aV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),$l(t).start(),t.Aa.aa()}function qv(t){return ba(t)&&!$l(t).M_()&&t.Ta.size>0}function ba(t){return Fe(t).Ia.size===0}function XI(t){t.Ra=void 0}async function pL(t){t.Aa.set("Online")}async function mL(t){t.Ta.forEach(((e,n)=>{Uv(t,e)}))}async function gL(t,e){XI(t),qv(t)?(t.Aa.la(e),Fv(t)):t.Aa.set("Unknown")}async function yL(t,e,n){if(t.Aa.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){_e(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ph(t,i)}else if(e instanceof sh?t.Ra.Ye(e):e instanceof VI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Le.min()))try{const i=await JI(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Ra.Pt(l);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ta.get(h);g&&a.Ta.set(h,g.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,h)=>{const g=a.Ta.get(d);if(!g)return;a.Ta.set(d,g.withResumeToken(Hn.EMPTY_BYTE_STRING,g.snapshotVersion)),QI(a,d);const E=new co(g.target,d,h,g.sequenceNumber);Uv(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(_a,"Failed to raise snapshot:",i),await Ph(t,i)}}async function Ph(t,e,n){if(!Kl(e))throw e;t.Ia.add(1),await Xc(t),t.Aa.set("Offline"),n||(n=()=>JI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(_a,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await hp(t)}))}function ZI(t,e){return e().catch((n=>Ph(t,n,e)))}async function pp(t){const e=Fe(t),n=bo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Sv;for(;vL(e);)try{const s=await ZV(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,_L(e,s)}catch(s){await Ph(e,s)}eR(e)&&tR(e)}function vL(t){return ba(t)&&t.Pa.length<10}function _L(t,e){t.Pa.push(e);const n=bo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function eR(t){return ba(t)&&!bo(t).M_()&&t.Pa.length>0}function tR(t){bo(t).start()}async function EL(t){bo(t).na()}async function TL(t){const e=bo(t);for(const n of t.Pa)e.X_(n.mutations)}async function SL(t,e,n){const i=t.Pa.shift(),s=Nv.from(i,e,n);await ZI(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await pp(t)}async function AL(t,e){e&&bo(t).Z_&&await(async function(i,s){if((function(l){return sV(l)&&l!==ae.ABORTED})(s.code)){const a=i.Pa.shift();bo(i).N_(),await ZI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await pp(i)}})(t,e),eR(t)&&tR(t)}async function vA(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),_e(_a,"RemoteStore received new credentials");const i=ba(n);n.Ia.add(3),await Xc(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await hp(n)}async function bL(t,e){const n=Fe(t);e?(n.Ia.delete(2),await hp(n)):e||(n.Ia.add(2),await Xc(n),n.Aa.set("Unknown"))}function $l(t){return t.Va||(t.Va=(function(n,i,s){const a=Fe(n);return a.ia(),new lL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:pL.bind(null,t),e_:mL.bind(null,t),n_:gL.bind(null,t),J_:yL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),qv(t)?Fv(t):t.Aa.set("Unknown")):(await t.Va.stop(),XI(t))}))),t.Va}function bo(t){return t.ma||(t.ma=(function(n,i,s){const a=Fe(n);return a.ia(),new uL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:EL.bind(null,t),n_:AL.bind(null,t),ea:TL.bind(null,t),ta:SL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await pp(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(_a,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Bv(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zv(t,e){if(gs("AsyncQueue",`${e}: ${t}`),Kl(t))return new Ee(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=rc(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.fa=new Jt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ke(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ol{constructor(e,n,i,s,a,l,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Ol(e,n,wl.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class CL{constructor(){this.queries=EA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=Fe(n),a=s.queries;s.queries=EA(),a.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Ee(ae.ABORTED,"Firestore shutting down"))}}function EA(){return new Aa((t=>SI(t)),ap)}async function IL(t,e){const n=Fe(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new wL,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=zv(l,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Hv(n)}async function RL(t,e){const n=Fe(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xL(t,e){const n=Fe(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.wa)c.Ca(s)&&(i=!0);l.ya=s}}i&&Hv(n)}function NL(t,e,n){const i=Fe(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function Hv(t){t.Da.forEach((e=>{e.next()}))}var Cy,TA;(TA=Cy||(Cy={})).Fa="default",TA.Cache="cache";class DL{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ol(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Cy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.key=e}}class iR{constructor(e){this.key=e}}class ML{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=AI(e),this.eu=new wl(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new _A,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,E)=>{const T=s.get(g),w=lp(this.query,E)?E:null,x=!!T&&this.mutatedKeys.has(T.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;T&&w?T.data.isEqual(w.data)?x!==M&&(i.track({type:3,doc:w}),U=!0):this.iu(T,w)||(i.track({type:2,doc:w}),U=!0,(d&&this.Xa(w,d)>0||h&&this.Xa(w,h)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),U=!0):T&&!w&&(i.track({type:1,doc:T}),U=!0,(d||h)&&(c=!0)),U&&(w?(l=l.add(w),a=M?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{eu:l,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((g,E)=>(function(w,x){const M=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:U})}};return M(w)-M(x)})(g.type,E.type)||this.Xa(g.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,l.length!==0||h?{snapshot:new Ol(this.query,e.eu,a,l,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new _A,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=nt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new iR(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new nR(i))})),n}uu(e){this.Ha=e.qs,this.Za=nt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ol.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gv="SyncEngine";class PL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class kL{constructor(e){this.key=e,this.lu=!1}}class VL{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Aa((c=>SI(c)),ap),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ne.comparator),this.Eu=new Map,this.Au=new Pv,this.Ru={},this.Vu=new Map,this.mu=Ll.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function LL(t,e,n=!0){const i=uR(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await rR(i,e,n,!0),s}async function OL(t,e){const n=uR(t);await rR(n,e,!0,!1)}async function rR(t,e,n,i){const s=await eL(t.localStore,Or(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await UL(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&WI(t.remoteStore,s),c}async function UL(t,e,n,i,s){t.gu=(E,T,w)=>(async function(M,U,H,F){let q=U.view.nu(H);q.Ds&&(q=await hA(M.localStore,U.query,!1).then((({documents:I})=>U.view.nu(I,q))));const J=F&&F.targetChanges.get(U.targetId),te=F&&F.targetMismatches.get(U.targetId)!=null,G=U.view.applyChanges(q,M.isPrimaryClient,J,te);return AA(M,U.targetId,G._u),G.snapshot})(t,E,T,w);const a=await hA(t.localStore,e,!0),l=new ML(e,a.qs),c=l.nu(a.documents),d=Qc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,d);AA(t,n,h._u);const g=new PL(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function FL(t,e,n){const i=Fe(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((l=>!ap(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await by(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ov(i.remoteStore,s.targetId),Iy(i,s.targetId)})).catch(Gl)):(Iy(i,s.targetId),await by(i.localStore,s.targetId,!0))}async function qL(t,e){const n=Fe(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ov(n.remoteStore,i.targetId))}async function BL(t,e,n){const i=YL(t);try{const s=await(function(l,c){const d=Fe(l),h=Ut.now(),g=c.reduce(((w,x)=>w.add(x.key)),nt());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let x=ys(),M=nt();return d.Os.getEntries(w,g).next((U=>{x=U,x.forEach(((H,F)=>{F.isValidDocument()||(M=M.add(H))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,x))).next((U=>{E=U;const H=[];for(const F of c){const q=eV(F,E.get(F.key).overlayedDocument);q!=null&&H.push(new Do(F.key,q,pI(q.value.mapValue),Tr.exists(!0)))}return d.mutationQueue.addMutationBatch(w,h,H,c)})).next((U=>{T=U;const H=U.applyToLocalDocumentSet(E,M);return d.documentOverlayCache.saveOverlays(w,U.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:wI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let h=l.Ru[l.currentUser.toKey()];h||(h=new Jt(Je)),h=h.insert(c,d),l.Ru[l.currentUser.toKey()]=h})(i,s.batchId,n),await Zc(i,s.changes),await pp(i.remoteStore)}catch(s){const a=zv(s,"Failed to persist write");n.reject(a)}}async function sR(t,e){const n=Fe(t);try{const i=await QV(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Eu.get(a);l&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?vt(l.lu,14607):s.removedDocuments.size>0&&(vt(l.lu,42227),l.lu=!1))})),await Zc(n,i,e)}catch(i){await Gl(i)}}function SA(t,e,n){const i=Fe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=Fe(l);d.onlineState=c;let h=!1;d.queries.forEach(((g,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&Hv(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zL(t,e,n){const i=Fe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let l=new Jt(Ne.comparator);l=l.insert(a,Zn.newNoDocument(a,Le.min()));const c=nt().add(a),d=new fp(Le.min(),new Map,new Jt(Je),l,c);await sR(i,d),i.du=i.du.remove(a),i.Eu.delete(e),Kv(i)}else await by(i.localStore,e,!1).then((()=>Iy(i,e,n))).catch(Gl)}async function HL(t,e){const n=Fe(t),i=e.batch.batchId;try{const s=await WV(n.localStore,e);aR(n,i,null),oR(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zc(n,s)}catch(s){await Gl(s)}}async function GL(t,e,n){const i=Fe(t);try{const s=await(function(l,c){const d=Fe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let g;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(vt(E!==null,37113),g=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g))).next((()=>d.localDocuments.getDocuments(h,g)))}))})(i.localStore,e);aR(i,e,n),oR(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zc(i,s)}catch(s){await Gl(s)}}function oR(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function aR(t,e,n){const i=Fe(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Iy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||lR(t,i)}))}function lR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ov(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Kv(t))}function AA(t,e,n){for(const i of n)i instanceof nR?(t.Au.addReference(i.key,e),KL(t,i)):i instanceof iR?(_e(Gv,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||lR(t,i.key)):ke(19791,{yu:i})}function KL(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(Gv,"New document in limbo: "+n),t.Iu.add(i),Kv(t))}function Kv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Dt.fromString(e)),i=t.mu.next();t.Eu.set(i,new kL(n)),t.du=t.du.insert(n,i),WI(t.remoteStore,new co(Or(Iv(n.path)),i,"TargetPurposeLimboResolution",rp.ue))}}async function Zc(t,e,n){const i=Fe(t),s=[],a=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((h=>{var g;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Vv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(l),i.hu.J_(s),await(async function(d,h){const g=Fe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(T=>ue.forEach(T.Is,(w=>g.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>ue.forEach(T.ds,(w=>g.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!Kl(E))throw E;_e(Lv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const w=g.Fs.get(T),x=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(x);g.Fs=g.Fs.insert(T,M)}}})(i.localStore,a))}async function $L(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){_e(Gv,"User change. New user:",e.toKey());const i=await $I(n.localStore,e);n.currentUser=e,(function(a,l){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Ee(ae.CANCELLED,l))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zc(n,i.Bs)}}function JL(t,e){const n=Fe(t),i=n.Eu.get(e);if(i&&i.lu)return nt().add(i.key);{let s=nt();const a=n.Tu.get(e);if(!a)return s;for(const l of a){const c=n.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function uR(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zL.bind(null,e),e.hu.J_=xL.bind(null,e.eventManager),e.hu.pu=NL.bind(null,e.eventManager),e}function YL(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GL.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return jV(this.persistence,new $V,e.initialUser,this.serializer)}Du(e){return new KI(kv.Vi,this.serializer)}bu(e){return new nL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class jL extends kh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){vt(this.persistence.referenceDelegate instanceof Mh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new DV(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new KI((i=>Mh.Vi(i,n)),this.serializer)}}class Ry{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$L.bind(null,this.syncEngine),await bL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new CL})()}createDatastore(e){const n=dp(e.databaseInfo.databaseId),i=(function(a){return new aL(a)})(e.databaseInfo);return(function(a,l,c,d){return new fL(a,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new hL(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>SA(this.syncEngine,n,0)),(function(){return gA.C()?new gA:new iL})())}createSyncEngine(e,n){return(function(s,a,l,c,d,h,g){const E=new VL(s,a,l,c,d,h);return g&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Fe(s);_e(_a,"RemoteStore shutting down."),a.Ia.add(5),await Xc(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ry.provider={build:()=>new Ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="FirestoreClient";class QL{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=Tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{_e(wo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_e(wo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=zv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Kg(t,e){t.asyncQueue.verifyOperationInProgress(),_e(wo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await $I(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{_o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{_o("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function bA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XL(t);_e(wo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>vA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>vA(e.remoteStore,s))),t._onlineComponents=e}async function XL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(wo,"Using user provided OfflineComponentProvider");try{await Kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Kg(t,new kh)}}else _e(wo,"Using default OfflineComponentProvider"),await Kg(t,new jL(void 0));return t._offlineComponents}async function cR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(wo,"Using user provided OnlineComponentProvider"),await bA(t,t._uninitializedComponentsProvider._online)):(_e(wo,"Using default OnlineComponentProvider"),await bA(t,new Ry))),t._onlineComponents}function ZL(t){return cR(t).then((e=>e.syncEngine))}async function wA(t){const e=await cR(t),n=e.eventManager;return n.onListen=LL.bind(null,e.syncEngine),n.onUnlisten=FL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firestore.googleapis.com",IA=!0;class RA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dR,this.ssl=IA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:IA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xV)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fR((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new sk;switch(i.type){case"firstParty":return new uk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=CA.get(n);i&&(_e("ComponentProvider","Removing Datastore"),CA.delete(n),i.terminate())})(this),Promise.resolve()}}function eO(t,e,n,i={}){var s;t=go(t,mp);const a=Co(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(rv(`https://${d}`),sv("Firestore",!0)),l.host!==dR&&l.host!==d&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!pa(h,c)&&(t._setSettings(h),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=Xn.MOCK_USER;else{g=uC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ee(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xn(T)}t._authCredentials=new ok(new tI(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class yn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Yc(n,yn._jsonSchema))return new yn(e,i||null,new Ne(Dt.fromString(n.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:gn("string",yn._jsonSchemaVersion),referencePath:gn("string")};class yo extends Jl{constructor(e,n,i){super(e,n,Iv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ne(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function gp(t,e,...n){if(t=$t(t),iI("collection","path",e),t instanceof mp){const i=Dt.fromString(e,...n);return qS(i),new yo(t,null,i)}{if(!(t instanceof yn||t instanceof yo))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Dt.fromString(e,...n));return qS(i),new yo(t.firestore,null,i)}}function yp(t,e,...n){if(t=$t(t),arguments.length===1&&(e=Tv.newId()),iI("doc","path",e),t instanceof mp){const i=Dt.fromString(e,...n);return FS(i),new yn(t,null,new Ne(i))}{if(!(t instanceof yn||t instanceof yo))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Dt.fromString(e,...n));return FS(i),new yn(t.firestore,t instanceof yo?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="AsyncQueue";class NA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new YI(this,"async_queue_retry"),this.oc=()=>{const i=Gg();i&&_e(xA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Gg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Gg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new la;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kl(e))throw e;_e(xA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,gs("INTERNAL UNHANDLED ERROR: ",DA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Bv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:DA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function DA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ul extends mp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new NA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NA(e),this._firestoreClient=void 0,await e}}}function tO(t,e){const n=typeof t=="object"?t:lv(),i=typeof t=="string"?t:wh,s=Zh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=oC("firestore");a&&eO(s,...a)}return s}function hR(t){if(t._terminated)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nO(t),t._firestoreClient}function nO(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,g){return new wk(c,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,fR(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QL(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(Hn.fromBase64String(e))}catch(n){throw new Ee(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rr(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:gn("string",rr._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fr._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,Fr._jsonSchema))return new Fr(e.latitude,e.longitude)}}Fr._jsonSchemaVersion="firestore/geoPoint/1.0",Fr._jsonSchema={type:gn("string",Fr._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qr(e.vectorValues);throw new Ee(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:gn("string",qr._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=/^__.*__$/;class rO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}class pR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Do(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:t})}}class Jv{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(mR(this.Ec)&&iO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class sO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dp(e)}Dc(e,n,i,s=!1){return new Jv({Ec:e,methodName:n,bc:i,path:zn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yv(t){const e=t._freezeSettings(),n=dp(t._databaseId);return new sO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oO(t,e,n,i,s,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);jv("Data must be an object, but it was:",l,i);const c=gR(i,l);let d,h;if(a.merge)d=new Oi(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const E of a.mergeFields){const T=xy(e,E,n);if(!l.contains(T))throw new Ee(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);vR(g,T)||g.push(T)}d=new Oi(g),h=l.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=l.fieldTransforms;return new rO(new Ai(c),d,h)}class _p extends $v{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _p}}function aO(t,e,n,i){const s=t.Dc(1,e,n);jv("Data must be an object, but it was:",s,i);const a=[],l=Ai.empty();No(i,((d,h)=>{const g=Wv(e,d,n);h=$t(h);const E=s.gc(g);if(h instanceof _p)a.push(g);else{const T=ef(h,E);T!=null&&(a.push(g),l.set(g,T))}}));const c=new Oi(a);return new pR(l,c,s.fieldTransforms)}function lO(t,e,n,i,s,a){const l=t.Dc(1,e,n),c=[xy(e,i,n)],d=[s];if(a.length%2!=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)c.push(xy(e,a[T])),d.push(a[T+1]);const h=[],g=Ai.empty();for(let T=c.length-1;T>=0;--T)if(!vR(h,c[T])){const w=c[T];let x=d[T];x=$t(x);const M=l.gc(w);if(x instanceof _p)h.push(w);else{const U=ef(x,M);U!=null&&(h.push(w),g.set(w,U))}}const E=new Oi(h);return new pR(g,E,l.fieldTransforms)}function uO(t,e,n,i=!1){return ef(n,t.Dc(i?4:3,e))}function ef(t,e){if(yR(t=$t(t)))return jv("Unsupported field value:",e,t),gR(t,e);if(t instanceof $v)return(function(i,s){if(!mR(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let d=ef(c,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=$t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Yk(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ut.fromDate(i);return{timestampValue:Dh(s.serializer,a)}}if(i instanceof Ut){const a=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dh(s.serializer,a)}}if(i instanceof Fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof rr)return{bytesValue:OI(s.serializer,i._byteString)};if(i instanceof yn){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Mv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof qr)return(function(l,c){return{mapValue:{fields:{[dI]:{stringValue:hI},[Ch]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Rv(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${ip(i)}`)})(t,e)}function gR(t,e){const n={};return oI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(t,((i,s)=>{const a=ef(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function yR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof Fr||t instanceof rr||t instanceof yn||t instanceof $v||t instanceof qr)}function jv(t,e,n){if(!yR(n)||!rI(n)){const i=ip(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function xy(t,e,n){if((e=$t(e))instanceof vp)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const cO=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(cO)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vp(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(ae.INVALID_ARGUMENT,c+t+d)}function vR(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ER("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends _R{data(){return super.data()}}function ER(t,e){return typeof e=="string"?Wv(t,e):e instanceof vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qv{}class hO extends Qv{}function TR(t,e,...n){let i=[];e instanceof Qv&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((d=>d instanceof Zv)).length,c=a.filter((d=>d instanceof Xv)).length;if(l>1||l>0&&c>0)throw new Ee(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class Xv extends hO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Xv(e,n,i)}_apply(e){const n=this._parse(e);return SR(e._query,n),new Jl(e.firestore,e.converter,vy(e._query,n))}_parse(e){const n=Yv(e.firestore);return(function(a,l,c,d,h,g,E){let T;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){kA(E,g);const x=[];for(const M of E)x.push(PA(d,a,M));T={arrayValue:{values:x}}}else T=PA(d,a,E)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||kA(E,g),T=uO(c,l,E,g==="in"||g==="not-in");return mn.create(h,g,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zv extends Qv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zv(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const d of c)SR(l,d),l=vy(l,d)})(e._query,n),new Jl(e.firestore,e.converter,vy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function PA(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TI(e)&&n.indexOf("/")!==-1)throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Dt.fromString(n));if(!Ne.isDocumentKey(i))throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return YS(t,new Ne(i))}if(n instanceof yn)return YS(t,n._key);throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(n)}.`)}function kA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SR(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pO{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return No(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Ch].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((l=>on(l.doubleValue)));return new qr(a)}convertGeoPoint(e){return new Fr(on(e.latitude),on(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=op(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const n=To(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Dt.fromString(e);vt(HI(i),9688,{name:e});const s=new Vc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||gs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class oc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends _R{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ER("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ua._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:gn("string",ua._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class oh extends ua{data(e={}){return super.data(e)}}class Cl{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new oc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new oh(this._firestore,this._userDataWriter,i.key,i,new oc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new oh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new oh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:gO(c.type),doc:d,oldIndex:h,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}Cl._jsonSchemaVersion="firestore/querySnapshot/1.0",Cl._jsonSchema={type:gn("string",Cl._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class AR extends pO{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function yO(t,e,n,...i){t=go(t,yn);const s=go(t.firestore,Ul),a=Yv(s);let l;return l=typeof(e=$t(e))=="string"||e instanceof vp?lO(a,"updateDoc",t._key,e,n,i):aO(a,"updateDoc",t._key,e),e0(s,[l.toMutation(t._key,Tr.exists(!0))])}function bR(t){return e0(go(t.firestore,Ul),[new xv(t._key,Tr.none())])}function wR(t,e){const n=go(t.firestore,Ul),i=yp(t),s=mO(t.converter,e);return e0(n,[oO(Yv(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Tr.exists(!1))]).then((()=>i))}function CR(t,...e){var n,i,s;t=$t(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||MA(e[l])||(a=e[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(MA(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,h,g;if(t instanceof yn)h=go(t.firestore,Ul),g=Iv(t._key.path),d={next:E=>{e[l]&&e[l](vO(h,t,E))},error:e[l+1],complete:e[l+2]};else{const E=go(t,Jl);h=go(E.firestore,Ul),g=E._query;const T=new AR(h);d={next:w=>{e[l]&&e[l](new Cl(h,T,E,w))},error:e[l+1],complete:e[l+2]},dO(t._query)}return(function(T,w,x,M){const U=new WL(M),H=new DL(w,U,x);return T.asyncQueue.enqueueAndForget((async()=>IL(await wA(T),H))),()=>{U.Ou(),T.asyncQueue.enqueueAndForget((async()=>RL(await wA(T),H)))}})(hR(h),g,c,d)}function e0(t,e){return(function(i,s){const a=new la;return i.asyncQueue.enqueueAndForget((async()=>BL(await ZL(i),s,a))),a.promise})(hR(t),e)}function vO(t,e,n){const i=n.docs.get(e._key),s=new AR(t);return new ua(t,s,e._key,i,new oc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Hl=s})(Sa),ma(new vo("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Ul(new ak(i.getProvider("auth-internal")),new ck(l,i.getProvider("app-check-internal")),(function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(h.options.projectId,g)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Vr(kS,VS,e),Vr(kS,VS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="firebasestorage.googleapis.com",RR="storageBucket",_O=120*1e3,EO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends zr{constructor(e,n,i=0){super($g(e),`Firebase Storage: ${n} (${$g(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function $g(t){return"storage/"+t}function t0(){const t="An unknown error occurred, please check the error payload for server response.";return new Zt(Xt.UNKNOWN,t)}function TO(t){return new Zt(Xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function SO(t){return new Zt(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zt(Xt.UNAUTHENTICATED,t)}function bO(){return new Zt(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wO(t){return new Zt(Xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CO(){return new Zt(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IO(){return new Zt(Xt.CANCELED,"User canceled the upload/download.")}function RO(t){return new Zt(Xt.INVALID_URL,"Invalid URL '"+t+"'.")}function xO(t){return new Zt(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NO(){return new Zt(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RR+"' property when initializing the app?")}function DO(){return new Zt(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MO(){return new Zt(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PO(t){return new Zt(Xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ny(t){return new Zt(Xt.INVALID_ARGUMENT,t)}function xR(){return new Zt(Xt.APP_DELETED,"The Firebase app was deleted.")}function kO(t){return new Zt(Xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vc(t,e){return new Zt(Xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yu(t){throw new Zt(Xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ui.makeFromUrl(e,n)}catch{return new Ui(e,"")}if(i.path==="")return i;throw xO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h(J){J.path_=decodeURIComponent(J.path)}const g="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${g}/b/${s}/o${T}`,"i"),x={bucket:1,path:3},M=n===IR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",H=new RegExp(`^https?://${M}/${s}/${U}`,"i"),q=[{regex:c,indices:d,postModify:a},{regex:w,indices:x,postModify:h},{regex:H,indices:{bucket:1,path:2},postModify:h}];for(let J=0;J<q.length;J++){const te=q[J],G=te.regex.exec(e);if(G){const I=G[te.indices.bucket];let R=G[te.indices.path];R||(R=""),i=new Ui(I,R),te.postModify(i);break}}if(i==null)throw RO(e);return i}}class VO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e,n){let i=1,s=null,a=null,l=!1,c=0;function d(){return c===2}let h=!1;function g(...U){h||(h=!0,e.apply(null,U))}function E(U){s=setTimeout(()=>{s=null,t(w,d())},U)}function T(){a&&clearTimeout(a)}function w(U,...H){if(h){T();return}if(U){T(),g.call(null,U,...H);return}if(d()||l){T(),g.call(null,U,...H);return}i<64&&(i*=2);let q;c===1?(c=2,q=0):q=(i+Math.random())*1e3,E(q)}let x=!1;function M(U){x||(x=!0,T(),!h&&(s!==null?(U||(c=2),clearTimeout(s),E(0)):U||(c=1)))}return E(0),a=setTimeout(()=>{l=!0,M(!0)},n),M}function OO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){return t!==void 0}function FO(t){return typeof t=="object"&&!Array.isArray(t)}function n0(t){return typeof t=="string"||t instanceof String}function VA(t){return i0()&&t instanceof Blob}function i0(){return typeof Blob<"u"}function LA(t,e,n,i){if(i<e)throw Ny(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ny(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function NR(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var ca;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ca||(ca={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,i,s,a,l,c,d,h,g,E,T=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,M)=>{this.resolve_=x,this.reject_=M,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Md(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===ca.NO_ERROR,d=a.getStatus();if(!c||qO(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===ca.ABORT;i(!1,new Md(!1,null,g));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Md(h,a))})},n=(i,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());UO(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=t0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?xR():IO();l(d)}else{const d=CO();l(d)}};this.canceled_?n(!1,new Md(!1,null,!0)):this.backoffId_=LO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Md{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function zO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function KO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $O(t,e,n,i,s,a,l=!0,c=!1){const d=NR(t.urlParams),h=t.url+d,g=Object.assign({},t.headers);return GO(g,e),zO(g,n),HO(g,a),KO(g,i),new BO(h,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YO(...t){const e=JO();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(i0())return new Blob(t);throw new Zt(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){if(typeof atob>"u")throw PO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jg{constructor(e,n){this.data=e,this.contentType=n||null}}function DR(t,e){switch(t){case vr.RAW:return new Jg(MR(e));case vr.BASE64:case vr.BASE64URL:return new Jg(PR(t,e));case vr.DATA_URL:return new Jg(XO(e),ZO(e))}throw t0()}function MR(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,l=t.charCodeAt(++n);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function QO(t){let e;try{e=decodeURIComponent(t)}catch{throw vc(vr.DATA_URL,"Malformed data URL.")}return MR(e)}function PR(t,e){switch(t){case vr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw vc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw vc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=WO(e)}catch(s){throw s.message.includes("polyfill")?s:vc(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class kR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vc(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=eU(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function XO(t){const e=new kR(t);return e.base64?PR(vr.BASE64,e.rest):QO(e.rest)}function ZO(t){return new kR(t).contentType}function eU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){let i=0,s="";VA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(VA(this.data_)){const i=this.data_,s=jO(i,e,n);return s===null?null:new oo(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new oo(i,!0)}}static getBlob(...e){if(i0()){const n=e.map(i=>i instanceof oo?i.data_:i);return new oo(YO.apply(null,n))}else{const n=e.map(l=>n0(l)?DR(vr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new oo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){let e;try{e=JSON.parse(t)}catch{return null}return FO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nU(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function LR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e){return e}class ci{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||iU}}let Pd=null;function rU(t){return!n0(t)||t.length<2?t:LR(t)}function OR(){if(Pd)return Pd;const t=[];t.push(new ci("bucket")),t.push(new ci("generation")),t.push(new ci("metageneration")),t.push(new ci("name","fullPath",!0));function e(a,l){return rU(l)}const n=new ci("name");n.xform=e,t.push(n);function i(a,l){return l!==void 0?Number(l):l}const s=new ci("size");return s.xform=i,t.push(s),t.push(new ci("timeCreated")),t.push(new ci("updated")),t.push(new ci("md5Hash",null,!0)),t.push(new ci("cacheControl",null,!0)),t.push(new ci("contentDisposition",null,!0)),t.push(new ci("contentEncoding",null,!0)),t.push(new ci("contentLanguage",null,!0)),t.push(new ci("contentType",null,!0)),t.push(new ci("metadata","customMetadata",!0)),Pd=t,Pd}function sU(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new Ui(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function oU(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];i[l.local]=l.xform(i,e[l.server])}return sU(i,t),i}function UR(t,e,n){const i=VR(e);return i===null?null:oU(t,i,n)}function aU(t,e,n,i){const s=VR(e);if(s===null||!n0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(h=>{const g=t.bucket,E=t.fullPath,T="/b/"+l(g)+"/o/"+l(E),w=r0(T,n,i),x=NR({alt:"media",token:h});return w+x})[0]}function lU(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class FR{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){if(!t)throw t0()}function uU(t,e){function n(i,s){const a=UR(t,s,e);return qR(a!==null),a}return n}function cU(t,e){function n(i,s){const a=UR(t,s,e);return qR(a!==null),aU(a,s,t.host,t._protocol)}return n}function BR(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=bO():s=AO():n.getStatus()===402?s=SO(t.bucket):n.getStatus()===403?s=wO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function fU(t){const e=BR(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=TO(t.path)),a.serverResponse=s.serverResponse,a}return n}function dU(t,e,n){const i=e.fullServerUrl(),s=r0(i,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new FR(s,a,cU(t,n),l);return c.errorHandler=fU(e),c}function hU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pU(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=hU(null,e)),i}function mU(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let J=0;J<2;J++)q=q+Math.random().toString().slice(2);return q}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=pU(e,i,s),g=lU(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",w=oo.getBlob(E,i,T);if(w===null)throw DO();const x={name:h.fullPath},M=r0(a,t.host,t._protocol),U="POST",H=t.maxUploadRetryTime,F=new FR(M,U,uU(t,n),H);return F.urlParams=x,F.headers=l,F.body=w.uploadData(),F.errorHandler=BR(e),F}class gU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ca.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ca.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ca.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Yu("cannot .send() more than once");if(Co(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yU extends gU{initXhr(){this.xhr_.responseType="text"}}function zR(){return new yU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this._service=e,n instanceof Ui?this._location=n:this._location=Ui.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ea(e,n)}get root(){const e=new Ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LR(this._location.path)}get storage(){return this._service}get parent(){const e=tU(this._location.path);if(e===null)return null;const n=new Ui(this._location.bucket,e);return new Ea(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kO(e)}}function vU(t,e,n){t._throwIfRoot("uploadBytes");const i=mU(t.storage,t._location,OR(),new oo(e,!0),n);return t.storage.makeRequestWithTokens(i,zR).then(s=>({metadata:s,ref:t}))}function _U(t,e,n=vr.RAW,i){t._throwIfRoot("uploadString");const s=DR(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),vU(t,s.data,a)}function EU(t){t._throwIfRoot("getDownloadURL");const e=dU(t.storage,t._location,OR());return t.storage.makeRequestWithTokens(e,zR).then(n=>{if(n===null)throw MO();return n})}function TU(t,e){const n=nU(t._location.path,e),i=new Ui(t._location.bucket,n);return new Ea(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t){return/^[A-Za-z]+:\/\//.test(t)}function AU(t,e){return new Ea(t,e)}function HR(t,e){if(t instanceof s0){const n=t;if(n._bucket==null)throw NO();const i=new Ea(n,n._bucket);return e!=null?HR(i,e):i}else return e!==void 0?TU(t,e):t}function bU(t,e){if(e&&SU(e)){if(t instanceof s0)return AU(t,e);throw Ny("To use ref(service, url), the first argument must be a Storage instance.")}else return HR(t,e)}function OA(t,e){const n=e==null?void 0:e[RR];return n==null?null:Ui.makeFromBucketSpec(n,t)}function wU(t,e,n,i={}){t.host=`${e}:${n}`;const s=Co(e);s&&(rv(`https://${t.host}/b`),sv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:uC(a,t.app.options.projectId))}class s0{constructor(e,n,i,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=IR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_O,this._maxUploadRetryTime=EO,this._requests=new Set,s!=null?this._bucket=Ui.makeFromBucketSpec(s,this._host):this._bucket=OA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ui.makeFromBucketSpec(this._url,e):this._bucket=OA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ea(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new VO(xR());{const l=$O(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const UA="@firebase/storage",FA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="storage";function CU(t,e,n,i){return t=$t(t),_U(t,e,n,i)}function IU(t){return t=$t(t),EU(t)}function RU(t,e){return t=$t(t),bU(t,e)}function xU(t=lv(),e){t=$t(t);const i=Zh(t,GR).getImmediate({identifier:e}),s=oC("storage");return s&&NU(i,...s),i}function NU(t,e,n,i={}){wU(t,e,n,i)}function DU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new s0(n,i,s,e,Sa)}function MU(){ma(new vo(GR,DU,"PUBLIC").setMultipleInstances(!0)),Vr(UA,FA,""),Vr(UA,FA,"esm2017")}MU();const PU={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},o0=dC(PU),ac=tk(o0),kU=new cs,wa=tO(o0),VU=xU(o0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LU,OU;function UU(){return{geminiUrl:LU,vertexUrl:OU}}function FU(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=UU();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _s{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const g=d[h];y(g,e.slice(a+1),n[h])}else for(const h of d)y(h,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function qU(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Dy(t,s,a,0,l)}}function Dy(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Dy(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,g]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);y(l,E,g)}for(const h of c)delete l[h]}}else{const l=t;a in l&&Dy(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BU(t){const e={},n=p(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function zU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],GU(l)),e}function HU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],KU(l)),e}function GU(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>$U(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function KU(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>JU(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function $U(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],ZU(n)),e}function JU(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],e4(n)),e}function YU(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function jU(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function WU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],QU(l)),e}function QU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function KR(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],XU(l)),e}function XU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function ZU(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],a0(i));const s=p(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function e4(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],a0(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qA||(qA={}));var BA;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(BA||(BA={}));var zA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(zA||(zA={}));var Ue;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ue||(Ue={}));var HA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(HA||(HA={}));var GA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(GA||(GA={}));var KA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(KA||(KA={}));var $A;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($A||($A={}));var JA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(JA||(JA={}));var YA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(YA||(YA={}));var jA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(jA||(jA={}));var WA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(WA||(WA={}));var QA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(QA||(QA={}));var XA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(XA||(XA={}));var ZA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ZA||(ZA={}));var eb;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eb||(eb={}));var tb;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(tb||(tb={}));var nb;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nb||(nb={}));var Lh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Lh||(Lh={}));var ib;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ib||(ib={}));var rb;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rb||(rb={}));var sb;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sb||(sb={}));var My;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(My||(My={}));var ob;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ob||(ob={}));var ab;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ab||(ab={}));var lb;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(lb||(lb={}));var ub;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ub||(ub={}));var cb;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cb||(cb={}));var fb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(fb||(fb={}));var db;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(db||(db={}));var hb;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(hb||(hb={}));var pb;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(pb||(pb={}));var mb;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mb||(mb={}));var gb;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gb||(gb={}));var yb;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yb||(yb={}));var vb;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vb||(vb={}));var _b;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(_b||(_b={}));var Eb;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Eb||(Eb={}));var Tb;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Tb||(Tb={}));var Sb;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Sb||(Sb={}));var Ab;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ab||(Ab={}));var bb;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(bb||(bb={}));var wb;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wb||(wb={}));var Cb;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Cb||(Cb={}));var Ib;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ib||(Ib={}));var Rb;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Rb||(Rb={}));var xb;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xb||(xb={}));var Nb;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nb||(Nb={}));var Db;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Db||(Db={}));var Mb;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mb||(Mb={}));var Pb;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Pb||(Pb={}));var kb;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(kb||(kb={}));var El;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(El||(El={}));class Py{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ju{get text(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const E=[];for(const T of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,x]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(x!==null||x!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;g=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const E of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&g.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class Vb{}class Lb{}class t4{}class n4{}class i4{}class r4{}class Ob{}class Ub{}class Fb{}class s4{}class Oh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Oh;let s;const a=e;return n?s=HU(a):s=zU(a),Object.assign(i,s),i}}class qb{}class Bb{}class zb{}class o4{}class a4{}class l4{}class l0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new l0,a=WU(e);return Object.assign(i,a),i}}class u4{}class c4{}class f4{}class Hb{}class d4{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class h4{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class u0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new u0,a=KR(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $R(t,e){const n=dt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function JR(t){return Array.isArray(t)?t.map(e=>Uh(e)):[Uh(t)]}function Uh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function YR(t){const e=Uh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jR(t){const e=Uh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gb(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function WR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gb(e)):[Gb(t)]}function ky(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Kb(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $b(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ei(t){if(t==null)throw new Error("ContentUnion is required");return ky(t)?t:{role:"user",parts:WR(t)}}function c0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ei(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ei(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ei(n)):[ei(e)]}function sr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Kb(t)||$b(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ei(t)]}const e=[],n=[],i=ky(t[0]);for(const s of t){const a=ky(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(Kb(s)||$b(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:WR(n)}),e}function p4(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ue).includes(n[0].toUpperCase())?n[0].toUpperCase():Ue.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ue).includes(i.toUpperCase())?i.toUpperCase():Ue.TYPE_UNSPECIFIED})}}function Il(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&p4(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ue).includes(c.toUpperCase())?c.toUpperCase():Ue.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Il(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(Il(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,g]of Object.entries(c))d[h]=Il(g);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function f0(t){return Il(t)}function d0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function h0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Yl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Il(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Il(e.response));return t}function jl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function m4(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Es(t,e){if(typeof e!="string")throw new Error("name must be a string");return m4(t,e,"cachedContents")}function QR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mo(t){return a0(t)}function g4(t){return t!=null&&typeof t=="object"&&"name"in t}function y4(t){return t!=null&&typeof t=="object"&&"video"in t}function v4(t){return t!=null&&typeof t=="object"&&"uri"in t}function XR(t){var e;let n;if(g4(t)&&(n=t.name),!(v4(t)&&(n=t.uri,n===void 0))&&!(y4(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ZR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ex(t){for(const e of["models","tunedModels","publisherModels"])if(_4(t,e))return t[e];return[]}function _4(t,e){return t!==null&&typeof t=="object"&&e in t}function E4(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function T4(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=E4(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function tx(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function S4(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nx(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Wl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ix(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A4(t){const e={},n=p(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>e3(l))),y(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["inlinedEmbedContentResponses"],a)}return e}function b4(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function w4(t){const e={},n=p(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&y(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ah(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&y(e,["state"],ix(s));const a=p(t,["metadata","createTime"]);a!=null&&y(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&y(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&y(e,["dest"],A4(nx(h))),e}function Vy(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["state"]);s!=null&&y(e,["state"],ix(s));const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(e,["updateTime"],h);const g=p(t,["model"]);g!=null&&y(e,["model"],g);const E=p(t,["inputConfig"]);E!=null&&y(e,["src"],C4(E));const T=p(t,["outputConfig"]);T!=null&&y(e,["dest"],b4(nx(T)));const w=p(t,["completionStats"]);return w!=null&&y(e,["completionStats"],w),e}function C4(t){const e={},n=p(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function I4(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&y(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Z4(t,l))),y(n,["requests","requests"],a)}return n}function R4(t){const e={},n=p(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&y(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function x4(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function N4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function D4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function M4(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],P4(i));const s=p(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&y(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&y(e,["urlContextMetadata"],E),e}function P4(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function rx(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a3(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function k4(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function V4(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&y(e,["outputConfig"],w4(S4(s))),n}function Jb(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["src"]);s!=null&&y(n,["batch","inputConfig"],I4(t,tx(t,s)));const a=p(e,["config"]);return a!=null&&k4(a,n),n}function L4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],dt(t,i));const s=p(e,["src"]);s!=null&&y(n,["inputConfig"],R4(tx(t,s)));const a=p(e,["config"]);return a!=null&&V4(a,n),n}function O4(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function U4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["src"]);s!=null&&y(n,["batch","inputConfig"],K4(t,s));const a=p(e,["config"]);return a!=null&&O4(a,n),n}function F4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function q4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function B4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);return a!=null&&y(e,["error"],a),e}function z4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);return a!=null&&y(e,["error"],a),e}function H4(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=c0(t,i);Array.isArray(a)&&(a=a.map(l=>l)),y(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(y(n,["_self"],G4(s,n)),qU(n,{"requests[].*":"requests[].request.*"})),n}function G4(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function K4(t,e){const n={},i=p(e,["fileName"]);i!=null&&y(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&y(n,["requests"],H4(t,s)),n}function $4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function J4(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],rx(ei(s)));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=p(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const M=p(e,["seed"]);M!=null&&y(i,["seed"],M);const U=p(e,["responseMimeType"]);U!=null&&y(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&y(i,["responseSchema"],f0(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&y(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let L=q;Array.isArray(L)&&(L=L.map(O=>l3(O))),y(n,["safetySettings"],L)}const J=p(e,["tools"]);if(n!==void 0&&J!=null){let L=jl(J);Array.isArray(L)&&(L=L.map(O=>u3(Yl(O)))),y(n,["tools"],L)}const te=p(e,["toolConfig"]);if(n!==void 0&&te!=null&&y(n,["toolConfig"],te),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Es(t,G));const I=p(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=p(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const N=p(e,["speechConfig"]);if(N!=null&&y(i,["speechConfig"],d0(N)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const P=p(e,["imageConfig"]);return P!=null&&y(i,["imageConfig"],P),i}function Y4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>M4(h))),y(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function j4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function W4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Wl(t,i)),n}function Q4(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function X4(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Z4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["request","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let c=sr(s);Array.isArray(c)&&(c=c.map(d=>rx(d))),y(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&y(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&y(n,["request","generationConfig"],J4(t,l,p(n,["request"],{}))),n}function e3(t){const e={},n=p(t,["response"]);n!=null&&y(e,["response"],Y4(n));const i=p(t,["error"]);return i!=null&&y(e,["error"],i),e}function t3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function n3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),n}function i3(t){const e={},n=p(t,["config"]);return n!=null&&t3(n,e),e}function r3(t){const e={},n=p(t,["config"]);return n!=null&&n3(n,e),e}function s3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ah(l))),y(e,["batchJobs"],a)}return e}function o3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Vy(l))),y(e,["batchJobs"],a)}return e}function a3(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],$4(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],x4(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function l3(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function u3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Q4(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],X4(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class Ca{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c3 extends _s{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ca(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Jb(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const g of d){const E=Object.assign({},g);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=L4(this.apiClient,e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Vy(g))}else{const h=Jb(this.apiClient,e);return c=ye("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>ah(g))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U4(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ah(d))}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=W4(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Vy(g))}else{const h=j4(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>ah(g))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=D4(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=N4(this.apiClient,e);l=ye("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=r3(e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=o3(g),T=new Hb;return Object.assign(T,E),T})}else{const h=i3(e);return c=ye("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=s3(g),T=new Hb;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=q4(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>z4(g))}else{const h=F4(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>B4(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Yb(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>M3(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function d3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let g=sr(l);Array.isArray(g)&&(g=g.map(E=>Yb(E))),y(e,["contents"],g)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],Yb(ei(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(E=>P3(E))),y(e,["tools"],g)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],h),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function h3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let E=sr(l);Array.isArray(E)&&(E=E.map(T=>T)),y(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ei(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>k3(T))),y(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],h);const g=p(t,["kmsKeyName"]);return e!==void 0&&g!=null&&y(e,["encryption_spec","kmsKeyName"],g),n}function p3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],$R(t,i));const s=p(e,["config"]);return s!=null&&d3(s,n),n}function m3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],$R(t,i));const s=p(e,["config"]);return s!=null&&h3(s,n),n}function g3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Es(t,i)),n}function y3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Es(t,i)),n}function v3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function _3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function E3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function T3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function S3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Es(t,i)),n}function A3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Es(t,i)),n}function b3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function w3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function C3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function I3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function R3(t){const e={},n=p(t,["config"]);return n!=null&&C3(n,e),e}function x3(t){const e={},n=p(t,["config"]);return n!=null&&I3(n,e),e}function N3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["cachedContents"],a)}return e}function D3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["cachedContents"],a)}return e}function M3(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],E3(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],f3(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function P3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],b3(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],w3(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function k3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>T3(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function V3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function L3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function O3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],Es(t,i));const s=p(e,["config"]);return s!=null&&V3(s,n),n}function U3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],Es(t,i));const s=p(e,["config"]);return s!=null&&L3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F3 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=m3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=p3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=S3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=y3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=_3(g),T=new Bb;return Object.assign(T,E),T})}else{const h=g3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=v3(g),T=new Bb;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=U3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=O3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=x3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=D3(g),T=new zb;return Object.assign(T,E),T})}else{const h=R3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=N3(g),T=new zb;return Object.assign(T,E),T})}}}function jb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ot(t){return this instanceof Ot?(this.v=t,this):new Ot(t)}function Rl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(x){return Promise.resolve(x).then(w,E)}}function c(w,x){i[w]&&(s[w]=function(M){return new Promise(function(U,H){a.push([w,M,U,H])>1||d(w,M)})},x&&(s[w]=x(s[w])))}function d(w,x){try{h(i[w](x))}catch(M){T(a[0][3],M)}}function h(w){w.value instanceof Ot?Promise.resolve(w.value.v).then(g,E):T(a[0][2],w)}function g(w){d("next",w)}function E(w){d("throw",w)}function T(w,x){w(x),a.shift(),a.length&&d(a[0][0],a[0][1])}}function _c(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jb=="function"?jb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:sx(n)}function sx(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function B3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!sx(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class z3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new H3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class H3{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),B3(a)}async sendMessage(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const d=await s,h=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,g=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];g!=null&&(T=(c=g.slice(E))!==null&&c!==void 0?c:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?Wb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Rl(this,arguments,function*(){var l,c,d,h;const g=[];try{for(var E=!0,T=_c(e),w;w=yield Ot(T.next()),l=w.done,!l;E=!0){h=w.value,E=!1;const x=h;if(q3(x)){const M=(s=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;M!==void 0&&g.push(M)}yield yield Ot(x)}}catch(x){c={error:x}}finally{try{!E&&!l&&(d=T.return)&&(yield Ot(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Wb(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ep extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ep.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(t){const e={},n=p(t,["file"]);return n!=null&&y(e,["file"],n),e}function K3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function $3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],XR(n)),e}function J3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Y3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],XR(n)),e}function j3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function W3(t){const e={},n=p(t,["config"]);return n!=null&&j3(n,e),e}function Q3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X3 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=W3(e);return a=ye("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=Q3(d),g=new u4;return Object.assign(g,h),g})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=G3(e);return a=ye("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=K3(d),g=new c4;return Object.assign(g,h),g})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Y3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=J3(d),g=new f4;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lh(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Z3(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>p6(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function e6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function t6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function n6(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const g=p(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const E=p(t,["presencePenalty"]);E!=null&&y(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const x=p(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const M=p(t,["responseSchema"]);M!=null&&y(e,["responseSchema"],M);const U=p(t,["routingConfig"]);U!=null&&y(e,["routingConfig"],U);const H=p(t,["seed"]);H!=null&&y(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&y(e,["speechConfig"],ox(F));const q=p(t,["stopSequences"]);q!=null&&y(e,["stopSequences"],q);const J=p(t,["temperature"]);J!=null&&y(e,["temperature"],J);const te=p(t,["thinkingConfig"]);te!=null&&y(e,["thinkingConfig"],te);const G=p(t,["topK"]);G!=null&&y(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&y(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function i6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function r6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function s6(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],h0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=p(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],Z3(ei(x)));const M=p(t,["tools"]);if(e!==void 0&&M!=null){let G=jl(M);Array.isArray(G)&&(G=G.map(I=>g6(Yl(I)))),y(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&y(e,["setup","sessionResumption"],m6(U));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&y(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const J=p(t,["contextWindowCompression"]);e!==void 0&&J!=null&&y(e,["setup","contextWindowCompression"],J);const te=p(t,["proactivity"]);return e!==void 0&&te!=null&&y(e,["setup","proactivity"],te),n}function o6(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],n6(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],ox(h0(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=p(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],ei(x));const M=p(t,["tools"]);if(e!==void 0&&M!=null){let G=jl(M);Array.isArray(G)&&(G=G.map(I=>y6(Yl(I)))),y(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&y(e,["setup","sessionResumption"],U);const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&y(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const J=p(t,["contextWindowCompression"]);e!==void 0&&J!=null&&y(e,["setup","contextWindowCompression"],J);const te=p(t,["proactivity"]);return e!==void 0&&te!=null&&y(e,["setup","proactivity"],te),n}function a6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],s6(s,n)),n}function l6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],o6(s,n)),n}function u6(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function c6(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["weightedPrompts"],i)}return e}function f6(t){const e={},n=p(t,["media"]);if(n!=null){let h=JR(n);Array.isArray(h)&&(h=h.map(g=>lh(g))),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],lh(jR(i)));const s=p(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&y(e,["video"],lh(YR(a)));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function d6(t){const e={},n=p(t,["media"]);if(n!=null){let h=JR(n);Array.isArray(h)&&(h=h.map(g=>g)),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],jR(i));const s=p(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&y(e,["video"],YR(a));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function h6(t){const e={},n=p(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&y(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&y(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],v6(l));const c=p(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function p6(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],e6(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],lh(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function m6(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ox(t){const e={},n=p(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function g6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],i6(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],r6(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function y6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>t6(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function v6(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&y(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&y(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["promptTokensDetails"],w)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["cacheTokensDetails"],w)}const g=p(t,["candidatesTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["responseTokensDetails"],w)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["toolUsePromptTokensDetails"],w)}const T=p(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _6(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function E6(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],T6(i));const s=p(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&y(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&y(e,["urlContextMetadata"],E),e}function T6(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function S6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let a=sr(s);Array.isArray(a)&&(a=a.map(l=>l)),y(n,["contents"],a)}return n}function A6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["tokensInfo"],s)}return e}function b6(t){const e={},n=p(t,["values"]);n!=null&&y(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&y(e,["statistics"],w6(i)),e}function w6(t){const e={},n=p(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Tp(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>N5(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function C6(t){const e={},n=p(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function I6(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function R6(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],ei(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fx(c))),y(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&y(e,["generationConfig"],y5(a)),n}function x6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let l=sr(s);Array.isArray(l)&&(l=l.map(c=>Tp(c))),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&I6(a),n}function N6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let l=sr(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&R6(a,n),n}function D6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&y(e,["cachedContentTokenCount"],s),e}function M6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function P6(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],dt(t,i)),n}function k6(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],dt(t,i)),n}function V6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function L6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function O6(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&y(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const x=p(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const M=p(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&y(e,["parameters","outputOptions","compressionQuality"],M);const U=p(t,["addWatermark"]);e!==void 0&&U!=null&&y(e,["parameters","addWatermark"],U);const H=p(t,["labels"]);e!==void 0&&H!=null&&y(e,["labels"],H);const F=p(t,["editMode"]);e!==void 0&&F!=null&&y(e,["parameters","editMode"],F);const q=p(t,["baseSteps"]);return e!==void 0&&q!=null&&y(e,["parameters","editConfig","baseSteps"],q),n}function U6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>L5(d))),y(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&O6(l,n),n}function F6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Sp(a))),y(e,["generatedImages"],s)}return e}function q6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function B6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&y(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function z6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let c=c0(t,s);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&q6(a,n);const l=p(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],dt(t,l)),n}function H6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let l=c0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&B6(a,n),n}function G6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function K6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>b6(l))),y(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function $6(t){const e={},n=p(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function J6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Y6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function j6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],Tp(ei(s)));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=p(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const M=p(e,["seed"]);M!=null&&y(i,["seed"],M);const U=p(e,["responseMimeType"]);U!=null&&y(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&y(i,["responseSchema"],f0(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&y(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let L=q;Array.isArray(L)&&(L=L.map(O=>O5(O))),y(n,["safetySettings"],L)}const J=p(e,["tools"]);if(n!==void 0&&J!=null){let L=jl(J);Array.isArray(L)&&(L=L.map(O=>H5(Yl(O)))),y(n,["tools"],L)}const te=p(e,["toolConfig"]);if(n!==void 0&&te!=null&&y(n,["toolConfig"],te),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Es(t,G));const I=p(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=p(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const N=p(e,["speechConfig"]);if(N!=null&&y(i,["speechConfig"],d0(N)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const P=p(e,["imageConfig"]);return P!=null&&y(i,["imageConfig"],P),i}function W6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],ei(s));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=p(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const M=p(e,["seed"]);M!=null&&y(i,["seed"],M);const U=p(e,["responseMimeType"]);U!=null&&y(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&y(i,["responseSchema"],f0(H));const F=p(e,["responseJsonSchema"]);F!=null&&y(i,["responseJsonSchema"],F);const q=p(e,["routingConfig"]);q!=null&&y(i,["routingConfig"],q);const J=p(e,["modelSelectionConfig"]);J!=null&&y(i,["modelConfig"],J);const te=p(e,["safetySettings"]);if(n!==void 0&&te!=null){let ee=te;Array.isArray(ee)&&(ee=ee.map(ce=>ce)),y(n,["safetySettings"],ee)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let ee=jl(G);Array.isArray(ee)&&(ee=ee.map(ce=>fx(Yl(ce)))),y(n,["tools"],ee)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&y(n,["toolConfig"],I);const R=p(e,["labels"]);n!==void 0&&R!=null&&y(n,["labels"],R);const N=p(e,["cachedContent"]);n!==void 0&&N!=null&&y(n,["cachedContent"],Es(t,N));const V=p(e,["responseModalities"]);V!=null&&y(i,["responseModalities"],V);const P=p(e,["mediaResolution"]);P!=null&&y(i,["mediaResolution"],P);const L=p(e,["speechConfig"]);L!=null&&y(i,["speechConfig"],cx(d0(L)));const O=p(e,["audioTimestamp"]);O!=null&&y(i,["audioTimestamp"],O);const Ie=p(e,["thinkingConfig"]);Ie!=null&&y(i,["thinkingConfig"],Ie);const ve=p(e,["imageConfig"]);return ve!=null&&y(i,["imageConfig"],ve),i}function Qb(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let l=sr(s);Array.isArray(l)&&(l=l.map(c=>Tp(c))),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&y(n,["generationConfig"],j6(t,a,n)),n}function Xb(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let l=sr(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&y(n,["generationConfig"],W6(t,a,n)),n}function Zb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>E6(h))),y(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function ew(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(g=>g)),y(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function Q6(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const g=p(t,["language"]);e!==void 0&&g!=null&&y(e,["parameters","language"],g);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function X6(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&y(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const x=p(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const M=p(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&y(e,["parameters","outputOptions","compressionQuality"],M);const U=p(t,["addWatermark"]);e!==void 0&&U!=null&&y(e,["parameters","addWatermark"],U);const H=p(t,["labels"]);e!==void 0&&H!=null&&y(e,["labels"],H);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&y(e,["parameters","sampleImageSize"],F);const q=p(t,["enhancePrompt"]);return e!==void 0&&q!=null&&y(e,["parameters","enhancePrompt"],q),n}function Z6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&Q6(a,n),n}function e5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&X6(a,n),n}function t5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>h5(l))),y(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],lx(s)),e}function n5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Sp(l))),y(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],ux(s)),e}function i5(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=p(t,["lastFrame"]);e!==void 0&&g!=null&&y(e,["instances[0]","lastFrame"],Ap(g));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>nF(w))),y(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function r5(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&y(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&y(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const x=p(t,["generateAudio"]);e!==void 0&&x!=null&&y(e,["parameters","generateAudio"],x);const M=p(t,["lastFrame"]);e!==void 0&&M!=null&&y(e,["instances[0]","lastFrame"],Ar(M));const U=p(t,["referenceImages"]);if(e!==void 0&&U!=null){let q=U;Array.isArray(q)&&(q=q.map(J=>iF(J))),y(e,["instances[0]","referenceImages"],q)}const H=p(t,["mask"]);e!==void 0&&H!=null&&y(e,["instances[0]","mask"],tF(H));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&y(e,["parameters","compressionQuality"],F),n}function s5(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],u5(l)),e}function o5(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],c5(l)),e}function a5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],Ap(a));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],dx(l));const c=p(e,["source"]);c!=null&&f5(c,n);const d=p(e,["config"]);return d!=null&&i5(d,n),n}function l5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],Ar(a));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],hx(l));const c=p(e,["source"]);c!=null&&d5(c,n);const d=p(e,["config"]);return d!=null&&r5(d,n),n}function u5(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>m5(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function c5(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>g5(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function f5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Ap(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],dx(a)),n}function d5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Ar(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],hx(a)),n}function h5(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],S5(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&y(e,["safetyAttributes"],lx(s)),e}function Sp(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],ax(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&y(e,["safetyAttributes"],ux(s));const a=p(t,["prompt"]);return a!=null&&y(e,["enhancedPrompt"],a),e}function p5(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["mask"],ax(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["labels"],s)}return e}function m5(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],Z5(n)),e}function g5(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],eF(n)),e}function y5(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const g=p(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const E=p(t,["presencePenalty"]);E!=null&&y(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const x=p(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const M=p(t,["responseSchema"]);M!=null&&y(e,["responseSchema"],M);const U=p(t,["routingConfig"]);U!=null&&y(e,["routingConfig"],U);const H=p(t,["seed"]);H!=null&&y(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&y(e,["speechConfig"],cx(F));const q=p(t,["stopSequences"]);q!=null&&y(e,["stopSequences"],q);const J=p(t,["temperature"]);J!=null&&y(e,["temperature"],J);const te=p(t,["thinkingConfig"]);te!=null&&y(e,["thinkingConfig"],te);const G=p(t,["topK"]);G!=null&&y(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&y(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function v5(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],dt(t,i)),n}function _5(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],dt(t,i)),n}function E5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function T5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function S5(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Mo(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ax(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],Mo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Ap(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Mo(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Ar(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Mo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function A5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],ZR(t,c)),i}function b5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],ZR(t,c)),i}function w5(t,e){const n={},i=p(e,["config"]);return i!=null&&A5(t,i,n),n}function C5(t,e){const n={},i=p(e,["config"]);return i!=null&&b5(t,i,n),n}function I5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=ex(s);Array.isArray(a)&&(a=a.map(l=>Ly(l))),y(e,["models"],a)}return e}function R5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=ex(s);Array.isArray(a)&&(a=a.map(l=>Oy(l))),y(e,["models"],a)}return e}function x5(t){const e={},n=p(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&y(e,["dilation"],s),e}function Ly(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);s!=null&&y(e,["description"],s);const a=p(t,["version"]);a!=null&&y(e,["version"],a);const l=p(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],G5(l));const c=p(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&y(e,["supportedActions"],h);const g=p(t,["temperature"]);g!=null&&y(e,["temperature"],g);const E=p(t,["maxTemperature"]);E!=null&&y(e,["maxTemperature"],E);const T=p(t,["topP"]);T!=null&&y(e,["topP"],T);const w=p(t,["topK"]);w!=null&&y(e,["topK"],w);const x=p(t,["thinking"]);return x!=null&&y(e,["thinking"],x),e}function Oy(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);s!=null&&y(e,["description"],s);const a=p(t,["versionId"]);a!=null&&y(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>$6(T))),y(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&y(e,["labels"],c);const d=p(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],K5(d));const h=p(t,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const g=p(t,["checkpoints"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["checkpoints"],E)}return e}function N5(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],J6(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],_6(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function D5(t){const e={},n=p(t,["productImage"]);return n!=null&&y(e,["image"],Ar(n)),e}function M5(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&y(e,["parameters","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","mimeType"],g);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const w=p(t,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),n}function P5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["source"]);s!=null&&V5(s,n);const a=p(e,["config"]);return a!=null&&M5(a,n),n}function k5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Sp(s))),y(e,["generatedImages"],i)}return e}function V5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&y(e,["instances[0]","personImage","image"],Ar(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>D5(c))),y(e,["instances[0]","productImages"],l)}return n}function L5(t){const e={},n=p(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Ar(n));const i=p(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&y(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&y(e,["maskImageConfig"],x5(a));const l=p(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],C6(l));const c=p(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function lx(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function ux(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function O5(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function U5(t){const e={},n=p(t,["image"]);return n!=null&&y(e,["image"],Ar(n)),e}function F5(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&y(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&y(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function q5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["source"]);s!=null&&z5(s,n);const a=p(e,["config"]);return a!=null&&F5(a,n),n}function B5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>p5(s))),y(e,["generatedMasks"],i)}return e}function z5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Ar(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&y(e,["instances[0]","scribble"],U5(a)),n}function cx(t){const e={},n=p(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function H5(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],E5(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],T5(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function fx(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>Y6(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function G5(t){const e={},n=p(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function K5(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function $5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),n}function J5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),n}function Y5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","name"],dt(t,i));const s=p(e,["config"]);return s!=null&&$5(s,n),n}function j5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&J5(s,n),n}function W5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=p(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const E=p(t,["labels"]);e!==void 0&&E!=null&&y(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const w=p(t,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),n}function Q5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],dt(t,i));const s=p(e,["image"]);s!=null&&y(n,["instances[0]","image"],Ar(s));const a=p(e,["upscaleFactor"]);a!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&W5(l,n),n}function X5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Sp(a))),y(e,["generatedImages"],s)}return e}function Z5(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Mo(i));const s=p(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function eF(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Mo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function tF(t){const e={},n=p(t,["image"]);n!=null&&y(e,["_self"],Ar(n));const i=p(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function nF(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],Ap(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function iF(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],Ar(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function dx(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],Mo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["encoding"],s),e}function hx(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Mo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rF="Content-Type",sF="X-Server-Timeout",oF="User-Agent",Uy="x-goog-api-client",aF="1.29.1",lF=`google-genai-sdk/${aF}`,uF="v1beta1",cF="v1beta",tw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class fF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:uF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cF,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&dF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await nw(s),new Py(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await nw(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Rl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Ot(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),w=T.status,x=T.code,M=`got status: ${w}. ${JSON.stringify(E)}`;if(x>=400&&x<600)throw new Ep({message:M,status:x})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let g=l.match(tw);for(;g;){const E=g[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ot(new Py(T)),l=l.slice(g[0].length),g=l.match(tw)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=lF+" "+this.clientOptions.userAgentExtra;return e[oF]=n,e[Uy]=n,e[rF]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(sF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),g=ye("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(g,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,g,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function nw(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Ep({message:s,status:n}):new Error(s)}}function dF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],g=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?c[d]=i(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hF="mcp_used/unknown";let pF=!1;function px(t){for(const e of t)if(mF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pF}function mx(t){var e;const n=(e=t[Uy])!==null&&e!==void 0?e:"";t[Uy]=(n+` ${hF}`).trimStart()}function mF(t){return t!==null&&typeof t=="object"&&t instanceof p0}function gF(t,e=100){return Rl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield Ot(t.listTools({cursor:i}));for(const l of a.tools)yield yield Ot(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class p0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new p0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const g of this.mcpClients)try{for(var c=!0,d=(n=void 0,_c(gF(g))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=g}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),T4(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yF(t,e,n){const i=new h4;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class vF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=TF(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const g=new Promise(q=>{h=q}),E=e.callbacks,T=function(){h({})},w=this.apiClient,x={onopen:T,onmessage:q=>{yF(w,E.onmessage,q)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(q){}},M=this.webSocketFactory.create(d,EF(l),x);M.connect(),await g;const F={setup:{model:dt(this.apiClient,e.model)}};return M.send(JSON.stringify(F)),new _F(M,this.apiClient)}}class _F{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=c6(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=u6(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(El.PLAY)}pause(){this.sendPlaybackControl(El.PAUSE)}stop(){this.sendPlaybackControl(El.STOP)}resetContext(){this.sendPlaybackControl(El.RESET_CONTEXT)}close(){this.conn.close()}}function EF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function TF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function AF(t,e,n){const i=new d4;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=h6(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class bF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new vF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&px(e.config.tools)&&mx(E);const T=RF(E);if(this.apiClient.isVertexAI())g=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,g);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",P="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",P="access_token"),g=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${P}=${N}`}let w=()=>{};const x=new Promise(N=>{w=N}),M=e.callbacks,U=function(){var N;(N=M==null?void 0:M.onopen)===null||N===void 0||N.call(M),w({})},H=this.apiClient,F={onopen:U,onmessage:N=>{AF(H,M.onmessage,N)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=M==null?void 0:M.onclose)!==null&&i!==void 0?i:function(N){}},q=this.webSocketFactory.create(g,IF(T),F);q.connect(),await x;let J=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();J=`projects/${N}/locations/${V}/`+J}let te={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lh.AUDIO]}:e.config.responseModalities=[Lh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const N of G)if(this.isCallableTool(N)){const V=N;I.push(await V.tool())}else I.push(N);I.length>0&&(e.config.tools=I);const R={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?te=l6(this.apiClient,R):te=a6(this.apiClient,R),delete te.config,q.send(JSON.stringify(te)),new CF(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wF={turnComplete:!0};class CF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=sr(n.turns),e.isVertexAI()||(i=i.map(s=>Tp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(SF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},wF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:d6(e)}:n={realtimeInput:f6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function IF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function RF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iw=10;function rw(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(xl(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function xl(t){return"callTool"in t&&typeof t.callTool=="function"}function xF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>xl(s)))!==null&&i!==void 0?i:!1}function sw(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(xl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function ow(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NF extends _s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!xF(n)||rw(n.config))return await this.generateContentInternal(d);const h=sw(n);if(h.length>0){const M=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let g,E;const T=sr(d.contents),w=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:iw;let x=0;for(;x<w&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const M=g.candidates[0].content,U=[];for(const H of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(xl(H)){const q=await H.callTool(g.functionCalls);U.push(...q)}x++,E={role:"user",parts:U},d.contents=sr(d.contents),d.contents.push(M),d.contents.push(E),ow(d.config)&&(T.push(M),T.push(E))}return ow(d.config)&&(g.automaticFunctionCallingHistory=T),g},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),rw(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const i=sw(n);if(i.length>0){const s=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ca(vs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>xl(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&px(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),mx(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(xl(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:iw;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,g,E){var T,w;return Rl(this,arguments,function*(){for(var x,M,U,H;c<a;){l&&(c++,l=!1);const te=yield Ot(h.processParamsMaybeAddMcpUsage(E)),G=yield Ot(h.generateContentStreamInternal(te)),I=[],R=[];try{for(var F=!0,q=(M=void 0,_c(G)),J;J=yield Ot(q.next()),x=J.done,!x;F=!0){H=J.value,F=!1;const N=H;if(yield yield Ot(N),N.candidates&&(!((T=N.candidates[0])===null||T===void 0)&&T.content)){R.push(N.candidates[0].content);for(const V of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(V.functionCall.name)){const P=yield Ot(g.get(V.functionCall.name).callTool([V.functionCall]));I.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){M={error:N}}finally{try{!F&&!x&&(U=q.return)&&(yield Ot(U.call(q)))}finally{if(M)throw M.error}}if(I.length>0){l=!0;const N=new ju;N.candidates=[{content:{role:"user",parts:I}}],yield yield Ot(N);const V=[];V.push(...R),V.push({role:"user",parts:I});const P=sr(E.contents).concat(V);E.contents=P}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Xb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=ew(g),T=new ju;return Object.assign(T,E),T})}else{const h=Qb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=Zb(g),T=new ju;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Xb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,x,M;try{for(var U=!0,H=_c(E),F;F=yield Ot(H.next()),T=F.done,!T;U=!0){M=F.value,U=!1;const q=M,J=ew(yield Ot(q.json()));J.sdkHttpResponse={headers:q.headers};const te=new ju;Object.assign(te,J),yield yield Ot(te)}}catch(q){w={error:q}}finally{try{!U&&!T&&(x=H.return)&&(yield Ot(x.call(H)))}finally{if(w)throw w.error}}})})}else{const h=Qb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,x,M;try{for(var U=!0,H=_c(E),F;F=yield Ot(H.next()),T=F.done,!T;U=!0){M=F.value,U=!1;const q=M,J=Zb(yield Ot(q.json()));J.sdkHttpResponse={headers:q.headers};const te=new ju;Object.assign(te,J),yield yield Ot(te)}}catch(q){w={error:q}}finally{try{!U&&!T&&(x=H.return)&&(yield Ot(x.call(H)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=H6(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=K6(g),T=new Vb;return Object.assign(T,E),T})}else{const h=z6(this.apiClient,e);return c=ye("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=G6(g),T=new Vb;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=e5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=n5(g),T=new Lb;return Object.assign(T,E),T})}else{const h=Z6(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=t5(g),T=new Lb;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=U6(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=F6(d),g=new t4;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Q5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=X5(d),g=new n4;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=P5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=k5(d),g=new i4;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=q5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=B5(d),g=new r4;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=_5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Oy(g))}else{const h=v5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Ly(g))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=C5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=R5(g),T=new Ob;return Object.assign(T,E),T})}else{const h=w5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=I5(g),T=new Ob;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j5(this.apiClient,e);return c=ye("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Oy(g))}else{const h=Y5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Ly(g))}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=k6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=L6(g),T=new Ub;return Object.assign(T,E),T})}else{const h=P6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=V6(g),T=new Ub;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=N6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=M6(g),T=new Fb;return Object.assign(T,E),T})}else{const h=x6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=D6(g),T=new Fb;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=S6(this.apiClient,e);return a=ye("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=A6(d),g=new s4;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=l5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const E=o5(g),T=new Oh;return Object.assign(T,E),T})}else{const h=a5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>{const E=s5(g),T=new Oh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DF extends _s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=jU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l}else{const h=YU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=BU(e);return a=ye("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MF(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function PF(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>BF(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function kF(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&y(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&y(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],qF(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function VF(t,e){const n={},i=p(e,["config"]);return i!=null&&y(n,["config"],kF(t,i,n)),n}function LF(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function OF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function UF(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function FF(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],h0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=p(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],PF(ei(x)));const M=p(t,["tools"]);if(e!==void 0&&M!=null){let G=jl(M);Array.isArray(G)&&(G=G.map(I=>HF(Yl(I)))),y(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&y(e,["setup","sessionResumption"],zF(U));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&y(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const J=p(t,["contextWindowCompression"]);e!==void 0&&J!=null&&y(e,["setup","contextWindowCompression"],J);const te=p(t,["proactivity"]);return e!==void 0&&te!=null&&y(e,["setup","proactivity"],te),n}function qF(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],FF(s,n)),n}function BF(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],LF(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],MF(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function zF(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function HF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],OF(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],UF(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function KF(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=GF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class $F extends _s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=VF(this.apiClient,e);a=ye("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=KF(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JF(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function YF(t){const e={},n=p(t,["config"]);return n!=null&&JF(n,e),e}function jF(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function WF(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&jF(i,e),e}function QF(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function XF(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&y(e,["chunkingConfig"],s),n}function ZF(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],tq(l)),e}function eq(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&y(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&XF(s,e),e}function tq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function nq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function iq(t){const e={},n=p(t,["config"]);return n!=null&&nq(n,e),e}function rq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["fileSearchStores"],a)}return e}function sq(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function oq(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&sq(i,e),e}function aq(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lq(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function uq(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&lq(i,e),e}function cq(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function fq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function dq(t){const e={},n=p(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&fq(i,e),e}function hq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pq extends _s{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ca(vs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cq(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uq(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dq(e);return a=ye("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=hq(d),g=new o4;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mq extends _s{constructor(e,n=new pq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ca(vs.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YF(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QF(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WF(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iq(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=rq(d),g=new a4;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oq(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=aq(d),g=new l4;return Object.assign(g,h),g})}}async importFile(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eq(e);return a=ye("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=ZF(d),g=new l0;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gq(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function yq(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function vq(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&y(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function _q(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],aw(w))}else if(s==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],aw(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&y(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let g=p(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(g==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&y(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function Eq(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&Dq(a);const l=p(t,["config"]);return l!=null&&vq(l,n),n}function Tq(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&Mq(a,n,e);const l=p(t,["config"]);return l!=null&&_q(l,n,e),n}function Sq(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function Aq(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function bq(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function wq(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function Cq(t,e){const n={},i=p(t,["config"]);return i!=null&&bq(i,n),n}function Iq(t,e){const n={},i=p(t,["config"]);return i!=null&&wq(i,n),n}function Rq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>gx(c))),y(n,["tuningJobs"],l)}return n}function xq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fy(c))),y(n,["tuningJobs"],l)}return n}function Nq(t,e){const n={},i=p(t,["name"]);i!=null&&y(n,["model"],i);const s=p(t,["name"]);return s!=null&&y(n,["endpoint"],s),n}function Dq(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(n,["examples","examples"],s)}return n}function Mq(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function gx(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["state"]);a!=null&&y(n,["state"],QR(a));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const g=p(t,["description"]);g!=null&&y(n,["description"],g);const E=p(t,["baseModel"]);E!=null&&y(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&y(n,["tunedModel"],Nq(T)),n}function Fy(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["state"]);a!=null&&y(n,["state"],QR(a));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const g=p(t,["error"]);g!=null&&y(n,["error"],g);const E=p(t,["description"]);E!=null&&y(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const w=p(t,["tunedModel"]);w!=null&&y(n,["tunedModel"],w);const x=p(t,["preTunedModel"]);x!=null&&y(n,["preTunedModel"],x);const M=p(t,["supervisedTuningSpec"]);M!=null&&y(n,["supervisedTuningSpec"],M);const U=p(t,["preferenceOptimizationSpec"]);U!=null&&y(n,["preferenceOptimizationSpec"],U);const H=p(t,["tuningDataStats"]);H!=null&&y(n,["tuningDataStats"],H);const F=p(t,["encryptionSpec"]);F!=null&&y(n,["encryptionSpec"],F);const q=p(t,["partnerModelTuningSpec"]);q!=null&&y(n,["partnerModelTuningSpec"],q);const J=p(t,["customBaseModel"]);J!=null&&y(n,["customBaseModel"],J);const te=p(t,["experiment"]);te!=null&&y(n,["experiment"],te);const G=p(t,["labels"]);G!=null&&y(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&y(n,["outputUri"],I);const R=p(t,["pipelineJob"]);R!=null&&y(n,["pipelineJob"],R);const N=p(t,["serviceAccount"]);N!=null&&y(n,["serviceAccount"],N);const V=p(t,["tunedModelDisplayName"]);V!=null&&y(n,["tunedModelDisplayName"],V);const P=p(t,["veoTuningSpec"]);return P!=null&&y(n,["veoTuningSpec"],P),n}function Pq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["metadata"]);a!=null&&y(n,["metadata"],a);const l=p(t,["done"]);l!=null&&y(n,["done"],l);const c=p(t,["error"]);return c!=null&&y(n,["error"],c),n}function aw(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&y(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kq extends _s{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ca(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:My.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Aq(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>Fy(g))}else{const h=Sq(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>gx(g))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Iq(e);return c=ye("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=xq(g),T=new qb;return Object.assign(T,E),T})}else{const h=Cq(e);return c=ye("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=Rq(g),T=new qb;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=yq(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=gq(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Tq(e,e);return a=ye("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>Fy(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Eq(e);return a=ye("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>Pq(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Lq=1024*1024*8,Oq=3,Uq=1e3,Fq=2,Fh="x-goog-upload-status";async function qq(t,e,n){var i;const s=await yx(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Fh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Bq(t,e,n){var i;const s=await yx(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Fh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=KR(a),c=new u0;return Object.assign(c,l),c}async function yx(t,e,n){var i,s;let a=0,l=0,c=new Py(new Response),d="upload";for(a=t.size;l<a;){const h=Math.min(Lq,a-l),g=t.slice(l,l+h);l+h>=a&&(d+=", finalize");let E=0,T=Uq;for(;E<Oq&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Fh]));)E++,await Hq(T),T=T*Fq;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Fh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function zq(t){return{size:t.size,type:t.type}}function Hq(t){return new Promise(e=>setTimeout(e,t))}class Gq{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qq(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bq(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kq{create(e,n,i){return new $q(e,n,i)}}class $q{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lw="x-goog-api-key";class Jq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(lw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(lw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yq="gl-node/";class jq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=FU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new Jq(this.apiKey);this.apiClient=new fF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Yq+"web",uploader:new Gq,downloader:new Vq}),this.models=new NF(this.apiClient),this.live=new bF(this.apiClient,s,new Kq),this.batches=new c3(this.apiClient),this.chats=new z3(this.models,this.apiClient),this.caches=new F3(this.apiClient),this.files=new X3(this.apiClient),this.operations=new DF(this.apiClient),this.authTokens=new $F(this.apiClient),this.tunings=new kq(this.apiClient),this.fileSearchStores=new mq(this.apiClient)}}const vx={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},bp=new jq({apiKey:vx.geminiApiKey});async function Wq(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await bp.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{items:{type:Ue.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Ue.OBJECT,properties:{analysis:{type:Ue.STRING,description:"La description concise du vtement."},category:{type:Ue.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ue.STRING,description:"La couleur principale du vtement."},material:{type:Ue.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return s.items.forEach(l=>{a.includes(l.category)||(console.warn(`Catgorie invalide reue de l'IA: ${l.category}, fallback sur "Accessoires"`),l.category="Accessoires")}),s.items}catch(s){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",s),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function Qq(t){return t&&t.name&&Array.isArray(t.itemIds)}async function Xq(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Couleur: ${T.color}, Mat: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=i?`
**RGLE D'ANCRAGE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${Qq(i)?i.name:i.analysis} (ID: ${i.id})". C'est la pice matresse.**
`:"",g=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pertinentes, compltes et harmonieuses.

    Contexte de l'utilisateur : "${n}"
    
    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    ${h}

    ---
    RGLES DE STYLE (CRITIQUES) :
    Ce sont des rgles impratives.
    1. **Montre :** Chaque tenue DOIT inclure une montre (Cat: "Accessoires"). Choisis la plus adapte au style de la tenue. Si aucune montre n'est disponible, n'en invente pas.
    2. **Mto (Veste) :** Le "Contexte" inclut la mto. Si la temprature est infrieure  20C, la tenue DOIT inclure une veste, un manteau, ou un gilet (Cat: "Hauts").
    3. **Pull Col V :** Si tu inclus un pull  col en "V" (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise  col boutonn (Cat: "Hauts") en dessous.
    4. **Pull Col Zipp :** Si tu inclus un pull  col zipp (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise ou un t-shirt (Cat: "Hauts") en dessous.

    ---
    RGLES DE STYLE (GNRALES) :
    1. **Cohrence :** Une tenue doit tre complte et logique. Elle doit inclure au moins un "Hauts" et un "Bas". Si des "Chaussures" pertinentes existent, inclus-les.
    2. **Harmonie :** Assure-toi que les couleurs et les matires de la tenue sont bien assorties.
    3. **Varit :** Les 3 tenues proposes doivent tre distinctes les unes des autres.

    ---
    RGLES DE FORMAT (OBLIGATOIRES) :
    1. Base-toi **uniquement** sur les vtements et ensembles lists ci-dessus.
    2. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    3. Les articles marqus comme "(Ensemble)" sont insparables.

    Cre 3 tenues distinctes. Pour chaque tenue, fournis :
    1. Un "titre" court et accrocheur.
    2. Une "description" brve du style et *pourquoi* elle est adapte au contexte et respecte les rgles.
    3. Une liste "vetements" d'objets, o chaque objet contient "id" et "description" de l'article ou de l'ensemble utilis.

    Rponds en franais.
  `,E=await bp.models.generateContent({model:"gemini-flash-latest",contents:g,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{tenues:{type:Ue.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Ue.OBJECT,properties:{titre:{type:Ue.STRING,description:"Le nom de la tenue."},description:{type:Ue.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Ue.ARRAY,description:"La liste des objets vtements composant la tenue.",items:{type:Ue.OBJECT,properties:{id:{type:Ue.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Ue.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(T){throw console.error("Erreur de parsing JSON de la rponse Gemini:",T),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function Zq(t,e){const n=t.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${t.length} pices):
${n}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,s=await bp.models.generateContent({model:"gemini-flash-latest",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{summary:{type:Ue.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Ue.ARRAY,items:{type:Ue.STRING},description:"Liste des points forts"},gaps:{type:Ue.ARRAY,items:{type:Ue.STRING},description:"Liste des manques"},suggestions:{type:Ue.ARRAY,items:{type:Ue.OBJECT,properties:{category:{type:Ue.STRING},description:{type:Ue.STRING},reason:{type:Ue.STRING},priority:{type:Ue.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Ue.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(s.text)}catch(a){throw console.error("Erreur:",a),a}}async function e9(t,e,n,i){const s=new Set((e||[]).flatMap(E=>E.itemIds)),l=t.filter(E=>!s.has(E.id)).map(E=>`- ${E.analysis} (ID: ${E.id}, Cat: ${E.category}, Couleur: ${E.color}, Mat: ${E.material})`).join(`
`),c=e.map(E=>`- ${E.name} (Ensemble, ID: ${E.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=`
    Tu es un styliste de voyage. Ta mission est de crer une valise optimise.

    Dtails du voyage :
    - Dure : ${n} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    
    RGLES :
    1. Cre une liste "valise" polyvalente et minimale. Vise la "mix-and-match" (articles qui vont ensemble).
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    4. Les articles marqus comme "(Ensemble)" sont insparables.
    5. Prends en compte le Contexte/Mto pour la slection.

    Rponds avec un "titre", un "resume" (explique la stratgie de la valise), et la liste "valise".
    La liste "valise" doit contenir des objets, o chaque objet contient "id" et "description".
    `,g=await bp.models.generateContent({model:"gemini-flash-latest",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{titre:{type:Ue.STRING,description:"Le nom du plan de valise."},resume:{type:Ue.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Ue.ARRAY,description:"La liste des objets vtements  emporter.",items:{type:Ue.OBJECT,properties:{id:{type:Ue.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Ue.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","resume","valise"]}}});try{return JSON.parse(g.text)}catch(E){throw console.error("Erreur de parsing JSON:",E),new Error("L'IA a renvoy une rponse malforme.")}}const t9=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),n9=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),uw=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),i9=()=>A.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),g0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),cw=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),_x=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),r9=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),s9=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),o9=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),a9=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),l9=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),Ex=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),wp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),y0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),u9=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),c9=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),f9=({theme:t,toggleTheme:e,children:n})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[n,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?A.jsx(n9,{}):A.jsx(t9,{})})]})]})}),fw=({user:t})=>{var w,x,M;const[e,n]=$.useState(""),[i,s]=$.useState(""),[a,l]=$.useState(!1),[c,d]=$.useState(!1),h=$.useRef(null);$.useEffect(()=>{const U=H=>{h.current&&!h.current.contains(H.target)&&d(!1)};return c&&document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[c]);const g=async()=>{try{await cP(ac,kU)}catch(U){console.error("Erreur de connexion Google:",U)}},E=async U=>{U.preventDefault();try{a?await FM(ac,e,i):await qM(ac,e,i)}catch(H){console.error("Erreur d'authentification:",H)}},T=async()=>{try{await GM(ac)}catch(U){console.error("Erreur de dconnexion:",U)}};return t?A.jsxs("div",{className:"relative",ref:h,children:[A.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((w=t.displayName)==null?void 0:w[0])||((x=t.email)==null?void 0:x[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((M=t.email)==null?void 0:M.split("@")[0])})]}),c&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),A.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:g,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:E,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:U=>n(U.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:U=>s(U.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>l(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},d9=({onAnalyze:t,isAnalyzing:e})=>{const n=$.useRef(null),[i,s]=$.useState([]),[a,l]=$.useState(!1),[c,d]=$.useState(!1);$.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),$.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const q=F.map(J=>({id:`${J.name}-${J.lastModified}-${Math.random()}`,file:J,preview:URL.createObjectURL(J)}));s(J=>[...J,...q])},g=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!0))},w=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1))},x=F=>{c||(F.preventDefault(),F.stopPropagation())},M=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},U=F=>{const q=i.find(J=>J.id===F);q&&URL.revokeObjectURL(q.preview),s(J=>J.filter(te=>te.id!==F))},H=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:w,onDragOver:x,onDrop:M,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:n,onChange:g,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(i9,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(uw,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(uw,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>U(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(g0,{})})]},F.id))}),A.jsxs("button",{onClick:H,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(m0,{}),"Analyser les ",i.length," article(s)"]})]})]})},h9=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a})=>A.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!s&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:A.jsx(wp,{})}),s&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:A.jsx(y0,{})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(g0,{})})]}),p9={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},m9=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,l]=$.useState("Hauts"),[c,d]=$.useState(p9),[h,g]=$.useState(!1),[E,T]=$.useState(new Set),w=$.useMemo(()=>e||[],[e]),x=$.useMemo(()=>new Set(w.flatMap(P=>P.itemIds||[])),[w]),M=t.length,U=[{name:"Hauts",icon:r9},{name:"Bas",icon:s9},{name:"Chaussures",icon:o9},{name:"Accessoires",icon:a9}],H=P=>{h?T(L=>{const O=new Set(L);return O.has(P.id)?O.delete(P.id):O.add(P.id),O}):n(P)},F=(P,L)=>{P.stopPropagation(),E.has(L)&&T(O=>{const Ie=new Set(O);return Ie.delete(L),Ie}),i(L)},q=$.useMemo(()=>t.filter(P=>{if(!(P.category===a))return!1;const O=a?c[a]:{color:"Toutes",material:"Toutes"},Ie=O.color==="Toutes"||P.color===O.color,ve=O.material==="Toutes"||P.material===O.material;return Ie&&ve}),[t,a,c]),J=$.useMemo(()=>{if(!a)return[];const P=t.filter(L=>L.category===a).map(L=>L.color);return["Toutes",...Array.from(new Set(P))]},[t,a]),te=$.useMemo(()=>{if(!a)return[];const P=t.filter(L=>L.category===a).map(L=>L.material);return["Toutes",...Array.from(new Set(P))]},[t,a]),G=P=>{a&&d(L=>({...L,[a]:{...L[a],color:P}}))},I=P=>{a&&d(L=>({...L,[a]:{...L[a],material:P}}))},R=P=>{l(a===P?null:P)},N=()=>{g(!h),T(new Set)},V=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const P=window.prompt("Donnez un nom  cet ensemble :");P&&(s(P,Array.from(E)),N())};return M===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(cw,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(cw,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[M," vtement",M>1?"s":""]})]})]}),h?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:N,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:V,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):A.jsxs("button",{onClick:N,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(wp,{}),"Crer un ensemble"]})]}),h&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:U.map(({name:P,icon:L})=>{const O=t.filter(ve=>ve.category===P),Ie=a===P;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>R(P),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(L,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:P}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",O.length,")"]})]}),A.jsx(l9,{className:`w-5 h-5 transition-transform ${Ie?"rotate-180":""}`})]}),Ie&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:c[P].color,onChange:ve=>G(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:J.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:c[P].material,onChange:ve=>I(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:te.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]})]}),q.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:q.map(ve=>A.jsx(h9,{imageSrc:ve.imageSrc,analysis:ve.analysis,onClick:()=>H(ve),onRemove:ee=>F(ee,ve.id),isSelected:E.has(ve.id),isSet:x.has(ve.id)&&!E.has(ve.id)},ve.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},P)})})]})},Tx=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[l,c]=Sn.useState(""),d=g=>{g.preventDefault(),n(l||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:d,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(g=>A.jsx("button",{type:"button",onClick:()=>c(g),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===g?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:g},g))}),A.jsx("input",{id:"occasion",type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),A.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(m0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},Sx=({outfits:t,allClothingItems:e,allClothingSets:n})=>{const[i,s]=$.useState(null);$.useEffect(()=>{if(!i)return;const l=c=>{c.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[i]);const a=l=>{const{id:c,description:d}=l;let h=e.find(E=>E.id===c);if(h)return h;let g=n.find(E=>E.id===c);if(g)return g;if(h=e.find(E=>E.analysis===c),h||(h=e.find(E=>E.analysis===d),h))return h};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:t.map((l,c)=>A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((d,h)=>{const g=a(d),E=g?g.imageSrc:null;return A.jsx("button",{onClick:()=>E&&s(E),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!E,"aria-label":`Agrandir l'image de : ${d.description}`,children:E?A.jsx("img",{src:E,alt:d.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(_x,{})})},h)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((d,h)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d.description},h))})]},c))}),i&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[A.jsx("img",{src:i,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(Ex,{})})]})})]})},g9=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a,onDelete:l})=>{const[c,d]=$.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[h,g]=$.useState(!1),E=e.find(M=>M.itemIds.includes(t.id));$.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),$.useEffect(()=>{const M=U=>{U.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",M),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",M)}},[n]);const T=M=>{const{name:U,value:H}=M.target;d(F=>({...F,[U]:H}))},w=M=>{M.preventDefault(),i({...t,...c}),g(!0),setTimeout(()=>{g(!1)},2e3)},x=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:M=>M.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(Ex,{})})]}),A.jsxs("form",{onSubmit:w,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(M=>A.jsx("option",{value:M,children:M},M))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),E&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:E.name,children:E.name})]}),A.jsxs("button",{type:"button",onClick:()=>{a(E.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(u9,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[A.jsxs("button",{type:"button",onClick:x,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[A.jsx(g0,{}),"Supprimer"]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(m0,{}),"Crer une tenue"]}),A.jsx("button",{type:"submit",disabled:h,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${h?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:h?A.jsxs(A.Fragment,{children:[A.jsx(y0,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},Ax=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=$.useState(3),[l,c]=$.useState(""),d=h=>{h.preventDefault();const g=l||"";g.trim()&&s>0&&n(s,g)};return A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(c9,{}),i?"Prparation...":"Gnrer la valise"]})]})},bx=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const{id:a,description:l}=s;let c=e.find(h=>h.id===a);if(c)return c;let d=n.find(h=>h.id===a);if(d)return d;if(c=e.find(h=>h.analysis===a),c||(c=e.find(h=>h.analysis===l),c))return c};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const l=i(s),c=l?l.imageSrc:null;return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?A.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(_x,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},y9=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=$.useState(!1),a=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),s(!1))};return A.jsxs(A.Fragment,{children:[!n&&A.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},v9=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,isAnalyzingWardrobe:s,clothingCount:a})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a," vtement",a>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[a>=3&&A.jsx("button",{onClick:t,disabled:s,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:s?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:a}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),_9=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return A.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),A.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},E9=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:s.description}),A.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var T9=S9()?$.useLayoutEffect:$.useEffect;function S9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function A9(){var t=$.useState(Object.create(null)),e=t[1];return $.useCallback(function(){e(Object.create(null))},[])}var b9=tC(),w9=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=$.useRef(null),l=$.useRef(null),c=A9();return T9(function(){if(a.current){var d=a.current.ownerDocument;return l.current=d==null?void 0:d.createElement(s),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[s,c]),l.current?b9.createPortal(n,l.current):$.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var me=function(){return me=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},me.apply(this,arguments)};function v0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function st(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Lt(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var It;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(It||(It={}));var Fl;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Fl||(Fl={}));var qy=It.Start,_0=It.Stop,tf=It.Raise,Cp=It.Send,wx=It.Cancel,C9=It.NullEvent,E0=It.Assign;It.After;It.DoneState;var Cx=It.Log,I9=It.Init,By=It.Invoke;It.ErrorExecution;var dw=It.ErrorPlatform,R9=It.ErrorCustom,Ix=It.Update,x9=It.Choose,N9=It.Pure,Rx=".",hw={},zy="xstate.guard",D9="",kd;function T0(t,e,n){n===void 0&&(n=Rx);var i=Ec(t,n),s=Ec(e,n);return yt(s)?yt(i)?s===i:!1:yt(i)?i in s:Object.keys(i).every(function(a){return a in s?T0(i[a],s[a]):!1})}function xx(t){try{return yt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Hy(t,e){try{return Ql(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function M9(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Ec(t,e){if(M9(t))return t.value;if(Ql(t))return qh(t);if(typeof t!="string")return t;var n=Hy(t,e);return qh(n)}function qh(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function lc(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function pw(t,e,n){var i,s,a={};try{for(var l=st(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(g){i={error:g}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}var P9=function(t){return function(e){var n,i,s=e;try{for(var a=st(t),l=a.next();!l.done;l=a.next()){var c=l.value;s=s[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function k9(t,e){return function(n){var i,s,a=n;try{for(var l=st(t),c=l.next();!c.done;c=l.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}function uh(t){if(!t)return[[]];if(yt(t))return[[t]];var e=Kt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:uh(t[n]).map(function(s){return[n].concat(s)})}));return e}function Kt(t){var e;return(e=[]).concat.apply(e,Lt([],ft(t),!1))}function Nx(t){return Ql(t)?t:[t]}function mr(t){return t===void 0?[]:Nx(t)}function Bh(t,e,n){var i,s;if(mt(t))return t(e,n.data);var a={};try{for(var l=st(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];mt(h)?a[d]=h(e,n.data):a[d]=h}}catch(g){i={error:g}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}function V9(t){return/^(done|error)\./.test(t)}function mw(t){return!!(t instanceof Promise||t!==null&&(mt(t)||typeof t=="object")&&mt(t.then))}function L9(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function O9(t,e){var n,i,s=ft([[],[]],2),a=s[0],l=s[1];try{for(var c=st(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}function Dx(t,e){return lc(t.states,function(n,i){if(n){var s=(yt(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:Dx(n,s)}}})}function U9(t,e){return{current:e,states:Dx(t,e)}}function gw(t,e,n,i){var s=t&&n.reduce(function(a,l){var c,d,h=l.assignment,g={state:i,action:l,_event:e},E={};if(mt(h))E=h(a,e.data,g);else try{for(var T=st(Object.keys(h)),w=T.next();!w.done;w=T.next()){var x=w.value,M=h[x];E[x]=mt(M)?M(a,e.data,g):M}}catch(U){c={error:U}}finally{try{w&&!w.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var F9=function(){};function Ql(t){return Array.isArray(t)}function mt(t){return typeof t=="function"}function yt(t){return typeof t=="string"}function Mx(t,e){if(t)return yt(t)?{type:zy,name:t,predicate:e?e[t]:void 0}:mt(t)?{type:zy,name:t.name,predicate:t}:t}function q9(t){try{return"subscribe"in t&&mt(t.subscribe)}catch{return!1}}var ao=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();kd={},kd[ao]=function(){return this},kd[Symbol.observable]=function(){return this};function ql(t){return!!t&&"__xstatenode"in t}function B9(t){return!!t&&typeof t.send=="function"}function Ip(t,e){return yt(t)||typeof t=="number"?me({type:t},e):t}function qn(t,e){if(!yt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Ip(t);return me({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function cl(t,e){var n=Nx(e).map(function(i){return typeof i>"u"||typeof i=="string"||ql(i)?{target:i,event:t}:me(me({},i),{event:t})});return n}function z9(t){if(!(t===void 0||t===D9))return mr(t)}function Px(t,e,n,i,s){var a=t.options.guards,l={state:s,cond:e,_event:i};if(e.type===zy)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,l);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function kx(t){return typeof t=="string"?{type:t}:t}function ch(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function Vd(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Gy(t){return(t.type===tf||t.type===Cp&&t.to===Fl.Internal)&&typeof t.delay!="number"}var Nl=qn({type:I9});function Ky(t,e){return e&&e[t]||void 0}function Fc(t,e){var n;if(yt(t)||typeof t=="number"){var i=Ky(t,e);mt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(mt(t))n={type:t.name||t.toString(),exec:t};else{var i=Ky(t.type,e);if(mt(i))n=me(me({},t),{exec:i});else if(i){var s=i.type||t.type;n=me(me(me({},i),t),{type:s})}else n=t}return n}var lo=function(t,e){if(!t)return[];var n=Ql(t)?t:[t];return n.map(function(i){return Fc(i,e)})};function S0(t){var e=Fc(t);return me(me({id:yt(t)?t:e.id},e),{type:e.type})}function H9(t,e){return{type:tf,event:typeof t=="function"?t:Ip(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function G9(t,e,n,i){var s={_event:n},a=qn(mt(t.event)?t.event(e,n.data,s):t.event),l;if(yt(t.delay)){var c=i&&i[t.delay];l=mt(c)?c(e,n.data,s):c}else l=mt(t.delay)?t.delay(e,n.data,s):t.delay;return me(me({},t),{type:tf,_event:a,delay:l})}function K9(t,e){return{to:e?e.to:void 0,type:Cp,event:mt(t)?t:Ip(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:mt(t)?t.name:xx(t)}}function $9(t,e,n,i){var s={_event:n},a=qn(mt(t.event)?t.event(e,n.data,s):t.event),l;if(yt(t.delay)){var c=i&&i[t.delay];l=mt(c)?c(e,n.data,s):c}else l=mt(t.delay)?t.delay(e,n.data,s):t.delay;var d=mt(t.to)?t.to(e,n.data,s):t.to;return me(me({},t),{to:d,_event:a,event:a.data,delay:l})}var J9=function(t,e,n){return me(me({},t),{value:yt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Y9=function(t){return{type:wx,sendId:t}};function j9(t){var e=S0(t);return{type:It.Start,activity:e,exec:void 0}}function W9(t){var e=mt(t)?t:S0(t);return{type:It.Stop,activity:e,exec:void 0}}function Q9(t,e,n){var i=mt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:It.Stop,activity:s};return a}var X9=function(t){return{type:E0,assignment:t}};function Z9(t,e){var n=e?"#".concat(e):"";return"".concat(It.After,"(").concat(t,")").concat(n)}function Ld(t,e){var n="".concat(It.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function fh(t,e){var n="".concat(It.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function uc(t,e){var n="".concat(It.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var eB=function(t){var e,n,i=[];try{for(var s=st(t),a=s.next();!a.done;a=s.next())for(var l=a.value,c=0;c<l.actions.length;){if(l.actions[c].type===E0){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function zh(t,e,n,i,s,a,l){l===void 0&&(l=!1);var c=l?[]:eB(s),d=c.length?gw(n,i,c,e):n,h=l?[n]:void 0,g=[];function E(x,M){var U;switch(M.type){case tf:{var H=G9(M,d,i,t.options.delays);return a&&typeof H.delay=="number"&&a(H,d,i),H}case Cp:var F=$9(M,d,i,t.options.delays);return a&&F.to!==Fl.Internal&&(x==="entry"?g.push(F):a(F,d,i)),F;case Cx:{var q=J9(M,d,i);return a==null||a(q,d,i),q}case x9:{var J=M,te=(U=J.conds.find(function(ee){var ce=Mx(ee.cond,t.options.guards);return!ce||Px(t,ce,d,i,a?void 0:e)}))===null||U===void 0?void 0:U.actions;if(!te)return[];var G=ft(zh(t,e,d,i,[{type:x,actions:lo(mr(te),t.options.actions)}],a,l),2),I=G[0],R=G[1];return d=R,h==null||h.push(d),I}case N9:{var te=M.get(d,i.data);if(!te)return[];var N=ft(zh(t,e,d,i,[{type:x,actions:lo(mr(te),t.options.actions)}],a,l),2),V=N[0],P=N[1];return d=P,h==null||h.push(d),V}case _0:{var q=Q9(M,d,i);return a==null||a(q,n,i),q}case E0:{d=gw(d,i,[M],a?void 0:e),h==null||h.push(d);break}default:var L=Fc(M,t.options.actions),O=L.exec;if(a)a(L,d,i);else if(O&&h){var Ie=h.length-1,ve=me(me({},L),{exec:function(ee){for(var ce=[],pe=1;pe<arguments.length;pe++)ce[pe-1]=arguments[pe];O.apply(void 0,Lt([h[Ie]],ft(ce),!1))}});L=ve}return L}}function T(x){var M,U,H=[];try{for(var F=st(x.actions),q=F.next();!q.done;q=F.next()){var J=q.value,te=E(x.type,J);te&&(H=H.concat(te))}}catch(G){M={error:G}}finally{try{q&&!q.done&&(U=F.return)&&U.call(F)}finally{if(M)throw M.error}}return g.forEach(function(G){a(G,d,i)}),g.length=0,H}var w=Kt(s.map(T));return[w,d]}var _l=function(t,e){var n=e(t);return n};function Vx(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ao]=function(){return this},e}function tB(t,e,n,i){var s,a=kx(t.src),l=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?Bh(t.data,n,i):void 0,d=l?Lx(l,t.id,c):Vx(t.id);return d.meta=t,d}function Lx(t,e,n){var i=Vx(e);if(i.deferred=!0,ql(t)){var s=i.state=_l(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function nB(t){try{return typeof t.send=="function"}catch{return!1}}function iB(t){return nB(t)&&"id"in t}function rB(t){var e;return me((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ao]=function(){return this},e),t)}var Hh=function(t){return t.type==="atomic"||t.type==="final"};function Ox(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function qc(t){return Ox(t).filter(function(e){return e.type!=="history"})}function Ux(t){var e=[t];return Hh(t)?e:e.concat(Kt(qc(t).map(Ux)))}function cc(t,e){var n,i,s,a,l,c,d,h,g=new Set(t),E=$y(g),T=new Set(e);try{for(var w=st(T),x=w.next();!x.done;x=w.next())for(var M=x.value,U=M.parent;U&&!T.has(U);)T.add(U),U=U.parent}catch(N){n={error:N}}finally{try{x&&!x.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}var H=$y(T);try{for(var F=st(T),q=F.next();!q.done;q=F.next()){var M=q.value;if(M.type==="compound"&&(!H.get(M)||!H.get(M).length))E.get(M)?E.get(M).forEach(function(V){return T.add(V)}):M.initialStateNodes.forEach(function(V){return T.add(V)});else if(M.type==="parallel")try{for(var J=(l=void 0,st(qc(M))),te=J.next();!te.done;te=J.next()){var G=te.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(V){return T.add(V)}):G.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{te&&!te.done&&(c=J.return)&&c.call(J)}finally{if(l)throw l.error}}}}catch(N){s={error:N}}finally{try{q&&!q.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=st(T),R=I.next();!R.done;R=I.next())for(var M=R.value,U=M.parent;U&&!T.has(U);)T.add(U),U=U.parent}catch(N){d={error:N}}finally{try{R&&!R.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function Fx(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Hh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=Fx(a,e)}),s}function $y(t){var e,n,i=new Map;try{for(var s=st(t),a=s.next();!a.done;a=s.next()){var l=a.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function sB(t,e){var n=cc([t],e);return Fx(t,$y(n))}function fc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function oB(t){return Lt([],ft(new Set(Kt(Lt([],ft(t.map(function(e){return e.ownEvents})),!1)))),!1)}function dh(t,e){return e.type==="compound"?qc(e).some(function(n){return n.type==="final"&&fc(t,n)}):e.type==="parallel"?qc(e).every(function(n){return dh(t,n)}):!1}function aB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function yw(t){return new Set(Kt(t.map(function(e){return e.tags})))}function qx(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(yt(t)||yt(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return qx(t[s],e[s])})}function lB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function uB(t,e){var n=t.exec,i=me(me({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var ir=(function(){function t(e){var n=this,i;this.actions=[],this.activities=hw,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||hw,this.meta=aB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return oB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Nl;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Nl;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),yt(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Lt([],ft(s.map(function(a){return i.toStrings(e[a],n).map(function(l){return a+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=v0(e,["configuration","transitions","tags","machine"]);return me(me({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return T0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;F9(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),cB={deferEvents:!1},vw=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=me(me({},cB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),Yg=new Map,fB=0,Wu={bookId:function(){return"x:".concat(fB++)},register:function(t,e){return Yg.set(t,e),t},get:function(t){return Yg.get(t)},free:function(t){Yg.delete(t)}};function A0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function dB(){var t=A0();if(t&&"__xstate__"in t)return t.__xstate__}function hB(t){if(A0()){var e=dB();e&&e.register(t)}}function pB(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,l=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(g){return g.next(n)})}a=!1}},c=rB({id:e.id,send:function(h){s.push(h),l()},getSnapshot:function(){return n},subscribe:function(h,g,E){var T=ch(h,g,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var mB={sync:!1,autoForward:!1},Mn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Mn||(Mn={}));var gB=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Mn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(g,E){if(Ql(g))return i.batch(g),i.state;var T=qn(Ip(g,E));if(i.status===Mn.Stopped)return i.state;if(i.status!==Mn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var w=i._nextState(T);i.update(w,T)}),i._state},this.sendTo=function(g,E,T){var w=i.parent&&(E===Fl.Parent||i.parent.id===E),x=w?i.parent:yt(E)?E===Fl.Internal?i:i.children.get(E)||Wu.get(E):B9(E)?E:void 0;if(!x){if(!w)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in x){if(i.status!==Mn.Stopped||i.parent!==x||i.state.done){var M=me(me({},g),{name:g.name===R9?"".concat(uc(i.id)):g.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,M]):x.send(M)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,g.data]):x.send(g.data)},this._exec=function(g,E,T,w){w===void 0&&(w=i.machine.options.actions);var x=g.exec||Ky(g.type,w),M=mt(x)?x:x?x.exec:g.exec;if(M)try{return M(E,T.data,i.machine.config.predictableActionArguments?{action:g,_event:T}:{action:g,state:i.state,_event:T})}catch(Ie){throw i.parent&&i.parent.send({type:"xstate.error",data:Ie}),Ie}switch(g.type){case tf:{var U=g;i.defer(U);break}case Cp:var H=g;if(typeof H.delay=="number"){i.defer(H);return}else H.to?i.sendTo(H._event,H.to,T===Nl):i.send(H._event);break;case wx:i.cancel(g.sendId);break;case qy:{if(i.status!==Mn.Running)return;var F=g.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===It.Invoke){var q=kx(F.src),J=i.machine.options.services?i.machine.options.services[q.type]:void 0,te=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!J)return;var R=G?Bh(G,E,T):void 0;if(typeof J=="string")return;var N=mt(J)?J(E,T.data,{data:R,src:q,meta:F.meta}):J;if(!N)return;var V=void 0;ql(N)&&(N=R?N.withContext(R):N,V={autoForward:I}),i.spawn(N,te,V)}else i.spawnActivity(F);break}case _0:{i.stopChild(g.activity.id);break}case Cx:var P=g,L=P.label,O=P.value;L?i.logger(L,O):i.logger(O);break}};var s=me(me({},t.defaultOptions),n),a=s.clock,l=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=l,this.clock=a,this.parent=c,this.options=s,this.scheduler=new vw({deferEvents:this.options.deferEvents}),this.sessionId=Wu.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:_l(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=st(e.actions),l=a.next();!l.done;l=a.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,l,c,d,h,g,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Nl)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(N){E.state.children[N.id]=N}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var w=st(this.eventListeners),x=w.next();!x.done;x=w.next()){var M=x.value;M(e.event)}}catch(N){i={error:N}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}try{for(var U=st(this.listeners),H=U.next();!H.done;H=U.next()){var M=H.value;M(e,e.event)}}catch(N){a={error:N}}finally{try{H&&!H.done&&(l=U.return)&&l.call(U)}finally{if(a)throw a.error}}try{for(var F=st(this.contextListeners),q=F.next();!q.done;q=F.next()){var J=q.value;J(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){c={error:N}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var te=e.configuration.find(function(N){return N.type==="final"&&N.parent===E.machine}),G=te&&te.doneData?Bh(te.doneData,e.context,n):void 0;this._doneEvent=fh(this.id,G);try{for(var I=st(this.doneListeners),R=I.next();!R.done;R=I.next()){var M=R.value;M(this._doneEvent)}}catch(N){h={error:N}}finally{try{R&&!R.done&&(g=I.return)&&g.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Wu.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Mn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=ch(e,n,i);this.listeners.add(a.next),this.status!==Mn.NotStarted&&a.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),a.complete()};return this.status===Mn.Stopped?a.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Mn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Mn.Running)return this;this.machine._init(),Wu.register(this.sessionId,this),this.initialized=!0,this.status=Mn.Running;var i=e===void 0?this.initialState:_l(this,function(){return lB(e)?n.machine.resolveState(e):n.machine.resolveState(ir.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Nl)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){mt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,l,c,d,h,g;try{for(var E=st(this.listeners),T=E.next();!T.done;T=E.next()){var w=T.value;this.listeners.delete(w)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var x=st(this.stopListeners),M=x.next();!M.done;M=x.next()){var w=M.value;w(),this.stopListeners.delete(w)}}catch(I){i={error:I}}finally{try{M&&!M.done&&(s=x.return)&&s.call(x)}finally{if(i)throw i.error}}try{for(var U=st(this.contextListeners),H=U.next();!H.done;H=U.next()){var w=H.value;this.contextListeners.delete(w)}}catch(I){a={error:I}}finally{try{H&&!H.done&&(l=U.return)&&l.call(U)}finally{if(a)throw a.error}}try{for(var F=st(this.doneListeners),q=F.next();!q.done;q=F.next()){var w=q.value;this.doneListeners.delete(w)}}catch(I){c={error:I}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Mn.Stopped,this._initialState=void 0;try{for(var J=st(Object.keys(this.delayedEventsMap)),te=J.next();!te.done;te=J.next()){var G=te.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{te&&!te.done&&(g=J.return)&&g.call(J)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new vw({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=qn({type:"xstate.stop"}),a=_l(e,function(){var l=Kt(Lt([],ft(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return lo(E.onExit,e.machine.options.actions)})),c=ft(zh(e.machine,e.state,e.state.context,s,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],g=new ir({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!Gy(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return g.changed=!0,g});e.update(a,s),e._stopChildren(),Wu.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Mn.NotStarted&&this.options.deferEvents)){if(this.status!==Mn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,l=n.state,c=!1,d=[],h=function(w){var x=qn(w);n.forward(x),l=_l(n,function(){return n.machine.transition(l,x,void 0,i||void 0)}),d.push.apply(d,Lt([],ft(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(M){return uB(M,l)})),!1)),c=c||!!l.changed};try{for(var g=st(e),E=g.next();!E.done;E=g.next()){var T=E.value;h(T)}}catch(w){s={error:w}}finally{try{E&&!E.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}l.changed=c,l.actions=d,n.update(l,qn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=qn(e);if(s.name.indexOf(dw)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(dw)===0}))throw s.data.data;var a=_l(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=st(this.forwardTo),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),mt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Mn.Running)return Lx(e,n);if(mw(e))return this.spawnPromise(Promise.resolve(e),n);if(mt(e))return this.spawnCallback(e,n);if(iB(e))return this.spawnActor(e,n);if(q9(e))return this.spawnObservable(e,n);if(ql(e))return this.spawnMachine(e,me(me({},i),{id:n}));if(L9(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,me(me({},this.options),{parent:this,id:n.id||e.id})),a=me(me({},mB),n);a.sync&&s.onTransition(function(c){i.send(Ix,{state:c,id:s.id})});var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(qn(c,{origin:s.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=pB(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,l;e.then(function(d){a||(l=d,s.removeChild(n),s.send(qn(fh(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=uc(n,d);try{s.send(qn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,g){var E=ch(d,h,g),T=!1;return e.then(function(w){T||(E.next(w),!T&&E.complete())},function(w){T||E.error(w)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[ao]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,l=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(w){return w(T)}),!a&&s.send(qn(T,{origin:n}))},g;try{g=e(h,function(T){l.add(T)})}catch(T){this.send(uc(n,T))}if(mw(g))return this.spawnPromise(g,n);var E=(i={id:n,send:function(T){return l.forEach(function(w){return w(T)})},subscribe:function(T){var w=ch(T);return c.add(w.next),{unsubscribe:function(){c.delete(w.next)}}},stop:function(){a=!0,mt(g)&&g()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[ao]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,l=e.subscribe(function(d){a=d,s.send(qn(d,{origin:n}))},function(d){s.removeChild(n),s.send(qn(uc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(qn(fh(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,g){return e.subscribe(d,h,g)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[ao]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[ao]=function(){return this},i))},t.prototype.attachDev=function(){var e=A0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(me(me({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:me({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}hB(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ao]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Mn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Bx,t})();function Bx(t,e){var n=new gB(t,e);return n}function yB(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Od(t){return me(me({type:By},t),{toJSON:function(){t.onDone,t.onError;var e=v0(t,["onDone","onError"]);return me(me({},e),{type:By,src:yB(t.src)})}})}var Ud="",Jy="#",jg="*",fl={},dl=function(t){return t[0]===Jy},vB=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},_B=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(vB(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Rx),this.id=this.config.id||Lt([this.machine.key],ft(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?lc(this.config.states,function(h,g){var E,T=new t(h,{},void 0,{parent:a,key:g});return Object.assign(a.idMap,me((E={},E[T.id]=T,E),T.idMap)),T}):fl;var c=0;function d(h){var g,E;h.order=c++;try{for(var T=st(Ox(h)),w=T.next();!w.done;w=T.next()){var x=w.value;d(x)}}catch(M){g={error:M}}finally{try{w&&!w.done&&(E=T.return)&&E.call(T)}finally{if(g)throw g.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var g=h.event;return g===Ud}):Ud in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=mr(this.config.entry||this.config.onEntry).map(function(h){return Fc(h)}),this.onExit=mr(this.config.exit||this.config.onExit).map(function(h){return Fc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=mr(this.config.invoke).map(function(h,g){var E,T;if(ql(h)){var w=Vd(a.id,g);return a.machine.options.services=me((E={},E[w]=h,E),a.machine.options.services),Od({src:w,id:w})}else if(yt(h.src)){var w=h.id||Vd(a.id,g);return Od(me(me({},h),{id:w,src:h.src}))}else if(ql(h.src)||mt(h.src)){var w=h.id||Vd(a.id,g);return a.machine.options.services=me((T={},T[w]=h.src,T),a.machine.options.services),Od(me(me({id:w},h),{src:w}))}else{var x=h.src;return Od(me(me({id:Vd(a.id,g)},h),{src:x}))}}),this.activities=mr(this.config.activities).concat(this.invoke).map(function(h){return S0(h)}),this.transition=this.transition.bind(this),this.tags=mr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Ux(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:me(me({},s),e.actions),activities:me(me({},a),e.activities),guards:me(me({},l),e.guards),services:me(me({},c),e.services),delays:me(me({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return mt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:lc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Ud,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===jg});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,l){var c=mt(a)?"".concat(e.id,":delay[").concat(l,"]"):a,d=Z9(c,e.id);return e.onEntry.push(K9(d,{delay:a})),e.onExit.push(Y9(d)),d},s=Ql(n)?n.map(function(a,l){var c=i(a.delay,l);return me(me({},a),{event:c})}):Kt(Object.keys(n).map(function(a,l){var c=n[a],d=yt(c)?{target:c}:c,h=isNaN(+a)?a:+a,g=i(h,l);return mr(d).map(function(E){return me(me({},E),{event:g,delay:h})})}));return s.map(function(a){var l=a.delay;return me(me({},e.formatTransition(a)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof ir?e.value:Ec(e,this.delimiter);if(yt(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var l=Object.keys(s),c=[this];return c.push.apply(c,Lt([],ft(Kt(l.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=xx(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof ir?e:ir.create(e),i=Array.from(cc([],this.getStateNodes(n.value)));return new ir(me(me({},n),{value:this.resolve(n.value),configuration:i,done:dh(i,this),tags:yw(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),l=a._transition(e[s[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var s,a,l={};try{for(var c=st(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,g=e[h];if(g){var E=this.getStateNode(h),T=E._transition(g,n,i);T&&(l[h]=T)}}}catch(H){s={error:H}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var w=Object.keys(l).map(function(H){return l[H]}),x=Kt(w.map(function(H){return H.transitions})),M=w.some(function(H){return H.transitions.length>0});if(!M)return this.next(n,i);var U=Kt(Object.keys(l).map(function(H){return l[H].configuration}));return{transitions:x,exitSet:Kt(w.map(function(H){return H.exitSet})),configuration:U,source:n,actions:Kt(Object.keys(l).map(function(H){return l[H].actions}))}},t.prototype._transition=function(e,n,i){return yt(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,qn(n))},t.prototype.next=function(e,n){var i,s,a=this,l=n.name,c=[],d=[],h;try{for(var g=st(this.getCandidates(l)),E=g.next();!E.done;E=g.next()){var T=E.value,w=T.cond,x=T.in,M=e.context,U=x?yt(x)&&dl(x)?e.matches(Ec(this.getStateNodeById(x).path,this.delimiter)):T0(Ec(x,this.delimiter),P9(this.path.slice(0,-2))(e.value)):!0,H=!1;try{H=!w||Px(this.machine,w,M,n,e)}catch(J){throw new Error("Unable to evaluate guard '".concat(w.name||w.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(J.message))}if(H&&U){T.target!==void 0&&(d=T.target),c.push.apply(c,Lt([],ft(T.actions),!1)),h=T;break}}}catch(J){i={error:J}}finally{try{E&&!E.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=Kt(d.map(function(J){return a.getRelativeStateNodes(J,e.historyValue)})),q=!!h.internal;return{transitions:[h],exitSet:q?[]:Kt(d.map(function(J){return a.getPotentiallyReenteringNodes(J)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,l,c){var d,h,g,E,T=this,w=l?cc([],this.getStateNodes(l.value)):[],x=new Set;try{for(var M=st(Array.from(e).sort(function(P,L){return P.order-L.order})),U=M.next();!U.done;U=M.next()){var H=U.value;(!fc(w,H)||fc(i.exitSet,H)||H.parent&&x.has(H.parent))&&x.add(H)}}catch(P){d={error:P}}finally{try{U&&!U.done&&(h=M.return)&&h.call(M)}finally{if(d)throw d.error}}try{for(var F=st(w),q=F.next();!q.done;q=F.next()){var H=q.value;(!fc(e,H)||fc(i.exitSet,H.parent))&&i.exitSet.push(H)}}catch(P){g={error:P}}finally{try{q&&!q.done&&(E=F.return)&&E.call(F)}finally{if(g)throw g.error}}i.exitSet.sort(function(P,L){return L.order-P.order});var J=Array.from(x).sort(function(P,L){return P.order-L.order}),te=new Set(i.exitSet),G=Kt(J.map(function(P){var L=[];if(P.type!=="final")return L;var O=P.parent;if(!O.parent)return L;L.push(Ld(P.id,P.doneData),Ld(O.id,P.doneData?Bh(P.doneData,s,a):void 0));var Ie=O.parent;return Ie.type==="parallel"&&qc(Ie).every(function(ve){return dh(i.configuration,ve)})&&L.push(Ld(Ie.id)),L})),I=J.map(function(P){var L=P.onEntry,O=P.activities.map(function(Ie){return j9(Ie)});return{type:"entry",actions:lo(c?Lt(Lt([],ft(L),!1),ft(O),!1):Lt(Lt([],ft(O),!1),ft(L),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(P){return H9(P)})}),R=Array.from(te).map(function(P){return{type:"exit",actions:lo(Lt(Lt([],ft(P.onExit),!1),ft(P.activities.map(function(L){return W9(L)})),!1),T.machine.options.actions)}}),N=R.concat({type:"transition",actions:lo(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=lo(Kt(Lt([],ft(e),!1).sort(function(P,L){return L.order-P.order}).map(function(P){return P.onExit})),this.machine.options.actions).filter(function(P){return!Gy(P)});return N.concat({type:"stop",actions:V})}return N},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=qn(n),l;if(e instanceof ir)l=i===void 0?e:this.resolveState(ir.from(e,i));else{var c=yt(e)?this.resolve(qh(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(ir.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!V9(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(l.value,l,a)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},g=cc([],this.getStateNodes(l.value)),E=h.configuration.length?cc(g,h.configuration):g;return h.configuration=Lt([],ft(E),!1),this.resolveTransition(h,l,l.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,l=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,Lt([],ft(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var l,c,d,h,g=this;a===void 0&&(a=Nl);var E=e.configuration,T=!n||e.transitions.length>0,w=T?e.configuration:n?n.configuration:[],x=dh(w,this),M=T?sB(this.machine,E):void 0,U=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,H=this.getActions(new Set(w),x,e,i,a,n,s),F=n?me({},n.activities):{};try{for(var q=st(H),J=q.next();!J.done;J=q.next()){var te=J.value;try{for(var G=(d=void 0,st(te.actions)),I=G.next();!I.done;I=G.next()){var R=I.value;R.type===qy?F[R.activity.id||R.activity.type]=R:R.type===_0&&(F[R.activity.id||R.activity.type]=!1)}}catch(he){d={error:he}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(he){l={error:he}}finally{try{J&&!J.done&&(c=q.return)&&c.call(q)}finally{if(l)throw l.error}}var N=ft(zh(this,n,i,a,H,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=N[0],P=N[1],L=ft(O9(V,Gy),2),O=L[0],Ie=L[1],ve=V.filter(function(he){var we;return he.type===qy&&((we=he.activity)===null||we===void 0?void 0:we.type)===By}),ee=ve.reduce(function(he,we){return he[we.activity.id]=tB(we.activity,g.machine,P,a),he},n?me({},n.children):{}),ce=new ir({value:M||n.value,context:P,_event:a,_sessionid:n?n._sessionid:null,historyValue:M?U?U9(U,M):void 0:n?n.historyValue:void 0,history:!M||e.source?n:void 0,actions:M?Ie:[],activities:M?F:n?n.activities:{},events:[],configuration:w,transitions:e.transitions,children:ee,done:x,tags:yw(w),machine:this}),pe=i!==P;ce.changed=a.name===Ix||pe;var Re=ce.history;Re&&delete Re.history;var ge=!x&&(this._transient||E.some(function(he){return he._transient}));if(!T&&(!ge||a.name===Ud))return ce;var B=ce;if(!x)for(ge&&(B=this.resolveRaisedTransition(B,{type:C9},a,s));O.length;){var Z=O.shift();B=this.resolveRaisedTransition(B,Z._event,a,s)}var fe=B.changed||(Re?!!B.actions.length||pe||typeof Re.value!=typeof B.value||!qx(B.value,Re.value):void 0);return B.changed=fe,B.history=Re,B},t.prototype.getStateNode=function(e){if(dl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=dl(e)?e.slice(Jy.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&dl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Hy(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||fl;switch(this.type){case"parallel":return lc(this.initialStateValue,function(a,l){return a?i.getStateNode(l).resolve(e[l]||a):fl});case"compound":if(yt(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?lc(e,function(a,l){return a?i.getStateNode(l).resolve(a):fl}):this.initialStateValue||{};default:return e||fl}},t.prototype.getResolvedPath=function(e){if(dl(e)){var n=this.machine.idMap[e.slice(Jy.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Hy(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=pw(this.states,function(i){return i.initialStateValue||fl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Hh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;yt(n.target)?e=dl(n.target)?qh(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Hh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=uh(this.initialStateValue);return Kt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=ft(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:pw(this.states,function(n,i){if(!e)return n.historyValue();var s=yt(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?Kt(uh(s).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var a=k9(i.path,"states")(e).current;return yt(a)?[i.getStateNode(a)]:Kt(uh(a).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Kt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,l=new Set(this.ownEvents);if(a)try{for(var c=st(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,g=a[h];if(g.states)try{for(var E=(i=void 0,st(g.events)),T=E.next();!T.done;T=E.next()){var w=T.value;l.add("".concat(w))}}catch(x){i={error:x}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(x){e={error:x}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!yt(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(a);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=z9(e.target),s="internal"in e?e.internal:i?i.some(function(d){return yt(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,l=this.resolveTarget(i),c=me(me({},e),{actions:lo(mr(e.actions)),cond:Mx(e.cond,a),target:l,source:this,internal:s,eventType:e.event,toJSON:function(){return me(me({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,l=jg,c=a[l],d=c===void 0?[]:c,h=v0(a,[typeof l=="symbol"?l:l+""]);s=Kt(Object.keys(h).map(function(F){var q=cl(F,h[F]);return q}).concat(cl(jg,d)))}var g=this.config.always?cl("",this.config.always):[],E=this.config.onDone?cl(String(Ld(this.id)),this.config.onDone):[],T=Kt(this.invoke.map(function(F){var q=[];return F.onDone&&q.push.apply(q,Lt([],ft(cl(String(fh(F.id)),F.onDone)),!1)),F.onError&&q.push.apply(q,Lt([],ft(cl(String(uc(F.id)),F.onError)),!1)),q})),w=this.after,x=Kt(Lt(Lt(Lt(Lt([],ft(E),!1),ft(T),!1),ft(s),!1),ft(g),!1).map(function(F){return mr(F).map(function(q){return i.formatTransition(q)})}));try{for(var M=st(w),U=M.next();!U.done;U=M.next()){var H=U.value;x.push(H)}}catch(F){e={error:F}}finally{try{U&&!U.done&&(n=M.return)&&n.call(M)}finally{if(e)throw e.error}}return x},t})();function EB(t,e,n){return n===void 0&&(n=t.context),new _B(t,e,n)}var TB=X9,Yy;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(Yy||(Yy={}));var Tc=$.useLayoutEffect;function _w(t){var e=$.useRef();return e.current||(e.current={v:t()}),e.current.v}var SB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},AB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function bB(t,e){var n,i,s=SB([[],[]],2),a=s[0],l=s[1];try{for(var c=AB(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}var Qu=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},Ew=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function Tw(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function wB(t){var e=$.useRef([]),n=$.useRef([]);Tc(function(){var i=t.subscribe(function(s){var a,l;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=Qu(bB(c,function(E){return E.exec.__effect===Yy.Effect}),2),h=d[0],g=d[1];(a=e.current).push.apply(a,Ew([],Qu(h.map(function(E){return[E,s]})),!1)),(l=n.current).push.apply(l,Ew([],Qu(g.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),Tc(function(){for(;n.current.length;){var i=Qu(n.current.shift(),2),s=i[0],a=i[1];Tw(s,a)}}),$.useEffect(function(){for(;e.current.length;){var i=Qu(e.current.shift(),2),s=i[0],a=i[1];Tw(s,a)}})}var Sc=function(){return Sc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Sc.apply(this,arguments)},CB=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function IB(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function RB(t,e,n){e===void 0&&(e={});var i=_w(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,l=e.actions,c=e.activities,d=e.services,h=e.delays,g=e.state,E=CB(e,["context","guards","actions","activities","services","delays","state"]),T=_w(function(){var w={context:s,guards:a,actions:l,activities:c,services:d,delays:h},x=i.withConfig(w,function(){return Sc(Sc({},i.context),s)});return Bx(x,Sc({deferEvents:!0},E))});return Tc(function(){var w;return n&&(w=T.subscribe(IB(n))),function(){w==null||w.unsubscribe()}},[n]),Tc(function(){return T.start(g?ir.create(g):void 0),function(){T.stop()}},[]),Tc(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[l,a,c,d,h]),wB(T),T}var xB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function NB(t,e){e===void 0&&(e={});var n=$.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=RB(t,e,n),s=xB($.useState(function(){var c=i.machine.initialState;return e.state?ir.create(e.state):c}),2),a=s[0],l=s[1];return[a,i.send,i]}function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qt.apply(null,arguments)}function Dl(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Xe={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Xe.str(t)||Xe.num(t))return t===e;if(Xe.obj(t)&&Xe.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Xe.und(n)?t===e:!0}};function DB(t,e){return n=>(Xe.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function MB(){const t=$.useState(!1),e=t[1];return $.useCallback(()=>e(i=>!i),[])}function ia(t,e){return Xe.und(t)||Xe.nul(t)?e:t}function Fd(t){return Xe.und(t)?[]:Xe.arr(t)?t:[t]}function Tl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Xe.fun(t)?t(...n):t}function PB(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,Dl(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Wg(t){const e=PB(t);if(Xe.und(e))return Qt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Xe.und(e[s])?Qt({},i,{[s]:t[s]}):i,{});return Qt({to:e},n)}function kB(t,e){return e&&(Xe.fun(e)?e(t):Xe.obj(e)&&(e.current=t)),t}class gr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class jy extends gr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof gr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof gr&&e.removeChild(this))}}class zx extends gr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof gr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof gr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof gr)||(n[i]=s instanceof gr?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let b0;function VB(t,e){b0={fn:t,transform:e}}let Hx;function LB(t){Hx=t}let Gx=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Gh;function OB(t){Gh=t}let Kx=()=>Date.now(),UB=t=>t.current,$x;function FB(t){$x=t}class qB extends zx{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Qt({},e,{style:$x(e.style)}):e,this.update=n,this.attach()}}const BB=t=>Xe.fun(t)&&!(t.prototype instanceof Sn.Component),zB=t=>$.forwardRef((n,i)=>{const s=MB(),a=$.useRef(!0),l=$.useRef(null),c=$.useRef(null),d=$.useCallback(T=>{const w=l.current,x=()=>{let M=!1;c.current&&(M=b0.fn(c.current,l.current.getAnimatedValue())),(!c.current||M===!1)&&s()};l.current=new qB(T,x),w&&w.detach()},[]);$.useEffect(()=>()=>{a.current=!1,l.current&&l.current.detach()},[]),$.useImperativeHandle(i,()=>UB(c)),d(n);const h=l.current.getValue();h.scrollTop,h.scrollLeft;const g=Dl(h,["scrollTop","scrollLeft"]),E=BB(t)?void 0:T=>c.current=kB(T,i);return Sn.createElement(t,Qt({},g,{ref:E}))});let Ac=!1;const fa=new Set,Jx=()=>{if(!Ac)return!1;let t=Kx();for(let e of fa){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,l;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],g=s.toValues[c],E=d.lastPosition,T=g instanceof gr,w=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(g=g.getValue()),s.immediate){d.setValue(g),d.done=!0;continue}if(typeof h=="string"||typeof g=="string"){d.setValue(g),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(g-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+w/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(g=E);else{l=d.lastTime!==void 0?d.lastTime:t,w=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>l+64&&(l=t);let x=Math.floor(t-l);for(let F=0;F<x;++F){let q=-s.tension*(E-g),J=-s.friction*w,te=(q+J)/s.mass;w=w+te*1/1e3,E=E+w*1/1e3}let M=s.clamp&&s.tension!==0?h<g?E>g:E<g:!1,U=Math.abs(w)<=s.precision,H=s.tension!==0?Math.abs(g-E)<=s.precision:!0;a=M||U&&H,d.lastVelocity=w,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==g&&(E=g),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(fa.delete(e),e.stop(!0))}return fa.size?Gx(Jx):Ac=!1,Ac},HB=t=>{fa.has(t)||fa.add(t),Ac||(Ac=!0,Gx(Jx))},GB=t=>{fa.has(t)&&fa.delete(t)};function Kh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Kh({range:t,output:e,extrapolate:n});if(Gh&&typeof t.output[0]=="string")return Gh(t);const i=t,s=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const g=$B(h,a);return KB(h,a[g],a[g+1],s[g],s[g+1],d,l,c,i.map)}}function KB(t,e,n,i,s,a,l,c,d){let h=d?d(t):t;if(h<e){if(l==="identity")return h;l==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function $B(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Bl extends jy{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof jy&&!(e instanceof Bl)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Kh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Kh(e,n,i)}interpolate(e,n,i){return new Bl(this,e,n,i)}}const hl=(t,e,n)=>t&&new Bl(t,e,n),JB={default:{tension:170,friction:26}};function Yx(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>Yx(n,e))}class Wy extends gr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&Yx(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Bl(this,e,n,i)}}class YB extends jy{constructor(e){super(),this.payload=e.map(n=>new Wy(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Bl(this,e,n)}}let jB=0,WB=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=jB++}update(e){if(!e)return this;const n=Wg(e),i=n.delay,s=i===void 0?0:i,a=n.to,l=Dl(n,["delay","to"]);if(Xe.arr(a)||Xe.fun(a))this.queue.push(Qt({},l,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],g=d[1];const E=Qt({to:{[h]:g},delay:Tl(s,h)},l),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Qt({},c[E.delay],E,{to:Qt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,l=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Xe.obj(l)&&(this.merged=Qt({},l,this.merged)),Xe.obj(d)&&(this.merged=Qt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let l=s.delay,c=Dl(s,["delay"]);const d=g=>{a===i.length-1&&n===this.guid&&g&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Xe.arr(c.to)||Xe.fun(c.to);l?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},l):h?this.runAsync(c,d):this.diff(c).start(d)})}else Xe.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),HB(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&GB(this),this}runAsync(e,n){var i=this;e.delay;let s=Dl(e,["delay"]);const a=this.local;let l=Promise.resolve(void 0);if(Xe.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Qt({},s,Wg(s.to[d]));Xe.arr(h.config)&&(h.config=h.config[d]),l=l.then(()=>{if(a===this.guid)return new Promise(g=>this.diff(h).start(g))})}else if(Xe.fun(s.to)){let c=0,d;l=l.then(()=>s.to(h=>{const g=Qt({},s,Wg(h));if(Xe.arr(g.config)&&(g.config=g.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(g).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}l.then(n)}diff(e){this.props=Qt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,l=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,g=n.attach,E=n.reset,T=n.immediate;if(h){var w=[l,s];s=w[0],l=w[1]}this.merged=Qt({},s,this.merged,l),this.hasChanged=!1;let x=g&&g(this);if(this.animations=Object.entries(this.merged).reduce((M,U)=>{let H=U[0],F=U[1],q=M[H]||{};const J=Xe.num(F),te=Xe.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!Hx[F],G=Xe.arr(F),I=!J&&!G&&!te;let R=Xe.und(s[H])?F:s[H],N=J||G||te?F:1,V=Tl(d,H);x&&(N=x.animations[H].parent);let P=q.parent,L=q.interpolation,O=Fd(x?N.getPayload():N),Ie,ve=F;I&&(ve=Gh({range:[0,1],output:[F,F]})(1));let ee=L&&L.getValue();const pe=!Xe.und(P)&&q.animatedValues.some(Z=>!Z.done),Re=!Xe.equ(ve,ee),ge=!Xe.equ(ve,q.previous),B=!Xe.equ(V,q.config);if(E||ge&&Re||B){if(J||te)P=L=q.parent||new Wy(R);else if(G)P=L=q.parent||new YB(R);else if(I){let Z=q.interpolation&&q.interpolation.calc(q.parent.value);Z=Z!==void 0&&!E?Z:R,q.parent?(P=q.parent,P.setValue(0,!1)):P=new Wy(0);const fe={output:[Z,F]};q.interpolation?(L=q.interpolation,q.interpolation.updateConfig(fe)):L=P.interpolate(fe)}return O=Fd(x?N.getPayload():N),Ie=Fd(P.getPayload()),E&&!I&&P.setValue(R,!1),this.hasChanged=!0,Ie.forEach(Z=>{Z.startPosition=Z.value,Z.lastPosition=Z.value,Z.lastVelocity=pe?Z.lastVelocity:void 0,Z.lastTime=pe?Z.lastTime:void 0,Z.startTime=Kx(),Z.done=!1,Z.animatedStyles.clear()}),Tl(T,H)&&P.setValue(I?N:F,!1),Qt({},M,{[H]:Qt({},q,{name:H,parent:P,interpolation:L,animatedValues:Ie,toValues:O,previous:ve,config:V,fromValues:Fd(P.getValue()),immediate:Tl(T,H),initialVelocity:ia(V.velocity,0),clamp:ia(V.clamp,!1),precision:ia(V.precision,.01),tension:ia(V.tension,170),friction:ia(V.friction,26),mass:ia(V.mass,1),duration:V.duration,easing:ia(V.easing,Z=>Z),decay:V.decay})})}else return Re?M:(I&&(P.setValue(1,!1),L.updateConfig({output:[ve,ve]})),P.done=!0,this.hasChanged=!0,Qt({},M,{[H]:Qt({},M[H],{previous:ve})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let M in this.animations)this.interpolations[M]=this.animations[M].interpolation,this.values[M]=this.animations[M].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const QB=(t,e)=>{const n=$.useRef(!1),i=$.useRef(),s=Xe.fun(e),a=$.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let g;return[new Array(t).fill().map((E,T)=>{const w=new WB,x=s?Tl(e,T,w):e[T];return T===0&&(g=x.ref),w.update(x),g||w.start(),w}),g]},[t]),l=a[0],c=a[1];i.current=l,$.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(g=>new Promise(E=>g.start(E)))),stop:g=>i.current.forEach(E=>E.stop(g)),get controllers(){return i.current}}));const d=$.useMemo(()=>g=>i.current.map((E,T)=>{E.update(s?Tl(g,T,E):g[T]),c||E.start()}),[t]);$.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(g=>g.start())}),$.useEffect(()=>(n.current=!0,()=>i.current.forEach(g=>g.destroy())),[]);const h=i.current.map(g=>g.getValues());return s?[h,d,g=>i.current.forEach(E=>E.pause(g))]:h},XB=t=>{const e=Xe.fun(t),n=QB(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class ZB extends zx{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof gr)&&(e=b0.transform(e)),this.payload=e}}const $h={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_r="[-+]?\\d*\\.?\\d+",Jh=_r+"%";function Rp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const ez=new RegExp("rgb"+Rp(_r,_r,_r)),tz=new RegExp("rgba"+Rp(_r,_r,_r,_r)),nz=new RegExp("hsl"+Rp(_r,Jh,Jh)),iz=new RegExp("hsla"+Rp(_r,Jh,Jh,_r)),rz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,sz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oz=/^#([0-9a-fA-F]{6})$/,az=/^#([0-9a-fA-F]{8})$/;function lz(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=oz.exec(t))?parseInt(e[1]+"ff",16)>>>0:$h.hasOwnProperty(t)?$h[t]:(e=ez.exec(t))?(pl(e[1])<<24|pl(e[2])<<16|pl(e[3])<<8|255)>>>0:(e=tz.exec(t))?(pl(e[1])<<24|pl(e[2])<<16|pl(e[3])<<8|bw(e[4]))>>>0:(e=rz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=az.exec(t))?parseInt(e[1],16)>>>0:(e=sz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=nz.exec(t))?(Sw(Aw(e[1]),qd(e[2]),qd(e[3]))|255)>>>0:(e=iz.exec(t))?(Sw(Aw(e[1]),qd(e[2]),qd(e[3]))|bw(e[4]))>>>0:null}function Qg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Sw(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=Qg(s,i,t+1/3),l=Qg(s,i,t),c=Qg(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function pl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Aw(t){return(parseFloat(t)%360+360)%360/360}function bw(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function qd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function ww(t){let e=lz(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const Bd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,uz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,cz=new RegExp(`(${Object.keys($h).join("|")})`,"g"),fz=t=>{const e=t.output.map(s=>s.replace(uz,ww)).map(s=>s.replace(cz,ww)),n=e[0].match(Bd).map(()=>[]);e.forEach(s=>{s.match(Bd).forEach((a,l)=>n[l].push(+a))});const i=e[0].match(Bd).map((s,a)=>Kh(Qt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(Bd,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,h,g)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${g})`)}};let bc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const dz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hz=["Webkit","Ms","Moz","O"];bc=Object.keys(bc).reduce((t,e)=>(hz.forEach(n=>t[dz(n,e)]=t[e]),t),bc);function pz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(bc.hasOwnProperty(t)&&bc[t])?e+"px":(""+e).trim()}const Cw={};FB(t=>new ZB(t));OB(fz);LB($h);VB((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,l=e.scrollTop,c=e.scrollLeft,d=Dl(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let g in s)if(s.hasOwnProperty(g)){var n=g.indexOf("--")===0,i=pz(g,s[g],n);g==="float"&&(g="cssFloat"),n?t.style.setProperty(g,i):t.style[g]=i}for(let g in d){const E=h?g:Cw[g]||(Cw[g]=g.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[g])}return}else return!1},t=>t);const mz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],gz=DB(zB),yz=gz(mz);function Iw(t,e){return t.map(function(n,i){return n+e[i]})}function jx(t,e){return t.map(function(n,i){return n-e[i]})}function Qy(t){return Math.hypot.apply(Math,t)}function vz(t,e,n){var i=Qy(e),s=i===0?0:1/i,a=n===0?0:1/n,l=a*i,c=e.map(function(g){return a*g}),d=e.map(function(g){return s*g}),h=Qy(t);return{velocities:c,velocity:l,distance:h,direction:d}}function Xy(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function _z(t,e,n){return Math.max(e,Math.min(t,n))}function Ez(t,e){return Math.pow(t,e*5)}function Rw(t,e,n){return e===0||Math.abs(e)===1/0?Ez(t,n):t*e*n/(e+n*t)}function wc(t,e,n,i){return i===void 0&&(i=.15),i===0?_z(t,e,n):t<e?-Rw(e-t,n-e,i)+e:t>n?+Rw(t-n,n-e,i)+n:t}function Tz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Sz(t,e,n){return e&&Tz(t.prototype,e),t}function fi(){return fi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fi.apply(this,arguments)}function Wx(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Az(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bz(t,e){if(t){if(typeof t=="string")return xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xw(t,e)}}function xw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function xp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=bz(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function Qx(){}function Xx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?Qx:e.length===1?e[0]:function(){for(var i,s=xp(e),a;!(a=s()).done;){var l=a.value;i=l.apply(this,arguments)||i}return i}}function uo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Hd(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function w0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],l=a[0],c=a[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=w0(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var wz=180,Cz=.15,Iz=.5,Rz=60,xz={threshold:function(e){return e===void 0&&(e=0),uo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return uo(Cz);case!1:return uo(0);default:return uo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:uo(e)}},Zx=fi({},xz,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return Zx.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,l=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,g=h===void 0?1/0:h;return[[s,l],[d,g]]}}),Nz=typeof window<"u"&&window.document&&window.document.createElement,Dz={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=Nz?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,l=a===void 0?!1:a;return{passive:s,capture:l}}},Mz=fi({},Zx,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,h=d===void 0?void 0:d,g=uo(e,a?3:c||h?1:0);return this.filterTaps=a||g[0]+g[1]>0,g},swipeVelocity:function(e){return e===void 0&&(e=Iz),uo(e)},swipeDistance:function(e){return e===void 0&&(e=Rz),uo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return wz;case!1:return 0;default:return e}}});function Pz(t){return t===void 0&&(t={}),w0(t,Dz)}function kz(t){return t===void 0&&(t={}),w0(t,Mz)}function Vz(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=Az(t,["domTarget","eventOptions","window","enabled"]),l=Pz({domTarget:e,eventOptions:n,window:i,enabled:s});return l.drag=kz(a),l}function Xu(t){return fi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Qx,canceled:!1,memo:void 0,args:void 0},t)}function e1(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Xu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Xu({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Xu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Xu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Xu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var sa=new Map,Lz=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,l){var c;l===void 0&&(l=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),g=2;g<d;g++)h[g-2]=arguments[g];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,l].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var l=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!l,s.state.last=l&&!c,s.controller.state.shared[s.ingKey]=c}var d=fi({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,l=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,g=h._bounds,E=h._initial,T=h._active,w=h._intentional,x=h.lastOffset,M=h.movement,U=this.getInternalMovement(i,this.state),H=w[0]===!1?Nw(U[0],d[0]):w[0],F=w[1]===!1?Nw(U[1],d[1]):w[1],q=this.checkIntentionality([H,F],U);if(q._blocked)return fi({},q,{_movement:U,delta:[0,0]});var J=q._intentional,te=U,G,I;if(J[0]!==!1&&w[0]===!1&&(I=Hd(a,this.state),G=Hd(l,this.state),E[0]=I[0],g[0]=G[0]),J[1]!==!1&&w[1]===!1){var R,N;I=(R=I)!=null?R:Hd(a,this.state),G=(N=G)!=null?N:Hd(l,this.state),E[1]=I[1],g[1]=G[1]}var V=[J[0]!==!1?U[0]-J[0]:E[0],J[1]!==!1?U[1]-J[1]:E[1]],P=Iw(V,x),L=T?c:[0,0];return V=Dw(g,Iw(V,E),L),fi({},q,{intentional:J[0]!==!1||J[1]!==!1,_initial:E,_movement:te,movement:V,values:i,offset:Dw(g,P,L),delta:jx(V,M)})},e.clean=function(){this.clearTimeout()},Sz(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function Nw(t,e){return Math.abs(t)>=e?Xy(t)*e:!1}function Dw(t,e,n){var i=e[0],s=e[1],a=n[0],l=n[1],c=t[0],d=c[0],h=c[1],g=t[1],E=g[0],T=g[1];return[wc(i,d,h,a),wc(s,E,T,l)]}function Xg(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,l=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:l,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function Oz(t,e,n){var i=t.state.offset,s=n.timeStamp;return fi({},e1()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function Uz(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,fi({},e,{event:n})].concat(s))}}var Fz=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];for(var c=xp(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var g=0,E=Object.entries(n.nativeRefs);g<E.length;g++){var T=E[g],w=T[0],x=T[1];Zy(i,w,Uz(x,fi({},n.state.shared,{args:a})))}return n.config.domTarget?Hz(n,i):Gz(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=n1(n.config),s=n.config.eventOptions;i&&nf(i,t1(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),qz(n)},this.state=e1(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function qz(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var l=s[a];nf(n,l,i)}t.windowListeners={}}}function Bz(t,e){var n=t.config,i=t.windowListeners;n.window&&(nf(n.window,i[e],n.eventOptions),delete i[e])}function zz(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(nf(i.window,s[e],i.eventOptions),i1(i.window,s[e]=n,i.eventOptions))}function Hz(t,e){var n=t.config,i=t.domListeners,s=n1(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;nf(s,t1(i),a);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],h=d[0],g=d[1],E=h.slice(2).toLowerCase();i.push([E,Xx.apply(void 0,g)])}i1(s,i,a)}function Gz(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,l=Object.entries(e);a<l.length;a++){var c=l[a],d=c[0],h=c[1],g=Array.isArray(h)?h:[h],E=d+s;i[E]=Xx.apply(void 0,g)}return i}function t1(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function n1(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function Zy(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function i1(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=xp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.addEventListener(l,c,n)}}function nf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=xp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.removeEventListener(l,c,n)}}function Kz(t,e,n){n===void 0&&(n={});var i=Jz(t),s=Sn.useMemo(function(){return new Fz(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,Sn.useEffect(s.effect,[]),s.config.domTarget?$z:s.bind}function $z(){}function Jz(t){var e=new Set;return t.drag&&e.add(sa.get("drag")),t.wheel&&e.add(sa.get("wheel")),t.scroll&&e.add(sa.get("scroll")),t.move&&e.add(sa.get("move")),t.pinch&&e.add(sa.get("pinch")),t.hover&&e.add(sa.get("hover")),e}var Yz=(function(t){Wx(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return jx(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var l=a.map(Math.abs),c=l[0],d=l[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var l=this.getMovement(s);if(!l._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(l,vz(l.movement,l.delta,c))}return l},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(Lz);function r1(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function Mw(t){var e="buttons"in t?t.buttons:0,n=r1(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:l,metaKey:c,ctrlKey:d}}function Pw(t){var e=r1(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var jz=3,Wz=220,Qz=(function(t){Wx(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(zz(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind(zd(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=Mw(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var l=Pw(s),c=i.getKinematics(l,s),d=Xg(zd(i),s),h=i.state._isTap,g=Qy(c._movement);h&&g>=jz&&(h=!1),i.updateGestureState(fi({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],h=i.state.movement,g=h[0],E=h[1],T=i.state._intentional,w=T[0],x=T[1],M=i.config.swipeVelocity,U=M[0],H=M[1],F=i.config.swipeDistance,q=F[0],J=F[1],te=fi({},Xg(zd(i),s),i.getMovement(i.state.values)),G=[0,0];te.elapsedTime<Wz&&(w!==!1&&Math.abs(c)>U&&Math.abs(g)>q&&(G[0]=Xy(c)),x!==!1&&Math.abs(d)>H&&Math.abs(E)>J&&(G[1]=Xy(d))),i.updateGestureState(fi({},te,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call(zd(i)),i.state._delayedEvent=!1,Bz(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=Pw(s);this.updateSharedState(Mw(s)),this.updateGestureState(fi({},Oz(this,a,s),Xg(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(Zy(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";Zy(s,a,this.onClick)}},e})(Yz);function Xz(t,e){var n,i=[],s,a=!1;function l(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return l}function hh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!hh(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!hh(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!hh(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function Zz(t,e){try{return hh(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function eH(t,e){e===void 0&&(e={}),sa.set("drag",Qz);var n=$.useRef();return n.current||(n.current=Xz(Vz,Zz)),Kz({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var s1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Yh=s1.join(","),o1=typeof Element>"u",Ta=o1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ev=!o1&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},a1=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Yh));return n&&Ta.call(e,Yh)&&s.unshift(e),s=s.filter(i),s},l1=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:l,candidates:h})}else{var g=Ta.call(l,Yh);g&&i.filter(l)&&(n||!e.includes(l))&&s.push(l);var E=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(E&&T){var w=t(E===!0?l.children:E.children,!0,i);i.flatten?s.push.apply(s,w):s.push({scope:l,candidates:w})}else a.unshift.apply(a,l.children)}}return s},u1=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},tH=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},c1=function(e){return e.tagName==="INPUT"},nH=function(e){return c1(e)&&e.type==="hidden"},iH=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},rH=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},sH=function(e){if(!e.name)return!0;var n=e.form||ev(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=rH(s,e.form);return!a||a===e},oH=function(e){return c1(e)&&e.type==="radio"},aH=function(e){return oH(e)&&!sH(e)},kw=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},lH=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=Ta.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(Ta.call(l,"details:not([open]) *"))return!0;var c=ev(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var g=e.parentElement,E=ev(e);if(g&&!g.shadowRoot&&s(g)===!0)return kw(e);e.assignedSlot?e=e.assignedSlot:!g&&E!==e.ownerDocument?e=E.host:e=g}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return kw(e);return!1},uH=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return Ta.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},jh=function(e,n){return!(n.disabled||nH(n)||lH(n,e)||iH(n)||uH(n))},tv=function(e,n){return!(aH(n)||u1(n)<0||!jh(e,n))},cH=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},fH=function t(e){var n=[],i=[];return e.forEach(function(s,a){var l=!!s.scope,c=l?s.scope:s,d=u1(c,l),h=l?t(s.candidates):c;d===0?l?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:l,content:h})}),i.sort(tH).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},dH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=l1([e],n.includeContainer,{filter:tv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:cH}):i=a1(e,n.includeContainer,tv.bind(null,n)),fH(i)},hH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=l1([e],n.includeContainer,{filter:jh.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=a1(e,n.includeContainer,jh.bind(null,n)),i},Gd=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ta.call(e,Yh)===!1?!1:tv(n,e)},pH=s1.concat("iframe").join(","),Zg=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ta.call(e,pH)===!1?!1:jh(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Vw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vw(Object(n),!0).forEach(function(i){mH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ow=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),gH=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},yH=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},vH=function(e){return e.key==="Tab"||e.keyCode===9},Uw=function(e){return setTimeout(e,0)},Fw=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},Zu=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},Kd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},_H=function(e,n){var i=(n==null?void 0:n.document)||document,s=Lw({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,R){return G&&G[I]!==void 0?G[I]:s[R||I]},d=function(G){return a.containerGroups.findIndex(function(I){var R=I.container,N=I.tabbableNodes;return R.contains(G)||N.find(function(V){return V===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var R=arguments.length,N=new Array(R>1?R-1:0),V=1;V<R;V++)N[V-1]=arguments[V];I=I.apply(void 0,N)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var P=I;if(typeof I=="string"&&(P=i.querySelector(I),!P))throw new Error("`".concat(G,"` as selector refers to no known node"));return P},g=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],R=I&&I.firstTabbableNode;G=R||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=dH(G,s.tabbableOptions),R=hH(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:R,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=R.findIndex(function(O){return O===V});if(!(L<0))return P?R.slice(L+1).find(function(O){return Gd(O,s.tabbableOptions)}):R.slice(0,L).reverse().find(function(O){return Gd(O,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function te(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){te(g());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,gH(G)&&G.select()}},w=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},x=function(G){var I=Kd(G);if(!(d(I)>=0)){if(Zu(s.clickOutsideDeactivates,G)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Zg(I,s.tabbableOptions)});return}Zu(s.allowOutsideClick,G)||G.preventDefault()}},M=function(G){var I=Kd(G),R=d(I)>=0;R||I instanceof Document?R&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||g()))},U=function(G){var I=Kd(G);E();var R=null;if(a.tabbableGroups.length>0){var N=d(I),V=N>=0?a.containerGroups[N]:void 0;if(N<0)G.shiftKey?R=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:R=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var P=Fw(a.tabbableGroups,function(ce){var pe=ce.firstTabbableNode;return I===pe});if(P<0&&(V.container===I||Zg(I,s.tabbableOptions)&&!Gd(I,s.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(P=N),P>=0){var L=P===0?a.tabbableGroups.length-1:P-1,O=a.tabbableGroups[L];R=O.lastTabbableNode}}else{var Ie=Fw(a.tabbableGroups,function(ce){var pe=ce.lastTabbableNode;return I===pe});if(Ie<0&&(V.container===I||Zg(I,s.tabbableOptions)&&!Gd(I,s.tabbableOptions)&&!V.nextTabbableNode(I))&&(Ie=N),Ie>=0){var ve=Ie===a.tabbableGroups.length-1?0:Ie+1,ee=a.tabbableGroups[ve];R=ee.firstTabbableNode}}}else R=h("fallbackFocus");R&&(G.preventDefault(),T(R))},H=function(G){if(yH(G)&&Zu(s.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(vH(G)){U(G);return}},F=function(G){var I=Kd(G);d(I)>=0||Zu(s.clickOutsideDeactivates,G)||Zu(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},q=function(){if(a.active)return Ow.activateTrap(l),a.delayInitialFocusTimer=s.delayInitialFocus?Uw(function(){T(g())}):T(g()),i.addEventListener("focusin",M,!0),i.addEventListener("mousedown",x,{capture:!0,passive:!1}),i.addEventListener("touchstart",x,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),l},J=function(){if(a.active)return i.removeEventListener("focusin",M,!0),i.removeEventListener("mousedown",x,!0),i.removeEventListener("touchstart",x,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",H,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),R=c(G,"onPostActivate"),N=c(G,"checkCanFocusTrap");N||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){N&&E(),q(),R&&R()};return N?(N(a.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(G){if(!a.active)return this;var I=Lw({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,J(),a.active=!1,a.paused=!1,Ow.deactivateTrap(l);var R=c(I,"onDeactivate"),N=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),P=c(I,"returnFocus","returnFocusOnDeactivate");R&&R();var L=function(){Uw(function(){P&&T(w(a.nodeFocusedBeforeActivation)),N&&N()})};return P&&V?(V(w(a.nodeFocusedBeforeActivation)).then(L,L),this):(L(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,J(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),q(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(R){return typeof R=="string"?i.querySelector(R):R}),a.active&&E(),this}},l.updateContainerElements(e),l};function EH(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var C0=!1;if(typeof window<"u"){var qw={get passive(){C0=!0}};window.addEventListener("testPassive",null,qw),window.removeEventListener("testPassive",null,qw)}var f1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),fo=[],Wh=!1,d1=-1,Cc=void 0,Ic=void 0,h1=function(e){return fo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Qh=function(e){var n=e||window.event;return h1(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},TH=function(e){if(Ic===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Ic=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Cc===void 0&&(Cc=document.body.style.overflow,document.body.style.overflow="hidden")},SH=function(){Ic!==void 0&&(document.body.style.paddingRight=Ic,Ic=void 0),Cc!==void 0&&(document.body.style.overflow=Cc,Cc=void 0)},AH=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},bH=function(e,n){var i=e.targetTouches[0].clientY-d1;return h1(e.target)?!1:n&&n.scrollTop===0&&i>0||AH(n)&&i<0?Qh(e):(e.stopPropagation(),!0)},wH=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!fo.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};fo=[].concat(EH(fo),[i]),f1?(e.ontouchstart=function(s){s.targetTouches.length===1&&(d1=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&bH(s,e)},Wh||(document.addEventListener("touchmove",Qh,C0?{passive:!1}:void 0),Wh=!0)):TH(n)}},CH=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}fo=fo.filter(function(n){return n.targetElement!==e}),f1?(e.ontouchstart=null,e.ontouchmove=null,Wh&&fo.length===0&&(document.removeEventListener("touchmove",Qh,C0?{passive:!1}:void 0),Wh=!1)):fo.length||SH()},da=[],IH=function(){return da.some(function(t){return t.activeTargets.length>0})},RH=function(){return da.some(function(t){return t.skippedTargets.length>0})},Bw="ResizeObserver loop completed with undelivered notifications.",xH=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Bw}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Bw),window.dispatchEvent(t)},Bc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Bc||(Bc={}));var ha=function(t){return Object.freeze(t)},NH=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ha(this)}return t})(),p1=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ha(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,l=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:l,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),I0=function(t){return t instanceof SVGElement&&"getBBox"in t},m1=function(t){if(I0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,l=s.offsetHeight;return!(a||l||t.getClientRects().length)},zw=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},DH=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rc=typeof window<"u"?window:{},$d=new WeakMap,Hw=/auto|scroll/,MH=/^tb|vertical/,PH=/msie|trident/i.test(Rc.navigator&&Rc.navigator.userAgent),Pr=function(t){return parseFloat(t||"0")},Ml=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new NH((n?e:t)||0,(n?t:e)||0)},Gw=ha({devicePixelContentBoxSize:Ml(),borderBoxSize:Ml(),contentBoxSize:Ml(),contentRect:new p1(0,0,0,0)}),g1=function(t,e){if(e===void 0&&(e=!1),$d.has(t)&&!e)return $d.get(t);if(m1(t))return $d.set(t,Gw),Gw;var n=getComputedStyle(t),i=I0(t)&&t.ownerSVGElement&&t.getBBox(),s=!PH&&n.boxSizing==="border-box",a=MH.test(n.writingMode||""),l=!i&&Hw.test(n.overflowY||""),c=!i&&Hw.test(n.overflowX||""),d=i?0:Pr(n.paddingTop),h=i?0:Pr(n.paddingRight),g=i?0:Pr(n.paddingBottom),E=i?0:Pr(n.paddingLeft),T=i?0:Pr(n.borderTopWidth),w=i?0:Pr(n.borderRightWidth),x=i?0:Pr(n.borderBottomWidth),M=i?0:Pr(n.borderLeftWidth),U=E+h,H=d+g,F=M+w,q=T+x,J=c?t.offsetHeight-q-t.clientHeight:0,te=l?t.offsetWidth-F-t.clientWidth:0,G=s?U+F:0,I=s?H+q:0,R=i?i.width:Pr(n.width)-G-te,N=i?i.height:Pr(n.height)-I-J,V=R+U+te+F,P=N+H+J+q,L=ha({devicePixelContentBoxSize:Ml(Math.round(R*devicePixelRatio),Math.round(N*devicePixelRatio),a),borderBoxSize:Ml(V,P,a),contentBoxSize:Ml(R,N,a),contentRect:new p1(E,d,R,N)});return $d.set(t,L),L},y1=function(t,e,n){var i=g1(t,n),s=i.borderBoxSize,a=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Bc.DEVICE_PIXEL_CONTENT_BOX:return l;case Bc.BORDER_BOX:return s;default:return a}},kH=(function(){function t(e){var n=g1(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ha([n.borderBoxSize]),this.contentBoxSize=ha([n.contentBoxSize]),this.devicePixelContentBoxSize=ha([n.devicePixelContentBoxSize])}return t})(),v1=function(t){if(m1(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},VH=function(){var t=1/0,e=[];da.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(h){var g=new kH(h.target),E=v1(h.target);c.push(g),h.lastReportedSize=y1(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},Kw=function(t){da.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(v1(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},LH=function(){var t=0;for(Kw(t);IH();)t=VH(),Kw(t);return RH()&&xH(),t>0},ey,_1=[],OH=function(){return _1.splice(0).forEach(function(t){return t()})},UH=function(t){if(!ey){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return OH()}).observe(n,i),ey=function(){n.textContent="".concat(e?e--:e++)}}_1.push(t),ey()},FH=function(t){UH(function(){requestAnimationFrame(t)})},ph=0,qH=function(){return!!ph},BH=250,zH={attributes:!0,characterData:!0,childList:!0,subtree:!0},$w=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Jw=function(t){return t===void 0&&(t=0),Date.now()+t},ty=!1,HH=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=BH),!ty){ty=!0;var i=Jw(e);FH(function(){var s=!1;try{s=LH()}finally{if(ty=!1,e=i-Jw(),!qH())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,zH)};document.body?n():Rc.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),$w.forEach(function(n){return Rc.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),$w.forEach(function(n){return Rc.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),nv=new HH,Yw=function(t){!ph&&t>0&&nv.start(),ph+=t,!ph&&nv.stop()},GH=function(t){return!I0(t)&&!DH(t)&&getComputedStyle(t).display==="inline"},KH=(function(){function t(e,n){this.target=e,this.observedBox=n||Bc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=y1(this.target,this.observedBox,!0);return GH(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),$H=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Jd=new WeakMap,jw=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Yd=(function(){function t(){}return t.connect=function(e,n){var i=new $H(e,n);Jd.set(e,i)},t.observe=function(e,n,i){var s=Jd.get(e),a=s.observationTargets.length===0;jw(s.observationTargets,n)<0&&(a&&da.push(s),s.observationTargets.push(new KH(n,i&&i.box)),Yw(1),nv.schedule())},t.unobserve=function(e,n){var i=Jd.get(e),s=jw(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&da.splice(da.indexOf(i),1),i.observationTargets.splice(s,1),Yw(-1))},t.disconnect=function(e){var n=this,i=Jd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),JH=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Yd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Yd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!zw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Yd.unobserve(this,e)},t.prototype.disconnect=function(){Yd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Qn(){return Qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qn.apply(this,arguments)}function mh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var xc=typeof window<"u"?$.useLayoutEffect:$.useEffect;function ec(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function jd(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var YH={box:"border-box"};function ny(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=$.useState(0),l=a[0],c=a[1];$.useDebugValue(n+": "+l);var d=$.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return xc(function(){if(t.current&&i){var h=new JH(d);return h.observe(t.current,YH),function(){h.disconnect()}}},[t,d,i]),i?l:0}function Wn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var Ww={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},Qw={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},jH=EB({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:Qn({},Ww,Qw)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:Qn({},Ww,Qw)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:Qn({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[TB({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),WH=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],QH=["velocity"],XH=["onRest","config"],E1=JB.default,ZH=E1.tension,Wd=E1.friction,e8=Sn.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,l=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,g=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,w=t.defaultSnap,x=w===void 0?n8:w,M=t.snapPoints,U=M===void 0?i8:M,H=t.blocking,F=H===void 0||H,q=t.scrollLocking,J=q===void 0||q,te=t.style,G=t.onSpringStart,I=t.onSpringCancel,R=t.onSpringEnd,N=t.reserveScrollBarGap,V=N===void 0?F:N,P=t.expandOnContentDrag,L=P!==void 0&&P,O=mh(t,WH),Ie=(function(){var le=$.useState(!1),be=le[0],Se=le[1],Ge=$.useState({}),_t=Ge[0],Ye=Ge[1],je=$.useCallback(function(ot){return Ye(function(it){var De;return Qn({},it,((De={})[ot]=!1,De))}),function(){Ye(function(it){var De;return Qn({},it,((De={})[ot]=!0,De))})}},[]);return $.useEffect(function(){var ot=Object.values(_t);ot.length!==0&&ot.every(Boolean)&&Se(!0)},[_t]),{ready:be,registerReady:je}})(),ve=Ie.ready,ee=Ie.registerReady,ce=$.useRef(!1),pe=$.useRef(G),Re=$.useRef(I),ge=$.useRef(R);$.useEffect(function(){pe.current=G,Re.current=I,ge.current=R},[I,G,R]);var B,Z,fe=XB(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),he=fe[0],we=fe[1],Ve=$.useRef(null),qe=$.useRef(null),Ht=$.useRef(null),At=$.useRef(null),Gn=$.useRef(null),di=$.useRef(null),vn=$.useRef(0),bn=$.useRef(),kn=$.useRef(!1),wn=(B=$.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Z=$.useRef(B==null?void 0:B.matches),$.useDebugValue(Z.current?"reduce":"no-preference"),$.useEffect(function(){var le=function(be){Z.current=be.matches};return B==null||B.addListener(le),function(){return B==null?void 0:B.removeListener(le)}},[B]),Z),Cn=(function(le){var be=le.targetRef,Se=le.enabled,Ge=le.reserveScrollBarGap,_t=$.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return $.useDebugValue(Se?"Enabled":"Disabled"),$.useEffect(function(){if(!Se)return _t.current.deactivate(),void(_t.current={activate:function(){},deactivate:function(){}});var Ye=be.current,je=!1;_t.current={activate:function(){je||(je=!0,wH(Ye,{allowTouchMove:function(ot){return ot.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:Ge}))},deactivate:function(){je&&(je=!1,CH(Ye))}}},[Se,be,Ge]),_t})({targetRef:qe,enabled:ve&&J,reserveScrollBarGap:V}),Fi=(function(le){var be=le.targetRef,Se=le.enabled,Ge=$.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return $.useDebugValue(Se?"Enabled":"Disabled"),$.useEffect(function(){if(!Se)return Ge.current.deactivate(),void(Ge.current={activate:function(){},deactivate:function(){}});var _t=be.current,Ye=!1,je=[],ot=[];Ge.current={activate:function(){if(!Ye){Ye=!0;var it=_t.parentNode;document.querySelectorAll("body > *").forEach(function(De){if(De!==it){var Ke=De.getAttribute("aria-hidden");Ke!==null&&Ke!=="false"||(je.push(Ke),ot.push(De),De.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Ye&&(Ye=!1,ot.forEach(function(it,De){var Ke=je[De];Ke===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",Ke)}),je=[],ot=[])}}},[be,Se]),Ge})({targetRef:Ve,enabled:ve&&F}),Ae=(function(le){var be=le.targetRef,Se=le.fallbackRef,Ge=le.initialFocusRef,_t=le.enabled,Ye=$.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return $.useDebugValue(_t?"Enabled":"Disabled"),$.useEffect(function(){if(!_t)return Ye.current.deactivate(),void(Ye.current={activate:function(){},deactivate:function(){}});var je=Se.current,ot=_H(be.current,{onActivate:void 0,initialFocus:Ge?function(){return(Ge==null?void 0:Ge.current)||je}:void 0,fallbackFocus:je,escapeDeactivates:!1,clickOutsideDeactivates:!1}),it=!1;Ye.current={activate:function(){try{return it?Promise.resolve():(it=!0,Promise.resolve(ot.activate()).then(function(){return Promise.resolve(new Promise(function(De){return setTimeout(function(){return De(void 0)},0)})).then(function(){})}))}catch(De){return Promise.reject(De)}},deactivate:function(){it&&(it=!1,ot.deactivate())}}},[_t,Se,Ge,be]),Ye})({targetRef:Ve,fallbackRef:di,initialFocusRef:g||void 0,enabled:ve&&F&&g!==!1}),xt=(function(le){var be=le.getSnapPoints,Se=le.heightRef,Ge=le.lastSnapRef,_t=le.ready,Ye=(function(Nt){var Et=Nt.contentRef,ni=Nt.controlledMaxHeight,qt=Nt.footerEnabled,$n=Nt.footerRef,zi=Nt.headerEnabled,Vn=Nt.headerRef,ii=Nt.registerReady,Hr=Nt.resizeSourceRef,wi=$.useMemo(function(){return ii("contentHeight")},[ii]),Mt=(function(lr,Gi,Ki){var hi=$.useMemo(function(){return Gi("maxHeight")},[Gi]),$i=$.useState(function(){return jd(lr)||typeof window<"u"?window.innerHeight:0}),br=$i[0],ri=$i[1],Bt=br>0,ur=$.useRef(0);return $.useDebugValue(lr?"controlled":"auto"),$.useEffect(function(){Bt&&hi()},[Bt,hi]),xc(function(){if(lr)return ri(jd(lr)),void(Ki.current="maxheightprop");var cr=function(){ur.current||(ur.current=requestAnimationFrame(function(){ri(window.innerHeight),Ki.current="window",ur.current=0}))};return window.addEventListener("resize",cr),ri(window.innerHeight),Ki.current="window",hi(),function(){window.removeEventListener("resize",cr),cancelAnimationFrame(ur.current)}},[lr,hi,Ki]),br})(ni,ii,Hr),nn=ny(Vn,{label:"headerHeight",enabled:zi,resizeSourceRef:Hr}),Ci=ny(Et,{label:"contentHeight",enabled:!0,resizeSourceRef:Hr}),Hi=ny($n,{label:"footerHeight",enabled:qt,resizeSourceRef:Hr}),Ii=Math.min(Mt-nn-Hi,Ci)+nn+Hi;$.useDebugValue("minHeight: "+Ii);var Po=Ci>0;return $.useEffect(function(){Po&&wi()},[Po,wi]),{maxHeight:Mt,minHeight:Ii,headerHeight:nn,footerHeight:Hi}})({contentRef:le.contentRef,controlledMaxHeight:le.controlledMaxHeight,footerEnabled:le.footerEnabled,footerRef:le.footerRef,headerEnabled:le.headerEnabled,headerRef:le.headerRef,registerReady:le.registerReady,resizeSourceRef:le.resizeSourceRef}),je=Ye.maxHeight,ot=Ye.minHeight,it=Ye.headerHeight,De=Ye.footerHeight,Ke=(function(Nt,Et){var ni=[].concat(Nt).map(jd).reduce(function(Vn,ii){return Vn.add(ec(ii,0,Et)),Vn},new Set),qt=Array.from(ni),$n=Math.min.apply(Math,qt);if(Number.isNaN($n))throw new TypeError("minSnap is NaN");var zi=Math.max.apply(Math,qt);if(Number.isNaN(zi))throw new TypeError("maxSnap is NaN");return{snapPoints:qt,minSnap:$n,maxSnap:zi}})(_t?be({height:Se.current,footerHeight:De,headerHeight:it,minHeight:ot,maxHeight:je}):[0],je),En=Ke.snapPoints,Bi=Ke.minSnap,tn=Ke.maxSnap;return $.useDebugValue("minSnap: "+Bi+", maxSnap:"+tn),{minSnap:Bi,maxSnap:tn,findSnap:function(Nt){var Et=jd(typeof Nt=="function"?Nt({footerHeight:De,headerHeight:it,height:Se.current,minHeight:ot,maxHeight:je,snapPoints:En,lastSnap:Ge.current}):Nt);return En.reduce(function(ni,qt){return Math.abs(qt-Et)<Math.abs(ni-Et)?qt:ni},Bi)},maxHeight:je}})({contentRef:Ht,controlledMaxHeight:T,footerEnabled:!!a,footerRef:Gn,getSnapPoints:U,headerEnabled:l!==!1,headerRef:At,heightRef:vn,lastSnapRef:h,ready:ve,registerReady:ee,resizeSourceRef:bn}),Ft=xt.minSnap,_n=xt.maxSnap,ar=xt.maxHeight,qi=xt.findSnap,ht=$.useRef(ar),en=$.useRef(Ft),Be=$.useRef(_n),Gt=$.useRef(qi),an=$.useRef(0);xc(function(){ht.current=ar,Be.current=_n,en.current=Ft,Gt.current=qi,an.current=qi(x)},[qi,x,ar,_n,Ft]);var ln=$.useCallback(function(le){var be=le.onRest,Se=le.config,Ge=(Se=Se===void 0?{}:Se).velocity,_t=Ge===void 0?1:Ge,Ye=mh(Se,QH),je=mh(le,XH);return new Promise(function(ot){return we(Qn({},je,{config:Qn({velocity:_t},Ye,{mass:1,tension:ZH,friction:Math.max(Wd,Wd+(Wd-Wd*_t))}),onRest:function(){var it=[].slice.call(arguments);ot.apply(void 0,it),be==null||be.apply(void 0,it)}}))})},[we]),Ts=NB(jH,{devTools:!1,actions:{onOpenCancel:$.useCallback(function(){return Re.current==null?void 0:Re.current({type:"OPEN"})},[]),onSnapCancel:$.useCallback(function(le){return Re.current==null?void 0:Re.current({type:"SNAP",source:le.snapSource})},[]),onCloseCancel:$.useCallback(function(){return Re.current==null?void 0:Re.current({type:"CLOSE"})},[]),onResizeCancel:$.useCallback(function(){return Re.current==null?void 0:Re.current({type:"RESIZE",source:bn.current})},[]),onOpenEnd:$.useCallback(function(){return ge.current==null?void 0:ge.current({type:"OPEN"})},[]),onSnapEnd:$.useCallback(function(le,be){return ge.current==null?void 0:ge.current({type:"SNAP",source:le.snapSource})},[]),onResizeEnd:$.useCallback(function(){return ge.current==null?void 0:ge.current({type:"RESIZE",source:bn.current})},[])},context:{initialState:d},services:{onSnapStart:$.useCallback(function(le,be){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"SNAP",source:be.payload.source||"custom"}))}catch(Se){return Promise.reject(Se)}},[]),onOpenStart:$.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseStart:$.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeStart:$.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"RESIZE",source:bn.current}))}catch(le){return Promise.reject(le)}},[]),onSnapEnd:$.useCallback(function(le,be){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"SNAP",source:le.snapSource}))}catch(Se){return Promise.reject(Se)}},[]),onOpenEnd:$.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseEnd:$.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeEnd:$.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"RESIZE",source:bn.current}))}catch(le){return Promise.reject(le)}},[]),renderVisuallyHidden:$.useCallback(function(le,be){try{return Promise.resolve(ln({y:an.current,ready:0,maxHeight:ht.current,maxSnap:Be.current,minSnap:an.current,immediate:!0})).then(function(){})}catch(Se){return Promise.reject(Se)}},[ln]),activate:$.useCallback(function(le,be){try{return ce.current=!0,Promise.resolve(Promise.all([Cn.current.activate(),Ae.current.activate(),Fi.current.activate()])).then(function(){})}catch(Se){return Promise.reject(Se)}},[Fi,Ae,Cn]),deactivate:$.useCallback(function(){try{return Cn.current.deactivate(),Ae.current.deactivate(),Fi.current.deactivate(),ce.current=!1,Promise.resolve()}catch(le){return Promise.reject(le)}},[Fi,Ae,Cn]),openImmediately:$.useCallback(function(){try{return vn.current=an.current,Promise.resolve(ln({y:an.current,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:an.current,immediate:!0})).then(function(){})}catch(le){return Promise.reject(le)}},[ln]),openSmoothly:$.useCallback(function(){try{return Promise.resolve(ln({y:0,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:an.current,immediate:!0})).then(function(){return vn.current=an.current,Promise.resolve(ln({y:an.current,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:an.current,immediate:wn.current})).then(function(){})})}catch(le){return Promise.reject(le)}},[ln,wn]),snapSmoothly:$.useCallback(function(le,be){try{var Se=Gt.current(le.y);return vn.current=Se,h.current=Se,Promise.resolve(ln({y:Se,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:en.current,immediate:wn.current,config:{velocity:le.velocity}})).then(function(){})}catch(Ge){return Promise.reject(Ge)}},[ln,h,wn]),resizeSmoothly:$.useCallback(function(){try{var le=Gt.current(vn.current);return vn.current=le,h.current=le,Promise.resolve(ln({y:le,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:en.current,immediate:bn.current!=="element"||wn.current})).then(function(){})}catch(be){return Promise.reject(be)}},[ln,h,wn]),closeSmoothly:$.useCallback(function(le,be){try{return ln({minSnap:vn.current,immediate:!0}),vn.current=0,Promise.resolve(ln({y:0,maxHeight:ht.current,maxSnap:Be.current,immediate:wn.current})).then(function(){return Promise.resolve(ln({ready:0,immediate:!0})).then(function(){})})}catch(Se){return Promise.reject(Se)}},[ln,wn])}}),Xl=Ts[0],Kn=Ts[1];$.useEffect(function(){ve&&Kn(c?"OPEN":"CLOSE")},[c,Kn,ve]),xc(function(){(ar||_n||Ft)&&Kn("RESIZE")},[ar,_n,Ft,Kn]),$.useEffect(function(){return function(){Cn.current.deactivate(),Ae.current.deactivate(),Fi.current.deactivate()}},[Fi,Ae,Cn]),$.useImperativeHandle(e,function(){return{snapTo:function(le,be){var Se=be===void 0?{}:be,Ge=Se.velocity,_t=Ge===void 0?1:Ge,Ye=Se.source,je=Ye===void 0?"custom":Ye;Kn("SNAP",{payload:{y:Gt.current(le),velocity:_t,source:je}})},get height(){return vn.current}}},[Kn]),$.useEffect(function(){var le=qe.current,be=function(Ge){kn.current&&Ge.preventDefault()},Se=function(Ge){le.scrollTop<0&&(requestAnimationFrame(function(){le.style.overflow="hidden",le.scrollTop=0,le.style.removeProperty("overflow")}),Ge.preventDefault())};return L&&(le.addEventListener("scroll",be),le.addEventListener("touchmove",be),le.addEventListener("touchstart",Se)),function(){le.removeEventListener("scroll",be),le.removeEventListener("touchmove",be),le.removeEventListener("touchstart",Se)}},[L,qe]);var bi=eH(function(le){var be=le.args,Se=(be=be===void 0?[]:be)[0],Ge=(Se=Se===void 0?{}:Se).closeOnTap,_t=Ge!==void 0&&Ge,Ye=Se.isContentDragging,je=Ye!==void 0&&Ye,ot=le.cancel,it=le.direction[1],De=le.down,Ke=le.first,En=le.last,Bi=le.memo,tn=Bi===void 0?he.y.getValue():Bi,Nt=le.tap,Et=le.velocity,ni=-1*le.movement[1];if(!ce.current)return ot(),tn;if(E&&_t&&Nt)return ot(),setTimeout(function(){return E()},0),tn;if(Nt)return tn;var qt=tn+ni,$n=ni*Et,zi=Math.max(en.current,Math.min(Be.current,qt+2*$n));if(!De&&E&&it>0&&qt+$n<en.current/2)return ot(),E(),tn;var Vn=De?E||en.current!==Be.current?wc(qt,E?0:en.current,Be.current,.55):qt<en.current?wc(qt,en.current,2*Be.current,.55):wc(qt,en.current/2,Be.current,.55):zi;return L&&je?(Vn>=Be.current&&(Vn=Be.current),tn===Be.current&&qe.current.scrollTop>0&&(Vn=Be.current),kn.current=Vn<Be.current):kn.current=!1,Ke&&Kn("DRAG"),En?(Kn("SNAP",{payload:{y:Vn,velocity:Et>.05?Et:1,source:"dragging"}}),tn):(we({y:Vn,ready:1,maxHeight:ht.current,maxSnap:Be.current,minSnap:en.current,immediate:!0,config:{velocity:Et}}),tn)},{filterTaps:!0});if(Number.isNaN(Be.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(en.current))throw new TypeError("minSnapRef is NaN!!");var In=(function(le){var be,Se=le.spring,Ge=hl([Se.y,Se.maxHeight],function(De,Ke){return Math.round(ec(Ke-De,0,16))+"px"}),_t=hl([Se.y,Se.minSnap,Se.maxSnap],function(De,Ke,En){return ec(De,Ke,En)+"px"}),Ye=hl([Se.y,Se.minSnap,Se.maxSnap],function(De,Ke,En){return De<Ke?Ke-De+"px":De>En?En-De+"px":"0px"}),je=hl([Se.y,Se.maxSnap],function(De,Ke){return De>=Ke?Math.ceil(De-Ke):0}),ot=hl([Se.y,Se.minSnap],function(De,Ke){if(!Ke)return 0;var En=Math.max(Ke/2-45,0);return ec((De-En)*(1/(Math.min(Ke/2+45,Ke)-En)+0),0,1)}),it=hl([Se.y,Se.minSnap],function(De,Ke){return Ke?ec(De/Ke,0,1):0});return(be={})["--rsbs-content-opacity"]=ot,be["--rsbs-backdrop-opacity"]=it,be["--rsbs-antigap-scale-y"]=je,be["--rsbs-overlay-translate-y"]=Ye,be["--rsbs-overlay-rounded"]=Ge,be["--rsbs-overlay-h"]=_t,be})({spring:he});return Sn.createElement(yz.div,Qn({},O,{"data-rsbs-root":!0,"data-rsbs-state":t8.find(Xl.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!a,className:s,ref:Ve,style:Qn({},In,te,{opacity:he.ready})}),i,F&&Sn.createElement("div",Qn({key:"backdrop","data-rsbs-backdrop":!0},bi({closeOnTap:!0}))),Sn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:di,onKeyDown:function(le){le.key==="Escape"&&(le.stopPropagation(),E&&E())}},l!==!1&&Sn.createElement("div",Qn({key:"header","data-rsbs-header":!0,ref:At},bi()),l),Sn.createElement("div",Qn({key:"scroll","data-rsbs-scroll":!0,ref:qe},L?bi({isContentDragging:!0}):{}),Sn.createElement("div",{"data-rsbs-content":!0,ref:Ht},n)),a&&Sn.createElement("div",Qn({key:"footer",ref:Gn,"data-rsbs-footer":!0},bi()),a)))}),t8=["closed","opening","open","closing","dragging","snapping","resizing"];function n8(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function i8(t){return t.minHeight}var r8=["onSpringStart","onSpringEnd","skipInitialTransition"],R0=$.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=mh(t,r8),l=$.useState(!1),c=l[0],d=l[1],h=$.useRef(),g=$.useRef(null),E=$.useRef(s&&a.open?"OPEN":"CLOSED");xc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=$.useCallback(function(x){return Promise.resolve(n==null?void 0:n(x)).then(function(){x.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),w=$.useCallback(function(x){return Promise.resolve(i==null?void 0:i(x)).then(function(){x.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?Sn.createElement(w9,{"data-rsbs-portal":!0},Sn.createElement(e8,Qn({},a,{lastSnapRef:g,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:w}))):null});const s8=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:l,weatherInfo:c,weatherError:d})=>{const h=document.documentElement.classList.contains("dark"),g=$.useRef(null);return $.useEffect(()=>{!s&&a.length>0&&g.current&&g.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,a.length]),A.jsx(R0,{open:t,onDismiss:l,className:h?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),A.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:E})=>E*.65,snapPoints:({minHeight:E,maxHeight:T})=>[E,T*.65,T*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx(Tx,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),A.jsx("div",{ref:g,children:a.length>0&&A.jsx(Sx,{outfits:a,allClothingItems:e,allClothingSets:n})})]})})},o8=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return A.jsx(R0,{open:t,onDismiss:c,className:d?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Planificateur de Valise"}),A.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[A.jsx(Ax,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&A.jsx(bx,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},a8=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,l]=$.useState(new Set),c=new Set(n.flatMap(w=>w.itemIds)),h=e.filter(w=>!c.has(w.id)).reduce((w,x)=>(w[x.category]||(w[x.category]=[]),w[x.category].push(x),w),{}),g=w=>{l(x=>{const M=new Set(x);return M.has(w)?M.delete(w):M.add(w),M})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const w=window.prompt("Donnez un nom  cet ensemble :");w&&s(w,Array.from(a))},T=document.documentElement.classList.contains("dark");return A.jsx(R0,{open:t,onDismiss:i,className:T?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crer un ensemble"}),A.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:A.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(wp,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({maxHeight:w})=>w*.6,snapPoints:({maxHeight:w})=>[w*.6,w*.85],children:A.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(h).map(w=>h[w].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:w}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[w].map(x=>{const M=a.has(x.id);return A.jsxs("button",{onClick:()=>g(x.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:M?"#D4AF37":"transparent"},children:[M&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(y0,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:x.imageSrc,alt:x.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:x.analysis})]},x.id)})})]},w))})]})})},l8=(t,e)=>{const n=gp(wa,"users",t,"items"),i=TR(n);return CR(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (items listener):",a)})},u8=async(t,e)=>{try{const n=gp(wa,"users",t,"items");return(await wR(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},Xw=async(t,e,n)=>{try{const i=yp(wa,"users",t,"items",e);await yO(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},Zw=async(t,e)=>{try{const n=yp(wa,"users",t,"items",e);await bR(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},c8=(t,e)=>{const n=gp(wa,"users",t,"sets"),i=TR(n);return CR(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (sets listener):",a)})},f8=async(t,e)=>{try{const n=gp(wa,"users",t,"sets");return(await wR(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},d8=async(t,e)=>{try{const n=yp(wa,"users",t,"sets",e);await bR(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},h8=async(t,e,n)=>{try{const i=RU(VU,`users/${t}/clothing/${n}.jpg`);return await CU(i,e,"data_url"),await IU(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},T1=$.createContext(void 0),p8=({children:t,user:e})=>{const[n,i]=$.useState([]),[s,a]=$.useState([]),[l,c]=$.useState(!1);$.useEffect(()=>{if(e){const x=l8(e.uid,U=>{i(U)}),M=c8(e.uid,U=>{a(U)});return()=>{x(),M()}}else i([]),a([])},[e]);const d=$.useCallback(async x=>{if(!(x.length===0||!e)){c(!0);try{const M=x.map(J=>new Promise((te,G)=>{const I=new FileReader;I.onload=()=>te(I.result),I.onerror=G,I.readAsDataURL(J)})),U=await Promise.all(M),H=U.map(J=>J.split(",")[1]),F=await Wq(H),q=Math.min(F.length,x.length);for(let J=0;J<q;J++){const te=F[J];let G="";try{G=await u8(e.uid,te);const I=await h8(e.uid,U[J],G);await Xw(e.uid,G,{imageSrc:I})}catch(I){if(console.error(`chec de cration/upload pour ${x[J].name}.`,I),G){console.log(`Tentative de suppression de l'article orphelin: ${G}`);try{await Zw(e.uid,G),console.log(`Article orphelin ${G} supprim avec succs.`)}catch(R){console.error(`chec de la suppression de l'article orphelin ${G}:`,R)}}}}}catch(M){console.error("Erreur lors de l'analyse par lot:",M)}finally{c(!1)}}},[e]),h=$.useCallback(async x=>{if(e)try{await Zw(e.uid,x)}catch(M){console.error("Erreur suppression item:",M)}},[e]),g=$.useCallback(async x=>{if(e)try{await Xw(e.uid,x.id,x)}catch(M){console.error("Erreur mise  jour item:",M)}},[e]),E=$.useCallback(async(x,M)=>{var F;if(!e)return;const U=((F=n.find(q=>q.id===M[0]))==null?void 0:F.imageSrc)||"",H={name:x,itemIds:M,imageSrc:U};try{await f8(e.uid,H)}catch(q){console.error("Erreur cration set:",q)}},[e,n]),T=$.useCallback(async x=>{if(e)try{await d8(e.uid,x)}catch(M){console.error("Erreur suppression set:",M)}},[e]),w={clothingItems:n,clothingSets:s,isAnalyzing:l,analyzeClothingItems:d,deleteClothingItem:h,updateClothingItem:g,createClothingSet:E,deleteClothingSet:T};return A.jsx(T1.Provider,{value:w,children:t})},m8=()=>{const t=$.useContext(T1);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},g8=()=>{const[t,e]=$.useState(null),[n,i]=$.useState(null),[s,a]=$.useState([]),[l,c]=$.useState(!1),[d,h]=$.useState(null),[g,E]=$.useState(!1),[T,w]=$.useState(null),[x,M]=$.useState(!1),[U,H]=$.useState("home"),[F,q]=$.useState(!1),[J,te]=$.useState(!1),[G,I]=$.useState(!1),[R,N]=$.useState(null),[V,P]=$.useState(null),{clothingItems:L,clothingSets:O,isAnalyzing:Ie,analyzeClothingItems:ve,deleteClothingItem:ee,createClothingSet:ce,updateClothingItem:pe,deleteClothingSet:Re}=m8(),ge=Sn.useMemo(()=>(L||[]).sort((xt,Ft)=>(Ft.isFavorite?1:0)-(xt.isFavorite?1:0)),[L]),B=Sn.useMemo(()=>O||[],[O]),Z=Sn.useMemo(()=>new Set(B.flatMap(Ae=>Ae.itemIds||[])),[B]);$.useEffect(()=>{const Ae=async xt=>{const Ft=xt.coords.latitude,_n=xt.coords.longitude,ar=vx.openWeatherApiKey,qi=`https://api.openweathermap.org/data/2.5/weather?lat=${Ft}&lon=${_n}&appid=${ar}&units=metric&lang=fr`;try{const ht=await fetch(qi);if(!ht.ok)throw new Error("Impossible de rcuprer la mto.");const en=await ht.json(),Be=`${Math.round(en.main.temp)}C, ${en.weather[0].description},  ${en.name}`;N(Be),P(null)}catch{P("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(Ae,()=>P("Activez la golocalisation pour la mto.")):P("Golocalisation non supporte.")},[]);const fe=$.useCallback(async(Ae,xt)=>{if(ge.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const Ft=R?`Mto actuelle : ${R}. Occasion : ${Ae}`:`Occasion : ${Ae}`;try{const _n=await Xq(ge,B,Ft,xt);a(_n)}catch(_n){i(_n instanceof Error?_n.message:"Erreur inconnue")}finally{c(!1)}},[ge,B,R]),he=$.useCallback(async(Ae,xt)=>{if(ge.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const Ft=await e9(ge,B,Ae,xt);h(Ft)}catch(Ft){i(Ft instanceof Error?Ft.message:"Erreur inconnue")}finally{E(!1)}},[ge,B]),we=$.useCallback(async()=>{if(ge.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}M(!0),i(null);try{const Ae=await Zq(ge,B);w(Ae)}catch(Ae){i(Ae instanceof Error?Ae.message:"Erreur inconnue")}finally{M(!1)}},[ge,B]),Ve=$.useCallback(()=>q(!0),[]),qe=$.useCallback(()=>te(!0),[]),Ht=Ae=>e(Ae),At=()=>e(null),Gn=Ae=>{ee(Ae).catch(i),e(null)},di=Ae=>{pe(Ae).catch(i),e(Ae)},vn=Ae=>{const xt=`Focus sur l'article : ${Ae.analysis}`;fe(xt,Ae),e(null),window.innerWidth<768&&q(!0)},bn=$.useCallback((Ae,xt)=>{ce(Ae,xt).catch(i)},[ce]),kn=$.useCallback(Ae=>{Re(Ae).catch(i)},[Re]),wn={hauts:ge.filter(Ae=>Ae.category==="Hauts").length,bas:ge.filter(Ae=>Ae.category==="Bas").length,chaussures:ge.filter(Ae=>Ae.category==="Chaussures").length,accessoires:ge.filter(Ae=>Ae.category==="Accessoires").length},Cn=U==="home"?[]:ge.filter(Ae=>U==="hauts"?Ae.category==="Hauts":U==="bas"?Ae.category==="Bas":U==="chaussures"?Ae.category==="Chaussures":U==="accessoires"?Ae.category==="Accessoires":!1),Fi=F||J||G||!!t||!!T;return A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:n})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[ge.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:we,disabled:x,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:x?"Analyse...":"Analyser ma garde-robe"})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(d9,{onAnalyze:ve,isAnalyzing:Ie})}),A.jsx("div",{className:"hidden md:block",children:A.jsx(m9,{clothingItems:ge,clothingSets:B,onItemClick:Ht,onDeleteItem:Gn,onCreateSet:bn})}),A.jsxs("div",{className:"md:hidden",children:[U==="home"&&A.jsx(v9,{onAnalyzeWardrobe:we,onScrollToOutfits:Ve,onScrollToVacation:qe,onStartSetCreation:()=>I(!0),isAnalyzingWardrobe:x,clothingCount:ge.length}),U!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:U}),A.jsxs("p",{className:"text-sm text-gray-500",children:[Cn.length," vtement",Cn.length>1?"s":""]})]}),Cn.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Cn.map(Ae=>A.jsxs("div",{onClick:()=>Ht(Ae),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[Z.has(Ae.id)&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(wp,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:Ae.imageSrc,alt:Ae.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:Ae.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ae.color})]})]},Ae.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(Tx,{clothingItems:ge,clothingSets:B,onGenerate:fe,isGenerating:l,weatherInfo:R,weatherError:V})}),s.length>0&&A.jsx(Sx,{outfits:s,allClothingItems:ge,allClothingSets:B}),A.jsx("div",{id:"vacation-planner",children:A.jsx(Ax,{clothingItems:ge,clothingSets:B,onGeneratePlan:he,isGenerating:g})}),d&&A.jsx(bx,{plan:d,allClothingItems:ge,allClothingSets:B,onCreateSet:bn})]})]}),t&&A.jsx(g9,{item:t,clothingSets:B,onClose:At,onUpdate:di,onGenerateFrom:vn,onRemoveSet:kn,onDelete:Gn}),T&&A.jsx(E9,{analysis:T,onClose:()=>w(null)}),A.jsx(y9,{onFilesSelected:ve,isAnalyzing:Ie,isOtherModalOpen:Fi}),A.jsx(_9,{activeTab:U,onTabChange:H,counts:wn}),A.jsx(s8,{open:F,clothingItems:ge,clothingSets:B,onGenerate:fe,isGenerating:l,suggestedOutfits:s,onClose:()=>q(!1),weatherInfo:R,weatherError:V}),A.jsx(o8,{open:J,clothingItems:ge,clothingSets:B,onGeneratePlan:he,isGenerating:g,vacationPlan:d,onCreateSet:bn,onClose:()=>te(!1)}),A.jsx(a8,{open:G,clothingItems:ge,clothingSets:B,onClose:()=>I(!1),onCreateSet:(Ae,xt)=>{bn(Ae,xt),I(!1)}})]})},y8=()=>{const[t,e]=$.useState(null),[n,i]=$.useState("dark");$.useEffect(()=>{const a=HM(ac,l=>{e(l)});return()=>a()},[]),$.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?A.jsxs(A.Fragment,{children:[A.jsx(f9,{theme:n,toggleTheme:s,children:A.jsx(fw,{user:t})}),A.jsx(p8,{user:t,children:A.jsx(g8,{})})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(fw,{user:t})})})},S1=document.getElementById("root");if(!S1)throw new Error("L'lment root est introuvable dans le DOM");const v8=sD.createRoot(S1);v8.render(A.jsx(Sn.StrictMode,{children:A.jsx(y8,{})}));
