(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function CS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xp={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function RR(){if(r0)return jl;r0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return jl.Fragment=e,jl.jsx=t,jl.jsxs=t,jl}var o0;function bR(){return o0||(o0=1,xp.exports=RR()),xp.exports}var A=bR(),Np={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function xR(){if(a0)return Ne;a0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,B={};function ee(O,Z,oe){this.props=O,this.context=Z,this.refs=B,this.updater=oe||L}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=ee.prototype;function W(O,Z,oe){this.props=O,this.context=Z,this.refs=B,this.updater=oe||L}var ie=W.prototype=new Y;ie.constructor=W,z(ie,ee.prototype),ie.isPureReactComponent=!0;var de=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(O,Z,oe){var he=oe.ref;return{$$typeof:n,type:O,key:Z,ref:he!==void 0?he:null,props:oe}}function V(O,Z){return x(O.type,Z,O.props)}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function k(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return Z[oe]})}var M=/\/+/g;function Qe(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):Z.toString(36)}function Re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,Z,oe,he,Ae){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(De){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0;break;case v:return Ue=O._init,$(Ue(O._payload),Z,oe,he,Ae)}}if(Ue)return Ae=Ae(O),Ue=he===""?"."+Qe(O,0):he,de(Ae)?(oe="",Ue!=null&&(oe=Ue.replace(M,"$&/")+"/"),$(Ae,Z,oe,"",function(Kn){return Kn})):Ae!=null&&(P(Ae)&&(Ae=V(Ae,oe+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(M,"$&/")+"/")+Ue)),Z.push(Ae)),1;Ue=0;var Pt=he===""?".":he+":";if(de(O))for(var dt=0;dt<O.length;dt++)he=O[dt],De=Pt+Qe(he,dt),Ue+=$(he,Z,oe,De,Ae);else if(dt=R(O),typeof dt=="function")for(O=dt.call(O),dt=0;!(he=O.next()).done;)he=he.value,De=Pt+Qe(he,dt++),Ue+=$(he,Z,oe,De,Ae);else if(De==="object"){if(typeof O.then=="function")return $(Re(O),Z,oe,he,Ae);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ae(O,Z,oe){if(O==null)return O;var he=[],Ae=0;return $(O,he,"","",function(De){return Z.call(oe,De,Ae++)}),he}function ve(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var Ye=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ke={map:ae,forEach:function(O,Z,oe){ae(O,function(){Z.apply(this,arguments)},oe)},count:function(O){var Z=0;return ae(O,function(){Z++}),Z},toArray:function(O){return ae(O,function(Z){return Z})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ne.Activity=T,Ne.Children=Ke,Ne.Component=ee,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Ne.cache=function(O){return function(){return O.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(O,Z,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var he=z({},O.props),Ae=O.key;if(Z!=null)for(De in Z.key!==void 0&&(Ae=""+Z.key),Z)!N.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(he[De]=Z[De]);var De=arguments.length-2;if(De===1)he.children=oe;else if(1<De){for(var Ue=Array(De),Pt=0;Pt<De;Pt++)Ue[Pt]=arguments[Pt+2];he.children=Ue}return x(O.type,Ae,he)},Ne.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Ne.createElement=function(O,Z,oe){var he,Ae={},De=null;if(Z!=null)for(he in Z.key!==void 0&&(De=""+Z.key),Z)N.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=Z[he]);var Ue=arguments.length-2;if(Ue===1)Ae.children=oe;else if(1<Ue){for(var Pt=Array(Ue),dt=0;dt<Ue;dt++)Pt[dt]=arguments[dt+2];Ae.children=Pt}if(O&&O.defaultProps)for(he in Ue=O.defaultProps,Ue)Ae[he]===void 0&&(Ae[he]=Ue[he]);return x(O,De,Ae)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:d,render:O}},Ne.isValidElement=P,Ne.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ve}},Ne.memo=function(O,Z){return{$$typeof:m,type:O,compare:Z===void 0?null:Z}},Ne.startTransition=function(O){var Z=D.T,oe={};D.T=oe;try{var he=O(),Ae=D.S;Ae!==null&&Ae(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,Ye)}catch(De){Ye(De)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),D.T=Z}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(O){return D.H.use(O)},Ne.useActionState=function(O,Z,oe){return D.H.useActionState(O,Z,oe)},Ne.useCallback=function(O,Z){return D.H.useCallback(O,Z)},Ne.useContext=function(O){return D.H.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O,Z){return D.H.useDeferredValue(O,Z)},Ne.useEffect=function(O,Z){return D.H.useEffect(O,Z)},Ne.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(O,Z,oe){return D.H.useImperativeHandle(O,Z,oe)},Ne.useInsertionEffect=function(O,Z){return D.H.useInsertionEffect(O,Z)},Ne.useLayoutEffect=function(O,Z){return D.H.useLayoutEffect(O,Z)},Ne.useMemo=function(O,Z){return D.H.useMemo(O,Z)},Ne.useOptimistic=function(O,Z){return D.H.useOptimistic(O,Z)},Ne.useReducer=function(O,Z,oe){return D.H.useReducer(O,Z,oe)},Ne.useRef=function(O){return D.H.useRef(O)},Ne.useState=function(O){return D.H.useState(O)},Ne.useSyncExternalStore=function(O,Z,oe){return D.H.useSyncExternalStore(O,Z,oe)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.0",Ne}var l0;function Nm(){return l0||(l0=1,Np.exports=xR()),Np.exports}var ge=Nm();const lu=CS(ge);var Mp={exports:{}},Xl={},Dp={exports:{}},kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function NR(){return u0||(u0=1,(function(n){function e($,ae){var ve=$.length;$.push(ae);e:for(;0<ve;){var Ye=ve-1>>>1,Ke=$[Ye];if(0<o(Ke,ae))$[Ye]=ae,$[ve]=Ke,ve=Ye;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ae=$[0],ve=$.pop();if(ve!==ae){$[0]=ve;e:for(var Ye=0,Ke=$.length,O=Ke>>>1;Ye<O;){var Z=2*(Ye+1)-1,oe=$[Z],he=Z+1,Ae=$[he];if(0>o(oe,ve))he<Ke&&0>o(Ae,oe)?($[Ye]=Ae,$[he]=ve,Ye=he):($[Ye]=oe,$[Z]=ve,Ye=Z);else if(he<Ke&&0>o(Ae,ve))$[Ye]=Ae,$[he]=ve,Ye=he;else break e}}return ae}function o($,ae){var ve=$.sortIndex-ae.sortIndex;return ve!==0?ve:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,T=null,S=3,R=!1,L=!1,z=!1,B=!1,ee=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ie($){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=$)i(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function de($){if(z=!1,ie($),!L)if(t(p)!==null)L=!0,ue||(ue=!0,k());else{var ae=t(m);ae!==null&&Re(de,ae.startTime-$)}}var ue=!1,D=-1,N=5,x=-1;function V(){return B?!0:!(n.unstable_now()-x<N)}function P(){if(B=!1,ue){var $=n.unstable_now();x=$;var ae=!0;try{e:{L=!1,z&&(z=!1,Y(D),D=-1),R=!0;var ve=S;try{t:{for(ie($),T=t(p);T!==null&&!(T.expirationTime>$&&V());){var Ye=T.callback;if(typeof Ye=="function"){T.callback=null,S=T.priorityLevel;var Ke=Ye(T.expirationTime<=$);if($=n.unstable_now(),typeof Ke=="function"){T.callback=Ke,ie($),ae=!0;break t}T===t(p)&&i(p),ie($)}else i(p);T=t(p)}if(T!==null)ae=!0;else{var O=t(m);O!==null&&Re(de,O.startTime-$),ae=!1}}break e}finally{T=null,S=ve,R=!1}ae=void 0}}finally{ae?k():ue=!1}}}var k;if(typeof W=="function")k=function(){W(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Qe=M.port2;M.port1.onmessage=P,k=function(){Qe.postMessage(null)}}else k=function(){ee(P,0)};function Re($,ae){D=ee(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ve=S;S=ae;try{return $()}finally{S=ve}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=S;S=$;try{return ae()}finally{S=ve}},n.unstable_scheduleCallback=function($,ae,ve){var Ye=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ye+ve:Ye):ve=Ye,$){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ve+Ke,$={id:v++,callback:ae,priorityLevel:$,startTime:ve,expirationTime:Ke,sortIndex:-1},ve>Ye?($.sortIndex=ve,e(m,$),t(p)===null&&$===t(m)&&(z?(Y(D),D=-1):z=!0,Re(de,ve-Ye))):($.sortIndex=Ke,e(p,$),L||R||(L=!0,ue||(ue=!0,k()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var ae=S;return function(){var ve=S;S=ae;try{return $.apply(this,arguments)}finally{S=ve}}}})(kp)),kp}var c0;function MR(){return c0||(c0=1,Dp.exports=NR()),Dp.exports}var Pp={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function DR(){if(d0)return dn;d0=1;var n=Nm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},dn.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},dn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},dn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},dn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},dn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},dn.requestFormReset=function(p){i.d.r(p)},dn.unstable_batchedUpdates=function(p,m){return p(m)},dn.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var f0;function kR(){if(f0)return Pp.exports;f0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pp.exports=DR(),Pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function PR(){if(h0)return Xl;h0=1;var n=MR(),e=Nm(),t=kR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),s;if(_===c)return p(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,c=_;break}if(w===c){C=!0,c=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,c=y;break}if(w===c){C=!0,c=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function Qe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case z:return"Fragment";case ee:return"Profiler";case B:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case W:return s.displayName||"Context";case Y:return(s._context.displayName||"Context")+".Consumer";case ie:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:Qe(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return Qe(s(r))}catch{}}return null}var Re=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ye=[],Ke=-1;function O(s){return{current:s}}function Z(s){0>Ke||(s.current=Ye[Ke],Ye[Ke]=null,Ke--)}function oe(s,r){Ke++,Ye[Ke]=s.current,s.current=r}var he=O(null),Ae=O(null),De=O(null),Ue=O(null);function Pt(s,r){switch(oe(De,r),oe(Ae,s),oe(he,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?bv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=bv(r),s=xv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(he),oe(he,s)}function dt(){Z(he),Z(Ae),Z(De)}function Kn(s){s.memoizedState!==null&&oe(Ue,s);var r=he.current,l=xv(r,s.type);r!==l&&(oe(Ae,s),oe(he,l))}function ci(s){Ae.current===s&&(Z(he),Z(Ae)),Ue.current===s&&(Z(Ue),Kl._currentValue=ve)}var Ai,Ds;function Vn(s){if(Ai===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Ai=r&&r[1]||"",Ds=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ai+s+Ds}var Ki=!1;function ks(s,r){if(!s||Ki)return"";Ki=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var K=Q}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Q){K=Q}s.call(ne.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var U=C.split(`
`),J=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var X=`
`+U[c].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=c&&0<=y);break}}}finally{Ki=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Vn(l):""}function $r(s,r){switch(s.tag){case 26:case 27:case 5:return Vn(s.type);case 16:return Vn("Lazy");case 13:return s.child!==r&&r!==null?Vn("Suspense Fallback"):Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return ks(s.type,!1);case 11:return ks(s.type.render,!1);case 1:return ks(s.type,!0);case 31:return Vn("Activity");default:return""}}function Bo(s){try{var r="",l=null;do r+=$r(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ps=Object.prototype.hasOwnProperty,$i=n.unstable_scheduleCallback,di=n.unstable_cancelCallback,ce=n.unstable_shouldYield,we=n.unstable_requestPaint,be=n.unstable_now,ft=n.unstable_getCurrentPriorityLevel,We=n.unstable_ImmediatePriority,nt=n.unstable_UserBlockingPriority,vt=n.unstable_NormalPriority,Et=n.unstable_LowPriority,Cn=n.unstable_IdlePriority,Xt=n.log,Vt=n.unstable_setDisableYieldValue,Vs=null,un=null;function $n(s){if(typeof Xt=="function"&&Vt(s),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Vs,s)}catch{}}var yn=Math.clz32?Math.clz32:Lu,xf=Math.log,Xa=Math.LN2;function Lu(s){return s>>>=0,s===0?32:31-(xf(s)/Xa|0)|0}var Qr=256,Ci=262144,Us=4194304;function fi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Qn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=fi(c):(C&=w,C!==0?y=fi(C):l||(l=w&~s,l!==0&&(y=fi(l))))):(w=c&~_,w!==0?y=fi(w):C!==0?y=fi(C):l||(l=c&~s,l!==0&&(y=fi(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Ls(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Fo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Za(){var s=Us;return Us<<=1,(Us&62914560)===0&&(Us=4194304),s}function Qi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Os(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zt(s,r,l,c,y,_){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,U=s.expirationTimes,J=s.hiddenUpdates;for(l=C&~l;0<l;){var X=31-yn(l),ne=1<<X;w[X]=0,U[X]=-1;var K=J[X];if(K!==null)for(J[X]=null,X=0;X<K.length;X++){var Q=K[X];Q!==null&&(Q.lane&=-536870913)}l&=~ne}c!==0&&el(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(C&~r))}function el(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-yn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function qs(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-yn(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Bs(s,r){var l=r&-r;return l=(l&42)!==0?1:tl(l),(l&(s.suspendedLanes|r))!==0?0:l}function tl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function nl(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Wi(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Xv(s.type))}function Ou(s,r){var l=ae.p;try{return ae.p=s,r()}finally{ae.p=l}}var Ii=Math.random().toString(36).slice(2),At="__reactFiber$"+Ii,en="__reactProps$"+Ii,wi="__reactContainer$"+Ii,Fs="__reactEvents$"+Ii,Ri="__reactListeners$"+Ii,qu="__reactHandles$"+Ii,il="__reactResources$"+Ii,ji="__reactMarker$"+Ii;function Wr(s){delete s[At],delete s[en],delete s[Fs],delete s[Ri],delete s[qu]}function Xi(s){var r=s[At];if(r)return r;for(var l=s.parentNode;l;){if(r=l[wi]||l[At]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Uv(s);s!==null;){if(l=s[At])return l;s=Uv(s)}return r}s=l,l=s.parentNode}return null}function Zi(s){if(s=s[At]||s[wi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function jr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function hi(s){var r=s[il];return r||(r=s[il]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function xt(s){s[ji]=!0}var zo=new Set,zs={};function _n(s,r){bi(s,r),bi(s+"Capture",r)}function bi(s,r){for(zs[s]=r,s=0;s<r.length;s++)zo.add(r[s])}var Nf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sl={},rl={};function Bu(s){return Ps.call(rl,s)?!0:Ps.call(sl,s)?!1:Nf.test(s)?rl[s]=!0:(sl[s]=!0,!1)}function Hs(s,r,l){if(Bu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Gs(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Wn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fu(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Mf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){l=""+C,_.call(this,C)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Ho(s){if(!s._valueTracker){var r=Fu(s)?"checked":"value";s._valueTracker=Mf(s,r,""+s[r])}}function ol(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Fu(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Go(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var es=/[\n"\\]/g;function Ct(s){return s.replace(es,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Js(s,r,l,c,y,_,C,w){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+vn(r)):s.value!==""+vn(r)&&(s.value=""+vn(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?Jo(s,C,vn(r)):l!=null?Jo(s,C,vn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+vn(w):s.removeAttribute("name")}function Xr(s,r,l,c,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Ho(s);return}l=l!=null?""+vn(l):"",r=r!=null?""+vn(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),Ho(s)}function Jo(s,r,l){r==="number"&&Go(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function je(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+vn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Zr(s,r,l){if(r!=null&&(r=""+vn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+vn(l):""}function Ys(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(Re(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=vn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Ho(s)}function jn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Df=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function al(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Df.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function zu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&al(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&al(s,_,r[_])}function ll(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xi(s){return Pf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Kt(){}var Yo=null;function Ko(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ts=null,Un=null;function Hu(s){var r=Zi(s);if(r&&(s=r.stateNode)){var l=s[en]||null;e:switch(s=r.stateNode,r.type){case"input":if(Js(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ct(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[en]||null;if(!y)throw Error(i(90));Js(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&ol(c)}break e;case"textarea":Zr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&je(s,!!l.multiple,r,!1)}}}var ul=!1;function Gu(s,r,l){if(ul)return s(r,l);ul=!0;try{var c=s(r);return c}finally{if(ul=!1,(ts!==null||Un!==null)&&(Bc(),ts&&(r=ts,s=Un,Un=ts=null,Hu(r),s)))for(r=0;r<s.length;r++)Hu(s[r])}}function In(s,r){var l=s.stateNode;if(l===null)return null;var c=l[en]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(pi)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){cl=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{cl=!1}var Ln=null,$o=null,Mi=null;function Ks(){if(Mi)return Mi;var s,r=$o,l=r.length,c,y="value"in Ln?Ln.value:Ln.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var C=l-s;for(c=1;c<=C&&r[l-c]===y[_-c];c++);return Mi=y.slice(s,1<c?1-c:void 0)}function eo(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function $s(){return!0}function ht(){return!1}function cn(s){function r(l,c,y,_,C){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$s:ht,this.isPropagationStopped=ht,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),r}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=cn(ns),Qs=T({},ns,{view:0,detail:0}),Ju=cn(Qs),Ws,Qo,Tn,no=T({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Tn&&(Tn&&s.type==="mousemove"?(Ws=s.screenX-Tn.screenX,Qo=s.screenY-Tn.screenY):Qo=Ws=0,Tn=s),Ws)},movementY:function(s){return"movementY"in s?s.movementY:Qo}}),Yu=cn(no),io=T({},no,{dataTransfer:0}),Ku=cn(io),dl=T({},Qs,{relatedTarget:0}),js=cn(dl),$u=T({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Wo=cn($u),Vf=T({},ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qu=cn(Vf),so=T({},ns,{data:0}),fl=cn(so),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=pl[s])?!!r[s]:!1}function Xs(){return ju}var Xu=T({},Qs,{key:function(s){if(s.key){var r=Wu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=eo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(s){return s.type==="keypress"?eo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?eo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Zu=cn(Xu),is=T({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=cn(is),ec=T({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),tc=cn(ec),nc=T({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),jo=cn(nc),En=T({},no,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ic=cn(En),sc=T({},ns,{newState:0,oldState:0}),Zs=cn(sc),h=[9,13,27,32],E=pi&&"CompositionEvent"in window,I=null;pi&&"documentMode"in document&&(I=document.documentMode);var b=pi&&"TextEvent"in window&&!I,H=pi&&(!E||I&&8<I&&11>=I),j=" ",le=!1;function it(s,r){switch(s){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Le=!1;function $t(s,r){switch(s){case"compositionend":return Ut(r);case"keypress":return r.which!==32?null:(le=!0,j);case"textInput":return s=r.data,s===j&&le?null:s;default:return null}}function Qt(s,r){if(Le)return s==="compositionend"||!E&&it(s,r)?(s=Ks(),Mi=$o=Ln=null,Le=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return H&&r.locale!=="ko"?null:r.data;default:return null}}var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!er[s.type]:r==="textarea"}function ro(s,r,l,c){ts?Un?Un.push(c):Un=[c]:ts=c,r=Kc(r,"onChange"),0<r.length&&(l=new to("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var ss=null,gl=null;function ew(s){Sv(s,0)}function rc(s){var r=jr(s);if(ol(r))return s}function Fg(s,r){if(s==="change")return r}var zg=!1;if(pi){var Uf;if(pi){var Lf="oninput"in document;if(!Lf){var Hg=document.createElement("div");Hg.setAttribute("oninput","return;"),Lf=typeof Hg.oninput=="function"}Uf=Lf}else Uf=!1;zg=Uf&&(!document.documentMode||9<document.documentMode)}function Gg(){ss&&(ss.detachEvent("onpropertychange",Jg),gl=ss=null)}function Jg(s){if(s.propertyName==="value"&&rc(gl)){var r=[];ro(r,gl,s,Ko(s)),Gu(ew,r)}}function tw(s,r,l){s==="focusin"?(Gg(),ss=r,gl=l,ss.attachEvent("onpropertychange",Jg)):s==="focusout"&&Gg()}function nw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rc(gl)}function iw(s,r){if(s==="click")return rc(r)}function sw(s,r){if(s==="input"||s==="change")return rc(r)}function rw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var On=typeof Object.is=="function"?Object.is:rw;function yl(s,r){if(On(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Ps.call(r,y)||!On(s[y],r[y]))return!1}return!0}function Yg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kg(s,r){var l=Yg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yg(l)}}function $g(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?$g(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Qg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Go(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Go(s.document)}return r}function Of(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var ow=pi&&"documentMode"in document&&11>=document.documentMode,Xo=null,qf=null,_l=null,Bf=!1;function Wg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bf||Xo==null||Xo!==Go(c)||(c=Xo,"selectionStart"in c&&Of(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),_l&&yl(_l,c)||(_l=c,c=Kc(qf,"onSelect"),0<c.length&&(r=new to("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Xo)))}function oo(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Zo={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},Ff={},jg={};pi&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function ao(s){if(Ff[s])return Ff[s];if(!Zo[s])return s;var r=Zo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in jg)return Ff[s]=r[l];return s}var Xg=ao("animationend"),Zg=ao("animationiteration"),ey=ao("animationstart"),aw=ao("transitionrun"),lw=ao("transitionstart"),uw=ao("transitioncancel"),ty=ao("transitionend"),ny=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function mi(s,r){ny.set(s,r),_n(r,[s])}var oc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xn=[],ea=0,Hf=0;function ac(){for(var s=ea,r=Hf=ea=0;r<s;){var l=Xn[r];Xn[r++]=null;var c=Xn[r];Xn[r++]=null;var y=Xn[r];Xn[r++]=null;var _=Xn[r];if(Xn[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}_!==0&&iy(l,y,_)}}function lc(s,r,l,c){Xn[ea++]=s,Xn[ea++]=r,Xn[ea++]=l,Xn[ea++]=c,Hf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Gf(s,r,l,c){return lc(s,r,l,c),uc(s)}function lo(s,r){return lc(s,null,null,r),uc(s)}function iy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-yn(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function uc(s){if(50<Bl)throw Bl=0,Zh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ta={};function cw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(s,r,l,c){return new cw(s,r,l,c)}function Jf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function rs(s,r){var l=s.alternate;return l===null?(l=qn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function sy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function cc(s,r,l,c,y,_){var C=0;if(c=s,typeof s=="function")Jf(s)&&(C=1);else if(typeof s=="string")C=mR(s,l,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=qn(31,l,r,y),s.elementType=x,s.lanes=_,s;case z:return uo(l.children,y,_,r);case B:C=8,y|=24;break;case ee:return s=qn(12,l,r,y|2),s.elementType=ee,s.lanes=_,s;case de:return s=qn(13,l,r,y),s.elementType=de,s.lanes=_,s;case ue:return s=qn(19,l,r,y),s.elementType=ue,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:C=10;break e;case Y:C=9;break e;case ie:C=11;break e;case D:C=14;break e;case N:C=16,c=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=qn(C,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function uo(s,r,l,c){return s=qn(7,s,c,r),s.lanes=l,s}function Yf(s,r,l){return s=qn(6,s,null,r),s.lanes=l,s}function ry(s){var r=qn(18,null,null,0);return r.stateNode=s,r}function Kf(s,r,l){return r=qn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var oy=new WeakMap;function Zn(s,r){if(typeof s=="object"&&s!==null){var l=oy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Bo(r)},oy.set(s,r),r)}return{value:s,source:r,stack:Bo(r)}}var na=[],ia=0,dc=null,vl=0,ei=[],ti=0,tr=null,Di=1,ki="";function os(s,r){na[ia++]=vl,na[ia++]=dc,dc=s,vl=r}function ay(s,r,l){ei[ti++]=Di,ei[ti++]=ki,ei[ti++]=tr,tr=s;var c=Di;s=ki;var y=32-yn(c)-1;c&=~(1<<y),l+=1;var _=32-yn(r)+y;if(30<_){var C=y-y%5;_=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Di=1<<32-yn(r)+y|l<<y|c,ki=_+s}else Di=1<<_|l<<y|c,ki=s}function $f(s){s.return!==null&&(os(s,1),ay(s,1,0))}function Qf(s){for(;s===dc;)dc=na[--ia],na[ia]=null,vl=na[--ia],na[ia]=null;for(;s===tr;)tr=ei[--ti],ei[ti]=null,ki=ei[--ti],ei[ti]=null,Di=ei[--ti],ei[ti]=null}function ly(s,r){ei[ti++]=Di,ei[ti++]=ki,ei[ti++]=tr,Di=r.id,ki=r.overflow,tr=s}var tn=null,pt=null,Je=!1,nr=null,ni=!1,Wf=Error(i(519));function ir(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Zn(r,s)),Wf}function uy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[At]=s,r[en]=c,l){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(l=0;l<zl.length;l++)Be(zl[l],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),Xr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),Ys(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||wv(r.textContent,l)?(c.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),c.onScroll!=null&&Be("scroll",r),c.onScrollEnd!=null&&Be("scrollend",r),c.onClick!=null&&(r.onclick=Kt),r=!0):r=!1,r||ir(s,!0)}function cy(s){for(tn=s.return;tn;)switch(tn.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:tn=tn.return}}function sa(s){if(s!==tn)return!1;if(!Je)return cy(s),Je=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||pp(s.type,s.memoizedProps)),l=!l),l&&pt&&ir(s),cy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=Vv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=Vv(s)}else r===27?(r=pt,yr(s.type)?(s=vp,vp=null,pt=s):pt=r):pt=tn?si(s.stateNode.nextSibling):null;return!0}function co(){pt=tn=null,Je=!1}function jf(){var s=nr;return s!==null&&(Nn===null?Nn=s:Nn.push.apply(Nn,s),nr=null),s}function Tl(s){nr===null?nr=[s]:nr.push(s)}var Xf=O(null),fo=null,as=null;function sr(s,r,l){oe(Xf,r._currentValue),r._currentValue=l}function ls(s){s._currentValue=Xf.current,Z(Xf)}function Zf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function eh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var U=0;U<r.length;U++)if(w.context===r[U]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Zf(_.return,l,s),c||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Zf(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function ra(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;On(y.pendingProps.value,C.value)||(s!==null?s.push(w):s=[w])}}else if(y===Ue.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Kl):s=[Kl])}y=y.return}s!==null&&eh(r,s,l,c),r.flags|=262144}function fc(s){for(s=s.firstContext;s!==null;){if(!On(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ho(s){fo=s,as=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return dy(fo,s)}function hc(s,r){return fo===null&&ho(s),dy(s,r)}function dy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},as===null){if(s===null)throw Error(i(308));as=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else as=as.next=r;return l}var dw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},fw=n.unstable_scheduleCallback,hw=n.unstable_NormalPriority,Lt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function th(){return{controller:new dw,data:new Map,refCount:0}}function El(s){s.refCount--,s.refCount===0&&fw(hw,function(){s.controller.abort()})}var Sl=null,nh=0,oa=0,aa=null;function pw(s,r){if(Sl===null){var l=Sl=[];nh=0,oa=rp(),aa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return nh++,r.then(fy,fy),r}function fy(){if(--nh===0&&Sl!==null){aa!==null&&(aa.status="fulfilled");var s=Sl;Sl=null,oa=0,aa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function mw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var hy=$.S;$.S=function(s,r){W_=be(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&pw(s,r),hy!==null&&hy(s,r)};var po=O(null);function ih(){var s=po.current;return s!==null?s:ct.pooledCache}function pc(s,r){r===null?oe(po,po.current):oe(po,r.pool)}function py(){var s=ih();return s===null?null:{parent:Lt._currentValue,pool:s}}var la=Error(i(460)),sh=Error(i(474)),mc=Error(i(542)),gc={then:function(){}};function my(s){return s=s.status,s==="fulfilled"||s==="rejected"}function gy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Kt,Kt),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,_y(s),s;default:if(typeof r.status=="string")r.then(Kt,Kt);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,_y(s),s}throw go=r,la}}function mo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(go=l,la):l}}var go=null;function yy(){if(go===null)throw Error(i(459));var s=go;return go=null,s}function _y(s){if(s===la||s===mc)throw Error(i(483))}var ua=null,Al=0;function yc(s){var r=Al;return Al+=1,ua===null&&(ua=[]),gy(ua,s,r)}function Cl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function _c(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function vy(s){function r(F,q){if(s){var G=F.deletions;G===null?(F.deletions=[q],F.flags|=16):G.push(q)}}function l(F,q){if(!s)return null;for(;q!==null;)r(F,q),q=q.sibling;return null}function c(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function y(F,q){return F=rs(F,q),F.index=0,F.sibling=null,F}function _(F,q,G){return F.index=G,s?(G=F.alternate,G!==null?(G=G.index,G<q?(F.flags|=67108866,q):G):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function C(F){return s&&F.alternate===null&&(F.flags|=67108866),F}function w(F,q,G,te){return q===null||q.tag!==6?(q=Yf(G,F.mode,te),q.return=F,q):(q=y(q,G),q.return=F,q)}function U(F,q,G,te){var Te=G.type;return Te===z?X(F,q,G.props.children,te,G.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&mo(Te)===q.type)?(q=y(q,G.props),Cl(q,G),q.return=F,q):(q=cc(G.type,G.key,G.props,null,F.mode,te),Cl(q,G),q.return=F,q)}function J(F,q,G,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=Kf(G,F.mode,te),q.return=F,q):(q=y(q,G.children||[]),q.return=F,q)}function X(F,q,G,te,Te){return q===null||q.tag!==7?(q=uo(G,F.mode,te,Te),q.return=F,q):(q=y(q,G),q.return=F,q)}function ne(F,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Yf(""+q,F.mode,G),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return G=cc(q.type,q.key,q.props,null,F.mode,G),Cl(G,q),G.return=F,G;case L:return q=Kf(q,F.mode,G),q.return=F,q;case N:return q=mo(q),ne(F,q,G)}if(Re(q)||k(q))return q=uo(q,F.mode,G,null),q.return=F,q;if(typeof q.then=="function")return ne(F,yc(q),G);if(q.$$typeof===W)return ne(F,hc(F,q),G);_c(F,q)}return null}function K(F,q,G,te){var Te=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:w(F,q,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return G.key===Te?U(F,q,G,te):null;case L:return G.key===Te?J(F,q,G,te):null;case N:return G=mo(G),K(F,q,G,te)}if(Re(G)||k(G))return Te!==null?null:X(F,q,G,te,null);if(typeof G.then=="function")return K(F,q,yc(G),te);if(G.$$typeof===W)return K(F,q,hc(F,G),te);_c(F,G)}return null}function Q(F,q,G,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get(G)||null,w(q,F,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return F=F.get(te.key===null?G:te.key)||null,U(q,F,te,Te);case L:return F=F.get(te.key===null?G:te.key)||null,J(q,F,te,Te);case N:return te=mo(te),Q(F,q,G,te,Te)}if(Re(te)||k(te))return F=F.get(G)||null,X(q,F,te,Te,null);if(typeof te.then=="function")return Q(F,q,G,yc(te),Te);if(te.$$typeof===W)return Q(F,q,G,hc(q,te),Te);_c(q,te)}return null}function me(F,q,G,te){for(var Te=null,Xe=null,_e=q,Pe=q=0,ze=null;_e!==null&&Pe<G.length;Pe++){_e.index>Pe?(ze=_e,_e=null):ze=_e.sibling;var Ze=K(F,_e,G[Pe],te);if(Ze===null){_e===null&&(_e=ze);break}s&&_e&&Ze.alternate===null&&r(F,_e),q=_(Ze,q,Pe),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze,_e=ze}if(Pe===G.length)return l(F,_e),Je&&os(F,Pe),Te;if(_e===null){for(;Pe<G.length;Pe++)_e=ne(F,G[Pe],te),_e!==null&&(q=_(_e,q,Pe),Xe===null?Te=_e:Xe.sibling=_e,Xe=_e);return Je&&os(F,Pe),Te}for(_e=c(_e);Pe<G.length;Pe++)ze=Q(_e,F,Pe,G[Pe],te),ze!==null&&(s&&ze.alternate!==null&&_e.delete(ze.key===null?Pe:ze.key),q=_(ze,q,Pe),Xe===null?Te=ze:Xe.sibling=ze,Xe=ze);return s&&_e.forEach(function(Sr){return r(F,Sr)}),Je&&os(F,Pe),Te}function Se(F,q,G,te){if(G==null)throw Error(i(151));for(var Te=null,Xe=null,_e=q,Pe=q=0,ze=null,Ze=G.next();_e!==null&&!Ze.done;Pe++,Ze=G.next()){_e.index>Pe?(ze=_e,_e=null):ze=_e.sibling;var Sr=K(F,_e,Ze.value,te);if(Sr===null){_e===null&&(_e=ze);break}s&&_e&&Sr.alternate===null&&r(F,_e),q=_(Sr,q,Pe),Xe===null?Te=Sr:Xe.sibling=Sr,Xe=Sr,_e=ze}if(Ze.done)return l(F,_e),Je&&os(F,Pe),Te;if(_e===null){for(;!Ze.done;Pe++,Ze=G.next())Ze=ne(F,Ze.value,te),Ze!==null&&(q=_(Ze,q,Pe),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze);return Je&&os(F,Pe),Te}for(_e=c(_e);!Ze.done;Pe++,Ze=G.next())Ze=Q(_e,F,Pe,Ze.value,te),Ze!==null&&(s&&Ze.alternate!==null&&_e.delete(Ze.key===null?Pe:Ze.key),q=_(Ze,q,Pe),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze);return s&&_e.forEach(function(wR){return r(F,wR)}),Je&&os(F,Pe),Te}function ut(F,q,G,te){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case R:e:{for(var Te=G.key;q!==null;){if(q.key===Te){if(Te=G.type,Te===z){if(q.tag===7){l(F,q.sibling),te=y(q,G.props.children),te.return=F,F=te;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&mo(Te)===q.type){l(F,q.sibling),te=y(q,G.props),Cl(te,G),te.return=F,F=te;break e}l(F,q);break}else r(F,q);q=q.sibling}G.type===z?(te=uo(G.props.children,F.mode,te,G.key),te.return=F,F=te):(te=cc(G.type,G.key,G.props,null,F.mode,te),Cl(te,G),te.return=F,F=te)}return C(F);case L:e:{for(Te=G.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){l(F,q.sibling),te=y(q,G.children||[]),te.return=F,F=te;break e}else{l(F,q);break}else r(F,q);q=q.sibling}te=Kf(G,F.mode,te),te.return=F,F=te}return C(F);case N:return G=mo(G),ut(F,q,G,te)}if(Re(G))return me(F,q,G,te);if(k(G)){if(Te=k(G),typeof Te!="function")throw Error(i(150));return G=Te.call(G),Se(F,q,G,te)}if(typeof G.then=="function")return ut(F,q,yc(G),te);if(G.$$typeof===W)return ut(F,q,hc(F,G),te);_c(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(l(F,q.sibling),te=y(q,G),te.return=F,F=te):(l(F,q),te=Yf(G,F.mode,te),te.return=F,F=te),C(F)):l(F,q)}return function(F,q,G,te){try{Al=0;var Te=ut(F,q,G,te);return ua=null,Te}catch(_e){if(_e===la||_e===mc)throw _e;var Xe=qn(29,_e,null,F.mode);return Xe.lanes=te,Xe.return=F,Xe}finally{}}}var yo=vy(!0),Ty=vy(!1),rr=!1;function rh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function or(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ar(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=uc(s),iy(s,null,l),r}return lc(s,c,r,l),uc(s)}function Il(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,qs(s,l)}}function ah(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var lh=!1;function wl(){if(lh){var s=aa;if(s!==null)throw s}}function Rl(s,r,l,c){lh=!1;var y=s.updateQueue;rr=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,J=U.next;U.next=null,C===null?_=J:C.next=J,C=U;var X=s.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==C&&(w===null?X.firstBaseUpdate=J:w.next=J,X.lastBaseUpdate=U))}if(_!==null){var ne=y.baseState;C=0,X=J=U=null,w=_;do{var K=w.lane&-536870913,Q=K!==w.lane;if(Q?(Fe&K)===K:(c&K)===K){K!==0&&K===oa&&(lh=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=s,Se=w;K=r;var ut=l;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ne=me.call(ut,ne,K);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,K=typeof me=="function"?me.call(ut,ne,K):me,K==null)break e;ne=T({},ne,K);break e;case 2:rr=!0}}K=w.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(J=X=Q,U=ne):X=X.next=Q,C|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);X===null&&(U=ne),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=X,_===null&&(y.shared.lanes=0),fr|=C,s.lanes=C,s.memoizedState=ne}}function Ey(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Sy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ey(l[s],r)}var ca=O(null),vc=O(0);function Ay(s,r){s=ys,oe(vc,s),oe(ca,r),ys=s|r.baseLanes}function uh(){oe(vc,ys),oe(ca,ca.current)}function ch(){ys=vc.current,Z(ca),Z(vc)}var Bn=O(null),ii=null;function lr(s){var r=s.alternate;oe(Nt,Nt.current&1),oe(Bn,s),ii===null&&(r===null||ca.current!==null||r.memoizedState!==null)&&(ii=s)}function dh(s){oe(Nt,Nt.current),oe(Bn,s),ii===null&&(ii=s)}function Cy(s){s.tag===22?(oe(Nt,Nt.current),oe(Bn,s),ii===null&&(ii=s)):ur()}function ur(){oe(Nt,Nt.current),oe(Bn,Bn.current)}function Fn(s){Z(Bn),ii===s&&(ii=null),Z(Nt)}var Nt=O(0);function Tc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||yp(l)||_p(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var us=0,ke=null,at=null,Ot=null,Ec=!1,da=!1,_o=!1,Sc=0,bl=0,fa=null,gw=0;function It(){throw Error(i(321))}function fh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!On(s[l],r[l]))return!1;return!0}function hh(s,r,l,c,y,_){return us=_,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=s===null||s.memoizedState===null?a_:bh,_o=!1,_=l(c,y),_o=!1,da&&(_=wy(r,l,c,y)),Iy(s),_}function Iy(s){$.H=Ml;var r=at!==null&&at.next!==null;if(us=0,Ot=at=ke=null,Ec=!1,bl=0,fa=null,r)throw Error(i(300));s===null||qt||(s=s.dependencies,s!==null&&fc(s)&&(qt=!0))}function wy(s,r,l,c){ke=s;var y=0;do{if(da&&(fa=null),bl=0,da=!1,25<=y)throw Error(i(301));if(y+=1,Ot=at=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=l_,_=r(l,c)}while(da);return _}function yw(){var s=$.H,r=s.useState()[0];return r=typeof r.then=="function"?xl(r):r,s=s.useState()[0],(at!==null?at.memoizedState:null)!==s&&(ke.flags|=1024),r}function ph(){var s=Sc!==0;return Sc=0,s}function mh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function gh(s){if(Ec){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ec=!1}us=0,Ot=at=ke=null,da=!1,bl=Sc=0,fa=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ke.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function Mt(){if(at===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=at.next;var r=Ot===null?ke.memoizedState:Ot.next;if(r!==null)Ot=r,at=s;else{if(s===null)throw ke.alternate===null?Error(i(467)):Error(i(310));at=s,s={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ot===null?ke.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(s){var r=bl;return bl+=1,fa===null&&(fa=[]),s=gy(fa,s,r),r=ke,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?a_:bh),s}function Cc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return xl(s);if(s.$$typeof===W)return nn(s)}throw Error(i(438,String(s)))}function yh(s){var r=null,l=ke.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ac(),ke.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=V;return r.index++,l}function cs(s,r){return typeof r=="function"?r(s):r}function Ic(s){var r=Mt();return _h(r,at,s)}function _h(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var w=C=null,U=null,J=r,X=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Fe&ne)===ne:(us&ne)===ne){var K=J.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===oa&&(X=!0);else if((us&K)===K){J=J.next,K===oa&&(X=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=ne,C=_):U=U.next=ne,ke.lanes|=K,fr|=K;ne=J.action,_o&&l(_,ne),_=J.hasEagerState?J.eagerState:l(_,ne)}else K={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=K,C=_):U=U.next=K,ke.lanes|=ne,fr|=ne;J=J.next}while(J!==null&&J!==r);if(U===null?C=_:U.next=w,!On(_,s.memoizedState)&&(qt=!0,X&&(l=aa,l!==null)))throw l;s.memoizedState=_,s.baseState=C,s.baseQueue=U,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function vh(s){var r=Mt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=s(_,C.action),C=C.next;while(C!==y);On(_,r.memoizedState)||(qt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Ry(s,r,l){var c=ke,y=Mt(),_=Je;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var C=!On((at||y).memoizedState,l);if(C&&(y.memoizedState=l,qt=!0),y=y.queue,Sh(Ny.bind(null,c,y,s),[s]),y.getSnapshot!==r||C||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,ha(9,{destroy:void 0},xy.bind(null,c,y,l,r),null),ct===null)throw Error(i(349));_||(us&127)!==0||by(c,r,l)}return l}function by(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=ke.updateQueue,r===null?(r=Ac(),ke.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function xy(s,r,l,c){r.value=l,r.getSnapshot=c,My(r)&&Dy(s)}function Ny(s,r,l){return l(function(){My(r)&&Dy(s)})}function My(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!On(s,l)}catch{return!0}}function Dy(s){var r=lo(s,2);r!==null&&Mn(r,s,2)}function Th(s){var r=Sn();if(typeof s=="function"){var l=s;if(s=l(),_o){$n(!0);try{l()}finally{$n(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},r}function ky(s,r,l,c){return s.baseState=l,_h(s,at,typeof c=="function"?c:cs)}function _w(s,r,l,c,y){if(bc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};$.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Py(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Py(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=$.T,C={};$.T=C;try{var w=l(y,c),U=$.S;U!==null&&U(C,w),Vy(s,r,w)}catch(J){Eh(s,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),$.T=_}}else try{_=l(y,c),Vy(s,r,_)}catch(J){Eh(s,r,J)}}function Vy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Uy(s,r,c)},function(c){return Eh(s,r,c)}):Uy(s,r,l)}function Uy(s,r,l){r.status="fulfilled",r.value=l,Ly(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Py(s,l)))}function Eh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Ly(r),r=r.next;while(r!==c)}s.action=null}function Ly(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Oy(s,r){return r}function qy(s,r){if(Je){var l=ct.formState;if(l!==null){e:{var c=ke;if(Je){if(pt){t:{for(var y=pt,_=ni;y.nodeType!==8;){if(!_){y=null;break t}if(y=si(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pt=si(y.nextSibling),c=y.data==="F!";break e}}ir(c)}c=!1}c&&(r=l[0])}}return l=Sn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:r},l.queue=c,l=s_.bind(null,ke,c),c.dispatch=l,c=Th(!1),_=Rh.bind(null,ke,!1,c.queue),c=Sn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=_w.bind(null,ke,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function By(s){var r=Mt();return Fy(r,at,s)}function Fy(s,r,l){if(r=_h(s,r,Oy)[0],s=Ic(cs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=xl(r)}catch(C){throw C===la?mc:C}else c=r;r=Mt();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(ke.flags|=2048,ha(9,{destroy:void 0},vw.bind(null,y,l),null)),[c,_,s]}function vw(s,r){s.action=r}function zy(s){var r=Mt(),l=at;if(l!==null)return Fy(r,l,s);Mt(),r=r.memoizedState,l=Mt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ha(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=Ac(),ke.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Hy(){return Mt().memoizedState}function wc(s,r,l,c){var y=Sn();ke.flags|=s,y.memoizedState=ha(1|r,{destroy:void 0},l,c===void 0?null:c)}function Rc(s,r,l,c){var y=Mt();c=c===void 0?null:c;var _=y.memoizedState.inst;at!==null&&c!==null&&fh(c,at.memoizedState.deps)?y.memoizedState=ha(r,_,l,c):(ke.flags|=s,y.memoizedState=ha(1|r,_,l,c))}function Gy(s,r){wc(8390656,8,s,r)}function Sh(s,r){Rc(2048,8,s,r)}function Tw(s){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=Ac(),ke.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function Jy(s){var r=Mt().memoizedState;return Tw({ref:r,nextImpl:s}),function(){if((tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Yy(s,r){return Rc(4,2,s,r)}function Ky(s,r){return Rc(4,4,s,r)}function $y(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Qy(s,r,l){l=l!=null?l.concat([s]):null,Rc(4,4,$y.bind(null,r,s),l)}function Ah(){}function Wy(s,r){var l=Mt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&fh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function jy(s,r){var l=Mt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&fh(r,c[1]))return c[0];if(c=s(),_o){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c}function Ch(s,r,l){return l===void 0||(us&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=X_(),ke.lanes|=s,fr|=s,l)}function Xy(s,r,l,c){return On(l,r)?l:ca.current!==null?(s=Ch(s,l,c),On(s,r)||(qt=!0),s):(us&42)===0||(us&1073741824)!==0&&(Fe&261930)===0?(qt=!0,s.memoizedState=l):(s=X_(),ke.lanes|=s,fr|=s,r)}function Zy(s,r,l,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var C=$.T,w={};$.T=w,Rh(s,!1,r,l);try{var U=y(),J=$.S;if(J!==null&&J(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=mw(U,c);Nl(s,r,X,Gn(s))}else Nl(s,r,c,Gn(s))}catch(ne){Nl(s,r,{then:function(){},status:"rejected",reason:ne},Gn())}finally{ae.p=_,C!==null&&w.types!==null&&(C.types=w.types),$.T=C}}function Ew(){}function Ih(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=e_(s).queue;Zy(s,y,r,ve,l===null?Ew:function(){return t_(s),l(c)})}function e_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:ve},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function t_(s){var r=e_(s);r.next===null&&(r=s.alternate.memoizedState),Nl(s,r.next.queue,{},Gn())}function wh(){return nn(Kl)}function n_(){return Mt().memoizedState}function i_(){return Mt().memoizedState}function Sw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Gn();s=or(l);var c=ar(r,s,l);c!==null&&(Mn(c,r,l),Il(c,r,l)),r={cache:th()},s.payload=r;return}r=r.return}}function Aw(s,r,l){var c=Gn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(s)?r_(r,l):(l=Gf(s,r,l,c),l!==null&&(Mn(l,s,c),o_(l,r,c)))}function s_(s,r,l){var c=Gn();Nl(s,r,l,c)}function Nl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(bc(s))r_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,On(w,C))return lc(s,r,y,0),ct===null&&ac(),!1}catch{}finally{}if(l=Gf(s,r,y,c),l!==null)return Mn(l,s,c),o_(l,r,c),!0}return!1}function Rh(s,r,l,c){if(c={lane:2,revertLane:rp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bc(s)){if(r)throw Error(i(479))}else r=Gf(s,l,c,2),r!==null&&Mn(r,s,2)}function bc(s){var r=s.alternate;return s===ke||r!==null&&r===ke}function r_(s,r){da=Ec=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function o_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,qs(s,l)}}var Ml={readContext:nn,use:Cc,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Ml.useEffectEvent=It;var a_={readContext:nn,use:Cc,useCallback:function(s,r){return Sn().memoizedState=[s,r===void 0?null:r],s},useContext:nn,useEffect:Gy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,wc(4194308,4,$y.bind(null,r,s),l)},useLayoutEffect:function(s,r){return wc(4194308,4,s,r)},useInsertionEffect:function(s,r){wc(4,2,s,r)},useMemo:function(s,r){var l=Sn();r=r===void 0?null:r;var c=s();if(_o){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=Sn();if(l!==void 0){var y=l(r);if(_o){$n(!0);try{l(r)}finally{$n(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Aw.bind(null,ke,s),[c.memoizedState,s]},useRef:function(s){var r=Sn();return s={current:s},r.memoizedState=s},useState:function(s){s=Th(s);var r=s.queue,l=s_.bind(null,ke,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Ah,useDeferredValue:function(s,r){var l=Sn();return Ch(l,s,r)},useTransition:function(){var s=Th(!1);return s=Zy.bind(null,ke,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=ke,y=Sn();if(Je){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ct===null)throw Error(i(349));(Fe&127)!==0||by(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Gy(Ny.bind(null,c,_,s),[s]),c.flags|=2048,ha(9,{destroy:void 0},xy.bind(null,c,_,l,r),null),l},useId:function(){var s=Sn(),r=ct.identifierPrefix;if(Je){var l=ki,c=Di;l=(c&~(1<<32-yn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Sc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=gw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:wh,useFormState:qy,useActionState:qy,useOptimistic:function(s){var r=Sn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Rh.bind(null,ke,!0,l),l.dispatch=r,[s,r]},useMemoCache:yh,useCacheRefresh:function(){return Sn().memoizedState=Sw.bind(null,ke)},useEffectEvent:function(s){var r=Sn(),l={impl:s};return r.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},bh={readContext:nn,use:Cc,useCallback:Wy,useContext:nn,useEffect:Sh,useImperativeHandle:Qy,useInsertionEffect:Yy,useLayoutEffect:Ky,useMemo:jy,useReducer:Ic,useRef:Hy,useState:function(){return Ic(cs)},useDebugValue:Ah,useDeferredValue:function(s,r){var l=Mt();return Xy(l,at.memoizedState,s,r)},useTransition:function(){var s=Ic(cs)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:xl(s),r]},useSyncExternalStore:Ry,useId:n_,useHostTransitionStatus:wh,useFormState:By,useActionState:By,useOptimistic:function(s,r){var l=Mt();return ky(l,at,s,r)},useMemoCache:yh,useCacheRefresh:i_};bh.useEffectEvent=Jy;var l_={readContext:nn,use:Cc,useCallback:Wy,useContext:nn,useEffect:Sh,useImperativeHandle:Qy,useInsertionEffect:Yy,useLayoutEffect:Ky,useMemo:jy,useReducer:vh,useRef:Hy,useState:function(){return vh(cs)},useDebugValue:Ah,useDeferredValue:function(s,r){var l=Mt();return at===null?Ch(l,s,r):Xy(l,at.memoizedState,s,r)},useTransition:function(){var s=vh(cs)[0],r=Mt().memoizedState;return[typeof s=="boolean"?s:xl(s),r]},useSyncExternalStore:Ry,useId:n_,useHostTransitionStatus:wh,useFormState:zy,useActionState:zy,useOptimistic:function(s,r){var l=Mt();return at!==null?ky(l,at,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:yh,useCacheRefresh:i_};l_.useEffectEvent=Jy;function xh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Nh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Gn(),y=or(c);y.payload=r,l!=null&&(y.callback=l),r=ar(s,y,c),r!==null&&(Mn(r,s,c),Il(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Gn(),y=or(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=ar(s,y,c),r!==null&&(Mn(r,s,c),Il(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Gn(),c=or(l);c.tag=2,r!=null&&(c.callback=r),r=ar(s,c,l),r!==null&&(Mn(r,s,l),Il(r,s,l))}};function u_(s,r,l,c,y,_,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,C):r.prototype&&r.prototype.isPureReactComponent?!yl(l,c)||!yl(y,_):!0}function c_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Nh.enqueueReplaceState(r,r.state,null)}function vo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function d_(s){oc(s)}function f_(s){console.error(s)}function h_(s){oc(s)}function xc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function p_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Mh(s,r,l){return l=or(l),l.tag=3,l.payload={element:null},l.callback=function(){xc(s,r)},l}function m_(s){return s=or(s),s.tag=3,s}function g_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){p_(r,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){p_(r,l,c),typeof y!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function Cw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&ra(r,l,y,!0),l=Bn.current,l!==null){switch(l.tag){case 31:case 13:return ii===null?Fc():l.alternate===null&&wt===0&&(wt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===gc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),np(s,c,y)),!1;case 22:return l.flags|=65536,c===gc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),np(s,c,y)),!1}throw Error(i(435,l.tag))}return np(s,c,y),Fc(),!1}if(Je)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Wf&&(s=Error(i(422),{cause:c}),Tl(Zn(s,l)))):(c!==Wf&&(r=Error(i(423),{cause:c}),Tl(Zn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Zn(c,l),y=Mh(s.stateNode,c,y),ah(s,y),wt!==4&&(wt=2)),!1;var _=Error(i(520),{cause:c});if(_=Zn(_,l),ql===null?ql=[_]:ql.push(_),wt!==4&&(wt=2),r===null)return!0;c=Zn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Mh(l.stateNode,c,s),ah(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hr===null||!hr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=m_(y),g_(y,s,l,c),ah(l,y),!1}l=l.return}while(l!==null);return!1}var Dh=Error(i(461)),qt=!1;function sn(s,r,l,c){r.child=s===null?Ty(r,null,l,c):yo(r,s.child,l,c)}function y_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var C={};for(var w in c)w!=="ref"&&(C[w]=c[w])}else C=c;return ho(r),c=hh(s,r,l,C,_,y),w=ph(),s!==null&&!qt?(mh(s,r,y),ds(s,r,y)):(Je&&w&&$f(r),r.flags|=1,sn(s,r,c,y),r.child)}function __(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Jf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,v_(s,r,_,c,y)):(s=cc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Bh(s,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:yl,l(C,c)&&s.ref===r.ref)return ds(s,r,y)}return r.flags|=1,s=rs(_,c),s.ref=r.ref,s.return=r,r.child=s}function v_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(yl(_,c)&&s.ref===r.ref)if(qt=!1,r.pendingProps=c=_,Bh(s,y))(s.flags&131072)!==0&&(qt=!0);else return r.lanes=s.lanes,ds(s,r,y)}return kh(s,r,l,c,y)}function T_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return E_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&pc(r,_!==null?_.cachePool:null),_!==null?Ay(r,_):uh(),Cy(r);else return c=r.lanes=536870912,E_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(pc(r,_.cachePool),Ay(r,_),ur(),r.memoizedState=null):(s!==null&&pc(r,null),uh(),ur());return sn(s,r,y,l),r.child}function Dl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function E_(s,r,l,c,y){var _=ih();return _=_===null?null:{parent:Lt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&pc(r,null),uh(),Cy(r),s!==null&&ra(s,r,c,!0),r.childLanes=y,null}function Nc(s,r){return r=Dc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function S_(s,r,l){return yo(r,s.child,null,l),s=Nc(r,r.pendingProps),s.flags|=2,Fn(r),r.memoizedState=null,s}function Iw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Je){if(c.mode==="hidden")return s=Nc(r,c),r.lanes=536870912,Dl(null,s);if(dh(r),(s=pt)?(s=Pv(s,ni),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:tr!==null?{id:Di,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=ry(s),l.return=r,r.child=l,tn=r,pt=null)):s=null,s===null)throw ir(r);return r.lanes=536870912,null}return Nc(r,c)}var _=s.memoizedState;if(_!==null){var C=_.dehydrated;if(dh(r),y)if(r.flags&256)r.flags&=-257,r=S_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(qt||ra(s,r,l,!1),y=(l&s.childLanes)!==0,qt||y){if(c=ct,c!==null&&(C=Bs(c,l),C!==0&&C!==_.retryLane))throw _.retryLane=C,lo(s,C),Mn(c,s,C),Dh;Fc(),r=S_(s,r,l)}else s=_.treeContext,pt=si(C.nextSibling),tn=r,Je=!0,nr=null,ni=!1,s!==null&&ly(r,s),r=Nc(r,c),r.flags|=4096;return r}return s=rs(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Mc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function kh(s,r,l,c,y){return ho(r),l=hh(s,r,l,c,void 0,y),c=ph(),s!==null&&!qt?(mh(s,r,y),ds(s,r,y)):(Je&&c&&$f(r),r.flags|=1,sn(s,r,l,y),r.child)}function A_(s,r,l,c,y,_){return ho(r),r.updateQueue=null,l=wy(r,c,l,y),Iy(s),c=ph(),s!==null&&!qt?(mh(s,r,_),ds(s,r,_)):(Je&&c&&$f(r),r.flags|=1,sn(s,r,l,_),r.child)}function C_(s,r,l,c,y){if(ho(r),r.stateNode===null){var _=ta,C=l.contextType;typeof C=="object"&&C!==null&&(_=nn(C)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Nh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},rh(r),C=l.contextType,_.context=typeof C=="object"&&C!==null?nn(C):ta,_.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(xh(r,l,C,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Nh.enqueueReplaceState(_,_.state,null),Rl(r,c,_,y),wl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var w=r.memoizedProps,U=vo(l,w);_.props=U;var J=_.context,X=l.contextType;C=ta,typeof X=="object"&&X!==null&&(C=nn(X));var ne=l.getDerivedStateFromProps;X=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||J!==C)&&c_(r,_,c,C),rr=!1;var K=r.memoizedState;_.state=K,Rl(r,c,_,y),wl(),J=r.memoizedState,w||K!==J||rr?(typeof ne=="function"&&(xh(r,l,ne,c),J=r.memoizedState),(U=rr||u_(r,l,U,c,K,J,C))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=C,c=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,oh(s,r),C=r.memoizedProps,X=vo(l,C),_.props=X,ne=r.pendingProps,K=_.context,J=l.contextType,U=ta,typeof J=="object"&&J!==null&&(U=nn(J)),w=l.getDerivedStateFromProps,(J=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ne||K!==U)&&c_(r,_,c,U),rr=!1,K=r.memoizedState,_.state=K,Rl(r,c,_,y),wl();var Q=r.memoizedState;C!==ne||K!==Q||rr||s!==null&&s.dependencies!==null&&fc(s.dependencies)?(typeof w=="function"&&(xh(r,l,w,c),Q=r.memoizedState),(X=rr||u_(r,l,X,c,K,Q,U)||s!==null&&s.dependencies!==null&&fc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=U,c=X):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Mc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=yo(r,s.child,null,y),r.child=yo(r,null,l,y)):sn(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ds(s,r,y),s}function I_(s,r,l,c){return co(),r.flags|=256,sn(s,r,l,c),r.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vh(s){return{baseLanes:s,cachePool:py()}}function Uh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Hn),s}function w_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=s!==null&&s.memoizedState===null?!1:(Nt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(Je){if(y?lr(r):ur(),(s=pt)?(s=Pv(s,ni),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:tr!==null?{id:Di,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=ry(s),l.return=r,r.child=l,tn=r,pt=null)):s=null,s===null)throw ir(r);return _p(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(ur(),y=r.mode,w=Dc({mode:"hidden",children:w},y),c=uo(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=Vh(l),c.childLanes=Uh(s,C,l),r.memoizedState=Ph,Dl(null,c)):(lr(r),Lh(r,w))}var U=s.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(_)r.flags&256?(lr(r),r.flags&=-257,r=Oh(s,r,l)):r.memoizedState!==null?(ur(),r.child=s.child,r.flags|=128,r=null):(ur(),w=c.fallback,y=r.mode,c=Dc({mode:"visible",children:c.children},y),w=uo(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,yo(r,s.child,null,l),c=r.child,c.memoizedState=Vh(l),c.childLanes=Uh(s,C,l),r.memoizedState=Ph,r=Dl(null,c));else if(lr(r),_p(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var J=C.dgst;C=J,c=Error(i(419)),c.stack="",c.digest=C,Tl({value:c,source:null,stack:null}),r=Oh(s,r,l)}else if(qt||ra(s,r,l,!1),C=(l&s.childLanes)!==0,qt||C){if(C=ct,C!==null&&(c=Bs(C,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,lo(s,c),Mn(C,s,c),Dh;yp(w)||Fc(),r=Oh(s,r,l)}else yp(w)?(r.flags|=192,r.child=s.child,r=null):(s=U.treeContext,pt=si(w.nextSibling),tn=r,Je=!0,nr=null,ni=!1,s!==null&&ly(r,s),r=Lh(r,c.children),r.flags|=4096);return r}return y?(ur(),w=c.fallback,y=r.mode,U=s.child,J=U.sibling,c=rs(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?w=rs(J,w):(w=uo(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Dl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=Vh(l):(y=w.cachePool,y!==null?(U=Lt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=py(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=Uh(s,C,l),r.memoizedState=Ph,Dl(s.child,c)):(lr(r),l=s.child,s=l.sibling,l=rs(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=l,r.memoizedState=null,l)}function Lh(s,r){return r=Dc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Dc(s,r){return s=qn(22,s,null,r),s.lanes=0,s}function Oh(s,r,l){return yo(r,s.child,null,l),s=Lh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function R_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Zf(s.return,r,l)}function qh(s,r,l,c,y,_){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=l,C.tailMode=y,C.treeForkCount=_)}function b_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var C=Nt.current,w=(C&2)!==0;if(w?(C=C&1|2,r.flags|=128):C&=1,oe(Nt,C),sn(s,r,c,l),c=Je?vl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&R_(s,l,r);else if(s.tag===19)R_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Tc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),qh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Tc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}qh(r,!0,l,null,_,c);break;case"together":qh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ds(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),fr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(ra(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=rs(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=rs(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Bh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&fc(s)))}function ww(s,r,l){switch(r.tag){case 3:Pt(r,r.stateNode.containerInfo),sr(r,Lt,s.memoizedState.cache),co();break;case 27:case 5:Kn(r);break;case 4:Pt(r,r.stateNode.containerInfo);break;case 10:sr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,dh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(lr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?w_(s,r,l):(lr(r),s=ds(s,r,l),s!==null?s.sibling:null);lr(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(ra(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return b_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(Nt,Nt.current),c)break;return null;case 22:return r.lanes=0,T_(s,r,l,r.pendingProps);case 24:sr(r,Lt,s.memoizedState.cache)}return ds(s,r,l)}function x_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)qt=!0;else{if(!Bh(s,l)&&(r.flags&128)===0)return qt=!1,ww(s,r,l);qt=(s.flags&131072)!==0}else qt=!1,Je&&(r.flags&1048576)!==0&&ay(r,vl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=mo(r.elementType),r.type=s,typeof s=="function")Jf(s)?(c=vo(s,c),r.tag=1,r=C_(null,r,s,c,l)):(r.tag=0,r=kh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ie){r.tag=11,r=y_(null,r,s,c,l);break e}else if(y===D){r.tag=14,r=__(null,r,s,c,l);break e}}throw r=Qe(s)||s,Error(i(306,r,""))}}return r;case 0:return kh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=vo(c,r.pendingProps),C_(s,r,c,y,l);case 3:e:{if(Pt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,oh(s,r),Rl(r,c,null,l);var C=r.memoizedState;if(c=C.cache,sr(r,Lt,c),c!==_.cache&&eh(r,[Lt],l,!0),wl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=I_(s,r,c,l);break e}else if(c!==y){y=Zn(Error(i(424)),r),Tl(y),r=I_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pt=si(s.firstChild),tn=r,Je=!0,nr=null,ni=!0,l=Ty(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(co(),c===y){r=ds(s,r,l);break e}sn(s,r,c,l)}r=r.child}return r;case 26:return Mc(s,r),s===null?(l=Bv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Je||(l=r.type,s=r.pendingProps,c=$c(De.current).createElement(l),c[At]=r,c[en]=s,rn(c,l,s),xt(c),r.stateNode=c):r.memoizedState=Bv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Kn(r),s===null&&Je&&(c=r.stateNode=Lv(r.type,r.pendingProps,De.current),tn=r,ni=!0,y=pt,yr(r.type)?(vp=y,pt=si(c.firstChild)):pt=y),sn(s,r,r.pendingProps.children,l),Mc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Je&&((y=c=pt)&&(c=nR(c,r.type,r.pendingProps,ni),c!==null?(r.stateNode=c,tn=r,pt=si(c.firstChild),ni=!1,y=!0):y=!1),y||ir(r)),Kn(r),y=r.type,_=r.pendingProps,C=s!==null?s.memoizedProps:null,c=_.children,pp(y,_)?c=null:C!==null&&pp(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=hh(s,r,yw,null,null,l),Kl._currentValue=y),Mc(s,r),sn(s,r,c,l),r.child;case 6:return s===null&&Je&&((s=l=pt)&&(l=iR(l,r.pendingProps,ni),l!==null?(r.stateNode=l,tn=r,pt=null,s=!0):s=!1),s||ir(r)),null;case 13:return w_(s,r,l);case 4:return Pt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=yo(r,null,c,l):sn(s,r,c,l),r.child;case 11:return y_(s,r,r.type,r.pendingProps,l);case 7:return sn(s,r,r.pendingProps,l),r.child;case 8:return sn(s,r,r.pendingProps.children,l),r.child;case 12:return sn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,sr(r,r.type,c.value),sn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,ho(r),y=nn(y),c=c(y),r.flags|=1,sn(s,r,c,l),r.child;case 14:return __(s,r,r.type,r.pendingProps,l);case 15:return v_(s,r,r.type,r.pendingProps,l);case 19:return b_(s,r,l);case 31:return Iw(s,r,l);case 22:return T_(s,r,l,r.pendingProps);case 24:return ho(r),c=nn(Lt),s===null?(y=ih(),y===null&&(y=ct,_=th(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},rh(r),sr(r,Lt,y)):((s.lanes&l)!==0&&(oh(s,r),Rl(r,null,null,l),wl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),sr(r,Lt,c)):(c=_.cache,sr(r,Lt,c),c!==y.cache&&eh(r,[Lt],l,!0))),sn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function fs(s){s.flags|=4}function Fh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(nv())s.flags|=8192;else throw go=gc,sh}else s.flags&=-16777217}function N_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Jv(r))if(nv())s.flags|=8192;else throw go=gc,sh}function kc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Za():536870912,s.lanes|=r,ya|=r)}function kl(s,r){if(!Je)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function mt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Rw(s,r,l){var c=r.pendingProps;switch(Qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ls(Lt),dt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(sa(r)?fs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,jf())),mt(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(fs(r),_!==null?(mt(r),N_(r,_)):(mt(r),Fh(r,y,null,c,l))):_?_!==s.memoizedState?(fs(r),mt(r),N_(r,_)):(mt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&fs(r),mt(r),Fh(r,y,s,c,l)),null;case 27:if(ci(r),l=De.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&fs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return mt(r),null}s=he.current,sa(r)?uy(r):(s=Lv(y,c,l),r.stateNode=s,fs(r))}return mt(r),null;case 5:if(ci(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&fs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return mt(r),null}if(_=he.current,sa(r))uy(r);else{var C=$c(De.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}_[At]=r,_[en]=c;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(rn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&fs(r)}}return mt(r),Fh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&fs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=De.current,sa(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=tn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[At]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||wv(s.nodeValue,l)),s||ir(r,!0)}else s=$c(s).createTextNode(c),s[At]=r,r.stateNode=s}return mt(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=sa(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[At]=r}else co(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),s=!1}else l=jf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Fn(r),r):(Fn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return mt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=sa(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[At]=r}else co(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),y=!1}else y=jf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Fn(r),r):(Fn(r),null)}return Fn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),kc(r,r.updateQueue),mt(r),null);case 4:return dt(),s===null&&up(r.stateNode.containerInfo),mt(r),null;case 10:return ls(r.type),mt(r),null;case 19:if(Z(Nt),c=r.memoizedState,c===null)return mt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)kl(c,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Tc(s),_!==null){for(r.flags|=128,kl(c,!1),s=_.updateQueue,r.updateQueue=s,kc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)sy(l,s),l=l.sibling;return oe(Nt,Nt.current&1|2),Je&&os(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&be()>Oc&&(r.flags|=128,y=!0,kl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Tc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,kc(r,s),kl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Je)return mt(r),null}else 2*be()-c.renderingStartTime>Oc&&l!==536870912&&(r.flags|=128,y=!0,kl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=be(),s.sibling=null,l=Nt.current,oe(Nt,y?l&1|2:l&1),Je&&os(r,c.treeForkCount),s):(mt(r),null);case 22:case 23:return Fn(r),ch(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),l=r.updateQueue,l!==null&&kc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&Z(po),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ls(Lt),mt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function bw(s,r){switch(Qf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ls(Lt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ci(r),null;case 31:if(r.memoizedState!==null){if(Fn(r),r.alternate===null)throw Error(i(340));co()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Fn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));co()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Z(Nt),null;case 4:return dt(),null;case 10:return ls(r.type),null;case 22:case 23:return Fn(r),ch(),s!==null&&Z(po),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ls(Lt),null;case 25:return null;default:return null}}function M_(s,r){switch(Qf(r),r.tag){case 3:ls(Lt),dt();break;case 26:case 27:case 5:ci(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&Fn(r);break;case 13:Fn(r);break;case 19:Z(Nt);break;case 10:ls(r.type);break;case 22:case 23:Fn(r),ch(),s!==null&&Z(po);break;case 24:ls(Lt)}}function Pl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,C=l.inst;c=_(),C.destroy=c}l=l.next}while(l!==y)}}catch(w){ot(r,r.return,w)}}function cr(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var C=c.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=r;var U=l,J=w;try{J()}catch(X){ot(y,U,X)}}}c=c.next}while(c!==_)}}catch(X){ot(r,r.return,X)}}function D_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Sy(r,l)}catch(c){ot(s,s.return,c)}}}function k_(s,r,l){l.props=vo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){ot(s,r,c)}}function Vl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){ot(s,r,y)}}function Pi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){ot(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ot(s,r,y)}else l.current=null}function P_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){ot(s,s.return,y)}}function zh(s,r,l){try{var c=s.stateNode;Ww(c,s.type,l,r),c[en]=r}catch(y){ot(s,s.return,y)}}function V_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&yr(s.type)||s.tag===4}function Hh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||V_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&yr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Gh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Kt));else if(c!==4&&(c===27&&yr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Gh(s,r,l),s=s.sibling;s!==null;)Gh(s,r,l),s=s.sibling}function Pc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&yr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Pc(s,r,l),s=s.sibling;s!==null;)Pc(s,r,l),s=s.sibling}function U_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);rn(r,c,l),r[At]=s,r[en]=l}catch(_){ot(s,s.return,_)}}var hs=!1,Bt=!1,Jh=!1,L_=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function xw(s,r){if(s=s.containerInfo,fp=td,s=Qg(s),Of(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,U=-1,J=0,X=0,ne=s,K=null;t:for(;;){for(var Q;ne!==l||y!==0&&ne.nodeType!==3||(w=C+y),ne!==_||c!==0&&ne.nodeType!==3||(U=C+c),ne.nodeType===3&&(C+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)K=ne,ne=Q;for(;;){if(ne===s)break t;if(K===l&&++J===y&&(w=C),K===_&&++X===c&&(U=C),(Q=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Q}l=w===-1||U===-1?null:{start:w,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(hp={focusedElem:s,selectionRange:l},td=!1,Wt=r;Wt!==null;)if(r=Wt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Wt=s;else for(;Wt!==null;){switch(r=Wt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var me=vo(l.type,y);s=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){ot(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)gp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":gp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Wt=s;break}Wt=r.return}}function O_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ms(s,l),c&4&&Pl(5,l);break;case 1:if(ms(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(C){ot(l,l.return,C)}else{var y=vo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){ot(l,l.return,C)}}c&64&&D_(l),c&512&&Vl(l,l.return);break;case 3:if(ms(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Sy(s,r)}catch(C){ot(l,l.return,C)}}break;case 27:r===null&&c&4&&U_(l);case 26:case 5:ms(s,l),r===null&&c&4&&P_(l),c&512&&Vl(l,l.return);break;case 12:ms(s,l);break;case 31:ms(s,l),c&4&&F_(s,l);break;case 13:ms(s,l),c&4&&z_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Ow.bind(null,l),sR(s,l))));break;case 22:if(c=l.memoizedState!==null||hs,!c){r=r!==null&&r.memoizedState!==null||Bt,y=hs;var _=Bt;hs=c,(Bt=r)&&!_?gs(s,l,(l.subtreeFlags&8772)!==0):ms(s,l),hs=y,Bt=_}break;case 30:break;default:ms(s,l)}}function q_(s){var r=s.alternate;r!==null&&(s.alternate=null,q_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Wr(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,Rn=!1;function ps(s,r,l){for(l=l.child;l!==null;)B_(s,r,l),l=l.sibling}function B_(s,r,l){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Vs,l)}catch{}switch(l.tag){case 26:Bt||Pi(l,r),ps(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||Pi(l,r);var c=Tt,y=Rn;yr(l.type)&&(Tt=l.stateNode,Rn=!1),ps(s,r,l),Gl(l.stateNode),Tt=c,Rn=y;break;case 5:Bt||Pi(l,r);case 6:if(c=Tt,y=Rn,Tt=null,ps(s,r,l),Tt=c,Rn=y,Tt!==null)if(Rn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(_){ot(l,r,_)}else try{Tt.removeChild(l.stateNode)}catch(_){ot(l,r,_)}break;case 18:Tt!==null&&(Rn?(s=Tt,Dv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Ia(s)):Dv(Tt,l.stateNode));break;case 4:c=Tt,y=Rn,Tt=l.stateNode.containerInfo,Rn=!0,ps(s,r,l),Tt=c,Rn=y;break;case 0:case 11:case 14:case 15:cr(2,l,r),Bt||cr(4,l,r),ps(s,r,l);break;case 1:Bt||(Pi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&k_(l,r,c)),ps(s,r,l);break;case 21:ps(s,r,l);break;case 22:Bt=(c=Bt)||l.memoizedState!==null,ps(s,r,l),Bt=c;break;default:ps(s,r,l)}}function F_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ia(s)}catch(l){ot(r,r.return,l)}}}function z_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ia(s)}catch(l){ot(r,r.return,l)}}function Nw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new L_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new L_),r;default:throw Error(i(435,s.tag))}}function Vc(s,r){var l=Nw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=qw.bind(null,s,c);c.then(y,y)}})}function bn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,C=r,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(yr(w.type)){Tt=w.stateNode,Rn=!1;break e}break;case 5:Tt=w.stateNode,Rn=!1;break e;case 3:case 4:Tt=w.stateNode.containerInfo,Rn=!0;break e}w=w.return}if(Tt===null)throw Error(i(160));B_(_,C,y),Tt=null,Rn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)H_(r,s),r=r.sibling}var gi=null;function H_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(r,s),xn(s),c&4&&(cr(3,s,s.return),Pl(3,s),cr(5,s,s.return));break;case 1:bn(r,s),xn(s),c&512&&(Bt||l===null||Pi(l,l.return)),c&64&&hs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=gi;if(bn(r,s),xn(s),c&512&&(Bt||l===null||Pi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[ji]||_[At]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),rn(_,c,l),_[At]=s,xt(_),c=_;break e;case"link":var C=Hv("link","href",y).get(c+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(c),rn(_,c,l),y.head.appendChild(_);break;case"meta":if(C=Hv("meta","content",y).get(c+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(c),rn(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[At]=s,xt(_),c=_}s.stateNode=c}else Gv(y,s.type,s.stateNode);else s.stateNode=zv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Gv(y,s.type,s.stateNode):zv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&zh(s,s.memoizedProps,l.memoizedProps)}break;case 27:bn(r,s),xn(s),c&512&&(Bt||l===null||Pi(l,l.return)),l!==null&&c&4&&zh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(bn(r,s),xn(s),c&512&&(Bt||l===null||Pi(l,l.return)),s.flags&32){y=s.stateNode;try{jn(y,"")}catch(me){ot(s,s.return,me)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,zh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Jh=!0);break;case 6:if(bn(r,s),xn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(me){ot(s,s.return,me)}}break;case 3:if(jc=null,y=gi,gi=Qc(r.containerInfo),bn(r,s),gi=y,xn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ia(r.containerInfo)}catch(me){ot(s,s.return,me)}Jh&&(Jh=!1,G_(s));break;case 4:c=gi,gi=Qc(s.stateNode.containerInfo),bn(r,s),xn(s),gi=c;break;case 12:bn(r,s),xn(s);break;case 31:bn(r,s),xn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 13:bn(r,s),xn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lc=be()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 22:y=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,J=hs,X=Bt;if(hs=J||y,Bt=X||U,bn(r,s),Bt=X,hs=J,xn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||U||hs||Bt||To(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){U=l=r;try{if(_=U.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=U.stateNode;var ne=U.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(me){ot(U,U.return,me)}}}else if(r.tag===6){if(l===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(me){ot(U,U.return,me)}}}else if(r.tag===18){if(l===null){U=r;try{var Q=U.stateNode;y?kv(Q,!0):kv(U.stateNode,!1)}catch(me){ot(U,U.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Vc(s,l))));break;case 19:bn(r,s),xn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 30:break;case 21:break;default:bn(r,s),xn(s)}}function xn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(V_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Hh(s);Pc(s,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(jn(C,""),l.flags&=-33);var w=Hh(s);Pc(s,w,C);break;case 3:case 4:var U=l.stateNode.containerInfo,J=Hh(s);Gh(s,J,U);break;default:throw Error(i(161))}}catch(X){ot(s,s.return,X)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function G_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;G_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ms(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)O_(s,r.alternate,r),r=r.sibling}function To(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:cr(4,r,r.return),To(r);break;case 1:Pi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&k_(r,r.return,l),To(r);break;case 27:Gl(r.stateNode);case 26:case 5:Pi(r,r.return),To(r);break;case 22:r.memoizedState===null&&To(r);break;case 30:To(r);break;default:To(r)}s=s.sibling}}function gs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:gs(y,_,l),Pl(4,_);break;case 1:if(gs(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){ot(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Ey(U[y],w)}catch(J){ot(c,c.return,J)}}l&&C&64&&D_(_),Vl(_,_.return);break;case 27:U_(_);case 26:case 5:gs(y,_,l),l&&c===null&&C&4&&P_(_),Vl(_,_.return);break;case 12:gs(y,_,l);break;case 31:gs(y,_,l),l&&C&4&&F_(y,_);break;case 13:gs(y,_,l),l&&C&4&&z_(y,_);break;case 22:_.memoizedState===null&&gs(y,_,l),Vl(_,_.return);break;case 30:break;default:gs(y,_,l)}r=r.sibling}}function Yh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&El(l))}function Kh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&El(s))}function yi(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)J_(s,r,l,c),r=r.sibling}function J_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:yi(s,r,l,c),y&2048&&Pl(9,r);break;case 1:yi(s,r,l,c);break;case 3:yi(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&El(s)));break;case 12:if(y&2048){yi(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){ot(r,r.return,U)}}else yi(s,r,l,c);break;case 31:yi(s,r,l,c);break;case 13:yi(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?yi(s,r,l,c):Ul(s,r):_._visibility&2?yi(s,r,l,c):(_._visibility|=2,pa(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Yh(C,r);break;case 24:yi(s,r,l,c),y&2048&&Kh(r.alternate,r);break;default:yi(s,r,l,c)}}function pa(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,C=r,w=l,U=c,J=C.flags;switch(C.tag){case 0:case 11:case 15:pa(_,C,w,U,y),Pl(8,C);break;case 23:break;case 22:var X=C.stateNode;C.memoizedState!==null?X._visibility&2?pa(_,C,w,U,y):Ul(_,C):(X._visibility|=2,pa(_,C,w,U,y)),y&&J&2048&&Yh(C.alternate,C);break;case 24:pa(_,C,w,U,y),y&&J&2048&&Kh(C.alternate,C);break;default:pa(_,C,w,U,y)}r=r.sibling}}function Ul(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Ul(l,c),y&2048&&Yh(c.alternate,c);break;case 24:Ul(l,c),y&2048&&Kh(c.alternate,c);break;default:Ul(l,c)}r=r.sibling}}var Ll=8192;function ma(s,r,l){if(s.subtreeFlags&Ll)for(s=s.child;s!==null;)Y_(s,r,l),s=s.sibling}function Y_(s,r,l){switch(s.tag){case 26:ma(s,r,l),s.flags&Ll&&s.memoizedState!==null&&gR(l,gi,s.memoizedState,s.memoizedProps);break;case 5:ma(s,r,l);break;case 3:case 4:var c=gi;gi=Qc(s.stateNode.containerInfo),ma(s,r,l),gi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Ll,Ll=16777216,ma(s,r,l),Ll=c):ma(s,r,l));break;default:ma(s,r,l)}}function K_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ol(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Wt=c,Q_(c,s)}K_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$_(s),s=s.sibling}function $_(s){switch(s.tag){case 0:case 11:case 15:Ol(s),s.flags&2048&&cr(9,s,s.return);break;case 3:Ol(s);break;case 12:Ol(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Uc(s)):Ol(s);break;default:Ol(s)}}function Uc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Wt=c,Q_(c,s)}K_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:cr(8,r,r.return),Uc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Uc(r));break;default:Uc(r)}s=s.sibling}}function Q_(s,r){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:cr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:El(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Wt=c;else e:for(l=s;Wt!==null;){c=Wt;var y=c.sibling,_=c.return;if(q_(c),c===l){Wt=null;break e}if(y!==null){y.return=_,Wt=y;break e}Wt=_}}}var Mw={getCacheForType:function(s){var r=nn(Lt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return nn(Lt).controller.signal}},Dw=typeof WeakMap=="function"?WeakMap:Map,tt=0,ct=null,qe=null,Fe=0,rt=0,zn=null,dr=!1,ga=!1,$h=!1,ys=0,wt=0,fr=0,Eo=0,Qh=0,Hn=0,ya=0,ql=null,Nn=null,Wh=!1,Lc=0,W_=0,Oc=1/0,qc=null,hr=null,Gt=0,pr=null,_a=null,_s=0,jh=0,Xh=null,j_=null,Bl=0,Zh=null;function Gn(){return(tt&2)!==0&&Fe!==0?Fe&-Fe:$.T!==null?rp():Wi()}function X_(){if(Hn===0)if((Fe&536870912)===0||Je){var s=Ci;Ci<<=1,(Ci&3932160)===0&&(Ci=262144),Hn=s}else Hn=536870912;return s=Bn.current,s!==null&&(s.flags|=32),Hn}function Mn(s,r,l){(s===ct&&(rt===2||rt===9)||s.cancelPendingCommit!==null)&&(va(s,0),mr(s,Fe,Hn,!1)),Os(s,l),((tt&2)===0||s!==ct)&&(s===ct&&((tt&2)===0&&(Eo|=l),wt===4&&mr(s,Fe,Hn,!1)),Vi(s))}function Z_(s,r,l){if((tt&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Ls(s,r),y=c?Vw(s,r):tp(s,r,!0),_=c;do{if(y===0){ga&&!c&&mr(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!kw(l)){y=tp(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var w=s;y=ql;var U=w.current.memoizedState.isDehydrated;if(U&&(va(w,C).flags|=256),C=tp(w,C,!1),C!==2){if($h&&!U){w.errorRecoveryDisabledLanes|=_,Eo|=_,y=4;break e}_=Nn,Nn=y,_!==null&&(Nn===null?Nn=_:Nn.push.apply(Nn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){va(s,0),mr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:mr(c,r,Hn,!dr);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Lc+300-be(),10<y)){if(mr(c,r,Hn,!dr),Qn(c,0,!0)!==0)break e;_s=r,c.timeoutHandle=Nv(ev.bind(null,c,l,Nn,qc,Wh,r,Hn,Eo,ya,dr,_,"Throttled",-0,0),y);break e}ev(c,l,Nn,qc,Wh,r,Hn,Eo,ya,dr,_,null,-0,0)}}break}while(!0);Vi(s)}function ev(s,r,l,c,y,_,C,w,U,J,X,ne,K,Q){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kt},Y_(r,_,ne);var me=(_&62914560)===_?Lc-be():(_&4194048)===_?W_-be():0;if(me=yR(ne,me),me!==null){_s=_,s.cancelPendingCommit=me(lv.bind(null,s,r,_,l,c,y,C,w,U,X,ne,null,K,Q)),mr(s,_,C,!J);return}}lv(s,r,_,l,c,y,C,w,U)}function kw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!On(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mr(s,r,l,c){r&=~Qh,r&=~Eo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-yn(y),C=1<<_;c[_]=-1,y&=~C}l!==0&&el(s,l,r)}function Bc(){return(tt&6)===0?(Fl(0),!1):!0}function ep(){if(qe!==null){if(rt===0)var s=qe.return;else s=qe,as=fo=null,gh(s),ua=null,Al=0,s=qe;for(;s!==null;)M_(s.alternate,s),s=s.return;qe=null}}function va(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Zw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),_s=0,ep(),ct=s,qe=l=rs(s.current,null),Fe=r,rt=0,zn=null,dr=!1,ga=Ls(s,r),$h=!1,ya=Hn=Qh=Eo=fr=wt=0,Nn=ql=null,Wh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-yn(c),_=1<<y;r|=s[y],c&=~_}return ys=r,ac(),l}function tv(s,r){ke=null,$.H=Ml,r===la||r===mc?(r=yy(),rt=3):r===sh?(r=yy(),rt=4):rt=r===Dh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zn=r,qe===null&&(wt=1,xc(s,Zn(r,s.current)))}function nv(){var s=Bn.current;return s===null?!0:(Fe&4194048)===Fe?ii===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===ii:!1}function iv(){var s=$.H;return $.H=Ml,s===null?Ml:s}function sv(){var s=$.A;return $.A=Mw,s}function Fc(){wt=4,dr||(Fe&4194048)!==Fe&&Bn.current!==null||(ga=!0),(fr&134217727)===0&&(Eo&134217727)===0||ct===null||mr(ct,Fe,Hn,!1)}function tp(s,r,l){var c=tt;tt|=2;var y=iv(),_=sv();(ct!==s||Fe!==r)&&(qc=null,va(s,r)),r=!1;var C=wt;e:do try{if(rt!==0&&qe!==null){var w=qe,U=zn;switch(rt){case 8:ep(),C=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var J=rt;if(rt=0,zn=null,Ta(s,w,U,J),l&&ga){C=0;break e}break;default:J=rt,rt=0,zn=null,Ta(s,w,U,J)}}Pw(),C=wt;break}catch(X){tv(s,X)}while(!0);return r&&s.shellSuspendCounter++,as=fo=null,tt=c,$.H=y,$.A=_,qe===null&&(ct=null,Fe=0,ac()),C}function Pw(){for(;qe!==null;)rv(qe)}function Vw(s,r){var l=tt;tt|=2;var c=iv(),y=sv();ct!==s||Fe!==r?(qc=null,Oc=be()+500,va(s,r)):ga=Ls(s,r);e:do try{if(rt!==0&&qe!==null){r=qe;var _=zn;t:switch(rt){case 1:rt=0,zn=null,Ta(s,r,_,1);break;case 2:case 9:if(my(_)){rt=0,zn=null,ov(r);break}r=function(){rt!==2&&rt!==9||ct!==s||(rt=7),Vi(s)},_.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:my(_)?(rt=0,zn=null,ov(r)):(rt=0,zn=null,Ta(s,r,_,7));break;case 5:var C=null;switch(qe.tag){case 26:C=qe.memoizedState;case 5:case 27:var w=qe;if(C?Jv(C):w.stateNode.complete){rt=0,zn=null;var U=w.sibling;if(U!==null)qe=U;else{var J=w.return;J!==null?(qe=J,zc(J)):qe=null}break t}}rt=0,zn=null,Ta(s,r,_,5);break;case 6:rt=0,zn=null,Ta(s,r,_,6);break;case 8:ep(),wt=6;break e;default:throw Error(i(462))}}Uw();break}catch(X){tv(s,X)}while(!0);return as=fo=null,$.H=c,$.A=y,tt=l,qe!==null?0:(ct=null,Fe=0,ac(),wt)}function Uw(){for(;qe!==null&&!ce();)rv(qe)}function rv(s){var r=x_(s.alternate,s,ys);s.memoizedProps=s.pendingProps,r===null?zc(s):qe=r}function ov(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=A_(l,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=A_(l,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:gh(r);default:M_(l,r),r=qe=sy(r,ys),r=x_(l,r,ys)}s.memoizedProps=s.pendingProps,r===null?zc(s):qe=r}function Ta(s,r,l,c){as=fo=null,gh(r),ua=null,Al=0;var y=r.return;try{if(Cw(s,y,r,l,Fe)){wt=1,xc(s,Zn(l,s.current)),qe=null;return}}catch(_){if(y!==null)throw qe=y,_;wt=1,xc(s,Zn(l,s.current)),qe=null;return}r.flags&32768?(Je||c===1?s=!0:ga||(Fe&536870912)!==0?s=!1:(dr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Bn.current,c!==null&&c.tag===13&&(c.flags|=16384))),av(r,s)):zc(r)}function zc(s){var r=s;do{if((r.flags&32768)!==0){av(r,dr);return}s=r.return;var l=Rw(r.alternate,r,ys);if(l!==null){qe=l;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=s}while(r!==null);wt===0&&(wt=5)}function av(s,r){do{var l=bw(s.alternate,s);if(l!==null){l.flags&=32767,qe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){qe=s;return}qe=s=l}while(s!==null);wt=6,qe=null}function lv(s,r,l,c,y,_,C,w,U){s.cancelPendingCommit=null;do Hc();while(Gt!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Hf,Zt(s,l,_,C,w,U),s===ct&&(qe=ct=null,Fe=0),_a=r,pr=s,_s=l,jh=_,Xh=y,j_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Bw(vt,function(){return hv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=ae.p,ae.p=2,C=tt,tt|=4;try{xw(s,r,l)}finally{tt=C,ae.p=y,$.T=c}}Gt=1,uv(),cv(),dv()}}function uv(){if(Gt===1){Gt=0;var s=pr,r=_a,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{H_(r,s);var _=hp,C=Qg(s.containerInfo),w=_.focusedElem,U=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&$g(w.ownerDocument.documentElement,w)){if(U!==null&&Of(w)){var J=U.start,X=U.end;if(X===void 0&&(X=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(X,w.value.length);else{var ne=w.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Q=K.getSelection(),me=w.textContent.length,Se=Math.min(U.start,me),ut=U.end===void 0?Se:Math.min(U.end,me);!Q.extend&&Se>ut&&(C=ut,ut=Se,Se=C);var F=Kg(w,Se),q=Kg(w,ut);if(F&&q&&(Q.rangeCount!==1||Q.anchorNode!==F.node||Q.anchorOffset!==F.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var G=ne.createRange();G.setStart(F.node,F.offset),Q.removeAllRanges(),Se>ut?(Q.addRange(G),Q.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),Q.addRange(G))}}}}for(ne=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}td=!!fp,hp=fp=null}finally{tt=y,ae.p=c,$.T=l}}s.current=r,Gt=2}}function cv(){if(Gt===2){Gt=0;var s=pr,r=_a,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{O_(s,r.alternate,r)}finally{tt=y,ae.p=c,$.T=l}}Gt=3}}function dv(){if(Gt===4||Gt===3){Gt=0,we();var s=pr,r=_a,l=_s,c=j_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Gt=5:(Gt=0,_a=pr=null,fv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(hr=null),nl(l),r=r.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Vs,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=$.T,y=ae.p,ae.p=2,$.T=null;try{for(var _=s.onRecoverableError,C=0;C<c.length;C++){var w=c[C];_(w.value,{componentStack:w.stack})}}finally{$.T=r,ae.p=y}}(_s&3)!==0&&Hc(),Vi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Zh?Bl++:(Bl=0,Zh=s):Bl=0,Fl(0)}}function fv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,El(r)))}function Hc(){return uv(),cv(),dv(),hv()}function hv(){if(Gt!==5)return!1;var s=pr,r=jh;jh=0;var l=nl(_s),c=$.T,y=ae.p;try{ae.p=32>l?32:l,$.T=null,l=Xh,Xh=null;var _=pr,C=_s;if(Gt=0,_a=pr=null,_s=0,(tt&6)!==0)throw Error(i(331));var w=tt;if(tt|=4,$_(_.current),J_(_,_.current,C,l),tt=w,Fl(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Vs,_)}catch{}return!0}finally{ae.p=y,$.T=c,fv(s,r)}}function pv(s,r,l){r=Zn(l,r),r=Mh(s.stateNode,r,2),s=ar(s,r,2),s!==null&&(Os(s,2),Vi(s))}function ot(s,r,l){if(s.tag===3)pv(s,s,l);else for(;r!==null;){if(r.tag===3){pv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(hr===null||!hr.has(c))){s=Zn(l,s),l=m_(2),c=ar(r,l,2),c!==null&&(g_(l,c,r,s),Os(c,2),Vi(c));break}}r=r.return}}function np(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Dw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||($h=!0,y.add(l),s=Lw.bind(null,s,r,l),r.then(s,s))}function Lw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ct===s&&(Fe&l)===l&&(wt===4||wt===3&&(Fe&62914560)===Fe&&300>be()-Lc?(tt&2)===0&&va(s,0):Qh|=l,ya===Fe&&(ya=0)),Vi(s)}function mv(s,r){r===0&&(r=Za()),s=lo(s,r),s!==null&&(Os(s,r),Vi(s))}function Ow(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),mv(s,l)}function qw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),mv(s,l)}function Bw(s,r){return $i(s,r)}var Gc=null,Ea=null,ip=!1,Jc=!1,sp=!1,gr=0;function Vi(s){s!==Ea&&s.next===null&&(Ea===null?Gc=Ea=s:Ea=Ea.next=s),Jc=!0,ip||(ip=!0,zw())}function Fl(s,r){if(!sp&&Jc){sp=!0;do for(var l=!1,c=Gc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var C=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-yn(42|s)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,vv(c,_))}else _=Fe,_=Qn(c,c===ct?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Ls(c,_)||(l=!0,vv(c,_));c=c.next}while(l);sp=!1}}function Fw(){gv()}function gv(){Jc=ip=!1;var s=0;gr!==0&&Xw()&&(s=gr);for(var r=be(),l=null,c=Gc;c!==null;){var y=c.next,_=yv(c,r);_===0?(c.next=null,l===null?Gc=y:l.next=y,y===null&&(Ea=l)):(l=c,(s!==0||(_&3)!==0)&&(Jc=!0)),c=y}Gt!==0&&Gt!==5||Fl(s),gr!==0&&(gr=0)}function yv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var C=31-yn(_),w=1<<C,U=y[C];U===-1?((w&l)===0||(w&c)!==0)&&(y[C]=Fo(w,r)):U<=r&&(s.expiredLanes|=w),_&=~w}if(r=ct,l=Fe,l=Qn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(rt===2||rt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&di(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ls(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&di(c),nl(l)){case 2:case 8:l=nt;break;case 32:l=vt;break;case 268435456:l=Cn;break;default:l=vt}return c=_v.bind(null,s),l=$i(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&di(c),s.callbackPriority=2,s.callbackNode=null,2}function _v(s,r){if(Gt!==0&&Gt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Hc()&&s.callbackNode!==l)return null;var c=Fe;return c=Qn(s,s===ct?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Z_(s,c,r),yv(s,be()),s.callbackNode!=null&&s.callbackNode===l?_v.bind(null,s):null)}function vv(s,r){if(Hc())return null;Z_(s,r,!0)}function zw(){eR(function(){(tt&6)!==0?$i(We,Fw):gv()})}function rp(){if(gr===0){var s=oa;s===0&&(s=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),gr=s}return gr}function Tv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xi(""+s)}function Ev(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Hw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=Tv((y[en]||null).action),C=c.submitter;C&&(r=(r=C[en]||null)?Tv(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var w=new to("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(gr!==0){var U=C?Ev(y,C):new FormData(y);Ih(l,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(w.preventDefault(),U=C?Ev(y,C):new FormData(y),Ih(l,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var op=0;op<zf.length;op++){var ap=zf[op],Gw=ap.toLowerCase(),Jw=ap[0].toUpperCase()+ap.slice(1);mi(Gw,"on"+Jw)}mi(Xg,"onAnimationEnd"),mi(Zg,"onAnimationIteration"),mi(ey,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(aw,"onTransitionRun"),mi(lw,"onTransitionStart"),mi(uw,"onTransitionCancel"),mi(ty,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Sv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var C=c.length-1;0<=C;C--){var w=c[C],U=w.instance,J=w.currentTarget;if(w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(X){oc(X)}y.currentTarget=null,_=U}else for(C=0;C<c.length;C++){if(w=c[C],U=w.instance,J=w.currentTarget,w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(X){oc(X)}y.currentTarget=null,_=U}}}}function Be(s,r){var l=r[Fs];l===void 0&&(l=r[Fs]=new Set);var c=s+"__bubble";l.has(c)||(Av(r,s,2,!1),l.add(c))}function lp(s,r,l){var c=0;r&&(c|=4),Av(l,s,c,r)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function up(s){if(!s[Yc]){s[Yc]=!0,zo.forEach(function(l){l!=="selectionchange"&&(Yw.has(l)||lp(l,!1,s),lp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Yc]||(r[Yc]=!0,lp("selectionchange",!1,r))}}function Av(s,r,l,c){switch(Xv(r)){case 2:var y=TR;break;case 8:y=ER;break;default:y=Cp}l=y.bind(null,r,l,s),y=void 0,!cl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function cp(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var w=c.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=c.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=Xi(w),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){c=_=C;continue e}w=w.parentNode}}c=c.return}Gu(function(){var J=_,X=Ko(l),ne=[];e:{var K=ny.get(s);if(K!==void 0){var Q=to,me=s;switch(s){case"keypress":if(eo(l)===0)break e;case"keydown":case"keyup":Q=Zu;break;case"focusin":me="focus",Q=js;break;case"focusout":me="blur",Q=js;break;case"beforeblur":case"afterblur":Q=js;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=tc;break;case Xg:case Zg:case ey:Q=Wo;break;case ty:Q=jo;break;case"scroll":case"scrollend":Q=Ju;break;case"wheel":Q=ic;break;case"copy":case"cut":case"paste":Q=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ml;break;case"toggle":case"beforetoggle":Q=Zs}var Se=(r&4)!==0,ut=!Se&&(s==="scroll"||s==="scrollend"),F=Se?K!==null?K+"Capture":null:K;Se=[];for(var q=J,G;q!==null;){var te=q;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||F===null||(te=In(q,F),te!=null&&Se.push(Hl(q,te,G))),ut)break;q=q.return}0<Se.length&&(K=new Q(K,me,null,l,X),ne.push({event:K,listeners:Se}))}}if((r&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&l!==Yo&&(me=l.relatedTarget||l.fromElement)&&(Xi(me)||me[wi]))break e;if((Q||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(me=l.relatedTarget||l.toElement,Q=J,me=me?Xi(me):null,me!==null&&(ut=a(me),Se=me.tag,me!==ut||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Q=null,me=J),Q!==me)){if(Se=Yu,te="onMouseLeave",F="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Se=ml,te="onPointerLeave",F="onPointerEnter",q="pointer"),ut=Q==null?K:jr(Q),G=me==null?K:jr(me),K=new Se(te,q+"leave",Q,l,X),K.target=ut,K.relatedTarget=G,te=null,Xi(X)===J&&(Se=new Se(F,q+"enter",me,l,X),Se.target=G,Se.relatedTarget=ut,te=Se),ut=te,Q&&me)t:{for(Se=Kw,F=Q,q=me,G=0,te=F;te;te=Se(te))G++;te=0;for(var Te=q;Te;Te=Se(Te))te++;for(;0<G-te;)F=Se(F),G--;for(;0<te-G;)q=Se(q),te--;for(;G--;){if(F===q||q!==null&&F===q.alternate){Se=F;break t}F=Se(F),q=Se(q)}Se=null}else Se=null;Q!==null&&Cv(ne,K,Q,Se,!1),me!==null&&ut!==null&&Cv(ne,ut,me,Se,!0)}}e:{if(K=J?jr(J):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Xe=Fg;else if(wn(K))if(zg)Xe=sw;else{Xe=nw;var _e=tw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&ll(J.elementType)&&(Xe=Fg):Xe=iw;if(Xe&&(Xe=Xe(s,J))){ro(ne,Xe,l,X);break e}_e&&_e(s,K,J),s==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&Jo(K,"number",K.value)}switch(_e=J?jr(J):window,s){case"focusin":(wn(_e)||_e.contentEditable==="true")&&(Xo=_e,qf=J,_l=null);break;case"focusout":_l=qf=Xo=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Wg(ne,l,X);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":Wg(ne,l,X)}var Pe;if(E)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Le?it(s,l)&&(ze="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(ze="onCompositionStart");ze&&(H&&l.locale!=="ko"&&(Le||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Le&&(Pe=Ks()):(Ln=X,$o="value"in Ln?Ln.value:Ln.textContent,Le=!0)),_e=Kc(J,ze),0<_e.length&&(ze=new fl(ze,s,null,l,X),ne.push({event:ze,listeners:_e}),Pe?ze.data=Pe:(Pe=Ut(l),Pe!==null&&(ze.data=Pe)))),(Pe=b?$t(s,l):Qt(s,l))&&(ze=Kc(J,"onBeforeInput"),0<ze.length&&(_e=new fl("onBeforeInput","beforeinput",null,l,X),ne.push({event:_e,listeners:ze}),_e.data=Pe)),Hw(ne,s,J,l,X)}Sv(ne,r)})}function Hl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Kc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=In(s,l),y!=null&&c.unshift(Hl(s,y,_)),y=In(s,r),y!=null&&c.push(Hl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Kw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Cv(s,r,l,c,y){for(var _=r._reactName,C=[];l!==null&&l!==c;){var w=l,U=w.alternate,J=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||J===null||(U=J,y?(J=In(l,_),J!=null&&C.unshift(Hl(l,J,U))):y||(J=In(l,_),J!=null&&C.push(Hl(l,J,U)))),l=l.return}C.length!==0&&s.push({event:r,listeners:C})}var $w=/\r\n?/g,Qw=/\u0000|\uFFFD/g;function Iv(s){return(typeof s=="string"?s:""+s).replace($w,`
`).replace(Qw,"")}function wv(s,r){return r=Iv(r),Iv(s)===r}function lt(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||jn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&jn(s,""+c);break;case"className":Gs(s,"class",c);break;case"tabIndex":Gs(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(s,l,c);break;case"style":zu(s,c,_);break;case"data":if(r!=="object"){Gs(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=xi(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&lt(s,r,"name",y.name,y,null),lt(s,r,"formEncType",y.formEncType,y,null),lt(s,r,"formMethod",y.formMethod,y,null),lt(s,r,"formTarget",y.formTarget,y,null)):(lt(s,r,"encType",y.encType,y,null),lt(s,r,"method",y.method,y,null),lt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=xi(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Kt);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=xi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Hs(s,"popover",c);break;case"xlinkActuate":Wn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Wn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Wn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Wn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Wn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Wn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Hs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=kf.get(l)||l,Hs(s,l,c))}}function dp(s,r,l,c,y,_){switch(l){case"style":zu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?jn(s,c):(typeof c=="number"||typeof c=="bigint")&&jn(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Kt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[en]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Hs(s,l,c)}}}function rn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:lt(s,r,_,C,l,null)}}y&&lt(s,r,"srcSet",l.srcSet,l,null),c&&lt(s,r,"src",l.src,l,null);return;case"input":Be("invalid",s);var w=_=C=y=null,U=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":y=X;break;case"type":C=X;break;case"checked":U=X;break;case"defaultChecked":J=X;break;case"value":_=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:lt(s,r,c,X,l,null)}}Xr(s,_,w,U,J,C,y,!1);return;case"select":Be("invalid",s),c=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":c=w;default:lt(s,r,y,w,l,null)}r=_,l=C,s.multiple=!!c,r!=null?je(s,!!c,r,!1):l!=null&&je(s,!!c,l,!0);return;case"textarea":Be("invalid",s),_=y=c=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:lt(s,r,C,w,l,null)}Ys(s,c,y,_);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(s,r,U,c,l,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<zl.length;c++)Be(zl[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:lt(s,r,J,c,l,null)}return;default:if(ll(r)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&dp(s,r,X,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&lt(s,r,w,c,l,null))}function Ww(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,U=null,J=null,X=null;for(Q in l){var ne=l[Q];if(l.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":U=ne;default:c.hasOwnProperty(Q)||lt(s,r,Q,null,c,ne)}}for(var K in c){var Q=c[K];if(ne=l[K],c.hasOwnProperty(K)&&(Q!=null||ne!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":J=Q;break;case"defaultChecked":X=Q;break;case"value":C=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ne&&lt(s,r,K,Q,c,ne)}}Js(s,C,w,U,J,X,_,y);return;case"select":Q=C=w=K=null;for(_ in l)if(U=l[_],l.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":Q=U;default:c.hasOwnProperty(_)||lt(s,r,_,null,c,U)}for(y in c)if(_=c[y],U=l[y],c.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==U&&lt(s,r,y,_,c,U)}r=w,l=C,c=Q,K!=null?je(s,!!l,K,!1):!!c!=!!l&&(r!=null?je(s,!!l,r,!0):je(s,!!l,l?[]:"",!1));return;case"textarea":Q=K=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:lt(s,r,w,null,c,y)}for(C in c)if(y=c[C],_=l[C],c.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&lt(s,r,C,y,c,_)}Zr(s,K,Q);return;case"option":for(var me in l)if(K=l[me],l.hasOwnProperty(me)&&K!=null&&!c.hasOwnProperty(me))switch(me){case"selected":s.selected=!1;break;default:lt(s,r,me,null,c,K)}for(U in c)if(K=c[U],Q=l[U],c.hasOwnProperty(U)&&K!==Q&&(K!=null||Q!=null))switch(U){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:lt(s,r,U,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)K=l[Se],l.hasOwnProperty(Se)&&K!=null&&!c.hasOwnProperty(Se)&&lt(s,r,Se,null,c,K);for(J in c)if(K=c[J],Q=l[J],c.hasOwnProperty(J)&&K!==Q&&(K!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:lt(s,r,J,K,c,Q)}return;default:if(ll(r)){for(var ut in l)K=l[ut],l.hasOwnProperty(ut)&&K!==void 0&&!c.hasOwnProperty(ut)&&dp(s,r,ut,void 0,c,K);for(X in c)K=c[X],Q=l[X],!c.hasOwnProperty(X)||K===Q||K===void 0&&Q===void 0||dp(s,r,X,K,c,Q);return}}for(var F in l)K=l[F],l.hasOwnProperty(F)&&K!=null&&!c.hasOwnProperty(F)&&lt(s,r,F,null,c,K);for(ne in c)K=c[ne],Q=l[ne],!c.hasOwnProperty(ne)||K===Q||K==null&&Q==null||lt(s,r,ne,K,c,Q)}function Rv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,C=y.initiatorType,w=y.duration;if(_&&w&&Rv(C)){for(C=0,w=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],J=U.startTime;if(J>w)break;var X=U.transferSize,ne=U.initiatorType;X&&Rv(ne)&&(U=U.responseEnd,C+=X*(U<w?1:(w-J)/(U-J)))}if(--c,r+=8*(_+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var fp=null,hp=null;function $c(s){return s.nodeType===9?s:s.ownerDocument}function bv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function pp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var mp=null;function Xw(){var s=window.event;return s&&s.type==="popstate"?s===mp?!1:(mp=s,!0):(mp=null,!1)}var Nv=typeof setTimeout=="function"?setTimeout:void 0,Zw=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(s){return Mv.resolve(null).then(s).catch(tR)}:Nv;function tR(s){setTimeout(function(){throw s})}function yr(s){return s==="head"}function Dv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Ia(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Gl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Gl(l);for(var _=l.firstChild;_;){var C=_.nextSibling,w=_.nodeName;_[ji]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=C}}else l==="body"&&Gl(s.ownerDocument.body);l=y}while(l);Ia(r)}function kv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function gp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":gp(l),Wr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function nR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[ji])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=si(s.nextSibling),s===null)break}return null}function iR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=si(s.nextSibling),s===null))return null;return s}function Pv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=si(s.nextSibling),s===null))return null;return s}function yp(s){return s.data==="$?"||s.data==="$~"}function _p(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function sR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function si(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var vp=null;function Vv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return si(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Uv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Lv(s,r,l){switch(r=$c(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Gl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Wr(s)}var ri=new Map,Ov=new Set;function Qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var vs=ae.d;ae.d={f:rR,r:oR,D:aR,C:lR,L:uR,m:cR,X:fR,S:dR,M:hR};function rR(){var s=vs.f(),r=Bc();return s||r}function oR(s){var r=Zi(s);r!==null&&r.tag===5&&r.type==="form"?t_(r):vs.r(s)}var Sa=typeof document>"u"?null:document;function qv(s,r,l){var c=Sa;if(c&&typeof r=="string"&&r){var y=Ct(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Ov.has(y)||(Ov.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),rn(r,"link",s),xt(r),c.head.appendChild(r)))}}function aR(s){vs.D(s),qv("dns-prefetch",s,null)}function lR(s,r){vs.C(s,r),qv("preconnect",s,r)}function uR(s,r,l){vs.L(s,r,l);var c=Sa;if(c&&s&&r){var y='link[rel="preload"][as="'+Ct(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Ct(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Ct(l.imageSizes)+'"]')):y+='[href="'+Ct(s)+'"]';var _=y;switch(r){case"style":_=Aa(s);break;case"script":_=Ca(s)}ri.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),ri.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Jl(_))||r==="script"&&c.querySelector(Yl(_))||(r=c.createElement("link"),rn(r,"link",s),xt(r),c.head.appendChild(r)))}}function cR(s,r){vs.m(s,r);var l=Sa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ct(c)+'"][href="'+Ct(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ca(s)}if(!ri.has(_)&&(s=T({rel:"modulepreload",href:s},r),ri.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yl(_)))return}c=l.createElement("link"),rn(c,"link",s),xt(c),l.head.appendChild(c)}}}function dR(s,r,l){vs.S(s,r,l);var c=Sa;if(c&&s){var y=hi(c).hoistableStyles,_=Aa(s);r=r||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=c.querySelector(Jl(_)))w.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=ri.get(_))&&Tp(s,l);var U=C=c.createElement("link");xt(U),rn(U,"link",s),U._p=new Promise(function(J,X){U.onload=J,U.onerror=X}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Wc(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function fR(s,r){vs.X(s,r);var l=Sa;if(l&&s){var c=hi(l).hoistableScripts,y=Ca(s),_=c.get(y);_||(_=l.querySelector(Yl(y)),_||(s=T({src:s,async:!0},r),(r=ri.get(y))&&Ep(s,r),_=l.createElement("script"),xt(_),rn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function hR(s,r){vs.M(s,r);var l=Sa;if(l&&s){var c=hi(l).hoistableScripts,y=Ca(s),_=c.get(y);_||(_=l.querySelector(Yl(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=ri.get(y))&&Ep(s,r),_=l.createElement("script"),xt(_),rn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Bv(s,r,l,c){var y=(y=De.current)?Qc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Aa(l.href),l=hi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Aa(l.href);var _=hi(y).hoistableStyles,C=_.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,C),(_=y.querySelector(Jl(s)))&&!_._p&&(C.instance=_,C.state.loading=5),ri.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ri.set(s,l),_||pR(y,s,l,C.state))),r&&c===null)throw Error(i(528,""));return C}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ca(l),l=hi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Aa(s){return'href="'+Ct(s)+'"'}function Jl(s){return'link[rel="stylesheet"]['+s+"]"}function Fv(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function pR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),rn(r,"link",l),xt(r),s.head.appendChild(r))}function Ca(s){return'[src="'+Ct(s)+'"]'}function Yl(s){return"script[async]"+s}function zv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Ct(l.href)+'"]');if(c)return r.instance=c,xt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),xt(c),rn(c,"style",y),Wc(c,l.precedence,s),r.instance=c;case"stylesheet":y=Aa(l.href);var _=s.querySelector(Jl(y));if(_)return r.state.loading|=4,r.instance=_,xt(_),_;c=Fv(l),(y=ri.get(y))&&Tp(c,y),_=(s.ownerDocument||s).createElement("link"),xt(_);var C=_;return C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),rn(_,"link",c),r.state.loading|=4,Wc(_,l.precedence,s),r.instance=_;case"script":return _=Ca(l.src),(y=s.querySelector(Yl(_)))?(r.instance=y,xt(y),y):(c=l,(y=ri.get(_))&&(c=T({},l),Ep(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),xt(y),rn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Wc(c,l.precedence,s));return r.instance}function Wc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,C=0;C<c.length;C++){var w=c[C];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Tp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Ep(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var jc=null;function Hv(s,r,l){if(jc===null){var c=new Map,y=jc=new Map;y.set(l,c)}else y=jc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[ji]||_[At]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=s+C;var w=c.get(C);w?w.push(_):c.set(C,[_])}}return c}function Gv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function mR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Jv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function gR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Aa(c.href),_=r.querySelector(Jl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Xc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,xt(_);return}_=r.ownerDocument||r,c=Fv(c),(y=ri.get(y))&&Tp(c,y),_=_.createElement("link"),xt(_);var C=_;C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),rn(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Xc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Sp=0;function yR(s,r){return s.stylesheets&&s.count===0&&ed(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ed(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&Sp===0&&(Sp=62500*jw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ed(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Sp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zc=null;function ed(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zc=new Map,r.forEach(_R,s),Zc=null,Xc.call(s))}function _R(s,r){if(!(r.state.loading&4)){var l=Zc.get(s);if(l)var c=l.get(null);else{l=new Map,Zc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||c,_===c&&l.set(null,y),l.set(C,y),this.count++,c=Xc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Kl={$$typeof:W,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function vR(s,r,l,c,y,_,C,w,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Yv(s,r,l,c,y,_,C,w,U,J,X,ne){return s=new vR(s,r,l,C,U,J,X,ne,w),r=1,_===!0&&(r|=24),_=qn(3,null,null,r),s.current=_,_.stateNode=s,r=th(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},rh(_),s}function Kv(s){return s?(s=ta,s):ta}function $v(s,r,l,c,y,_){y=Kv(y),c.context===null?c.context=y:c.pendingContext=y,c=or(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=ar(s,c,r),l!==null&&(Mn(l,s,r),Il(l,s,r))}function Qv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Ap(s,r){Qv(s,r),(s=s.alternate)&&Qv(s,r)}function Wv(s){if(s.tag===13||s.tag===31){var r=lo(s,67108864);r!==null&&Mn(r,s,67108864),Ap(s,67108864)}}function jv(s){if(s.tag===13||s.tag===31){var r=Gn();r=tl(r);var l=lo(s,r);l!==null&&Mn(l,s,r),Ap(s,r)}}var td=!0;function TR(s,r,l,c){var y=$.T;$.T=null;var _=ae.p;try{ae.p=2,Cp(s,r,l,c)}finally{ae.p=_,$.T=y}}function ER(s,r,l,c){var y=$.T;$.T=null;var _=ae.p;try{ae.p=8,Cp(s,r,l,c)}finally{ae.p=_,$.T=y}}function Cp(s,r,l,c){if(td){var y=Ip(c);if(y===null)cp(s,r,c,nd,l),Zv(s,c);else if(AR(y,s,r,l,c))c.stopPropagation();else if(Zv(s,c),r&4&&-1<SR.indexOf(s)){for(;y!==null;){var _=Zi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=fi(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var U=1<<31-yn(C);w.entanglements[1]|=U,C&=~U}Vi(_),(tt&6)===0&&(Oc=be()+500,Fl(0))}}break;case 31:case 13:w=lo(_,2),w!==null&&Mn(w,_,2),Bc(),Ap(_,2)}if(_=Ip(c),_===null&&cp(s,r,c,nd,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else cp(s,r,c,null,l)}}function Ip(s){return s=Ko(s),wp(s)}var nd=null;function wp(s){if(nd=null,s=Xi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return nd=s,null}function Xv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ft()){case We:return 2;case nt:return 8;case vt:case Et:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var Rp=!1,_r=null,vr=null,Tr=null,$l=new Map,Ql=new Map,Er=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zv(s,r){switch(s){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":$l.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(r.pointerId)}}function Wl(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Zi(r),r!==null&&Wv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function AR(s,r,l,c,y){switch(r){case"focusin":return _r=Wl(_r,s,r,l,c,y),!0;case"dragenter":return vr=Wl(vr,s,r,l,c,y),!0;case"mouseover":return Tr=Wl(Tr,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return $l.set(_,Wl($l.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ql.set(_,Wl(Ql.get(_)||null,s,r,l,c,y)),!0}return!1}function e0(s){var r=Xi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Ou(s.priority,function(){jv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Ou(s.priority,function(){jv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function id(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Ip(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Yo=c,l.target.dispatchEvent(c),Yo=null}else return r=Zi(l),r!==null&&Wv(r),s.blockedOn=l,!1;r.shift()}return!0}function t0(s,r,l){id(s)&&l.delete(r)}function CR(){Rp=!1,_r!==null&&id(_r)&&(_r=null),vr!==null&&id(vr)&&(vr=null),Tr!==null&&id(Tr)&&(Tr=null),$l.forEach(t0),Ql.forEach(t0)}function sd(s,r){s.blockedOn===r&&(s.blockedOn=null,Rp||(Rp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CR)))}var rd=null;function n0(s){rd!==s&&(rd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rd===s&&(rd=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(wp(c||l)===null)continue;break}var _=Zi(l);_!==null&&(s.splice(r,3),r-=3,Ih(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Ia(s){function r(U){return sd(U,s)}_r!==null&&sd(_r,s),vr!==null&&sd(vr,s),Tr!==null&&sd(Tr,s),$l.forEach(r),Ql.forEach(r);for(var l=0;l<Er.length;l++){var c=Er[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Er.length&&(l=Er[0],l.blockedOn===null);)e0(l),l.blockedOn===null&&Er.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],C=y[en]||null;if(typeof _=="function")C||n0(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[en]||null)w=C.formAction;else if(wp(y)!==null)continue}else w=C.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),n0(l)}}}function i0(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function bp(s){this._internalRoot=s}od.prototype.render=bp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Gn();$v(l,c,s,r,null,null)},od.prototype.unmount=bp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;$v(s.current,2,null,s,null,null),Bc(),r[wi]=null}};function od(s){this._internalRoot=s}od.prototype.unstable_scheduleHydration=function(s){if(s){var r=Wi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Er.length&&r!==0&&r<Er[l].priority;l++);Er.splice(l,0,s),l===0&&e0(s)}};var s0=e.version;if(s0!=="19.2.0")throw Error(i(527,s0,"19.2.0"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var IR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{Vs=ad.inject(IR),un=ad}catch{}}return Xl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=d_,_=f_,C=h_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=Yv(s,1,!1,null,null,l,c,null,y,_,C,i0),s[wi]=r.current,up(s),new bp(r)},Xl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=d_,C=f_,w=h_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),r=Yv(s,1,!0,r,l??null,c,y,U,_,C,w,i0),r.context=Kv(null),l=r.current,c=Gn(),c=tl(c),y=or(c),y.callback=null,ar(l,y,c),l=c,r.current.lanes=l,Os(r,l),Vi(r),s[wi]=r.current,up(s),new od(r)},Xl.version="19.2.0",Xl}var p0;function VR(){if(p0)return Mp.exports;p0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mp.exports=PR(),Mp.exports}var UR=VR();const LR=CS(UR),OR=()=>{};var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,R=m&63;p||(R=64,u||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||T==null)throw new BR;const S=a<<2|d>>4;if(i.push(S),m!==64){const R=d<<4&240|m>>2;if(i.push(R),T!==64){const L=m<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FR=function(n){const e=IS(n);return wS.encodeByteArray(e,!0)},bd=function(n){return FR(n).replace(/\./g,"")},RS=function(n){try{return wS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=()=>zR().__FIREBASE_DEFAULTS__,GR=()=>{if(typeof process>"u"||typeof m0>"u")return;const n=m0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RS(n[1]);return e&&JSON.parse(e)},Xd=()=>{try{return OR()||HR()||GR()||JR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bS=n=>{var e,t;return(t=(e=Xd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},xS=n=>{const e=bS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},NS=()=>{var n;return(n=Xd())===null||n===void 0?void 0:n.config},MS=n=>{var e;return(e=Xd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bd(JSON.stringify(t)),bd(JSON.stringify(u)),""].join(".")}const uu={};function KR(){const n={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?n.emulator.push(e):n.prod.push(e);return n}function $R(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let g0=!1;function Dm(n,e){if(typeof window>"u"||typeof document>"u"||!Fr(window.location.host)||uu[n]===e||uu[n]||g0)return;uu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=KR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{g0=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=$R(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),B=document.getElementById(z)||document.createElement("a"),ee=t("preprendIcon"),Y=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(B,z);const ie=m();p(Y,ee),W.append(Y,L,B,ie),document.body.appendChild(W)}a?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function WR(){var n;const e=(n=Xd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e1(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function t1(){return!WR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n1(){try{return typeof indexedDB=="object"}catch{return!1}}function i1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="FirebaseError";class Yi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=s1,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?r1(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Yi(o,d,i)}}function r1(n,e){return n.replace(o1,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const o1=/\{\$([^}]+)}/g;function a1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(y0(a)&&y0(u)){if(!Ro(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function y0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function nu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function l1(n,e){const t=new u1(n,e);return t.subscribe.bind(t)}class u1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");c1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function c1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n){return n&&n._delegate?n._delegate:n}class kr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new YR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h1(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:f1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f1(n){return n===So?void 0:n}function h1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new d1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const m1={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},g1=He.INFO,y1={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},_1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=y1[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=g1,this._logHandler=_1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const v1=(n,e)=>e.some(t=>n instanceof t);let _0,v0;function T1(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kS=new WeakMap,$p=new WeakMap,PS=new WeakMap,Up=new WeakMap,Pm=new WeakMap;function S1(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(xr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&kS.set(t,n)}).catch(()=>{}),Pm.set(e,n),e}function A1(n){if($p.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function C1(n){Qp=n(Qp)}function I1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Lp(this),e,...t);return PS.set(i,e.sort?e.sort():[e]),xr(i)}:E1().includes(n)?function(...e){return n.apply(Lp(this),e),xr(kS.get(this))}:function(...e){return xr(n.apply(Lp(this),e))}}function w1(n){return typeof n=="function"?I1(n):(n instanceof IDBTransaction&&A1(n),v1(n,T1())?new Proxy(n,Qp):n)}function xr(n){if(n instanceof IDBRequest)return S1(n);if(Up.has(n))return Up.get(n);const e=w1(n);return e!==n&&(Up.set(n,e),Pm.set(e,n)),e}const Lp=n=>Pm.get(n);function R1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=xr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(xr(u.result),p.oldVersion,p.newVersion,xr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const b1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],Op=new Map;function T0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Op.get(e))return Op.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=x1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||b1.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Op.set(e,a),a}C1(n=>({...n,get:(e,t,i)=>T0(e,t)||n.get(e,t,i),has:(e,t)=>!!T0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(M1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function M1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",E0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new km("@firebase/app"),D1="@firebase/app-compat",k1="@firebase/analytics-compat",P1="@firebase/analytics",V1="@firebase/app-check-compat",U1="@firebase/app-check",L1="@firebase/auth",O1="@firebase/auth-compat",q1="@firebase/database",B1="@firebase/data-connect",F1="@firebase/database-compat",z1="@firebase/functions",H1="@firebase/functions-compat",G1="@firebase/installations",J1="@firebase/installations-compat",Y1="@firebase/messaging",K1="@firebase/messaging-compat",$1="@firebase/performance",Q1="@firebase/performance-compat",W1="@firebase/remote-config",j1="@firebase/remote-config-compat",X1="@firebase/storage",Z1="@firebase/storage-compat",eb="@firebase/firestore",tb="@firebase/ai",nb="@firebase/firestore-compat",ib="firebase",sb="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]",rb={[Wp]:"fire-core",[D1]:"fire-core-compat",[P1]:"fire-analytics",[k1]:"fire-analytics-compat",[U1]:"fire-app-check",[V1]:"fire-app-check-compat",[L1]:"fire-auth",[O1]:"fire-auth-compat",[q1]:"fire-rtdb",[B1]:"fire-data-connect",[F1]:"fire-rtdb-compat",[z1]:"fire-fn",[H1]:"fire-fn-compat",[G1]:"fire-iid",[J1]:"fire-iid-compat",[Y1]:"fire-fcm",[K1]:"fire-fcm-compat",[$1]:"fire-perf",[Q1]:"fire-perf-compat",[W1]:"fire-rc",[j1]:"fire-rc-compat",[X1]:"fire-gcs",[Z1]:"fire-gcs-compat",[eb]:"fire-fst",[nb]:"fire-fst-compat",[tb]:"fire-vertex","fire-js":"fire-js",[ib]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,ob=new Map,Xp=new Map;function S0(n,e){try{n.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bo(n){const e=n.name;if(Xp.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,n);for(const t of xd.values())S0(t,n);for(const t of ob.values())S0(t,n);return!0}function Zd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new wu("app","Firebase",ab);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=sb;function VS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:jp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Nr.create("bad-app-name",{appName:String(o)});if(t||(t=NS()),!t)throw Nr.create("no-options");const a=xd.get(o);if(a){if(Ro(t,a.options)&&Ro(i,a.config))return a;throw Nr.create("duplicate-app",{appName:o})}const u=new p1(o);for(const p of Xp.values())u.addComponent(p);const d=new lb(t,i,u);return xd.set(o,d),d}function Vm(n=jp){const e=xd.get(n);if(!e&&n===jp&&NS())return VS();if(!e)throw Nr.create("no-app",{appName:n});return e}function Li(n,e,t){var i;let o=(i=rb[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(d.join(" "));return}bo(new kr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firebase-heartbeat-database",cb=1,yu="firebase-heartbeat-store";let qp=null;function US(){return qp||(qp=R1(ub,cb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nr.create("idb-open",{originalErrorMessage:n.message})})),qp}async function db(n){try{const t=(await US()).transaction(yu),i=await t.objectStore(yu).get(LS(n));return await t.done,i}catch(e){if(e instanceof Yi)Is.warn(e.message);else{const t=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function A0(n,e){try{const i=(await US()).transaction(yu,"readwrite");await i.objectStore(yu).put(e,LS(n)),await i.done}catch(t){if(t instanceof Yi)Is.warn(t.message);else{const i=Nr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(i.message)}}}function LS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=1024,hb=30;class pb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gb(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>hb){const u=yb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C0(),{heartbeatsToSend:i,unsentEntries:o}=mb(this._heartbeatsCache.heartbeats),a=bd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Is.warn(t),""}}}function C0(){return new Date().toISOString().substring(0,10)}function mb(n,e=fb){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),I0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),I0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class gb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n1()?i1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await db(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return A0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return A0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function I0(n){return bd(JSON.stringify({version:2,heartbeats:n})).length}function yb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){bo(new kr("platform-logger",e=>new N1(e),"PRIVATE")),bo(new kr("heartbeat",e=>new pb(e),"PRIVATE")),Li(Wp,E0,n),Li(Wp,E0,"esm2017"),Li("fire-js","")}_b("");function Um(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function OS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vb=OS,qS=new wu("auth","Firebase",OS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new km("@firebase/auth");function Tb(n,...e){Nd.logLevel<=He.WARN&&Nd.warn(`Auth (${Vo}): ${n}`,...e)}function gd(n,...e){Nd.logLevel<=He.ERROR&&Nd.error(`Auth (${Vo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(n,...e){throw Om(n,...e)}function Ti(n,...e){return Om(n,...e)}function Lm(n,e,t){const i=Object.assign(Object.assign({},vb()),{[e]:t});return new wu("auth","Firebase",i).create(e,{appName:n.name})}function As(n){return Lm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Eb(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ui(n,"argument-error"),Lm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Om(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Om(e,...t)}function Es(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gd(e),new Error(e)}function ws(n,e){n||Es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Sb(){return w0()==="http:"||w0()==="https:"}function w0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sb()||XR()||"connection"in navigator)?navigator.onLine:!0}function Cb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=QR()||ZR()}get(){return Ab()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e){ws(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rb=new bu(3e4,6e4);function zr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Hr(n,e,t,i,o={}){return FS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Ru(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return jR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Fr(n.emulatorConfig.host)&&(m.credentials="include"),BS.fetch()(await zS(n,n.config.apiHost,t,d),m)})}async function FS(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Ib),e);try{const o=new xb(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw ld(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw ld(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw ld(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Lm(n,v,m);ui(n,v)}}catch(o){if(o instanceof Yi)throw o;ui(n,"network-request-failed",{message:String(o)})}}async function xu(n,e,t,i,o={}){const a=await Hr(n,e,t,i,o);return"mfaPendingCredential"in a&&ui(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function zS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?qm(n.config,o):`${n.config.apiScheme}://${o}`;return wb.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function bb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),Rb.get())})}}function ld(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ti(n,e,i);return o.customData._tokenResponse=t,o}function R0(n){return n!==void 0&&n.enterprise!==void 0}class Nb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mb(n,e){return Hr(n,"GET","/v2/recaptchaConfig",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(n,e){return Hr(n,"POST","/v1/accounts:delete",e)}async function Md(n,e){return Hr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kb(n,e=!1){const t=kt(n),i=await t.getIdToken(e),o=Bm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:cu(Bp(o.auth_time)),issuedAtTime:cu(Bp(o.iat)),expirationTime:cu(Bp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bp(n){return Number(n)*1e3}function Bm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=RS(t);return o?JSON.parse(o):(gd("Failed to decode base64 JWT payload"),null)}catch(o){return gd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function b0(n){const e=Bm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Yi&&Pb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Pb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(n){var e;const t=n.auth,i=await n.getIdToken(),o=await _u(n,Md(t,{idToken:i}));Ce(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?HS(a.providerUserInfo):[],d=Lb(n.providerData,u),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new em(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function Ub(n){const e=kt(n);await Dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lb(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function HS(n){return n.map(e=>{var{providerId:t}=e,i=Um(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(n,e){const t=await FS(n,{},async()=>{const i=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await zS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Fr(n.emulatorConfig.host)&&(p.credentials="include"),BS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qb(n,e){return Hr(n,"POST","/v2/accounts:revokeToken",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=b0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await Ob(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ma;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new em(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kb(this,e)}reload(){return Ub(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Dd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await _u(this,Db(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,m,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(u=t.photoURL)!==null&&u!==void 0?u:void 0,z=(d=t.tenantId)!==null&&d!==void 0?d:void 0,B=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ee=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:ie,isAnonymous:de,providerData:ue,stsTokenManager:D}=t;Ce(W&&D,e,"internal-error");const N=Ma.fromJSON(this.name,D);Ce(typeof W=="string",e,"internal-error"),Ar(T,e.name),Ar(S,e.name),Ce(typeof ie=="boolean",e,"internal-error"),Ce(typeof de=="boolean",e,"internal-error"),Ar(R,e.name),Ar(L,e.name),Ar(z,e.name),Ar(B,e.name),Ar(ee,e.name),Ar(Y,e.name);const x=new _i({uid:W,auth:e,email:S,emailVerified:ie,displayName:T,isAnonymous:de,photoURL:L,phoneNumber:R,tenantId:z,stsTokenManager:N,createdAt:ee,lastLoginAt:Y});return ue&&Array.isArray(ue)&&(x.providerData=ue.map(V=>Object.assign({},V))),B&&(x._redirectEventId=B),x}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ma;o.updateFromServerResponse(t);const a=new _i({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Dd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?HS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Ma;d.updateFromIdToken(i);const p=new _i({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new em(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;function Ss(n){ws(n instanceof Function,"Expected a class definition");let e=x0.get(n);return e?(ws(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,x0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}GS.type="NONE";const N0=GS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n,e,t){return`firebase:${n}:${e}:${t}`}class Da{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=yd(this.userKey,o.apiKey,a),this.fullPersistenceKey=yd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Da(Ss(N0),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Ss(N0);const u=yd(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const S=await Md(e,{idToken:v}).catch(()=>{});if(!S)break;T=await _i._fromGetAccountInfoResponse(e,S,v)}else T=_i._fromJSON(e,v);m!==a&&(d=T),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Da(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Da(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WS(e))return"Blackberry";if(jS(e))return"Webos";if(YS(e))return"Safari";if((e.includes("chrome/")||KS(e))&&!e.includes("edge/"))return"Chrome";if(QS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function JS(n=gn()){return/firefox\//i.test(n)}function YS(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KS(n=gn()){return/crios\//i.test(n)}function $S(n=gn()){return/iemobile/i.test(n)}function QS(n=gn()){return/android/i.test(n)}function WS(n=gn()){return/blackberry/i.test(n)}function jS(n=gn()){return/webos/i.test(n)}function Fm(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Bb(n=gn()){var e;return Fm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fb(){return e1()&&document.documentMode===10}function XS(n=gn()){return Fm(n)||QS(n)||jS(n)||WS(n)||/windows phone/i.test(n)||$S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e=[]){let t;switch(n){case"Browser":t=M0(gn());break;case"Worker":t=`${M0(gn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n,e={}){return Hr(n,"GET","/v2/passwordPolicy",zr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=6;class Jb{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Gb,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new zb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ss(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(As(this));const t=e?kt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Hb(this),t=new Jb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await qb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ss(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[Ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Tb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Gr(n){return kt(n)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=l1(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kb(n){ef=n}function eA(n){return ef.loadJS(n)}function $b(){return ef.recaptchaEnterpriseScript}function Qb(){return ef.gapiScript}function Wb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class jb{constructor(){this.enterprise=new Xb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Zb="recaptcha-enterprise",tA="NO_RECAPTCHA";class ex{constructor(e){this.type=Zb,this.auth=Gr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{Mb(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new Nb(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;R0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(tA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jb().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&R0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=$b();p.length!==0&&(p+=d),eA(p).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function k0(n,e,t,i=!1,o=!1){const a=new ex(n);let u;if(o)u=tA;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function tm(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await k0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await k0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(n,e){const t=Zd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ro(a,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function nx(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ss);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ix(n,e,t){const i=Gr(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=nA(e),{host:u,port:d}=sx(e),p=d===null?"":`:${d}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ro(m,i.config.emulator)&&Ro(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Fr(u)?(Mm(`${a}//${u}${p}`),Dm("Auth",!0)):rx()}function nA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sx(n){const e=nA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:P0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:P0(u)}}}function P0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Es("not implemented")}_getIdTokenResponse(e){return Es("not implemented")}_linkToIdToken(e,t){return Es("not implemented")}_getReauthenticationResolver(e){return Es("not implemented")}}async function ox(n,e){return Hr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(n,e){return xu(n,"POST","/v1/accounts:signInWithPassword",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(n,e){return xu(n,"POST","/v1/accounts:signInWithEmailLink",zr(n,e))}async function ux(n,e){return xu(n,"POST","/v1/accounts:signInWithEmailLink",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends zm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,t,"signInWithPassword",ax);case"emailLink":return lx(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tm(e,i,"signUpPassword",ox);case"emailLink":return ux(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e){return xu(n,"POST","/v1/accounts:signInWithIdp",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="http://localhost";class xo extends zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Um(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new xo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ka(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ka(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}buildRequest(){const e={requestUri:cx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fx(n){const e=tu(nu(n)).link,t=e?tu(nu(e)).deep_link_id:null,i=tu(nu(n)).deep_link_id;return(i?tu(nu(i)).link:null)||i||t||e||n}class Hm{constructor(e){var t,i,o,a,u,d;const p=tu(nu(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=dx((o=p.mode)!==null&&o!==void 0?o:null);Ce(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=fx(e);try{return new Hm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,t){return vu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Hm.parseLink(t);return Ce(i,"argument-error"),vu._fromEmailAndCode(e,i.code,i.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Gm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Nu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ts.credential(t,i)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Nu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Nu{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wr.credential(t,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(n,e){return xu(n,"POST","/v1/accounts:signUp",zr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await _i._fromIdTokenResponse(e,i,o),u=V0(i);return new No({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=V0(i);return new No({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function V0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Yi{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new kd(e,t,i,o)}}function iA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,a,e,i):a})}async function px(n,e,t=!1){const i=await _u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return No._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(n,e,t=!1){const{auth:i}=n;if(kn(i.app))return Promise.reject(As(i));const o="reauthenticate";try{const a=await _u(n,iA(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Bm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),No._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ui(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(n,e,t=!1){if(kn(n.app))return Promise.reject(As(n));const i="signIn",o=await iA(n,i,e),a=await No._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function gx(n,e){return sA(Gr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(n){const e=Gr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yx(n,e,t){if(kn(n.app))return Promise.reject(As(n));const i=Gr(n),u=await tm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&rA(n),p}),d=await No._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function _x(n,e,t){return kn(n.app)?Promise.reject(As(n)):gx(kt(n),Ga.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rA(n),i})}function vx(n,e,t,i){return kt(n).onIdTokenChanged(e,t,i)}function Tx(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}function Ex(n,e,t,i){return kt(n).onAuthStateChanged(e,t,i)}function Sx(n){return kt(n).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=1e3,Cx=10;class aA extends oA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Fb()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Cx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aA.type="LOCAL";const Ix=aA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA extends oA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lA.type="SESSION";const uA=lA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new tf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),p=await wx(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const m=Jm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function bx(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function xx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Mx(){return cA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firebaseLocalStorageDb",Dx=1,Vd="firebaseLocalStorage",fA="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nf(n,e){return n.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function kx(){const n=indexedDB.deleteDatabase(dA);return new Mu(n).toPromise()}function nm(){const n=indexedDB.open(dA,Dx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vd,{keyPath:fA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vd)?e(i):(i.close(),await kx(),e(await nm()))})})}async function U0(n,e,t){const i=nf(n,!0).put({[fA]:e,value:t});return new Mu(i).toPromise()}async function Px(n,e){const t=nf(n,!1).get(e),i=await new Mu(t).toPromise();return i===void 0?null:i.value}function L0(n,e){const t=nf(n,!0).delete(e);return new Mu(t).toPromise()}const Vx=800,Ux=3;class hA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Ux)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tf._getInstance(Mx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xx(),!this.activeServiceWorker)return;this.sender=new Rx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await U0(e,Pd,"1"),await L0(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>U0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Px(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>L0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=nf(o,!1).getAll();return new Mu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hA.type="LOCAL";const Lx=hA;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n,e){return e?Ss(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ox(n){return sA(n.auth,new Ym(n),n.bypassAuthState)}function qx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),mx(t,new Ym(n),n.bypassAuthState)}async function Bx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),px(t,new Ym(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ox;case"linkViaPopup":case"linkViaRedirect":return Bx;case"reauthViaPopup":case"reauthViaRedirect":return qx;default:ui(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new bu(2e3,1e4);async function zx(n,e,t){if(kn(n.app))return Promise.reject(Ti(n,"operation-not-supported-in-this-environment"));const i=Gr(n);Eb(n,e,Gm);const o=pA(i,t);return new Ao(i,"signInViaPopup",e,o).executeNotNull()}class Ao extends mA{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fx.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="pendingRedirect",_d=new Map;class Gx extends mA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const i=await Jx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jx(n,e){const t=$x(e),i=Kx(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Yx(n,e){_d.set(n._key(),e)}function Kx(n){return Ss(n._redirectPersistence)}function $x(n){return yd(Hx,n.config.apiKey,n.name)}async function Qx(n,e,t=!1){if(kn(n.app))return Promise.reject(As(n));const i=Gr(n),o=pA(i,e),u=await new Gx(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=600*1e3;class jx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gA(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ti(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(O0(e))}saveEventToCache(e){this.cachedEventUids.add(O0(e)),this.lastProcessedEventTime=Date.now()}}function O0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(n,e={}){return Hr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tN=/^https?/;async function nN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Zx(n);for(const t of e)try{if(iN(t))return}catch{}ui(n,"unauthorized-domain")}function iN(n){const e=Zp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!tN.test(t))return!1;if(eN.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new bu(3e4,6e4);function q0(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function rN(n){return new Promise((e,t)=>{var i,o,a;function u(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),t(Ti(n,"network-request-failed"))},timeout:sN.get()})}if(!((o=(i=Oi().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Oi().gapi)===null||a===void 0)&&a.load)u();else{const d=Wb("iframefcb");return Oi()[d]=()=>{gapi.load?u():t(Ti(n,"network-request-failed"))},eA(`${Qb()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw vd=null,e})}let vd=null;function oN(n){return vd=vd||rN(n),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new bu(5e3,15e3),lN="__/auth/iframe",uN="emulator/auth/iframe",cN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fN(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qm(e,uN):`https://${n.config.authDomain}/${lN}`,i={apiKey:e.apiKey,appName:n.name,v:Vo},o=dN.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ru(i).slice(1)}`}async function hN(n){const e=await oN(n),t=Oi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:fN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cN,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ti(n,"network-request-failed"),d=Oi().setTimeout(()=>{a(u)},aN.get());function p(){Oi().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mN=500,gN=600,yN="_blank",_N="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vN(n,e,t,i=mN,o=gN){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},pN),{width:i.toString(),height:o.toString(),top:a,left:u}),m=gn().toLowerCase();t&&(d=KS(m)?yN:t),JS(m)&&(e=e||_N,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[R,L])=>`${S}${R}=${L},`,"");if(Bb(m)&&d!=="_self")return TN(e||"",d),new B0(null);const T=window.open(e||"",d,v);Ce(T,n,"popup-blocked");try{T.focus()}catch{}return new B0(T)}function TN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="__/auth/handler",SN="emulator/auth/handler",AN=encodeURIComponent("fac");async function F0(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Vo,eventId:o};if(e instanceof Gm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",a1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Nu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${AN}=${encodeURIComponent(p)}`:"";return`${CN(n)}?${Ru(d).slice(1)}${m}`}function CN({config:n}){return n.emulator?qm(n,SN):`https://${n.authDomain}/${EN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class IN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uA,this._completeRedirectFn=Qx,this._overrideRedirectResult=Yx}async _openPopup(e,t,i,o){var a;ws((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await F0(e,t,i,Zp(),o);return vN(e,u,Jm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await F0(e,t,i,Zp(),o);return bx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ws(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await hN(e),i=new jx(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fp,{type:Fp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Fp];u!==void 0&&t(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XS()||YS()||Fm()}}const wN=IN;var z0="@firebase/auth",H0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xN(n){bo(new kr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZS(n)},m=new Yb(i,o,a,p);return nx(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),bo(new kr("auth-internal",e=>{const t=Gr(e.getProvider("auth").getImmediate());return(i=>new RN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(z0,H0,bN(n)),Li(z0,H0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=300,MN=MS("authIdTokenMaxAge")||NN;let G0=null;const DN=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MN)return;const o=t==null?void 0:t.token;G0!==o&&(G0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kN(n=Vm()){const e=Zd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tx(n,{popupRedirectResolver:wN,persistence:[Lx,Ix,uA]}),i=MS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=DN(a.toString());Tx(t,u,()=>u(t.currentUser)),vx(t,d=>u(d))}}const o=bS("auth");return o&&ix(t,`http://${o}`),t}function PN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Kb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Ti("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",PN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xN("Browser");var VN="firebase",UN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(VN,UN,"app");var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,yA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function x(){}x.prototype=N.prototype,D.D=N.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(V,P,k){for(var M=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)M[Qe-2]=arguments[Qe];return N.prototype[P].apply(V,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,x){x||(x=0);var V=Array(16);if(typeof N=="string")for(var P=0;16>P;++P)V[P]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(P=0;16>P;++P)V[P]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=D.g[0],x=D.g[1],P=D.g[2];var k=D.g[3],M=N+(k^x&(P^k))+V[0]+3614090360&4294967295;N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[1]+3905402710&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[2]+606105819&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[3]+3250441966&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[4]+4118548399&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[5]+1200080426&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[6]+2821735955&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[7]+4249261313&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[8]+1770035416&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[9]+2336552879&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[10]+4294925233&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[11]+2304563134&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[12]+1804603682&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[13]+4254626195&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[14]+2792965006&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[15]+1236535329&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(P^k&(x^P))+V[1]+4129170786&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[6]+3225465664&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[11]+643717713&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[0]+3921069994&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[5]+3593408605&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[10]+38016083&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[15]+3634488961&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[4]+3889429448&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[9]+568446438&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[14]+3275163606&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[3]+4107603335&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[8]+1163531501&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[13]+2850285829&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[2]+4243563512&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[7]+1735328473&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[12]+2368359562&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(x^P^k)+V[5]+4294588738&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[8]+2272392833&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[11]+1839030562&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[14]+4259657740&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[1]+2763975236&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[4]+1272893353&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[7]+4139469664&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[10]+3200236656&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[13]+681279174&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[0]+3936430074&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[3]+3572445317&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[6]+76029189&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[9]+3654602809&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[12]+3873151461&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[15]+530742520&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[2]+3299628645&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(P^(x|~k))+V[0]+4096336452&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[7]+1126891415&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[14]+2878612391&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[5]+4237533241&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[12]+1700485571&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[3]+2399980690&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[10]+4293915773&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[1]+2240044497&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[8]+1873313359&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[15]+4264355552&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[6]+2734768916&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[13]+1309151649&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[4]+4149444226&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[11]+3174756917&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[2]+718787259&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var x=N-this.blockSize,V=this.B,P=this.h,k=0;k<N;){if(P==0)for(;k<=x;)o(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<N;)if(V[P++]=D.charCodeAt(k++),P==this.blockSize){o(this,V),P=0;break}}else for(;k<N;)if(V[P++]=D[k++],P==this.blockSize){o(this,V),P=0;break}}this.h=P,this.o+=N},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var x=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=x&255,x/=256;for(this.u(D),D=Array(16),N=x=0;4>N;++N)for(var V=0;32>V;V+=8)D[x++]=this.g[N]>>>V&255;return D};function a(D,N){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=N(D)}function u(D,N){this.h=N;for(var x=[],V=!0,P=D.length-1;0<=P;P--){var k=D[P]|0;V&&k==N||(x[P]=k,V=!1)}this.g=x}var d={};function p(D){return-128<=D&&128>D?a(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return B(m(-D));for(var N=[],x=1,V=0;D>=x;V++)N[V]=D/x|0,x*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return B(v(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(N,8)),V=T,P=0;P<D.length;P+=8){var k=Math.min(8,D.length-P),M=parseInt(D.substring(P,P+k),N);8>k?(k=m(Math.pow(N,k)),V=V.j(k).add(m(M))):(V=V.j(x),V=V.add(m(M)))}return V}var T=p(0),S=p(1),R=p(16777216);n=u.prototype,n.m=function(){if(z(this))return-B(this).m();for(var D=0,N=1,x=0;x<this.g.length;x++){var V=this.i(x);D+=(0<=V?V:4294967296+V)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(z(this))return"-"+B(this).toString(D);for(var N=m(Math.pow(D,6)),x=this,V="";;){var P=ie(x,N).g;x=ee(x,P.j(N));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=P,L(x))return k+V;for(;6>k.length;)k="0"+k;V=k+V}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=ee(this,D),z(D)?-1:L(D)?0:1};function B(D){for(var N=D.g.length,x=[],V=0;V<N;V++)x[V]=~D.g[V];return new u(x,~D.h).add(S)}n.abs=function(){return z(this)?B(this):this},n.add=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0,P=0;P<=N;P++){var k=V+(this.i(P)&65535)+(D.i(P)&65535),M=(k>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);V=M>>>16,k&=65535,M&=65535,x[P]=M<<16|k}return new u(x,x[x.length-1]&-2147483648?-1:0)};function ee(D,N){return D.add(B(N))}n.j=function(D){if(L(this)||L(D))return T;if(z(this))return z(D)?B(this).j(B(D)):B(B(this).j(D));if(z(D))return B(this.j(B(D)));if(0>this.l(R)&&0>D.l(R))return m(this.m()*D.m());for(var N=this.g.length+D.g.length,x=[],V=0;V<2*N;V++)x[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<D.g.length;P++){var k=this.i(V)>>>16,M=this.i(V)&65535,Qe=D.i(P)>>>16,Re=D.i(P)&65535;x[2*V+2*P]+=M*Re,Y(x,2*V+2*P),x[2*V+2*P+1]+=k*Re,Y(x,2*V+2*P+1),x[2*V+2*P+1]+=M*Qe,Y(x,2*V+2*P+1),x[2*V+2*P+2]+=k*Qe,Y(x,2*V+2*P+2)}for(V=0;V<N;V++)x[V]=x[2*V+1]<<16|x[2*V];for(V=N;V<2*N;V++)x[V]=0;return new u(x,0)};function Y(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function W(D,N){this.g=D,this.h=N}function ie(D,N){if(L(N))throw Error("division by zero");if(L(D))return new W(T,T);if(z(D))return N=ie(B(D),N),new W(B(N.g),B(N.h));if(z(N))return N=ie(D,B(N)),new W(B(N.g),N.h);if(30<D.g.length){if(z(D)||z(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,V=N;0>=V.l(D);)x=de(x),V=de(V);var P=ue(x,1),k=ue(V,1);for(V=ue(V,2),x=ue(x,2);!L(V);){var M=k.add(V);0>=M.l(D)&&(P=P.add(x),k=M),V=ue(V,1),x=ue(x,1)}return N=ee(D,P.j(N)),new W(P,N)}for(P=T;0<=D.l(N);){for(x=Math.max(1,Math.floor(D.m()/N.m())),V=Math.ceil(Math.log(x)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),k=m(x),M=k.j(N);z(M)||0<M.l(D);)x-=V,k=m(x),M=k.j(N);L(k)&&(k=S),P=P.add(k),D=ee(D,M)}return new W(P,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)&D.i(V);return new u(x,this.h&D.h)},n.or=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)|D.i(V);return new u(x,this.h|D.h)},n.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)^D.i(V);return new u(x,this.h^D.h)};function de(D){for(var N=D.g.length+1,x=[],V=0;V<N;V++)x[V]=D.i(V)<<1|D.i(V-1)>>>31;return new u(x,D.h)}function ue(D,N){var x=N>>5;N%=32;for(var V=D.g.length-x,P=[],k=0;k<V;k++)P[k]=0<N?D.i(k+x)>>>N|D.i(k+x+1)<<32-N:D.i(k+x);return new u(P,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Mr=u}).apply(typeof J0<"u"?J0:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _A,iu,vA,Td,im,TA,EA,SA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,I){return h==Array.prototype||h==Object.prototype||(h[E]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var E=0;E<h.length;++E){var I=h[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function o(h,E){if(E)e:{var I=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var H=h[b];if(!(H in I))break e;I=I[H]}h=h[h.length-1],b=I[h],E=E(b),E!=b&&E!=null&&e(I,h,{configurable:!0,writable:!0,value:E})}}function a(h,E){h instanceof String&&(h+="");var I=0,b=!1,H={next:function(){if(!b&&I<h.length){var j=I++;return{value:E(j,h[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(h){return h||function(){return a(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function m(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function v(h,E,I){return h.call.apply(h.bind,arguments)}function T(h,E,I){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),h.apply(E,H)}}return function(){return h.apply(E,arguments)}}function S(h,E,I){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function R(h,E){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function L(h,E){function I(){}I.prototype=E.prototype,h.aa=E.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(b,H,j){for(var le=Array(arguments.length-2),it=2;it<arguments.length;it++)le[it-2]=arguments[it];return E.prototype[H].apply(b,le)}}function z(h){const E=h.length;if(0<E){const I=Array(E);for(let b=0;b<E;b++)I[b]=h[b];return I}return[]}function B(h,E){for(let I=1;I<arguments.length;I++){const b=arguments[I];if(p(b)){const H=h.length||0,j=b.length||0;h.length=H+j;for(let le=0;le<j;le++)h[H+le]=b[le]}else h.push(b)}}class ee{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function Y(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var de=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ue(h,E,I){for(const b in h)E.call(I,h[b],b,h)}function D(h,E){for(const I in h)E.call(void 0,h[I],I,h)}function N(h){const E={};for(const I in h)E[I]=h[I];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,E){let I,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(I in b)h[I]=b[I];for(let j=0;j<x.length;j++)I=x[j],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function P(h){var E=1;h=h.split(":");const I=[];for(;0<E&&h.length;)I.push(h.shift()),E--;return h.length&&I.push(h.join(":")),I}function k(h){d.setTimeout(()=>{throw h},0)}function M(){var h=Ye;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class Qe{constructor(){this.h=this.g=null}add(E,I){const b=Re.get();b.set(E,I),this.h?this.h.next=b:this.g=b,this.h=b}}var Re=new ee(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ve=!1,Ye=new Qe,Ke=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(O)}};var O=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(I){k(I)}var E=Re;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}ve=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};d.addEventListener("test",I,E),d.removeEventListener("test",I,E)}catch{}return h})();function Ae(h,E){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(de){e:{try{ie(E.nodeName);var H=!0;break e}catch{}H=!1}H||(E=null)}}else I=="mouseover"?E=h.fromElement:I=="mouseout"&&(E=h.toElement);this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:De[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}L(Ae,oe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Pt=0;function dt(h,E,I,b,H){this.listener=h,this.proxy=null,this.src=E,this.type=I,this.capture=!!b,this.ha=H,this.key=++Pt,this.da=this.fa=!1}function Kn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ci(h){this.src=h,this.g={},this.h=0}ci.prototype.add=function(h,E,I,b,H){var j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);var le=Ds(h,E,b,H);return-1<le?(E=h[le],I||(E.fa=!1)):(E=new dt(E,this.src,j,!!b,H),E.fa=I,h.push(E)),E};function Ai(h,E){var I=E.type;if(I in h.g){var b=h.g[I],H=Array.prototype.indexOf.call(b,E,void 0),j;(j=0<=H)&&Array.prototype.splice.call(b,H,1),j&&(Kn(E),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ds(h,E,I,b){for(var H=0;H<h.length;++H){var j=h[H];if(!j.da&&j.listener==E&&j.capture==!!I&&j.ha==b)return H}return-1}var Vn="closure_lm_"+(1e6*Math.random()|0),Ki={};function ks(h,E,I,b,H){if(Array.isArray(E)){for(var j=0;j<E.length;j++)ks(h,E[j],I,b,H);return null}return I=ft(I),h&&h[Ue]?h.K(E,I,m(b)?!!b.capture:!1,H):$r(h,E,I,!1,b,H)}function $r(h,E,I,b,H,j){if(!E)throw Error("Invalid event type");var le=m(H)?!!H.capture:!!H,it=we(h);if(it||(h[Vn]=it=new ci(h)),I=it.add(E,I,b,le,j),I.proxy)return I;if(b=Bo(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)he||(H=le),H===void 0&&(H=!1),h.addEventListener(E.toString(),b,H);else if(h.attachEvent)h.attachEvent(di(E.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Bo(){function h(I){return E.call(h.src,h.listener,I)}const E=ce;return h}function Ps(h,E,I,b,H){if(Array.isArray(E))for(var j=0;j<E.length;j++)Ps(h,E[j],I,b,H);else b=m(b)?!!b.capture:!!b,I=ft(I),h&&h[Ue]?(h=h.i,E=String(E).toString(),E in h.g&&(j=h.g[E],I=Ds(j,I,b,H),-1<I&&(Kn(j[I]),Array.prototype.splice.call(j,I,1),j.length==0&&(delete h.g[E],h.h--)))):h&&(h=we(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Ds(E,I,b,H)),(I=-1<h?E[h]:null)&&$i(I))}function $i(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[Ue])Ai(E.i,h);else{var I=h.type,b=h.proxy;E.removeEventListener?E.removeEventListener(I,b,h.capture):E.detachEvent?E.detachEvent(di(I),b):E.addListener&&E.removeListener&&E.removeListener(b),(I=we(E))?(Ai(I,h),I.h==0&&(I.src=null,E[Vn]=null)):Kn(h)}}}function di(h){return h in Ki?Ki[h]:Ki[h]="on"+h}function ce(h,E){if(h.da)h=!0;else{E=new Ae(E,this);var I=h.listener,b=h.ha||h.src;h.fa&&$i(h),h=I.call(b,E)}return h}function we(h){return h=h[Vn],h instanceof ci?h:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function ft(h){return typeof h=="function"?h:(h[be]||(h[be]=function(E){return h.handleEvent(E)}),h[be])}function We(){Z.call(this),this.i=new ci(this),this.M=this,this.F=null}L(We,Z),We.prototype[Ue]=!0,We.prototype.removeEventListener=function(h,E,I,b){Ps(this,h,E,I,b)};function nt(h,E){var I,b=h.F;if(b)for(I=[];b;b=b.F)I.push(b);if(h=h.M,b=E.type||E,typeof E=="string")E=new oe(E,h);else if(E instanceof oe)E.target=E.target||h;else{var H=E;E=new oe(b,h),V(E,H)}if(H=!0,I)for(var j=I.length-1;0<=j;j--){var le=E.g=I[j];H=vt(le,b,!0,E)&&H}if(le=E.g=h,H=vt(le,b,!0,E)&&H,H=vt(le,b,!1,E)&&H,I)for(j=0;j<I.length;j++)le=E.g=I[j],H=vt(le,b,!1,E)&&H}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var I=h.g[E],b=0;b<I.length;b++)Kn(I[b]);delete h.g[E],h.h--}}this.F=null},We.prototype.K=function(h,E,I,b){return this.i.add(String(h),E,!1,I,b)},We.prototype.L=function(h,E,I,b){return this.i.add(String(h),E,!0,I,b)};function vt(h,E,I,b){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var H=!0,j=0;j<E.length;++j){var le=E[j];if(le&&!le.da&&le.capture==I){var it=le.listener,Ut=le.ha||le.src;le.fa&&Ai(h.i,le),H=it.call(Ut,b)!==!1&&H}}return H&&!b.defaultPrevented}function Et(h,E,I){if(typeof h=="function")I&&(h=S(h,I));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(h,E||0)}function Cn(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Cn(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Xt extends Z{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Cn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(h){Z.call(this),this.h=h,this.g={}}L(Vt,Z);var Vs=[];function un(h){ue(h.g,function(E,I){this.g.hasOwnProperty(I)&&$i(E)},h),h.g={}}Vt.prototype.N=function(){Vt.aa.N.call(this),un(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=d.JSON.stringify,yn=d.JSON.parse,xf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Xa(){}Xa.prototype.h=null;function Lu(h){return h.h||(h.h=h.i())}function Qr(){}var Ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Us(){oe.call(this,"d")}L(Us,oe);function fi(){oe.call(this,"c")}L(fi,oe);var Qn={},Ls=null;function Fo(){return Ls=Ls||new We}Qn.La="serverreachability";function Za(h){oe.call(this,Qn.La,h)}L(Za,oe);function Qi(h){const E=Fo();nt(E,new Za(E))}Qn.STAT_EVENT="statevent";function Os(h,E){oe.call(this,Qn.STAT_EVENT,h),this.stat=E}L(Os,oe);function Zt(h){const E=Fo();nt(E,new Os(E,h))}Qn.Ma="timingevent";function el(h,E){oe.call(this,Qn.Ma,h),this.size=E}L(el,oe);function qs(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},E)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function tl(h,E,I,b,H,j){h.info(function(){if(h.g)if(j)for(var le="",it=j.split("&"),Ut=0;Ut<it.length;Ut++){var Le=it[Ut].split("=");if(1<Le.length){var $t=Le[0];Le=Le[1];var Qt=$t.split("_");le=2<=Qt.length&&Qt[1]=="type"?le+($t+"="+Le+"&"):le+($t+"=redacted&")}}else le=null;else le=j;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+E+`
`+I+`
`+le})}function nl(h,E,I,b,H,j,le){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+E+`
`+I+`
`+j+" "+le})}function Wi(h,E,I,b){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ii(h,I)+(b?" "+b:"")})}function Ou(h,E){h.info(function(){return"TIMEOUT: "+E})}Bs.prototype.info=function(){};function Ii(h,E){if(!h.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var b=I[h];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var j=H[0];if(j!="noop"&&j!="stop"&&j!="close")for(var le=1;le<H.length;le++)H[le]=""}}}}return $n(I)}catch{return E}}var At={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},en={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wi;function Fs(){}L(Fs,Xa),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},wi=new Fs;function Ri(h,E,I,b){this.j=h,this.i=E,this.l=I,this.R=b||1,this.U=new Vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var il={},ji={};function Wr(h,E,I){h.L=1,h.v=Zr(Ct(E)),h.m=I,h.P=!0,Xi(h,null)}function Xi(h,E){h.F=Date.now(),hi(h),h.A=Ct(h.v);var I=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),ts(I.i,"t",b),h.C=0,I=h.j.J,h.h=new qu,h.g=tc(h.j,I?E:null,!h.m),0<h.O&&(h.M=new Xt(S(h.Y,h,h.g),h.O)),E=h.U,I=h.g,b=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Vs[0]=H.toString()),H=Vs);for(var j=0;j<H.length;j++){var le=ks(I,H[j],b||E.handleEvent,!1,E.h||E);if(!le)break;E.g[le.key]=le}E=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),Qi(),tl(h.i,h.u,h.A,h.l,h.R,h.m)}Ri.prototype.ca=function(h){h=h.target;const E=this.M;E&&Tn(h)==3?E.j():this.Y(h)},Ri.prototype.Y=function(h){try{if(h==this.g)e:{const Qt=Tn(this.g);var E=this.g.Ba();const er=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||no(this.g)))){this.J||Qt!=4||E==7||(E==8||0>=er?Qi(3):Qi(2)),zo(this);var I=this.g.Z();this.X=I;t:if(Zi(this)){var b=no(this.g);h="";var H=b.length,j=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),zs(this);var le="";break t}this.h.i=new d.TextDecoder}for(E=0;E<H;E++)this.h.h=!0,h+=this.h.i.decode(b[E],{stream:!(j&&E==H-1)});b.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=I==200,nl(this.i,this.u,this.A,this.l,this.R,Qt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Ut=this.g;if((it=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(it)){var Le=it;break t}}Le=null}if(I=Le)Wi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bi(this,I);else{this.o=!1,this.s=3,Zt(12),_n(this),zs(this);break e}}if(this.P){I=!0;let wn;for(;!this.J&&this.C<le.length;)if(wn=jr(this,le),wn==ji){Qt==4&&(this.s=4,Zt(14),I=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==il){this.s=4,Zt(15),Wi(this.i,this.l,le,"[Invalid Chunk]"),I=!1;break}else Wi(this.i,this.l,wn,null),bi(this,wn);if(Zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||le.length!=0||this.h.h||(this.s=1,Zt(16),I=!1),this.o=this.o&&I,!I)Wi(this.i,this.l,le,"[Invalid Chunked Response]"),_n(this),zs(this);else if(0<le.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),pl($t),$t.M=!0,Zt(11))}}else Wi(this.i,this.l,le,null),bi(this,le);Qt==4&&_n(this),this.o&&!this.J&&(Qt==4?Xu(this.j,this):(this.o=!1,hi(this)))}else Yu(this.g),I==400&&0<le.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),_n(this),zs(this)}}}catch{}finally{}};function Zi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function jr(h,E){var I=h.C,b=E.indexOf(`
`,I);return b==-1?ji:(I=Number(E.substring(I,b)),isNaN(I)?il:(b+=1,b+I>E.length?ji:(E=E.slice(b,b+I),h.C=b+I,E)))}Ri.prototype.cancel=function(){this.J=!0,_n(this)};function hi(h){h.S=Date.now()+h.I,xt(h,h.I)}function xt(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=qs(S(h.ba,h),E)}function zo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ri.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ou(this.i,this.A),this.L!=2&&(Qi(),Zt(17)),_n(this),this.s=2,zs(this)):xt(this,this.S-h)};function zs(h){h.j.G==0||h.J||Xu(h.j,h)}function _n(h){zo(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,un(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function bi(h,E){try{var I=h.j;if(I.G!=0&&(I.g==h||Hs(I.h,h))){if(!h.K&&Hs(I.h,h)&&I.G==3){try{var b=I.Da.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Xs(I),js(I);else break e;hl(I),Zt(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&I.v==0&&!I.C&&(I.C=qs(S(I.Za,I),6e3));if(1>=Bu(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else is(I,11)}else if((h.K||I.g==h)&&Xs(I),!Y(E))for(H=I.Da.g.parse(E),E=0;E<H.length;E++){let Le=H[E];if(I.T=Le[0],Le=Le[1],I.G==2)if(Le[0]=="c"){I.K=Le[1],I.ia=Le[2];const $t=Le[3];$t!=null&&(I.la=$t,I.j.info("VER="+I.la));const Qt=Le[4];Qt!=null&&(I.Aa=Qt,I.j.info("SVER="+I.Aa));const er=Le[5];er!=null&&typeof er=="number"&&0<er&&(b=1.5*er,I.L=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const wn=h.g;if(wn){const ro=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var j=b.h;j.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Gs(j,j.h),j.h=null))}if(b.D){const ss=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;ss&&(b.ya=ss,je(b.I,b.D,ss))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),b=I;var le=h;if(b.qa=ec(b,b.J?b.ia:null,b.W),le.K){Wn(b.h,le);var it=le,Ut=b.L;Ut&&(it.I=Ut),it.B&&(zo(it),hi(it)),b.g=le}else Wu(b);0<I.i.length&&Wo(I)}else Le[0]!="stop"&&Le[0]!="close"||is(I,7);else I.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?is(I,7):dl(I):Le[0]!="noop"&&I.l&&I.l.ta(Le),I.v=0)}}Qi(4)}catch{}}var Nf=class{constructor(h,E){this.g=h,this.map=E}};function sl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Bu(h){return h.h?1:h.g?h.g.size:0}function Hs(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Gs(h,E){h.g?h.g.add(E):h.h=E}function Wn(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}sl.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function vn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const I of h.g.values())E=E.concat(I.D);return E}return z(h.i)}function Fu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var E=[],I=h.length,b=0;b<I;b++)E.push(h[b]);return E}E=[],I=0;for(b in h)E[I++]=h[b];return E}function Mf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var E=[];h=h.length;for(var I=0;I<h;I++)E.push(I);return E}E=[],I=0;for(const b in h)E[I++]=b;return E}}}function Ho(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var I=Mf(h),b=Fu(h),H=b.length,j=0;j<H;j++)E.call(void 0,b[j],I&&I[j],h)}var ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Go(h,E){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var b=h[I].indexOf("="),H=null;if(0<=b){var j=h[I].substring(0,b);H=h[I].substring(b+1)}else j=h[I];E(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function es(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof es){this.h=h.h,Js(this,h.j),this.o=h.o,this.g=h.g,Xr(this,h.s),this.l=h.l;var E=h.i,I=new xi;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),Jo(this,I),this.m=h.m}else h&&(E=String(h).match(ol))?(this.h=!1,Js(this,E[1]||"",!0),this.o=Ys(E[2]||""),this.g=Ys(E[3]||"",!0),Xr(this,E[4]),this.l=Ys(E[5]||"",!0),Jo(this,E[6]||"",!0),this.m=Ys(E[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}es.prototype.toString=function(){var h=[],E=this.j;E&&h.push(jn(E,al,!0),":");var I=this.g;return(I||E=="file")&&(h.push("//"),(E=this.o)&&h.push(jn(E,al,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(jn(I,I.charAt(0)=="/"?ll:zu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",jn(I,Pf)),h.join("")};function Ct(h){return new es(h)}function Js(h,E,I){h.j=I?Ys(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Xr(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Jo(h,E,I){E instanceof xi?(h.i=E,Hu(h.i,h.h)):(I||(E=jn(E,kf)),h.i=new xi(E,h.h))}function je(h,E,I){h.i.set(E,I)}function Zr(h){return je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ys(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jn(h,E,I){return typeof h=="string"?(h=encodeURI(h).replace(E,Df),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Df(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var al=/[#\/\?@]/g,zu=/[#\?:]/g,ll=/[#\?]/g,kf=/[#\?@]/g,Pf=/#/g;function xi(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Kt(h){h.g||(h.g=new Map,h.h=0,h.i&&Go(h.i,function(E,I){h.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=xi.prototype,n.add=function(h,E){Kt(this),this.i=null,h=Un(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(E),this.h+=1,this};function Yo(h,E){Kt(h),E=Un(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Ko(h,E){return Kt(h),E=Un(h,E),h.g.has(E)}n.forEach=function(h,E){Kt(this),this.g.forEach(function(I,b){I.forEach(function(H){h.call(E,H,b,this)},this)},this)},n.na=function(){Kt(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let b=0;b<E.length;b++){const H=h[b];for(let j=0;j<H.length;j++)I.push(E[b])}return I},n.V=function(h){Kt(this);let E=[];if(typeof h=="string")Ko(this,h)&&(E=E.concat(this.g.get(Un(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)E=E.concat(h[I])}return E},n.set=function(h,E){return Kt(this),this.i=null,h=Un(this,h),Ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function ts(h,E,I){Yo(h,E),0<I.length&&(h.i=null,h.g.set(Un(h,E),z(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var b=E[I];const j=encodeURIComponent(String(b)),le=this.V(b);for(b=0;b<le.length;b++){var H=j;le[b]!==""&&(H+="="+encodeURIComponent(String(le[b]))),h.push(H)}}return this.i=h.join("&")};function Un(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Hu(h,E){E&&!h.j&&(Kt(h),h.i=null,h.g.forEach(function(I,b){var H=b.toLowerCase();b!=H&&(Yo(this,b),ts(this,H,I))},h)),h.j=E}function ul(h,E){const I=new Bs;if(d.Image){const b=new Image;b.onload=R(In,I,"TestLoadImage: loaded",!0,E,b),b.onerror=R(In,I,"TestLoadImage: error",!1,E,b),b.onabort=R(In,I,"TestLoadImage: abort",!1,E,b),b.ontimeout=R(In,I,"TestLoadImage: timeout",!1,E,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else E(!1)}function Gu(h,E){const I=new Bs,b=new AbortController,H=setTimeout(()=>{b.abort(),In(I,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:b.signal}).then(j=>{clearTimeout(H),j.ok?In(I,"TestPingServer: ok",!0,E):In(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),In(I,"TestPingServer: error",!1,E)})}function In(h,E,I,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(I)}catch{}}function pi(){this.g=new xf}function cl(h,E,I){const b=I||"";try{Ho(h,function(H,j){let le=H;m(H)&&(le=$n(H)),E.push(b+j+"="+encodeURIComponent(le))})}catch(H){throw E.push(b+"type="+encodeURIComponent("_badmap")),H}}function Ni(h){this.l=h.Ub||null,this.j=h.eb||!1}L(Ni,Xa),Ni.prototype.g=function(){return new Ln(this.l,this.j)},Ni.prototype.i=(function(h){return function(){return h}})({});function Ln(h,E){We.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ln,We),n=Ln.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,Ks(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ks(this)),this.g&&(this.readyState=3,Ks(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$o(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function $o(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Mi(this):Ks(this),this.readyState==3&&$o(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Mi(this))},n.Qa=function(h){this.g&&(this.response=h,Mi(this))},n.ga=function(){this.g&&Mi(this)};function Mi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ks(h)}n.setRequestHeader=function(h,E){this.u.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=E.next();return h.join(`\r
`)};function Ks(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function eo(h){let E="";return ue(h,function(I,b){E+=b,E+=":",E+=I,E+=`\r
`}),E}function $s(h,E,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=eo(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):je(h,E,I))}function ht(h){We.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(ht,We);var cn=/^https?$/i,ns=["POST","PUT"];n=ht.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,E,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wi.g(),this.v=this.o?Lu(this.o):Lu(wi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(j){to(this,j);return}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)I.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())I.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find(j=>j.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ns,E,void 0))||b||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,le]of I)this.g.setRequestHeader(j,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qo(this),this.u=!0,this.g.send(h),this.u=!1}catch(j){to(this,j)}};function to(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Qs(h),Ws(h)}function Qs(h){h.A||(h.A=!0,nt(h,"complete"),nt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,nt(this,"complete"),nt(this,"abort"),Ws(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ws(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ju(this):this.bb())},n.bb=function(){Ju(this)};function Ju(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Tn(h)!=4||h.Z()!=2)){if(h.u&&Tn(h)==4)Et(h.Ea,0,h);else if(nt(h,"readystatechange"),Tn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var b;if(b=le===0){var H=String(h.D).match(ol)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),b=!cn.test(H?H.toLowerCase():"")}I=b}if(I)nt(h,"complete"),nt(h,"success");else{h.m=6;try{var j=2<Tn(h)?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.Z()+"]",Qs(h)}}finally{Ws(h)}}}}function Ws(h,E){if(h.g){Qo(h);const I=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||nt(h,"ready");try{I.onreadystatechange=b}catch{}}}function Qo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Tn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),yn(E)}};function no(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yu(h){const E={};h=(h.g&&2<=Tn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(Y(h[b]))continue;var I=P(h[b]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const j=E[H]||[];E[H]=j,j.push(I)}D(E,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(h,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||E}function Ku(h){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,h),this.cb=io("retryDelaySeedMs",1e4,h),this.Wa=io("forwardChannelMaxRetries",2,h),this.wa=io("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new sl(h&&h.concurrentRequestLimit),this.Da=new pi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ku.prototype,n.la=8,n.G=1,n.connect=function(h,E,I,b){Zt(0),this.W=h,this.H=E||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.I=ec(this,null,this.W),Wo(this)};function dl(h){if($u(h),h.G==3){var E=h.U++,I=Ct(h.I);if(je(I,"SID",h.K),je(I,"RID",E),je(I,"TYPE","terminate"),so(h,I),E=new Ri(h,h.j,E),E.L=2,E.v=Zr(Ct(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=E.v,I=!0),I||(E.g=tc(E.j,null),E.g.ea(E.v)),E.F=Date.now(),hi(E)}ml(h)}function js(h){h.g&&(pl(h),h.g.cancel(),h.g=null)}function $u(h){js(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Wo(h){if(!rl(h.h)&&!h.s){h.s=!0;var E=h.Ga;ae||Ke(),ve||(ae(),ve=!0),Ye.add(E,h),h.B=0}}function Vf(h,E){return Bu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=qs(S(h.Ga,h,E),Zu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new Ri(this,this.j,h);let j=this.o;if(this.S&&(j?(j=N(j),V(j,this.S)):j=this.S),this.m!==null||this.O||(H.H=j,j=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=fl(this,H,E),I=Ct(this.I),je(I,"RID",h),je(I,"CVER",22),this.D&&je(I,"X-HTTP-Session-Id",this.D),so(this,I),j&&(this.O?E="headers="+encodeURIComponent(String(eo(j)))+"&"+E:this.m&&$s(I,this.m,j)),Gs(this.h,H),this.Ua&&je(I,"TYPE","init"),this.P?(je(I,"$req",E),je(I,"SID","null"),H.T=!0,Wr(H,I,null)):Wr(H,I,E),this.G=2}}else this.G==3&&(h?Qu(this,h):this.i.length==0||rl(this.h)||Qu(this))};function Qu(h,E){var I;E?I=E.l:I=h.U++;const b=Ct(h.I);je(b,"SID",h.K),je(b,"RID",I),je(b,"AID",h.T),so(h,b),h.m&&h.o&&$s(b,h.m,h.o),I=new Ri(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),E&&(h.i=E.D.concat(h.i)),E=fl(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Gs(h.h,I),Wr(I,b,E)}function so(h,E){h.H&&ue(h.H,function(I,b){je(E,b,I)}),h.l&&Ho({},function(I,b){je(E,b,I)})}function fl(h,E,I){I=Math.min(h.i.length,I);var b=h.l?S(h.l.Na,h.l,h):null;e:{var H=h.i;let j=-1;for(;;){const le=["count="+I];j==-1?0<I?(j=H[0].g,le.push("ofs="+j)):j=0:le.push("ofs="+j);let it=!0;for(let Ut=0;Ut<I;Ut++){let Le=H[Ut].g;const $t=H[Ut].map;if(Le-=j,0>Le)j=Math.max(0,H[Ut].g-100),it=!1;else try{cl($t,le,"req"+Le+"_")}catch{b&&b($t)}}if(it){b=le.join("&");break e}}}return h=h.i.splice(0,I),E.D=h,b}function Wu(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;ae||Ke(),ve||(ae(),ve=!0),Ye.add(E,h),h.v=0}}function hl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=qs(S(h.Fa,h),Zu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=qs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),js(this),ju(this))};function pl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ju(h){h.g=new Ri(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=Ct(h.qa);je(E,"RID","rpc"),je(E,"SID",h.K),je(E,"AID",h.T),je(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&je(E,"TO",h.ja),je(E,"TYPE","xmlhttp"),so(h,E),h.m&&h.o&&$s(E,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Zr(Ct(E)),I.m=null,I.P=!0,Xi(I,h)}n.Za=function(){this.C!=null&&(this.C=null,js(this),hl(this),Zt(19))};function Xs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Xu(h,E){var I=null;if(h.g==E){Xs(h),pl(h),h.g=null;var b=2}else if(Hs(h.h,E))I=E.D,Wn(h.h,E),b=1;else return;if(h.G!=0){if(E.o)if(b==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var H=h.B;b=Fo(),nt(b,new el(b,I)),Wo(h)}else Wu(h);else if(H=E.s,H==3||H==0&&0<E.X||!(b==1&&Vf(h,E)||b==2&&hl(h)))switch(I&&0<I.length&&(E=h.h,E.i=E.i.concat(I)),H){case 1:is(h,5);break;case 4:is(h,10);break;case 3:is(h,6);break;default:is(h,2)}}}function Zu(h,E){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*E}function is(h,E){if(h.j.info("Error code "+E),E==2){var I=S(h.fb,h),b=h.Xa;const H=!b;b=new es(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Js(b,"https"),Zr(b),H?ul(b.toString(),I):Gu(b.toString(),I)}else Zt(2);h.G=0,h.l&&h.l.sa(E),ml(h),$u(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function ml(h){if(h.G=0,h.ka=[],h.l){const E=vn(h.h);(E.length!=0||h.i.length!=0)&&(B(h.ka,E),B(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function ec(h,E,I){var b=I instanceof es?Ct(I):new es(I);if(b.g!="")E&&(b.g=E+"."+b.g),Xr(b,b.s);else{var H=d.location;b=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;var j=new es(null);b&&Js(j,b),E&&(j.g=E),H&&Xr(j,H),I&&(j.l=I),b=j}return I=h.D,E=h.ya,I&&E&&je(b,I,E),je(b,"VER",h.la),so(h,b),b}function tc(h,E,I){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new ht(new Ni({eb:I})):new ht(h.pa),E.Ha(h.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}n=nc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jo(){}jo.prototype.g=function(h,E){return new En(h,E)};function En(h,E){We.call(this),this.g=new Ku(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!Y(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!Y(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Zs(this)}L(En,We),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){dl(this.g)},En.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=$n(h),h=I);E.i.push(new Nf(E.Ya++,h)),E.G==3&&Wo(E)},En.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,En.aa.N.call(this)};function ic(h){Us.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const I in E){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}L(ic,Us);function sc(){fi.call(this),this.status=1}L(sc,fi);function Zs(h){this.g=h}L(Zs,nc),Zs.prototype.ua=function(){nt(this.g,"a")},Zs.prototype.ta=function(h){nt(this.g,new ic(h))},Zs.prototype.sa=function(h){nt(this.g,new sc)},Zs.prototype.ra=function(){nt(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,SA=function(){return new jo},EA=function(){return Fo()},TA=Qn,im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,Td=At,en.COMPLETE="complete",vA=en,Qr.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",We.prototype.listen=We.prototype.K,iu=Qr,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,_A=ht}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore",K0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new km("@firebase/firestore");function wa(){return Mo.logLevel}function pe(n,...e){if(Mo.logLevel<=He.DEBUG){const t=e.map(Km);Mo.debug(`Firestore (${Ja}): ${n}`,...t)}}function Rs(n,...e){if(Mo.logLevel<=He.ERROR){const t=e.map(Km);Mo.error(`Firestore (${Ja}): ${n}`,...t)}}function Pr(n,...e){if(Mo.logLevel<=He.WARN){const t=e.map(Km);Mo.warn(`Firestore (${Ja}): ${n}`,...t)}}function Km(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,AA(n,i,t)}function AA(n,e,t){let i=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Rs(i),new Error(i)}function st(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||AA(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Yi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class ON{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qN{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cs,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(st(typeof i.accessToken=="string",31837,{l:i}),new CA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class BN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new BN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=HN(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function sm(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Oe(i,o);{const a=IA(),u=GN(a.encode(Q0(n,t)),a.encode(Q0(e,t)));return u!==0?u:Oe(i,o)}}t+=i>65535?2:1}return Oe(n.length,e.length)}function Q0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function GN(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function qa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="__name__";class Ui{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ui.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ui?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Ui.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const i=Ui.isNumericId(e),o=Ui.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ui.extractNumericId(e).compare(Ui.extractNumericId(t)):sm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class yt extends Ui{construct(e,t,i){return new yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const JN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Ui{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return JN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W0}static keyField(){return new an([W0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(yt.fromString(e))}static fromName(e){return new Ee(yt.fromString(e).popFirst(5))}static empty(){return new Ee(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YN(n,e,t,i){if(e===!0&&i===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j0(n){if(!Ee.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X0(n){if(Ee.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Ei(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qm(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Du(n,e){if(!RA(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=-62135596800,eT=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*eT);return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Z0)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:zt("string",_t._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new _t(0,0))}static max(){return new xe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function KN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new Vr(o,Ee.empty(),e)}function $N(n){return new Vr(n.readTime,n.key,Tu)}class Vr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vr(xe.min(),Ee.empty(),Tu)}static max(){return new Vr(xe.max(),Ee.empty(),Tu)}}function QN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==WN)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function XN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ka(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}sf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function rf(n){return n==null}function Ud(n){return n===0&&1/n==-1/0}function ZN(n){return typeof n=="number"&&Number.isInteger(n)&&!Ud(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="";function e2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tT(e)),e=t2(n.get(t),e);return tT(e)}function t2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case bA:t+="";break;default:t+=a}}return t}function tT(n){return n+bA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??on.RED,this.left=o??on.EMPTY,this.right=a??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new on(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iT(this.data.getIterator())}getIteratorFrom(e){return new iT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class iT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Yt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new NA("Invalid base64 string: "+a):a}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const n2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=n2.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="server_timestamp",DA="__type__",kA="__previous_value__",PA="__local_write_time__";function jm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[DA])===null||t===void 0?void 0:t.stringValue)===MA}function of(n){const e=n.mapValue.fields[kA];return jm(e)?of(e):e}function Eu(n){const e=Ur(n.mapValue.fields[PA].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,i,o,a,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ld="(default)";class Su{constructor(e,t){this.projectId=e,this.database=t||Ld}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="__type__",s2="__max__",dd={mapValue:{}},UA="__vector__",Od="value";function Or(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jm(n)?4:o2(n)?9007199254740991:r2(n)?10:11:Ie(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=Or(n);if(t!==Or(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eu(n).isEqual(Eu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Ur(o.timestampValue),d=Ur(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Lr(o.bytesValue).isEqual(Lr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Dt(o.geoPointValue.latitude)===Dt(a.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Dt(o.integerValue)===Dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Dt(o.doubleValue),d=Dt(a.doubleValue);return u===d?Ud(u)===Ud(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(nT(u)!==nT(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Hi(u[p],d[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Au(n,e){return(n.values||[]).find((t=>Hi(t,e)))!==void 0}function Ba(n,e){if(n===e)return 0;const t=Or(n),i=Or(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Dt(a.integerValue||a.doubleValue),p=Dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return sT(n.timestampValue,e.timestampValue);case 4:return sT(Eu(n),Eu(e));case 5:return sm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Lr(a),p=Lr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Oe(d[m],p[m]);if(v!==0)return v}return Oe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Oe(Dt(a.latitude),Dt(u.latitude));return d!==0?d:Oe(Dt(a.longitude),Dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,v;const T=a.fields||{},S=u.fields||{},R=(d=T[Od])===null||d===void 0?void 0:d.arrayValue,L=(p=S[Od])===null||p===void 0?void 0:p.arrayValue,z=Oe(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:rT(R,L)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===dd.mapValue&&u===dd.mapValue)return 0;if(a===dd.mapValue)return 1;if(u===dd.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=sm(p[T],v[T]);if(S!==0)return S;const R=Ba(d[p[T]],m[v[T]]);if(R!==0)return R}return Oe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{le:t})}}function sT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Ur(n),i=Ur(e),o=Oe(t.seconds,i.seconds);return o!==0?o:Oe(t.nanos,i.nanos)}function rT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ba(t[o],i[o]);if(a)return a}return Oe(t.length,i.length)}function Fa(n){return rm(n)}function rm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ur(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Lr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=rm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${rm(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Ed(n){switch(Or(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(n);return e?16+Ed(e):16;case 5:return 2*n.stringValue.length;case 6:return Lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Ed(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Jr(i.fields,((a,u)=>{o+=a.length+Ed(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function om(n){return!!n&&"integerValue"in n}function Xm(n){return!!n&&"arrayValue"in n}function oT(n){return!!n&&"nullValue"in n}function aT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function r2(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[VA])===null||t===void 0?void 0:t.stringValue)===UA}function du(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=du(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=du(n.arrayValue.values[t]);return e}return Object.assign({},n)}function o2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===s2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(t)}setAll(e){let t=an.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=du(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Jr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Pn(du(this.value))}}function LA(n){const e=[];return Jr(n.fields,((t,i)=>{const o=new an([t]);if(Sd(i)){const a=LA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new pn(e,0,xe.min(),xe.min(),xe.min(),Pn.empty(),0)}static newFoundDocument(e,t,i,o){return new pn(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new pn(e,2,t,xe.min(),xe.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,xe.min(),xe.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.position=e,this.inclusive=t}}function lT(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Ba(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function uT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t="asc"){this.field=e,this.dir=t}}function a2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{}class Jt extends OA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new u2(e,t,i):t==="array-contains"?new f2(e,i):t==="in"?new h2(e,i):t==="not-in"?new p2(e,i):t==="array-contains-any"?new m2(e,i):new Jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new c2(e,i):new d2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ba(t,this.value)):t!==null&&Or(this.value)===Or(t)&&this.matchesComparison(Ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends OA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Gi(e,t)}matches(e){return qA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function qA(n){return n.op==="and"}function BA(n){return l2(n)&&qA(n)}function l2(n){for(const e of n.filters)if(e instanceof Gi)return!1;return!0}function am(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Fa(n.value);if(BA(n))return n.filters.map((e=>am(e))).join(",");{const e=n.filters.map((t=>am(t))).join(",");return`${n.op}(${e})`}}function FA(n,e){return n instanceof Jt?(function(i,o){return o instanceof Jt&&i.op===o.op&&i.field.isEqual(o.field)&&Hi(i.value,o.value)})(n,e):n instanceof Gi?(function(i,o){return o instanceof Gi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&FA(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function zA(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fa(t.value)}`})(n):n instanceof Gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(zA).join(" ,")+"}"})(n):"Filter"}class u2 extends Jt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class c2 extends Jt{constructor(e,t){super(e,"in",t),this.keys=HA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class d2 extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=HA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class f2 extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xm(t)&&Au(t.arrayValue,this.value)}}class h2 extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Au(this.value.arrayValue,t)}}class p2 extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Au(this.value.arrayValue,t)}}class m2 extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Au(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function cT(n,e=null,t=[],i=[],o=null,a=null,u=null){return new g2(n,e,t,i,o,a,u)}function Zm(n){const e=Me(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>am(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Fa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Fa(i))).join(",")),e.Pe=t}return e.Pe}function eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!a2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uT(n.startAt,e.startAt)&&uT(n.endAt,e.endAt)}function lm(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function y2(n,e,t,i,o,a,u,d){return new af(n,e,t,i,o,a,u,d)}function tg(n){return new af(n)}function dT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _2(n){return n.collectionGroup!==null}function fu(n){const e=Me(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Yt(an.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Bd(a,i))})),t.has(an.keyField().canonicalString())||e.Te.push(new Bd(an.keyField(),i))}return e.Te}function qi(n){const e=Me(n);return e.Ie||(e.Ie=v2(e,fu(n))),e.Ie}function v2(n,e){if(n.limitType==="F")return cT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Bd(o.field,a)}));const t=n.endAt?new qd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new qd(n.startAt.position,n.startAt.inclusive):null;return cT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function um(n,e,t){return new af(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lf(n,e){return eg(qi(n),qi(e))&&n.limitType===e.limitType}function GA(n){return`${Zm(qi(n))}|lt:${n.limitType}`}function Ra(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>zA(o))).join(", ")}]`),rf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Fa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Fa(o))).join(",")),`Target(${i})`})(qi(n))}; limitType=${n.limitType})`}function uf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of fu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const m=lT(u,d,p);return u.inclusive?m<=0:m<0})(i.startAt,fu(i),o)||i.endAt&&!(function(u,d,p){const m=lT(u,d,p);return u.inclusive?m>=0:m>0})(i.endAt,fu(i),o))})(n,e)}function T2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JA(n){return(e,t)=>{let i=!1;for(const o of fu(n)){const a=E2(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function E2(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?Ba(p,m):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new St(Ee.comparator);function bs(){return S2}const YA=new St(Ee.comparator);function su(...n){let e=YA;for(const t of n)e=e.insert(t.key,t);return e}function KA(n){let e=YA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Co(){return hu()}function $A(){return hu()}function hu(){return new Uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const A2=new St(Ee.comparator),C2=new Yt(Ee.comparator);function Ge(...n){let e=C2;for(const t of n)e=e.add(t);return e}const I2=new Yt(Oe);function w2(){return I2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function QA(n){return{integerValue:""+n}}function R2(n,e){return ZN(e)?QA(e):ng(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this._=void 0}}function b2(n,e,t){return n instanceof Fd?(function(o,a){const u={fields:{[DA]:{stringValue:MA},[PA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&jm(a)&&(a=of(a)),a&&(u.fields[kA]=a),{mapValue:u}})(t,e):n instanceof Cu?jA(n,e):n instanceof Iu?XA(n,e):(function(o,a){const u=WA(o,a),d=fT(u)+fT(o.Ee);return om(u)&&om(o.Ee)?QA(d):ng(o.serializer,d)})(n,e)}function x2(n,e,t){return n instanceof Cu?jA(n,e):n instanceof Iu?XA(n,e):t}function WA(n,e){return n instanceof zd?(function(i){return om(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Fd extends cf{}class Cu extends cf{constructor(e){super(),this.elements=e}}function jA(n,e){const t=ZA(e);for(const i of n.elements)t.some((o=>Hi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Iu extends cf{constructor(e){super(),this.elements=e}}function XA(n,e){let t=ZA(e);for(const i of n.elements)t=t.filter((o=>!Hi(o,i)));return{arrayValue:{values:t}}}class zd extends cf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function fT(n){return Dt(n.integerValue||n.doubleValue)}function ZA(n){return Xm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function N2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Cu&&o instanceof Cu||i instanceof Iu&&o instanceof Iu?qa(i.elements,o.elements,Hi):i instanceof zd&&o instanceof zd?Hi(i.Ee,o.Ee):i instanceof Fd&&o instanceof Fd})(n.transform,e.transform)}class M2{constructor(e,t){this.version=e,this.transformResults=t}}class ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class df{}function eC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ig(n.key,ai.none()):new ku(n.key,n.data,ai.none());{const t=n.data,i=Pn.empty();let o=new Yt(an.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Yr(n.key,i,new Jn(o.toArray()),ai.none())}}function D2(n,e,t){n instanceof ku?(function(o,a,u){const d=o.value.clone(),p=pT(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Yr?(function(o,a,u){if(!Ad(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=pT(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(tC(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pu(n,e,t,i){return n instanceof ku?(function(a,u,d,p){if(!Ad(a.precondition,u))return d;const m=a.value.clone(),v=mT(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof Yr?(function(a,u,d,p){if(!Ad(a.precondition,u))return d;const m=mT(a.fieldTransforms,p,u),v=u.data;return v.setAll(tC(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Ad(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function k2(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=WA(i.transform,o||null);a!=null&&(t===null&&(t=Pn.empty()),t.set(i.field,a))}return t||null}function hT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&qa(i,o,((a,u)=>N2(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ku extends df{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Yr extends df{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function pT(n,e,t){const i=new Map;st(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,x2(u,d,t[o]))}return i}function mT(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,b2(a,u,e))}return i}class ig extends df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P2 extends df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&D2(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=pu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=pu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$A();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=eC(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,i)=>hT(t,i)))&&qa(this.baseMutations,e.baseMutations,((t,i)=>hT(t,i)))}}class sg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){st(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return A2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new sg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,$e;function O2(n){switch(n){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function nC(n){if(n===void 0)return Rs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:n})}}($e=Ft||(Ft={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Mr([4294967295,4294967295],0);function gT(n){const e=IA().encode(n),t=new yA;return t.update(e),new Uint8Array(t.digest())}function yT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Mr([t,i],0),new Mr([o,a],0)]}class rg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(i<0)throw new ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Mr.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Mr.fromNumber(i)));return o.compare(q2)===1&&(o=new Mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=gT(e),[i,o]=yT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new rg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=gT(e),[i,o]=yT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ff(xe.min(),o,new St(Oe),bs(),Ge())}}class Pu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pu(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class iC{constructor(e,t){this.targetId=e,this.De=t}}class sC{constructor(e,t,i=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class _T{constructor(){this.ve=0,this.Ce=vT(),this.Fe=ln.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),i=Ge();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new Pu(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=vT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class B2{constructor(e){this.We=e,this.Ge=new Map,this.ze=bs(),this.je=fd(),this.Je=fd(),this.He=new St(Oe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(lm(a))if(i===0){const u=new Ee(a.path);this.Xe(t,u,pn.newNoDocument(u,xe.min()))}else st(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Lr(i).toUint8Array()}catch(p){if(p instanceof NA)return Pr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new rg(u,o,a)}catch(p){return Pr(p instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&lm(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,pn.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=Ge();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new ff(e,t,this.He,this.ze,i);return this.ze=bs(),this.je=fd(),this.Je=fd(),this.He=new St(Oe),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new _T,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Yt(Oe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Yt(Oe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new _T),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function fd(){return new St(Ee.comparator)}function vT(){return new St(Ee.comparator)}const F2={asc:"ASCENDING",desc:"DESCENDING"},z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H2={and:"AND",or:"OR"};class G2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cm(n,e){return n.useProto3Json||rf(e)?e:{value:e}}function Hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J2(n,e){return Hd(n,e.toTimestamp())}function Bi(n){return st(!!n,49232),xe.fromTimestamp((function(t){const i=Ur(t);return new _t(i.seconds,i.nanos)})(n))}function og(n,e){return dm(n,e).canonicalString()}function dm(n,e){const t=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oC(n){const e=yt.fromString(n);return st(dC(e),10190,{key:e.toString()}),e}function fm(n,e){return og(n.databaseId,e.path)}function zp(n,e){const t=oC(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(lC(t))}function aC(n,e){return og(n.databaseId,e)}function Y2(n){const e=oC(n);return e.length===4?yt.emptyPath():lC(e)}function hm(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lC(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function TT(n,e,t){return{name:fm(n,e),fields:t.value.mapValue.fields}}function K2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(st(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(st(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:nC(m.code);return new ye(v,m.message||"")})(u);t=new sC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=zp(n,i.document.name),a=Bi(i.document.updateTime),u=i.document.createTime?Bi(i.document.createTime):xe.min(),d=new Pn({mapValue:{fields:i.document.fields}}),p=pn.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Cd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=zp(n,i.document),a=i.readTime?Bi(i.readTime):xe.min(),u=pn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Cd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=zp(n,i.document),a=i.removedTargetIds||[];t=new Cd([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new L2(o,a),d=i.targetId;t=new iC(d,u)}}return t}function $2(n,e){let t;if(e instanceof ku)t={update:TT(n,e.key,e.value)};else if(e instanceof ig)t={delete:fm(n,e.key)};else if(e instanceof Yr)t={update:TT(n,e.key,e.data),updateMask:iM(e.fieldMask)};else{if(!(e instanceof P2))return Ie(16599,{Rt:e.type});t={verify:fm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Fd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zd)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:J2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function Q2(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Bi(o.updateTime):Bi(a);return u.isEqual(xe.min())&&(u=Bi(a)),new M2(u,o.transformResults||[])})(t,e)))):[]}function W2(n,e){return{documents:[aC(n,e.path)]}}function j2(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=aC(n,o);const a=(function(m){if(m.length!==0)return cC(Gi.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:ba(S.field),direction:eM(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=cm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function X2(n){let e=Y2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){st(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=uC(T);return S instanceof Gi&&BA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(L){return new Bd(xa(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,rf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,R=T.values||[];return new qd(R,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,R=T.values||[];return new qd(R,S)})(t.endAt)),y2(e,o,u,a,d,"F",p,m)}function Z2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=xa(t.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=xa(t.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xa(t.unaryFilter.field);return Jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=xa(t.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(xa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gi.create(t.compositeFilter.filters.map((i=>uC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function eM(n){return F2[n]}function tM(n){return z2[n]}function nM(n){return H2[n]}function ba(n){return{fieldPath:n.canonicalString()}}function xa(n){return an.fromServerFormat(n.fieldPath)}function cC(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(aT(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NAN"}};if(oT(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aT(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NAN"}};if(oT(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(t.field),op:tM(t.op),value:t.value}}})(n):n instanceof Gi?(function(t){const i=t.getFilters().map((o=>cC(o)));return i.length===1?i[0]:{compositeFilter:{op:nM(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function iM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t,i,o,a=xe.min(),u=xe.min(),d=ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.gt=e}}function rM(n){const e=X2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.Dn=new aM}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Vr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class aM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Yt(yt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Yt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fC=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(fC,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new za(0)}static ur(){return new za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="LruGarbageCollector",lM=1048576;function AT([n,e],[t,i]){const o=Oe(n,t);return o===0?Oe(e,i):o}class uM{constructor(e){this.Tr=e,this.buffer=new Yt(AT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();AT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(ST,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ka(t)?pe(ST,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Rr(3e5)}))}}class dM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(sf.ue);const i=new uM(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ET)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ET):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(m=Date.now(),wa()<=He.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function fM(n,e){return new dM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.changes=new Uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&pu(i.mutation,o,Jn.empty(),_t.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const o=Co();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=su();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=bs();const u=hu(),d=(function(){return hu()})();return t.forEach(((p,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Yr)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),pu(v.mutation,m,v.mutation.getFieldMask(),_t.now())):u.set(m.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var T;return d.set(m,new pM(v,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=hu();let o=new St(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=i.get(p)||Jn.empty();v=d.applyToLocalView(m,v),i.set(p,v);const T=(o.get(d.batchId)||Ge()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,T=$A();v.forEach((S=>{if(!a.has(S)){const R=eC(t.get(S),i.get(S));R!==null&&T.set(S,R),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(Co());let d=Tu,p=a;return u.next((m=>se.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,Ge()))).next((v=>({batchId:d,changes:KA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=su();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=su();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const m=(function(T,S){return new af(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,pn.newInvalidDocument(v)))}));let d=su();return u.forEach(((p,m)=>{const v=a.get(p);v!==void 0&&pu(v.mutation,m,Jn.empty(),_t.now()),uf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Bi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:rM(o.bundledQuery),readTime:Bi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.overlays=new St(Ee.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Co();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=Co(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new St(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=Co(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Co(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new U2(t,i));let a=this.kr.get(t);a===void 0&&(a=Ge(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.qr=new Yt(jt.Qr),this.$r=new Yt(jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new jt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new jt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ee(new yt([])),i=new jt(t,e),o=new jt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new yt([])),i=new jt(t,e),o=new jt(t,e+1);let a=Ge();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new jt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Yt(jt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new V2(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new jt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Wm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Yt(Oe);return t.forEach((o=>{const a=new jt(o,0),u=new jt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new jt(new Ee(a),0);let d=new Yt(Oe);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,(o=>{const a=new jt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new jt(t,0),o=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.ni=e,this.docs=(function(){return new St(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let i=bs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():pn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=bs();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||QN($N(v),i)<=0||(o.has(v.key)||uf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ri(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new EM(this)}getSize(e){return se.resolve(this.size)}}class EM extends hM{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.persistence=e,this.ii=new Uo((t=>Zm(t)),eg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new ag,this.targetCount=0,this._i=za.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new za(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.ai={},this.overlays={},this.ui=new sf(0),this.ci=!1,this.ci=!0,this.li=new _M,this.referenceDelegate=e(this),this.hi=new SM(this),this.indexManager=new oM,this.remoteDocumentCache=(function(o){return new TM(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new sM(t),this.Ti=new gM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new vM(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new AM(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class AM extends jN{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ai=new ag,this.Ri=null}static Vi(e){return new lg(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(i=>{const o=Ee.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,xe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Gd{constructor(e,t){this.persistence=e,this.gi=new Uo((i=>e2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=fM(this,t)}static Vi(e,t){return new Gd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,xe.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ed(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ge(),o=Ge();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new ug(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return t1()?8:XN(gn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new CM;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(wa()<=He.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(wa()<=He.DEBUG&&pe("QueryEngine","Query:",Ra(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(wa()<=He.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(t))):se.resolve())}ps(e,t){if(dT(t))return se.resolve(null);let i=qi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=um(t,null,"F"),i=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,um(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,i,o){return dT(t)||o.isEqual(xe.min())?se.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?se.resolve(null):(wa()<=He.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ra(t)),this.vs(e,u,t,KN(o,Tu)).next((d=>d)))}))}bs(e,t){let i=new Yt(JA(e));return t.forEach(((o,a)=>{uf(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return wa()<=He.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.gs.getDocumentsMatchingQuery(e,t,Vr.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",wM=3e8;class RM{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new St(Oe),this.Ms=new Uo((a=>Zm(a)),eg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mM(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function bM(n,e,t,i){return new RM(n,e,t,i)}async function pC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Ge();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function xM(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const T=m.batch,S=T.keys();let R=se.resolve();return S.forEach((L=>{R=R.next((()=>v.getEntry(p,L))).next((z=>{const B=m.docVersions.get(L);st(B!==null,48541),z.version.compareTo(B)<0&&(T.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ge();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function mC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function NM(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,T))));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(ln.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(T,R),(function(z,B,ee){return z.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=wM?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,R,v)&&d.push(t.hi.updateTargetData(a,R))}));let p=bs(),m=Ge();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(MM(a,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!i.isEqual(xe.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function MM(n,e,t){let i=Ge(),o=Ge();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=bs();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):pe(cg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function DM(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Wm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function kM(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new br(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function pm(n,e,t){const i=Me(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ka(u))throw u;pe(cg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function CT(n,e,t){const i=Me(n);let o=xe.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const T=Me(p),S=T.Ms.get(v);return S!==void 0?se.resolve(T.Fs.get(S)):T.hi.getTargetData(m,v)})(i,u,qi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:xe.min(),t?a:Ge()))).next((d=>(PM(i,T2(e),d),{documents:d,qs:a})))))}function PM(n,e,t){let i=n.xs.get(e)||xe.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class IT{constructor(){this.activeTargetIds=w2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VM{constructor(){this.Fo=new IT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new IT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class RT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(wT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=null;function mm(){return hd===null?hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():hd++,"0x"+hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",LM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ld?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=mm(),d=this.Go(e,t.toUriEncodedString());pe(Hp,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),v=Fr(m);return this.jo(e,d,p,i,v).then((T=>(pe(Hp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Pr(Hp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=LM[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class BM extends OM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=mm();return new Promise(((d,p)=>{const m=new _A;m.setWithCredentials(!0),m.listenOnce(vA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Td.NO_ERROR:const T=m.getResponseJson();pe(fn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Td.TIMEOUT:pe(fn,`RPC '${e}' ${u} timed out`),p(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const S=m.getStatus();if(pe(fn,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const z=(function(ee){const Y=ee.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Y)>=0?Y:re.UNKNOWN})(L.status);p(new ye(z,L.message))}else p(new ye(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{pe(fn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(fn,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=mm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=SA(),d=EA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");pe(fn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=u.createWebChannel(v,p);this.T_(T);let S=!1,R=!1;const L=new qM({Ho:B=>{R?pe(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(pe(fn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),pe(fn,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Yo:()=>T.close()}),z=(B,ee,Y)=>{B.listen(ee,(W=>{try{Y(W)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return z(T,iu.EventType.OPEN,(()=>{R||(pe(fn,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),z(T,iu.EventType.CLOSE,(()=>{R||(R=!0,pe(fn,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(T))})),z(T,iu.EventType.ERROR,(B=>{R||(R=!0,Pr(fn,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),L.__(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),z(T,iu.EventType.MESSAGE,(B=>{var ee;if(!R){const Y=B.data[0];st(!!Y,16349);const W=Y,ie=(W==null?void 0:W.error)||((ee=W[0])===null||ee===void 0?void 0:ee.error);if(ie){pe(fn,`RPC '${e}' stream ${o} received error:`,ie);const de=ie.status;let ue=(function(x){const V=Ft[x];if(V!==void 0)return nC(V)})(de),D=ie.message;ue===void 0&&(ue=re.INTERNAL,D="Unknown error status: "+de+" with message "+ie.message),R=!0,L.__(new ye(ue,D)),T.close()}else pe(fn,`RPC '${e}' stream ${o} received:`,Y),L.a_(Y)}})),z(d,TA.STAT_EVENT,(B=>{B.stat===im.PROXY?pe(fn,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===im.NOPROXY&&pe(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){return new G2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="PersistentStream";class yC{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Rs(t.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ye(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return pe(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(pe(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FM extends yC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=K2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return xe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?Bi(u.readTime):xe.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=hm(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=lm(p)?{documents:W2(a,p)}:{query:j2(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=rC(a,u.resumeToken);const m=cm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(xe.min())>0){d.readTime=Hd(a,u.snapshotVersion.toTimestamp());const m=cm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=Z2(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=hm(this.serializer),t.removeTarget=e,this.k_(t)}}class zM extends yC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Q2(e.writeResults,e.commitTime),i=Bi(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=hm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$2(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{}class GM extends HM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,dm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,dm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class JM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Rs(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class YM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{Lo(this)&&(pe(Do,"Restarting streams for network reachability change."),await(async function(p){const m=Me(p);m.Ia.add(4),await Vu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await pf(m)})(this))}))})),this.Aa=new JM(i,o)}}async function pf(n){if(Lo(n))for(const e of n.da)await e(!0)}async function Vu(n){for(const e of n.da)await e(!1)}function _C(n,e){const t=Me(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),pg(t)?hg(t):$a(t).x_()&&fg(t,e))}function dg(n,e){const t=Me(n),i=$a(t);t.Ta.delete(e),i.x_()&&vC(t,e),t.Ta.size===0&&(i.x_()?i.B_():Lo(t)&&t.Aa.set("Unknown"))}function fg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$a(n).H_(e)}function vC(n,e){n.Ra.$e(e),$a(n).Y_(e)}function hg(n){n.Ra=new B2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),$a(n).start(),n.Aa.aa()}function pg(n){return Lo(n)&&!$a(n).M_()&&n.Ta.size>0}function Lo(n){return Me(n).Ia.size===0}function TC(n){n.Ra=void 0}async function KM(n){n.Aa.set("Online")}async function $M(n){n.Ta.forEach(((e,t)=>{fg(n,e)}))}async function QM(n,e){TC(n),pg(n)?(n.Aa.la(e),hg(n)):n.Aa.set("Unknown")}async function WM(n,e,t){if(n.Aa.set("Online"),e instanceof sC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){pe(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jd(n,i)}else if(e instanceof Cd?n.Ra.Ye(e):e instanceof iC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(xe.min()))try{const i=await mC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=a.Ta.get(p);if(!v)return;a.Ta.set(p,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),vC(a,p);const T=new br(v.target,p,m,v.sequenceNumber);fg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe(Do,"Failed to raise snapshot:",i),await Jd(n,i)}}async function Jd(n,e,t){if(!Ka(e))throw e;n.Ia.add(1),await Vu(n),n.Aa.set("Offline"),t||(t=()=>mC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Do,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await pf(n)}))}function EC(n,e){return e().catch((t=>Jd(n,t,e)))}async function mf(n){const e=Me(n),t=qr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wm;for(;jM(e);)try{const o=await DM(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,XM(e,o)}catch(o){await Jd(e,o)}SC(e)&&AC(e)}function jM(n){return Lo(n)&&n.Pa.length<10}function XM(n,e){n.Pa.push(e);const t=qr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function SC(n){return Lo(n)&&!qr(n).M_()&&n.Pa.length>0}function AC(n){qr(n).start()}async function ZM(n){qr(n).na()}async function eD(n){const e=qr(n);for(const t of n.Pa)e.X_(t.mutations)}async function tD(n,e,t){const i=n.Pa.shift(),o=sg.from(i,e,t);await EC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await mf(n)}async function nD(n,e){e&&qr(n).Z_&&await(async function(i,o){if((function(u){return O2(u)&&u!==re.ABORTED})(o.code)){const a=i.Pa.shift();qr(i).N_(),await EC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await mf(i)}})(n,e),SC(n)&&AC(n)}async function xT(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),pe(Do,"RemoteStore received new credentials");const i=Lo(t);t.Ia.add(3),await Vu(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await pf(t)}async function iD(n,e){const t=Me(n);e?(t.Ia.delete(2),await pf(t)):e||(t.Ia.add(2),await Vu(t),t.Aa.set("Unknown"))}function $a(n){return n.Va||(n.Va=(function(t,i,o){const a=Me(t);return a.ia(),new FM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:KM.bind(null,n),e_:$M.bind(null,n),n_:QM.bind(null,n),J_:WM.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),pg(n)?hg(n):n.Aa.set("Unknown")):(await n.Va.stop(),TC(n))}))),n.Va}function qr(n){return n.ma||(n.ma=(function(t,i,o){const a=Me(t);return a.ia(),new zM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:ZM.bind(null,n),n_:nD.bind(null,n),ea:eD.bind(null,n),ta:tD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await mf(n)):(await n.ma.stop(),n.Pa.length>0&&(pe(Do,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new mg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(n,e){if(Rs("AsyncQueue",`${e}: ${n}`),Ka(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=su(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.fa=new St(Ee.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ha{constructor(e,t,i,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ha(e,t,Pa.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class rD{constructor(){this.queries=MT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Me(t),a=o.queries;o.queries=MT(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function MT(){return new Uo((n=>GA(n)),lf)}async function CC(n,e){const t=Me(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new sD,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=gg(u,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&yg(t)}async function IC(n,e){const t=Me(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function oD(n,e){const t=Me(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&yg(t)}function aD(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function yg(n){n.Da.forEach((e=>{e.next()}))}var gm,DT;(DT=gm||(gm={})).Fa="default",DT.Cache="cache";class wC{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ha(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.key=e}}class bC{constructor(e){this.key=e}}class lD{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=JA(e),this.eu=new Pa(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new NT,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),R=uf(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let B=!1;S&&R?S.data.isEqual(R.data)?L!==z&&(i.track({type:3,doc:R}),B=!0):this.iu(S,R)||(i.track({type:2,doc:R}),B=!0,(p&&this.Xa(R,p)>0||m&&this.Xa(R,m)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),B=!0):S&&!R&&(i.track({type:1,doc:S}),B=!0,(p||m)&&(d=!0)),B&&(R?(u=u.add(R),a=z?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,T)=>(function(R,L){const z=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:B})}};return z(R)-z(L)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new Ha(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new NT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new bC(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new RC(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ge();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ha.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _g="SyncEngine";class uD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cD{constructor(e){this.key=e,this.lu=!1}}class dD{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Uo((d=>GA(d)),lf),this.Tu=new Map,this.Iu=new Set,this.du=new St(Ee.comparator),this.Eu=new Map,this.Au=new ag,this.Ru={},this.Vu=new Map,this.mu=za.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fD(n,e,t=!0){const i=PC(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await xC(i,e,t,!0),o}async function hD(n,e){const t=PC(n);await xC(t,e,!0,!1)}async function xC(n,e,t,i){const o=await kM(n.localStore,qi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await pD(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&_C(n.remoteStore,o),d}async function pD(n,e,t,i,o){n.gu=(T,S,R)=>(async function(z,B,ee,Y){let W=B.view.nu(ee);W.Ds&&(W=await CT(z.localStore,B.query,!1).then((({documents:D})=>B.view.nu(D,W))));const ie=Y&&Y.targetChanges.get(B.targetId),de=Y&&Y.targetMismatches.get(B.targetId)!=null,ue=B.view.applyChanges(W,z.isPrimaryClient,ie,de);return PT(z,B.targetId,ue._u),ue.snapshot})(n,T,S,R);const a=await CT(n.localStore,e,!0),u=new lD(e,a.qs),d=u.nu(a.documents),p=Pu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);PT(n,t,m._u);const v=new uD(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function mD(n,e,t){const i=Me(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!lf(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await pm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&dg(i.remoteStore,o.targetId),ym(i,o.targetId)})).catch(Ya)):(ym(i,o.targetId),await pm(i.localStore,o.targetId,!0))}async function gD(n,e){const t=Me(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),dg(t.remoteStore,i.targetId))}async function yD(n,e,t){const i=CD(n);try{const o=await(function(u,d){const p=Me(u),m=_t.now(),v=d.reduce(((R,L)=>R.add(L.key)),Ge());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=bs(),z=Ge();return p.Os.getEntries(R,v).next((B=>{L=B,L.forEach(((ee,Y)=>{Y.isValidDocument()||(z=z.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,L))).next((B=>{T=B;const ee=[];for(const Y of d){const W=k2(Y,T.get(Y.key).overlayedDocument);W!=null&&ee.push(new Yr(Y.key,W,LA(W.value.mapValue),ai.exists(!0)))}return p.mutationQueue.addMutationBatch(R,m,ee,d)})).next((B=>{S=B;const ee=B.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(R,B.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:KA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new St(Oe)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await Uu(i,o.changes),await mf(i.remoteStore)}catch(o){const a=gg(o,"Failed to persist write");t.reject(a)}}async function NC(n,e){const t=Me(n);try{const i=await NM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?st(u.lu,14607):o.removedDocuments.size>0&&(st(u.lu,42227),u.lu=!1))})),await Uu(t,i,e)}catch(i){await Ya(i)}}function kT(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Me(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.wa)S.va(d)&&(m=!0)})),m&&yg(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _D(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new St(Ee.comparator);u=u.insert(a,pn.newNoDocument(a,xe.min()));const d=Ge().add(a),p=new ff(xe.min(),new Map,new St(Oe),u,d);await NC(i,p),i.du=i.du.remove(a),i.Eu.delete(e),vg(i)}else await pm(i.localStore,e,!1).then((()=>ym(i,e,t))).catch(Ya)}async function vD(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await xM(t.localStore,e);DC(t,i,null),MC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uu(t,o)}catch(o){await Ya(o)}}async function TD(n,e,t){const i=Me(n);try{const o=await(function(u,d){const p=Me(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((T=>(st(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);DC(i,e,t),MC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uu(i,o)}catch(o){await Ya(o)}}function MC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function DC(n,e,t){const i=Me(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||kC(n,i)}))}function kC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(dg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),vg(n))}function PT(n,e,t){for(const i of t)i instanceof RC?(n.Au.addReference(i.key,e),ED(n,i)):i instanceof bC?(pe(_g,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||kC(n,i.key)):Ie(19791,{yu:i})}function ED(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(pe(_g,"New document in limbo: "+t),n.Iu.add(i),vg(n))}function vg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(yt.fromString(e)),i=n.mu.next();n.Eu.set(i,new cD(t)),n.du=n.du.insert(t,i),_C(n.remoteStore,new br(qi(tg(t.path)),i,"TargetPurposeLimboResolution",sf.ue))}}async function Uu(n,e,t){const i=Me(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){o.push(m);const T=ug.Es(p.targetId,m);a.push(T)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,m){const v=Me(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Is,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>se.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!Ka(T))throw T;pe(cg,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const R=v.Fs.get(S),L=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(L);v.Fs=v.Fs.insert(S,z)}}})(i.localStore,a))}async function SD(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){pe(_g,"User change. New user:",e.toKey());const i=await pC(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new ye(re.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uu(t,i.Bs)}}function AD(n,e){const t=Me(n),i=t.Eu.get(e);if(i&&i.lu)return Ge().add(i.key);{let o=Ge();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function PC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_D.bind(null,e),e.hu.J_=oD.bind(null,e.eventManager),e.hu.pu=aD.bind(null,e.eventManager),e}function CD(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TD.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return bM(this.persistence,new IM,e.initialUser,this.serializer)}Du(e){return new hC(lg.Vi,this.serializer)}bu(e){return new VM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class ID extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){st(this.persistence.referenceDelegate instanceof Gd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cM(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new hC((i=>Gd.Vi(i,t)),this.serializer)}}class _m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SD.bind(null,this.syncEngine),await iD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rD})()}createDatastore(e){const t=hf(e.databaseInfo.databaseId),i=(function(a){return new BM(a)})(e.databaseInfo);return(function(a,u,d,p){return new GM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new YM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>kT(this.syncEngine,t,0)),(function(){return RT.C()?new RT:new UM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,v){const T=new dD(o,a,u,d,p,m);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Me(o);pe(Do,"RemoteStore shutting down."),a.Ia.add(5),await Vu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_m.provider={build:()=>new _m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class wD{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(Br,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Br,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=gg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Jp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Br,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await pC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Pr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Pr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function VT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await RD(n);pe(Br,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>xT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>xT(e.remoteStore,o))),n._onlineComponents=e}async function RD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Br,"Using user provided OfflineComponentProvider");try{await Jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Pr("Error using user provided cache. Falling back to memory cache: "+t),await Jp(n,new Yd)}}else pe(Br,"Using default OfflineComponentProvider"),await Jp(n,new ID(void 0));return n._offlineComponents}async function UC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Br,"Using user provided OnlineComponentProvider"),await VT(n,n._uninitializedComponentsProvider._online)):(pe(Br,"Using default OnlineComponentProvider"),await VT(n,new _m))),n._onlineComponents}function bD(n){return UC(n).then((e=>e.syncEngine))}async function LC(n){const e=await UC(n),t=e.eventManager;return t.onListen=fD.bind(null,e.syncEngine),t.onUnlisten=mD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gD.bind(null,e.syncEngine),t}function xD(n,e,t={}){const i=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new VC({next:S=>{v.Ou(),u.enqueueAndForget((()=>IC(a,T)));const R=S.docs.has(d);!R&&S.fromCache?m.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&p&&p.source==="server"?m.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new wC(tg(d.path),v,{includeMetadataChanges:!0,ka:!0});return CC(a,T)})(await LC(n),n.asyncQueue,e,t,i))),i.promise}function ND(n,e,t={}){const i=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new VC({next:S=>{v.Ou(),u.enqueueAndForget((()=>IC(a,T))),S.fromCache&&p.source==="server"?m.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new wC(d,v,{includeMetadataChanges:!0,ka:!0});return CC(a,T)})(await LC(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firestore.googleapis.com",LT=!0;class OT{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qC,this.ssl=LT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:LT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lM)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LN;switch(i.type){case"firstParty":return new FN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=UT.get(t);i&&(pe("ComponentProvider","Removing Datastore"),UT.delete(t),i.terminate())})(this),Promise.resolve()}}function MD(n,e,t,i={}){var o;n=Ei(n,gf);const a=Fr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Mm(`https://${p}`),Dm("Firestore",!0)),u.host!==qC&&u.host!==p&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!Ro(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=hn.MOCK_USER;else{v=DS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new hn(S)}n._authCredentials=new ON(new CA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yf(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Du(t,Ht._jsonSchema))return new Ht(e,i||null,new Ee(yt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:zt("string",Ht._jsonSchemaVersion),referencePath:zt("string")};class Dr extends yf{constructor(e,t,i){super(e,t,tg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Ee(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function _f(n,e,...t){if(n=kt(n),wA("collection","path",e),n instanceof gf){const i=yt.fromString(e,...t);return X0(i),new Dr(n,null,i)}{if(!(n instanceof Ht||n instanceof Dr))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return X0(i),new Dr(n.firestore,null,i)}}function ko(n,e,...t){if(n=kt(n),arguments.length===1&&(e=$m.newId()),wA("doc","path",e),n instanceof gf){const i=yt.fromString(e,...t);return j0(i),new Ht(n,null,new Ee(i))}{if(!(n instanceof Ht||n instanceof Dr))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return j0(i),new Ht(n.firestore,n instanceof Dr?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="AsyncQueue";class BT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gC(this,"async_queue_retry"),this.oc=()=>{const i=Gp();i&&pe(qT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Cs;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ka(e))throw e;pe(qT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Rs("INTERNAL UNHANDLED ERROR: ",FT(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=mg.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Ie(47125,{hc:FT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function FT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Oo extends gf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new BT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BT(e),this._firestoreClient=void 0,await e}}}function DD(n,e){const t=typeof n=="object"?n:Vm(),i=typeof n=="string"?n:Ld,o=Zd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=xS("firestore");a&&MD(o,...a)}return o}function Tg(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kD(n),n._firestoreClient}function kD(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,m,v){return new i2(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,OC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new wD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(ln.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:zt("string",oi._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:zt("string",Fi._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:zt("string",zi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^__.*__$/;class VD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class BC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:n})}}class Sg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FC(this.Ec)&&PD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hf(e)}Dc(e,t,i,o=!1){return new Sg({Ec:e,methodName:t,bc:i,path:an.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(n){const e=n._freezeSettings(),t=hf(n._databaseId);return new UD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zC(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);Cg("Data must be an object, but it was:",u,i);const d=HC(i,u);let p,m;if(a.merge)p=new Jn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=vm(e,T,t);if(!u.contains(S))throw new ye(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);JC(v,S)||v.push(S)}p=new Jn(v),m=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=u.fieldTransforms;return new VD(new Pn(d),p,m)}class Tf extends Eg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function LD(n,e,t,i){const o=n.Dc(1,e,t);Cg("Data must be an object, but it was:",o,i);const a=[],u=Pn.empty();Jr(i,((p,m)=>{const v=Ig(e,p,t);m=kt(m);const T=o.gc(v);if(m instanceof Tf)a.push(v);else{const S=Ef(m,T);S!=null&&(a.push(v),u.set(v,S))}}));const d=new Jn(a);return new BC(u,d,o.fieldTransforms)}function OD(n,e,t,i,o,a){const u=n.Dc(1,e,t),d=[vm(e,i,t)],p=[o];if(a.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(vm(e,a[S])),p.push(a[S+1]);const m=[],v=Pn.empty();for(let S=d.length-1;S>=0;--S)if(!JC(m,d[S])){const R=d[S];let L=p[S];L=kt(L);const z=u.gc(R);if(L instanceof Tf)m.push(R);else{const B=Ef(L,z);B!=null&&(m.push(R),v.set(R,B))}}const T=new Jn(m);return new BC(v,T,u.fieldTransforms)}function Ef(n,e){if(GC(n=kt(n)))return Cg("Unsupported field value:",e,n),HC(n,e);if(n instanceof Eg)return(function(i,o){if(!FC(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Ef(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return R2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:Hd(o.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hd(o.serializer,a)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:rC(o.serializer,i._byteString)};if(i instanceof Ht){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:og(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof zi)return(function(u,d){return{mapValue:{fields:{[VA]:{stringValue:UA},[Od]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return ng(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Qm(i)}`)})(n,e)}function HC(n,e){const t={};return xA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(n,((i,o)=>{const a=Ef(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function GC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Fi||n instanceof oi||n instanceof Ht||n instanceof Eg||n instanceof zi)}function Cg(n,e,t){if(!GC(t)||!RA(t)){const i=Qm(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function vm(n,e,t){if((e=kt(e))instanceof vf)return e._internalPath;if(typeof e=="string")return Ig(n,e);throw Kd("Field path arguments must be of type string or ",n,!1,void 0,t)}const qD=new RegExp("[~\\*/\\[\\]]");function Ig(n,e,t){if(e.search(qD)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vf(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ye(re.INVALID_ARGUMENT,d+n+p)}function JC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BD extends YC{data(){return super.data()}}function KC(n,e){return typeof e=="string"?Ig(n,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zD{convertValue(e,t="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Jr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Od].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>Dt(u.doubleValue)));return new zi(a)}convertGeoPoint(e){return new Fi(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=of(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const t=Ur(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=yt.fromString(e);st(dC(i),9688,{name:e});const o=new Su(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||Rs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends YC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(KC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:zt("string",Io._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Id extends Io{data(e={}){return super.data(e)}}class Va{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Id(this._firestore,this._userDataWriter,i.key,i,new ou(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Id(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ou(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Id(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ou(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:HD(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){n=Ei(n,Ht);const e=Ei(n.firestore,Oo);return xD(Tg(e),n._key).then((t=>YD(e,n,t)))}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:zt("string",Va._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class QC extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function WC(n){n=Ei(n,yf);const e=Ei(n.firestore,Oo),t=Tg(e),i=new QC(e);return FD(n._query),ND(t,n._query).then((o=>new Va(e,i,n,o)))}function GD(n,e,t){n=Ei(n,Ht);const i=Ei(n.firestore,Oo),o=$C(n.converter,e);return Sf(i,[zC(Ag(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ai.none())])}function JD(n,e,t,...i){n=Ei(n,Ht);const o=Ei(n.firestore,Oo),a=Ag(o);let u;return u=typeof(e=kt(e))=="string"||e instanceof vf?OD(a,"updateDoc",n._key,e,t,i):LD(a,"updateDoc",n._key,e),Sf(o,[u.toMutation(n._key,ai.exists(!0))])}function jC(n){return Sf(Ei(n.firestore,Oo),[new ig(n._key,ai.none())])}function XC(n,e){const t=Ei(n.firestore,Oo),i=ko(n),o=$C(n.converter,e);return Sf(t,[zC(Ag(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,ai.exists(!1))]).then((()=>i))}function Sf(n,e){return(function(i,o){const a=new Cs;return i.asyncQueue.enqueueAndForget((async()=>yD(await bD(i),o,a))),a.promise})(Tg(n),e)}function YD(n,e,t){const i=t.docs.get(e._key),o=new QC(n);return new Io(n,o,e._key,i,new ou(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ja=o})(Vo),bo(new kr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Oo(new qN(i.getProvider("auth-internal")),new zN(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Li(Y0,K0,e),Li(Y0,K0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebasestorage.googleapis.com",eI="storageBucket",KD=120*1e3,$D=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends Yi{constructor(e,t,i=0){super(Yp(e),`Firebase Storage: ${t} (${Yp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function Yp(n){return"storage/"+n}function wg(){const n="An unknown error occurred, please check the error payload for server response.";return new bt(Rt.UNKNOWN,n)}function QD(n){return new bt(Rt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function WD(n){return new bt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(Rt.UNAUTHENTICATED,n)}function XD(){return new bt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZD(n){return new bt(Rt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ek(){return new bt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tk(){return new bt(Rt.CANCELED,"User canceled the upload/download.")}function nk(n){return new bt(Rt.INVALID_URL,"Invalid URL '"+n+"'.")}function ik(n){return new bt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function sk(){return new bt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eI+"' property when initializing the app?")}function rk(){return new bt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ok(){return new bt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ak(n){return new bt(Rt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tm(n){return new bt(Rt.INVALID_ARGUMENT,n)}function tI(){return new bt(Rt.APP_DELETED,"The Firebase app was deleted.")}function lk(n){return new bt(Rt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mu(n,e){return new bt(Rt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Zl(n){throw new bt(Rt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Yn.makeFromUrl(e,t)}catch{return new Yn(e,"")}if(i.path==="")return i;throw ik(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${T}/${v}/b/${o}/o${S}`,"i"),L={bucket:1,path:3},z=t===ZC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,B="([^?#]*)",ee=new RegExp(`^https?://${z}/${o}/${B}`,"i"),W=[{regex:d,indices:p,postModify:a},{regex:R,indices:L,postModify:m},{regex:ee,indices:{bucket:1,path:2},postModify:m}];for(let ie=0;ie<W.length;ie++){const de=W[ie],ue=de.regex.exec(e);if(ue){const D=ue[de.indices.bucket];let N=ue[de.indices.path];N||(N=""),i=new Yn(D,N),de.postModify(i);break}}if(i==null)throw nk(e);return i}}class uk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...B){m||(m=!0,e.apply(null,B))}function T(B){o=setTimeout(()=>{o=null,n(R,p())},B)}function S(){a&&clearTimeout(a)}function R(B,...ee){if(m){S();return}if(B){S(),v.call(null,B,...ee);return}if(p()||u){S(),v.call(null,B,...ee);return}i<64&&(i*=2);let W;d===1?(d=2,W=0):W=(i+Math.random())*1e3,T(W)}let L=!1;function z(B){L||(L=!0,S(),!m&&(o!==null?(B||(d=2),clearTimeout(o),T(0)):B||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,z(!0)},t),z}function dk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n){return n!==void 0}function hk(n){return typeof n=="object"&&!Array.isArray(n)}function Rg(n){return typeof n=="string"||n instanceof String}function HT(n){return bg()&&n instanceof Blob}function bg(){return typeof Blob<"u"}function GT(n,e,t,i){if(i<e)throw Tm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Tm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function nI(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var wo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(wo||(wo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,i,o,a,u,d,p,m,v,T,S=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,z)=>{this.resolve_=L,this.reject_=z,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new pd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===wo.NO_ERROR,p=a.getStatus();if(!d||pk(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===wo.ABORT;i(!1,new pd(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new pd(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());fk(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=wg();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?tI():tk();u(p)}else{const p=ek();u(p)}};this.canceled_?t(!1,new pd(!1,null,!0)):this.backoffId_=ck(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function gk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function yk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _k(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Tk(n,e,t,i,o,a,u=!0,d=!1){const p=nI(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return _k(v,e),gk(v,t),yk(v,a),vk(v,i),new mk(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Sk(...n){const e=Ek();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(bg())return new Blob(n);throw new bt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ak(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){if(typeof atob>"u")throw ak("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kp{constructor(e,t){this.data=e,this.contentType=t||null}}function iI(n,e){switch(n){case vi.RAW:return new Kp(sI(e));case vi.BASE64:case vi.BASE64URL:return new Kp(rI(n,e));case vi.DATA_URL:return new Kp(wk(e),Rk(e))}throw wg()}function sI(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Ik(n){let e;try{e=decodeURIComponent(n)}catch{throw mu(vi.DATA_URL,"Malformed data URL.")}return sI(e)}function rI(n,e){switch(n){case vi.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw mu(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case vi.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw mu(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Ck(e)}catch(o){throw o.message.includes("polyfill")?o:mu(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class oI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mu(vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=bk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function wk(n){const e=new oI(n);return e.base64?rI(vi.BASE64,e.rest):Ik(e.rest)}function Rk(n){return new oI(n).contentType}function bk(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){let i=0,o="";HT(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(HT(this.data_)){const i=this.data_,o=Ak(i,e,t);return o===null?null:new Rr(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Rr(i,!0)}}static getBlob(...e){if(bg()){const t=e.map(i=>i instanceof Rr?i.data_:i);return new Rr(Sk.apply(null,t))}else{const t=e.map(u=>Rg(u)?iI(vi.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new Rr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){let e;try{e=JSON.parse(n)}catch{return null}return hk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Nk(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function lI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n,e){return e}class An{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||Mk}}let md=null;function Dk(n){return!Rg(n)||n.length<2?n:lI(n)}function uI(){if(md)return md;const n=[];n.push(new An("bucket")),n.push(new An("generation")),n.push(new An("metageneration")),n.push(new An("name","fullPath",!0));function e(a,u){return Dk(u)}const t=new An("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new An("size");return o.xform=i,n.push(o),n.push(new An("timeCreated")),n.push(new An("updated")),n.push(new An("md5Hash",null,!0)),n.push(new An("cacheControl",null,!0)),n.push(new An("contentDisposition",null,!0)),n.push(new An("contentEncoding",null,!0)),n.push(new An("contentLanguage",null,!0)),n.push(new An("contentType",null,!0)),n.push(new An("metadata","customMetadata",!0)),md=n,md}function kk(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new Yn(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Pk(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return kk(i,n),i}function cI(n,e,t){const i=aI(e);return i===null?null:Pk(n,i,t)}function Vk(n,e,t,i){const o=aI(e);if(o===null||!Rg(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=n.bucket,T=n.fullPath,S="/b/"+u(v)+"/o/"+u(T),R=xg(S,t,i),L=nI({alt:"media",token:m});return R+L})[0]}function Uk(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class dI{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(n){if(!n)throw wg()}function Lk(n,e){function t(i,o){const a=cI(n,o,e);return fI(a!==null),a}return t}function Ok(n,e){function t(i,o){const a=cI(n,o,e);return fI(a!==null),Vk(a,o,n.host,n._protocol)}return t}function hI(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=XD():o=jD():t.getStatus()===402?o=WD(n.bucket):t.getStatus()===403?o=ZD(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function qk(n){const e=hI(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=QD(n.path)),a.serverResponse=o.serverResponse,a}return t}function Bk(n,e,t){const i=e.fullServerUrl(),o=xg(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new dI(o,a,Ok(n,t),u);return d.errorHandler=qk(e),d}function Fk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function zk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Fk(null,e)),i}function Hk(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let W="";for(let ie=0;ie<2;ie++)W=W+Math.random().toString().slice(2);return W}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=zk(e,i,o),v=Uk(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",R=Rr.getBlob(T,i,S);if(R===null)throw rk();const L={name:m.fullPath},z=xg(a,n.host,n._protocol),B="POST",ee=n.maxUploadRetryTime,Y=new dI(z,B,Lk(n,t),ee);return Y.urlParams=L,Y.headers=u,Y.body=R.uploadData(),Y.errorHandler=hI(e),Y}class Gk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw Zl("cannot .send() more than once");if(Fr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Jk extends Gk{initXhr(){this.xhr_.responseType="text"}}function pI(){return new Jk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this._service=e,t instanceof Yn?this._location=t:this._location=Yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Po(e,t)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lI(this._location.path)}get storage(){return this._service}get parent(){const e=xk(this._location.path);if(e===null)return null;const t=new Yn(this._location.bucket,e);return new Po(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lk(e)}}function Yk(n,e,t){n._throwIfRoot("uploadBytes");const i=Hk(n.storage,n._location,uI(),new Rr(e,!0),t);return n.storage.makeRequestWithTokens(i,pI).then(o=>({metadata:o,ref:n}))}function Kk(n,e,t=vi.RAW,i){n._throwIfRoot("uploadString");const o=iI(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),Yk(n,o.data,a)}function $k(n){n._throwIfRoot("getDownloadURL");const e=Bk(n.storage,n._location,uI());return n.storage.makeRequestWithTokens(e,pI).then(t=>{if(t===null)throw ok();return t})}function Qk(n,e){const t=Nk(n._location.path,e),i=new Yn(n._location.bucket,t);return new Po(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return/^[A-Za-z]+:\/\//.test(n)}function jk(n,e){return new Po(n,e)}function mI(n,e){if(n instanceof Ng){const t=n;if(t._bucket==null)throw sk();const i=new Po(t,t._bucket);return e!=null?mI(i,e):i}else return e!==void 0?Qk(n,e):n}function Xk(n,e){if(e&&Wk(e)){if(n instanceof Ng)return jk(n,e);throw Tm("To use ref(service, url), the first argument must be a Storage instance.")}else return mI(n,e)}function JT(n,e){const t=e==null?void 0:e[eI];return t==null?null:Yn.makeFromBucketSpec(t,n)}function Zk(n,e,t,i={}){n.host=`${e}:${t}`;const o=Fr(e);o&&(Mm(`https://${n.host}/b`),Dm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:DS(a,n.app.options.projectId))}class Ng{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=ZC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KD,this._maxUploadRetryTime=$D,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=JT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=JT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){GT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){GT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Po(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new uk(tI());{const u=Tk(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const YT="@firebase/storage",KT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="storage";function eP(n,e,t,i){return n=kt(n),Kk(n,e,t,i)}function tP(n){return n=kt(n),$k(n)}function nP(n,e){return n=kt(n),Xk(n,e)}function iP(n=Vm(),e){n=kt(n);const i=Zd(n,gI).getImmediate({identifier:e}),o=xS("storage");return o&&sP(i,...o),i}function sP(n,e,t,i={}){Zk(n,e,t,i)}function rP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Ng(t,i,o,e,Vo)}function oP(){bo(new kr(gI,rP,"PUBLIC").setMultipleInstances(!0)),Li(YT,KT,""),Li(YT,KT,"esm2017")}oP();const aP={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Mg=VS(aP),au=kN(Mg),lP=new Ts,Ji=DD(Mg),uP=iP(Mg);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cP,dP;function fP(){return{geminiUrl:cP,vertexUrl:dP}}function hP(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=fP();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(a+1),t[m])}else for(const m of p)g(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function pP(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Em(n,o,a,0,u)}}function Em(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Em(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const T=[];for(const S of t.slice(i))S==="*"?T.push(m):T.push(S);g(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;a in u&&Em(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mP(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function gP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],_P(u)),e}function yP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],vP(u)),e}function _P(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>TP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function vP(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>EP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function TP(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],RP(t)),e}function EP(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],bP(t)),e}function SP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function AP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function CP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],IP(u)),e}function IP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function yI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],wP(u)),e}function wP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function RP(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Dg(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function bP(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Dg(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $T;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($T||($T={}));var QT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(QT||(QT={}));var WT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(WT||(WT={}));var Ve;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ve||(Ve={}));var jT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jT||(jT={}));var XT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(XT||(XT={}));var ZT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ZT||(ZT={}));var eE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(eE||(eE={}));var tE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(tE||(tE={}));var nE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(nE||(nE={}));var iE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(iE||(iE={}));var sE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(sE||(sE={}));var rE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(rE||(rE={}));var oE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(oE||(oE={}));var aE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(aE||(aE={}));var lE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(lE||(lE={}));var uE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(uE||(uE={}));var cE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cE||(cE={}));var $d;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($d||($d={}));var dE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dE||(dE={}));var fE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fE||(fE={}));var hE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hE||(hE={}));var Sm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sm||(Sm={}));var pE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(pE||(pE={}));var mE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mE||(mE={}));var gE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(gE||(gE={}));var yE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yE||(yE={}));var _E;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_E||(_E={}));var vE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(vE||(vE={}));var TE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(TE||(TE={}));var EE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(EE||(EE={}));var SE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(SE||(SE={}));var AE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(AE||(AE={}));var CE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(CE||(CE={}));var IE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(IE||(IE={}));var wE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(wE||(wE={}));var RE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(RE||(RE={}));var bE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(bE||(bE={}));var xE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(xE||(xE={}));var NE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(NE||(NE={}));var ME;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ME||(ME={}));var DE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(DE||(DE={}));var kE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(kE||(kE={}));var PE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(PE||(PE={}));var VE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(VE||(VE={}));var UE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(UE||(UE={}));var LE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LE||(LE={}));var OE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OE||(OE={}));var qE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(qE||(qE={}));var BE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(BE||(BE={}));var FE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(FE||(FE={}));var zE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(zE||(zE={}));var Na;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Na||(Na={}));class Am{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class eu{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[R,L]of Object.entries(S))R!=="text"&&R!=="thought"&&(L!==null||L!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class HE{}class GE{}class xP{}class NP{}class MP{}class DP{}class JE{}class YE{}class KE{}class kP{}class Qd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Qd;let o;const a=e;return t?o=yP(a):o=gP(a),Object.assign(i,o),i}}class $E{}class QE{}class WE{}class PP{}class VP{}class UP{}class kg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new kg,a=CP(e);return Object.assign(i,a),i}}class LP{}class OP{}class qP{}class jE{}class BP{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class FP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Pg,a=yI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _I(n,e){const t=et(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function vI(n){return Array.isArray(n)?n.map(e=>Wd(e)):[Wd(n)]}function Wd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function TI(n){const e=Wd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EI(n){const e=Wd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function SI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>XE(e)):[XE(n)]}function Cm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ZE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function eS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function mn(n){if(n==null)throw new Error("ContentUnion is required");return Cm(n)?n:{role:"user",parts:SI(n)}}function Vg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=mn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=mn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>mn(t)):[mn(e)]}function li(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(ZE(n)||eS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mn(n)]}const e=[],t=[],i=Cm(n[0]);for(const o of n){const a=Cm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(ZE(o)||eS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:SI(t)}),e}function zP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ve).includes(t[0].toUpperCase())?t[0].toUpperCase():Ve.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ve).includes(i.toUpperCase())?i.toUpperCase():Ve.TYPE_UNSPECIFIED})}}function Ua(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&zP(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Ve).includes(d.toUpperCase())?d.toUpperCase():Ve.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ua(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(Ua(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=Ua(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Ug(n){return Ua(n)}function Lg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Og(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Qa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ua(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ua(e.response));return n}function Wa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function HP(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ms(n,e){if(typeof e!="string")throw new Error("name must be a string");return HP(n,e,"cachedContents")}function AI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Kr(n){return Dg(n)}function GP(n){return n!=null&&typeof n=="object"&&"name"in n}function JP(n){return n!=null&&typeof n=="object"&&"video"in n}function YP(n){return n!=null&&typeof n=="object"&&"uri"in n}function CI(n){var e;let t;if(GP(n)&&(t=n.name),!(YP(n)&&(t=n.uri,t===void 0))&&!(JP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function II(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wI(n){for(const e of["models","tunedModels","publisherModels"])if(KP(n,e))return n[e];return[]}function KP(n,e){return n!==null&&typeof n=="object"&&e in n}function $P(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function QP(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=$P(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function RI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function WP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ja(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function xI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>bV(u))),g(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function XP(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function ZP(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wd(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],xI(o));const a=f(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],jP(bI(m))),e}function Im(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],xI(o));const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&g(e,["src"],eV(T));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],XP(bI(S)));const R=f(n,["completionStats"]);return R!=null&&g(e,["completionStats"],R),e}function eV(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function tV(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>RV(n,u))),g(t,["requests","requests"],a)}return t}function nV(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function sV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function rV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function oV(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],aV(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function aV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function NI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>VV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function lV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function uV(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],ZP(WP(o))),t}function tS(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],tV(n,RI(n,o)));const a=f(e,["config"]);return a!=null&&lV(a,t),t}function cV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],nV(RI(n,o)));const a=f(e,["config"]);return a!=null&&uV(a,t),t}function dV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function fV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],vV(n,o));const a=f(e,["config"]);return a!=null&&dV(a,t),t}function hV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function pV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function mV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function gV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function yV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Vg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],_V(o,t)),pP(t,{"requests[].*":"requests[].request.*"})),t}function _V(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function vV(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],yV(n,o)),t}function TV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function EV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],NI(mn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],Ug(ee));const Y=f(e,["responseJsonSchema"]);if(Y!=null&&g(i,["responseJsonSchema"],Y),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>UV(M))),g(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=Wa(ie);Array.isArray(k)&&(k=k.map(M=>LV(Qa(M)))),g(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Ms(n,ue));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Lg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function SV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>oV(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function AV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function CV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],ja(n,i)),t}function IV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function wV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function RV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let d=li(o);Array.isArray(d)&&(d=d.map(p=>NI(p))),g(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],EV(n,u,f(t,["request"],{}))),t}function bV(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],SV(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function xV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function NV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function MV(n){const e={},t=f(n,["config"]);return t!=null&&xV(t,e),e}function DV(n){const e={},t=f(n,["config"]);return t!=null&&NV(t,e),e}function kV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>wd(u))),g(e,["batchJobs"],a)}return e}function PV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Im(u))),g(e,["batchJobs"],a)}return e}function VV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],TV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],iV(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function UV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function LV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],IV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],wV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(xs||(xs={}));class qo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OV extends Ns{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new qo(xs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=tS(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cV(this.apiClient,e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}else{const m=tS(this.apiClient,e);return d=fe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wd(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fV(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>wd(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=CV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}else{const m=AV(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wd(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=rV(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=sV(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=DV(e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=PV(v),S=new jE;return Object.assign(S,T),S})}else{const m=MV(e);return d=fe("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=kV(v),S=new jE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=pV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>gV(v))}else{const m=hV(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>mV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function nS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>o4(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function BV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=li(u);Array.isArray(v)&&(v=v.map(T=>nS(T))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],nS(mn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>a4(T))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function FV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=li(u);Array.isArray(T)&&(T=T.map(S=>S)),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],mn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>l4(S))),g(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function zV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],_I(n,i));const o=f(e,["config"]);return o!=null&&BV(o,t),t}function HV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],_I(n,i));const o=f(e,["config"]);return o!=null&&FV(o,t),t}function GV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ms(n,i)),t}function JV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ms(n,i)),t}function YV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function KV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function $V(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function QV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function WV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ms(n,i)),t}function jV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ms(n,i)),t}function XV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ZV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function e4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function t4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function n4(n){const e={},t=f(n,["config"]);return t!=null&&e4(t,e),e}function i4(n){const e={},t=f(n,["config"]);return t!=null&&t4(t,e),e}function s4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function r4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function o4(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],$V(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],qV(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function a4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],XV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],ZV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function l4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>QV(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function u4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function c4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function d4(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Ms(n,i));const o=f(e,["config"]);return o!=null&&u4(o,t),t}function f4(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Ms(n,i));const o=f(e,["config"]);return o!=null&&c4(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h4 extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qo(xs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=HV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=zV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=jV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=WV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=JV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=KV(v),S=new QE;return Object.assign(S,T),S})}else{const m=GV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=YV(v),S=new QE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=f4(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=d4(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=i4(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=r4(v),S=new WE;return Object.assign(S,T),S})}else{const m=n4(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=s4(v),S=new WE;return Object.assign(S,T),S})}}}function iS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(n){return this instanceof gt?(this.v=n,this):new gt(n)}function La(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(L){return Promise.resolve(L).then(R,T)}}function d(R,L){i[R]&&(o[R]=function(z){return new Promise(function(B,ee){a.push([R,z,B,ee])>1||p(R,z)})},L&&(o[R]=L(o[R])))}function p(R,L){try{m(i[R](L))}catch(z){S(a[0][3],z)}}function m(R){R.value instanceof gt?Promise.resolve(R.value.v).then(v,T):S(a[0][2],R)}function v(R){p("next",R)}function T(R){p("throw",R)}function S(R,L){R(L),a.shift(),a.length&&p(a[0][0],a[0][1])}}function gu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iS=="function"?iS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:MI(t)}function MI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function m4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!MI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class g4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new y4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class y4{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),m4(a)}async sendMessage(e){var t;await this.sendPromise;const i=mn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=m?[m]:[];this.recordHistory(i,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=mn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?sS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return La(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var T=!0,S=gu(e),R;R=yield gt(S.next()),u=R.done,!u;T=!0){m=R.value,T=!1;const L=m;if(p4(L)){const z=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;z!==void 0&&v.push(z)}yield yield gt(L)}}catch(L){d={error:L}}finally{try{!T&&!u&&(p=S.return)&&(yield gt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...sS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Af extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Af.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _4(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function v4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function T4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],CI(t)),e}function E4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function S4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],CI(t)),e}function A4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function C4(n){const e={},t=f(n,["config"]);return t!=null&&A4(t,e),e}function I4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w4 extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qo(xs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C4(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=I4(p),v=new LP;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_4(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=v4(p),v=new OP;return Object.assign(v,m),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S4(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=T4(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=E4(p),v=new qP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function R4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>z4(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function b4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function x4(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function N4(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&g(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const Y=f(n,["speechConfig"]);Y!=null&&g(e,["speechConfig"],DI(Y));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&g(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function M4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function D4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function k4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Og(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],R4(mn(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=Wa(z);Array.isArray(ue)&&(ue=ue.map(D=>G4(Qa(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],H4(B));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function P4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],N4(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],DI(Og(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],mn(L));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=Wa(z);Array.isArray(ue)&&(ue=ue.map(D=>J4(Qa(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],B);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function V4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],k4(o,t)),t}function U4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],P4(o,t)),t}function L4(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function O4(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function q4(n){const e={},t=f(n,["media"]);if(t!=null){let m=vI(t);Array.isArray(m)&&(m=m.map(v=>Rd(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],Rd(EI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],Rd(TI(a)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function B4(n){const e={},t=f(n,["media"]);if(t!=null){let m=vI(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],EI(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],TI(a));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function F4(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],Y4(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function z4(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],b4(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Rd(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function H4(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function G4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],M4(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],D4(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function J4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>x4(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Y4(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K4(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function $4(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],Q4(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function Q4(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function W4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let a=li(o);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function j4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function X4(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],Z4(i)),e}function Z4(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Cf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>sL(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function eU(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function tU(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nU(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],mn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>LI(d))),g(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],JU(a)),t}function iU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>Cf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&tU(a),t}function sU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&nU(a,t),t}function rU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function oU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function aU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function lU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function uU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function cU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function dU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&g(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const Y=f(n,["editMode"]);e!==void 0&&Y!=null&&g(e,["parameters","editMode"],Y);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&g(e,["parameters","editConfig","baseSteps"],W),t}function fU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>cL(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&dU(u,t),t}function hU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>If(a))),g(e,["generatedImages"],o)}return e}function pU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function mU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function gU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let d=Vg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&pU(a,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],et(n,u)),t}function yU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=Vg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&mU(a,t),t}function _U(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function vU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>X4(u))),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function TU(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function EU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function SU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function AU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Cf(mn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],Ug(ee));const Y=f(e,["responseJsonSchema"]);if(Y!=null&&g(i,["responseJsonSchema"],Y),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>dL(M))),g(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=Wa(ie);Array.isArray(k)&&(k=k.map(M=>yL(Qa(M)))),g(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Ms(n,ue));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Lg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function CU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],mn(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],Ug(ee));const Y=f(e,["responseJsonSchema"]);Y!=null&&g(i,["responseJsonSchema"],Y);const W=f(e,["routingConfig"]);W!=null&&g(i,["routingConfig"],W);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(i,["modelConfig"],ie);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let $=de;Array.isArray($)&&($=$.map(ae=>ae)),g(t,["safetySettings"],$)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let $=Wa(ue);Array.isArray($)&&($=$.map(ae=>LI(Qa(ae)))),g(t,["tools"],$)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const N=f(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&g(t,["cachedContent"],Ms(n,x));const V=f(e,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const P=f(e,["mediaResolution"]);P!=null&&g(i,["mediaResolution"],P);const k=f(e,["speechConfig"]);k!=null&&g(i,["speechConfig"],UI(Lg(k)));const M=f(e,["audioTimestamp"]);M!=null&&g(i,["audioTimestamp"],M);const Qe=f(e,["thinkingConfig"]);Qe!=null&&g(i,["thinkingConfig"],Qe);const Re=f(e,["imageConfig"]);return Re!=null&&g(i,["imageConfig"],Re),i}function rS(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>Cf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],AU(n,a,t)),t}function oS(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],CU(n,a,t)),t}function aS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>$4(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function lS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function IU(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&g(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&g(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const Y=f(n,["imageSize"]);e!==void 0&&Y!=null&&g(e,["parameters","sampleImageSize"],Y);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&g(e,["parameters","enhancePrompt"],W),t}function RU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&IU(a,t),t}function bU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&wU(a,t),t}function xU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>FU(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],PI(o)),e}function NU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>If(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],VI(o)),e}function MU(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],wf(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>NL(R))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function DU(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&g(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&g(e,["parameters","enhancePrompt"],R);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&g(e,["parameters","generateAudio"],L);const z=f(n,["lastFrame"]);e!==void 0&&z!=null&&g(e,["instances[0]","lastFrame"],Si(z));const B=f(n,["referenceImages"]);if(e!==void 0&&B!=null){let W=B;Array.isArray(W)&&(W=W.map(ie=>ML(ie))),g(e,["instances[0]","referenceImages"],W)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],xL(ee));const Y=f(n,["compressionQuality"]);return e!==void 0&&Y!=null&&g(e,["parameters","compressionQuality"],Y),t}function kU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],LU(u)),e}function PU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],OU(u)),e}function VU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],wf(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],OI(u));const d=f(e,["source"]);d!=null&&qU(d,t);const p=f(e,["config"]);return p!=null&&MU(p,t),t}function UU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],Si(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],qI(u));const d=f(e,["source"]);d!=null&&BU(d,t);const p=f(e,["config"]);return p!=null&&DU(p,t),t}function LU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>HU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function OU(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>GU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function qU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],wf(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],OI(a)),t}function BU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Si(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],qI(a)),t}function FU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],WU(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],PI(o)),e}function If(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],kI(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],VI(o));const a=f(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function zU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],kI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function HU(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],RL(t)),e}function GU(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],bL(t)),e}function JU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&g(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const Y=f(n,["speechConfig"]);Y!=null&&g(e,["speechConfig"],UI(Y));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&g(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function KU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function $U(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function QU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function WU(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Kr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function kI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function wf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Kr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Si(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function jU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],II(n,d)),i}function XU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],II(n,d)),i}function ZU(n,e){const t={},i=f(e,["config"]);return i!=null&&jU(n,i,t),t}function eL(n,e){const t={},i=f(e,["config"]);return i!=null&&XU(n,i,t),t}function tL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=wI(o);Array.isArray(a)&&(a=a.map(u=>wm(u))),g(e,["models"],a)}return e}function nL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=wI(o);Array.isArray(a)&&(a=a.map(u=>Rm(u))),g(e,["models"],a)}return e}function iL(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function wm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["version"]);a!=null&&g(e,["version"],a);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],_L(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function Rm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["versionId"]);a!=null&&g(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>TU(S))),g(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],vL(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["checkpoints"],T)}return e}function sL(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],EU(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],K4(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function rL(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],Si(t)),e}function oL(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&g(e,["labels"],R),t}function aL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["source"]);o!=null&&uL(o,t);const a=f(e,["config"]);return a!=null&&oL(a,t),t}function lL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>If(o))),g(e,["generatedImages"],i)}return e}function uL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],Si(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>rL(d))),g(e,["instances[0]","productImages"],u)}return t}function cL(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Si(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],iL(a));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],eU(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function PI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function VI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function dL(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function fL(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],Si(t)),e}function hL(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function pL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["source"]);o!=null&&gL(o,t);const a=f(e,["config"]);return a!=null&&hL(a,t),t}function mL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>zU(o))),g(e,["generatedMasks"],i)}return e}function gL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Si(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],fL(a)),t}function UI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],$U(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],QU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function LI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>SU(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function _L(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function vL(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function TL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function EL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function SL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],et(n,i));const o=f(e,["config"]);return o!=null&&TL(o,t),t}function AL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["config"]);return o!=null&&EL(o,t),t}function CL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&g(e,["parameters","mode"],R),t}function IL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],Si(o));const a=f(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&CL(u,t),t}function wL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>If(a))),g(e,["generatedImages"],o)}return e}function RL(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Kr(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function bL(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function xL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],Si(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function NL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],wf(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function ML(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Si(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function OI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function qI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DL="Content-Type",kL="X-Server-Timeout",PL="User-Agent",bm="x-goog-api-client",VL="1.29.0",UL=`google-genai-sdk/${VL}`,LL="v1beta1",OL="v1beta",uS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qL{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:LL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:OL,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&BL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await cS(o),new Am(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await cS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return La(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield gt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),R=S.status,L=S.code,z=`got status: ${R}. ${JSON.stringify(T)}`;if(L>=400&&L<600)throw new Af({message:z,status:L})}}catch(T){if(T.name==="ApiError")throw T}u+=m;let v=u.match(uS);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield gt(new Am(S)),u=u.slice(v[0].length),v=u.match(uS)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=UL+" "+this.clientOptions.userAgentExtra;return e[PL]=t,e[bm]=t,e[DL]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(kL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},m=this.getFileName(e),v=fe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&i.customMetadata&&(T.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(T.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,p,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function cS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Af({message:o,status:t}):new Error(o)}}function BL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FL="mcp_used/unknown";let zL=!1;function BI(n){for(const e of n)if(HL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zL}function FI(n){var e;const t=(e=n[bm])!==null&&e!==void 0?e:"";n[bm]=(t+` ${FL}`).trimStart()}function HL(n){return n!==null&&typeof n=="object"&&n instanceof qg}function GL(n,e=100){return La(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield gt(n.listTools({cursor:i}));for(const u of a.tools)yield yield gt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class qg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new qg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,gu(GL(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),QP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JL(n,e,t){const i=new FP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class YL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=QL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(W=>{m=W}),T=e.callbacks,S=function(){m({})},R=this.apiClient,L={onopen:S,onmessage:W=>{JL(R,T.onmessage,W)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(W){}},z=this.webSocketFactory.create(p,$L(u),L);z.connect(),await v;const Y={setup:{model:et(this.apiClient,e.model)}};return z.send(JSON.stringify(Y)),new KL(z,this.apiClient)}}class KL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=O4(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=L4(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Na.PLAY)}pause(){this.sendPlaybackControl(Na.PAUSE)}stop(){this.sendPlaybackControl(Na.STOP)}resetContext(){this.sendPlaybackControl(Na.RESET_CONTEXT)}close(){this.conn.close()}}function $L(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function QL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jL(n,e,t){const i=new BP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=F4(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class XL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new YL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&BI(e.config.tools)&&FI(T);const S=n3(T);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let V="BidiGenerateContent",P="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",P="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${P}=${x}`}let R=()=>{};const L=new Promise(x=>{R=x}),z=e.callbacks,B=function(){var x;(x=z==null?void 0:z.onopen)===null||x===void 0||x.call(z),R({})},ee=this.apiClient,Y={onopen:B,onmessage:x=>{jL(ee,z.onmessage,x)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=z==null?void 0:z.onclose)!==null&&i!==void 0?i:function(x){}},W=this.webSocketFactory.create(v,t3(S),Y);W.connect(),await L;let ie=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const x=this.apiClient.getProject(),V=this.apiClient.getLocation();ie=`projects/${x}/locations/${V}/`+ie}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$d.AUDIO]}:e.config.responseModalities=[$d.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of ue)if(this.isCallableTool(x)){const V=x;D.push(await V.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const N={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=U4(this.apiClient,N):de=V4(this.apiClient,N),delete de.config,W.send(JSON.stringify(de)),new e3(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZL={turnComplete:!0};class e3{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=li(t.turns),e.isVertexAI()||(i=i.map(o=>Cf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(WL)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},ZL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:B4(e)}:t={realtimeInput:q4(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function t3(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function n3(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS=10;function fS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Oa(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Oa(n){return"callTool"in n&&typeof n.callTool=="function"}function i3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Oa(o)))!==null&&i!==void 0?i:!1}function hS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Oa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function pS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3 extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!i3(t)||fS(t.config))return await this.generateContentInternal(p);const m=hS(t);if(m.length>0){const z=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let v,T;const S=li(p.contents),R=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:dS;let L=0;for(;L<R&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const z=v.candidates[0].content,B=[];for(const ee of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Oa(ee)){const W=await ee.callTool(v.functionCalls);B.push(...W)}L++,T={role:"user",parts:B},p.contents=li(p.contents),p.contents.push(z),p.contents.push(T),pS(p.config)&&(S.push(z),S.push(T))}return pS(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),fS(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=hS(t);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new qo(xs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Oa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&BI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),FI(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Oa(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:dS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,T){var S,R;return La(this,arguments,function*(){for(var L,z,B,ee;d<a;){u&&(d++,u=!1);const de=yield gt(m.processParamsMaybeAddMcpUsage(T)),ue=yield gt(m.generateContentStreamInternal(de)),D=[],N=[];try{for(var Y=!0,W=(z=void 0,gu(ue)),ie;ie=yield gt(W.next()),L=ie.done,!L;Y=!0){ee=ie.value,Y=!1;const x=ee;if(yield yield gt(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){N.push(x.candidates[0].content);for(const V of(R=x.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const P=yield gt(v.get(V.functionCall.name).callTool([V.functionCall]));D.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(x){z={error:x}}finally{try{!Y&&!L&&(B=W.return)&&(yield gt(B.call(W)))}finally{if(z)throw z.error}}if(D.length>0){u=!0;const x=new eu;x.candidates=[{content:{role:"user",parts:D}}],yield yield gt(x);const V=[];V.push(...N),V.push({role:"user",parts:D});const P=li(T.contents).concat(V);T.contents=P}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=oS(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=lS(v),S=new eu;return Object.assign(S,T),S})}else{const m=rS(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=aS(v),S=new eu;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=oS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return La(this,arguments,function*(){var S,R,L,z;try{for(var B=!0,ee=gu(T),Y;Y=yield gt(ee.next()),S=Y.done,!S;B=!0){z=Y.value,B=!1;const W=z,ie=lS(yield gt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new eu;Object.assign(de,ie),yield yield gt(de)}}catch(W){R={error:W}}finally{try{!B&&!S&&(L=ee.return)&&(yield gt(L.call(ee)))}finally{if(R)throw R.error}}})})}else{const m=rS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return La(this,arguments,function*(){var S,R,L,z;try{for(var B=!0,ee=gu(T),Y;Y=yield gt(ee.next()),S=Y.done,!S;B=!0){z=Y.value,B=!1;const W=z,ie=aS(yield gt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new eu;Object.assign(de,ie),yield yield gt(de)}}catch(W){R={error:W}}finally{try{!B&&!S&&(L=ee.return)&&(yield gt(L.call(ee)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=yU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=vU(v),S=new HE;return Object.assign(S,T),S})}else{const m=gU(this.apiClient,e);return d=fe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_U(v),S=new HE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=bU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=NU(v),S=new GE;return Object.assign(S,T),S})}else{const m=RU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=xU(v),S=new GE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=fU(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=hU(p),v=new xP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=IL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=wL(p),v=new NP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=aL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=lL(p),v=new MP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=pL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=mL(p),v=new DP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=KU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}else{const m=YU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=eL(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nL(v),S=new JE;return Object.assign(S,T),S})}else{const m=ZU(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=tL(v),S=new JE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=AL(this.apiClient,e);return d=fe("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}else{const m=SL(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=lU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=cU(v),S=new YE;return Object.assign(S,T),S})}else{const m=aU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=uU(v),S=new YE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=sU(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=oU(v),S=new KE;return Object.assign(S,T),S})}else{const m=iU(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rU(v),S=new KE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=W4(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=j4(p),v=new kP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=UU(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=PU(v),S=new Qd;return Object.assign(S,T),S})}else{const m=VU(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=kU(v),S=new Qd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r3 extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=AP(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=SP(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=mP(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o3(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function a3(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>m3(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function l3(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],p3(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),i}function u3(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],l3(n,i,t)),t}function c3(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function d3(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function f3(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function h3(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Og(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],a3(mn(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=Wa(z);Array.isArray(ue)&&(ue=ue.map(D=>y3(Qa(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],g3(B));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function p3(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],h3(o,t)),t}function m3(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],c3(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],o3(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function g3(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function y3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],d3(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],f3(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function v3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=_3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class T3 extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=u3(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=v3(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E3(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function S3(n){const e={},t=f(n,["config"]);return t!=null&&E3(t,e),e}function A3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function C3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&A3(i,e),e}function I3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function w3(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function R3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],x3(u)),e}function b3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&w3(o,e),e}function x3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function N3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function M3(n){const e={},t=f(n,["config"]);return t!=null&&N3(t,e),e}function D3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function k3(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function P3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&k3(i,e),e}function V3(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function L3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&U3(i,e),e}function O3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function q3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function B3(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&q3(i,e),e}function F3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z3 extends Ns{constructor(e){super(),this.apiClient=e,this.list=async t=>new qo(xs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=L3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B3(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=F3(p),v=new PP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H3 extends Ns{constructor(e,t=new z3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new qo(xs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S3(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=I3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=C3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=M3(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=D3(p),v=new VP;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=P3(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=V3(p),v=new UP;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=b3(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=R3(p),v=new kg;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function J3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function Y3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function K3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec"],mS(R))}else if(o==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec"],mS(R))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(p==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(m==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function $3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&rO(a);const u=f(n,["config"]);return u!=null&&Y3(u,t),t}function Q3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&oO(a,t,e);const u=f(n,["config"]);return u!=null&&K3(u,t,e),t}function W3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function j3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function X3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function Z3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function eO(n,e){const t={},i=f(n,["config"]);return i!=null&&X3(i,t),t}function tO(n,e){const t={},i=f(n,["config"]);return i!=null&&Z3(i,t),t}function nO(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>zI(d))),g(t,["tuningJobs"],u)}return t}function iO(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>xm(d))),g(t,["tuningJobs"],u)}return t}function sO(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function rO(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(t,["examples","examples"],o)}return t}function oO(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function zI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],AI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],sO(S)),t}function xm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],AI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const T=f(n,["description"]);T!=null&&g(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&g(t,["tunedModel"],R);const L=f(n,["preTunedModel"]);L!=null&&g(t,["preTunedModel"],L);const z=f(n,["supervisedTuningSpec"]);z!=null&&g(t,["supervisedTuningSpec"],z);const B=f(n,["preferenceOptimizationSpec"]);B!=null&&g(t,["preferenceOptimizationSpec"],B);const ee=f(n,["tuningDataStats"]);ee!=null&&g(t,["tuningDataStats"],ee);const Y=f(n,["encryptionSpec"]);Y!=null&&g(t,["encryptionSpec"],Y);const W=f(n,["partnerModelTuningSpec"]);W!=null&&g(t,["partnerModelTuningSpec"],W);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const de=f(n,["experiment"]);de!=null&&g(t,["experiment"],de);const ue=f(n,["labels"]);ue!=null&&g(t,["labels"],ue);const D=f(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const N=f(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const x=f(n,["serviceAccount"]);x!=null&&g(t,["serviceAccount"],x);const V=f(n,["tunedModelDisplayName"]);V!=null&&g(t,["tunedModelDisplayName"],V);const P=f(n,["veoTuningSpec"]);return P!=null&&g(t,["veoTuningSpec"],P),t}function aO(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function mS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lO extends Ns{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new qo(xs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Sm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=j3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>xm(v))}else{const m=W3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>zI(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=tO(e);return d=fe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iO(v),S=new $E;return Object.assign(S,T),S})}else{const m=eO(e);return d=fe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nO(v),S=new $E;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=J3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=G3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Q3(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>xm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$3(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>aO(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cO=1024*1024*8,dO=3,fO=1e3,hO=2,jd="x-goog-upload-status";async function pO(n,e,t){var i;const o=await HI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function mO(n,e,t){var i;const o=await HI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=yI(a),d=new Pg;return Object.assign(d,u),d}async function HI(n,e,t){var i,o;let a=0,u=0,d=new Am(new Response),p="upload";for(a=n.size;u<a;){const m=Math.min(cO,a-u),v=n.slice(u,u+m);u+m>=a&&(p+=", finalize");let T=0,S=fO;for(;T<dO&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[jd]));)T++,await yO(S),S=S*hO;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[jd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function gO(n){return{size:n.size,type:n.type}}function yO(n){return new Promise(e=>setTimeout(e,n))}class _O{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pO(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mO(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vO{create(e,t,i){return new TO(e,t,i)}}class TO{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gS="x-goog-api-key";class EO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(gS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SO="gl-node/";class AO{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=hP(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new EO(this.apiKey);this.apiClient=new qL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:SO+"web",uploader:new _O,downloader:new uO}),this.models=new s3(this.apiClient),this.live=new XL(this.apiClient,o,new vO),this.batches=new OV(this.apiClient),this.chats=new g4(this.models,this.apiClient),this.caches=new h4(this.apiClient),this.files=new w4(this.apiClient),this.operations=new r3(this.apiClient),this.authTokens=new T3(this.apiClient),this.tunings=new lO(this.apiClient),this.fileSearchStores=new H3(this.apiClient)}}const GI={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},Rf=new AO({apiKey:GI.geminiApiKey});async function CO(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),i=await Rf.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:Ve.OBJECT,properties:{items:{type:Ve.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Ve.OBJECT,properties:{analysis:{type:Ve.STRING,description:"La description concise du vtement."},category:{type:Ve.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ve.STRING,description:"La couleur principale du vtement."},material:{type:Ve.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function IO(n){return n&&n.name&&Array.isArray(n.itemIds)}async function wO(n,e,t,i){const o=new Set((e||[]).flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${IO(i)?i.name:i.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,T=await Rf.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Ve.OBJECT,properties:{tenues:{type:Ve.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Ve.OBJECT,properties:{titre:{type:Ve.STRING,description:"Le nom de la tenue."},description:{type:Ve.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Ve.ARRAY,items:{type:Ve.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(T.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",T.text),new Error("L'IA a renvoy une rponse malforme.")}}async function RO(n,e){const t=n.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await Rf.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ve.OBJECT,properties:{summary:{type:Ve.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Ve.ARRAY,items:{type:Ve.STRING},description:"Liste des points forts"},gaps:{type:Ve.ARRAY,items:{type:Ve.STRING},description:"Liste des manques"},suggestions:{type:Ve.ARRAY,items:{type:Ve.OBJECT,properties:{category:{type:Ve.STRING},description:{type:Ve.STRING},reason:{type:Ve.STRING},priority:{type:Ve.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Ve.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(a){throw console.error("Erreur:",a),a}}async function bO(n,e,t,i){const o=new Set((e||[]).flatMap(T=>T.itemIds)),u=n.filter(T=>!o.has(T.id)).map(T=>`- ${T.analysis} (Catgorie: ${T.category}, Couleur: ${T.color}, Matire: ${T.material})`).join(`
`),d=e.map(T=>`- ${T.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables.
    4. Assure-toi que la quantit de vtements est approprie pour ${t} jour(s).
    `,v=await Rf.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:Ve.OBJECT,properties:{titre:{type:Ve.STRING,description:"Le nom du plan de valise."},resume:{type:Ve.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Ve.ARRAY,items:{type:Ve.STRING},description:"La liste des vtements  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(T){throw console.error("Erreur de parsing JSON:",T),new Error("L'IA a renvoy une rponse malforme.")}}const yS=async n=>{try{const e=_f(Ji,"users",n,"items");return(await WC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},xO=async(n,e)=>{try{const t=_f(Ji,"users",n,"items");return(await XC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un vtement:",t),t}},_S=async(n,e,t)=>{try{const i=ko(Ji,"users",n,"items",e);await JD(i,t)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},NO=async(n,e)=>{try{const t=ko(Ji,"users",n,"items",e);await jC(t)}catch(t){throw console.error("Erreur lors de la suppression d'un vtement:",t),t}},vS=async n=>{try{const e=_f(Ji,"users",n,"sets");return(await WC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},TS=async(n,e)=>{try{const t=_f(Ji,"users",n,"sets");return(await XC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un ensemble:",t),t}},MO=async(n,e)=>{try{const t=ko(Ji,"users",n,"sets",e);await jC(t)}catch(t){throw console.error("Erreur lors de la suppression d'un ensemble:",t),t}},DO=async(n,e)=>{try{const t=ko(Ji,"users",n,"items",e.id),{id:i,...o}=e;await GD(t,o)}catch(t){console.error("Erreur lors de la migration de l'item:",e.id,t)}},kO=async(n,e,t)=>{try{const i=nP(uP,`users/${n}/clothing/${t}.jpg`);return await eP(i,e,"data_url"),await tP(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},PO=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),VO=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),ES=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),UO=()=>A.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Bg=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),JI=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),SS=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),YI=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),LO=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),OO=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),qO=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),BO=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),FO=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),KI=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),bf=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),$I=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),zO=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),HO=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),GO=({theme:n,toggleTheme:e,children:t})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[t,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?A.jsx(VO,{}):A.jsx(PO,{})})]})]})}),AS=({user:n})=>{var R,L,z;const[e,t]=ge.useState(""),[i,o]=ge.useState(""),[a,u]=ge.useState(!1),[d,p]=ge.useState(!1),m=ge.useRef(null);ge.useEffect(()=>{const B=ee=>{m.current&&!m.current.contains(ee.target)&&p(!1)};return d&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[d]);const v=async()=>{try{await zx(au,lP)}catch(B){console.error("Erreur de connexion Google:",B)}},T=async B=>{B.preventDefault();try{a?await yx(au,e,i):await _x(au,e,i)}catch(ee){console.error("Erreur d'authentification:",ee)}},S=async()=>{try{await Sx(au)}catch(B){console.error("Erreur de dconnexion:",B)}};return n?A.jsxs("div",{className:"relative",ref:m,children:[A.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((R=n.displayName)==null?void 0:R[0])||((L=n.email)==null?void 0:L[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((z=n.email)==null?void 0:z.split("@")[0])})]}),d&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),A.jsxs("button",{onClick:S,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:v,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:T,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:B=>t(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},JO=({onAnalyze:n,isAnalyzing:e})=>{const t=ge.useRef(null),[i,o]=ge.useState([]),[a,u]=ge.useState(!1),[d,p]=ge.useState(!1);ge.useEffect(()=>{const Y=()=>p(window.innerWidth<1024);return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]),ge.useEffect(()=>()=>{i.forEach(Y=>URL.revokeObjectURL(Y.preview))},[i]);const m=Y=>{const W=Y.map(ie=>({id:`${ie.name}-${ie.lastModified}-${Math.random()}`,file:ie,preview:URL.createObjectURL(ie)}));o(ie=>[...ie,...W])},v=Y=>{Y.target.files&&(m(Array.from(Y.target.files)),Y.target.value="")},T=()=>{var Y;e||(Y=t.current)==null||Y.click()},S=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!0))},R=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!1))},L=Y=>{d||(Y.preventDefault(),Y.stopPropagation())},z=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!1),Y.dataTransfer.files&&Y.dataTransfer.files.length>0&&(m(Array.from(Y.dataTransfer.files)),Y.dataTransfer.clearData()))},B=Y=>{const W=i.find(ie=>ie.id===Y);W&&URL.revokeObjectURL(W.preview),o(ie=>ie.filter(de=>de.id!==Y))},ee=()=>{i.length>0&&!e&&(n(i.map(Y=>Y.file)),o([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:R,onDragOver:L,onDrop:z,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:T,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(UO,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(ES,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!d&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(ES,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(Y=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:Y.preview,alt:Y.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>B(Y.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(JI,{})})]},Y.id))}),A.jsxs("button",{onClick:ee,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(Bg,{}),"Analyser les ",i.length," article(s)"]})]})]})},YO=({imageSrc:n,analysis:e,onClick:t,onRemove:i,isSelected:o,isSet:a})=>A.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:A.jsx(bf,{})}),o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:A.jsx($I,{})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(JI,{})})]}),KO={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},$O=({clothingItems:n,clothingSets:e=[],onItemClick:t,onDeleteItem:i,onCreateSet:o})=>{const[a,u]=ge.useState("Hauts"),[d,p]=ge.useState(KO),[m,v]=ge.useState(!1),[T,S]=ge.useState(new Set),R=ge.useMemo(()=>e||[],[e]),L=ge.useMemo(()=>new Set(R.flatMap(P=>P.itemIds||[])),[R]),z=n.length,B=[{name:"Hauts",icon:LO},{name:"Bas",icon:OO},{name:"Chaussures",icon:qO},{name:"Accessoires",icon:BO}],ee=P=>{m?S(k=>{const M=new Set(k);return M.has(P.id)?M.delete(P.id):M.add(P.id),M}):t(P)},Y=(P,k)=>{P.stopPropagation(),T.has(k)&&S(M=>{const Qe=new Set(M);return Qe.delete(k),Qe}),i(k)},W=ge.useMemo(()=>n.filter(P=>{if(!(P.category===a))return!1;const M=a?d[a]:{color:"Toutes",material:"Toutes"},Qe=M.color==="Toutes"||P.color===M.color,Re=M.material==="Toutes"||P.material===M.material;return Qe&&Re}),[n,a,d]),ie=ge.useMemo(()=>{if(!a)return[];const P=n.filter(k=>k.category===a).map(k=>k.color);return["Toutes",...Array.from(new Set(P))]},[n,a]),de=ge.useMemo(()=>{if(!a)return[];const P=n.filter(k=>k.category===a).map(k=>k.material);return["Toutes",...Array.from(new Set(P))]},[n,a]),ue=P=>{a&&p(k=>({...k,[a]:{...k[a],color:P}}))},D=P=>{a&&p(k=>({...k,[a]:{...k[a],material:P}}))},N=P=>{u(a===P?null:P)},x=()=>{v(!m),S(new Set)},V=()=>{if(T.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const P=window.prompt("Donnez un nom  cet ensemble :");P&&(o(P,Array.from(T)),x())};return z===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(SS,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(SS,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[z," vtement",z>1?"s":""]})]})]}),m?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:x,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:V,disabled:T.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",T.size,")"]})]}):A.jsxs("button",{onClick:x,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(bf,{}),"Crer un ensemble"]})]}),m&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:B.map(({name:P,icon:k})=>{const M=n.filter(Re=>Re.category===P),Qe=a===P;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>N(P),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(k,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:P}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",M.length,")"]})]}),A.jsx(FO,{className:`w-5 h-5 transition-transform ${Qe?"rotate-180":""}`})]}),Qe&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:d[P].color,onChange:Re=>ue(Re.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ie.map(Re=>A.jsx("option",{value:Re,children:Re},Re))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:d[P].material,onChange:Re=>D(Re.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:de.map(Re=>A.jsx("option",{value:Re,children:Re},Re))})]})]}),W.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:W.map(Re=>A.jsx(YO,{imageSrc:Re.imageSrc,analysis:Re.analysis,onClick:()=>ee(Re),onRemove:$=>Y($,Re.id),isSelected:T.has(Re.id),isSet:L.has(Re.id)&&!T.has(Re.id)},Re.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},P)})})]})},QI=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:o,weatherError:a})=>{const[u,d]=lu.useState(""),p=v=>{v.preventDefault(),t(u||"Casual")},m=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[o&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",o," "]}),a&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!o&&!a&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:p,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:m.map(v=>A.jsx("button",{type:"button",onClick:()=>d(v),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${u===v?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:v},v))}),A.jsx("input",{id:"occasion",type:"text",value:u,onChange:v=>d(v.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),A.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(Bg,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},WI=({outfits:n,allClothingItems:e})=>{const[t,i]=ge.useState(null);ge.useEffect(()=>{if(!t)return;const a=u=>{u.key==="Escape"&&i(null)};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow="auto"}},[t]);const o=a=>{const u=a.toLowerCase(),d=new Set(u.split(/\s+/));if(e.length===0)return null;const p=e.find(T=>T.analysis.toLowerCase()===u);if(p)return p.imageSrc;const m=e.map(T=>{const S=new Set(T.analysis.toLowerCase().split(/\s+/)),R=new Set([...S].filter(B=>d.has(B))),L=new Set([...S,...d]),z=R.size/L.size;return{item:T,score:z}});m.sort((T,S)=>S.score-T.score);const v=m[0];return v.score===0?null:v.item.imageSrc};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:n.map((a,u)=>A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:a.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:a.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:a.vetements.map((d,p)=>{const m=o(d);return A.jsx("button",{onClick:()=>m&&i(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${d}`,children:m?A.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(YI,{})})},p)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:a.vetements.map((d,p)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>i(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[A.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>i(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(KI,{})})]})})]})},QO=({item:n,clothingSets:e,onClose:t,onUpdate:i,onGenerateFrom:o,onRemoveSet:a})=>{const[u,d]=ge.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(T=>T.itemIds.includes(n.id));ge.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),ge.useEffect(()=>{const T=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",T),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",T)}},[t]);const m=T=>{const{name:S,value:R}=T.target;d(L=>({...L,[S]:R}))},v=T=>{T.preventDefault(),i({...n,...u})};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(KI,{})})]}),A.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(T=>A.jsx("option",{value:T,children:T},T))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),A.jsxs("button",{type:"button",onClick:()=>{a(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(zO,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(Bg,{}),"Crer une tenue avec cet article"]}),A.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},jI=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i})=>{const[o,a]=ge.useState(3),[u,d]=ge.useState(""),p=m=>{m.preventDefault();const v=u||"";v.trim()&&o>0&&t(o,v)};return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),A.jsxs("form",{onSubmit:p,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:o,onChange:m=>a(parseInt(m.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:m=>d(m.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:i||!(u||"").trim()||o<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(HO,{}),i?"Prparation...":"Gnrer la valise"]})]})]})},XI=({plan:n,allClothingItems:e})=>{const t=i=>{const o=i.toLowerCase(),a=e.find(d=>d.analysis.toLowerCase()===o);if(a)return a.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),T=m.filter(S=>p.has(S)).length/m.length;return{item:d,score:T}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((i,o)=>{const a=t(i);return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:i,children:[a?A.jsx("img",{src:a,alt:i,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(YI,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:i})})]},o)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((i,o)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:i},o))})]})})},WO=({onFilesSelected:n,isAnalyzing:e})=>{const[t,i]=ge.useState(!1),o=a=>{const u=Array.from(a.target.files||[]);u.length>0&&(n(u),i(!1))};return A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>i(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),t&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>i(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:a=>a.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>i(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},jO=({onAnalyzeWardrobe:n,onScrollToOutfits:e,onScrollToVacation:t,onStartSetCreation:i,isAnalyzingWardrobe:o,clothingCount:a})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a," vtement",a>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[a>=3&&A.jsx("button",{onClick:n,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:a}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),XO=({activeTab:n,onTabChange:e,counts:t})=>{const i=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:t.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:t.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:t.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:t.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(o=>{const a=n===o.id;return A.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[o.icon,o.count!==null&&o.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:o.count})]}),A.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:o.label})]},o.id)})})})},ZO=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,a)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:o.description}),A.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:i[o.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},a))})]})]})]})})},e6=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,suggestedOutfits:o,onClose:a,weatherInfo:u,weatherError:d})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:a,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:p=>p.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crateur de Tenues"}),A.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(QI,{clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:u,weatherError:d}),i&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),o.length>0&&A.jsx(WI,{outfits:o,allClothingItems:n})]})]})}),t6=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i,vacationPlan:o,onCreateSet:a,onClose:u})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:u,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:d=>d.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Planificateur de Valise"}),A.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(jI,{clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i}),i&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&A.jsx(XI,{plan:o,allClothingItems:n,onCreateSet:a})]})]})}),n6=({clothingItems:n,clothingSets:e,onClose:t,onCreateSet:i})=>{const[o,a]=ge.useState(new Set),u=new Set(e.flatMap(T=>T.itemIds)),p=n.filter(T=>!u.has(T.id)).reduce((T,S)=>(T[S.category]||(T[S.category]=[]),T[S.category].push(S),T),{}),m=T=>{a(S=>{const R=new Set(S);return R.has(T)?R.delete(T):R.add(T),R})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const T=window.prompt("Donnez un nom  cet ensemble :");T&&i(T,Array.from(o))};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:t,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up flex flex-col",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3 z-10",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crer un ensemble"}),A.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(p).map(T=>p[T].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:T}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:p[T].map(S=>{const R=o.has(S.id);return A.jsxs("button",{onClick:()=>m(S.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:R?"#D4AF37":"transparent"},children:[R&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx($I,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:S.imageSrc,alt:S.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:S.analysis})]},S.id)})})]},T))})]}),o.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10",children:A.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(bf,{}),"Lier ",o.size," article",o.size>1?"s":""]})})]})})},i6=()=>{const[n,e]=ge.useState(null),[t,i]=ge.useState("dark"),[o,a]=ge.useState([]),[u,d]=ge.useState([]),[p,m]=ge.useState(null),[v,T]=ge.useState(!1),[S,R]=ge.useState(null),[L,z]=ge.useState([]),[B,ee]=ge.useState(!1),[Y,W]=ge.useState(null),[ie,de]=ge.useState(!1),[ue,D]=ge.useState(null),[N,x]=ge.useState(!1),[V,P]=ge.useState("home"),k=lu.useMemo(()=>o||[],[o]),M=lu.useMemo(()=>u||[],[u]),Qe=lu.useMemo(()=>new Set(M.flatMap(ce=>ce.itemIds||[])),[M]),[Re,$]=ge.useState(!1),[ae,ve]=ge.useState(!1),[Ye,Ke]=ge.useState(!1),[O,Z]=ge.useState(null),[oe,he]=ge.useState(null);ge.useEffect(()=>{const ce=Ex(au,we=>{e(we)});return()=>ce()},[]),ge.useEffect(()=>{(async()=>{if(n)try{const we=await yS(n.uid);a(we);const be=await vS(n.uid);d(be)}catch(we){console.error("Erreur lors du chargement des donnes:",we)}else a([]),d([])})()},[n]),ge.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),ge.useEffect(()=>{const ce=async we=>{const be=we.coords.latitude,ft=we.coords.longitude,We=GI.openWeatherApiKey,nt=`https://api.openweathermap.org/data/2.5/weather?lat=${be}&lon=${ft}&appid=${We}&units=metric&lang=fr`;try{const vt=await fetch(nt);if(!vt.ok)throw new Error("Impossible de rcuprer la mto.");const Et=await vt.json(),Cn=`${Math.round(Et.main.temp)}C, ${Et.weather[0].description},  ${Et.name}`;Z(Cn),he(null)}catch(vt){console.error(vt),he("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(ce,we=>{console.error("Erreur de golocalisation:",we.message),he("Activez la golocalisation pour la mto.")}):he("Golocalisation non supporte.")},[]);const Ae=()=>{i(ce=>ce==="light"?"dark":"light")},De=ge.useCallback(async ce=>{if(!(ce.length===0||!n)){T(!0),R(null);try{const we=ce.map(Et=>new Promise((Cn,Xt)=>{const Vt=new FileReader;Vt.onload=()=>Cn(Vt.result),Vt.onerror=Xt,Vt.readAsDataURL(Et)})),be=await Promise.all(we),ft=be.map(Et=>Et.split(",")[1]),We=await CO(ft),nt=Math.min(We.length,ce.length),vt=[];for(let Et=0;Et<nt;Et++){const Cn=We[Et];try{const Xt=await xO(n.uid,Cn),Vt=await kO(n.uid,be[Et],Xt);console.log(" Image uploaded to Storage:",Vt),await _S(n.uid,Xt,{imageSrc:Vt}),vt.push({...Cn,id:Xt,imageSrc:Vt})}catch(Xt){console.error(` chec de cration/upload pour ${ce[Et].name}.`,Xt),R(`Erreur d'upload pour ${ce[Et].name}. L'article n'a pas t ajout.`)}}We.length!==ce.length&&R(`L'IA a analys ${vt.length} sur ${ce.length} image(s).`),a(Et=>[...Et,...vt])}catch(we){console.error("Erreur lors de l'analyse par lot des images:",we),R("Une erreur est survenue lors de l'analyse des images. Veuillez ressayer.")}finally{T(!1)}}},[n]),Ue=ge.useCallback(async(ce,we)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}ee(!0),R(null);const be=O?`Mto actuelle : ${O}. Occasion : ${ce}`:`Occasion : ${ce}`;console.log("Contexte complet envoy  l'IA:",be);try{const ft=await wO(k,M,be,we);z(ft)}catch(ft){console.error("Erreur lors de la gnration des tenues:",ft),ft instanceof Error?ft.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):ft.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{ee(!1)}},[k,M,O]),Pt=ge.useCallback(async(ce,we)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}de(!0),R(null);try{const be=await bO(k,M,ce,we);W(be)}catch(be){console.error("Erreur lors de la gnration du plan de valise:",be),be instanceof Error?be.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):be.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{de(!1)}},[k,M]),dt=ge.useCallback(async()=>{if(k.length<3){R("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}x(!0),R(null);try{const ce=await RO(k,M);D(ce)}catch(ce){console.error("Erreur lors de l'analyse de la garde-robe:",ce),ce instanceof Error?ce.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):ce.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{x(!1)}},[k,M]),Kn=ge.useCallback(()=>{$(!0)},[]),ci=ge.useCallback(()=>{ve(!0)},[]),Ai=ce=>{m(ce)},Ds=()=>{m(null)},Vn=async ce=>{if(n)try{await NO(n.uid,ce),a(we=>we.filter(be=>be.id!==ce)),d(we=>we.map(be=>({...be,itemIds:be.itemIds.filter(ft=>ft!==ce)}))),m(null)}catch(we){console.error("Erreur lors de la suppression:",we),R("Impossible de supprimer l'article. Veuillez ressayer.")}},Ki=async ce=>{if(n)try{await _S(n.uid,ce.id,ce),a(we=>we.map(be=>be.id===ce.id?ce:be)),m(ce)}catch(we){console.error("Erreur lors de la mise  jour:",we),R("Impossible de mettre  jour l'article. Veuillez ressayer.")}},ks=ce=>{const we=`Focus sur l'article : ${ce.analysis}`;Ue(we,ce),m(null),window.innerWidth<768&&$(!0)},$r=ge.useCallback(async(ce,we)=>{var We;if(!n)return;const be=((We=o.find(nt=>nt.id===we[0]))==null?void 0:We.imageSrc)||"",ft={name:ce,itemIds:we,imageSrc:be};try{const nt=await TS(n.uid,ft);d(vt=>[...vt,{...ft,id:nt}])}catch(nt){console.error("Erreur lors de la cration de l'ensemble:",nt),R("Impossible de crer l'ensemble. Veuillez ressayer.")}},[o,n]),Bo=ge.useCallback(async ce=>{if(n)try{await MO(n.uid,ce),d(we=>we.filter(be=>be.id!==ce))}catch(we){console.error("Erreur lors de la suppression de l'ensemble:",we),R("Impossible de supprimer l'ensemble. Veuillez ressayer.")}},[n]),Ps=async()=>{if(!n){alert("Veuillez vous connecter d'abord.");return}alert("Dbut de la migration. Cela peut prendre un moment. Ne fermez pas la page."),console.log("Dmarrage de la migration...");try{const ce=ko(Ji,"users",n.uid,"wardrobe","items"),we=await zT(ce);if(!we.exists()){alert("Aucune ancienne donne  migrer. C'est peut-tre dj fait !");return}const ft=we.data().items||[];if(ft.length===0){alert("L'ancien document est vide. Aucune migration ncessaire.");return}console.log(`Trouv ${ft.length} anciens articles  migrer.`);let We=0;for(const Xt of ft)await DO(n.uid,Xt),We++,console.log(`Migr ${We}/${ft.length} : ${Xt.analysis}`);const nt=ko(Ji,"users",n.uid,"wardrobe","sets"),vt=await zT(nt);if(vt.exists()&&vt.data().sets){const Xt=vt.data().sets;for(const Vt of Xt)await TS(n.uid,{name:Vt.name,itemIds:Vt.itemIds,imageSrc:Vt.imageSrc});console.log(`Migr ${Xt.length} ensembles.`)}alert(`Migration termine ! ${We} articles et leurs ensembles ont t dplacs. Vous pouvez recharger la page.`);const Et=await yS(n.uid);a(Et);const Cn=await vS(n.uid);d(Cn)}catch(ce){console.error("ERREUR DE MIGRATION:",ce),alert("Une erreur est survenue pendant la migration. Vrifiez la console.")}},$i={hauts:k.filter(ce=>ce.category==="Hauts").length,bas:k.filter(ce=>ce.category==="Bas").length,chaussures:k.filter(ce=>ce.category==="Chaussures").length,accessoires:k.filter(ce=>ce.category==="Accessoires").length},di=V==="home"?[]:k.filter(ce=>V==="hauts"?ce.category==="Hauts":V==="bas"?ce.category==="Bas":V==="chaussures"?ce.category==="Chaussures":V==="accessoires"?ce.category==="Accessoires":!1);return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:n?A.jsxs(A.Fragment,{children:[A.jsx(GO,{theme:t,toggleTheme:Ae,children:A.jsx(AS,{user:n})}),A.jsx("div",{style:{padding:"20px",textAlign:"center"},children:A.jsx("button",{onClick:Ps,style:{backgroundColor:"red",color:"white",padding:"10px 20px",fontSize:"16px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"!!! CLIQUEZ ICI UNE SEULE FOIS POUR MIGRER VOS ANCIENS VTEMENTS !!!"})}),A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:S})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[k.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:dt,disabled:N,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:N?A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(JO,{onAnalyze:De,isAnalyzing:v})}),A.jsx("div",{className:"hidden md:block",children:A.jsx($O,{clothingItems:k,clothingSets:M,onItemClick:Ai,onDeleteItem:Vn,onCreateSet:$r})}),A.jsxs("div",{className:"md:hidden",children:[V==="home"&&A.jsx(jO,{onAnalyzeWardrobe:dt,onScrollToOutfits:Kn,onScrollToVacation:ci,onStartSetCreation:()=>Ke(!0),isAnalyzingWardrobe:N,clothingCount:k.length}),V!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:V}),A.jsxs("p",{className:"text-sm text-gray-500",children:[di.length," vtement",di.length>1?"s":""]})]}),di.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:di.map(ce=>A.jsxs("div",{onClick:()=>Ai(ce),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[Qe.has(ce.id)&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(bf,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:ce.imageSrc,alt:ce.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:ce.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce.color})]})]},ce.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"space-y-10 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(QI,{clothingItems:k,clothingSets:M,onGenerate:Ue,isGenerating:B,weatherInfo:O,weatherError:oe})}),L.length>0&&A.jsx(WI,{outfits:L,allClothingItems:k}),A.jsx("div",{id:"vacation-planner",children:A.jsx(jI,{clothingItems:k,clothingSets:M,onGeneratePlan:Pt,isGenerating:ie})}),Y&&A.jsx(XI,{plan:Y,allClothingItems:k})]})]}),p&&A.jsx(QO,{item:p,clothingSets:M,onClose:Ds,onUpdate:Ki,onGenerateFrom:ks,onRemoveSet:Bo}),ue&&A.jsx(ZO,{analysis:ue,onClose:()=>D(null)}),A.jsx(WO,{onFilesSelected:De,isAnalyzing:v}),A.jsx(XO,{activeTab:V,onTabChange:P,counts:$i}),Re&&A.jsx(e6,{clothingItems:k,clothingSets:M,onGenerate:Ue,isGenerating:B,suggestedOutfits:L,onClose:()=>$(!1),weatherInfo:O,weatherError:oe}),ae&&A.jsx(t6,{clothingItems:k,clothingSets:M,onGeneratePlan:Pt,isGenerating:ie,vacationPlan:Y,onCreateSet:$r,onClose:()=>ve(!1)}),Ye&&A.jsx(n6,{clothingItems:k,clothingSets:M,onClose:()=>Ke(!1),onCreateSet:(ce,we)=>{$r(ce,we),Ke(!1)}})]})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(AS,{user:n})})})},ZI=document.getElementById("root");if(!ZI)throw new Error("L'lment root est introuvable dans le DOM");const s6=LR.createRoot(ZI);s6.render(A.jsx(lu.StrictMode,{children:A.jsx(i6,{})}));
