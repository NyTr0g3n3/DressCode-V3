(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function G0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dp={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function yR(){if(Pv)return Pl;Pv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Pl.Fragment=e,Pl.jsx=t,Pl.jsxs=t,Pl}var kv;function _R(){return kv||(kv=1,dp.exports=yR()),dp.exports}var x=_R(),hp={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function vR(){if(Vv)return Re;Vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,H={};function ee(P,Q,ie){this.props=P,this.context=Q,this.refs=H,this.updater=ie||q}ee.prototype.isReactComponent={},ee.prototype.setState=function(P,Q){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Q,"setState")},ee.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function $(){}$.prototype=ee.prototype;function Z(P,Q,ie){this.props=P,this.context=Q,this.refs=H,this.updater=ie||q}var re=Z.prototype=new $;re.constructor=Z,G(re,ee.prototype),re.isPureReactComponent=!0;var fe=Array.isArray;function ue(){}var M={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(P,Q,ie){var ce=ie.ref;return{$$typeof:n,type:P,key:Q,ref:ce!==void 0?ce:null,props:ie}}function D(P,Q){return N(P.type,Q,P.props)}function U(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function O(P){var Q={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ie){return Q[ie]})}var k=/\/+/g;function rt(P,Q){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):Q.toString(36)}function ot(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ue,ue):(P.status="pending",P.then(function(Q){P.status==="pending"&&(P.status="fulfilled",P.value=Q)},function(Q){P.status==="pending"&&(P.status="rejected",P.reason=Q)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function F(P,Q,ie,ce,ye){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var Me=!1;if(P===null)Me=!0;else switch(Ne){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(P.$$typeof){case n:case e:Me=!0;break;case v:return Me=P._init,F(Me(P._payload),Q,ie,ce,ye)}}if(Me)return ye=ye(P),Me=ce===""?"."+rt(P,0):ce,fe(ye)?(ie="",Me!=null&&(ie=Me.replace(k,"$&/")+"/"),F(ye,Q,ie,"",function(Pn){return Pn})):ye!=null&&(U(ye)&&(ye=D(ye,ie+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+Me)),Q.push(ye)),1;Me=0;var We=ce===""?".":ce+":";if(fe(P))for(var at=0;at<P.length;at++)ce=P[at],Ne=We+rt(ce,at),Me+=F(ce,Q,ie,Ne,ye);else if(at=b(P),typeof at=="function")for(P=at.call(P),at=0;!(ce=P.next()).done;)ce=ce.value,Ne=We+rt(ce,at++),Me+=F(ce,Q,ie,Ne,ye);else if(Ne==="object"){if(typeof P.then=="function")return F(ot(P),Q,ie,ce,ye);throw Q=String(P),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ae(P,Q,ie){if(P==null)return P;var ce=[],ye=0;return F(P,ce,"","",function(Ne){return Q.call(ie,Ne,ye++)}),ce}function ge(P){if(P._status===-1){var Q=P._result;Q=Q(),Q.then(function(ie){(P._status===0||P._status===-1)&&(P._status=1,P._result=ie)},function(ie){(P._status===0||P._status===-1)&&(P._status=2,P._result=ie)}),P._status===-1&&(P._status=0,P._result=Q)}if(P._status===1)return P._result.default;throw P._result}var Fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ze={map:ae,forEach:function(P,Q,ie){ae(P,function(){Q.apply(this,arguments)},ie)},count:function(P){var Q=0;return ae(P,function(){Q++}),Q},toArray:function(P){return ae(P,function(Q){return Q})||[]},only:function(P){if(!U(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=E,Re.Children=ze,Re.Component=ee,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=Z,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return M.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,Q,ie){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=G({},P.props),ye=P.key;if(Q!=null)for(Ne in Q.key!==void 0&&(ye=""+Q.key),Q)!w.call(Q,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Q.ref===void 0||(ce[Ne]=Q[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=ie;else if(1<Ne){for(var Me=Array(Ne),We=0;We<Ne;We++)Me[We]=arguments[We+2];ce.children=Me}return N(P.type,ye,ce)},Re.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Re.createElement=function(P,Q,ie){var ce,ye={},Ne=null;if(Q!=null)for(ce in Q.key!==void 0&&(Ne=""+Q.key),Q)w.call(Q,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ye[ce]=Q[ce]);var Me=arguments.length-2;if(Me===1)ye.children=ie;else if(1<Me){for(var We=Array(Me),at=0;at<Me;at++)We[at]=arguments[at+2];ye.children=We}if(P&&P.defaultProps)for(ce in Me=P.defaultProps,Me)ye[ce]===void 0&&(ye[ce]=Me[ce]);return N(P,Ne,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:f,render:P}},Re.isValidElement=U,Re.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ge}},Re.memo=function(P,Q){return{$$typeof:m,type:P,compare:Q===void 0?null:Q}},Re.startTransition=function(P){var Q=M.T,ie={};M.T=ie;try{var ce=P(),ye=M.S;ye!==null&&ye(ie,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,Fe)}catch(Ne){Fe(Ne)}finally{Q!==null&&ie.types!==null&&(Q.types=ie.types),M.T=Q}},Re.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Re.use=function(P){return M.H.use(P)},Re.useActionState=function(P,Q,ie){return M.H.useActionState(P,Q,ie)},Re.useCallback=function(P,Q){return M.H.useCallback(P,Q)},Re.useContext=function(P){return M.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,Q){return M.H.useDeferredValue(P,Q)},Re.useEffect=function(P,Q){return M.H.useEffect(P,Q)},Re.useEffectEvent=function(P){return M.H.useEffectEvent(P)},Re.useId=function(){return M.H.useId()},Re.useImperativeHandle=function(P,Q,ie){return M.H.useImperativeHandle(P,Q,ie)},Re.useInsertionEffect=function(P,Q){return M.H.useInsertionEffect(P,Q)},Re.useLayoutEffect=function(P,Q){return M.H.useLayoutEffect(P,Q)},Re.useMemo=function(P,Q){return M.H.useMemo(P,Q)},Re.useOptimistic=function(P,Q){return M.H.useOptimistic(P,Q)},Re.useReducer=function(P,Q,ie){return M.H.useReducer(P,Q,ie)},Re.useRef=function(P){return M.H.useRef(P)},Re.useState=function(P){return M.H.useState(P)},Re.useSyncExternalStore=function(P,Q,ie){return M.H.useSyncExternalStore(P,Q,ie)},Re.useTransition=function(){return M.H.useTransition()},Re.version="19.2.0",Re}var Uv;function fm(){return Uv||(Uv=1,hp.exports=vR()),hp.exports}var Ce=fm();const TR=G0(Ce);var pp={exports:{}},kl={},mp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function ER(){return Lv||(Lv=1,(function(n){function e(F,ae){var ge=F.length;F.push(ae);e:for(;0<ge;){var Fe=ge-1>>>1,ze=F[Fe];if(0<o(ze,ae))F[Fe]=ae,F[ge]=ze,ge=Fe;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ae=F[0],ge=F.pop();if(ge!==ae){F[0]=ge;e:for(var Fe=0,ze=F.length,P=ze>>>1;Fe<P;){var Q=2*(Fe+1)-1,ie=F[Q],ce=Q+1,ye=F[ce];if(0>o(ie,ge))ce<ze&&0>o(ye,ie)?(F[Fe]=ye,F[ce]=ge,Fe=ce):(F[Fe]=ie,F[Q]=ge,Fe=Q);else if(ce<ze&&0>o(ye,ge))F[Fe]=ye,F[ce]=ge,Fe=ce;else break e}}return ae}function o(F,ae){var ge=F.sortIndex-ae.sortIndex;return ge!==0?ge:F.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,E=null,S=3,b=!1,q=!1,G=!1,H=!1,ee=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function re(F){for(var ae=t(m);ae!==null;){if(ae.callback===null)s(m);else if(ae.startTime<=F)s(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function fe(F){if(G=!1,re(F),!q)if(t(p)!==null)q=!0,ue||(ue=!0,O());else{var ae=t(m);ae!==null&&ot(fe,ae.startTime-F)}}var ue=!1,M=-1,w=5,N=-1;function D(){return H?!0:!(n.unstable_now()-N<w)}function U(){if(H=!1,ue){var F=n.unstable_now();N=F;var ae=!0;try{e:{q=!1,G&&(G=!1,$(M),M=-1),b=!0;var ge=S;try{t:{for(re(F),E=t(p);E!==null&&!(E.expirationTime>F&&D());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,S=E.priorityLevel;var ze=Fe(E.expirationTime<=F);if(F=n.unstable_now(),typeof ze=="function"){E.callback=ze,re(F),ae=!0;break t}E===t(p)&&s(p),re(F)}else s(p);E=t(p)}if(E!==null)ae=!0;else{var P=t(m);P!==null&&ot(fe,P.startTime-F),ae=!1}}break e}finally{E=null,S=ge,b=!1}ae=void 0}}finally{ae?O():ue=!1}}}var O;if(typeof Z=="function")O=function(){Z(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,rt=k.port2;k.port1.onmessage=U,O=function(){rt.postMessage(null)}}else O=function(){ee(U,0)};function ot(F,ae){M=ee(function(){F(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(F){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ge=S;S=ae;try{return F()}finally{S=ge}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(F,ae){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ge=S;S=F;try{return ae()}finally{S=ge}},n.unstable_scheduleCallback=function(F,ae,ge){var Fe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Fe+ge:Fe):ge=Fe,F){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=ge+ze,F={id:v++,callback:ae,priorityLevel:F,startTime:ge,expirationTime:ze,sortIndex:-1},ge>Fe?(F.sortIndex=ge,e(m,F),t(p)===null&&F===t(m)&&(G?($(M),M=-1):G=!0,ot(fe,ge-Fe))):(F.sortIndex=ze,e(p,F),q||b||(q=!0,ue||(ue=!0,O()))),F},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(F){var ae=S;return function(){var ge=S;S=ae;try{return F.apply(this,arguments)}finally{S=ge}}}})(gp)),gp}var Ov;function SR(){return Ov||(Ov=1,mp.exports=ER()),mp.exports}var yp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function AR(){if(qv)return en;qv=1;var n=fm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},en.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},en.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},en.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},en.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:b}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},en.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},en.requestFormReset=function(p){s.d.r(p)},en.unstable_batchedUpdates=function(p,m){return p(m)},en.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.0",en}var Bv;function CR(){if(Bv)return yp.exports;Bv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yp.exports=AR(),yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function IR(){if(Fv)return kl;Fv=1;var n=SR(),e=fm(),t=CR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,u=_;break}if(I===u){A=!0,u=y,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,u=y;break}if(I===u){A=!0,u=_,a=y;break}I=I.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function rt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case ee:return"Profiler";case H:return"StrictMode";case fe:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case q:return"Portal";case Z:return i.displayName||"Context";case $:return(i._context.displayName||"Context")+".Consumer";case re:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:rt(i.type)||"Memo";case w:r=i._payload,i=i._init;try{return rt(i(r))}catch{}}return null}var ot=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Fe=[],ze=-1;function P(i){return{current:i}}function Q(i){0>ze||(i.current=Fe[ze],Fe[ze]=null,ze--)}function ie(i,r){ze++,Fe[ze]=i.current,i.current=r}var ce=P(null),ye=P(null),Ne=P(null),Me=P(null);function We(i,r){switch(ie(Ne,r),ie(ye,i),ie(ce,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?nv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=nv(r),i=iv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ce),ie(ce,i)}function at(){Q(ce),Q(ye),Q(Ne)}function Pn(i){i.memoizedState!==null&&ie(Me,i);var r=ce.current,a=iv(r,i.type);r!==a&&(ie(ye,i),ie(ce,a))}function hn(i){ye.current===i&&(Q(ce),Q(ye)),Me.current===i&&(Q(Me),Nl._currentValue=ge)}var Ar,_o;function Xn(i){if(Ar===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ar=r&&r[1]||"",_o=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ar+i+_o}var Cr=!1;function vo(i,r){if(!i||Cr)return"";Cr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var K=X}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(X){K=X}i.call(ne.prototype)}}else{try{throw Error()}catch(X){K=X}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var V=A.split(`
`),Y=I.split(`
`);for(y=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(u===V.length||y===Y.length)for(u=V.length-1,y=Y.length-1;1<=u&&0<=y&&V[u]!==Y[y];)y--;for(;1<=u&&0<=y;u--,y--)if(V[u]!==Y[y]){if(u!==1||y!==1)do if(u--,y--,0>y||V[u]!==Y[y]){var j=`
`+V[u].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=u&&0<=y);break}}}finally{Cr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Xn(a):""}function ud(i,r){switch(i.tag){case 26:case 27:case 5:return Xn(i.type);case 16:return Xn("Lazy");case 13:return i.child!==r&&r!==null?Xn("Suspense Fallback"):Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 15:return vo(i.type,!1);case 11:return vo(i.type.render,!1);case 1:return vo(i.type,!0);case 31:return Xn("Activity");default:return""}}function Tu(i){try{var r="",a=null;do r+=ud(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var To=Object.prototype.hasOwnProperty,Ir=n.unstable_scheduleCallback,Eo=n.unstable_cancelCallback,cd=n.unstable_shouldYield,Da=n.unstable_requestPaint,Gt=n.unstable_now,Eu=n.unstable_getCurrentPriorityLevel,Mt=n.unstable_ImmediatePriority,Vt=n.unstable_UserBlockingPriority,Di=n.unstable_NormalPriority,Su=n.unstable_LowPriority,Pa=n.unstable_IdlePriority,fd=n.log,Rr=n.unstable_setDisableYieldValue,ps=null,Zt=null;function kn(i){if(typeof fd=="function"&&Rr(i),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(ps,i)}catch{}}var an=Math.clz32?Math.clz32:Au,dd=Math.log,ka=Math.LN2;function Au(i){return i>>>=0,i===0?32:31-(dd(i)/ka|0)|0}var wr=256,li=262144,ms=4194304;function Wn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Vn(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?y=Wn(u):(A&=I,A!==0?y=Wn(A):a||(a=I&~i,a!==0&&(y=Wn(a))))):(I=u&~_,I!==0?y=Wn(I):A!==0?y=Wn(A):a||(a=u&~i,a!==0&&(y=Wn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function gs(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function So(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Va(){var i=ms;return ms<<=1,(ms&62914560)===0&&(ms=4194304),i}function Pi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function ys(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zt(i,r,a,u,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,V=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var j=31-an(a),ne=1<<j;I[j]=0,V[j]=-1;var K=Y[j];if(K!==null)for(Y[j]=null,j=0;j<K.length;j++){var X=K[j];X!==null&&(X.lane&=-536870913)}a&=~ne}u!==0&&Ua(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~r))}function Ua(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-an(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function _s(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-an(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function vs(i,r){var a=r&-r;return a=(a&42)!==0?1:La(a),(a&(i.suspendedLanes|r))!==0?0:a}function La(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Oa(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ki(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:Rv(i.type))}function Cu(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var ui=Math.random().toString(36).slice(2),gt="__reactFiber$"+ui,Ht="__reactProps$"+ui,ci="__reactContainer$"+ui,Ts="__reactEvents$"+ui,fi="__reactListeners$"+ui,Iu="__reactHandles$"+ui,qa="__reactResources$"+ui,Vi="__reactMarker$"+ui;function br(i){delete i[gt],delete i[Ht],delete i[Ts],delete i[fi],delete i[Iu]}function Ui(i){var r=i[gt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[ci]||a[gt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=cv(i);i!==null;){if(a=i[gt])return a;i=cv(i)}return r}i=a,a=i.parentNode}return null}function Li(i){if(i=i[gt]||i[ci]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Nr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Zn(i){var r=i[qa];return r||(r=i[qa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(i){i[Vi]=!0}var Ao=new Set,Es={};function ln(i,r){di(i,r),di(i+"Capture",r)}function di(i,r){for(Es[i]=r,i=0;i<r.length;i++)Ao.add(r[i])}var hd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ba={},Fa={};function Ru(i){return To.call(Fa,i)?!0:To.call(Ba,i)?!1:hd.test(i)?Fa[i]=!0:(Ba[i]=!0,!1)}function Ss(i,r,a){if(Ru(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function As(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Un(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pd(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Co(i){if(!i._valueTracker){var r=wu(i)?"checked":"value";i._valueTracker=pd(i,r,""+i[r])}}function Ga(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=wu(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Io(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Oi=/[\n"\\]/g;function yt(i){return i.replace(Oi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cs(i,r,a,u,y,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Ro(i,A,un(r)):a!=null?Ro(i,A,un(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+un(I):i.removeAttribute("name")}function xr(i,r,a,u,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Co(i);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Co(i)}function Ro(i,r,a){r==="number"&&Io(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function He(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Mr(i,r,a){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+un(a):""}function Is(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ot(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=un(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Co(i)}function Ln(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function za(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||md.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function bu(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&za(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&za(i,_,r[_])}function Ha(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(i){return yd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ut(){}var wo=null;function bo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qi=null,Cn=null;function Nu(i){var r=Li(i);if(r&&(i=r.stateNode)){var a=i[Ht]||null;e:switch(i=r.stateNode,r.type){case"input":if(Cs(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Ht]||null;if(!y)throw Error(s(90));Cs(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Ga(u)}break e;case"textarea":Mr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&He(i,!!a.multiple,r,!1)}}}var Ja=!1;function xu(i,r,a){if(Ja)return i(r,a);Ja=!0;try{var u=i(r);return u}finally{if(Ja=!1,(qi!==null||Cn!==null)&&(Rc(),qi&&(r=qi,i=Cn,Cn=qi=null,Nu(r),i)))for(r=0;r<i.length;r++)Nu(i[r])}}function pn(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Ht]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(jn)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Ya=!1}var In=null,No=null,mi=null;function Rs(){if(mi)return mi;var i,r=No,a=r.length,u,y="value"in In?In.value:In.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(u=1;u<=A&&r[a-u]===y[_-u];u++);return mi=y.slice(i,1<u?1-u:void 0)}function Dr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ws(){return!0}function lt(){return!1}function jt(i){function r(a,u,y,_,A){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ws:lt,this.isPropagationStopped=lt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),r}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=jt(Bi),bs=E({},Bi,{view:0,detail:0}),Mu=jt(bs),Ns,xo,cn,kr=E({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cn&&(cn&&i.type==="mousemove"?(Ns=i.screenX-cn.screenX,xo=i.screenY-cn.screenY):xo=Ns=0,cn=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:xo}}),Du=jt(kr),Vr=E({},kr,{dataTransfer:0}),Pu=jt(Vr),Ka=E({},bs,{relatedTarget:0}),xs=jt(Ka),ku=E({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Mo=jt(ku),_d=E({},Bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vu=jt(_d),Ur=E({},Bi,{data:0}),$a=jt(Ur),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Xa[i])?!!r[i]:!1}function Ms(){return Lu}var Ou=E({},bs,{key:function(i){if(i.key){var r=Uu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Dr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Qa[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?Dr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qu=jt(Ou),Fi=E({},kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wa=jt(Fi),Bu=E({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),Fu=jt(Bu),Gu=E({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Do=jt(Gu),fn=E({},kr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),zu=jt(fn),Hu=E({},Bi,{newState:0,oldState:0}),Ds=jt(Hu),h=[9,13,27,32],T=jn&&"CompositionEvent"in window,C=null;jn&&"documentMode"in document&&(C=document.documentMode);var R=jn&&"TextEvent"in window&&!C,z=jn&&(!T||C&&8<C&&11>=C),W=" ",le=!1;function Qe(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ct(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var De=!1;function Lt(i,r){switch(i){case"compositionend":return Ct(r);case"keypress":return r.which!==32?null:(le=!0,W);case"textInput":return i=r.data,i===W&&le?null:i;default:return null}}function Ot(i,r){if(De)return i==="compositionend"||!T&&Qe(i,r)?(i=Rs(),mi=No=In=null,De=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Ps[i.type]:r==="textarea"}function Lr(i,r,a,u){qi?Cn?Cn.push(u):Cn=[u]:qi=u,r=Pc(r,"onChange"),0<r.length&&(a=new Pr("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Gi=null,Za=null;function HC(i){X_(i,0)}function Ju(i){var r=Nr(i);if(Ga(r))return i}function mg(i,r){if(i==="change")return r}var gg=!1;if(jn){var vd;if(jn){var Td="oninput"in document;if(!Td){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Td=typeof yg.oninput=="function"}vd=Td}else vd=!1;gg=vd&&(!document.documentMode||9<document.documentMode)}function _g(){Gi&&(Gi.detachEvent("onpropertychange",vg),Za=Gi=null)}function vg(i){if(i.propertyName==="value"&&Ju(Za)){var r=[];Lr(r,Za,i,bo(i)),xu(HC,r)}}function JC(i,r,a){i==="focusin"?(_g(),Gi=r,Za=a,Gi.attachEvent("onpropertychange",vg)):i==="focusout"&&_g()}function YC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(Za)}function KC(i,r){if(i==="click")return Ju(r)}function $C(i,r){if(i==="input"||i==="change")return Ju(r)}function QC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Rn=typeof Object.is=="function"?Object.is:QC;function ja(i,r){if(Rn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!To.call(r,y)||!Rn(i[y],r[y]))return!1}return!0}function Tg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Eg(i,r){var a=Tg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function Sg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Sg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ag(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Io(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Io(i.document)}return r}function Ed(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var XC=jn&&"documentMode"in document&&11>=document.documentMode,Po=null,Sd=null,el=null,Ad=!1;function Cg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ad||Po==null||Po!==Io(u)||(u=Po,"selectionStart"in u&&Ed(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),el&&ja(el,u)||(el=u,u=Pc(Sd,"onSelect"),0<u.length&&(r=new Pr("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=Po)))}function Or(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var ko={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},Cd={},Ig={};jn&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function qr(i){if(Cd[i])return Cd[i];if(!ko[i])return i;var r=ko[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ig)return Cd[i]=r[a];return i}var Rg=qr("animationend"),wg=qr("animationiteration"),bg=qr("animationstart"),WC=qr("transitionrun"),ZC=qr("transitionstart"),jC=qr("transitioncancel"),Ng=qr("transitionend"),xg=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ei(i,r){xg.set(i,r),ln(r,[i])}var Yu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],Vo=0,Rd=0;function Ku(){for(var i=Vo,r=Rd=Vo=0;r<i;){var a=On[r];On[r++]=null;var u=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,u!==null&&y!==null){var A=u.pending;A===null?y.next=y:(y.next=A.next,A.next=y),u.pending=y}_!==0&&Mg(a,y,_)}}function $u(i,r,a,u){On[Vo++]=i,On[Vo++]=r,On[Vo++]=a,On[Vo++]=u,Rd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function wd(i,r,a,u){return $u(i,r,a,u),Qu(i)}function Br(i,r){return $u(i,null,null,r),Qu(i)}function Mg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-an(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function Qu(i){if(50<Sl)throw Sl=0,Uh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Uo={};function eI(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(i,r,a,u){return new eI(i,r,a,u)}function bd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zi(i,r){var a=i.alternate;return a===null?(a=wn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Dg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Xu(i,r,a,u,y,_){var A=0;if(u=i,typeof i=="function")bd(i)&&(A=1);else if(typeof i=="string")A=rR(i,a,ce.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=wn(31,a,r,y),i.elementType=N,i.lanes=_,i;case G:return Fr(a.children,y,_,r);case H:A=8,y|=24;break;case ee:return i=wn(12,a,r,y|2),i.elementType=ee,i.lanes=_,i;case fe:return i=wn(13,a,r,y),i.elementType=fe,i.lanes=_,i;case ue:return i=wn(19,a,r,y),i.elementType=ue,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case $:A=9;break e;case re:A=11;break e;case M:A=14;break e;case w:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=wn(A,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Fr(i,r,a,u){return i=wn(7,i,u,r),i.lanes=a,i}function Nd(i,r,a){return i=wn(6,i,null,r),i.lanes=a,i}function Pg(i){var r=wn(18,null,null,0);return r.stateNode=i,r}function xd(i,r,a){return r=wn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var kg=new WeakMap;function qn(i,r){if(typeof i=="object"&&i!==null){var a=kg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Tu(r)},kg.set(i,r),r)}return{value:i,source:r,stack:Tu(r)}}var Lo=[],Oo=0,Wu=null,tl=0,Bn=[],Fn=0,ks=null,gi=1,yi="";function Hi(i,r){Lo[Oo++]=tl,Lo[Oo++]=Wu,Wu=i,tl=r}function Vg(i,r,a){Bn[Fn++]=gi,Bn[Fn++]=yi,Bn[Fn++]=ks,ks=i;var u=gi;i=yi;var y=32-an(u)-1;u&=~(1<<y),a+=1;var _=32-an(r)+y;if(30<_){var A=y-y%5;_=(u&(1<<A)-1).toString(32),u>>=A,y-=A,gi=1<<32-an(r)+y|a<<y|u,yi=_+i}else gi=1<<_|a<<y|u,yi=i}function Md(i){i.return!==null&&(Hi(i,1),Vg(i,1,0))}function Dd(i){for(;i===Wu;)Wu=Lo[--Oo],Lo[Oo]=null,tl=Lo[--Oo],Lo[Oo]=null;for(;i===ks;)ks=Bn[--Fn],Bn[Fn]=null,yi=Bn[--Fn],Bn[Fn]=null,gi=Bn[--Fn],Bn[Fn]=null}function Ug(i,r){Bn[Fn++]=gi,Bn[Fn++]=yi,Bn[Fn++]=ks,gi=r.id,yi=r.overflow,ks=i}var Jt=null,ut=null,Be=!1,Vs=null,Gn=!1,Pd=Error(s(519));function Us(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(qn(r,i)),Pd}function Lg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[gt]=i,r[Ht]=u,a){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<Cl.length;a++)Ve(Cl[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),xr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),Is(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||ev(r.textContent,a)?(u.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),u.onScroll!=null&&Ve("scroll",r),u.onScrollEnd!=null&&Ve("scrollend",r),u.onClick!=null&&(r.onclick=Ut),r=!0):r=!1,r||Us(i,!0)}function Og(i){for(Jt=i.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function qo(i){if(i!==Jt)return!1;if(!Be)return Og(i),Be=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Wh(i.type,i.memoizedProps)),a=!a),a&&ut&&Us(i),Og(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=uv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=uv(i)}else r===27?(r=ut,Xs(i.type)?(i=np,np=null,ut=i):ut=r):ut=Jt?Hn(i.stateNode.nextSibling):null;return!0}function Gr(){ut=Jt=null,Be=!1}function kd(){var i=Vs;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),Vs=null),i}function nl(i){Vs===null?Vs=[i]:Vs.push(i)}var Vd=P(null),zr=null,Ji=null;function Ls(i,r,a){ie(Vd,r._currentValue),r._currentValue=a}function Yi(i){i._currentValue=Vd.current,Q(Vd)}function Ud(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Ld(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var V=0;V<r.length;V++)if(I.context===r[V]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Ud(_.return,a,i),u||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Ud(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Bo(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var I=y.type;Rn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Me.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Nl):i=[Nl])}y=y.return}i!==null&&Ld(r,i,a,u),r.flags|=262144}function Zu(i){for(i=i.firstContext;i!==null;){if(!Rn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Hr(i){zr=i,Ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return qg(zr,i)}function ju(i,r){return zr===null&&Hr(i),qg(i,r)}function qg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ji===null){if(i===null)throw Error(s(308));Ji=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Ji=Ji.next=r;return a}var tI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},nI=n.unstable_scheduleCallback,iI=n.unstable_NormalPriority,It={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new tI,data:new Map,refCount:0}}function il(i){i.refCount--,i.refCount===0&&nI(iI,function(){i.controller.abort()})}var sl=null,qd=0,Fo=0,Go=null;function sI(i,r){if(sl===null){var a=sl=[];qd=0,Fo=Gh(),Go={status:"pending",value:void 0,then:function(u){a.push(u)}}}return qd++,r.then(Bg,Bg),r}function Bg(){if(--qd===0&&sl!==null){Go!==null&&(Go.status="fulfilled");var i=sl;sl=null,Fo=0,Go=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function rI(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Fg=F.S;F.S=function(i,r){C_=Gt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&sI(i,r),Fg!==null&&Fg(i,r)};var Jr=P(null);function Bd(){var i=Jr.current;return i!==null?i:it.pooledCache}function ec(i,r){r===null?ie(Jr,Jr.current):ie(Jr,r.pool)}function Gg(){var i=Bd();return i===null?null:{parent:It._currentValue,pool:i}}var zo=Error(s(460)),Fd=Error(s(474)),tc=Error(s(542)),nc={then:function(){}};function zg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Hg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Ut,Ut),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Yg(i),i;default:if(typeof r.status=="string")r.then(Ut,Ut);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Yg(i),i}throw Kr=r,zo}}function Yr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Kr=a,zo):a}}var Kr=null;function Jg(){if(Kr===null)throw Error(s(459));var i=Kr;return Kr=null,i}function Yg(i){if(i===zo||i===tc)throw Error(s(483))}var Ho=null,rl=0;function ic(i){var r=rl;return rl+=1,Ho===null&&(Ho=[]),Hg(Ho,i,r)}function ol(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function sc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Kg(i){function r(B,L){if(i){var J=B.deletions;J===null?(B.deletions=[L],B.flags|=16):J.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function u(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=zi(B,L),B.index=0,B.sibling=null,B}function _(B,L,J){return B.index=J,i?(J=B.alternate,J!==null?(J=J.index,J<L?(B.flags|=67108866,L):J):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function A(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,J,te){return L===null||L.tag!==6?(L=Nd(J,B.mode,te),L.return=B,L):(L=y(L,J),L.return=B,L)}function V(B,L,J,te){var ve=J.type;return ve===G?j(B,L,J.props.children,te,J.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Yr(ve)===L.type)?(L=y(L,J.props),ol(L,J),L.return=B,L):(L=Xu(J.type,J.key,J.props,null,B.mode,te),ol(L,J),L.return=B,L)}function Y(B,L,J,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==J.containerInfo||L.stateNode.implementation!==J.implementation?(L=xd(J,B.mode,te),L.return=B,L):(L=y(L,J.children||[]),L.return=B,L)}function j(B,L,J,te,ve){return L===null||L.tag!==7?(L=Fr(J,B.mode,te,ve),L.return=B,L):(L=y(L,J),L.return=B,L)}function ne(B,L,J){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Nd(""+L,B.mode,J),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return J=Xu(L.type,L.key,L.props,null,B.mode,J),ol(J,L),J.return=B,J;case q:return L=xd(L,B.mode,J),L.return=B,L;case w:return L=Yr(L),ne(B,L,J)}if(ot(L)||O(L))return L=Fr(L,B.mode,J,null),L.return=B,L;if(typeof L.then=="function")return ne(B,ic(L),J);if(L.$$typeof===Z)return ne(B,ju(B,L),J);sc(B,L)}return null}function K(B,L,J,te){var ve=L!==null?L.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ve!==null?null:I(B,L,""+J,te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===ve?V(B,L,J,te):null;case q:return J.key===ve?Y(B,L,J,te):null;case w:return J=Yr(J),K(B,L,J,te)}if(ot(J)||O(J))return ve!==null?null:j(B,L,J,te,null);if(typeof J.then=="function")return K(B,L,ic(J),te);if(J.$$typeof===Z)return K(B,L,ju(B,J),te);sc(B,J)}return null}function X(B,L,J,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(J)||null,I(L,B,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return B=B.get(te.key===null?J:te.key)||null,V(L,B,te,ve);case q:return B=B.get(te.key===null?J:te.key)||null,Y(L,B,te,ve);case w:return te=Yr(te),X(B,L,J,te,ve)}if(ot(te)||O(te))return B=B.get(J)||null,j(L,B,te,ve,null);if(typeof te.then=="function")return X(B,L,J,ic(te),ve);if(te.$$typeof===Z)return X(B,L,J,ju(L,te),ve);sc(L,te)}return null}function he(B,L,J,te){for(var ve=null,Je=null,me=L,xe=L=0,Le=null;me!==null&&xe<J.length;xe++){me.index>xe?(Le=me,me=null):Le=me.sibling;var Ye=K(B,me,J[xe],te);if(Ye===null){me===null&&(me=Le);break}i&&me&&Ye.alternate===null&&r(B,me),L=_(Ye,L,xe),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye,me=Le}if(xe===J.length)return a(B,me),Be&&Hi(B,xe),ve;if(me===null){for(;xe<J.length;xe++)me=ne(B,J[xe],te),me!==null&&(L=_(me,L,xe),Je===null?ve=me:Je.sibling=me,Je=me);return Be&&Hi(B,xe),ve}for(me=u(me);xe<J.length;xe++)Le=X(me,B,xe,J[xe],te),Le!==null&&(i&&Le.alternate!==null&&me.delete(Le.key===null?xe:Le.key),L=_(Le,L,xe),Je===null?ve=Le:Je.sibling=Le,Je=Le);return i&&me.forEach(function(tr){return r(B,tr)}),Be&&Hi(B,xe),ve}function Ee(B,L,J,te){if(J==null)throw Error(s(151));for(var ve=null,Je=null,me=L,xe=L=0,Le=null,Ye=J.next();me!==null&&!Ye.done;xe++,Ye=J.next()){me.index>xe?(Le=me,me=null):Le=me.sibling;var tr=K(B,me,Ye.value,te);if(tr===null){me===null&&(me=Le);break}i&&me&&tr.alternate===null&&r(B,me),L=_(tr,L,xe),Je===null?ve=tr:Je.sibling=tr,Je=tr,me=Le}if(Ye.done)return a(B,me),Be&&Hi(B,xe),ve;if(me===null){for(;!Ye.done;xe++,Ye=J.next())Ye=ne(B,Ye.value,te),Ye!==null&&(L=_(Ye,L,xe),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye);return Be&&Hi(B,xe),ve}for(me=u(me);!Ye.done;xe++,Ye=J.next())Ye=X(me,B,xe,Ye.value,te),Ye!==null&&(i&&Ye.alternate!==null&&me.delete(Ye.key===null?xe:Ye.key),L=_(Ye,L,xe),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye);return i&&me.forEach(function(gR){return r(B,gR)}),Be&&Hi(B,xe),ve}function nt(B,L,J,te){if(typeof J=="object"&&J!==null&&J.type===G&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var ve=J.key;L!==null;){if(L.key===ve){if(ve=J.type,ve===G){if(L.tag===7){a(B,L.sibling),te=y(L,J.props.children),te.return=B,B=te;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Yr(ve)===L.type){a(B,L.sibling),te=y(L,J.props),ol(te,J),te.return=B,B=te;break e}a(B,L);break}else r(B,L);L=L.sibling}J.type===G?(te=Fr(J.props.children,B.mode,te,J.key),te.return=B,B=te):(te=Xu(J.type,J.key,J.props,null,B.mode,te),ol(te,J),te.return=B,B=te)}return A(B);case q:e:{for(ve=J.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===J.containerInfo&&L.stateNode.implementation===J.implementation){a(B,L.sibling),te=y(L,J.children||[]),te.return=B,B=te;break e}else{a(B,L);break}else r(B,L);L=L.sibling}te=xd(J,B.mode,te),te.return=B,B=te}return A(B);case w:return J=Yr(J),nt(B,L,J,te)}if(ot(J))return he(B,L,J,te);if(O(J)){if(ve=O(J),typeof ve!="function")throw Error(s(150));return J=ve.call(J),Ee(B,L,J,te)}if(typeof J.then=="function")return nt(B,L,ic(J),te);if(J.$$typeof===Z)return nt(B,L,ju(B,J),te);sc(B,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,L!==null&&L.tag===6?(a(B,L.sibling),te=y(L,J),te.return=B,B=te):(a(B,L),te=Nd(J,B.mode,te),te.return=B,B=te),A(B)):a(B,L)}return function(B,L,J,te){try{rl=0;var ve=nt(B,L,J,te);return Ho=null,ve}catch(me){if(me===zo||me===tc)throw me;var Je=wn(29,me,null,B.mode);return Je.lanes=te,Je.return=B,Je}finally{}}}var $r=Kg(!0),$g=Kg(!1),Os=!1;function Gd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Bs(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=Qu(i),Mg(i,null,a),r}return $u(i,u,r,a),Qu(i)}function al(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,_s(i,a)}}function Hd(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Jd=!1;function ll(){if(Jd){var i=Go;if(i!==null)throw i}}function ul(i,r,a,u){Jd=!1;var y=i.updateQueue;Os=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var V=I,Y=V.next;V.next=null,A===null?_=Y:A.next=Y,A=V;var j=i.alternate;j!==null&&(j=j.updateQueue,I=j.lastBaseUpdate,I!==A&&(I===null?j.firstBaseUpdate=Y:I.next=Y,j.lastBaseUpdate=V))}if(_!==null){var ne=y.baseState;A=0,j=Y=V=null,I=_;do{var K=I.lane&-536870913,X=K!==I.lane;if(X?(Ue&K)===K:(u&K)===K){K!==0&&K===Fo&&(Jd=!0),j!==null&&(j=j.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var he=i,Ee=I;K=r;var nt=a;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){ne=he.call(nt,ne,K);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,K=typeof he=="function"?he.call(nt,ne,K):he,K==null)break e;ne=E({},ne,K);break e;case 2:Os=!0}}K=I.callback,K!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[K]:X.push(K))}else X={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?(Y=j=X,V=ne):j=j.next=X,A|=K;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;X=I,I=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);j===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),Js|=A,i.lanes=A,i.memoizedState=ne}}function Qg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Xg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Qg(a[i],r)}var Jo=P(null),rc=P(0);function Wg(i,r){i=ts,ie(rc,i),ie(Jo,r),ts=i|r.baseLanes}function Yd(){ie(rc,ts),ie(Jo,Jo.current)}function Kd(){ts=rc.current,Q(Jo),Q(rc)}var bn=P(null),zn=null;function Fs(i){var r=i.alternate;ie(Et,Et.current&1),ie(bn,i),zn===null&&(r===null||Jo.current!==null||r.memoizedState!==null)&&(zn=i)}function $d(i){ie(Et,Et.current),ie(bn,i),zn===null&&(zn=i)}function Zg(i){i.tag===22?(ie(Et,Et.current),ie(bn,i),zn===null&&(zn=i)):Gs()}function Gs(){ie(Et,Et.current),ie(bn,bn.current)}function Nn(i){Q(bn),zn===i&&(zn=null),Q(Et)}var Et=P(0);function oc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ep(a)||tp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,be=null,et=null,Rt=null,ac=!1,Yo=!1,Qr=!1,lc=0,cl=0,Ko=null,oI=0;function _t(){throw Error(s(321))}function Qd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Rn(i[a],r[a]))return!1;return!0}function Xd(i,r,a,u,y,_){return Ki=_,be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=i===null||i.memoizedState===null?Vy:fh,Qr=!1,_=a(u,y),Qr=!1,Yo&&(_=ey(r,a,u,y)),jg(i),_}function jg(i){F.H=hl;var r=et!==null&&et.next!==null;if(Ki=0,Rt=et=be=null,ac=!1,cl=0,Ko=null,r)throw Error(s(300));i===null||wt||(i=i.dependencies,i!==null&&Zu(i)&&(wt=!0))}function ey(i,r,a,u){be=i;var y=0;do{if(Yo&&(Ko=null),cl=0,Yo=!1,25<=y)throw Error(s(301));if(y+=1,Rt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=Uy,_=r(a,u)}while(Yo);return _}function aI(){var i=F.H,r=i.useState()[0];return r=typeof r.then=="function"?fl(r):r,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(be.flags|=1024),r}function Wd(){var i=lc!==0;return lc=0,i}function Zd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function jd(i){if(ac){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ac=!1}Ki=0,Rt=et=be=null,Yo=!1,cl=lc=0,Ko=null}function dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?be.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function St(){if(et===null){var i=be.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var r=Rt===null?be.memoizedState:Rt.next;if(r!==null)Rt=r,et=i;else{if(i===null)throw be.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?be.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(i){var r=cl;return cl+=1,Ko===null&&(Ko=[]),i=Hg(Ko,i,r),r=be,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?Vy:fh),i}function cc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return fl(i);if(i.$$typeof===Z)return Yt(i)}throw Error(s(438,String(i)))}function eh(i){var r=null,a=be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=uc(),be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=D;return r.index++,a}function $i(i,r){return typeof r=="function"?r(i):r}function fc(i){var r=St();return th(r,et,i)}function th(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=A=null,V=null,Y=r,j=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ue&ne)===ne:(Ki&ne)===ne){var K=Y.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Fo&&(j=!0);else if((Ki&K)===K){Y=Y.next,K===Fo&&(j=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(I=V=ne,A=_):V=V.next=ne,be.lanes|=K,Js|=K;ne=Y.action,Qr&&a(_,ne),_=Y.hasEagerState?Y.eagerState:a(_,ne)}else K={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(I=V=K,A=_):V=V.next=K,be.lanes|=ne,Js|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(V===null?A=_:V.next=I,!Rn(_,i.memoizedState)&&(wt=!0,j&&(a=Go,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=V,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function nh(i){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);Rn(_,r.memoizedState)||(wt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function ty(i,r,a){var u=be,y=St(),_=Be;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var A=!Rn((et||y).memoizedState,a);if(A&&(y.memoizedState=a,wt=!0),y=y.queue,rh(sy.bind(null,u,y,i),[i]),y.getSnapshot!==r||A||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,$o(9,{destroy:void 0},iy.bind(null,u,y,a,r),null),it===null)throw Error(s(349));_||(Ki&127)!==0||ny(u,r,a)}return a}function ny(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=be.updateQueue,r===null?(r=uc(),be.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function iy(i,r,a,u){r.value=a,r.getSnapshot=u,ry(r)&&oy(i)}function sy(i,r,a){return a(function(){ry(r)&&oy(i)})}function ry(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Rn(i,a)}catch{return!0}}function oy(i){var r=Br(i,2);r!==null&&Tn(r,i,2)}function ih(i){var r=dn();if(typeof i=="function"){var a=i;if(i=a(),Qr){kn(!0);try{a()}finally{kn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:i},r}function ay(i,r,a,u){return i.baseState=a,th(i,et,typeof u=="function"?u:$i)}function lI(i,r,a,u,y){if(pc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};F.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,ly(r,_)):(_.next=a.next,r.pending=a.next=_)}}function ly(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=F.T,A={};F.T=A;try{var I=a(y,u),V=F.S;V!==null&&V(A,I),uy(i,r,I)}catch(Y){sh(i,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),F.T=_}}else try{_=a(y,u),uy(i,r,_)}catch(Y){sh(i,r,Y)}}function uy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){cy(i,r,u)},function(u){return sh(i,r,u)}):cy(i,r,a)}function cy(i,r,a){r.status="fulfilled",r.value=a,fy(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ly(i,a)))}function sh(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,fy(r),r=r.next;while(r!==u)}i.action=null}function fy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function dy(i,r){return r}function hy(i,r){if(Be){var a=it.formState;if(a!==null){e:{var u=be;if(Be){if(ut){t:{for(var y=ut,_=Gn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ut=Hn(y.nextSibling),u=y.data==="F!";break e}}Us(u)}u=!1}u&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=u,a=Dy.bind(null,be,u),u.dispatch=a,u=ih(!1),_=ch.bind(null,be,!1,u.queue),u=dn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=lI.bind(null,be,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function py(i){var r=St();return my(r,et,i)}function my(i,r,a){if(r=th(i,r,dy)[0],i=fc($i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=fl(r)}catch(A){throw A===zo?tc:A}else u=r;r=St();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(be.flags|=2048,$o(9,{destroy:void 0},uI.bind(null,y,a),null)),[u,_,i]}function uI(i,r){i.action=r}function gy(i){var r=St(),a=et;if(a!==null)return my(r,a,i);St(),r=r.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function $o(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=be.updateQueue,r===null&&(r=uc(),be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function yy(){return St().memoizedState}function dc(i,r,a,u){var y=dn();be.flags|=i,y.memoizedState=$o(1|r,{destroy:void 0},a,u===void 0?null:u)}function hc(i,r,a,u){var y=St();u=u===void 0?null:u;var _=y.memoizedState.inst;et!==null&&u!==null&&Qd(u,et.memoizedState.deps)?y.memoizedState=$o(r,_,a,u):(be.flags|=i,y.memoizedState=$o(1|r,_,a,u))}function _y(i,r){dc(8390656,8,i,r)}function rh(i,r){hc(2048,8,i,r)}function cI(i){be.flags|=4;var r=be.updateQueue;if(r===null)r=uc(),be.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function vy(i){var r=St().memoizedState;return cI({ref:r,nextImpl:i}),function(){if(($e&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ty(i,r){return hc(4,2,i,r)}function Ey(i,r){return hc(4,4,i,r)}function Sy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ay(i,r,a){a=a!=null?a.concat([i]):null,hc(4,4,Sy.bind(null,r,i),a)}function oh(){}function Cy(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Qd(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function Iy(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Qd(r,u[1]))return u[0];if(u=i(),Qr){kn(!0);try{i()}finally{kn(!1)}}return a.memoizedState=[u,r],u}function ah(i,r,a){return a===void 0||(Ki&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=R_(),be.lanes|=i,Js|=i,a)}function Ry(i,r,a,u){return Rn(a,r)?a:Jo.current!==null?(i=ah(i,a,u),Rn(i,r)||(wt=!0),i):(Ki&42)===0||(Ki&1073741824)!==0&&(Ue&261930)===0?(wt=!0,i.memoizedState=a):(i=R_(),be.lanes|=i,Js|=i,r)}function wy(i,r,a,u,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=F.T,I={};F.T=I,ch(i,!1,r,a);try{var V=y(),Y=F.S;if(Y!==null&&Y(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var j=rI(V,u);dl(i,r,j,Dn(i))}else dl(i,r,u,Dn(i))}catch(ne){dl(i,r,{then:function(){},status:"rejected",reason:ne},Dn())}finally{ae.p=_,A!==null&&I.types!==null&&(A.types=I.types),F.T=A}}function fI(){}function lh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=by(i).queue;wy(i,y,r,ge,a===null?fI:function(){return Ny(i),a(u)})}function by(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Ny(i){var r=by(i);r.next===null&&(r=i.alternate.memoizedState),dl(i,r.next.queue,{},Dn())}function uh(){return Yt(Nl)}function xy(){return St().memoizedState}function My(){return St().memoizedState}function dI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Dn();i=qs(a);var u=Bs(r,i,a);u!==null&&(Tn(u,r,a),al(u,r,a)),r={cache:Od()},i.payload=r;return}r=r.return}}function hI(i,r,a){var u=Dn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(i)?Py(r,a):(a=wd(i,r,a,u),a!==null&&(Tn(a,i,u),ky(a,r,u)))}function Dy(i,r,a){var u=Dn();dl(i,r,a,u)}function dl(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(i))Py(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,I=_(A,a);if(y.hasEagerState=!0,y.eagerState=I,Rn(I,A))return $u(i,r,y,0),it===null&&Ku(),!1}catch{}finally{}if(a=wd(i,r,y,u),a!==null)return Tn(a,i,u),ky(a,r,u),!0}return!1}function ch(i,r,a,u){if(u={lane:2,revertLane:Gh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},pc(i)){if(r)throw Error(s(479))}else r=wd(i,a,u,2),r!==null&&Tn(r,i,2)}function pc(i){var r=i.alternate;return i===be||r!==null&&r===be}function Py(i,r){Yo=ac=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function ky(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,_s(i,a)}}var hl={readContext:Yt,use:cc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};hl.useEffectEvent=_t;var Vy={readContext:Yt,use:cc,useCallback:function(i,r){return dn().memoizedState=[i,r===void 0?null:r],i},useContext:Yt,useEffect:_y,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,dc(4194308,4,Sy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return dc(4194308,4,i,r)},useInsertionEffect:function(i,r){dc(4,2,i,r)},useMemo:function(i,r){var a=dn();r=r===void 0?null:r;var u=i();if(Qr){kn(!0);try{i()}finally{kn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=dn();if(a!==void 0){var y=a(r);if(Qr){kn(!0);try{a(r)}finally{kn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=hI.bind(null,be,i),[u.memoizedState,i]},useRef:function(i){var r=dn();return i={current:i},r.memoizedState=i},useState:function(i){i=ih(i);var r=i.queue,a=Dy.bind(null,be,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:oh,useDeferredValue:function(i,r){var a=dn();return ah(a,i,r)},useTransition:function(){var i=ih(!1);return i=wy.bind(null,be,i.queue,!0,!1),dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=be,y=dn();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),it===null)throw Error(s(349));(Ue&127)!==0||ny(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,_y(sy.bind(null,u,_,i),[i]),u.flags|=2048,$o(9,{destroy:void 0},iy.bind(null,u,_,a,r),null),a},useId:function(){var i=dn(),r=it.identifierPrefix;if(Be){var a=yi,u=gi;a=(u&~(1<<32-an(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=lc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=oI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:uh,useFormState:hy,useActionState:hy,useOptimistic:function(i){var r=dn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ch.bind(null,be,!0,a),a.dispatch=r,[i,r]},useMemoCache:eh,useCacheRefresh:function(){return dn().memoizedState=dI.bind(null,be)},useEffectEvent:function(i){var r=dn(),a={impl:i};return r.memoizedState=a,function(){if(($e&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},fh={readContext:Yt,use:cc,useCallback:Cy,useContext:Yt,useEffect:rh,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Ey,useMemo:Iy,useReducer:fc,useRef:yy,useState:function(){return fc($i)},useDebugValue:oh,useDeferredValue:function(i,r){var a=St();return Ry(a,et.memoizedState,i,r)},useTransition:function(){var i=fc($i)[0],r=St().memoizedState;return[typeof i=="boolean"?i:fl(i),r]},useSyncExternalStore:ty,useId:xy,useHostTransitionStatus:uh,useFormState:py,useActionState:py,useOptimistic:function(i,r){var a=St();return ay(a,et,i,r)},useMemoCache:eh,useCacheRefresh:My};fh.useEffectEvent=vy;var Uy={readContext:Yt,use:cc,useCallback:Cy,useContext:Yt,useEffect:rh,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:Ey,useMemo:Iy,useReducer:nh,useRef:yy,useState:function(){return nh($i)},useDebugValue:oh,useDeferredValue:function(i,r){var a=St();return et===null?ah(a,i,r):Ry(a,et.memoizedState,i,r)},useTransition:function(){var i=nh($i)[0],r=St().memoizedState;return[typeof i=="boolean"?i:fl(i),r]},useSyncExternalStore:ty,useId:xy,useHostTransitionStatus:uh,useFormState:gy,useActionState:gy,useOptimistic:function(i,r){var a=St();return et!==null?ay(a,et,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:eh,useCacheRefresh:My};Uy.useEffectEvent=vy;function dh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var hh={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Dn(),y=qs(u);y.payload=r,a!=null&&(y.callback=a),r=Bs(i,y,u),r!==null&&(Tn(r,i,u),al(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Dn(),y=qs(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Bs(i,y,u),r!==null&&(Tn(r,i,u),al(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Dn(),u=qs(a);u.tag=2,r!=null&&(u.callback=r),r=Bs(i,u,a),r!==null&&(Tn(r,i,a),al(r,i,a))}};function Ly(i,r,a,u,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):r.prototype&&r.prototype.isPureReactComponent?!ja(a,u)||!ja(y,_):!0}function Oy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&hh.enqueueReplaceState(r,r.state,null)}function Xr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function qy(i){Yu(i)}function By(i){console.error(i)}function Fy(i){Yu(i)}function mc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Gy(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ph(i,r,a){return a=qs(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(i,r)},a}function zy(i){return i=qs(i),i.tag=3,i}function Hy(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){Gy(r,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Gy(r,a,u),typeof y!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function pI(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Bo(r,a,y,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return zn===null?wc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===nc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),qh(i,u,y)),!1;case 22:return a.flags|=65536,u===nc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),qh(i,u,y)),!1}throw Error(s(435,a.tag))}return qh(i,u,y),wc(),!1}if(Be)return r=bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Pd&&(i=Error(s(422),{cause:u}),nl(qn(i,a)))):(u!==Pd&&(r=Error(s(423),{cause:u}),nl(qn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=qn(u,a),y=ph(i.stateNode,u,y),Hd(i,y),vt!==4&&(vt=2)),!1;var _=Error(s(520),{cause:u});if(_=qn(_,a),El===null?El=[_]:El.push(_),vt!==4&&(vt=2),r===null)return!0;u=qn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=ph(a.stateNode,u,i),Hd(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=zy(y),Hy(y,i,a,u),Hd(a,y),!1}a=a.return}while(a!==null);return!1}var mh=Error(s(461)),wt=!1;function Kt(i,r,a,u){r.child=i===null?$g(r,null,a,u):$r(r,i.child,a,u)}function Jy(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return Hr(r),u=Xd(i,r,a,A,_,y),I=Wd(),i!==null&&!wt?(Zd(i,r,y),Qi(i,r,y)):(Be&&I&&Md(r),r.flags|=1,Kt(i,r,u,y),r.child)}function Yy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!bd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Ky(i,r,_,u,y)):(i=Xu(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Ah(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:ja,a(A,u)&&i.ref===r.ref)return Qi(i,r,y)}return r.flags|=1,i=zi(_,u),i.ref=r.ref,i.return=r,r.child=i}function Ky(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(ja(_,u)&&i.ref===r.ref)if(wt=!1,r.pendingProps=u=_,Ah(i,y))(i.flags&131072)!==0&&(wt=!0);else return r.lanes=i.lanes,Qi(i,r,y)}return gh(i,r,a,u,y)}function $y(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return Qy(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ec(r,_!==null?_.cachePool:null),_!==null?Wg(r,_):Yd(),Zg(r);else return u=r.lanes=536870912,Qy(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(ec(r,_.cachePool),Wg(r,_),Gs(),r.memoizedState=null):(i!==null&&ec(r,null),Yd(),Gs());return Kt(i,r,y,a),r.child}function pl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Qy(i,r,a,u,y){var _=Bd();return _=_===null?null:{parent:It._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&ec(r,null),Yd(),Zg(r),i!==null&&Bo(i,r,u,!0),r.childLanes=y,null}function gc(i,r){return r=_c({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Xy(i,r,a){return $r(r,i.child,null,a),i=gc(r,r.pendingProps),i.flags|=2,Nn(r),r.memoizedState=null,i}function mI(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Be){if(u.mode==="hidden")return i=gc(r,u),r.lanes=536870912,pl(null,i);if($d(r),(i=ut)?(i=lv(i,Gn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ks!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=Pg(i),a.return=r,r.child=a,Jt=r,ut=null)):i=null,i===null)throw Us(r);return r.lanes=536870912,null}return gc(r,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if($d(r),y)if(r.flags&256)r.flags&=-257,r=Xy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(wt||Bo(i,r,a,!1),y=(a&i.childLanes)!==0,wt||y){if(u=it,u!==null&&(A=vs(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Br(i,A),Tn(u,i,A),mh;wc(),r=Xy(i,r,a)}else i=_.treeContext,ut=Hn(A.nextSibling),Jt=r,Be=!0,Vs=null,Gn=!1,i!==null&&Ug(r,i),r=gc(r,u),r.flags|=4096;return r}return i=zi(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function yc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function gh(i,r,a,u,y){return Hr(r),a=Xd(i,r,a,u,void 0,y),u=Wd(),i!==null&&!wt?(Zd(i,r,y),Qi(i,r,y)):(Be&&u&&Md(r),r.flags|=1,Kt(i,r,a,y),r.child)}function Wy(i,r,a,u,y,_){return Hr(r),r.updateQueue=null,a=ey(r,u,a,y),jg(i),u=Wd(),i!==null&&!wt?(Zd(i,r,_),Qi(i,r,_)):(Be&&u&&Md(r),r.flags|=1,Kt(i,r,a,_),r.child)}function Zy(i,r,a,u,y){if(Hr(r),r.stateNode===null){var _=Uo,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=hh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Gd(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):Uo,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(dh(r,a,A,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&hh.enqueueReplaceState(_,_.state,null),ul(r,u,_,y),ll(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,V=Xr(a,I);_.props=V;var Y=_.context,j=a.contextType;A=Uo,typeof j=="object"&&j!==null&&(A=Yt(j));var ne=a.getDerivedStateFromProps;j=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Y!==A)&&Oy(r,_,u,A),Os=!1;var K=r.memoizedState;_.state=K,ul(r,u,_,y),ll(),Y=r.memoizedState,I||K!==Y||Os?(typeof ne=="function"&&(dh(r,a,ne,u),Y=r.memoizedState),(V=Os||Ly(r,a,V,u,K,Y,A))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),_.props=u,_.state=Y,_.context=A,u=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,zd(i,r),A=r.memoizedProps,j=Xr(a,A),_.props=j,ne=r.pendingProps,K=_.context,Y=a.contextType,V=Uo,typeof Y=="object"&&Y!==null&&(V=Yt(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||K!==V)&&Oy(r,_,u,V),Os=!1,K=r.memoizedState,_.state=K,ul(r,u,_,y),ll();var X=r.memoizedState;A!==ne||K!==X||Os||i!==null&&i.dependencies!==null&&Zu(i.dependencies)?(typeof I=="function"&&(dh(r,a,I,u),X=r.memoizedState),(j=Os||Ly(r,a,j,u,K,X,V)||i!==null&&i.dependencies!==null&&Zu(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),_.props=u,_.state=X,_.context=V,u=j):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,yc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=$r(r,i.child,null,y),r.child=$r(r,null,a,y)):Kt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Qi(i,r,y),i}function jy(i,r,a,u){return Gr(),r.flags|=256,Kt(i,r,a,u),r.child}var yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _h(i){return{baseLanes:i,cachePool:Gg()}}function vh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Mn),i}function e_(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(Be){if(y?Fs(r):Gs(),(i=ut)?(i=lv(i,Gn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ks!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},a=Pg(i),a.return=r,r.child=a,Jt=r,ut=null)):i=null,i===null)throw Us(r);return tp(i)?r.lanes=32:r.lanes=536870912,null}var I=u.children;return u=u.fallback,y?(Gs(),y=r.mode,I=_c({mode:"hidden",children:I},y),u=Fr(u,y,a,null),I.return=r,u.return=r,I.sibling=u,r.child=I,u=r.child,u.memoizedState=_h(a),u.childLanes=vh(i,A,a),r.memoizedState=yh,pl(null,u)):(Fs(r),Th(r,I))}var V=i.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(_)r.flags&256?(Fs(r),r.flags&=-257,r=Eh(i,r,a)):r.memoizedState!==null?(Gs(),r.child=i.child,r.flags|=128,r=null):(Gs(),I=u.fallback,y=r.mode,u=_c({mode:"visible",children:u.children},y),I=Fr(I,y,a,null),I.flags|=2,u.return=r,I.return=r,u.sibling=I,r.child=u,$r(r,i.child,null,a),u=r.child,u.memoizedState=_h(a),u.childLanes=vh(i,A,a),r.memoizedState=yh,r=pl(null,u));else if(Fs(r),tp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Y=A.dgst;A=Y,u=Error(s(419)),u.stack="",u.digest=A,nl({value:u,source:null,stack:null}),r=Eh(i,r,a)}else if(wt||Bo(i,r,a,!1),A=(a&i.childLanes)!==0,wt||A){if(A=it,A!==null&&(u=vs(A,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,Br(i,u),Tn(A,i,u),mh;ep(I)||wc(),r=Eh(i,r,a)}else ep(I)?(r.flags|=192,r.child=i.child,r=null):(i=V.treeContext,ut=Hn(I.nextSibling),Jt=r,Be=!0,Vs=null,Gn=!1,i!==null&&Ug(r,i),r=Th(r,u.children),r.flags|=4096);return r}return y?(Gs(),I=u.fallback,y=r.mode,V=i.child,Y=V.sibling,u=zi(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,Y!==null?I=zi(Y,I):(I=Fr(I,y,a,null),I.flags|=2),I.return=r,u.return=r,u.sibling=I,r.child=u,pl(null,u),u=r.child,I=i.child.memoizedState,I===null?I=_h(a):(y=I.cachePool,y!==null?(V=It._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Gg(),I={baseLanes:I.baseLanes|a,cachePool:y}),u.memoizedState=I,u.childLanes=vh(i,A,a),r.memoizedState=yh,pl(i.child,u)):(Fs(r),a=i.child,i=a.sibling,a=zi(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function Th(i,r){return r=_c({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function _c(i,r){return i=wn(22,i,null,r),i.lanes=0,i}function Eh(i,r,a){return $r(r,i.child,null,a),i=Th(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function t_(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Ud(i.return,r,a)}function Sh(i,r,a,u,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function n_(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var A=Et.current,I=(A&2)!==0;if(I?(A=A&1|2,r.flags|=128):A&=1,ie(Et,A),Kt(i,r,u,a),u=Be?tl:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&t_(i,a,r);else if(i.tag===19)t_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&oc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Sh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&oc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Sh(r,!0,a,null,_,u);break;case"together":Sh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Qi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Js|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Bo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=zi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Ah(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Zu(i)))}function gI(i,r,a){switch(r.tag){case 3:We(r,r.stateNode.containerInfo),Ls(r,It,i.memoizedState.cache),Gr();break;case 27:case 5:Pn(r);break;case 4:We(r,r.stateNode.containerInfo);break;case 10:Ls(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,$d(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?e_(i,r,a):(Fs(r),i=Qi(i,r,a),i!==null?i.sibling:null);Fs(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Bo(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return n_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Et,Et.current),u)break;return null;case 22:return r.lanes=0,$y(i,r,a,r.pendingProps);case 24:Ls(r,It,i.memoizedState.cache)}return Qi(i,r,a)}function i_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)wt=!0;else{if(!Ah(i,a)&&(r.flags&128)===0)return wt=!1,gI(i,r,a);wt=(i.flags&131072)!==0}else wt=!1,Be&&(r.flags&1048576)!==0&&Vg(r,tl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Yr(r.elementType),r.type=i,typeof i=="function")bd(i)?(u=Xr(i,u),r.tag=1,r=Zy(null,r,i,u,a)):(r.tag=0,r=gh(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===re){r.tag=11,r=Jy(null,r,i,u,a);break e}else if(y===M){r.tag=14,r=Yy(null,r,i,u,a);break e}}throw r=rt(i)||i,Error(s(306,r,""))}}return r;case 0:return gh(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=Xr(u,r.pendingProps),Zy(i,r,u,y,a);case 3:e:{if(We(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,zd(i,r),ul(r,u,null,a);var A=r.memoizedState;if(u=A.cache,Ls(r,It,u),u!==_.cache&&Ld(r,[It],a,!0),ll(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=jy(i,r,u,a);break e}else if(u!==y){y=qn(Error(s(424)),r),nl(y),r=jy(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Hn(i.firstChild),Jt=r,Be=!0,Vs=null,Gn=!0,a=$g(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gr(),u===y){r=Qi(i,r,a);break e}Kt(i,r,u,a)}r=r.child}return r;case 26:return yc(i,r),i===null?(a=pv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Be||(a=r.type,i=r.pendingProps,u=kc(Ne.current).createElement(a),u[gt]=r,u[Ht]=i,$t(u,a,i),Tt(u),r.stateNode=u):r.memoizedState=pv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Pn(r),i===null&&Be&&(u=r.stateNode=fv(r.type,r.pendingProps,Ne.current),Jt=r,Gn=!0,y=ut,Xs(r.type)?(np=y,ut=Hn(u.firstChild)):ut=y),Kt(i,r,r.pendingProps.children,a),yc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Be&&((y=u=ut)&&(u=YI(u,r.type,r.pendingProps,Gn),u!==null?(r.stateNode=u,Jt=r,ut=Hn(u.firstChild),Gn=!1,y=!0):y=!1),y||Us(r)),Pn(r),y=r.type,_=r.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,Wh(y,_)?u=null:A!==null&&Wh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Xd(i,r,aI,null,null,a),Nl._currentValue=y),yc(i,r),Kt(i,r,u,a),r.child;case 6:return i===null&&Be&&((i=a=ut)&&(a=KI(a,r.pendingProps,Gn),a!==null?(r.stateNode=a,Jt=r,ut=null,i=!0):i=!1),i||Us(r)),null;case 13:return e_(i,r,a);case 4:return We(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=$r(r,null,u,a):Kt(i,r,u,a),r.child;case 11:return Jy(i,r,r.type,r.pendingProps,a);case 7:return Kt(i,r,r.pendingProps,a),r.child;case 8:return Kt(i,r,r.pendingProps.children,a),r.child;case 12:return Kt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Ls(r,r.type,u.value),Kt(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Hr(r),y=Yt(y),u=u(y),r.flags|=1,Kt(i,r,u,a),r.child;case 14:return Yy(i,r,r.type,r.pendingProps,a);case 15:return Ky(i,r,r.type,r.pendingProps,a);case 19:return n_(i,r,a);case 31:return mI(i,r,a);case 22:return $y(i,r,a,r.pendingProps);case 24:return Hr(r),u=Yt(It),i===null?(y=Bd(),y===null&&(y=it,_=Od(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Gd(r),Ls(r,It,y)):((i.lanes&a)!==0&&(zd(i,r),ul(r,null,null,a),ll()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ls(r,It,u)):(u=_.cache,Ls(r,It,u),u!==y.cache&&Ld(r,[It],a,!0))),Kt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xi(i){i.flags|=4}function Ch(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(x_())i.flags|=8192;else throw Kr=nc,Fd}else i.flags&=-16777217}function s_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!vv(r))if(x_())i.flags|=8192;else throw Kr=nc,Fd}function vc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Va():536870912,i.lanes|=r,Zo|=r)}function ml(i,r){if(!Be)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ct(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function yI(i,r,a){var u=r.pendingProps;switch(Dd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Yi(It),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(qo(r)?Xi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kd())),ct(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Xi(r),_!==null?(ct(r),s_(r,_)):(ct(r),Ch(r,y,null,u,a))):_?_!==i.memoizedState?(Xi(r),ct(r),s_(r,_)):(ct(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Xi(r),ct(r),Ch(r,y,i,u,a)),null;case 27:if(hn(r),a=Ne.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Xi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}i=ce.current,qo(r)?Lg(r):(i=fv(y,u,a),r.stateNode=i,Xi(r))}return ct(r),null;case 5:if(hn(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Xi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(_=ce.current,qo(r))Lg(r);else{var A=kc(Ne.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(y,{is:u.is}):A.createElement(y)}}_[gt]=r,_[Ht]=u;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch($t(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xi(r)}}return ct(r),Ch(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Xi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Ne.current,qo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[gt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||ev(i.nodeValue,a)),i||Us(r,!0)}else i=kc(i).createTextNode(u),i[gt]=r,r.stateNode=i}return ct(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=qo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[gt]=r}else Gr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),i=!1}else a=kd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Nn(r),r):(Nn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ct(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=qo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[gt]=r}else Gr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=kd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Nn(r),r):(Nn(r),null)}return Nn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),vc(r,r.updateQueue),ct(r),null);case 4:return at(),i===null&&Yh(r.stateNode.containerInfo),ct(r),null;case 10:return Yi(r.type),ct(r),null;case 19:if(Q(Et),u=r.memoizedState,u===null)return ct(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)ml(u,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=oc(i),_!==null){for(r.flags|=128,ml(u,!1),i=_.updateQueue,r.updateQueue=i,vc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Dg(a,i),a=a.sibling;return ie(Et,Et.current&1|2),Be&&Hi(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Gt()>Cc&&(r.flags|=128,y=!0,ml(u,!1),r.lanes=4194304)}else{if(!y)if(i=oc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,vc(r,i),ml(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Be)return ct(r),null}else 2*Gt()-u.renderingStartTime>Cc&&a!==536870912&&(r.flags|=128,y=!0,ml(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Gt(),i.sibling=null,a=Et.current,ie(Et,y?a&1|2:a&1),Be&&Hi(r,u.treeForkCount),i):(ct(r),null);case 22:case 23:return Nn(r),Kd(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&vc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&Q(Jr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Yi(It),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function _I(i,r){switch(Dd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Yi(It),at(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return hn(r),null;case 31:if(r.memoizedState!==null){if(Nn(r),r.alternate===null)throw Error(s(340));Gr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Nn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Gr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Q(Et),null;case 4:return at(),null;case 10:return Yi(r.type),null;case 22:case 23:return Nn(r),Kd(),i!==null&&Q(Jr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Yi(It),null;case 25:return null;default:return null}}function r_(i,r){switch(Dd(r),r.tag){case 3:Yi(It),at();break;case 26:case 27:case 5:hn(r);break;case 4:at();break;case 31:r.memoizedState!==null&&Nn(r);break;case 13:Nn(r);break;case 19:Q(Et);break;case 10:Yi(r.type);break;case 22:case 23:Nn(r),Kd(),i!==null&&Q(Jr);break;case 24:Yi(It)}}function gl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==y)}}catch(I){je(r,r.return,I)}}function zs(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var V=a,Y=I;try{Y()}catch(j){je(y,V,j)}}}u=u.next}while(u!==_)}}catch(j){je(r,r.return,j)}}function o_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Xg(r,a)}catch(u){je(i,i.return,u)}}}function a_(i,r,a){a.props=Xr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){je(i,r,u)}}function yl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){je(i,r,y)}}function _i(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){je(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){je(i,r,y)}else a.current=null}function l_(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){je(i,i.return,y)}}function Ih(i,r,a){try{var u=i.stateNode;BI(u,i.type,a,r),u[Ht]=r}catch(y){je(i,i.return,y)}}function u_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Xs(i.type)||i.tag===4}function Rh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||u_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Xs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function wh(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ut));else if(u!==4&&(u===27&&Xs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(wh(i,r,a),i=i.sibling;i!==null;)wh(i,r,a),i=i.sibling}function Tc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&Xs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Tc(i,r,a),i=i.sibling;i!==null;)Tc(i,r,a),i=i.sibling}function c_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$t(r,u,a),r[gt]=i,r[Ht]=a}catch(_){je(i,i.return,_)}}var Wi=!1,bt=!1,bh=!1,f_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function vI(i,r){if(i=i.containerInfo,Qh=Fc,i=Ag(i),Ed(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,V=-1,Y=0,j=0,ne=i,K=null;t:for(;;){for(var X;ne!==a||y!==0&&ne.nodeType!==3||(I=A+y),ne!==_||u!==0&&ne.nodeType!==3||(V=A+u),ne.nodeType===3&&(A+=ne.nodeValue.length),(X=ne.firstChild)!==null;)K=ne,ne=X;for(;;){if(ne===i)break t;if(K===a&&++Y===y&&(I=A),K===_&&++j===u&&(V=A),(X=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=X}a=I===-1||V===-1?null:{start:I,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xh={focusedElem:i,selectionRange:a},Fc=!1,qt=r;qt!==null;)if(r=qt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,qt=i;else for(;qt!==null;){switch(r=qt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var he=Xr(a.type,y);i=u.getSnapshotBeforeUpdate(he,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){je(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)jh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":jh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,qt=i;break}qt=r.return}}function d_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ji(i,a),u&4&&gl(5,a);break;case 1:if(ji(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){je(a,a.return,A)}else{var y=Xr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){je(a,a.return,A)}}u&64&&o_(a),u&512&&yl(a,a.return);break;case 3:if(ji(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Xg(i,r)}catch(A){je(a,a.return,A)}}break;case 27:r===null&&u&4&&c_(a);case 26:case 5:ji(i,a),r===null&&u&4&&l_(a),u&512&&yl(a,a.return);break;case 12:ji(i,a);break;case 31:ji(i,a),u&4&&m_(i,a);break;case 13:ji(i,a),u&4&&g_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=bI.bind(null,a),$I(i,a))));break;case 22:if(u=a.memoizedState!==null||Wi,!u){r=r!==null&&r.memoizedState!==null||bt,y=Wi;var _=bt;Wi=u,(bt=r)&&!_?es(i,a,(a.subtreeFlags&8772)!==0):ji(i,a),Wi=y,bt=_}break;case 30:break;default:ji(i,a)}}function h_(i){var r=i.alternate;r!==null&&(i.alternate=null,h_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&br(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ht=null,gn=!1;function Zi(i,r,a){for(a=a.child;a!==null;)p_(i,r,a),a=a.sibling}function p_(i,r,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(ps,a)}catch{}switch(a.tag){case 26:bt||_i(a,r),Zi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||_i(a,r);var u=ht,y=gn;Xs(a.type)&&(ht=a.stateNode,gn=!1),Zi(i,r,a),Rl(a.stateNode),ht=u,gn=y;break;case 5:bt||_i(a,r);case 6:if(u=ht,y=gn,ht=null,Zi(i,r,a),ht=u,gn=y,ht!==null)if(gn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(_){je(a,r,_)}else try{ht.removeChild(a.stateNode)}catch(_){je(a,r,_)}break;case 18:ht!==null&&(gn?(i=ht,ov(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),oa(i)):ov(ht,a.stateNode));break;case 4:u=ht,y=gn,ht=a.stateNode.containerInfo,gn=!0,Zi(i,r,a),ht=u,gn=y;break;case 0:case 11:case 14:case 15:zs(2,a,r),bt||zs(4,a,r),Zi(i,r,a);break;case 1:bt||(_i(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&a_(a,r,u)),Zi(i,r,a);break;case 21:Zi(i,r,a);break;case 22:bt=(u=bt)||a.memoizedState!==null,Zi(i,r,a),bt=u;break;default:Zi(i,r,a)}}function m_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{oa(i)}catch(a){je(r,r.return,a)}}}function g_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{oa(i)}catch(a){je(r,r.return,a)}}function TI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new f_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new f_),r;default:throw Error(s(435,i.tag))}}function Ec(i,r){var a=TI(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=NI.bind(null,i,u);u.then(y,y)}})}function yn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Xs(I.type)){ht=I.stateNode,gn=!1;break e}break;case 5:ht=I.stateNode,gn=!1;break e;case 3:case 4:ht=I.stateNode.containerInfo,gn=!0;break e}I=I.return}if(ht===null)throw Error(s(160));p_(_,A,y),ht=null,gn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)y_(r,i),r=r.sibling}var ti=null;function y_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:yn(r,i),_n(i),u&4&&(zs(3,i,i.return),gl(3,i),zs(5,i,i.return));break;case 1:yn(r,i),_n(i),u&512&&(bt||a===null||_i(a,a.return)),u&64&&Wi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=ti;if(yn(r,i),_n(i),u&512&&(bt||a===null||_i(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Vi]||_[gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),$t(_,u,a),_[gt]=i,Tt(_),u=_;break e;case"link":var A=yv("link","href",y).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(u),$t(_,u,a),y.head.appendChild(_);break;case"meta":if(A=yv("meta","content",y).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=y.createElement(u),$t(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[gt]=i,Tt(_),u=_}i.stateNode=u}else _v(y,i.type,i.stateNode);else i.stateNode=gv(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?_v(y,i.type,i.stateNode):gv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ih(i,i.memoizedProps,a.memoizedProps)}break;case 27:yn(r,i),_n(i),u&512&&(bt||a===null||_i(a,a.return)),a!==null&&u&4&&Ih(i,i.memoizedProps,a.memoizedProps);break;case 5:if(yn(r,i),_n(i),u&512&&(bt||a===null||_i(a,a.return)),i.flags&32){y=i.stateNode;try{Ln(y,"")}catch(he){je(i,i.return,he)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,Ih(i,y,a!==null?a.memoizedProps:y)),u&1024&&(bh=!0);break;case 6:if(yn(r,i),_n(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(he){je(i,i.return,he)}}break;case 3:if(Lc=null,y=ti,ti=Vc(r.containerInfo),yn(r,i),ti=y,_n(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{oa(r.containerInfo)}catch(he){je(i,i.return,he)}bh&&(bh=!1,__(i));break;case 4:u=ti,ti=Vc(i.stateNode.containerInfo),yn(r,i),_n(i),ti=u;break;case 12:yn(r,i),_n(i);break;case 31:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ec(i,u)));break;case 13:yn(r,i),_n(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ac=Gt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ec(i,u)));break;case 22:y=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=Wi,j=bt;if(Wi=Y||y,bt=j||V,yn(r,i),bt=j,Wi=Y,_n(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||V||Wi||bt||Wr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(_=V.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=V.stateNode;var ne=V.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(he){je(V,V.return,he)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(he){je(V,V.return,he)}}}else if(r.tag===18){if(a===null){V=r;try{var X=V.stateNode;y?av(X,!0):av(V.stateNode,!1)}catch(he){je(V,V.return,he)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ec(i,a))));break;case 19:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ec(i,u)));break;case 30:break;case 21:break;default:yn(r,i),_n(i)}}function _n(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(u_(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Rh(i);Tc(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(Ln(A,""),a.flags&=-33);var I=Rh(i);Tc(i,I,A);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=Rh(i);wh(i,Y,V);break;default:throw Error(s(161))}}catch(j){je(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function __(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;__(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ji(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)d_(i,r.alternate,r),r=r.sibling}function Wr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:zs(4,r,r.return),Wr(r);break;case 1:_i(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&a_(r,r.return,a),Wr(r);break;case 27:Rl(r.stateNode);case 26:case 5:_i(r,r.return),Wr(r);break;case 22:r.memoizedState===null&&Wr(r);break;case 30:Wr(r);break;default:Wr(r)}i=i.sibling}}function es(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:es(y,_,a),gl(4,_);break;case 1:if(es(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){je(u,u.return,Y)}if(u=_,y=u.updateQueue,y!==null){var I=u.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Qg(V[y],I)}catch(Y){je(u,u.return,Y)}}a&&A&64&&o_(_),yl(_,_.return);break;case 27:c_(_);case 26:case 5:es(y,_,a),a&&u===null&&A&4&&l_(_),yl(_,_.return);break;case 12:es(y,_,a);break;case 31:es(y,_,a),a&&A&4&&m_(y,_);break;case 13:es(y,_,a),a&&A&4&&g_(y,_);break;case 22:_.memoizedState===null&&es(y,_,a),yl(_,_.return);break;case 30:break;default:es(y,_,a)}r=r.sibling}}function Nh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&il(a))}function xh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&il(i))}function ni(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)v_(i,r,a,u),r=r.sibling}function v_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ni(i,r,a,u),y&2048&&gl(9,r);break;case 1:ni(i,r,a,u);break;case 3:ni(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&il(i)));break;case 12:if(y&2048){ni(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){je(r,r.return,V)}}else ni(i,r,a,u);break;case 31:ni(i,r,a,u);break;case 13:ni(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ni(i,r,a,u):_l(i,r):_._visibility&2?ni(i,r,a,u):(_._visibility|=2,Qo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Nh(A,r);break;case 24:ni(i,r,a,u),y&2048&&xh(r.alternate,r);break;default:ni(i,r,a,u)}}function Qo(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,A=r,I=a,V=u,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Qo(_,A,I,V,y),gl(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?Qo(_,A,I,V,y):_l(_,A):(j._visibility|=2,Qo(_,A,I,V,y)),y&&Y&2048&&Nh(A.alternate,A);break;case 24:Qo(_,A,I,V,y),y&&Y&2048&&xh(A.alternate,A);break;default:Qo(_,A,I,V,y)}r=r.sibling}}function _l(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:_l(a,u),y&2048&&Nh(u.alternate,u);break;case 24:_l(a,u),y&2048&&xh(u.alternate,u);break;default:_l(a,u)}r=r.sibling}}var vl=8192;function Xo(i,r,a){if(i.subtreeFlags&vl)for(i=i.child;i!==null;)T_(i,r,a),i=i.sibling}function T_(i,r,a){switch(i.tag){case 26:Xo(i,r,a),i.flags&vl&&i.memoizedState!==null&&oR(a,ti,i.memoizedState,i.memoizedProps);break;case 5:Xo(i,r,a);break;case 3:case 4:var u=ti;ti=Vc(i.stateNode.containerInfo),Xo(i,r,a),ti=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=vl,vl=16777216,Xo(i,r,a),vl=u):Xo(i,r,a));break;default:Xo(i,r,a)}}function E_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Tl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];qt=u,A_(u,i)}E_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)S_(i),i=i.sibling}function S_(i){switch(i.tag){case 0:case 11:case 15:Tl(i),i.flags&2048&&zs(9,i,i.return);break;case 3:Tl(i);break;case 12:Tl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Sc(i)):Tl(i);break;default:Tl(i)}}function Sc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];qt=u,A_(u,i)}E_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:zs(8,r,r.return),Sc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Sc(r));break;default:Sc(r)}i=i.sibling}}function A_(i,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:zs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:il(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,qt=u;else e:for(a=i;qt!==null;){u=qt;var y=u.sibling,_=u.return;if(h_(u),u===a){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var EI={getCacheForType:function(i){var r=Yt(It),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Yt(It).controller.signal}},SI=typeof WeakMap=="function"?WeakMap:Map,$e=0,it=null,ke=null,Ue=0,Ze=0,xn=null,Hs=!1,Wo=!1,Mh=!1,ts=0,vt=0,Js=0,Zr=0,Dh=0,Mn=0,Zo=0,El=null,vn=null,Ph=!1,Ac=0,C_=0,Cc=1/0,Ic=null,Ys=null,Dt=0,Ks=null,jo=null,ns=0,kh=0,Vh=null,I_=null,Sl=0,Uh=null;function Dn(){return($e&2)!==0&&Ue!==0?Ue&-Ue:F.T!==null?Gh():ki()}function R_(){if(Mn===0)if((Ue&536870912)===0||Be){var i=li;li<<=1,(li&3932160)===0&&(li=262144),Mn=i}else Mn=536870912;return i=bn.current,i!==null&&(i.flags|=32),Mn}function Tn(i,r,a){(i===it&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(ea(i,0),$s(i,Ue,Mn,!1)),ys(i,a),(($e&2)===0||i!==it)&&(i===it&&(($e&2)===0&&(Zr|=a),vt===4&&$s(i,Ue,Mn,!1)),vi(i))}function w_(i,r,a){if(($e&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||gs(i,r),y=u?II(i,r):Oh(i,r,!0),_=u;do{if(y===0){Wo&&!u&&$s(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!AI(a)){y=Oh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=i;y=El;var V=I.current.memoizedState.isDehydrated;if(V&&(ea(I,A).flags|=256),A=Oh(I,A,!1),A!==2){if(Mh&&!V){I.errorRecoveryDisabledLanes|=_,Zr|=_,y=4;break e}_=vn,vn=y,_!==null&&(vn===null?vn=_:vn.push.apply(vn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ea(i,0),$s(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:$s(u,r,Mn,!Hs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Ac+300-Gt(),10<y)){if($s(u,r,Mn,!Hs),Vn(u,0,!0)!==0)break e;ns=r,u.timeoutHandle=sv(b_.bind(null,u,a,vn,Ic,Ph,r,Mn,Zr,Zo,Hs,_,"Throttled",-0,0),y);break e}b_(u,a,vn,Ic,Ph,r,Mn,Zr,Zo,Hs,_,null,-0,0)}}break}while(!0);vi(i)}function b_(i,r,a,u,y,_,A,I,V,Y,j,ne,K,X){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut},T_(r,_,ne);var he=(_&62914560)===_?Ac-Gt():(_&4194048)===_?C_-Gt():0;if(he=aR(ne,he),he!==null){ns=_,i.cancelPendingCommit=he(U_.bind(null,i,r,_,a,u,y,A,I,V,j,ne,null,K,X)),$s(i,_,A,!Y);return}}U_(i,r,_,a,u,y,A,I,V)}function AI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!Rn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $s(i,r,a,u){r&=~Dh,r&=~Zr,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-an(y),A=1<<_;u[_]=-1,y&=~A}a!==0&&Ua(i,a,r)}function Rc(){return($e&6)===0?(Al(0),!1):!0}function Lh(){if(ke!==null){if(Ze===0)var i=ke.return;else i=ke,Ji=zr=null,jd(i),Ho=null,rl=0,i=ke;for(;i!==null;)r_(i.alternate,i),i=i.return;ke=null}}function ea(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,zI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ns=0,Lh(),it=i,ke=a=zi(i.current,null),Ue=r,Ze=0,xn=null,Hs=!1,Wo=gs(i,r),Mh=!1,Zo=Mn=Dh=Zr=Js=vt=0,vn=El=null,Ph=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-an(u),_=1<<y;r|=i[y],u&=~_}return ts=r,Ku(),a}function N_(i,r){be=null,F.H=hl,r===zo||r===tc?(r=Jg(),Ze=3):r===Fd?(r=Jg(),Ze=4):Ze=r===mh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xn=r,ke===null&&(vt=1,mc(i,qn(r,i.current)))}function x_(){var i=bn.current;return i===null?!0:(Ue&4194048)===Ue?zn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===zn:!1}function M_(){var i=F.H;return F.H=hl,i===null?hl:i}function D_(){var i=F.A;return F.A=EI,i}function wc(){vt=4,Hs||(Ue&4194048)!==Ue&&bn.current!==null||(Wo=!0),(Js&134217727)===0&&(Zr&134217727)===0||it===null||$s(it,Ue,Mn,!1)}function Oh(i,r,a){var u=$e;$e|=2;var y=M_(),_=D_();(it!==i||Ue!==r)&&(Ic=null,ea(i,r)),r=!1;var A=vt;e:do try{if(Ze!==0&&ke!==null){var I=ke,V=xn;switch(Ze){case 8:Lh(),A=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(r=!0);var Y=Ze;if(Ze=0,xn=null,ta(i,I,V,Y),a&&Wo){A=0;break e}break;default:Y=Ze,Ze=0,xn=null,ta(i,I,V,Y)}}CI(),A=vt;break}catch(j){N_(i,j)}while(!0);return r&&i.shellSuspendCounter++,Ji=zr=null,$e=u,F.H=y,F.A=_,ke===null&&(it=null,Ue=0,Ku()),A}function CI(){for(;ke!==null;)P_(ke)}function II(i,r){var a=$e;$e|=2;var u=M_(),y=D_();it!==i||Ue!==r?(Ic=null,Cc=Gt()+500,ea(i,r)):Wo=gs(i,r);e:do try{if(Ze!==0&&ke!==null){r=ke;var _=xn;t:switch(Ze){case 1:Ze=0,xn=null,ta(i,r,_,1);break;case 2:case 9:if(zg(_)){Ze=0,xn=null,k_(r);break}r=function(){Ze!==2&&Ze!==9||it!==i||(Ze=7),vi(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:zg(_)?(Ze=0,xn=null,k_(r)):(Ze=0,xn=null,ta(i,r,_,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var I=ke;if(A?vv(A):I.stateNode.complete){Ze=0,xn=null;var V=I.sibling;if(V!==null)ke=V;else{var Y=I.return;Y!==null?(ke=Y,bc(Y)):ke=null}break t}}Ze=0,xn=null,ta(i,r,_,5);break;case 6:Ze=0,xn=null,ta(i,r,_,6);break;case 8:Lh(),vt=6;break e;default:throw Error(s(462))}}RI();break}catch(j){N_(i,j)}while(!0);return Ji=zr=null,F.H=u,F.A=y,$e=a,ke!==null?0:(it=null,Ue=0,Ku(),vt)}function RI(){for(;ke!==null&&!cd();)P_(ke)}function P_(i){var r=i_(i.alternate,i,ts);i.memoizedProps=i.pendingProps,r===null?bc(i):ke=r}function k_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Wy(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=Wy(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:jd(r);default:r_(a,r),r=ke=Dg(r,ts),r=i_(a,r,ts)}i.memoizedProps=i.pendingProps,r===null?bc(i):ke=r}function ta(i,r,a,u){Ji=zr=null,jd(r),Ho=null,rl=0;var y=r.return;try{if(pI(i,y,r,a,Ue)){vt=1,mc(i,qn(a,i.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;vt=1,mc(i,qn(a,i.current)),ke=null;return}r.flags&32768?(Be||u===1?i=!0:Wo||(Ue&536870912)!==0?i=!1:(Hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),V_(r,i)):bc(r)}function bc(i){var r=i;do{if((r.flags&32768)!==0){V_(r,Hs);return}i=r.return;var a=yI(r.alternate,r,ts);if(a!==null){ke=a;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=i}while(r!==null);vt===0&&(vt=5)}function V_(i,r){do{var a=_I(i.alternate,i);if(a!==null){a.flags&=32767,ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){ke=i;return}ke=i=a}while(i!==null);vt=6,ke=null}function U_(i,r,a,u,y,_,A,I,V){i.cancelPendingCommit=null;do Nc();while(Dt!==0);if(($e&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Rd,zt(i,a,_,A,I,V),i===it&&(ke=it=null,Ue=0),jo=r,Ks=i,ns=a,kh=_,Vh=y,I_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xI(Di,function(){return F_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,y=ae.p,ae.p=2,A=$e,$e|=4;try{vI(i,r,a)}finally{$e=A,ae.p=y,F.T=u}}Dt=1,L_(),O_(),q_()}}function L_(){if(Dt===1){Dt=0;var i=Ks,r=jo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var u=ae.p;ae.p=2;var y=$e;$e|=4;try{y_(r,i);var _=Xh,A=Ag(i.containerInfo),I=_.focusedElem,V=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Sg(I.ownerDocument.documentElement,I)){if(V!==null&&Ed(I)){var Y=V.start,j=V.end;if(j===void 0&&(j=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(j,I.value.length);else{var ne=I.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var X=K.getSelection(),he=I.textContent.length,Ee=Math.min(V.start,he),nt=V.end===void 0?Ee:Math.min(V.end,he);!X.extend&&Ee>nt&&(A=nt,nt=Ee,Ee=A);var B=Eg(I,Ee),L=Eg(I,nt);if(B&&L&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var J=ne.createRange();J.setStart(B.node,B.offset),X.removeAllRanges(),Ee>nt?(X.addRange(J),X.extend(L.node,L.offset)):(J.setEnd(L.node,L.offset),X.addRange(J))}}}}for(ne=[],X=I;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var te=ne[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Fc=!!Qh,Xh=Qh=null}finally{$e=y,ae.p=u,F.T=a}}i.current=r,Dt=2}}function O_(){if(Dt===2){Dt=0;var i=Ks,r=jo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var u=ae.p;ae.p=2;var y=$e;$e|=4;try{d_(i,r.alternate,r)}finally{$e=y,ae.p=u,F.T=a}}Dt=3}}function q_(){if(Dt===4||Dt===3){Dt=0,Da();var i=Ks,r=jo,a=ns,u=I_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Dt=5:(Dt=0,jo=Ks=null,B_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ys=null),Oa(a),r=r.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(ps,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=F.T,y=ae.p,ae.p=2,F.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];_(I.value,{componentStack:I.stack})}}finally{F.T=r,ae.p=y}}(ns&3)!==0&&Nc(),vi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Uh?Sl++:(Sl=0,Uh=i):Sl=0,Al(0)}}function B_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,il(r)))}function Nc(){return L_(),O_(),q_(),F_()}function F_(){if(Dt!==5)return!1;var i=Ks,r=kh;kh=0;var a=Oa(ns),u=F.T,y=ae.p;try{ae.p=32>a?32:a,F.T=null,a=Vh,Vh=null;var _=Ks,A=ns;if(Dt=0,jo=Ks=null,ns=0,($e&6)!==0)throw Error(s(331));var I=$e;if($e|=4,S_(_.current),v_(_,_.current,A,a),$e=I,Al(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(ps,_)}catch{}return!0}finally{ae.p=y,F.T=u,B_(i,r)}}function G_(i,r,a){r=qn(a,r),r=ph(i.stateNode,r,2),i=Bs(i,r,2),i!==null&&(ys(i,2),vi(i))}function je(i,r,a){if(i.tag===3)G_(i,i,a);else for(;r!==null;){if(r.tag===3){G_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ys===null||!Ys.has(u))){i=qn(a,i),a=zy(2),u=Bs(r,a,2),u!==null&&(Hy(a,u,r,i),ys(u,2),vi(u));break}}r=r.return}}function qh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new SI;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Mh=!0,y.add(a),i=wI.bind(null,i,r,a),r.then(i,i))}function wI(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(Ue&a)===a&&(vt===4||vt===3&&(Ue&62914560)===Ue&&300>Gt()-Ac?($e&2)===0&&ea(i,0):Dh|=a,Zo===Ue&&(Zo=0)),vi(i)}function z_(i,r){r===0&&(r=Va()),i=Br(i,r),i!==null&&(ys(i,r),vi(i))}function bI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),z_(i,a)}function NI(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),z_(i,a)}function xI(i,r){return Ir(i,r)}var xc=null,na=null,Bh=!1,Mc=!1,Fh=!1,Qs=0;function vi(i){i!==na&&i.next===null&&(na===null?xc=na=i:na=na.next=i),Mc=!0,Bh||(Bh=!0,DI())}function Al(i,r){if(!Fh&&Mc){Fh=!0;do for(var a=!1,u=xc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var A=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,K_(u,_))}else _=Ue,_=Vn(u,u===it?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||gs(u,_)||(a=!0,K_(u,_));u=u.next}while(a);Fh=!1}}function MI(){H_()}function H_(){Mc=Bh=!1;var i=0;Qs!==0&&GI()&&(i=Qs);for(var r=Gt(),a=null,u=xc;u!==null;){var y=u.next,_=J_(u,r);_===0?(u.next=null,a===null?xc=y:a.next=y,y===null&&(na=a)):(a=u,(i!==0||(_&3)!==0)&&(Mc=!0)),u=y}Dt!==0&&Dt!==5||Al(i),Qs!==0&&(Qs=0)}function J_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-an(_),I=1<<A,V=y[A];V===-1?((I&a)===0||(I&u)!==0)&&(y[A]=So(I,r)):V<=r&&(i.expiredLanes|=I),_&=~I}if(r=it,a=Ue,a=Vn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Eo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||gs(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&Eo(u),Oa(a)){case 2:case 8:a=Vt;break;case 32:a=Di;break;case 268435456:a=Pa;break;default:a=Di}return u=Y_.bind(null,i),a=Ir(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&Eo(u),i.callbackPriority=2,i.callbackNode=null,2}function Y_(i,r){if(Dt!==0&&Dt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Nc()&&i.callbackNode!==a)return null;var u=Ue;return u=Vn(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(w_(i,u,r),J_(i,Gt()),i.callbackNode!=null&&i.callbackNode===a?Y_.bind(null,i):null)}function K_(i,r){if(Nc())return null;w_(i,r,!0)}function DI(){HI(function(){($e&6)!==0?Ir(Mt,MI):H_()})}function Gh(){if(Qs===0){var i=Fo;i===0&&(i=wr,wr<<=1,(wr&261888)===0&&(wr=256)),Qs=i}return Qs}function $_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hi(""+i)}function Q_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function PI(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=$_((y[Ht]||null).action),A=u.submitter;A&&(r=(r=A[Ht]||null)?$_(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var I=new Pr("action","action",null,u,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qs!==0){var V=A?Q_(y,A):new FormData(y);lh(a,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(I.preventDefault(),V=A?Q_(y,A):new FormData(y),lh(a,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var zh=0;zh<Id.length;zh++){var Hh=Id[zh],kI=Hh.toLowerCase(),VI=Hh[0].toUpperCase()+Hh.slice(1);ei(kI,"on"+VI)}ei(Rg,"onAnimationEnd"),ei(wg,"onAnimationIteration"),ei(bg,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(WC,"onTransitionRun"),ei(ZC,"onTransitionStart"),ei(jC,"onTransitionCancel"),ei(Ng,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function X_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var A=u.length-1;0<=A;A--){var I=u[A],V=I.instance,Y=I.currentTarget;if(I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(j){Yu(j)}y.currentTarget=null,_=V}else for(A=0;A<u.length;A++){if(I=u[A],V=I.instance,Y=I.currentTarget,I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(j){Yu(j)}y.currentTarget=null,_=V}}}}function Ve(i,r){var a=r[Ts];a===void 0&&(a=r[Ts]=new Set);var u=i+"__bubble";a.has(u)||(W_(r,i,2,!1),a.add(u))}function Jh(i,r,a){var u=0;r&&(u|=4),W_(a,i,u,r)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Yh(i){if(!i[Dc]){i[Dc]=!0,Ao.forEach(function(a){a!=="selectionchange"&&(UI.has(a)||Jh(a,!1,i),Jh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Dc]||(r[Dc]=!0,Jh("selectionchange",!1,r))}}function W_(i,r,a,u){switch(Rv(r)){case 2:var y=cR;break;case 8:y=fR;break;default:y=ap}a=y.bind(null,r,a,i),y=void 0,!Ya||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Kh(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=u.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Ui(I),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){u=_=A;continue e}I=I.parentNode}}u=u.return}xu(function(){var Y=_,j=bo(a),ne=[];e:{var K=xg.get(i);if(K!==void 0){var X=Pr,he=i;switch(i){case"keypress":if(Dr(a)===0)break e;case"keydown":case"keyup":X=qu;break;case"focusin":he="focus",X=xs;break;case"focusout":he="blur",X=xs;break;case"beforeblur":case"afterblur":X=xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Fu;break;case Rg:case wg:case bg:X=Mo;break;case Ng:X=Do;break;case"scroll":case"scrollend":X=Mu;break;case"wheel":X=zu;break;case"copy":case"cut":case"paste":X=Vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Wa;break;case"toggle":case"beforetoggle":X=Ds}var Ee=(r&4)!==0,nt=!Ee&&(i==="scroll"||i==="scrollend"),B=Ee?K!==null?K+"Capture":null:K;Ee=[];for(var L=Y,J;L!==null;){var te=L;if(J=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||J===null||B===null||(te=pn(L,B),te!=null&&Ee.push(Il(L,te,J))),nt)break;L=L.return}0<Ee.length&&(K=new X(K,he,null,a,j),ne.push({event:K,listeners:Ee}))}}if((r&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",K&&a!==wo&&(he=a.relatedTarget||a.fromElement)&&(Ui(he)||he[ci]))break e;if((X||K)&&(K=j.window===j?j:(K=j.ownerDocument)?K.defaultView||K.parentWindow:window,X?(he=a.relatedTarget||a.toElement,X=Y,he=he?Ui(he):null,he!==null&&(nt=l(he),Ee=he.tag,he!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(X=null,he=Y),X!==he)){if(Ee=Du,te="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Wa,te="onPointerLeave",B="onPointerEnter",L="pointer"),nt=X==null?K:Nr(X),J=he==null?K:Nr(he),K=new Ee(te,L+"leave",X,a,j),K.target=nt,K.relatedTarget=J,te=null,Ui(j)===Y&&(Ee=new Ee(B,L+"enter",he,a,j),Ee.target=J,Ee.relatedTarget=nt,te=Ee),nt=te,X&&he)t:{for(Ee=LI,B=X,L=he,J=0,te=B;te;te=Ee(te))J++;te=0;for(var ve=L;ve;ve=Ee(ve))te++;for(;0<J-te;)B=Ee(B),J--;for(;0<te-J;)L=Ee(L),te--;for(;J--;){if(B===L||L!==null&&B===L.alternate){Ee=B;break t}B=Ee(B),L=Ee(L)}Ee=null}else Ee=null;X!==null&&Z_(ne,K,X,Ee,!1),he!==null&&nt!==null&&Z_(ne,nt,he,Ee,!0)}}e:{if(K=Y?Nr(Y):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var Je=mg;else if(mn(K))if(gg)Je=$C;else{Je=YC;var me=JC}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Ha(Y.elementType)&&(Je=mg):Je=KC;if(Je&&(Je=Je(i,Y))){Lr(ne,Je,a,j);break e}me&&me(i,K,Y),i==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Ro(K,"number",K.value)}switch(me=Y?Nr(Y):window,i){case"focusin":(mn(me)||me.contentEditable==="true")&&(Po=me,Sd=Y,el=null);break;case"focusout":el=Sd=Po=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,Cg(ne,a,j);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":Cg(ne,a,j)}var xe;if(T)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else De?Qe(i,a)&&(Le="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(z&&a.locale!=="ko"&&(De||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&De&&(xe=Rs()):(In=j,No="value"in In?In.value:In.textContent,De=!0)),me=Pc(Y,Le),0<me.length&&(Le=new $a(Le,i,null,a,j),ne.push({event:Le,listeners:me}),xe?Le.data=xe:(xe=Ct(a),xe!==null&&(Le.data=xe)))),(xe=R?Lt(i,a):Ot(i,a))&&(Le=Pc(Y,"onBeforeInput"),0<Le.length&&(me=new $a("onBeforeInput","beforeinput",null,a,j),ne.push({event:me,listeners:Le}),me.data=xe)),PI(ne,i,Y,a,j)}X_(ne,r)})}function Il(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Pc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=pn(i,a),y!=null&&u.unshift(Il(i,y,_)),y=pn(i,r),y!=null&&u.push(Il(i,y,_))),i.tag===3)return u;i=i.return}return[]}function LI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Z_(i,r,a,u,y){for(var _=r._reactName,A=[];a!==null&&a!==u;){var I=a,V=I.alternate,Y=I.stateNode;if(I=I.tag,V!==null&&V===u)break;I!==5&&I!==26&&I!==27||Y===null||(V=Y,y?(Y=pn(a,_),Y!=null&&A.unshift(Il(a,Y,V))):y||(Y=pn(a,_),Y!=null&&A.push(Il(a,Y,V)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var OI=/\r\n?/g,qI=/\u0000|\uFFFD/g;function j_(i){return(typeof i=="string"?i:""+i).replace(OI,`
`).replace(qI,"")}function ev(i,r){return r=j_(r),j_(i)===r}function tt(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Ln(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Ln(i,""+u);break;case"className":As(i,"class",u);break;case"tabIndex":As(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":As(i,a,u);break;case"style":bu(i,u,_);break;case"data":if(r!=="object"){As(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=hi(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&tt(i,r,"name",y.name,y,null),tt(i,r,"formEncType",y.formEncType,y,null),tt(i,r,"formMethod",y.formMethod,y,null),tt(i,r,"formTarget",y.formTarget,y,null)):(tt(i,r,"encType",y.encType,y,null),tt(i,r,"method",y.method,y,null),tt(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=hi(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Ut);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=hi(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),Ss(i,"popover",u);break;case"xlinkActuate":Un(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Un(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Un(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Un(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Un(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Un(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Un(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Un(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Un(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ss(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gd.get(a)||a,Ss(i,a,u))}}function $h(i,r,a,u,y,_){switch(a){case"style":bu(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Ln(i,u):(typeof u=="number"||typeof u=="bigint")&&Ln(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Es.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Ht]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Ss(i,a,u)}}}function $t(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,_,A,a,null)}}y&&tt(i,r,"srcSet",a.srcSet,a,null),u&&tt(i,r,"src",a.src,a,null);return;case"input":Ve("invalid",i);var I=_=A=y=null,V=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var j=a[u];if(j!=null)switch(u){case"name":y=j;break;case"type":A=j;break;case"checked":V=j;break;case"defaultChecked":Y=j;break;case"value":_=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:tt(i,r,u,j,a,null)}}xr(i,_,I,V,Y,A,y,!1);return;case"select":Ve("invalid",i),u=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:tt(i,r,y,I,a,null)}r=_,a=A,i.multiple=!!u,r!=null?He(i,!!u,r,!1):a!=null&&He(i,!!u,a,!0);return;case"textarea":Ve("invalid",i),_=y=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:tt(i,r,A,I,a,null)}Is(i,u,y,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,r,V,u,a,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<Cl.length;u++)Ve(Cl[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,Y,u,a,null)}return;default:if(Ha(r)){for(j in a)a.hasOwnProperty(j)&&(u=a[j],u!==void 0&&$h(i,r,j,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&tt(i,r,I,u,a,null))}function BI(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,V=null,Y=null,j=null;for(X in a){var ne=a[X];if(a.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=ne;default:u.hasOwnProperty(X)||tt(i,r,X,null,u,ne)}}for(var K in u){var X=u[K];if(ne=a[K],u.hasOwnProperty(K)&&(X!=null||ne!=null))switch(K){case"type":_=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":j=X;break;case"value":A=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:X!==ne&&tt(i,r,K,X,u,ne)}}Cs(i,A,I,V,Y,j,_,y);return;case"select":X=A=I=K=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":X=V;default:u.hasOwnProperty(_)||tt(i,r,_,null,u,V)}for(y in u)if(_=u[y],V=a[y],u.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":K=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==V&&tt(i,r,y,_,u,V)}r=I,a=A,u=X,K!=null?He(i,!!a,K,!1):!!u!=!!a&&(r!=null?He(i,!!a,r,!0):He(i,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,r,I,null,u,y)}for(A in u)if(y=u[A],_=a[A],u.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":K=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&tt(i,r,A,y,u,_)}Mr(i,K,X);return;case"option":for(var he in a)if(K=a[he],a.hasOwnProperty(he)&&K!=null&&!u.hasOwnProperty(he))switch(he){case"selected":i.selected=!1;break;default:tt(i,r,he,null,u,K)}for(V in u)if(K=u[V],X=a[V],u.hasOwnProperty(V)&&K!==X&&(K!=null||X!=null))switch(V){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:tt(i,r,V,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)K=a[Ee],a.hasOwnProperty(Ee)&&K!=null&&!u.hasOwnProperty(Ee)&&tt(i,r,Ee,null,u,K);for(Y in u)if(K=u[Y],X=a[Y],u.hasOwnProperty(Y)&&K!==X&&(K!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:tt(i,r,Y,K,u,X)}return;default:if(Ha(r)){for(var nt in a)K=a[nt],a.hasOwnProperty(nt)&&K!==void 0&&!u.hasOwnProperty(nt)&&$h(i,r,nt,void 0,u,K);for(j in u)K=u[j],X=a[j],!u.hasOwnProperty(j)||K===X||K===void 0&&X===void 0||$h(i,r,j,K,u,X);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!u.hasOwnProperty(B)&&tt(i,r,B,null,u,K);for(ne in u)K=u[ne],X=a[ne],!u.hasOwnProperty(ne)||K===X||K==null&&X==null||tt(i,r,ne,K,u,X)}function tv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&tv(A)){for(A=0,I=y.responseEnd,u+=1;u<a.length;u++){var V=a[u],Y=V.startTime;if(Y>I)break;var j=V.transferSize,ne=V.initiatorType;j&&tv(ne)&&(V=V.responseEnd,A+=j*(V<I?1:(I-Y)/(V-Y)))}if(--u,r+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Qh=null,Xh=null;function kc(i){return i.nodeType===9?i:i.ownerDocument}function nv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Wh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zh=null;function GI(){var i=window.event;return i&&i.type==="popstate"?i===Zh?!1:(Zh=i,!0):(Zh=null,!1)}var sv=typeof setTimeout=="function"?setTimeout:void 0,zI=typeof clearTimeout=="function"?clearTimeout:void 0,rv=typeof Promise=="function"?Promise:void 0,HI=typeof queueMicrotask=="function"?queueMicrotask:typeof rv<"u"?function(i){return rv.resolve(null).then(i).catch(JI)}:sv;function JI(i){setTimeout(function(){throw i})}function Xs(i){return i==="head"}function ov(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),oa(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Rl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Rl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[Vi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&Rl(i.ownerDocument.body);a=y}while(a);oa(r)}function av(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function jh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jh(a),br(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function YI(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Vi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Hn(i.nextSibling),i===null)break}return null}function KI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hn(i.nextSibling),i===null))return null;return i}function lv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Hn(i.nextSibling),i===null))return null;return i}function ep(i){return i.data==="$?"||i.data==="$~"}function tp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function $I(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Hn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var np=null;function uv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Hn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function cv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function fv(i,r,a){switch(r=kc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Rl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);br(i)}var Jn=new Map,dv=new Set;function Vc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var is=ae.d;ae.d={f:QI,r:XI,D:WI,C:ZI,L:jI,m:eR,X:nR,S:tR,M:iR};function QI(){var i=is.f(),r=Rc();return i||r}function XI(i){var r=Li(i);r!==null&&r.tag===5&&r.type==="form"?Ny(r):is.r(i)}var ia=typeof document>"u"?null:document;function hv(i,r,a){var u=ia;if(u&&typeof r=="string"&&r){var y=yt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),dv.has(y)||(dv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),$t(r,"link",i),Tt(r),u.head.appendChild(r)))}}function WI(i){is.D(i),hv("dns-prefetch",i,null)}function ZI(i,r){is.C(i,r),hv("preconnect",i,r)}function jI(i,r,a){is.L(i,r,a);var u=ia;if(u&&i&&r){var y='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+yt(a.imageSizes)+'"]')):y+='[href="'+yt(i)+'"]';var _=y;switch(r){case"style":_=sa(i);break;case"script":_=ra(i)}Jn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Jn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(wl(_))||r==="script"&&u.querySelector(bl(_))||(r=u.createElement("link"),$t(r,"link",i),Tt(r),u.head.appendChild(r)))}}function eR(i,r){is.m(i,r);var a=ia;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yt(u)+'"][href="'+yt(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ra(i)}if(!Jn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Jn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bl(_)))return}u=a.createElement("link"),$t(u,"link",i),Tt(u),a.head.appendChild(u)}}}function tR(i,r,a){is.S(i,r,a);var u=ia;if(u&&i){var y=Zn(u).hoistableStyles,_=sa(i);r=r||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(wl(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Jn.get(_))&&ip(i,a);var V=A=u.createElement("link");Tt(V),$t(V,"link",i),V._p=new Promise(function(Y,j){V.onload=Y,V.onerror=j}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Uc(A,r,u)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function nR(i,r){is.X(i,r);var a=ia;if(a&&i){var u=Zn(a).hoistableScripts,y=ra(i),_=u.get(y);_||(_=a.querySelector(bl(y)),_||(i=E({src:i,async:!0},r),(r=Jn.get(y))&&sp(i,r),_=a.createElement("script"),Tt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function iR(i,r){is.M(i,r);var a=ia;if(a&&i){var u=Zn(a).hoistableScripts,y=ra(i),_=u.get(y);_||(_=a.querySelector(bl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Jn.get(y))&&sp(i,r),_=a.createElement("script"),Tt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function pv(i,r,a,u){var y=(y=Ne.current)?Vc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=sa(a.href),a=Zn(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=sa(a.href);var _=Zn(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(wl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Jn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(i,a),_||sR(y,i,a,A.state))),r&&u===null)throw Error(s(528,""));return A}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ra(a),a=Zn(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function sa(i){return'href="'+yt(i)+'"'}function wl(i){return'link[rel="stylesheet"]['+i+"]"}function mv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function sR(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),$t(r,"link",a),Tt(r),i.head.appendChild(r))}function ra(i){return'[src="'+yt(i)+'"]'}function bl(i){return"script[async]"+i}function gv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+yt(a.href)+'"]');if(u)return r.instance=u,Tt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Tt(u),$t(u,"style",y),Uc(u,a.precedence,i),r.instance=u;case"stylesheet":y=sa(a.href);var _=i.querySelector(wl(y));if(_)return r.state.loading|=4,r.instance=_,Tt(_),_;u=mv(a),(y=Jn.get(y))&&ip(u,y),_=(i.ownerDocument||i).createElement("link"),Tt(_);var A=_;return A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),$t(_,"link",u),r.state.loading|=4,Uc(_,a.precedence,i),r.instance=_;case"script":return _=ra(a.src),(y=i.querySelector(bl(_)))?(r.instance=y,Tt(y),y):(u=a,(y=Jn.get(_))&&(u=E({},a),sp(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Tt(y),$t(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Uc(u,a.precedence,i));return r.instance}function Uc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function ip(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function sp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Lc=null;function yv(i,r,a){if(Lc===null){var u=new Map,y=Lc=new Map;y.set(a,u)}else y=Lc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[Vi]||_[gt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=i+A;var I=u.get(A);I?I.push(_):u.set(A,[_])}}return u}function _v(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function rR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function vv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function oR(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=sa(u.href),_=r.querySelector(wl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Oc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Tt(_);return}_=r.ownerDocument||r,u=mv(u),(y=Jn.get(y))&&ip(u,y),_=_.createElement("link"),Tt(_);var A=_;A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),$t(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Oc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var rp=0;function aR(i,r){return i.stylesheets&&i.count===0&&Bc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Bc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&rp===0&&(rp=62500*FI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Bc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>rp?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qc=null;function Bc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qc=new Map,r.forEach(lR,i),qc=null,Oc.call(i))}function lR(i,r){if(!(r.state.loading&4)){var a=qc.get(i);if(a)var u=a.get(null);else{a=new Map,qc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,y),a.set(A,y),this.count++,u=Oc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Nl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function uR(i,r,a,u,y,_,A,I,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Tv(i,r,a,u,y,_,A,I,V,Y,j,ne){return i=new uR(i,r,a,A,V,Y,j,ne,I),r=1,_===!0&&(r|=24),_=wn(3,null,null,r),i.current=_,_.stateNode=i,r=Od(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Gd(_),i}function Ev(i){return i?(i=Uo,i):Uo}function Sv(i,r,a,u,y,_){y=Ev(y),u.context===null?u.context=y:u.pendingContext=y,u=qs(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Bs(i,u,r),a!==null&&(Tn(a,i,r),al(a,i,r))}function Av(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function op(i,r){Av(i,r),(i=i.alternate)&&Av(i,r)}function Cv(i){if(i.tag===13||i.tag===31){var r=Br(i,67108864);r!==null&&Tn(r,i,67108864),op(i,67108864)}}function Iv(i){if(i.tag===13||i.tag===31){var r=Dn();r=La(r);var a=Br(i,r);a!==null&&Tn(a,i,r),op(i,r)}}var Fc=!0;function cR(i,r,a,u){var y=F.T;F.T=null;var _=ae.p;try{ae.p=2,ap(i,r,a,u)}finally{ae.p=_,F.T=y}}function fR(i,r,a,u){var y=F.T;F.T=null;var _=ae.p;try{ae.p=8,ap(i,r,a,u)}finally{ae.p=_,F.T=y}}function ap(i,r,a,u){if(Fc){var y=lp(u);if(y===null)Kh(i,r,u,Gc,a),wv(i,u);else if(hR(y,i,r,a,u))u.stopPropagation();else if(wv(i,u),r&4&&-1<dR.indexOf(i)){for(;y!==null;){var _=Li(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Wn(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var V=1<<31-an(A);I.entanglements[1]|=V,A&=~V}vi(_),($e&6)===0&&(Cc=Gt()+500,Al(0))}}break;case 31:case 13:I=Br(_,2),I!==null&&Tn(I,_,2),Rc(),op(_,2)}if(_=lp(u),_===null&&Kh(i,r,u,Gc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else Kh(i,r,u,null,a)}}function lp(i){return i=bo(i),up(i)}var Gc=null;function up(i){if(Gc=null,i=Ui(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=f(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Gc=i,null}function Rv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Eu()){case Mt:return 2;case Vt:return 8;case Di:case Su:return 32;case Pa:return 268435456;default:return 32}default:return 32}}var cp=!1,Ws=null,Zs=null,js=null,xl=new Map,Ml=new Map,er=[],dR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(i,r){switch(i){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Dl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Li(r),r!==null&&Cv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function hR(i,r,a,u,y){switch(r){case"focusin":return Ws=Dl(Ws,i,r,a,u,y),!0;case"dragenter":return Zs=Dl(Zs,i,r,a,u,y),!0;case"mouseover":return js=Dl(js,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return xl.set(_,Dl(xl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,Ml.set(_,Dl(Ml.get(_)||null,i,r,a,u,y)),!0}return!1}function bv(i){var r=Ui(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Cu(i.priority,function(){Iv(a)});return}}else if(r===31){if(r=f(a),r!==null){i.blockedOn=r,Cu(i.priority,function(){Iv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=lp(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);wo=u,a.target.dispatchEvent(u),wo=null}else return r=Li(a),r!==null&&Cv(r),i.blockedOn=a,!1;r.shift()}return!0}function Nv(i,r,a){zc(i)&&a.delete(r)}function pR(){cp=!1,Ws!==null&&zc(Ws)&&(Ws=null),Zs!==null&&zc(Zs)&&(Zs=null),js!==null&&zc(js)&&(js=null),xl.forEach(Nv),Ml.forEach(Nv)}function Hc(i,r){i.blockedOn===r&&(i.blockedOn=null,cp||(cp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pR)))}var Jc=null;function xv(i){Jc!==i&&(Jc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jc===i&&(Jc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(up(u||a)===null)continue;break}var _=Li(a);_!==null&&(i.splice(r,3),r-=3,lh(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function oa(i){function r(V){return Hc(V,i)}Ws!==null&&Hc(Ws,i),Zs!==null&&Hc(Zs,i),js!==null&&Hc(js,i),xl.forEach(r),Ml.forEach(r);for(var a=0;a<er.length;a++){var u=er[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)bv(a),a.blockedOn===null&&er.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],A=y[Ht]||null;if(typeof _=="function")A||xv(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ht]||null)I=A.formAction;else if(up(y)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),xv(a)}}}function Mv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function fp(i){this._internalRoot=i}Yc.prototype.render=fp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Dn();Sv(a,u,i,r,null,null)},Yc.prototype.unmount=fp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Sv(i.current,2,null,i,null,null),Rc(),r[ci]=null}};function Yc(i){this._internalRoot=i}Yc.prototype.unstable_scheduleHydration=function(i){if(i){var r=ki();i={blockedOn:null,target:i,priority:r};for(var a=0;a<er.length&&r!==0&&r<er[a].priority;a++);er.splice(a,0,i),a===0&&bv(i)}};var Dv=e.version;if(Dv!=="19.2.0")throw Error(s(527,Dv,"19.2.0"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var mR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ps=Kc.inject(mR),Zt=Kc}catch{}}return kl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=qy,_=By,A=Fy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Tv(i,1,!1,null,null,a,u,null,y,_,A,Mv),i[ci]=r.current,Yh(i),new fp(r)},kl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=qy,A=By,I=Fy,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=Tv(i,1,!0,r,a??null,u,y,V,_,A,I,Mv),r.context=Ev(null),a=r.current,u=Dn(),u=La(u),y=qs(u),y.callback=null,Bs(a,y,u),a=u,r.current.lanes=a,ys(r,a),vi(r),i[ci]=r.current,Yh(i),new Yc(r)},kl.version="19.2.0",kl}var Gv;function RR(){if(Gv)return pp.exports;Gv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=IR(),pp.exports}var wR=RR();const bR=G0(wR),NR=()=>{};var zv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},xR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},H0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|m>>6,b=m&63;p||(b=64,c||(S=64)),s.push(t[v],t[E],t[S],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(z0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||m==null||E==null)throw new MR;const S=l<<2|f>>4;if(s.push(S),m!==64){const b=f<<4&240|m>>2;if(s.push(b),E!==64){const q=m<<6&192|E;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DR=function(n){const e=z0(n);return H0.encodeByteArray(e,!0)},mf=function(n){return DR(n).replace(/\./g,"")},J0=function(n){try{return H0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=()=>PR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof zv>"u")return;const n=zv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&J0(n[1]);return e&&JSON.parse(e)},Bf=()=>{try{return NR()||kR()||VR()||UR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Y0=n=>{var e,t;return(t=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},K0=n=>{const e=Y0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$0=()=>{var n;return(n=Bf())===null||n===void 0?void 0:n.config},Q0=n=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mf(JSON.stringify(t)),mf(JSON.stringify(c)),""].join(".")}const zl={};function OR(){const n={prod:[],emulator:[]};for(const e of Object.keys(zl))zl[e]?n.emulator.push(e):n.prod.push(e);return n}function qR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Hv=!1;function hm(n,e){if(typeof window>"u"||typeof document>"u"||!co(window.location.host)||zl[n]===e||zl[n]||Hv)return;zl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=OR().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Hv=!0,c()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=qR(s),b=t("text"),q=document.getElementById(b)||document.createElement("span"),G=t("learnmore"),H=document.getElementById(G)||document.createElement("a"),ee=t("preprendIcon"),$=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;f(Z),v(H,G);const re=m();p($,ee),Z.append($,q,H,re),document.body.appendChild(Z)}l?(q.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function FR(){var n;const e=(n=Bf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JR(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="FirebaseError";class xi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=QR,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?XR(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new xi(o,f,s)}}function XR(n,e){return n.replace(WR,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const WR=/\{\$([^}]+)}/g;function ZR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function io(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Jv(l)&&Jv(c)){if(!io(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Jv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ul(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ll(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jR(n,e){const t=new ew(n,e);return t.subscribe.bind(t)}class ew{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");tw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=_p),o.error===void 0&&(o.error=_p),o.complete===void 0&&(o.complete=_p);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tw(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n){return n&&n._delegate?n._delegate:n}class fr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new LR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sw(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(n){return n===jr?void 0:n}function sw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const ow={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},aw=Oe.INFO,lw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},uw=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=lw[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=aw,this._logHandler=uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const cw=(n,e)=>e.some(t=>n instanceof t);let Yv,Kv;function fw(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,Mp=new WeakMap,Z0=new WeakMap,vp=new WeakMap,mm=new WeakMap;function hw(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ar(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&W0.set(t,n)}).catch(()=>{}),mm.set(e,n),e}function pw(n){if(Mp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Mp.set(n,e)}let Dp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Z0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mw(n){Dp=n(Dp)}function gw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Tp(this),e,...t);return Z0.set(s,e.sort?e.sort():[e]),ar(s)}:dw().includes(n)?function(...e){return n.apply(Tp(this),e),ar(W0.get(this))}:function(...e){return ar(n.apply(Tp(this),e))}}function yw(n){return typeof n=="function"?gw(n):(n instanceof IDBTransaction&&pw(n),cw(n,fw())?new Proxy(n,Dp):n)}function ar(n){if(n instanceof IDBRequest)return hw(n);if(vp.has(n))return vp.get(n);const e=yw(n);return e!==n&&(vp.set(n,e),mm.set(e,n)),e}const Tp=n=>mm.get(n);function _w(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=ar(c);return s&&c.addEventListener("upgradeneeded",p=>{s(ar(c.result),p.oldVersion,p.newVersion,ar(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const vw=["get","getKey","getAll","getAllKeys","count"],Tw=["put","add","delete","clear"],Ep=new Map;function $v(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Tw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vw.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),o&&p.done]))[0]};return Ep.set(e,l),l}mw(n=>({...n,get:(e,t,s)=>$v(e,t)||n.get(e,t,s),has:(e,t)=>!!$v(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Sw(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pp="@firebase/app",Qv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new pm("@firebase/app"),Aw="@firebase/app-compat",Cw="@firebase/analytics-compat",Iw="@firebase/analytics",Rw="@firebase/app-check-compat",ww="@firebase/app-check",bw="@firebase/auth",Nw="@firebase/auth-compat",xw="@firebase/database",Mw="@firebase/data-connect",Dw="@firebase/database-compat",Pw="@firebase/functions",kw="@firebase/functions-compat",Vw="@firebase/installations",Uw="@firebase/installations-compat",Lw="@firebase/messaging",Ow="@firebase/messaging-compat",qw="@firebase/performance",Bw="@firebase/performance-compat",Fw="@firebase/remote-config",Gw="@firebase/remote-config-compat",zw="@firebase/storage",Hw="@firebase/storage-compat",Jw="@firebase/firestore",Yw="@firebase/ai",Kw="@firebase/firestore-compat",$w="firebase",Qw="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",Xw={[Pp]:"fire-core",[Aw]:"fire-core-compat",[Iw]:"fire-analytics",[Cw]:"fire-analytics-compat",[ww]:"fire-app-check",[Rw]:"fire-app-check-compat",[bw]:"fire-auth",[Nw]:"fire-auth-compat",[xw]:"fire-rtdb",[Mw]:"fire-data-connect",[Dw]:"fire-rtdb-compat",[Pw]:"fire-fn",[kw]:"fire-fn-compat",[Vw]:"fire-iid",[Uw]:"fire-iid-compat",[Lw]:"fire-fcm",[Ow]:"fire-fcm-compat",[qw]:"fire-perf",[Bw]:"fire-perf-compat",[Fw]:"fire-rc",[Gw]:"fire-rc-compat",[zw]:"fire-gcs",[Hw]:"fire-gcs-compat",[Jw]:"fire-fst",[Kw]:"fire-fst-compat",[Yw]:"fire-vertex","fire-js":"fire-js",[$w]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,Ww=new Map,Vp=new Map;function Xv(n,e){try{n.container.addComponent(e)}catch(t){us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function so(n){const e=n.name;if(Vp.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,n);for(const t of gf.values())Xv(t,n);for(const t of Ww.values())Xv(t,n);return!0}function Ff(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new lu("app","Firebase",Zw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=Qw;function j0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:kp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw lr.create("bad-app-name",{appName:String(o)});if(t||(t=$0()),!t)throw lr.create("no-options");const l=gf.get(o);if(l){if(io(t,l.options)&&io(s,l.config))return l;throw lr.create("duplicate-app",{appName:o})}const c=new rw(o);for(const p of Vp.values())c.addComponent(p);const f=new jw(t,s,c);return gf.set(o,f),f}function gm(n=kp){const e=gf.get(n);if(!e&&n===kp&&$0())return j0();if(!e)throw lr.create("no-app",{appName:n});return e}function Ei(n,e,t){var s;let o=(s=Xw[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(f.join(" "));return}so(new fr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebase-heartbeat-database",t1=1,Wl="firebase-heartbeat-store";let Sp=null;function eS(){return Sp||(Sp=_w(e1,t1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw lr.create("idb-open",{originalErrorMessage:n.message})})),Sp}async function n1(n){try{const t=(await eS()).transaction(Wl),s=await t.objectStore(Wl).get(tS(n));return await t.done,s}catch(e){if(e instanceof xi)us.warn(e.message);else{const t=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(t.message)}}}async function Wv(n,e){try{const s=(await eS()).transaction(Wl,"readwrite");await s.objectStore(Wl).put(e,tS(n)),await s.done}catch(t){if(t instanceof xi)us.warn(t.message);else{const s=lr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});us.warn(s.message)}}}function tS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=1024,s1=30;class r1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>s1){const c=l1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){us.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zv(),{heartbeatsToSend:s,unsentEntries:o}=o1(this._heartbeatsCache.heartbeats),l=mf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return us.warn(t),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function o1(n,e=i1){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),jv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),jv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class a1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function jv(n){return mf(JSON.stringify({version:2,heartbeats:n})).length}function l1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){so(new fr("platform-logger",e=>new Ew(e),"PRIVATE")),so(new fr("heartbeat",e=>new r1(e),"PRIVATE")),Ei(Pp,Qv,n),Ei(Pp,Qv,"esm2017"),Ei("fire-js","")}u1("");var eT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,nS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,w){function N(){}N.prototype=w.prototype,M.D=w.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(D,U,O){for(var k=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)k[rt-2]=arguments[rt];return w.prototype[U].apply(D,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,w,N){N||(N=0);var D=Array(16);if(typeof w=="string")for(var U=0;16>U;++U)D[U]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(U=0;16>U;++U)D[U]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=M.g[0],N=M.g[1],U=M.g[2];var O=M.g[3],k=w+(O^N&(U^O))+D[0]+3614090360&4294967295;w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[1]+3905402710&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[2]+606105819&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[3]+3250441966&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[4]+4118548399&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[5]+1200080426&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[6]+2821735955&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[7]+4249261313&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[8]+1770035416&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[9]+2336552879&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[10]+4294925233&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[11]+2304563134&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[12]+1804603682&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[13]+4254626195&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[14]+2792965006&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[15]+1236535329&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(U^O&(N^U))+D[1]+4129170786&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[6]+3225465664&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[11]+643717713&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[0]+3921069994&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[5]+3593408605&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[10]+38016083&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[15]+3634488961&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[4]+3889429448&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[9]+568446438&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[14]+3275163606&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[3]+4107603335&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[8]+1163531501&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[13]+2850285829&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[2]+4243563512&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[7]+1735328473&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[12]+2368359562&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(N^U^O)+D[5]+4294588738&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[8]+2272392833&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[11]+1839030562&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[14]+4259657740&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[1]+2763975236&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[4]+1272893353&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[7]+4139469664&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[10]+3200236656&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[13]+681279174&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[0]+3936430074&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[3]+3572445317&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[6]+76029189&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[9]+3654602809&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[12]+3873151461&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[15]+530742520&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[2]+3299628645&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(U^(N|~O))+D[0]+4096336452&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[7]+1126891415&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[14]+2878612391&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[5]+4237533241&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[12]+1700485571&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[3]+2399980690&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[10]+4293915773&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[1]+2240044497&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[8]+1873313359&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[15]+4264355552&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[6]+2734768916&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[13]+1309151649&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[4]+4149444226&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[11]+3174756917&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[2]+718787259&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+O&4294967295}s.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var N=w-this.blockSize,D=this.B,U=this.h,O=0;O<w;){if(U==0)for(;O<=N;)o(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<w;)if(D[U++]=M.charCodeAt(O++),U==this.blockSize){o(this,D),U=0;break}}else for(;O<w;)if(D[U++]=M[O++],U==this.blockSize){o(this,D),U=0;break}}this.h=U,this.o+=w},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var N=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=N&255,N/=256;for(this.u(M),M=Array(16),w=N=0;4>w;++w)for(var D=0;32>D;D+=8)M[N++]=this.g[w]>>>D&255;return M};function l(M,w){var N=f;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=w(M)}function c(M,w){this.h=w;for(var N=[],D=!0,U=M.length-1;0<=U;U--){var O=M[U]|0;D&&O==w||(N[U]=O,D=!1)}this.g=N}var f={};function p(M){return-128<=M&&128>M?l(M,function(w){return new c([w|0],0>w?-1:0)}):new c([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return H(m(-M));for(var w=[],N=1,D=0;M>=N;D++)w[D]=M/N|0,N*=4294967296;return new c(w,0)}function v(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return H(v(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(w,8)),D=E,U=0;U<M.length;U+=8){var O=Math.min(8,M.length-U),k=parseInt(M.substring(U,U+O),w);8>O?(O=m(Math.pow(w,O)),D=D.j(O).add(m(k))):(D=D.j(N),D=D.add(m(k)))}return D}var E=p(0),S=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(G(this))return-H(this).m();for(var M=0,w=1,N=0;N<this.g.length;N++){var D=this.i(N);M+=(0<=D?D:4294967296+D)*w,w*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(q(this))return"0";if(G(this))return"-"+H(this).toString(M);for(var w=m(Math.pow(M,6)),N=this,D="";;){var U=re(N,w).g;N=ee(N,U.j(w));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=U,q(N))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function q(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function G(M){return M.h==-1}n.l=function(M){return M=ee(this,M),G(M)?-1:q(M)?0:1};function H(M){for(var w=M.g.length,N=[],D=0;D<w;D++)N[D]=~M.g[D];return new c(N,~M.h).add(S)}n.abs=function(){return G(this)?H(this):this},n.add=function(M){for(var w=Math.max(this.g.length,M.g.length),N=[],D=0,U=0;U<=w;U++){var O=D+(this.i(U)&65535)+(M.i(U)&65535),k=(O>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);D=k>>>16,O&=65535,k&=65535,N[U]=k<<16|O}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ee(M,w){return M.add(H(w))}n.j=function(M){if(q(this)||q(M))return E;if(G(this))return G(M)?H(this).j(H(M)):H(H(this).j(M));if(G(M))return H(this.j(H(M)));if(0>this.l(b)&&0>M.l(b))return m(this.m()*M.m());for(var w=this.g.length+M.g.length,N=[],D=0;D<2*w;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var U=0;U<M.g.length;U++){var O=this.i(D)>>>16,k=this.i(D)&65535,rt=M.i(U)>>>16,ot=M.i(U)&65535;N[2*D+2*U]+=k*ot,$(N,2*D+2*U),N[2*D+2*U+1]+=O*ot,$(N,2*D+2*U+1),N[2*D+2*U+1]+=k*rt,$(N,2*D+2*U+1),N[2*D+2*U+2]+=O*rt,$(N,2*D+2*U+2)}for(D=0;D<w;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=w;D<2*w;D++)N[D]=0;return new c(N,0)};function $(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function Z(M,w){this.g=M,this.h=w}function re(M,w){if(q(w))throw Error("division by zero");if(q(M))return new Z(E,E);if(G(M))return w=re(H(M),w),new Z(H(w.g),H(w.h));if(G(w))return w=re(M,H(w)),new Z(H(w.g),w.h);if(30<M.g.length){if(G(M)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var N=S,D=w;0>=D.l(M);)N=fe(N),D=fe(D);var U=ue(N,1),O=ue(D,1);for(D=ue(D,2),N=ue(N,2);!q(D);){var k=O.add(D);0>=k.l(M)&&(U=U.add(N),O=k),D=ue(D,1),N=ue(N,1)}return w=ee(M,U.j(w)),new Z(U,w)}for(U=E;0<=M.l(w);){for(N=Math.max(1,Math.floor(M.m()/w.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=m(N),k=O.j(w);G(k)||0<k.l(M);)N-=D,O=m(N),k=O.j(w);q(O)&&(O=S),U=U.add(O),M=ee(M,k)}return new Z(U,M)}n.A=function(M){return re(this,M).h},n.and=function(M){for(var w=Math.max(this.g.length,M.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)&M.i(D);return new c(N,this.h&M.h)},n.or=function(M){for(var w=Math.max(this.g.length,M.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)|M.i(D);return new c(N,this.h|M.h)},n.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)^M.i(D);return new c(N,this.h^M.h)};function fe(M){for(var w=M.g.length+1,N=[],D=0;D<w;D++)N[D]=M.i(D)<<1|M.i(D-1)>>>31;return new c(N,M.h)}function ue(M,w){var N=w>>5;w%=32;for(var D=M.g.length-N,U=[],O=0;O<D;O++)U[O]=0<w?M.i(O+N)>>>w|M.i(O+N+1)<<32-w:M.i(O+N);return new c(U,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,nS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,ur=c}).apply(typeof eT<"u"?eT:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iS,Ol,sS,tf,Up,rS,oS,aS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(h,T){if(T)e:{var C=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in C))break e;C=C[z]}h=h[h.length-1],R=C[h],T=T(R),T!=R&&T!=null&&e(C,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var C=0,R=!1,z={next:function(){if(!R&&C<h.length){var W=C++;return{value:T(W,h[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(T,z)}}return function(){return h.apply(T,arguments)}}function S(h,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function b(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function q(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(R,z,W){for(var le=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)le[Qe-2]=arguments[Qe];return T.prototype[z].apply(R,le)}}function G(h){const T=h.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=h[R];return C}return[]}function H(h,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(p(R)){const z=h.length||0,W=R.length||0;h.length=z+W;for(let le=0;le<W;le++)h[z+le]=R[le]}else h.push(R)}}class ee{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function $(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function re(h){return re[" "](h),h}re[" "]=function(){};var fe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ue(h,T,C){for(const R in h)T.call(C,h[R],R,h)}function M(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function w(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,T){let C,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(C in R)h[C]=R[C];for(let W=0;W<N.length;W++)C=N[W],Object.prototype.hasOwnProperty.call(R,C)&&(h[C]=R[C])}}function U(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function O(h){f.setTimeout(()=>{throw h},0)}function k(){var h=Fe;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class rt{constructor(){this.h=this.g=null}add(T,C){const R=ot.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ot=new ee(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,Fe=new rt,ze=()=>{const h=f.Promise.resolve(void 0);ae=()=>{h.then(P)}};var P=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(C){O(C)}var T=ot;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}ge=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};f.addEventListener("test",C,T),f.removeEventListener("test",C,T)}catch{}return h})();function ye(h,T){if(ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(fe){e:{try{re(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ye.aa.h.call(this)}}q(ye,ie);var Ne={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),We=0;function at(h,T,C,R,z){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=z,this.key=++We,this.da=this.fa=!1}function Pn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function hn(h){this.src=h,this.g={},this.h=0}hn.prototype.add=function(h,T,C,R,z){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var le=_o(h,T,R,z);return-1<le?(T=h[le],C||(T.fa=!1)):(T=new at(T,this.src,W,!!R,z),T.fa=C,h.push(T)),T};function Ar(h,T){var C=T.type;if(C in h.g){var R=h.g[C],z=Array.prototype.indexOf.call(R,T,void 0),W;(W=0<=z)&&Array.prototype.splice.call(R,z,1),W&&(Pn(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function _o(h,T,C,R){for(var z=0;z<h.length;++z){var W=h[z];if(!W.da&&W.listener==T&&W.capture==!!C&&W.ha==R)return z}return-1}var Xn="closure_lm_"+(1e6*Math.random()|0),Cr={};function vo(h,T,C,R,z){if(Array.isArray(T)){for(var W=0;W<T.length;W++)vo(h,T[W],C,R,z);return null}return C=Eu(C),h&&h[Me]?h.K(T,C,m(R)?!!R.capture:!1,z):ud(h,T,C,!1,R,z)}function ud(h,T,C,R,z,W){if(!T)throw Error("Invalid event type");var le=m(z)?!!z.capture:!!z,Qe=Da(h);if(Qe||(h[Xn]=Qe=new hn(h)),C=Qe.add(T,C,R,le,W),C.proxy)return C;if(R=Tu(),C.proxy=R,R.src=h,R.listener=C,h.addEventListener)ce||(z=le),z===void 0&&(z=!1),h.addEventListener(T.toString(),R,z);else if(h.attachEvent)h.attachEvent(Eo(T.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Tu(){function h(C){return T.call(h.src,h.listener,C)}const T=cd;return h}function To(h,T,C,R,z){if(Array.isArray(T))for(var W=0;W<T.length;W++)To(h,T[W],C,R,z);else R=m(R)?!!R.capture:!!R,C=Eu(C),h&&h[Me]?(h=h.i,T=String(T).toString(),T in h.g&&(W=h.g[T],C=_o(W,C,R,z),-1<C&&(Pn(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete h.g[T],h.h--)))):h&&(h=Da(h))&&(T=h.g[T.toString()],h=-1,T&&(h=_o(T,C,R,z)),(C=-1<h?T[h]:null)&&Ir(C))}function Ir(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Me])Ar(T.i,h);else{var C=h.type,R=h.proxy;T.removeEventListener?T.removeEventListener(C,R,h.capture):T.detachEvent?T.detachEvent(Eo(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Da(T))?(Ar(C,h),C.h==0&&(C.src=null,T[Xn]=null)):Pn(h)}}}function Eo(h){return h in Cr?Cr[h]:Cr[h]="on"+h}function cd(h,T){if(h.da)h=!0;else{T=new ye(T,this);var C=h.listener,R=h.ha||h.src;h.fa&&Ir(h),h=C.call(R,T)}return h}function Da(h){return h=h[Xn],h instanceof hn?h:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(h){return typeof h=="function"?h:(h[Gt]||(h[Gt]=function(T){return h.handleEvent(T)}),h[Gt])}function Mt(){Q.call(this),this.i=new hn(this),this.M=this,this.F=null}q(Mt,Q),Mt.prototype[Me]=!0,Mt.prototype.removeEventListener=function(h,T,C,R){To(this,h,T,C,R)};function Vt(h,T){var C,R=h.F;if(R)for(C=[];R;R=R.F)C.push(R);if(h=h.M,R=T.type||T,typeof T=="string")T=new ie(T,h);else if(T instanceof ie)T.target=T.target||h;else{var z=T;T=new ie(R,h),D(T,z)}if(z=!0,C)for(var W=C.length-1;0<=W;W--){var le=T.g=C[W];z=Di(le,R,!0,T)&&z}if(le=T.g=h,z=Di(le,R,!0,T)&&z,z=Di(le,R,!1,T)&&z,C)for(W=0;W<C.length;W++)le=T.g=C[W],z=Di(le,R,!1,T)&&z}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],R=0;R<C.length;R++)Pn(C[R]);delete h.g[T],h.h--}}this.F=null},Mt.prototype.K=function(h,T,C,R){return this.i.add(String(h),T,!1,C,R)},Mt.prototype.L=function(h,T,C,R){return this.i.add(String(h),T,!0,C,R)};function Di(h,T,C,R){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,W=0;W<T.length;++W){var le=T[W];if(le&&!le.da&&le.capture==C){var Qe=le.listener,Ct=le.ha||le.src;le.fa&&Ar(h.i,le),z=Qe.call(Ct,R)!==!1&&z}}return z&&!R.defaultPrevented}function Su(h,T,C){if(typeof h=="function")C&&(h=S(h,C));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:f.setTimeout(h,T||0)}function Pa(h){h.g=Su(()=>{h.g=null,h.i&&(h.i=!1,Pa(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class fd extends Q{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Pa(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(h){Q.call(this),this.h=h,this.g={}}q(Rr,Q);var ps=[];function Zt(h){ue(h.g,function(T,C){this.g.hasOwnProperty(C)&&Ir(T)},h),h.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),Zt(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=f.JSON.stringify,an=f.JSON.parse,dd=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function ka(){}ka.prototype.h=null;function Au(h){return h.h||(h.h=h.i())}function wr(){}var li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ms(){ie.call(this,"d")}q(ms,ie);function Wn(){ie.call(this,"c")}q(Wn,ie);var Vn={},gs=null;function So(){return gs=gs||new Mt}Vn.La="serverreachability";function Va(h){ie.call(this,Vn.La,h)}q(Va,ie);function Pi(h){const T=So();Vt(T,new Va(T))}Vn.STAT_EVENT="statevent";function ys(h,T){ie.call(this,Vn.STAT_EVENT,h),this.stat=T}q(ys,ie);function zt(h){const T=So();Vt(T,new ys(T,h))}Vn.Ma="timingevent";function Ua(h,T){ie.call(this,Vn.Ma,h),this.size=T}q(Ua,ie);function _s(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},T)}function vs(){this.g=!0}vs.prototype.xa=function(){this.g=!1};function La(h,T,C,R,z,W){h.info(function(){if(h.g)if(W)for(var le="",Qe=W.split("&"),Ct=0;Ct<Qe.length;Ct++){var De=Qe[Ct].split("=");if(1<De.length){var Lt=De[0];De=De[1];var Ot=Lt.split("_");le=2<=Ot.length&&Ot[1]=="type"?le+(Lt+"="+De+"&"):le+(Lt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+C+`
`+le})}function Oa(h,T,C,R,z,W,le){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+C+`
`+W+" "+le})}function ki(h,T,C,R){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+ui(h,C)+(R?" "+R:"")})}function Cu(h,T){h.info(function(){return"TIMEOUT: "+T})}vs.prototype.info=function(){};function ui(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var R=C[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var W=z[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return kn(C)}catch{return T}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function Ts(){}q(Ts,ka),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},ci=new Ts;function fi(h,T,C,R){this.j=h,this.i=T,this.l=C,this.R=R||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iu}function Iu(){this.i=null,this.g="",this.h=!1}var qa={},Vi={};function br(h,T,C){h.L=1,h.v=Mr(yt(T)),h.m=C,h.P=!0,Ui(h,null)}function Ui(h,T){h.F=Date.now(),Zn(h),h.A=yt(h.v);var C=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),qi(C.i,"t",R),h.C=0,C=h.j.J,h.h=new Iu,h.g=Fu(h.j,C?T:null,!h.m),0<h.O&&(h.M=new fd(S(h.Y,h,h.g),h.O)),T=h.U,C=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(ps[0]=z.toString()),z=ps);for(var W=0;W<z.length;W++){var le=vo(C,z[W],R||T.handleEvent,!1,T.h||T);if(!le)break;T.g[le.key]=le}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Pi(),La(h.i,h.u,h.A,h.l,h.R,h.m)}fi.prototype.ca=function(h){h=h.target;const T=this.M;T&&cn(h)==3?T.j():this.Y(h)},fi.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=cn(this.g);var T=this.g.Ba();const Ps=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||kr(this.g)))){this.J||Ot!=4||T==7||(T==8||0>=Ps?Pi(3):Pi(2)),Ao(this);var C=this.g.Z();this.X=C;t:if(Li(this)){var R=kr(this.g);h="";var z=R.length,W=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Es(this);var le="";break t}this.h.i=new f.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,h+=this.h.i.decode(R[T],{stream:!(W&&T==z-1)});R.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=C==200,Oa(this.i,this.u,this.A,this.l,this.R,Ot,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Ct=this.g;if((Qe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Qe)){var De=Qe;break t}}De=null}if(C=De)ki(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,di(this,C);else{this.o=!1,this.s=3,zt(12),ln(this),Es(this);break e}}if(this.P){C=!0;let mn;for(;!this.J&&this.C<le.length;)if(mn=Nr(this,le),mn==Vi){Ot==4&&(this.s=4,zt(14),C=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==qa){this.s=4,zt(15),ki(this.i,this.l,le,"[Invalid Chunk]"),C=!1;break}else ki(this.i,this.l,mn,null),di(this,mn);if(Li(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||le.length!=0||this.h.h||(this.s=1,zt(16),C=!1),this.o=this.o&&C,!C)ki(this.i,this.l,le,"[Invalid Chunked Response]"),ln(this),Es(this);else if(0<le.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Xa(Lt),Lt.M=!0,zt(11))}}else ki(this.i,this.l,le,null),di(this,le);Ot==4&&ln(this),this.o&&!this.J&&(Ot==4?Ou(this.j,this):(this.o=!1,Zn(this)))}else Du(this.g),C==400&&0<le.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),ln(this),Es(this)}}}catch{}finally{}};function Li(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Nr(h,T){var C=h.C,R=T.indexOf(`
`,C);return R==-1?Vi:(C=Number(T.substring(C,R)),isNaN(C)?qa:(R+=1,R+C>T.length?Vi:(T=T.slice(R,R+C),h.C=R+C,T)))}fi.prototype.cancel=function(){this.J=!0,ln(this)};function Zn(h){h.S=Date.now()+h.I,Tt(h,h.I)}function Tt(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=_s(S(h.ba,h),T)}function Ao(h){h.B&&(f.clearTimeout(h.B),h.B=null)}fi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Cu(this.i,this.A),this.L!=2&&(Pi(),zt(17)),ln(this),this.s=2,Es(this)):Tt(this,this.S-h)};function Es(h){h.j.G==0||h.J||Ou(h.j,h)}function ln(h){Ao(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Zt(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function di(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||Ss(C.h,h))){if(!h.K&&Ss(C.h,h)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Ms(C),xs(C);else break e;Qa(C),zt(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=_s(S(C.Za,C),6e3));if(1>=Ru(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Fi(C,11)}else if((h.K||C.g==h)&&Ms(C),!$(T))for(z=C.Da.g.parse(T),T=0;T<z.length;T++){let De=z[T];if(C.T=De[0],De=De[1],C.G==2)if(De[0]=="c"){C.K=De[1],C.ia=De[2];const Lt=De[3];Lt!=null&&(C.la=Lt,C.j.info("VER="+C.la));const Ot=De[4];Ot!=null&&(C.Aa=Ot,C.j.info("SVER="+C.Aa));const Ps=De[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(R=1.5*Ps,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const mn=h.g;if(mn){const Lr=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var W=R.h;W.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(As(W,W.h),W.h=null))}if(R.D){const Gi=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gi&&(R.ya=Gi,He(R.I,R.D,Gi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var le=h;if(R.qa=Bu(R,R.J?R.ia:null,R.W),le.K){Un(R.h,le);var Qe=le,Ct=R.L;Ct&&(Qe.I=Ct),Qe.B&&(Ao(Qe),Zn(Qe)),R.g=le}else Uu(R);0<C.i.length&&Mo(C)}else De[0]!="stop"&&De[0]!="close"||Fi(C,7);else C.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Fi(C,7):Ka(C):De[0]!="noop"&&C.l&&C.l.ta(De),C.v=0)}}Pi(4)}catch{}}var hd=class{constructor(h,T){this.g=h,this.map=T}};function Ba(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ru(h){return h.h?1:h.g?h.g.size:0}function Ss(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function As(h,T){h.g?h.g.add(T):h.h=T}function Un(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}Ba.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function un(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return G(h.i)}function wu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var T=[],C=h.length,R=0;R<C;R++)T.push(h[R]);return T}T=[],C=0;for(R in h)T[C++]=h[R];return T}function pd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const R in h)T[C++]=R;return T}}}function Co(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=pd(h),R=wu(h),z=R.length,W=0;W<z;W++)T.call(void 0,R[W],C&&C[W],h)}var Ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Io(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var R=h[C].indexOf("="),z=null;if(0<=R){var W=h[C].substring(0,R);z=h[C].substring(R+1)}else W=h[C];T(W,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Oi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Oi){this.h=h.h,Cs(this,h.j),this.o=h.o,this.g=h.g,xr(this,h.s),this.l=h.l;var T=h.i,C=new hi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Ro(this,C),this.m=h.m}else h&&(T=String(h).match(Ga))?(this.h=!1,Cs(this,T[1]||"",!0),this.o=Is(T[2]||""),this.g=Is(T[3]||"",!0),xr(this,T[4]),this.l=Is(T[5]||"",!0),Ro(this,T[6]||"",!0),this.m=Is(T[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Oi.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Ln(T,za,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Ln(T,za,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Ln(C,C.charAt(0)=="/"?Ha:bu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Ln(C,yd)),h.join("")};function yt(h){return new Oi(h)}function Cs(h,T,C){h.j=C?Is(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function xr(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Ro(h,T,C){T instanceof hi?(h.i=T,Nu(h.i,h.h)):(C||(T=Ln(T,gd)),h.i=new hi(T,h.h))}function He(h,T,C){h.i.set(T,C)}function Mr(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Is(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ln(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,md),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function md(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var za=/[#\/\?@]/g,bu=/[#\?:]/g,Ha=/[#\?]/g,gd=/[#\?@]/g,yd=/#/g;function hi(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Ut(h){h.g||(h.g=new Map,h.h=0,h.i&&Io(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=hi.prototype,n.add=function(h,T){Ut(this),this.i=null,h=Cn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function wo(h,T){Ut(h),T=Cn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function bo(h,T){return Ut(h),T=Cn(h,T),h.g.has(T)}n.forEach=function(h,T){Ut(this),this.g.forEach(function(C,R){C.forEach(function(z){h.call(T,z,R,this)},this)},this)},n.na=function(){Ut(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const z=h[R];for(let W=0;W<z.length;W++)C.push(T[R])}return C},n.V=function(h){Ut(this);let T=[];if(typeof h=="string")bo(this,h)&&(T=T.concat(this.g.get(Cn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return Ut(this),this.i=null,h=Cn(this,h),bo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function qi(h,T,C){wo(h,T),0<C.length&&(h.i=null,h.g.set(Cn(h,T),G(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const W=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var z=W;le[R]!==""&&(z+="="+encodeURIComponent(String(le[R]))),h.push(z)}}return this.i=h.join("&")};function Cn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Nu(h,T){T&&!h.j&&(Ut(h),h.i=null,h.g.forEach(function(C,R){var z=R.toLowerCase();R!=z&&(wo(this,R),qi(this,z,C))},h)),h.j=T}function Ja(h,T){const C=new vs;if(f.Image){const R=new Image;R.onload=b(pn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=b(pn,C,"TestLoadImage: error",!1,T,R),R.onabort=b(pn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=b(pn,C,"TestLoadImage: timeout",!1,T,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else T(!1)}function xu(h,T){const C=new vs,R=new AbortController,z=setTimeout(()=>{R.abort(),pn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:R.signal}).then(W=>{clearTimeout(z),W.ok?pn(C,"TestPingServer: ok",!0,T):pn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),pn(C,"TestPingServer: error",!1,T)})}function pn(h,T,C,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(C)}catch{}}function jn(){this.g=new dd}function Ya(h,T,C){const R=C||"";try{Co(h,function(z,W){let le=z;m(z)&&(le=kn(z)),T.push(R+W+"="+encodeURIComponent(le))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function pi(h){this.l=h.Ub||null,this.j=h.eb||!1}q(pi,ka),pi.prototype.g=function(){return new In(this.l,this.j)},pi.prototype.i=(function(h){return function(){return h}})({});function In(h,T){Mt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(In,Mt),n=In.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Rs(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||f).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?mi(this):Rs(this),this.readyState==3&&No(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,mi(this))},n.Qa=function(h){this.g&&(this.response=h,mi(this))},n.ga=function(){this.g&&mi(this)};function mi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Rs(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function Rs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(In.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dr(h){let T="";return ue(h,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function ws(h,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Dr(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):He(h,T,C))}function lt(h){Mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(lt,Mt);var jt=/^https?$/i,Bi=["POST","PUT"];n=lt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?Au(this.o):Au(ci),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(W){Pr(this,W);return}if(h=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)C.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())C.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),z=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Bi,T,void 0))||R||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of C)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Pr(this,W)}};function Pr(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,bs(h),Ns(h)}function bs(h){h.A||(h.A=!0,Vt(h,"complete"),Vt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Vt(this,"complete"),Vt(this,"abort"),Ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mu(this):this.bb())},n.bb=function(){Mu(this)};function Mu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||cn(h)!=4||h.Z()!=2)){if(h.u&&cn(h)==4)Su(h.Ea,0,h);else if(Vt(h,"readystatechange"),cn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=le===0){var z=String(h.D).match(Ga)[1]||null;!z&&f.self&&f.self.location&&(z=f.self.location.protocol.slice(0,-1)),R=!jt.test(z?z.toLowerCase():"")}C=R}if(C)Vt(h,"complete"),Vt(h,"success");else{h.m=6;try{var W=2<cn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",bs(h)}}finally{Ns(h)}}}}function Ns(h,T){if(h.g){xo(h);const C=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Vt(h,"ready");try{C.onreadystatechange=R}catch{}}}function xo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function cn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),an(T)}};function kr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Du(h){const T={};h=(h.g&&2<=cn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if($(h[R]))continue;var C=U(h[R]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=T[z]||[];T[z]=W,W.push(C)}M(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Pu(h){this.Aa=0,this.i=[],this.j=new vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,h),this.cb=Vr("retryDelaySeedMs",1e4,h),this.Wa=Vr("forwardChannelMaxRetries",2,h),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ba(h&&h.concurrentRequestLimit),this.Da=new jn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pu.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,R){zt(0),this.W=h,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=Bu(this,null,this.W),Mo(this)};function Ka(h){if(ku(h),h.G==3){var T=h.U++,C=yt(h.I);if(He(C,"SID",h.K),He(C,"RID",T),He(C,"TYPE","terminate"),Ur(h,C),T=new fi(h,h.j,T),T.L=2,T.v=Mr(yt(C)),C=!1,f.navigator&&f.navigator.sendBeacon)try{C=f.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&f.Image&&(new Image().src=T.v,C=!0),C||(T.g=Fu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Zn(T)}Wa(h)}function xs(h){h.g&&(Xa(h),h.g.cancel(),h.g=null)}function ku(h){xs(h),h.u&&(f.clearTimeout(h.u),h.u=null),Ms(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Mo(h){if(!Fa(h.h)&&!h.s){h.s=!0;var T=h.Ga;ae||ze(),ge||(ae(),ge=!0),Fe.add(T,h),h.B=0}}function _d(h,T){return Ru(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=_s(S(h.Ga,h,T),qu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new fi(this,this.j,h);let W=this.o;if(this.S&&(W?(W=w(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(z.H=W,W=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=$a(this,z,T),C=yt(this.I),He(C,"RID",h),He(C,"CVER",22),this.D&&He(C,"X-HTTP-Session-Id",this.D),Ur(this,C),W&&(this.O?T="headers="+encodeURIComponent(String(Dr(W)))+"&"+T:this.m&&ws(C,this.m,W)),As(this.h,z),this.Ua&&He(C,"TYPE","init"),this.P?(He(C,"$req",T),He(C,"SID","null"),z.T=!0,br(z,C,null)):br(z,C,T),this.G=2}}else this.G==3&&(h?Vu(this,h):this.i.length==0||Fa(this.h)||Vu(this))};function Vu(h,T){var C;T?C=T.l:C=h.U++;const R=yt(h.I);He(R,"SID",h.K),He(R,"RID",C),He(R,"AID",h.T),Ur(h,R),h.m&&h.o&&ws(R,h.m,h.o),C=new fi(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=$a(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),As(h.h,C),br(C,R,T)}function Ur(h,T){h.H&&ue(h.H,function(C,R){He(T,R,C)}),h.l&&Co({},function(C,R){He(T,R,C)})}function $a(h,T,C){C=Math.min(h.i.length,C);var R=h.l?S(h.l.Na,h.l,h):null;e:{var z=h.i;let W=-1;for(;;){const le=["count="+C];W==-1?0<C?(W=z[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Qe=!0;for(let Ct=0;Ct<C;Ct++){let De=z[Ct].g;const Lt=z[Ct].map;if(De-=W,0>De)W=Math.max(0,z[Ct].g-100),Qe=!1;else try{Ya(Lt,le,"req"+De+"_")}catch{R&&R(Lt)}}if(Qe){R=le.join("&");break e}}}return h=h.i.splice(0,C),T.D=h,R}function Uu(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;ae||ze(),ge||(ae(),ge=!0),Fe.add(T,h),h.v=0}}function Qa(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=_s(S(h.Fa,h),qu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=_s(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),xs(this),Lu(this))};function Xa(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function Lu(h){h.g=new fi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=yt(h.qa);He(T,"RID","rpc"),He(T,"SID",h.K),He(T,"AID",h.T),He(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(T,"TO",h.ja),He(T,"TYPE","xmlhttp"),Ur(h,T),h.m&&h.o&&ws(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Mr(yt(T)),C.m=null,C.P=!0,Ui(C,h)}n.Za=function(){this.C!=null&&(this.C=null,xs(this),Qa(this),zt(19))};function Ms(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function Ou(h,T){var C=null;if(h.g==T){Ms(h),Xa(h),h.g=null;var R=2}else if(Ss(h.h,T))C=T.D,Un(h.h,T),R=1;else return;if(h.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var z=h.B;R=So(),Vt(R,new Ua(R,C)),Mo(h)}else Uu(h);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&_d(h,T)||R==2&&Qa(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),z){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function qu(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Fi(h,T){if(h.j.info("Error code "+T),T==2){var C=S(h.fb,h),R=h.Xa;const z=!R;R=new Oi(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Cs(R,"https"),Mr(R),z?Ja(R.toString(),C):xu(R.toString(),C)}else zt(2);h.G=0,h.l&&h.l.sa(T),Wa(h),ku(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Wa(h){if(h.G=0,h.ka=[],h.l){const T=un(h.h);(T.length!=0||h.i.length!=0)&&(H(h.ka,T),H(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function Bu(h,T,C){var R=C instanceof Oi?yt(C):new Oi(C);if(R.g!="")T&&(R.g=T+"."+R.g),xr(R,R.s);else{var z=f.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var W=new Oi(null);R&&Cs(W,R),T&&(W.g=T),z&&xr(W,z),C&&(W.l=C),R=W}return C=h.D,T=h.ya,C&&T&&He(R,C,T),He(R,"VER",h.la),Ur(h,R),R}function Fu(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new lt(new pi({eb:C})):new lt(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}n=Gu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Do(){}Do.prototype.g=function(h,T){return new fn(h,T)};function fn(h,T){Mt.call(this),this.g=new Pu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!$(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!$(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new Ds(this)}q(fn,Mt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ka(this.g)},fn.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=kn(h),h=C);T.i.push(new hd(T.Ya++,h)),T.G==3&&Mo(T)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ka(this.g),delete this.g,fn.aa.N.call(this)};function zu(h){ms.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const C in T){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}q(zu,ms);function Hu(){Wn.call(this),this.status=1}q(Hu,Wn);function Ds(h){this.g=h}q(Ds,Gu),Ds.prototype.ua=function(){Vt(this.g,"a")},Ds.prototype.ta=function(h){Vt(this.g,new zu(h))},Ds.prototype.sa=function(h){Vt(this.g,new Hu)},Ds.prototype.ra=function(){Vt(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,aS=function(){return new Do},oS=function(){return So()},rS=Vn,Up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,tf=gt,Ht.COMPLETE="complete",sS=Ht,wr.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Ol=wr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,iS=lt}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const tT="@firebase/firestore",nT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ca="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new pm("@firebase/firestore");function aa(){return ro.logLevel}function de(n,...e){if(ro.logLevel<=Oe.DEBUG){const t=e.map(ym);ro.debug(`Firestore (${Ca}): ${n}`,...t)}}function cs(n,...e){if(ro.logLevel<=Oe.ERROR){const t=e.map(ym);ro.error(`Firestore (${Ca}): ${n}`,...t)}}function dr(n,...e){if(ro.logLevel<=Oe.WARN){const t=e.map(ym);ro.warn(`Firestore (${Ca}): ${n}`,...t)}}function ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,lS(n,s,t)}function lS(n,e,t){let s=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw cs(s),new Error(s)}function Xe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||lS(e,o,s)}function we(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class f1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class d1{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new cr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new cr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new uS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class h1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class p1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new h1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class m1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=g1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Pe(n,e){return n<e?-1:n>e?1:0}function Lp(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Pe(s,o);{const l=cS(),c=y1(l.encode(sT(n,t)),l.encode(sT(e,t)));return c!==0?c:Pe(s,o)}}t+=s>65535?2:1}return Pe(n.length,e.length)}function sT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function y1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function va(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="__name__";class Ti{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Ti.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const s=Ti.isNumericId(e),o=Ti.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):Lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class pt extends Ti{construct(e,t,s){return new pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const _1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ti{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return _1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rT}static keyField(){return new Xt([rT])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function T1(n,e,t,s){if(e===!0&&s===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oT(n){if(!Te.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Zl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function cu(n,e){if(!fS(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=-62135596800,lT=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*lT);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aT)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lT}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:xt("string",dt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new dt(0,0))}static max(){return new Ie(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=-1;function E1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new hr(o,Te.empty(),e)}function S1(n){return new hr(n.readTime,n.key,jl)}class hr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new hr(Ie.min(),Te.empty(),jl)}static max(){return new hr(Ie.max(),Te.empty(),jl)}}function A1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==C1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((o=>o?se.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++f,f===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function R1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ra(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Gf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=-1;function zf(n){return n==null}function yf(n){return n===0&&1/n==-1/0}function w1(n){return typeof n=="number"&&Number.isInteger(n)&&!yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="";function b1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uT(e)),e=N1(n.get(t),e);return uT(e)}function N1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case dS:t+="";break;default:t+=l}}return t}function uT(n){return n+dS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Qt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fT(this.data.getIterator())}getIteratorFrom(e){return new fT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class fT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ii([])}unionWith(e){let t=new kt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pS("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const x1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=x1.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mr(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="server_timestamp",gS="__type__",yS="__previous_value__",_S="__local_write_time__";function Em(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gS])===null||t===void 0?void 0:t.stringValue)===mS}function Hf(n){const e=n.mapValue.fields[yS];return Em(e)?Hf(e):e}function eu(n){const e=pr(n.mapValue.fields[_S].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t,s,o,l,c,f,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const _f="(default)";class tu{constructor(e,t){this.projectId=e,this.database=t||_f}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="__type__",D1="__max__",Xc={mapValue:{}},TS="__vector__",vf="value";function gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:k1(n)?9007199254740991:P1(n)?10:11:Ae(28295,{value:n})}function wi(n,e){if(n===e)return!0;const t=gr(n);if(t!==gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eu(n).isEqual(eu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=pr(o.timestampValue),f=pr(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return mr(o.bytesValue).isEqual(mr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=At(o.doubleValue),f=At(l.doubleValue);return c===f?yf(c)===yf(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return va(n.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(cT(c)!==cT(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!wi(c[p],f[p])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function nu(n,e){return(n.values||[]).find((t=>wi(t,e)))!==void 0}function Ta(n,e){if(n===e)return 0;const t=gr(n),s=gr(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=At(l.integerValue||l.doubleValue),p=At(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return dT(n.timestampValue,e.timestampValue);case 4:return dT(eu(n),eu(e));case 5:return Lp(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=mr(l),p=mr(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const v=Pe(f[m],p[m]);if(v!==0)return v}return Pe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Pe(At(l.latitude),At(c.latitude));return f!==0?f:Pe(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var f,p,m,v;const E=l.fields||{},S=c.fields||{},b=(f=E[vf])===null||f===void 0?void 0:f.arrayValue,q=(p=S[vf])===null||p===void 0?void 0:p.arrayValue,G=Pe(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:hT(b,q)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Xc.mapValue&&c===Xc.mapValue)return 0;if(l===Xc.mapValue)return 1;if(c===Xc.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=Lp(p[E],v[E]);if(S!==0)return S;const b=Ta(f[p[E]],m[v[E]]);if(b!==0)return b}return Pe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{le:t})}}function dT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=pr(n),s=pr(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function hT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ta(t[o],s[o]);if(l)return l}return Pe(t.length,s.length)}function Ea(n){return Op(n)}function Op(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=pr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Op(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Op(t.fields[c])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function nf(n){switch(gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(n);return e?16+nf(e):16;case 5:return 2*n.stringValue.length;case 6:return mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nf(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ho(s.fields,((l,c)=>{o+=l.length+nf(c)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function qp(n){return!!n&&"integerValue"in n}function Sm(n){return!!n&&"arrayValue"in n}function pT(n){return!!n&&"nullValue"in n}function mT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function P1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[vS])===null||t===void 0?void 0:t.stringValue)===TS}function Hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ho(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Hl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function k1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===D1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(t)}setAll(e){let t=Xt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=Hl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ho(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Yn(Hl(this.value))}}function ES(n){const e=[];return ho(n.fields,((t,s)=>{const o=new Xt([t]);if(sf(s)){const l=ES(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new sn(e,0,Ie.min(),Ie.min(),Ie.min(),Yn.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Ie.min(),Ie.min(),Yn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Ie.min(),Ie.min(),Yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t){this.position=e,this.inclusive=t}}function gT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(c.referenceValue),t.key):s=Ta(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function yT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function V1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{}class Pt extends SS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new L1(e,t,s):t==="array-contains"?new B1(e,s):t==="in"?new F1(e,s):t==="not-in"?new G1(e,s):t==="array-contains-any"?new z1(e,s):new Pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new O1(e,s):new q1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ta(t,this.value)):t!==null&&gr(this.value)===gr(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends SS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new bi(e,t)}matches(e){return AS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AS(n){return n.op==="and"}function CS(n){return U1(n)&&AS(n)}function U1(n){for(const e of n.filters)if(e instanceof bi)return!1;return!0}function Bp(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Ea(n.value);if(CS(n))return n.filters.map((e=>Bp(e))).join(",");{const e=n.filters.map((t=>Bp(t))).join(",");return`${n.op}(${e})`}}function IS(n,e){return n instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&wi(s.value,o.value)})(n,e):n instanceof bi?(function(s,o){return o instanceof bi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&IS(c,o.filters[f])),!0):!1})(n,e):void Ae(19439)}function RS(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ea(t.value)}`})(n):n instanceof bi?(function(t){return t.op.toString()+" {"+t.getFilters().map(RS).join(" ,")+"}"})(n):"Filter"}class L1 extends Pt{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class O1 extends Pt{constructor(e,t){super(e,"in",t),this.keys=wS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class q1 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=wS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Te.fromName(s.referenceValue)))}class B1 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sm(t)&&nu(t.arrayValue,this.value)}}class F1 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nu(this.value.arrayValue,t)}}class G1 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nu(this.value.arrayValue,t)}}class z1 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function _T(n,e=null,t=[],s=[],o=null,l=null,c=null){return new H1(n,e,t,s,o,l,c)}function Am(n){const e=we(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Bp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ea(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ea(s))).join(",")),e.Pe=t}return e.Pe}function Cm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yT(n.startAt,e.startAt)&&yT(n.endAt,e.endAt)}function Fp(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function J1(n,e,t,s,o,l,c,f){return new Jf(n,e,t,s,o,l,c,f)}function Im(n){return new Jf(n)}function vT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Y1(n){return n.collectionGroup!==null}function Jl(n){const e=we(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new kt(Xt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ef(l,s))})),t.has(Xt.keyField().canonicalString())||e.Te.push(new Ef(Xt.keyField(),s))}return e.Te}function Si(n){const e=we(n);return e.Ie||(e.Ie=K1(e,Jl(n))),e.Ie}function K1(n,e){if(n.limitType==="F")return _T(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ef(o.field,l)}));const t=n.endAt?new Tf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Tf(n.startAt.position,n.startAt.inclusive):null;return _T(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Gp(n,e,t){return new Jf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Yf(n,e){return Cm(Si(n),Si(e))&&n.limitType===e.limitType}function bS(n){return`${Am(Si(n))}|lt:${n.limitType}`}function la(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>RS(o))).join(", ")}]`),zf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ea(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ea(o))).join(",")),`Target(${s})`})(Si(n))}; limitType=${n.limitType})`}function Kf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Jl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const m=gT(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,Jl(s),o)||s.endAt&&!(function(c,f,p){const m=gT(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,Jl(s),o))})(n,e)}function $1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NS(n){return(e,t)=>{let s=!1;for(const o of Jl(n)){const l=Q1(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function Q1(n,e,t){const s=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),m=f.data.field(l);return p!==null&&m!==null?Ta(p,m):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return hS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new mt(Te.comparator);function fs(){return X1}const xS=new mt(Te.comparator);function ql(...n){let e=xS;for(const t of n)e=e.insert(t.key,t);return e}function MS(n){let e=xS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function eo(){return Yl()}function DS(){return Yl()}function Yl(){return new po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const W1=new mt(Te.comparator),Z1=new kt(Te.comparator);function qe(...n){let e=Z1;for(const t of n)e=e.add(t);return e}const j1=new kt(Pe);function eb(){return j1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function PS(n){return{integerValue:""+n}}function tb(n,e){return w1(e)?PS(e):Rm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function nb(n,e,t){return n instanceof Sf?(function(o,l){const c={fields:{[gS]:{stringValue:mS},[_S]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Em(l)&&(l=Hf(l)),l&&(c.fields[yS]=l),{mapValue:c}})(t,e):n instanceof iu?VS(n,e):n instanceof su?US(n,e):(function(o,l){const c=kS(o,l),f=TT(c)+TT(o.Ee);return qp(c)&&qp(o.Ee)?PS(f):Rm(o.serializer,f)})(n,e)}function ib(n,e,t){return n instanceof iu?VS(n,e):n instanceof su?US(n,e):t}function kS(n,e){return n instanceof Af?(function(s){return qp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Sf extends $f{}class iu extends $f{constructor(e){super(),this.elements=e}}function VS(n,e){const t=LS(e);for(const s of n.elements)t.some((o=>wi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class su extends $f{constructor(e){super(),this.elements=e}}function US(n,e){let t=LS(e);for(const s of n.elements)t=t.filter((o=>!wi(o,s)));return{arrayValue:{values:t}}}class Af extends $f{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function TT(n){return At(n.integerValue||n.doubleValue)}function LS(n){return Sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function sb(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof iu&&o instanceof iu||s instanceof su&&o instanceof su?va(s.elements,o.elements,wi):s instanceof Af&&o instanceof Af?wi(s.Ee,o.Ee):s instanceof Sf&&o instanceof Sf})(n.transform,e.transform)}class rb{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qf{}function OS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BS(n.key,as.none()):new fu(n.key,n.data,as.none());{const t=n.data,s=Yn.empty();let o=new kt(Xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new mo(n.key,s,new ii(o.toArray()),as.none())}}function ob(n,e,t){n instanceof fu?(function(o,l,c){const f=o.value.clone(),p=ST(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof mo?(function(o,l,c){if(!rf(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=ST(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(qS(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Kl(n,e,t,s){return n instanceof fu?(function(l,c,f,p){if(!rf(l.precondition,c))return f;const m=l.value.clone(),v=AT(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof mo?(function(l,c,f,p){if(!rf(l.precondition,c))return f;const m=AT(l.fieldTransforms,p,c),v=c.data;return v.setAll(qS(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return rf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function ab(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=kS(s.transform,o||null);l!=null&&(t===null&&(t=Yn.empty()),t.set(s.field,l))}return t||null}function ET(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&va(s,o,((l,c)=>sb(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fu extends Qf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mo extends Qf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function ST(n,e,t){const s=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,ib(c,f,t[o]))}return s}function AT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,nb(l,c,e))}return s}class BS extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ob(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Kl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Kl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=DS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=OS(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,((t,s)=>ET(t,s)))&&va(this.baseMutations,e.baseMutations,((t,s)=>ET(t,s)))}}class wm{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=(function(){return W1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new wm(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ge;function db(n){switch(n){case oe.OK:return Ae(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function FS(n){if(n===void 0)return cs("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Nt.OK:return oe.OK;case Nt.CANCELLED:return oe.CANCELLED;case Nt.UNKNOWN:return oe.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return oe.INTERNAL;case Nt.UNAVAILABLE:return oe.UNAVAILABLE;case Nt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Nt.NOT_FOUND:return oe.NOT_FOUND;case Nt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Nt.ABORTED:return oe.ABORTED;case Nt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Nt.DATA_LOSS:return oe.DATA_LOSS;default:return Ae(39323,{code:n})}}(Ge=Nt||(Nt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new ur([4294967295,4294967295],0);function CT(n){const e=cS().encode(n),t=new nS;return t.update(e),new Uint8Array(t.digest())}function IT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ur([t,s],0),new ur([o,l],0)]}class bm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Bl(`Invalid padding: ${t}`);if(s<0)throw new Bl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ur.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(ur.fromNumber(s)));return o.compare(hb)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=CT(e),[s,o]=IT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new bm(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.fe===0)return;const t=CT(e),[s,o]=IT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Xf(Ie.min(),o,new mt(Pe),fs(),qe())}}class du{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class GS{constructor(e,t){this.targetId=e,this.De=t}}class zS{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class RT{constructor(){this.ve=0,this.Ce=wT(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),s=qe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}})),new du(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=wT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class pb{constructor(e){this.We=e,this.Ge=new Map,this.ze=fs(),this.je=Wc(),this.Je=Wc(),this.He=new mt(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(Fp(l))if(s===0){const c=new Te(l.path);this.Xe(t,c,sn.newNoDocument(c,Ie.min()))}else Xe(s===1,20013,{expectedCount:s});else{const c=this.ot(t);if(c!==s){const f=this._t(e),p=f?this.ut(f,e,c):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=mr(s).toUint8Array()}catch(p){if(p instanceof pS)return dr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new bm(c,o,l)}catch(p){return dr(p instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&Fp(f.target)){const p=new Te(f.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,sn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let s=qe();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new Xf(e,t,this.He,this.ze,s);return this.ze=fs(),this.je=Wc(),this.Je=Wc(),this.He=new mt(Pe),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new RT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new RT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Wc(){return new mt(Te.comparator)}function wT(){return new mt(Te.comparator)}const mb={asc:"ASCENDING",desc:"DESCENDING"},gb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yb={and:"AND",or:"OR"};class _b{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zp(n,e){return n.useProto3Json||zf(e)?e:{value:e}}function Cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vb(n,e){return Cf(n,e.toTimestamp())}function Ai(n){return Xe(!!n,49232),Ie.fromTimestamp((function(t){const s=pr(t);return new dt(s.seconds,s.nanos)})(n))}function Nm(n,e){return Hp(n,e).canonicalString()}function Hp(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JS(n){const e=pt.fromString(n);return Xe(XS(e),10190,{key:e.toString()}),e}function Jp(n,e){return Nm(n.databaseId,e.path)}function Ap(n,e){const t=JS(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(KS(t))}function YS(n,e){return Nm(n.databaseId,e)}function Tb(n){const e=JS(n);return e.length===4?pt.emptyPath():KS(e)}function Yp(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KS(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bT(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function Eb(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?oe.UNKNOWN:FS(m.code);return new _e(v,m.message||"")})(c);t=new zS(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ap(n,s.document.name),l=Ai(s.document.updateTime),c=s.document.createTime?Ai(s.document.createTime):Ie.min(),f=new Yn({mapValue:{fields:s.document.fields}}),p=sn.newFoundDocument(o,l,c,f),m=s.targetIds||[],v=s.removedTargetIds||[];t=new of(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ap(n,s.document),l=s.readTime?Ai(s.readTime):Ie.min(),c=sn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new of([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ap(n,s.document),l=s.removedTargetIds||[];t=new of([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new fb(o,l),f=s.targetId;t=new GS(f,c)}}return t}function Sb(n,e){let t;if(e instanceof fu)t={update:bT(n,e.key,e.value)};else if(e instanceof BS)t={delete:Jp(n,e.key)};else if(e instanceof mo)t={update:bT(n,e.key,e.data),updateMask:Mb(e.fieldMask)};else{if(!(e instanceof lb))return Ae(16599,{Rt:e.type});t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof Sf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof iu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Af)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:vb(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function Ab(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Ai(o.updateTime):Ai(l);return c.isEqual(Ie.min())&&(c=Ai(l)),new rb(c,o.transformResults||[])})(t,e)))):[]}function Cb(n,e){return{documents:[YS(n,e.path)]}}function Ib(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=YS(n,o);const l=(function(m){if(m.length!==0)return QS(bi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:ua(S.field),direction:bb(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=zp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function Rb(n){let e=Tb(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=$S(E);return S instanceof bi&&CS(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(q){return new Ef(ca(q.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let S;return S=typeof E=="object"?E.value:E,zf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,b=E.values||[];return new Tf(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,b=E.values||[];return new Tf(b,S)})(t.endAt)),J1(e,o,c,l,f,"F",p,m)}function wb(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $S(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ca(t.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ca(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ca(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ca(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(ca(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return bi.create(t.compositeFilter.filters.map((s=>$S(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function bb(n){return mb[n]}function Nb(n){return gb[n]}function xb(n){return yb[n]}function ua(n){return{fieldPath:n.canonicalString()}}function ca(n){return Xt.fromServerFormat(n.fieldPath)}function QS(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(mT(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NAN"}};if(pT(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mT(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NAN"}};if(pT(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(t.field),op:Nb(t.op),value:t.value}}})(n):n instanceof bi?(function(t){const s=t.getFilters().map((o=>QS(o)));return s.length===1?s[0]:{compositeFilter:{op:xb(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function Mb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function XS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t,s,o,l=Ie.min(),c=Ie.min(),f=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.gt=e}}function Pb(n){const e=Rb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.Dn=new Vb}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(hr.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Vb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new kt(pt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WS=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(WS,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Sa(0)}static ur(){return new Sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="LruGarbageCollector",Ub=1048576;function MT([n,e],[t,s]){const o=Pe(n,t);return o===0?Pe(e,s):o}class Lb{constructor(e){this.Tr=e,this.buffer=new kt(MT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();MT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ob{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(xT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ra(t)?de(xT,"Ignoring IndexedDB error during garbage collection: ",t):await Ia(t)}await this.Rr(3e5)}))}}class qb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Gf.ue);const s=new Lb(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(NT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NT):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,c,f,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),aa()<=Oe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function Bb(n,e){return new qb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.changes=new po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Kl(s.mutation,o,ii.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const o=eo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=ql();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=eo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=fs();const c=Yl(),f=(function(){return Yl()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof mo)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Kl(v.mutation,m,v.mutation.getFieldMask(),dt.now())):c.set(m.key,ii.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>{var E;return f.set(m,new Gb(v,(E=c.get(m))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=Yl();let o=new mt(((c,f)=>c-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||ii.empty();v=f.applyToLocalView(m,v),s.set(p,v);const E=(o.get(f.batchId)||qe()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,v=p.value,E=DS();v.forEach((S=>{if(!l.has(S)){const b=OS(t.get(S),s.get(S));b!==null&&E.set(S,b),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Te.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve(eo());let f=jl,p=l;return c.next((m=>se.forEach(m,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,qe()))).next((v=>({batchId:f,changes:MS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((s=>{let o=ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=ql();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(p=>{const m=(function(E,S){return new Jf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))}));let f=ql();return c.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&Kl(v.mutation,m,ii.empty(),dt.now()),Kf(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ai(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:Pb(o.bundledQuery),readTime:Ai(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.overlays=new mt(Te.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=eo();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.wt(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=eo(),l=t.length+1,c=new Te(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new mt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=eo(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const f=eo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>f.set(m,v))),!(f.size()>=o)););return se.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new cb(t,s));let l=this.kr.get(t);l===void 0&&(l=qe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.qr=new kt(Bt.Qr),this.$r=new kt(Bt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Te(new pt([])),s=new Bt(t,e),o=new Bt(t,e+1),l=[];return this.$r.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Te(new pt([])),s=new Bt(t,e),o=new Bt(t,e+1);let l=qe();return this.$r.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Te.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(Bt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new ub(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Yr=this.Yr.add(new Bt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Tm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(Pe);return t.forEach((o=>{const l=new Bt(o,0),c=new Bt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),se.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new Te(l),0);let f=new kt(Pe);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(f=f.add(p.Hr)),!0)}),c),se.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return se.forEach(t.mutations,(o=>{const l=new Bt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Bt(t,0),o=this.Yr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.ni=e,this.docs=(function(){return new mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=fs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():sn.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=fs();const c=t.path,f=new Te(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||A1(S1(v),s)<=0||(o.has(v.key)||Kf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ri(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Qb(this)}getSize(e){return se.resolve(this.size)}}class Qb extends Fb{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.persistence=e,this.ii=new po((t=>Am(t)),Cm),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new xm,this.targetCount=0,this._i=Sa.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Sa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Gf(0),this.ci=!1,this.ci=!0,this.li=new Yb,this.referenceDelegate=e(this),this.hi=new Xb(this),this.indexManager=new kb,this.remoteDocumentCache=(function(o){return new $b(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new Db(t),this.Ti=new Hb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new Kb(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new Wb(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return se.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class Wb extends I1{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Ai=new xm,this.Ri=null}static Vi(e){return new Mm(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(s=>{const o=Te.fromPath(s);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class If{constructor(e,t){this.persistence=e,this.gi=new po((s=>b1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Bb(this,t)}static Vi(e,t){return new If(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}Sr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Dm(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return YR()?8:R1(on())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Zb;return this.ws(e,t,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,c,f.size)}))})).next((()=>l.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(aa()<=Oe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(aa()<=Oe.DEBUG&&de("QueryEngine","Query:",la(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(aa()<=Oe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(t))):se.resolve())}ps(e,t){if(vT(t))return se.resolve(null);let s=Si(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Gp(t,null,"F"),s=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.gs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.bs(t,f);return this.Ds(t,m,c,p.readTime)?this.ps(e,Gp(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,s,o){return vT(t)||o.isEqual(Ie.min())?se.resolve(null):this.gs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,s,o)?se.resolve(null):(aa()<=Oe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),la(t)),this.vs(e,c,t,E1(o,jl)).next((f=>f)))}))}bs(e,t){let s=new kt(NS(e));return t.forEach(((o,l)=>{Kf(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return aa()<=Oe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",la(t)),this.gs.getDocumentsMatchingQuery(e,t,hr.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LocalStore",eN=3e8;class tN{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Pe),this.Ms=new po((l=>Am(l)),Cm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function nN(n,e,t,s){return new tN(n,e,t,s)}async function jS(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=qe();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){f.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Bs:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function iN(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,v){const E=m.batch,S=E.keys();let b=se.resolve();return S.forEach((q=>{b=b.next((()=>v.getEntry(p,q))).next((G=>{const H=m.docVersions.get(q);Xe(H!==null,48541),G.version.compareTo(H)<0&&(E.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=qe();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function eA(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function sN(n,e){const t=we(n),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;f.push(t.hi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,E))));let b=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Wt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(E,b),(function(G,H,ee){return G.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=eN?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,b,v)&&f.push(t.hi.updateTargetData(l,b))}));let p=fs(),m=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(rN(l,c,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!s.isEqual(Ie.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return se.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function rN(n,e,t){let s=qe(),o=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=fs();return t.forEach(((f,p)=>{const m=l.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):de(Pm,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function oN(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Tm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function aN(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((l=>l?(o=l,se.resolve(o)):t.hi.allocateTargetId(s).next((c=>(o=new or(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function Kp(n,e,t){const s=we(n),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ra(c))throw c;de(Pm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function DT(n,e,t){const s=we(n);let o=Ie.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const E=we(p),S=E.Ms.get(v);return S!==void 0?se.resolve(E.Fs.get(S)):E.hi.getTargetData(m,v)})(s,c,Si(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:qe()))).next((f=>(lN(s,$1(e),f),{documents:f,qs:l})))))}function lN(n,e,t){let s=n.xs.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class PT{constructor(){this.activeTargetIds=eb()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uN{constructor(){this.Fo=new PT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new PT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="ConnectivityMonitor";class VT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(kT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(kT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function $p(){return Zc===null?Zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===_f?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=$p(),f=this.Go(e,t.toUriEncodedString());de(Cp,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:m}=new URL(f),v=co(m);return this.jo(e,f,p,s,v).then((E=>(de(Cp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw dr(Cp,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const s=fN[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class pN extends dN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const c=$p();return new Promise(((f,p)=>{const m=new iS;m.setWithCredentials(!0),m.listenOnce(sS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case tf.NO_ERROR:const E=m.getResponseJson();de(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case tf.TIMEOUT:de(tn,`RPC '${e}' ${c} timed out`),p(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const S=m.getStatus();if(de(tn,`RPC '${e}' ${c} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const G=(function(ee){const $=ee.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf($)>=0?$:oe.UNKNOWN})(q.status);p(new _e(G,q.message))}else p(new _e(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{de(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);de(tn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,s,15)}))}P_(e,t,s){const o=$p(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=aS(),f=oS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.T_(E);let S=!1,b=!1;const q=new hN({Ho:H=>{b?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),de(tn,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Yo:()=>E.close()}),G=(H,ee,$)=>{H.listen(ee,(Z=>{try{$(Z)}catch(re){setTimeout((()=>{throw re}),0)}}))};return G(E,Ol.EventType.OPEN,(()=>{b||(de(tn,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),G(E,Ol.EventType.CLOSE,(()=>{b||(b=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(E))})),G(E,Ol.EventType.ERROR,(H=>{b||(b=!0,dr(tn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),q.__(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),G(E,Ol.EventType.MESSAGE,(H=>{var ee;if(!b){const $=H.data[0];Xe(!!$,16349);const Z=$,re=(Z==null?void 0:Z.error)||((ee=Z[0])===null||ee===void 0?void 0:ee.error);if(re){de(tn,`RPC '${e}' stream ${o} received error:`,re);const fe=re.status;let ue=(function(N){const D=Nt[N];if(D!==void 0)return FS(D)})(fe),M=re.message;ue===void 0&&(ue=oe.INTERNAL,M="Unknown error status: "+fe+" with message "+re.message),b=!0,q.__(new _e(ue,M)),E.close()}else de(tn,`RPC '${e}' stream ${o} received:`,$),q.a_($)}})),G(f,rS.STAT_EVENT,(H=>{H.stat===Up.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Up.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){return new _b(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="PersistentStream";class nA{constructor(e,t,s,o,l,c,f,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new _e(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return de(UT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(de(UT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mN extends nA{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Eb(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Ai(c.readTime):Ie.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=Yp(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Fp(p)?{documents:Cb(l,p)}:{query:Ib(l,p).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=HS(l,c.resumeToken);const m=zp(l,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Cf(l,c.snapshotVersion.toTimestamp());const m=zp(l,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=wb(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=Yp(this.serializer),t.removeTarget=e,this.k_(t)}}class gN extends nA{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Ab(e.writeResults,e.commitTime),s=Ai(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=Yp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Sb(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{}class _N extends yN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Hp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(oe.UNKNOWN,l.toString())}))}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(e,Hp(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(oe.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class vN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(cs(t),this._a=!1):de("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class TN{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{s.enqueueAndForget((async()=>{go(this)&&(de(oo,"Restarting streams for network reachability change."),await(async function(p){const m=we(p);m.Ia.add(4),await hu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Zf(m)})(this))}))})),this.Aa=new vN(s,o)}}async function Zf(n){if(go(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function iA(n,e){const t=we(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Lm(t)?Um(t):wa(t).x_()&&Vm(t,e))}function km(n,e){const t=we(n),s=wa(t);t.Ta.delete(e),s.x_()&&sA(t,e),t.Ta.size===0&&(s.x_()?s.B_():go(t)&&t.Aa.set("Unknown"))}function Vm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wa(n).H_(e)}function sA(n,e){n.Ra.$e(e),wa(n).Y_(e)}function Um(n){n.Ra=new pb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),wa(n).start(),n.Aa.aa()}function Lm(n){return go(n)&&!wa(n).M_()&&n.Ta.size>0}function go(n){return we(n).Ia.size===0}function rA(n){n.Ra=void 0}async function EN(n){n.Aa.set("Online")}async function SN(n){n.Ta.forEach(((e,t)=>{Vm(n,e)}))}async function AN(n,e){rA(n),Lm(n)?(n.Aa.la(e),Um(n)):n.Aa.set("Unknown")}async function CN(n,e,t){if(n.Aa.set("Online"),e instanceof zS&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ta.delete(f),o.Ra.removeTarget(f))})(n,e)}catch(s){de(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rf(n,s)}else if(e instanceof of?n.Ra.Ye(e):e instanceof GS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ie.min()))try{const s=await eA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ta.get(m);v&&l.Ta.set(m,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const v=l.Ta.get(p);if(!v)return;l.Ta.set(p,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),sA(l,p);const E=new or(v.target,p,m,v.sequenceNumber);Vm(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){de(oo,"Failed to raise snapshot:",s),await Rf(n,s)}}async function Rf(n,e,t){if(!Ra(e))throw e;n.Ia.add(1),await hu(n),n.Aa.set("Offline"),t||(t=()=>eA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(oo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Zf(n)}))}function oA(n,e){return e().catch((t=>Rf(n,t,e)))}async function jf(n){const e=we(n),t=yr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Tm;for(;IN(e);)try{const o=await oN(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,RN(e,o)}catch(o){await Rf(e,o)}aA(e)&&lA(e)}function IN(n){return go(n)&&n.Pa.length<10}function RN(n,e){n.Pa.push(e);const t=yr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function aA(n){return go(n)&&!yr(n).M_()&&n.Pa.length>0}function lA(n){yr(n).start()}async function wN(n){yr(n).na()}async function bN(n){const e=yr(n);for(const t of n.Pa)e.X_(t.mutations)}async function NN(n,e,t){const s=n.Pa.shift(),o=wm.from(s,e,t);await oA(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await jf(n)}async function xN(n,e){e&&yr(n).Z_&&await(async function(s,o){if((function(c){return db(c)&&c!==oe.ABORTED})(o.code)){const l=s.Pa.shift();yr(s).N_(),await oA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await jf(s)}})(n,e),aA(n)&&lA(n)}async function LT(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),de(oo,"RemoteStore received new credentials");const s=go(t);t.Ia.add(3),await hu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Zf(t)}async function MN(n,e){const t=we(n);e?(t.Ia.delete(2),await Zf(t)):e||(t.Ia.add(2),await hu(t),t.Aa.set("Unknown"))}function wa(n){return n.Va||(n.Va=(function(t,s,o){const l=we(t);return l.ia(),new mN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:EN.bind(null,n),e_:SN.bind(null,n),n_:AN.bind(null,n),J_:CN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Lm(n)?Um(n):n.Aa.set("Unknown")):(await n.Va.stop(),rA(n))}))),n.Va}function yr(n){return n.ma||(n.ma=(function(t,s,o){const l=we(t);return l.ia(),new gN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wN.bind(null,n),n_:xN.bind(null,n),ea:bN.bind(null,n),ta:NN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await jf(n)):(await n.ma.stop(),n.Pa.length>0&&(de(oo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Om(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(n,e){if(cs("AsyncQueue",`${e}: ${n}`),Ra(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=ql(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.fa=new mt(Te.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Aa{constructor(e,t,s,o,l,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Aa(e,t,da.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class PN{constructor(){this.queries=qT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=we(t),l=o.queries;o.queries=qT(),l.forEach(((c,f)=>{for(const p of f.wa)p.onError(s)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function qT(){return new po((n=>bS(n)),Yf)}async function kN(n,e){const t=we(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new DN,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=qm(c,`Initialization of query '${la(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Bm(t)}async function VN(n,e){const t=we(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function UN(n,e){const t=we(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.wa)f.Ca(o)&&(s=!0);c.ya=o}}s&&Bm(t)}function LN(n,e,t){const s=we(n),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function Bm(n){n.Da.forEach((e=>{e.next()}))}var Qp,BT;(BT=Qp||(Qp={})).Fa="default",BT.Cache="cache";class ON{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Aa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Qp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class cA{constructor(e){this.key=e}}class qN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=NS(e),this.eu=new da(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new OT,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),b=Kf(this.query,E)?E:null,q=!!S&&this.mutatedKeys.has(S.key),G=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let H=!1;S&&b?S.data.isEqual(b.data)?q!==G&&(s.track({type:3,doc:b}),H=!0):this.iu(S,b)||(s.track({type:2,doc:b}),H=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(f=!0)):!S&&b?(s.track({type:0,doc:b}),H=!0):S&&!b&&(s.track({type:1,doc:S}),H=!0,(p||m)&&(f=!0)),H&&(b?(c=c.add(b),l=G?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:c,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((v,E)=>(function(b,q){const G=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:H})}};return G(b)-G(q)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,c.length!==0||m?{snapshot:new Aa(this.query,e.eu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new OT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=qe(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new cA(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new uA(s))})),t}uu(e){this.Ha=e.qs,this.Za=qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Aa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fm="SyncEngine";class BN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class FN{constructor(e){this.key=e,this.lu=!1}}class GN{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new po((f=>bS(f)),Yf),this.Tu=new Map,this.Iu=new Set,this.du=new mt(Te.comparator),this.Eu=new Map,this.Au=new xm,this.Ru={},this.Vu=new Map,this.mu=Sa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function zN(n,e,t=!0){const s=gA(n);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await fA(s,e,t,!0),o}async function HN(n,e){const t=gA(n);await fA(t,e,!0,!1)}async function fA(n,e,t,s){const o=await aN(n.localStore,Si(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await JN(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&iA(n.remoteStore,o),f}async function JN(n,e,t,s,o){n.gu=(E,S,b)=>(async function(G,H,ee,$){let Z=H.view.nu(ee);Z.Ds&&(Z=await DT(G.localStore,H.query,!1).then((({documents:M})=>H.view.nu(M,Z))));const re=$&&$.targetChanges.get(H.targetId),fe=$&&$.targetMismatches.get(H.targetId)!=null,ue=H.view.applyChanges(Z,G.isPrimaryClient,re,fe);return GT(G,H.targetId,ue._u),ue.snapshot})(n,E,S,b);const l=await DT(n.localStore,e,!0),c=new qN(e,l.qs),f=c.nu(l.documents),p=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(f,n.isPrimaryClient,p);GT(n,t,m._u);const v=new BN(e,t,c);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function YN(n,e,t){const s=we(n),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter((c=>!Yf(c,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Kp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&km(s.remoteStore,o.targetId),Xp(s,o.targetId)})).catch(Ia)):(Xp(s,o.targetId),await Kp(s.localStore,o.targetId,!0))}async function KN(n,e){const t=we(n),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),km(t.remoteStore,s.targetId))}async function $N(n,e,t){const s=tx(n);try{const o=await(function(c,f){const p=we(c),m=dt.now(),v=f.reduce(((b,q)=>b.add(q.key)),qe());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let q=fs(),G=qe();return p.Os.getEntries(b,v).next((H=>{q=H,q.forEach(((ee,$)=>{$.isValidDocument()||(G=G.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,q))).next((H=>{E=H;const ee=[];for(const $ of f){const Z=ab($,E.get($.key).overlayedDocument);Z!=null&&ee.push(new mo($.key,Z,ES(Z.value.mapValue),as.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,ee,f)})).next((H=>{S=H;const ee=H.applyToLocalDocumentSet(E,G);return p.documentOverlayCache.saveOverlays(b,H.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:MS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let m=c.Ru[c.currentUser.toKey()];m||(m=new mt(Pe)),m=m.insert(f,p),c.Ru[c.currentUser.toKey()]=m})(s,o.batchId,t),await pu(s,o.changes),await jf(s.remoteStore)}catch(o){const l=qm(o,"Failed to persist write");t.reject(l)}}async function dA(n,e){const t=we(n);try{const s=await sN(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Xe(c.lu,14607):o.removedDocuments.size>0&&(Xe(c.lu,42227),c.lu=!1))})),await pu(t,s,e)}catch(s){await Ia(s)}}function FT(n,e,t){const s=we(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=we(c);p.onlineState=f;let m=!1;p.queries.forEach(((v,E)=>{for(const S of E.wa)S.va(f)&&(m=!0)})),m&&Bm(p)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QN(n,e,t){const s=we(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let c=new mt(Te.comparator);c=c.insert(l,sn.newNoDocument(l,Ie.min()));const f=qe().add(l),p=new Xf(Ie.min(),new Map,new mt(Pe),c,f);await dA(s,p),s.du=s.du.remove(l),s.Eu.delete(e),Gm(s)}else await Kp(s.localStore,e,!1).then((()=>Xp(s,e,t))).catch(Ia)}async function XN(n,e){const t=we(n),s=e.batch.batchId;try{const o=await iN(t.localStore,e);pA(t,s,null),hA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await pu(t,o)}catch(o){await Ia(o)}}async function WN(n,e,t){const s=we(n);try{const o=await(function(c,f){const p=we(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,f).next((E=>(Xe(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);pA(s,e,t),hA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await pu(s,o)}catch(o){await Ia(o)}}function hA(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function pA(n,e,t){const s=we(n);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Xp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||mA(n,s)}))}function mA(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(km(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Gm(n))}function GT(n,e,t){for(const s of t)s instanceof uA?(n.Au.addReference(s.key,e),ZN(n,s)):s instanceof cA?(de(Fm,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||mA(n,s.key)):Ae(19791,{yu:s})}function ZN(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(de(Fm,"New document in limbo: "+t),n.Iu.add(s),Gm(n))}function Gm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Te(pt.fromString(e)),s=n.mu.next();n.Eu.set(s,new FN(t)),n.du=n.du.insert(t,s),iA(n.remoteStore,new or(Si(Im(t.path)),s,"TargetPurposeLimboResolution",Gf.ue))}}async function pu(n,e,t){const s=we(n),o=[],l=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach(((f,p)=>{c.push(s.gu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Dm.Es(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.hu.J_(o),await(async function(p,m){const v=we(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(S=>se.forEach(S.Is,(b=>v.persistence.referenceDelegate.addReference(E,S.targetId,b))).next((()=>se.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(E,S.targetId,b)))))))))}catch(E){if(!Ra(E))throw E;de(Pm,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const b=v.Fs.get(S),q=b.snapshotVersion,G=b.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(S,G)}}})(s.localStore,l))}async function jN(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){de(Fm,"User change. New user:",e.toKey());const s=await jS(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((f=>{f.forEach((p=>{p.reject(new _e(oe.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pu(t,s.Bs)}}function ex(n,e){const t=we(n),s=t.Eu.get(e);if(s&&s.lu)return qe().add(s.key);{let o=qe();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const f=t.Pu.get(c);o=o.unionWith(f.view.tu)}return o}}function gA(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ex.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QN.bind(null,e),e.hu.J_=UN.bind(null,e.eventManager),e.hu.pu=LN.bind(null,e.eventManager),e}function tx(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WN.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return nN(this.persistence,new jb,e.initialUser,this.serializer)}Du(e){return new ZS(Mm.Vi,this.serializer)}bu(e){return new uN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class nx extends wf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof If,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Ob(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new ZS((s=>If.Vi(s,t)),this.serializer)}}class Wp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>FT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PN})()}createDatastore(e){const t=Wf(e.databaseInfo.databaseId),s=(function(l){return new pN(l)})(e.databaseInfo);return(function(l,c,f,p){return new _N(l,c,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new TN(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>FT(this.syncEngine,t,0)),(function(){return VT.C()?new VT:new cN})())}createSyncEngine(e,t){return(function(o,l,c,f,p,m,v){const E=new GN(o,l,c,f,p,m);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=we(o);de(oo,"RemoteStore shutting down."),l.Ia.add(5),await hu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wp.provider={build:()=>new Wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="FirestoreClient";class sx{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=_m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(_r,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(_r,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=qm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Rp(n,e){n.asyncQueue.verifyOperationInProgress(),de(_r,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await jS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{dr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{dr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function zT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await rx(n);de(_r,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>LT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>LT(e.remoteStore,o))),n._onlineComponents=e}async function rx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(_r,"Using user provided OfflineComponentProvider");try{await Rp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;dr("Error using user provided cache. Falling back to memory cache: "+t),await Rp(n,new wf)}}else de(_r,"Using default OfflineComponentProvider"),await Rp(n,new nx(void 0));return n._offlineComponents}async function yA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(_r,"Using user provided OnlineComponentProvider"),await zT(n,n._uninitializedComponentsProvider._online)):(de(_r,"Using default OnlineComponentProvider"),await zT(n,new Wp))),n._onlineComponents}function ox(n){return yA(n).then((e=>e.syncEngine))}async function ax(n){const e=await yA(n),t=e.eventManager;return t.onListen=zN.bind(null,e.syncEngine),t.onUnlisten=YN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KN.bind(null,e.syncEngine),t}function lx(n,e,t={}){const s=new cr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,m){const v=new ix({next:S=>{v.Ou(),c.enqueueAndForget((()=>VN(l,E)));const b=S.docs.has(f);!b&&S.fromCache?m.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&p&&p.source==="server"?m.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new ON(Im(f.path),v,{includeMetadataChanges:!0,ka:!0});return kN(l,E)})(await ax(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firestore.googleapis.com",JT=!0;class YT{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vA,this.ssl=JT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ub)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_A((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new c1;switch(s.type){case"firstParty":return new p1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=HT.get(t);s&&(de("ComponentProvider","Removing Datastore"),HT.delete(t),s.terminate())})(this),Promise.resolve()}}function ux(n,e,t,s={}){var o;n=Zl(n,zm);const l=co(e),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(dm(`https://${p}`),hm("Firestore",!0)),c.host!==vA&&c.host!==p&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:s});if(!io(m,f)&&(n._setSettings(m),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=nn.MOCK_USER;else{v=X0(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(S)}n._authCredentials=new f1(new uS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Hm(this.firestore,e,this._query)}}class Ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(cu(t,Ft._jsonSchema))return new Ft(e,s||null,new Te(pt.fromString(t.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:xt("string",Ft._jsonSchemaVersion),referencePath:xt("string")};class ru extends Hm{constructor(e,t,s){super(e,t,Im(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Te(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function ed(n,e,...t){if(n=An(n),arguments.length===1&&(e=_m.newId()),v1("doc","path",e),n instanceof zm){const s=pt.fromString(e,...t);return oT(s),new Ft(n,null,new Te(s))}{if(!(n instanceof Ft||n instanceof ru))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(pt.fromString(e,...t));return oT(s),new Ft(n.firestore,n instanceof ru?n.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="AsyncQueue";class $T{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tA(this,"async_queue_retry"),this.oc=()=>{const s=Ip();s&&de(KT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new cr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ra(e))throw e;de(KT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,cs("INTERNAL UNHANDLED ERROR: ",QT(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Om.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ae(47125,{hc:QT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function QT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Jm extends zm{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new $T,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $T(e),this._firestoreClient=void 0,await e}}}function cx(n,e){const t=typeof n=="object"?n:gm(),s=typeof n=="string"?n:_f,o=Ff(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=K0("firestore");l&&ux(o,...l)}return o}function TA(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fx(n),n._firestoreClient}function fx(n){var e,t,s;const o=n._freezeSettings(),l=(function(f,p,m,v){return new M1(f,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_A(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new sx(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Wt.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:xt("string",Kn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(cu(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:xt("string",Ci._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:xt("string",Ii._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=/^__.*__$/;class hx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}function SA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:n})}}class Km{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(SA(this.Ec)&&dx.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class px{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wf(e)}Dc(e,t,s,o=!1){return new Km({Ec:e,methodName:t,bc:s,path:Xt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mx(n){const e=n._freezeSettings(),t=Wf(n._databaseId);return new px(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gx(n,e,t,s,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);RA("Data must be an object, but it was:",c,s);const f=CA(s,c);let p,m;if(l.merge)p=new ii(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=yx(e,E,t);if(!c.contains(S))throw new _e(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);vx(v,S)||v.push(S)}p=new ii(v),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new hx(new Yn(f),p,m)}function AA(n,e){if(IA(n=An(n)))return RA("Unsupported field value:",e,n),CA(n,e);if(n instanceof EA)return(function(s,o){if(!SA(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=AA(f,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=An(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=dt.fromDate(s);return{timestampValue:Cf(o.serializer,l)}}if(s instanceof dt){const l=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Cf(o.serializer,l)}}if(s instanceof Ci)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:HS(o.serializer,s._byteString)};if(s instanceof Ft){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Nm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ii)return(function(c,f){return{mapValue:{fields:{[vS]:{stringValue:TS},[vf]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw f.wc("VectorValues must only contain numeric values.");return Rm(f.serializer,m)}))}}}}}})(s,o);throw o.wc(`Unsupported field value: ${vm(s)}`)})(n,e)}function CA(n,e){const t={};return hS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,((s,o)=>{const l=AA(o,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function IA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Ci||n instanceof Kn||n instanceof Ft||n instanceof EA||n instanceof Ii)}function RA(n,e,t){if(!IA(t)||!fS(t)){const s=vm(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function yx(n,e,t){if((e=An(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return wA(n,e);throw bf("Field path arguments must be of type string or ",n,!1,void 0,t)}const _x=new RegExp("[~\\*/\\[\\]]");function wA(n,e,t){if(e.search(_x)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ym(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bf(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new _e(oe.INVALID_ARGUMENT,f+n+p)}function vx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Tx extends bA{data(){return super.data()}}function NA(n,e){return typeof e=="string"?wA(n,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}class Ex{convertValue(e,t="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ho(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[vf].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((c=>At(c.doubleValue)));return new Ii(l)}convertGeoPoint(e){return new Ci(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Hf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const t=pr(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pt.fromString(e);Xe(XS(s),9688,{name:e});const o=new tu(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||cs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Fl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends bA{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(NA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=no._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}no._jsonSchemaVersion="firestore/documentSnapshot/1.0",no._jsonSchema={type:xt("string",no._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class af extends no{data(e={}){return super.data(e)}}class $l{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Fl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new af(this._firestore,this._userDataWriter,s.key,s,new Fl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new af(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Fl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new af(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Fl(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:Ax(f.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ax(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){n=Zl(n,Ft);const e=Zl(n.firestore,Jm);return lx(TA(e),n._key).then((t=>Rx(e,n,t)))}$l._jsonSchemaVersion="firestore/querySnapshot/1.0",$l._jsonSchema={type:xt("string",$l._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class Cx extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function MA(n,e,t){n=Zl(n,Ft);const s=Zl(n.firestore,Jm),o=Sx(n.converter,e);return Ix(s,[gx(mx(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,as.none())])}function Ix(n,e){return(function(s,o){const l=new cr;return s.asyncQueue.enqueueAndForget((async()=>$N(await ox(s),o,l))),l.promise})(TA(n),e)}function Rx(n,e,t){const s=t.docs.get(e._key),o=new Cx(n);return new no(n,o,e._key,s,new Fl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ca=o})(fo),so(new fr("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Jm(new d1(s.getProvider("auth-internal")),new m1(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(m.options.projectId,v)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ei(tT,nT,e),Ei(tT,nT,"esm2017")})();var wx="firebase",bx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(wx,bx,"app");function $m(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function DA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nx=DA,PA=new lu("auth","Firebase",DA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new pm("@firebase/auth");function xx(n,...e){Nf.logLevel<=Oe.WARN&&Nf.warn(`Auth (${fo}): ${n}`,...e)}function lf(n,...e){Nf.logLevel<=Oe.ERROR&&Nf.error(`Auth (${fo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Xm(n,...e)}function oi(n,...e){return Xm(n,...e)}function Qm(n,e,t){const s=Object.assign(Object.assign({},Nx()),{[e]:t});return new lu("auth","Firebase",s).create(e,{appName:n.name})}function ls(n){return Qm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mx(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qn(n,"argument-error"),Qm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return PA.create(n,...e)}function Se(n,e,...t){if(!n)throw Xm(e,...t)}function rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lf(e),new Error(e)}function ds(n,e){n||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Dx(){return XT()==="http:"||XT()==="https:"}function XT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dx()||zR()||"connection"in navigator)?navigator.onLine:!0}function kx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ds(t>e,"Short delay should be less than long delay!"),this.isMobile=BR()||HR()}get(){return Px()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Lx=new mu(3e4,6e4);function vr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Tr(n,e,t,s,o={}){return VA(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=uu(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return GR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&co(n.emulatorConfig.host)&&(m.credentials="include"),kA.fetch()(await UA(n,n.config.apiHost,t,f),m)})}async function VA(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},Vx),e);try{const o=new qx(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw jc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw jc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw jc(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Qm(n,v,m);Qn(n,v)}}catch(o){if(o instanceof xi)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function gu(n,e,t,s,o={}){const l=await Tr(n,e,t,s,o);return"mfaPendingCredential"in l&&Qn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function UA(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Wm(n.config,o):`${n.config.apiScheme}://${o}`;return Ux.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Ox(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),Lx.get())})}}function jc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=oi(n,e,s);return o.customData._tokenResponse=t,o}function WT(n){return n!==void 0&&n.enterprise!==void 0}class Bx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ox(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Fx(n,e){return Tr(n,"GET","/v2/recaptchaConfig",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(n,e){return Tr(n,"POST","/v1/accounts:delete",e)}async function xf(n,e){return Tr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zx(n,e=!1){const t=An(n),s=await t.getIdToken(e),o=Zm(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Ql(wp(o.auth_time)),issuedAtTime:Ql(wp(o.iat)),expirationTime:Ql(wp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function wp(n){return Number(n)*1e3}function Zm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const o=J0(t);return o?JSON.parse(o):(lf("Failed to decode base64 JWT payload"),null)}catch(o){return lf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ZT(n){const e=Zm(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xi&&Hx(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Hx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){var e;const t=n.auth,s=await n.getIdToken(),o=await ou(n,xf(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?LA(l.providerUserInfo):[],f=Kx(n.providerData,c),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=p?m:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new jp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function Yx(n){const e=An(n);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kx(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function LA(n){return n.map(e=>{var{providerId:t}=e,s=$m(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e){const t=await VA(n,{},async()=>{const s=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await UA(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&co(n.emulatorConfig.host)&&(p.credentials="include"),kA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qx(n,e){return Tr(n,"POST","/v2/accounts:revokeToken",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=ZT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await $x(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ha;return s&&(Se(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ha,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zx(this,e)}reload(){return Yx(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await ou(this,Gx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,c,f,p,m,v;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,G=(f=t.tenantId)!==null&&f!==void 0?f:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ee=(m=t.createdAt)!==null&&m!==void 0?m:void 0,$=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Z,emailVerified:re,isAnonymous:fe,providerData:ue,stsTokenManager:M}=t;Se(Z&&M,e,"internal-error");const w=ha.fromJSON(this.name,M);Se(typeof Z=="string",e,"internal-error"),nr(E,e.name),nr(S,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof fe=="boolean",e,"internal-error"),nr(b,e.name),nr(q,e.name),nr(G,e.name),nr(H,e.name),nr(ee,e.name),nr($,e.name);const N=new si({uid:Z,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:fe,photoURL:q,phoneNumber:b,tenantId:G,stsTokenManager:w,createdAt:ee,lastLoginAt:$});return ue&&Array.isArray(ue)&&(N.providerData=ue.map(D=>Object.assign({},D))),H&&(N._redirectEventId=H),N}static async _fromIdTokenResponse(e,t,s=!1){const o=new ha;o.updateFromServerResponse(t);const l=new si({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Mf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?LA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ha;f.updateFromIdToken(s);const p=new si({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new jp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Map;function os(n){ds(n instanceof Function,"Expected a class definition");let e=jT.get(n);return e?(ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OA.type="NONE";const eE=OA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n,e,t){return`firebase:${n}:${e}:${t}`}class pa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=uf(this.userKey,o.apiKey,l),this.fullPersistenceKey=uf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new pa(os(eE),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||os(eE);const c=uf(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const S=await xf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await si._fromGetAccountInfoResponse(e,S,v)}else E=si._fromJSON(e,v);m!==l&&(f=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new pa(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new pa(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HA(e))return"Blackberry";if(JA(e))return"Webos";if(BA(e))return"Safari";if((e.includes("chrome/")||FA(e))&&!e.includes("edge/"))return"Chrome";if(zA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function qA(n=on()){return/firefox\//i.test(n)}function BA(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FA(n=on()){return/crios\//i.test(n)}function GA(n=on()){return/iemobile/i.test(n)}function zA(n=on()){return/android/i.test(n)}function HA(n=on()){return/blackberry/i.test(n)}function JA(n=on()){return/webos/i.test(n)}function jm(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xx(n=on()){var e;return jm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wx(){return JR()&&document.documentMode===10}function YA(n=on()){return jm(n)||zA(n)||JA(n)||HA(n)||/windows phone/i.test(n)||GA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n,e=[]){let t;switch(n){case"Browser":t=tE(on());break;case"Worker":t=`${tE(on())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(n,e={}){return Tr(n,"GET","/v2/passwordPolicy",vr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=6;class tM{constructor(e){var t,s,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:eM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nE(this),this.idTokenSubscription=new nE(this),this.beforeStateQueue=new Zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await pa.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(ls(this));const t=e?An(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jx(this),t=new tM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Qx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await pa.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Er(n){return An(n)}class nE{constructor(e){this.auth=e,this.observer=null,this.addObserver=jR(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iM(n){td=n}function $A(n){return td.loadJS(n)}function sM(){return td.recaptchaEnterpriseScript}function rM(){return td.gapiScript}function oM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class aM{constructor(){this.enterprise=new lM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uM="recaptcha-enterprise",QA="NO_RECAPTCHA";class cM{constructor(e){this.type=uM,this.auth=Er(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{Fx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new Bx(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(p=>{f(p)})})}function o(l,c,f){const p=window.grecaptcha;WT(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(QA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&WT(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=sM();p.length!==0&&(p+=f),$A(p).then(()=>{o(f,l,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function iE(n,e,t,s=!1,o=!1){const l=new cM(n);let c;if(o)c=QA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function em(n,e,t,s,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await iE(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await iE(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n,e){const t=Ff(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(io(l,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function dM(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function hM(n,e,t){const s=Er(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=XA(e),{host:c,port:f}=pM(e),p=f===null?"":`:${f}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(io(m,s.config.emulator)&&io(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,co(c)?(dm(`${l}//${c}${p}`),hm("Auth",!0)):mM()}function XA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pM(n){const e=XA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:sE(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:sE(c)}}}function sE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}async function gM(n,e){return Tr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(n,e){return gu(n,"POST","/v1/accounts:signInWithPassword",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,e))}async function vM(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends eg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,t,"signInWithPassword",yM);case"emailLink":return _M(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,s,"signUpPassword",gM);case"emailLink":return vM(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(n,e){return gu(n,"POST","/v1/accounts:signInWithIdp",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="http://localhost";class ao extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=$m(t,["providerId","signInMethod"]);if(!s||!o)return null;const c=new ao(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ma(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ma(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ma(e,t)}buildRequest(){const e={requestUri:TM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SM(n){const e=Ul(Ll(n)).link,t=e?Ul(Ll(e)).deep_link_id:null,s=Ul(Ll(n)).deep_link_id;return(s?Ul(Ll(s)).link:null)||s||t||e||n}class tg{constructor(e){var t,s,o,l,c,f;const p=Ul(Ll(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,E=EM((o=p.mode)!==null&&o!==void 0?o:null);Se(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=SM(e);try{return new tg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.providerId=ba.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=tg.parseLink(t);return Se(s,"argument-error"),au._fromEmailAndCode(e,s.code,s.tenantId)}}ba.PROVIDER_ID="password";ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends yu{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ss.credential(t,s)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends yu{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends yu{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return rr.credential(t,s)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(n,e){return gu(n,"POST","/v1/accounts:signUp",vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await si._fromIdTokenResponse(e,s,o),c=rE(s);return new lo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=rE(s);return new lo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function rE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends xi{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Df(e,t,s,o)}}function WA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,l,e,s):l})}async function CM(n,e,t=!1){const s=await ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return lo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(n,e,t=!1){const{auth:s}=n;if(Sn(s.app))return Promise.reject(ls(s));const o="reauthenticate";try{const l=await ou(n,WA(s,o,e,n),t);Se(l.idToken,s,"internal-error");const c=Zm(l.idToken);Se(c,s,"internal-error");const{sub:f}=c;return Se(n.uid===f,s,"user-mismatch"),lo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(n,e,t=!1){if(Sn(n.app))return Promise.reject(ls(n));const s="signIn",o=await WA(n,s,e),l=await lo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function RM(n,e){return ZA(Er(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(n){const e=Er(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wM(n,e,t){if(Sn(n.app))return Promise.reject(ls(n));const s=Er(n),c=await em(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AM).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jA(n),p}),f=await lo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function bM(n,e,t){return Sn(n.app)?Promise.reject(ls(n)):RM(An(n),ba.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jA(n),s})}function NM(n,e,t,s){return An(n).onIdTokenChanged(e,t,s)}function xM(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function MM(n,e,t,s){return An(n).onAuthStateChanged(e,t,s)}function DM(n){return An(n).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=1e3,kM=10;class tC extends eC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);Wx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,kM):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},PM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tC.type="LOCAL";const VM=tC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends eC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nC.type="SESSION";const iC=nC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new nd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async m=>m(t.origin,l)),p=await UM(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const m=ig("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function OM(n){Ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function qM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FM(){return sC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firebaseLocalStorageDb",GM=1,kf="firebaseLocalStorage",oC="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(n,e){return n.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function zM(){const n=indexedDB.deleteDatabase(rC);return new _u(n).toPromise()}function tm(){const n=indexedDB.open(rC,GM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(kf,{keyPath:oC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(kf)?e(s):(s.close(),await zM(),e(await tm()))})})}async function oE(n,e,t){const s=id(n,!0).put({[oC]:e,value:t});return new _u(s).toPromise()}async function HM(n,e){const t=id(n,!1).get(e),s=await new _u(t).toPromise();return s===void 0?null:s.value}function aE(n,e){const t=id(n,!0).delete(e);return new _u(t).toPromise()}const JM=800,YM=3;class aC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>YM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(FM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qM(),!this.activeServiceWorker)return;this.sender=new LM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await oE(e,Pf,"1"),await aE(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>HM(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>aE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=id(o,!1).getAll();return new _u(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aC.type="LOCAL";const KM=aC;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e){return e?os(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $M(n){return ZA(n.auth,new sg(n),n.bypassAuthState)}function QM(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),IM(t,new sg(n),n.bypassAuthState)}async function XM(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),CM(t,new sg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $M;case"linkViaPopup":case"linkViaRedirect":return XM;case"reauthViaPopup":case"reauthViaRedirect":return QM;default:Qn(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new mu(2e3,1e4);async function ZM(n,e,t){if(Sn(n.app))return Promise.reject(oi(n,"operation-not-supported-in-this-environment"));const s=Er(n);Mx(n,e,ng);const o=lC(s,t);return new to(s,"signInViaPopup",e,o).executeNotNull()}class to extends uC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,to.currentPopupAction&&to.currentPopupAction.cancel(),to.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,to.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WM.get())};e()}}to.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="pendingRedirect",cf=new Map;class eD extends uC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=cf.get(this.auth._key());if(!e){try{const s=await tD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tD(n,e){const t=sD(e),s=iD(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function nD(n,e){cf.set(n._key(),e)}function iD(n){return os(n._redirectPersistence)}function sD(n){return uf(jM,n.config.apiKey,n.name)}async function rD(n,e,t=!1){if(Sn(n.app))return Promise.reject(ls(n));const s=Er(n),o=lC(s,e),c=await new eD(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=600*1e3;class aD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!cC(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(oi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oD&&this.cachedEventUids.clear(),this.cachedEventUids.has(lE(e))}saveEventToCache(e){this.cachedEventUids.add(lE(e)),this.lastProcessedEventTime=Date.now()}}function lE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,e={}){return Tr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fD=/^https?/;async function dD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uD(n);for(const t of e)try{if(hD(t))return}catch{}Qn(n,"unauthorized-domain")}function hD(n){const e=Zp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!fD.test(t))return!1;if(cD.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=new mu(3e4,6e4);function uE(){const n=Ri().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mD(n){return new Promise((e,t)=>{var s,o,l;function c(){uE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uE(),t(oi(n,"network-request-failed"))},timeout:pD.get()})}if(!((o=(s=Ri().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ri().gapi)===null||l===void 0)&&l.load)c();else{const f=oM("iframefcb");return Ri()[f]=()=>{gapi.load?c():t(oi(n,"network-request-failed"))},$A(`${rM()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw ff=null,e})}let ff=null;function gD(n){return ff=ff||mD(n),ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new mu(5e3,15e3),_D="__/auth/iframe",vD="emulator/auth/iframe",TD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ED=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SD(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,vD):`https://${n.config.authDomain}/${_D}`,s={apiKey:e.apiKey,appName:n.name,v:fo},o=ED.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${uu(s).slice(1)}`}async function AD(n){const e=await gD(n),t=Ri().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:SD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TD,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=oi(n,"network-request-failed"),f=Ri().setTimeout(()=>{l(c)},yD.get());function p(){Ri().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ID=500,RD=600,wD="_blank",bD="http://localhost";class cE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ND(n,e,t,s=ID,o=RD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},CD),{width:s.toString(),height:o.toString(),top:l,left:c}),m=on().toLowerCase();t&&(f=FA(m)?wD:t),qA(m)&&(e=e||bD,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[b,q])=>`${S}${b}=${q},`,"");if(Xx(m)&&f!=="_self")return xD(e||"",f),new cE(null);const E=window.open(e||"",f,v);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new cE(E)}function xD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="__/auth/handler",DD="emulator/auth/handler",PD=encodeURIComponent("fac");async function fE(n,e,t,s,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:fo,eventId:o};if(e instanceof ng){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",ZR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof yu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),m=p?`#${PD}=${encodeURIComponent(p)}`:"";return`${kD(n)}?${uu(f).slice(1)}${m}`}function kD({config:n}){return n.emulator?Wm(n,DD):`https://${n.authDomain}/${MD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="webStorageSupport";class VD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iC,this._completeRedirectFn=rD,this._overrideRedirectResult=nD}async _openPopup(e,t,s,o){var l;ds((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await fE(e,t,s,Zp(),o);return ND(e,c,ig())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await fE(e,t,s,Zp(),o);return OM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ds(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await AD(e),s=new aD(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bp,{type:bp},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[bp];c!==void 0&&t(!!c),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YA()||BA()||jm()}}const UD=VD;var dE="@firebase/auth",hE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qD(n){so(new fr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KA(n)},m=new nM(s,o,l,p);return dM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),so(new fr("auth-internal",e=>{const t=Er(e.getProvider("auth").getImmediate());return(s=>new LD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(dE,hE,OD(n)),Ei(dE,hE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=300,FD=Q0("authIdTokenMaxAge")||BD;let pE=null;const GD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>FD)return;const o=t==null?void 0:t.token;pE!==o&&(pE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zD(n=gm()){const e=Ff(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fM(n,{popupRedirectResolver:UD,persistence:[KM,VM,iC]}),s=Q0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=GD(l.toString());xM(t,c,()=>c(t.currentUser)),NM(t,f=>c(f))}}const o=Y0("auth");return o&&hM(t,`http://${o}`),t}function HD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iM({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=oi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",HD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebasestorage.googleapis.com",JD="storageBucket",YD=120*1e3,KD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends xi{constructor(e,t,s=0){super(Np(e),`Firebase Storage: ${t} (${Np(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ni;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ni||(Ni={}));function Np(n){return"storage/"+n}function $D(){const n="An unknown error occurred, please check the error payload for server response.";return new Mi(Ni.UNKNOWN,n)}function QD(){return new Mi(Ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XD(){return new Mi(Ni.CANCELED,"User canceled the upload/download.")}function WD(n){return new Mi(Ni.INVALID_URL,"Invalid URL '"+n+"'.")}function ZD(n){return new Mi(Ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function mE(n){return new Mi(Ni.INVALID_ARGUMENT,n)}function dC(){return new Mi(Ni.APP_DELETED,"The Firebase app was deleted.")}function jD(n){return new Mi(Ni.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=ri.makeFromUrl(e,t)}catch{return new ri(e,"")}if(s.path==="")return s;throw ZD(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+o+c,"i"),p={bucket:1,path:3};function m(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",b=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),q={bucket:1,path:3},G=t===fC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,H="([^?#]*)",ee=new RegExp(`^https?://${G}/${o}/${H}`,"i"),Z=[{regex:f,indices:p,postModify:l},{regex:b,indices:q,postModify:m},{regex:ee,indices:{bucket:1,path:2},postModify:m}];for(let re=0;re<Z.length;re++){const fe=Z[re],ue=fe.regex.exec(e);if(ue){const M=ue[fe.indices.bucket];let w=ue[fe.indices.path];w||(w=""),s=new ri(M,w),fe.postModify(s);break}}if(s==null)throw WD(e);return s}}class eP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n,e,t){let s=1,o=null,l=null,c=!1,f=0;function p(){return f===2}let m=!1;function v(...H){m||(m=!0,e.apply(null,H))}function E(H){o=setTimeout(()=>{o=null,n(b,p())},H)}function S(){l&&clearTimeout(l)}function b(H,...ee){if(m){S();return}if(H){S(),v.call(null,H,...ee);return}if(p()||c){S(),v.call(null,H,...ee);return}s<64&&(s*=2);let Z;f===1?(f=2,Z=0):Z=(s+Math.random())*1e3,E(Z)}let q=!1;function G(H){q||(q=!0,S(),!m&&(o!==null?(H||(f=2),clearTimeout(o),E(0)):H||(f=1)))}return E(0),l=setTimeout(()=>{c=!0,G(!0)},t),G}function nP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n){return n!==void 0}function gE(n,e,t,s){if(s<e)throw mE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw mE(`Invalid value for '${n}'. Expected ${t} or less.`)}function sP(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Vf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vf||(Vf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t,s,o,l,c,f,p,m,v,E,S=!0,b=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,G)=>{this.resolve_=q,this.reject_=G,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ef(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const p=f.loaded,m=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Vf.NO_ERROR,p=l.getStatus();if(!f||rP(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Vf.ABORT;s(!1,new ef(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;s(!0,new ef(m,l))})},t=(s,o)=>{const l=this.resolve_,c=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());iP(p)?l(p):l()}catch(p){c(p)}else if(f!==null){const p=$D();p.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,p)):c(p)}else if(o.canceled){const p=this.appDelete_?dC():XD();c(p)}else{const p=QD();c(p)}};this.canceled_?t(!1,new ef(!1,null,!0)):this.backoffId_=tP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ef{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function aP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function cP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function fP(n,e,t,s,o,l,c=!0,f=!1){const p=sP(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return uP(v,e),aP(v,t),lP(v,l),cP(v,s),new oP(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function hP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this._service=e,t instanceof ri?this._location=t:this._location=ri.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Uf(e,t)}get root(){const e=new ri(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hP(this._location.path)}get storage(){return this._service}get parent(){const e=dP(this._location.path);if(e===null)return null;const t=new ri(this._location.bucket,e);return new Uf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw jD(e)}}function yE(n,e){const t=e==null?void 0:e[JD];return t==null?null:ri.makeFromBucketSpec(t,n)}function pP(n,e,t,s={}){n.host=`${e}:${t}`;const o=co(e);o&&(dm(`https://${n.host}/b`),hm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:X0(l,n.app.options.projectId))}class mP{constructor(e,t,s,o,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=fC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YD,this._maxUploadRetryTime=KD,this._requests=new Set,o!=null?this._bucket=ri.makeFromBucketSpec(o,this._host):this._bucket=yE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ri.makeFromBucketSpec(this._url,e):this._bucket=yE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uf(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new eP(dC());{const c=fP(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const _E="@firebase/storage",vE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="storage";function gP(n=gm(),e){n=An(n);const s=Ff(n,hC).getImmediate({identifier:e}),o=K0("storage");return o&&yP(s,...o),s}function yP(n,e,t,s={}){pP(n,e,t,s)}function _P(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new mP(t,s,o,e,fo)}function vP(){so(new fr(hC,_P,"PUBLIC").setMultipleInstances(!0)),Ei(_E,vE,""),Ei(_E,vE,"esm2017")}vP();const TP={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},rg=j0(TP),Gl=zD(rg),EP=new ss,sd=cx(rg);gP(rg);const SP=async(n,e)=>{try{const t=ed(sd,"users",n,"wardrobe","items");await MA(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},AP=async n=>{try{const e=ed(sd,"users",n,"wardrobe","items"),t=await xA(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},CP=async(n,e)=>{try{const t=ed(sd,"users",n,"wardrobe","sets");await MA(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},IP=async n=>{try{const e=ed(sd,"users",n,"wardrobe","sets"),t=await xA(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RP,wP;function bP(){return{geminiUrl:RP,vertexUrl:wP}}function NP(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=bP();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yo{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function xP(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),c=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}nm(n,o,l,0,c)}}function nm(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const p of f[c])nm(p,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const E=[];for(const S of t.slice(s))S==="*"?E.push(m):E.push(S);g(c,E,v)}for(const m of f)delete c[m]}}else{const c=n;l in c&&nm(c[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function og(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MP(n){const e={},t=d(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function DP(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],kP(c)),e}function PP(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response"]);return c!=null&&g(e,["response"],VP(c)),e}function kP(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>UP(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function VP(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>LP(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function UP(n){const e={},t=d(n,["video"]);return t!=null&&g(e,["video"],BP(t)),e}function LP(n){const e={},t=d(n,["_self"]);return t!=null&&g(e,["video"],FP(t)),e}function OP(n){const e={},t=d(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function qP(n){const e={},t=d(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function BP(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],og(s));const o=d(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function FP(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],og(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var TE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(TE||(TE={}));var EE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(EE||(EE={}));var SE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(SE||(SE={}));var st;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(st||(st={}));var AE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(AE||(AE={}));var CE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(CE||(CE={}));var IE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(IE||(IE={}));var RE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(RE||(RE={}));var wE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(wE||(wE={}));var bE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(bE||(bE={}));var NE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(NE||(NE={}));var xE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(xE||(xE={}));var ME;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ME||(ME={}));var DE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(DE||(DE={}));var PE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(PE||(PE={}));var kE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(kE||(kE={}));var Lf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Lf||(Lf={}));var VE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(VE||(VE={}));var UE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(UE||(UE={}));var LE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(LE||(LE={}));var im;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(im||(im={}));var OE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(OE||(OE={}));var qE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(qE||(qE={}));var BE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(BE||(BE={}));var FE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(FE||(FE={}));var GE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(GE||(GE={}));var zE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(zE||(zE={}));var HE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(HE||(HE={}));var JE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(JE||(JE={}));var YE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(YE||(YE={}));var KE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(KE||(KE={}));var $E;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($E||($E={}));var QE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(QE||(QE={}));var XE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(XE||(XE={}));var WE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(WE||(WE={}));var ZE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ZE||(ZE={}));var jE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(jE||(jE={}));var e0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(e0||(e0={}));var t0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(t0||(t0={}));var n0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(n0||(n0={}));var i0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(i0||(i0={}));var s0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(s0||(s0={}));var r0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(r0||(r0={}));var o0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(o0||(o0={}));var a0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(a0||(a0={}));var l0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(l0||(l0={}));var u0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(u0||(u0={}));var c0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(c0||(c0={}));var f0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(f0||(f0={}));var fa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(fa||(fa={}));class sm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Vl{get text(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[b,q]of Object.entries(S))b!=="text"&&b!=="thought"&&(q!==null||q!==void 0)&&E.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(E))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,c,f,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,c,f,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class d0{}class h0{}class GP{}class zP{}class HP{}class JP{}class p0{}class m0{}class g0{}class YP{}class Of{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Of;let o;const l=e;return t?o=PP(l):o=DP(l),Object.assign(s,o),s}}class y0{}class _0{}class v0{}class KP{}class $P{}class QP{}class T0{}class XP{get text(){var e,t,s;let o="",l=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class WP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function pC(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function mC(n){return Array.isArray(n)?n.map(e=>qf(e)):[qf(n)]}function qf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function gC(n){const e=qf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yC(n){const e=qf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function E0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function _C(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>E0(e)):[E0(n)]}function rm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function S0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function A0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return rm(n)?n:{role:"user",parts:_C(n)}}function ag(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(S0(n)||A0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=rm(n[0]);for(const o of n){const l=rm(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(S0(o)||A0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:_C(t)}),e}function ZP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(st).includes(t[0].toUpperCase())?t[0].toUpperCase():st.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(st).includes(s.toUpperCase())?s.toUpperCase():st.TYPE_UNSPECIFIED})}}function ga(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&ZP(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(st).includes(f.toUpperCase())?f.toUpperCase():st.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ga(f);else if(s.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(ga(m))}e[c]=p}else if(o.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=ga(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function lg(n){return ga(n)}function ug(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function cg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Na(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ga(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ga(e.response));return n}function xa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function jP(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function hs(n,e){if(typeof e!="string")throw new Error("name must be a string");return jP(n,e,"cachedContents")}function vC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Sr(n){return og(n)}function e2(n){return n!=null&&typeof n=="object"&&"name"in n}function t2(n){return n!=null&&typeof n=="object"&&"video"in n}function n2(n){return n!=null&&typeof n=="object"&&"uri"in n}function TC(n){var e;let t;if(e2(n)&&(t=n.name),!(n2(n)&&(t=n.uri,t===void 0))&&!(t2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function EC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function SC(n){for(const e of["models","tunedModels","publisherModels"])if(i2(n,e))return n[e];return[]}function i2(n,e){return n!==null&&typeof n=="object"&&e in n}function s2(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function r2(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=s2(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function AC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function o2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function CC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ma(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function IC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a2(n){const e={},t=d(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>O2(c))),g(e,["inlinedResponses"],l)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function l2(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function u2(n){const e={},t=d(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function df(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["metadata","state"]);o!=null&&g(e,["state"],IC(o));const l=d(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const f=d(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const p=d(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=d(n,["metadata","output"]);return m!=null&&g(e,["dest"],a2(CC(m))),e}function om(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["state"]);o!=null&&g(e,["state"],IC(o));const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["createTime"]);c!=null&&g(e,["createTime"],c);const f=d(n,["startTime"]);f!=null&&g(e,["startTime"],f);const p=d(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=d(n,["model"]);v!=null&&g(e,["model"],v);const E=d(n,["inputConfig"]);E!=null&&g(e,["src"],c2(E));const S=d(n,["outputConfig"]);return S!=null&&g(e,["dest"],l2(CC(S))),e}function c2(n){const e={},t=d(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function f2(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>L2(n,c))),g(t,["requests","requests"],l)}return t}function d2(n){const e={},t=d(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function h2(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function p2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function m2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function g2(n){const e={},t=d(n,["content"]);t!=null&&g(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],y2(s));const o=d(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&g(e,["index"],p);const m=d(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=d(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function y2(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function RC(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>J2(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function _2(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function v2(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],u2(o2(o))),t}function C0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["batch","inputConfig"],f2(n,AC(n,o)));const l=d(e,["config"]);return l!=null&&_2(l,t),t}function T2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["inputConfig"],d2(AC(n,o)));const l=d(e,["config"]);return l!=null&&v2(l,t),t}function E2(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function S2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["batch","inputConfig"],N2(n,o));const l=d(e,["config"]);return l!=null&&E2(l,t),t}function A2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function C2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function I2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);return l!=null&&g(e,["error"],l),e}function R2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);return l!=null&&g(e,["error"],l),e}function w2(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=ag(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(g(t,["_self"],b2(o,t)),xP(t,{"requests[].*":"requests[].request.*"})),t}function b2(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function N2(n,e){const t={},s=d(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=d(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],w2(n,o)),t}function x2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function M2(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],RC(rn(o)));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const H=d(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const ee=d(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],lg(ee));const $=d(e,["responseJsonSchema"]);if($!=null&&g(s,["responseJsonSchema"],$),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let O=Z;Array.isArray(O)&&(O=O.map(k=>Y2(k))),g(t,["safetySettings"],O)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let O=xa(re);Array.isArray(O)&&(O=O.map(k=>K2(Na(k)))),g(t,["tools"],O)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&g(t,["toolConfig"],fe),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=d(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],hs(n,ue));const M=d(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const w=d(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=d(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],ug(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=d(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const U=d(e,["imageConfig"]);return U!=null&&g(s,["imageConfig"],U),s}function D2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>g2(m))),g(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function P2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function k2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function V2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function U2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function L2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["request","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let f=$n(o);Array.isArray(f)&&(f=f.map(p=>RC(p))),g(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=d(e,["config"]);return c!=null&&g(t,["request","generationConfig"],M2(n,c,d(t,["request"],{}))),t}function O2(n){const e={},t=d(n,["response"]);t!=null&&g(e,["response"],D2(t));const s=d(n,["error"]);return s!=null&&g(e,["error"],s),e}function q2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function B2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function F2(n){const e={},t=d(n,["config"]);return t!=null&&q2(t,e),e}function G2(n){const e={},t=d(n,["config"]);return t!=null&&B2(t,e),e}function z2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>df(c))),g(e,["batchJobs"],l)}return e}function H2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>om(c))),g(e,["batchJobs"],l)}return e}function J2(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],x2(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],h2(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Y2(n){const e={},t=d(n,["category"]);if(t!=null&&g(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function K2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],V2(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],U2(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var uo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(uo||(uo={}));class vu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $2 extends yo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new vu(uo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=C0(this.apiClient,e),s=t._url,o=pe("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=S,E.request=b}m.push(E)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=T2(this.apiClient,e);return f=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>om(v))}else{const m=C0(this.apiClient,e);return f=pe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>df(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=S2(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>df(p))}}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=k2(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>om(v))}else{const m=P2(this.apiClient,e);return f=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>df(v))}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=m2(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=p2(this.apiClient,e);c=pe("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=G2(e);return f=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=H2(v),S=new T0;return Object.assign(S,E),S})}else{const m=F2(e);return f=pe("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=z2(v),S=new T0;return Object.assign(S,E),S})}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=C2(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>R2(v))}else{const m=A2(this.apiClient,e);return f=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>I2(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function I0(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>gk(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function X2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let v=$n(c);Array.isArray(v)&&(v=v.map(E=>I0(E))),g(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],I0(rn(f)));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>yk(E))),g(e,["tools"],v)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function W2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let E=$n(c);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],rn(f));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(S=>_k(S))),g(e,["tools"],E)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function Z2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],pC(n,s));const o=d(e,["config"]);return o!=null&&X2(o,t),t}function j2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],pC(n,s));const o=d(e,["config"]);return o!=null&&W2(o,t),t}function ek(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],hs(n,s)),t}function tk(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],hs(n,s)),t}function nk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function ik(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function sk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function rk(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function ok(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],hs(n,s)),t}function ak(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],hs(n,s)),t}function lk(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function uk(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function ck(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function fk(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function dk(n){const e={},t=d(n,["config"]);return t!=null&&ck(t,e),e}function hk(n){const e={},t=d(n,["config"]);return t!=null&&fk(t,e),e}function pk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function mk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function gk(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],sk(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],Q2(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function yk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],lk(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],uk(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function _k(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>rk(S))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function vk(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Tk(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Ek(n,e){const t={},s=d(e,["name"]);s!=null&&g(t,["_url","name"],hs(n,s));const o=d(e,["config"]);return o!=null&&vk(o,t),t}function Sk(n,e){const t={},s=d(e,["name"]);s!=null&&g(t,["_url","name"],hs(n,s));const o=d(e,["config"]);return o!=null&&Tk(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ak extends yo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vu(uo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=j2(this.apiClient,e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Z2(this.apiClient,e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ak(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=ok(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=tk(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ik(v),S=new _0;return Object.assign(S,E),S})}else{const m=ek(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=nk(v),S=new _0;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Sk(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Ek(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=hk(e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=mk(v),S=new v0;return Object.assign(S,E),S})}else{const m=dk(e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=pk(v),S=new v0;return Object.assign(S,E),S})}}}function R0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(n){return this instanceof ft?(this.v=n,this):new ft(n)}function ya(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(b){return function(q){return Promise.resolve(q).then(b,E)}}function f(b,q){s[b]&&(o[b]=function(G){return new Promise(function(H,ee){l.push([b,G,H,ee])>1||p(b,G)})},q&&(o[b]=q(o[b])))}function p(b,q){try{m(s[b](q))}catch(G){S(l[0][3],G)}}function m(b){b.value instanceof ft?Promise.resolve(b.value.v).then(v,E):S(l[0][2],b)}function v(b){p("next",b)}function E(b){p("throw",b)}function S(b,q){b(q),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Xl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R0=="function"?R0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,p){c=n[l](c),o(f,p,c.done,c.value)})}}function o(l,c,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ck(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:wC(t)}function wC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ik(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function w0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!wC(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class Rk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new wk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wk{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Ik(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const p=await o,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(E))!==null&&f!==void 0?f:[]);const b=m?[m]:[];this.recordHistory(s,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?w0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return ya(this,arguments,function*(){var c,f,p,m;const v=[];try{for(var E=!0,S=Xl(e),b;b=yield ft(S.next()),c=b.done,!c;E=!0){m=b.value,E=!1;const q=m;if(Ck(q)){const G=(o=(s=q.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;G!==void 0&&v.push(G)}yield yield ft(q)}}catch(q){f={error:q}}finally{try{!E&&!c&&(p=S.return)&&(yield ft(p.call(S)))}finally{if(f)throw f.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...w0(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,rd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bk(n){const e={},t=d(n,["file"]);return t!=null&&g(e,["file"],t),e}function Nk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xk(n){const e={},t=d(n,["name"]);return t!=null&&g(e,["_url","file"],TC(t)),e}function Mk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Dk(n){const e={},t=d(n,["name"]);return t!=null&&g(e,["_url","file"],TC(t)),e}function Pk(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function kk(n){const e={},t=d(n,["config"]);return t!=null&&Pk(t,e),e}function Vk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uk extends yo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vu(uo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kk(e);return l=pe("files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Vk(p),v=new KP;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bk(e);return l=pe("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=Nk(p),v=new $P;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Dk(e);return l=pe("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xk(e);return l=pe("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Mk(p),v=new QP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hf(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Lk(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Zk(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function Ok(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function qk(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function Bk(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const p=d(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=d(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=d(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=d(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=d(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=d(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=d(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=d(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const H=d(n,["routingConfig"]);H!=null&&g(e,["routingConfig"],H);const ee=d(n,["seed"]);ee!=null&&g(e,["seed"],ee);const $=d(n,["speechConfig"]);$!=null&&g(e,["speechConfig"],bC($));const Z=d(n,["stopSequences"]);Z!=null&&g(e,["stopSequences"],Z);const re=d(n,["temperature"]);re!=null&&g(e,["temperature"],re);const fe=d(n,["thinkingConfig"]);fe!=null&&g(e,["thinkingConfig"],fe);const ue=d(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=d(n,["topP"]);if(M!=null&&g(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Fk(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Gk(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function zk(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],cg(E));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],Lk(rn(q)));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ue=xa(G);Array.isArray(ue)&&(ue=ue.map(M=>eV(Na(M)))),g(e,["setup","tools"],ue)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],jk(H));const ee=d(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function Hk(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],Bk(s));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],bC(cg(E)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],rn(q));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ue=xa(G);Array.isArray(ue)&&(ue=ue.map(M=>tV(Na(M)))),g(e,["setup","tools"],ue)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],H);const ee=d(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function Jk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],zk(o,t)),t}function Yk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],Hk(o,t)),t}function Kk(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function $k(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function Qk(n){const e={},t=d(n,["media"]);if(t!=null){let m=mC(t);Array.isArray(m)&&(m=m.map(v=>hf(v))),g(e,["mediaChunks"],m)}const s=d(n,["audio"]);s!=null&&g(e,["audio"],hf(yC(s)));const o=d(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&g(e,["video"],hf(gC(l)));const c=d(n,["text"]);c!=null&&g(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Xk(n){const e={},t=d(n,["media"]);if(t!=null){let m=mC(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=d(n,["audio"]);s!=null&&g(e,["audio"],yC(s));const o=d(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&g(e,["video"],gC(l));const c=d(n,["text"]);c!=null&&g(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Wk(n){const e={},t=d(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=d(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=d(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],nV(c));const f=d(n,["goAway"]);f!=null&&g(e,["goAway"],f);const p=d(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function Zk(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],Ok(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],hf(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function jk(n){const e={},t=d(n,["handle"]);if(t!=null&&g(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bC(n){const e={},t=d(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function eV(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],Fk(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Gk(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function tV(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>qk(S))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function nV(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=d(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const f=d(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const p=d(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["promptTokensDetails"],b)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["cacheTokensDetails"],b)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["responseTokensDetails"],b)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["toolUsePromptTokensDetails"],b)}const S=d(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iV(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function sV(n){const e={},t=d(n,["content"]);t!=null&&g(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],rV(s));const o=d(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&g(e,["index"],p);const m=d(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=d(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function rV(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function oV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let l=$n(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function aV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function lV(n){const e={},t=d(n,["values"]);t!=null&&g(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&g(e,["statistics"],uV(s)),e}function uV(n){const e={},t=d(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function od(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>pU(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function cV(n){const e={},t=d(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function fV(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dV(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],rn(s));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>PC(f))),g(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],tU(l)),t}function hV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>od(f))),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&fV(l),t}function pV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&dV(l,t),t}function mV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=d(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function gV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function yV(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function _V(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function vV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function TV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function EV(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=d(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=d(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const H=d(n,["addWatermark"]);e!==void 0&&H!=null&&g(e,["parameters","addWatermark"],H);const ee=d(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const $=d(n,["editMode"]);e!==void 0&&$!=null&&g(e,["parameters","editMode"],$);const Z=d(n,["baseSteps"]);return e!==void 0&&Z!=null&&g(e,["parameters","editConfig","baseSteps"],Z),t}function SV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>TU(p))),g(t,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&EV(c,t),t}function AV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ad(l))),g(e,["generatedImages"],o)}return e}function CV(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function IV(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function RV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let f=ag(n,o);Array.isArray(f)&&(f=f.map(p=>p)),g(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&CV(l,t);const c=d(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],Ke(n,c)),t}function wV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=ag(n,o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&IV(l,t),t}function bV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function NV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>lV(c))),g(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function xV(n){const e={},t=d(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function MV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function DV(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function PV(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],od(rn(o)));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const H=d(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const ee=d(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],lg(ee));const $=d(e,["responseJsonSchema"]);if($!=null&&g(s,["responseJsonSchema"],$),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let O=Z;Array.isArray(O)&&(O=O.map(k=>EU(k))),g(t,["safetySettings"],O)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let O=xa(re);Array.isArray(O)&&(O=O.map(k=>wU(Na(k)))),g(t,["tools"],O)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&g(t,["toolConfig"],fe),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=d(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],hs(n,ue));const M=d(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const w=d(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=d(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],ug(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=d(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const U=d(e,["imageConfig"]);return U!=null&&g(s,["imageConfig"],U),s}function kV(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],rn(o));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const H=d(e,["responseMimeType"]);H!=null&&g(s,["responseMimeType"],H);const ee=d(e,["responseSchema"]);ee!=null&&g(s,["responseSchema"],lg(ee));const $=d(e,["responseJsonSchema"]);$!=null&&g(s,["responseJsonSchema"],$);const Z=d(e,["routingConfig"]);Z!=null&&g(s,["routingConfig"],Z);const re=d(e,["modelSelectionConfig"]);re!=null&&g(s,["modelConfig"],re);const fe=d(e,["safetySettings"]);if(t!==void 0&&fe!=null){let F=fe;Array.isArray(F)&&(F=F.map(ae=>ae)),g(t,["safetySettings"],F)}const ue=d(e,["tools"]);if(t!==void 0&&ue!=null){let F=xa(ue);Array.isArray(F)&&(F=F.map(ae=>PC(Na(ae)))),g(t,["tools"],F)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const w=d(e,["labels"]);t!==void 0&&w!=null&&g(t,["labels"],w);const N=d(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],hs(n,N));const D=d(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const U=d(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const O=d(e,["speechConfig"]);O!=null&&g(s,["speechConfig"],DC(ug(O)));const k=d(e,["audioTimestamp"]);k!=null&&g(s,["audioTimestamp"],k);const rt=d(e,["thinkingConfig"]);rt!=null&&g(s,["thinkingConfig"],rt);const ot=d(e,["imageConfig"]);return ot!=null&&g(s,["imageConfig"],ot),s}function b0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>od(f))),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&g(t,["generationConfig"],PV(n,l,t)),t}function N0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&g(t,["generationConfig"],kV(n,l,t)),t}function x0(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>sV(m))),g(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function M0(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=d(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=d(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const f=d(n,["responseId"]);f!=null&&g(e,["responseId"],f);const p=d(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function VV(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=d(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=d(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=d(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function UV(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=d(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=d(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const H=d(n,["addWatermark"]);e!==void 0&&H!=null&&g(e,["parameters","addWatermark"],H);const ee=d(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const $=d(n,["imageSize"]);e!==void 0&&$!=null&&g(e,["parameters","sampleImageSize"],$);const Z=d(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&g(e,["parameters","enhancePrompt"],Z),t}function LV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&VV(l,t),t}function OV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&UV(l,t),t}function qV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>WV(c))),g(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],xC(o)),e}function BV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ad(c))),g(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],MC(o)),e}function FV(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=d(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],ld(v));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(b=>BU(b))),g(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function GV(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=d(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const p=d(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=d(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=d(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const q=d(n,["generateAudio"]);e!==void 0&&q!=null&&g(e,["parameters","generateAudio"],q);const G=d(n,["lastFrame"]);e!==void 0&&G!=null&&g(e,["instances[0]","lastFrame"],ai(G));const H=d(n,["referenceImages"]);if(e!==void 0&&H!=null){let Z=H;Array.isArray(Z)&&(Z=Z.map(re=>FU(re))),g(e,["instances[0]","referenceImages"],Z)}const ee=d(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],qU(ee));const $=d(n,["compressionQuality"]);return e!==void 0&&$!=null&&g(e,["parameters","compressionQuality"],$),t}function zV(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],KV(c)),e}function HV(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response"]);return c!=null&&g(e,["response"],$V(c)),e}function JV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&g(t,["instances[0]","image"],ld(l));const c=d(e,["video"]);c!=null&&g(t,["instances[0]","video"],kC(c));const f=d(e,["source"]);f!=null&&QV(f,t);const p=d(e,["config"]);return p!=null&&FV(p,t),t}function YV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&g(t,["instances[0]","image"],ai(l));const c=d(e,["video"]);c!=null&&g(t,["instances[0]","video"],VC(c));const f=d(e,["source"]);f!=null&&XV(f,t);const p=d(e,["config"]);return p!=null&&GV(p,t),t}function KV(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>jV(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function $V(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>eU(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function QV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],ld(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],kC(l)),t}function XV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],ai(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],VC(l)),t}function WV(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["image"],oU(t));const s=d(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=d(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],xC(o)),e}function ad(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["image"],NC(t));const s=d(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=d(n,["_self"]);o!=null&&g(e,["safetyAttributes"],MC(o));const l=d(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function ZV(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["mask"],NC(t));const s=d(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function jV(n){const e={},t=d(n,["video"]);return t!=null&&g(e,["video"],LU(t)),e}function eU(n){const e={},t=d(n,["_self"]);return t!=null&&g(e,["video"],OU(t)),e}function tU(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const p=d(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=d(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=d(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=d(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=d(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=d(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=d(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=d(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const H=d(n,["routingConfig"]);H!=null&&g(e,["routingConfig"],H);const ee=d(n,["seed"]);ee!=null&&g(e,["seed"],ee);const $=d(n,["speechConfig"]);$!=null&&g(e,["speechConfig"],DC($));const Z=d(n,["stopSequences"]);Z!=null&&g(e,["stopSequences"],Z);const re=d(n,["temperature"]);re!=null&&g(e,["temperature"],re);const fe=d(n,["thinkingConfig"]);fe!=null&&g(e,["thinkingConfig"],fe);const ue=d(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=d(n,["topP"]);if(M!=null&&g(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nU(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function iU(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function sU(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function rU(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function oU(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Sr(t));const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function NC(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Sr(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function ld(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Sr(t));const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ai(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Sr(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function aU(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],EC(n,f)),s}function lU(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],EC(n,f)),s}function uU(n,e){const t={},s=d(e,["config"]);return s!=null&&aU(n,s,t),t}function cU(n,e){const t={},s=d(e,["config"]);return s!=null&&lU(n,s,t),t}function fU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=SC(o);Array.isArray(l)&&(l=l.map(c=>am(c))),g(e,["models"],l)}return e}function dU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=SC(o);Array.isArray(l)&&(l=l.map(c=>lm(c))),g(e,["models"],l)}return e}function hU(n){const e={},t=d(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=d(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function am(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);o!=null&&g(e,["description"],o);const l=d(n,["version"]);l!=null&&g(e,["version"],l);const c=d(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],bU(c));const f=d(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const p=d(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=d(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function lm(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);o!=null&&g(e,["description"],o);const l=d(n,["versionId"]);l!=null&&g(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>xV(S))),g(e,["endpoints"],E)}const f=d(n,["labels"]);f!=null&&g(e,["labels"],f);const p=d(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],NU(p));const m=d(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=d(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function pU(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],MV(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],iV(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function mU(n){const e={},t=d(n,["productImage"]);return t!=null&&g(e,["image"],ai(t)),e}function gU(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=d(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=d(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function yU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["source"]);o!=null&&vU(o,t);const l=d(e,["config"]);return l!=null&&gU(l,t),t}function _U(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>ad(o))),g(e,["generatedImages"],s)}return e}function vU(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],ai(o));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>mU(f))),g(e,["instances[0]","productImages"],c)}return t}function TU(n){const e={},t=d(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],ai(t));const s=d(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=d(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=d(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],hU(l));const c=d(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],cV(c));const f=d(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const p=d(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function xC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function MC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function EU(n){const e={},t=d(n,["category"]);if(t!=null&&g(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function SU(n){const e={},t=d(n,["image"]);return t!=null&&g(e,["image"],ai(t)),e}function AU(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const p=d(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function CU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["source"]);o!=null&&RU(o,t);const l=d(e,["config"]);return l!=null&&AU(l,t),t}function IU(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>ZV(o))),g(e,["generatedMasks"],s)}return e}function RU(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],ai(o));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],SU(l)),t}function DC(n){const e={},t=d(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function wU(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],sU(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],rU(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function PC(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>DV(S))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function bU(n){const e={},t=d(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function NU(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function xU(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function MU(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function DU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","name"],Ke(n,s));const o=d(e,["config"]);return o!=null&&xU(o,t),t}function PU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&MU(o,t),t}function kU(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=d(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=d(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function VU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["image"]);o!=null&&g(t,["instances[0]","image"],ai(o));const l=d(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&kU(c,t),t}function UU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ad(l))),g(e,["generatedImages"],o)}return e}function LU(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Sr(s));const o=d(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function OU(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Sr(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function qU(n){const e={},t=d(n,["image"]);t!=null&&g(e,["_self"],ai(t));const s=d(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function BU(n){const e={},t=d(n,["image"]);t!=null&&g(e,["image"],ld(t));const s=d(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function FU(n){const e={},t=d(n,["image"]);t!=null&&g(e,["image"],ai(t));const s=d(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function kC(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Sr(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function VC(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Sr(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GU="Content-Type",zU="X-Server-Timeout",HU="User-Agent",um="x-goog-api-client",JU="1.28.0",YU=`google-genai-sdk/${JU}`,KU="v1beta1",$U="v1beta",D0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class QU{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:KU,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:$U,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))o.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&XU(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await P0(o),new sm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await P0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ya(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:p}=yield ft(o.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),b=S.status,q=S.code,G=`got status: ${b}. ${JSON.stringify(E)}`;if(q>=400&&q<600)throw new rd({message:G,status:q})}}catch(E){if(E.name==="ApiError")throw E}c+=m;let v=c.match(D0);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ft(new sm(S)),c=c.slice(v[0].length),v=c.match(D0)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=YU+" "+this.clientOptions.userAgentExtra;return e[HU]=t,e[um]=t,e[GU]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(zU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const c=this.clientOptions.uploader,f=await c.stat(e);l.sizeBytes=String(f.size);const p=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;let m="";typeof e=="string"&&(m=e.replace(/[/\\]+$/,""),m=(o=m.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const v=await this.fetchUploadUrl(l,m,t);return c.upload(e,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const c={file:e},f=await this.request({path:pe("upload/v1beta/files",c._url),body:JSON.stringify(c),httpMethod:"POST",httpOptions:l});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(o=f==null?void 0:f.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function P0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new rd({message:o,status:t}):new Error(o)}}function XU(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WU="mcp_used/unknown";let ZU=!1;function UC(n){for(const e of n)if(jU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ZU}function LC(n){var e;const t=(e=n[um])!==null&&e!==void 0?e:"";n[um]=(t+` ${WU}`).trimStart()}function jU(n){return n!==null&&typeof n=="object"&&n instanceof fg}function eL(n,e=100){return ya(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ft(n.listTools({cursor:s}));for(const c of l.tools)yield yield ft(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class fg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new fg(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(t=void 0,Xl(eL(v))),m;m=await p.next(),e=m.done,!e;f=!0){o=m.value,f=!1;const E=o;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){t={error:E}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),r2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tL(n,e,t){const s=new WP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class nL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=rL(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),E=e.callbacks,S=function(){m({})},b=this.apiClient,q={onopen:S,onmessage:Z=>{tL(b,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(Z){}},G=this.webSocketFactory.create(p,sL(c),q);G.connect(),await v;const $={setup:{model:Ke(this.apiClient,e.model)}};return G.send(JSON.stringify($)),new iL(G,this.apiClient)}}class iL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$k(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Kk(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(fa.PLAY)}pause(){this.sendPlaybackControl(fa.PAUSE)}stop(){this.sendPlaybackControl(fa.STOP)}resetContext(){this.sendPlaybackControl(fa.RESET_CONTEXT)}close(){this.conn.close()}}function sL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function rL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function aL(n,e,t){const s=new XP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=Wk(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class lL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new nL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&UC(e.config.tools)&&LC(E);const S=dL(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const N=this.apiClient.getApiKey();let D="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",U="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${U}=${N}`}let b=()=>{};const q=new Promise(N=>{b=N}),G=e.callbacks,H=function(){var N;(N=G==null?void 0:G.onopen)===null||N===void 0||N.call(G),b({})},ee=this.apiClient,$={onopen:H,onmessage:N=>{aL(ee,G.onmessage,N)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=G==null?void 0:G.onclose)!==null&&s!==void 0?s:function(N){}},Z=this.webSocketFactory.create(v,fL(S),$);Z.connect(),await q;let re=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const N=this.apiClient.getProject(),D=this.apiClient.getLocation();re=`projects/${N}/locations/${D}/`+re}let fe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lf.AUDIO]}:e.config.responseModalities=[Lf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],M=[];for(const N of ue)if(this.isCallableTool(N)){const D=N;M.push(await D.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const w={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=Yk(this.apiClient,w):fe=Jk(this.apiClient,w),delete fe.config,Z.send(JSON.stringify(fe)),new cL(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const uL={turnComplete:!0};class cL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=$n(t.turns),e.isVertexAI()||(s=s.map(o=>od(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(oL)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},uL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Xk(e)}:t={realtimeInput:Qk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function fL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function dL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k0=10;function V0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(_a(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function _a(n){return"callTool"in n&&typeof n.callTool=="function"}function hL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>_a(o)))!==null&&s!==void 0?s:!1}function pL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!_a(o)))!==null&&s!==void 0?s:!1}function U0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL extends yo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!hL(t)||V0(t.config))return await this.generateContentInternal(p);if(pL(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=$n(p.contents),S=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:k0;let b=0;for(;b<S&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const q=m.candidates[0].content,G=[];for(const H of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(_a(H)){const $=await H.callTool(m.functionCalls);G.push(...$)}b++,v={role:"user",parts:G},p.contents=$n(p.contents),p.contents.push(q),p.contents.push(v),U0(p.config)&&(E.push(q),E.push(v))}return U0(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),V0(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new vu(uo.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,c,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>_a(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&UC(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),LC(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(_a(c)){const f=c,p=await f.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,f)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:k0;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var S,b;return ya(this,arguments,function*(){for(var q,G,H,ee;f<l;){c&&(f++,c=!1);const fe=yield ft(m.processParamsMaybeAddMcpUsage(E)),ue=yield ft(m.generateContentStreamInternal(fe)),M=[],w=[];try{for(var $=!0,Z=(G=void 0,Xl(ue)),re;re=yield ft(Z.next()),q=re.done,!q;$=!0){ee=re.value,$=!1;const N=ee;if(yield yield ft(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){w.push(N.candidates[0].content);for(const D of(b=N.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(f<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const U=yield ft(v.get(D.functionCall.name).callTool([D.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(N){G={error:N}}finally{try{!$&&!q&&(H=Z.return)&&(yield ft(H.call(Z)))}finally{if(G)throw G.error}}if(M.length>0){c=!0;const N=new Vl;N.candidates=[{content:{role:"user",parts:M}}],yield yield ft(N);const D=[];D.push(...w),D.push({role:"user",parts:M});const U=$n(E.contents).concat(D);E.contents=U}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=N0(this.apiClient,e);return f=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=M0(v),S=new Vl;return Object.assign(S,E),S})}else{const m=b0(this.apiClient,e);return f=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=x0(v),S=new Vl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=N0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return ya(this,arguments,function*(){var S,b,q,G;try{for(var H=!0,ee=Xl(E),$;$=yield ft(ee.next()),S=$.done,!S;H=!0){G=$.value,H=!1;const Z=G,re=M0(yield ft(Z.json()));re.sdkHttpResponse={headers:Z.headers};const fe=new Vl;Object.assign(fe,re),yield yield ft(fe)}}catch(Z){b={error:Z}}finally{try{!H&&!S&&(q=ee.return)&&(yield ft(q.call(ee)))}finally{if(b)throw b.error}}})})}else{const m=b0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return ya(this,arguments,function*(){var S,b,q,G;try{for(var H=!0,ee=Xl(E),$;$=yield ft(ee.next()),S=$.done,!S;H=!0){G=$.value,H=!1;const Z=G,re=x0(yield ft(Z.json()));re.sdkHttpResponse={headers:Z.headers};const fe=new Vl;Object.assign(fe,re),yield yield ft(fe)}}catch(Z){b={error:Z}}finally{try{!H&&!S&&(q=ee.return)&&(yield ft(q.call(ee)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=wV(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=NV(v),S=new d0;return Object.assign(S,E),S})}else{const m=RV(this.apiClient,e);return f=pe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=bV(v),S=new d0;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=OV(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=BV(v),S=new h0;return Object.assign(S,E),S})}else{const m=LV(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=qV(v),S=new h0;return Object.assign(S,E),S})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=SV(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=AV(p),v=new GP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=VU(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=UU(p),v=new zP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=yU(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=_U(p),v=new HP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=CU(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=IU(p),v=new JP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=iU(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>lm(v))}else{const m=nU(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>am(v))}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=cU(this.apiClient,e);return f=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=dU(v),S=new p0;return Object.assign(S,E),S})}else{const m=uU(this.apiClient,e);return f=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=fU(v),S=new p0;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=PU(this.apiClient,e);return f=pe("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>lm(v))}else{const m=DU(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>am(v))}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=_V(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=TV(v),S=new m0;return Object.assign(S,E),S})}else{const m=yV(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=vV(v),S=new m0;return Object.assign(S,E),S})}}async countTokens(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=pV(this.apiClient,e);return f=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=gV(v),S=new g0;return Object.assign(S,E),S})}else{const m=hV(this.apiClient,e);return f=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=mV(v),S=new g0;return Object.assign(S,E),S})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=oV(this.apiClient,e);return l=pe("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=aV(p),v=new YP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=YV(this.apiClient,e);return f=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=HV(v),S=new Of;return Object.assign(S,E),S})}else{const m=JV(this.apiClient,e);return f=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=zV(v),S=new Of;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gL extends yo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=qP(e);return f=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=OP(e);return f=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=MP(e);return l=pe("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yL(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function _L(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>RL(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function vL(n,e,t){const s={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=d(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],IL(n,f));const p=d(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function TL(n,e){const t={},s=d(e,["config"]);return s!=null&&g(t,["config"],vL(n,s,t)),t}function EL(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function SL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function AL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function CL(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],cg(E));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],_L(rn(q)));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ue=xa(G);Array.isArray(ue)&&(ue=ue.map(M=>bL(Na(M)))),g(e,["setup","tools"],ue)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&g(e,["setup","sessionResumption"],wL(H));const ee=d(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const $=d(n,["outputAudioTranscription"]);e!==void 0&&$!=null&&g(e,["setup","outputAudioTranscription"],$);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&g(e,["setup","contextWindowCompression"],re);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function IL(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],CL(o,t)),t}function RL(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],EL(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],yL(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function wL(n){const e={},t=d(n,["handle"]);if(t!=null&&g(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],SL(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],AL(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NL(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function xL(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=NL(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class ML extends yo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=TL(this.apiClient,e);l=pe("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=xL(f,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DL(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function PL(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function kL(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function VL(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],L0(b))}else if(o==="PREFERENCE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],L0(b))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(f==="PREFERENCE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=d(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function UL(n,e){const t={},s=d(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&KL(l);const c=d(n,["config"]);return c!=null&&kL(c,t),t}function LL(n,e){const t={},s=d(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&$L(l,t,e);const c=d(n,["config"]);return c!=null&&VL(c,t,e),t}function OL(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function qL(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function BL(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function FL(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function GL(n,e){const t={},s=d(n,["config"]);return s!=null&&BL(s,t),t}function zL(n,e){const t={},s=d(n,["config"]);return s!=null&&FL(s,t),t}function HL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>OC(f))),g(t,["tuningJobs"],c)}return t}function JL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>cm(f))),g(t,["tuningJobs"],c)}return t}function YL(n,e){const t={},s=d(n,["name"]);s!=null&&g(t,["model"],s);const o=d(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function KL(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["examples","examples"],o)}return t}function $L(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function OC(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["state"]);l!=null&&g(t,["state"],vC(l));const c=d(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=d(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const p=d(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=d(n,["description"]);v!=null&&g(t,["description"],v);const E=d(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const S=d(n,["_self"]);return S!=null&&g(t,["tunedModel"],YL(S)),t}function cm(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["state"]);l!=null&&g(t,["state"],vC(l));const c=d(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=d(n,["startTime"]);f!=null&&g(t,["startTime"],f);const p=d(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=d(n,["error"]);v!=null&&g(t,["error"],v);const E=d(n,["description"]);E!=null&&g(t,["description"],E);const S=d(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const b=d(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const q=d(n,["preTunedModel"]);q!=null&&g(t,["preTunedModel"],q);const G=d(n,["supervisedTuningSpec"]);G!=null&&g(t,["supervisedTuningSpec"],G);const H=d(n,["preferenceOptimizationSpec"]);H!=null&&g(t,["preferenceOptimizationSpec"],H);const ee=d(n,["tuningDataStats"]);ee!=null&&g(t,["tuningDataStats"],ee);const $=d(n,["encryptionSpec"]);$!=null&&g(t,["encryptionSpec"],$);const Z=d(n,["partnerModelTuningSpec"]);Z!=null&&g(t,["partnerModelTuningSpec"],Z);const re=d(n,["customBaseModel"]);re!=null&&g(t,["customBaseModel"],re);const fe=d(n,["experiment"]);fe!=null&&g(t,["experiment"],fe);const ue=d(n,["labels"]);ue!=null&&g(t,["labels"],ue);const M=d(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const w=d(n,["pipelineJob"]);w!=null&&g(t,["pipelineJob"],w);const N=d(n,["serviceAccount"]);N!=null&&g(t,["serviceAccount"],N);const D=d(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const U=d(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function QL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["metadata"]);l!=null&&g(t,["metadata"],l);const c=d(n,["done"]);c!=null&&g(t,["done"],c);const f=d(n,["error"]);return f!=null&&g(t,["error"],f),t}function L0(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=d(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends yo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new vu(uo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:im.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=qL(e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>cm(v))}else{const m=OL(e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>OC(v))}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=zL(e);return f=pe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=JL(v),S=new y0;return Object.assign(S,E),S})}else{const m=GL(e);return f=pe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=HL(v),S=new y0;return Object.assign(S,E),S})}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=PL(e);c=pe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=DL(e);c=pe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=LL(e,e);return l=pe("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>cm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UL(e);return l=pe("tunedModels",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>QL(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ZL=1024*1024*8,jL=3,e4=1e3,t4=2,xp="x-goog-upload-status";async function n4(n,e,t){var s,o,l;let c=0,f=0,p=new sm(new Response),m="upload";for(c=n.size;f<c;){const E=Math.min(ZL,c-f),S=n.slice(f,f+E);f+E>=c&&(m+=", finalize");let b=0,q=e4;for(;b<jL&&(p=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(f),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[xp]));)b++,await s4(q),q=q*t4;if(f+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[xp])!=="active")break;if(c<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[xp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function i4(n){return{size:n.size,type:n.type}}function s4(n){return new Promise(e=>setTimeout(e,n))}class r4{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await n4(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await i4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o4{create(e,t,s){return new a4(e,t,s)}}class a4{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O0="x-goog-api-key";class l4{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(O0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(O0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u4="gl-node/";class c4{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=NP(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new l4(this.apiKey);this.apiClient=new QU({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:u4+"web",uploader:new r4,downloader:new WL}),this.models=new mL(this.apiClient),this.live=new lL(this.apiClient,o,new o4),this.batches=new $2(this.apiClient),this.chats=new Rk(this.models,this.apiClient),this.caches=new Ak(this.apiClient),this.files=new Uk(this.apiClient),this.operations=new gL(this.apiClient),this.authTokens=new ML(this.apiClient),this.tunings=new XL(this.apiClient)}}const f4={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY"},dg=new c4({apiKey:f4.geminiApiKey});async function d4(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),s=await dg.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{items:{type:st.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:st.OBJECT,properties:{analysis:{type:st.STRING,description:"La description concise du vtement."},category:{type:st.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:st.STRING,description:"La couleur principale du vtement."},material:{type:st.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(s.text),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(c=>{l.includes(c.category)||(console.warn(`Catgorie invalide reue de l'IA: ${c.category}, fallback sur "Accessoires"`),c.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",s.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function h4(n){return n&&n.name&&Array.isArray(n.itemIds)}async function p4(n,e,t,s){const o=new Set(e.flatMap(S=>S.itemIds)),c=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),f=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[c,f].filter(Boolean).join(`
`),m=s?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${h4(s)?s.name:s.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,E=await dg.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{tenues:{type:st.ARRAY,description:"La liste des suggestions de tenues.",items:{type:st.OBJECT,properties:{titre:{type:st.STRING,description:"Le nom de la tenue."},description:{type:st.STRING,description:"Une brve description du style de la tenue."},vetements:{type:st.ARRAY,items:{type:st.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function m4(n,e,t,s){const o=new Set(e.flatMap(E=>E.itemIds)),c=n.filter(E=>!o.has(E.id)).map(E=>`- ${E.analysis} (Catgorie: ${E.category}, Couleur: ${E.color}, Matire: ${E.material})`).join(`
`),f=e.map(E=>`- ${E.name} (Ensemble)`).join(`
`),p=[c,f].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${s}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale. Les articles doivent pouvoir tre combins pour crer plusieurs tenues diffrentes.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables. Si tu utilises un ensemble, liste-le par son nom (ex: "Costume bleu marine").
    4. Assure-toi que la quantit de vtements est approprie pour la dure du voyage de ${t} jour(s). Pense  la rutilisation des pices (comme les pantalons ou les vestes).

    Fournis le rsultat en franais sous la forme suivante :
    1. Un "titre" accrocheur pour le plan de valise.
    2. Un "resume" court qui explique la stratgie de la valise (ex: "Une slection capsule pour un weekend ensoleill...").
    3. Une "valise" qui est une liste des descriptions exactes des vtements ou des noms d'ensembles de la liste fournie  emporter.
    `,v=await dg.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{titre:{type:st.STRING,description:"Le nom du plan de valise."},resume:{type:st.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:st.ARRAY,items:{type:st.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(E){throw console.error("Erreur de parsing JSON de la rponse Gemini pour la valise:",E),console.error("Rponse reue:",v.text),new Error("L'IA a renvoy une rponse malforme pour le plan de valise.")}}const g4=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),y4=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),q0=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),pf=()=>x.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hg=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),pg=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),_4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),qC=()=>x.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),v4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),T4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),E4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),S4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),A4=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),BC=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),FC=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),C4=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),GC=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),I4=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),x.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),B0=({theme:n,toggleTheme:e,children:t})=>x.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:x.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[x.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[x.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),x.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?x.jsx(y4,{}):x.jsx(g4,{})})]})}),F0=({user:n})=>{const[e,t]=Ce.useState(""),[s,o]=Ce.useState(""),[l,c]=Ce.useState(!1),f=async()=>{try{await ZM(Gl,EP)}catch(v){console.error("Erreur de connexion Google:",v)}},p=async v=>{v.preventDefault();try{l?await wM(Gl,e,s):await bM(Gl,e,s)}catch(E){console.error("Erreur d'authentification:",E)}},m=async()=>{try{await DM(Gl)}catch(v){console.error("Erreur de dconnexion:",v)}};return n?x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("span",{className:"text-sm",children:["Bonjour, ",n.displayName||n.email]}),x.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Dconnexion"})]}):x.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-xl p-6 max-w-md mx-auto",children:[x.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:l?"Crer un compte":"Se connecter"}),x.jsxs("button",{onClick:f,className:"w-full mb-4 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition flex items-center justify-center gap-2",children:[x.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),"Continuer avec Google"]}),x.jsxs("div",{className:"relative my-6",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-gray-300"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-2 bg-white dark:bg-raisin-black text-gray-500",children:"Ou"})})]}),x.jsxs("form",{onSubmit:p,className:"space-y-4",children:[x.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:v=>t(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0}),x.jsx("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:v=>o(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0}),x.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-gold text-onyx rounded-lg hover:bg-gold-dark transition font-semibold",children:l?"Crer un compte":"Se connecter"})]}),x.jsx("button",{onClick:()=>c(!l),className:"w-full mt-4 text-sm text-gray-500 hover:text-gold transition",children:l?"Dj un compte ? Se connecter":"Pas de compte ? S'inscrire"})]})},R4=({onAnalyze:n,isAnalyzing:e})=>{const t=Ce.useRef(null),[s,o]=Ce.useState([]),[l,c]=Ce.useState(!1),[f,p]=Ce.useState(!1);Ce.useEffect(()=>{const $=()=>p(window.innerWidth<1024);return $(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),Ce.useEffect(()=>()=>{s.forEach($=>URL.revokeObjectURL($.preview))},[s]);const m=$=>{const Z=$.map(re=>({id:`${re.name}-${re.lastModified}-${Math.random()}`,file:re,preview:URL.createObjectURL(re)}));o(re=>[...re,...Z])},v=$=>{$.target.files&&(m(Array.from($.target.files)),$.target.value="")},E=()=>{var $;e||($=t.current)==null||$.click()},S=$=>{f||($.preventDefault(),$.stopPropagation(),c(!0))},b=$=>{f||($.preventDefault(),$.stopPropagation(),c(!1))},q=$=>{f||($.preventDefault(),$.stopPropagation())},G=$=>{f||($.preventDefault(),$.stopPropagation(),c(!1),$.dataTransfer.files&&$.dataTransfer.files.length>0&&(m(Array.from($.dataTransfer.files)),$.dataTransfer.clearData()))},H=$=>{const Z=s.find(re=>re.id===$);Z&&URL.revokeObjectURL(Z.preview),o(re=>re.filter(fe=>fe.id!==$))},ee=()=>{s.length>0&&!e&&(n(s.map($=>$.file)),o([]))};return x.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:b,onDragOver:q,onDrop:G,children:[x.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),x.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[x.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),x.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?x.jsxs(x.Fragment,{children:[x.jsx(pf,{}),x.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:x.jsx(q0,{})}),x.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:f?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),x.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",x.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),l&&!f&&x.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[x.jsx("div",{className:"text-black transform-gpu scale-110",children:x.jsx(q0,{})}),x.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),s.length>0&&!e&&x.jsxs("div",{className:"mt-8",children:[x.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),x.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:s.map($=>x.jsxs("div",{className:"relative group aspect-square",children:[x.jsx("img",{src:$.preview,alt:$.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),x.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),x.jsx("button",{onClick:()=>H($.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:x.jsx(pg,{})})]},$.id))}),x.jsxs("button",{onClick:ee,disabled:e||s.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[x.jsx(hg,{}),"Analyser les ",s.length," article(s)"]})]})]})},w4=({imageSrc:n,analysis:e,onClick:t,onRemove:s,isSelected:o,isSet:l})=>x.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[x.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),x.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l&&!o&&x.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:x.jsx(FC,{})}),o&&x.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:x.jsx(C4,{})}),x.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:x.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),x.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:x.jsx(pg,{})})]}),b4={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},N4=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:s,onSelectItem:o,onCreateSet:l})=>{const[c,f]=Ce.useState("Hauts"),[p,m]=Ce.useState(b4),[v,E]=Ce.useState(!1),[S,b]=Ce.useState([]),[q,G]=Ce.useState(!1),H=Ce.useMemo(()=>new Set(e.flatMap(w=>w.itemIds)),[e]),ee=n.length,$=[{name:"Hauts",icon:v4},{name:"Bas",icon:T4},{name:"Chaussures",icon:E4},{name:"Accessoires",icon:S4}],Z=()=>{E(!v),b([]),G(!1)},re=w=>{v?b(N=>N.includes(w.id)?N.filter(D=>D!==w.id):[...N,w.id]):o(w)},fe=Ce.useMemo(()=>S.length<2?null:e.find(w=>w.itemIds.length===S.length&&w.itemIds.every(N=>S.includes(N))),[S,e]);if(ee===0)return x.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[x.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:x.jsx(_4,{})}),x.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const ue=w=>f(N=>N===w?null:w),M=(w,N,D)=>{m(U=>({...U,[w]:{...U[w],[N]:D}}))};return x.jsxs("div",{children:[x.jsxs("div",{className:"flex justify-between items-center mb-8",children:[x.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",x.jsxs("span",{className:"text-gray-500",children:["(",ee,")"]})]}),x.jsx("button",{onClick:Z,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),x.jsx("div",{className:"space-y-4",children:$.map(({name:w,icon:N})=>{const D=n.filter(F=>F.category===w);if(D.length===0)return null;const U=c===w,O=["Hauts","Bas","Chaussures"].includes(w),k=[...new Set(D.map(F=>F.color))].sort(),rt=[...new Set(D.map(F=>F.material))].sort(),ot=D.filter(F=>{const{color:ae,material:ge}=p[w];return(ae==="Toutes"||F.color===ae)&&(ge==="Toutes"||F.material===ge)});return x.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[x.jsxs("button",{onClick:()=>ue(w),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":U,children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("span",{className:"text-gold",children:x.jsx(N,{})}),x.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:w}),x.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:D.length})]}),x.jsx(A4,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${U?"rotate-180":""}`})]}),x.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${U?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:x.jsx("div",{className:"overflow-hidden",children:x.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[O&&x.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:`${w}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),x.jsxs("select",{id:`${w}-color-filter`,value:p[w].color,onChange:F=>M(w,"color",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[x.jsx("option",{value:"Toutes",children:"Toutes"}),k.map(F=>x.jsx("option",{value:F,children:F},F))]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:`${w}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),x.jsxs("select",{id:`${w}-material-filter`,value:p[w].material,onChange:F=>M(w,"material",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[x.jsx("option",{value:"Toutes",children:"Toutes"}),rt.map(F=>x.jsx("option",{value:F,children:F},F))]})]})]}),x.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ot.map(F=>x.jsx(w4,{imageSrc:F.imageSrc,analysis:F.analysis,onClick:()=>re(F),onRemove:ae=>{ae.stopPropagation(),t(F.id)},isSelected:v&&S.includes(F.id),isSet:H.has(F.id)},F.id))})]})})})]},w)})}),v&&x.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:q?x.jsxs("form",{onSubmit:w=>{w.preventDefault();const D=new FormData(w.currentTarget).get("setName");D&&D.trim()&&(l(S,D.trim()),Z())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[x.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),x.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),x.jsx("button",{type:"button",onClick:()=>G(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:x.jsx(pg,{})})]}):fe?x.jsxs("button",{onClick:()=>{s(fe.id),Z()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[x.jsx(GC,{}),"Dissocier l'ensemble"]}):S.length>1&&x.jsxs("button",{onClick:()=>G(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[x.jsx(FC,{}),"Crer un ensemble avec ",S.length," articles"]})})]})},x4=({onGenerate:n,isGenerating:e,context:t,setContext:s})=>{const o=c=>{c.preventDefault(),t.trim()&&n(t)},l=["Casual","Chic","Formel"];return x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),x.jsx("form",{onSubmit:o,children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),x.jsx("div",{className:"flex justify-center gap-2 mb-4",children:l.map(c=>x.jsx("button",{type:"button",onClick:()=>s(c),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===c?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:c},c))}),x.jsx("input",{id:"context",type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),x.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[x.jsx(hg,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},M4=({outfits:n,allClothingItems:e})=>{const[t,s]=Ce.useState(null);Ce.useEffect(()=>{if(!t)return;const l=c=>{c.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t]);const o=l=>{const c=l.toLowerCase(),f=e.find(p=>{if(p.analysis.toLowerCase()===c)return!0;const m=new Set(p.analysis.toLowerCase().split(/\s+/)),v=c.split(/\s+/);return v.filter(S=>m.has(S)).length/v.length>.5});return f?f.imageSrc:null};return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"mt-10 space-y-8",children:n.map((l,c)=>x.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[x.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),x.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((f,p)=>{const m=o(f);return x.jsx("button",{onClick:()=>m&&s(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${f}`,children:m?x.jsx("img",{src:m,alt:f,className:"w-full h-full object-cover"}):x.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:x.jsx(qC,{})})},p)})}),x.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((f,p)=>x.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:f},p))})]},c))}),t&&x.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:x.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[x.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),x.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:x.jsx(BC,{})})]})})]})},D4=({item:n,clothingSets:e,onClose:t,onUpdate:s,onGenerateFrom:o,onRemoveSet:l})=>{const[c,f]=Ce.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(E=>E.itemIds.includes(n.id));Ce.useEffect(()=>{f({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),Ce.useEffect(()=>{const E=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[t]);const m=E=>{const{name:S,value:b}=E.target;f(q=>({...q,[S]:b}))},v=E=>{E.preventDefault(),s({...n,...c})};return x.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:x.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),x.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:x.jsx(BC,{})})]}),x.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[x.jsxs("div",{className:"space-y-4 flex-grow",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),x.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),x.jsx("select",{id:"category",name:"category",value:c.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>x.jsx("option",{value:E,children:E},E))})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),x.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),x.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&x.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),x.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),x.jsxs("button",{type:"button",onClick:()=>{l(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[x.jsx(GC,{}),x.jsx("span",{children:"Dissocier"})]})]})]}),x.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[x.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[x.jsx(hg,{}),"Crer une tenue avec cet article"]}),x.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},P4=({onGenerate:n,isGenerating:e})=>{const[t,s]=Ce.useState(3),[o,l]=Ce.useState(""),c=f=>{f.preventDefault(),o.trim()&&t>0&&n(t,o)};return x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),x.jsxs("form",{onSubmit:c,className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[x.jsxs("div",{className:"sm:col-span-1",children:[x.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),x.jsx("input",{id:"days",type:"number",value:t,onChange:f=>s(parseInt(f.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),x.jsxs("div",{className:"sm:col-span-2",children:[x.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),x.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),x.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[x.jsx(I4,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},k4=({plan:n,allClothingItems:e})=>{const t=s=>{const o=s.toLowerCase(),l=e.find(f=>f.analysis.toLowerCase()===o);if(l)return l.imageSrc;const c=e.map(f=>{const p=new Set(f.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),E=m.filter(S=>p.has(S)).length/m.length;return{item:f,score:E}}).filter(f=>f.score>.5).sort((f,p)=>p.score-f.score)[0];return c?c.item.imageSrc:null};return x.jsx("div",{className:"mt-10",children:x.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[x.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),x.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((s,o)=>{const l=t(s);return x.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s,children:[l?x.jsx("img",{src:l,alt:s,className:"w-full h-full object-cover"}):x.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:x.jsx(qC,{})}),x.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:x.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s})})]},o)})}),x.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((s,o)=>x.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s},o))})]})})},V4=()=>{const[n,e]=Ce.useState(null),[t,s]=Ce.useState(!0),[o,l]=Ce.useState("dark"),[c,f]=Ce.useState([]),[p,m]=Ce.useState([]),[v,E]=Ce.useState([]),[S,b]=Ce.useState(!1),[q,G]=Ce.useState(!1),[H,ee]=Ce.useState(null),[$,Z]=Ce.useState(null),[re,fe]=Ce.useState(""),[ue,M]=Ce.useState(null),[w,N]=Ce.useState(!1);Ce.useEffect(()=>{const P=MM(Gl,Q=>{e(Q),s(!1)});return()=>P()},[]),Ce.useEffect(()=>{n&&(async()=>{try{const Q=await AP(n.uid),ie=await IP(n.uid);f(Q),m(ie)}catch(Q){console.error("Erreur lors du chargement des donnes:",Q)}})()},[n]),Ce.useEffect(()=>{console.log(" Save Effect:",{user:!!n,itemsLength:c.length}),n&&c.length>0&&(console.log(" SAVING ITEMS..."),SP(n.uid,c).then(()=>console.log(" SAVE SUCCESS!")).catch(P=>console.error(" SAVE ERROR:",P)))},[c,n]),Ce.useEffect(()=>{n&&p.length>0&&CP(n.uid,p).catch(console.error)},[p,n]),Ce.useEffect(()=>{const P=window.document.documentElement;P.classList.remove(o==="light"?"dark":"light"),P.classList.add(o)},[o]);const D=()=>{l(P=>P==="light"?"dark":"light")},U=Ce.useCallback(async P=>{if(P.length!==0){b(!0),ee(null);try{const Q=P.map(We=>new Promise((at,Pn)=>{const hn=new FileReader;hn.onload=()=>at(hn.result),hn.onerror=Pn,hn.readAsDataURL(We)})),ie=await Promise.all(Q),ce=ie.map(We=>We.split(",")[1]),ye=await d4(ce),Ne=Math.min(ye.length,P.length),Me=[];for(let We=0;We<Ne;We++)Me.push({id:`${Date.now()}-${P[We].name}-${Math.random()}`,imageSrc:ie[We],...ye[We]});ye.length!==P.length&&(console.warn(`Le nombre de rsultats d'analyse (${ye.length}) ne correspond pas au nombre de fichiers (${P.length}).`),ee(`L'IA a analys ${Me.length} sur ${P.length} image(s). Certaines ont peut-tre t ignores.`)),f(We=>[...We,...Me])}catch(Q){console.error("Erreur lors de l'analyse par lot des images:",Q),ee("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{b(!1)}}},[]),O=Ce.useCallback(async(P,Q)=>{if(c.length-p.flatMap(ce=>ce.itemIds).length+p.length<2){ee("Veuillez avoir au moins deux articles ou ensembles pour gnrer des tenues.");return}G(!0),ee(null),E([]);try{const ce=await p4(c,p,P,Q);E(ce)}catch(ce){console.error("Erreur lors de la gnration des tenues:",ce),ee("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{G(!1)}},[c,p]),k=Ce.useCallback(async(P,Q)=>{if(c.length<P){ee(`Veuillez avoir au moins ${P} articles dans votre garde-robe pour un voyage de ${P} jours.`);return}N(!0),ee(null),M(null);try{const ie=await m4(c,p,P,Q);M(ie)}catch(ie){console.error("Erreur lors de la gnration du plan de valise:",ie),ee("Impossible de gnrer le plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{N(!1)}},[c,p]),rt=P=>{f(Q=>Q.filter(ie=>ie.id!==P)),m(Q=>Q.map(ce=>ce.itemIds.includes(P)?{...ce,itemIds:ce.itemIds.filter(ye=>ye!==P)}:ce).filter(ce=>ce.itemIds.length>1))},ot=P=>{m(Q=>Q.filter(ie=>ie.id!==P))},F=P=>{Z(P)},ae=()=>{Z(null)},ge=P=>{f(Q=>Q.map(ie=>ie.id===P.id?P:ie)),ae()},Fe=P=>{if(!re.trim()){ee("Veuillez d'abord dcrire une occasion ou une mto dans le crateur de tenues.");return}ae(),O(re,P)},ze=(P,Q)=>{if(P.length<2||!Q.trim())return;const ie=c.find(ye=>ye.id===P[0]);if(!ie)return;const ce={id:`${Date.now()}-set-${Math.random()}`,name:Q,itemIds:P,imageSrc:ie.imageSrc};m(ye=>[...ye,ce])};return t?x.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx flex items-center justify-center",children:x.jsx(pf,{})}):n?x.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[x.jsx(B0,{theme:o,toggleTheme:D,children:x.jsx(F0,{user:n})}),x.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",background:n?"green":"red",color:"white",padding:"10px",zIndex:9999,borderRadius:"8px"},children:n?` Connect: ${n.email||n.displayName}`:" NON CONNECT"}),x.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[H&&x.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[x.jsx("strong",{className:"font-bold",children:"Erreur: "}),x.jsx("span",{className:"block sm:inline",children:H})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[x.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[x.jsx(R4,{onAnalyze:U,isAnalyzing:S}),x.jsx(N4,{clothingItems:c,clothingSets:p,onRemoveItem:rt,onRemoveSet:ot,onSelectItem:F,onCreateSet:ze})]}),x.jsx("div",{className:"space-y-10",children:x.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8 sticky top-28",children:[x.jsx(P4,{onGenerate:k,isGenerating:w}),w&&x.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[x.jsx(pf,{}),x.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA prpare votre valise..."})]}),ue&&x.jsx(k4,{plan:ue,allClothingItems:c}),(ue||w||v.length>0)&&x.jsx("hr",{className:"my-8 border-dashed border-gray-200 dark:border-gray-700"}),x.jsx(x4,{onGenerate:O,isGenerating:q,context:re,setContext:fe}),q&&x.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[x.jsx(pf,{}),x.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA compose vos tenues..."})]}),v.length>0&&x.jsx(M4,{outfits:v,allClothingItems:c})]})})]}),$&&x.jsx(D4,{item:$,clothingSets:p,onClose:ae,onUpdate:ge,onGenerateFrom:Fe,onRemoveSet:ot})]})]}):x.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[x.jsx(B0,{theme:o,toggleTheme:D}),x.jsx("main",{className:"container mx-auto px-4 py-20 flex items-center justify-center min-h-[calc(100vh-200px)]",children:x.jsx(F0,{user:n})})]})},zC=document.getElementById("root");if(!zC)throw new Error("L'lment root est introuvable dans le DOM");const U4=bR.createRoot(zC);U4.render(x.jsx(TR.StrictMode,{children:x.jsx(V4,{})}));
