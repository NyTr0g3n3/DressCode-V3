(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function _1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mv={exports:{}},Oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function XV(){if(Yw)return Oc;Yw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Oc.Fragment=e,Oc.jsx=n,Oc.jsxs=n,Oc}var Jw;function QV(){return Jw||(Jw=1,mv.exports=XV()),mv.exports}var S=QV(),gv={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function ZV(){if(Ww)return qe;Ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function O(j,ee,pe){this.props=j,this.context=ee,this.refs=D,this.updater=pe||C}O.prototype.isReactComponent={},O.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=O.prototype;function F(j,ee,pe){this.props=j,this.context=ee,this.refs=D,this.updater=pe||C}var $=F.prototype=new k;$.constructor=F,N($,O.prototype),$.isPureReactComponent=!0;var K=Array.isArray;function H(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function P(j,ee,pe){var ne=pe.ref;return{$$typeof:t,type:j,key:ee,ref:ne!==void 0?ne:null,props:pe}}function V(j,ee){return P(j.type,ee,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function q(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(pe){return ee[pe]})}var z=/\/+/g;function Pe(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):ee.toString(36)}function De(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(H,H):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Z(j,ee,pe,ne,he){var Ee=typeof j;(Ee==="undefined"||Ee==="boolean")&&(j=null);var Ve=!1;if(j===null)Ve=!0;else switch(Ee){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(j.$$typeof){case t:case e:Ve=!0;break;case p:return Ve=j._init,Z(Ve(j._payload),ee,pe,ne,he)}}if(Ve)return he=he(j),Ve=ne===""?"."+Pe(j,0):ne,K(he)?(pe="",Ve!=null&&(pe=Ve.replace(z,"$&/")+"/"),Z(he,ee,pe,"",function(Nn){return Nn})):he!=null&&(U(he)&&(he=V(he,pe+(he.key==null||j&&j.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+Ve)),ee.push(he)),1;Ve=0;var Be=ne===""?".":ne+":";if(K(j))for(var Tt=0;Tt<j.length;Tt++)ne=j[Tt],Ee=Be+Pe(ne,Tt),Ve+=Z(ne,ee,pe,Ee,he);else if(Tt=b(j),typeof Tt=="function")for(j=Tt.call(j),Tt=0;!(ne=j.next()).done;)ne=ne.value,Ee=Be+Pe(ne,Tt++),Ve+=Z(ne,ee,pe,Ee,he);else if(Ee==="object"){if(typeof j.then=="function")return Z(De(j),ee,pe,ne,he);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function ae(j,ee,pe){if(j==null)return j;var ne=[],he=0;return Z(j,ne,"","",function(Ee){return ee.call(pe,Ee,he++)}),ne}function me(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(pe){(j._status===0||j._status===-1)&&(j._status=1,j._result=pe)},function(pe){(j._status===0||j._status===-1)&&(j._status=2,j._result=pe)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var xe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ce={map:ae,forEach:function(j,ee,pe){ae(j,function(){ee.apply(this,arguments)},pe)},count:function(j){var ee=0;return ae(j,function(){ee++}),ee},toArray:function(j){return ae(j,function(ee){return ee})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return qe.Activity=v,qe.Children=Ce,qe.Component=O,qe.Fragment=n,qe.Profiler=r,qe.PureComponent=F,qe.StrictMode=i,qe.Suspense=d,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,qe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return I.H.useMemoCache(j)}},qe.cache=function(j){return function(){return j.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(j,ee,pe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ne=N({},j.props),he=j.key;if(ee!=null)for(Ee in ee.key!==void 0&&(he=""+ee.key),ee)!R.call(ee,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ee.ref===void 0||(ne[Ee]=ee[Ee]);var Ee=arguments.length-2;if(Ee===1)ne.children=pe;else if(1<Ee){for(var Ve=Array(Ee),Be=0;Be<Ee;Be++)Ve[Be]=arguments[Be+2];ne.children=Ve}return P(j.type,he,ne)},qe.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},qe.createElement=function(j,ee,pe){var ne,he={},Ee=null;if(ee!=null)for(ne in ee.key!==void 0&&(Ee=""+ee.key),ee)R.call(ee,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=ee[ne]);var Ve=arguments.length-2;if(Ve===1)he.children=pe;else if(1<Ve){for(var Be=Array(Ve),Tt=0;Tt<Ve;Tt++)Be[Tt]=arguments[Tt+2];he.children=Be}if(j&&j.defaultProps)for(ne in Ve=j.defaultProps,Ve)he[ne]===void 0&&(he[ne]=Ve[ne]);return P(j,Ee,he)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(j){return{$$typeof:c,render:j}},qe.isValidElement=U,qe.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:me}},qe.memo=function(j,ee){return{$$typeof:f,type:j,compare:ee===void 0?null:ee}},qe.startTransition=function(j){var ee=I.T,pe={};I.T=pe;try{var ne=j(),he=I.S;he!==null&&he(pe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(H,xe)}catch(Ee){xe(Ee)}finally{ee!==null&&pe.types!==null&&(ee.types=pe.types),I.T=ee}},qe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},qe.use=function(j){return I.H.use(j)},qe.useActionState=function(j,ee,pe){return I.H.useActionState(j,ee,pe)},qe.useCallback=function(j,ee){return I.H.useCallback(j,ee)},qe.useContext=function(j){return I.H.useContext(j)},qe.useDebugValue=function(){},qe.useDeferredValue=function(j,ee){return I.H.useDeferredValue(j,ee)},qe.useEffect=function(j,ee){return I.H.useEffect(j,ee)},qe.useEffectEvent=function(j){return I.H.useEffectEvent(j)},qe.useId=function(){return I.H.useId()},qe.useImperativeHandle=function(j,ee,pe){return I.H.useImperativeHandle(j,ee,pe)},qe.useInsertionEffect=function(j,ee){return I.H.useInsertionEffect(j,ee)},qe.useLayoutEffect=function(j,ee){return I.H.useLayoutEffect(j,ee)},qe.useMemo=function(j,ee){return I.H.useMemo(j,ee)},qe.useOptimistic=function(j,ee){return I.H.useOptimistic(j,ee)},qe.useReducer=function(j,ee,pe){return I.H.useReducer(j,ee,pe)},qe.useRef=function(j){return I.H.useRef(j)},qe.useState=function(j){return I.H.useState(j)},qe.useSyncExternalStore=function(j,ee,pe){return I.H.useSyncExternalStore(j,ee,pe)},qe.useTransition=function(){return I.H.useTransition()},qe.version="19.2.0",qe}var Xw;function b_(){return Xw||(Xw=1,gv.exports=ZV()),gv.exports}var B=b_();const In=_1(B);var yv={exports:{}},Uc={},vv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function eL(){return Qw||(Qw=1,(function(t){function e(Z,ae){var me=Z.length;Z.push(ae);e:for(;0<me;){var xe=me-1>>>1,Ce=Z[xe];if(0<r(Ce,ae))Z[xe]=ae,Z[me]=Ce,me=xe;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ae=Z[0],me=Z.pop();if(me!==ae){Z[0]=me;e:for(var xe=0,Ce=Z.length,j=Ce>>>1;xe<j;){var ee=2*(xe+1)-1,pe=Z[ee],ne=ee+1,he=Z[ne];if(0>r(pe,me))ne<Ce&&0>r(he,pe)?(Z[xe]=he,Z[ne]=me,xe=ne):(Z[xe]=pe,Z[ee]=me,xe=ee);else if(ne<Ce&&0>r(he,me))Z[xe]=he,Z[ne]=me,xe=ne;else break e}}return ae}function r(Z,ae){var me=Z.sortIndex-ae.sortIndex;return me!==0?me:Z.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,v=null,T=3,b=!1,C=!1,N=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function $(Z){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=Z)i(f),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=n(f)}}function K(Z){if(N=!1,$(Z),!C)if(n(d)!==null)C=!0,H||(H=!0,q());else{var ae=n(f);ae!==null&&De(K,ae.startTime-Z)}}var H=!1,I=-1,R=5,P=-1;function V(){return D?!0:!(t.unstable_now()-P<R)}function U(){if(D=!1,H){var Z=t.unstable_now();P=Z;var ae=!0;try{e:{C=!1,N&&(N=!1,k(I),I=-1),b=!0;var me=T;try{t:{for($(Z),v=n(d);v!==null&&!(v.expirationTime>Z&&V());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,T=v.priorityLevel;var Ce=xe(v.expirationTime<=Z);if(Z=t.unstable_now(),typeof Ce=="function"){v.callback=Ce,$(Z),ae=!0;break t}v===n(d)&&i(d),$(Z)}else i(d);v=n(d)}if(v!==null)ae=!0;else{var j=n(f);j!==null&&De(K,j.startTime-Z),ae=!1}}break e}finally{v=null,T=me,b=!1}ae=void 0}}finally{ae?q():H=!1}}}var q;if(typeof F=="function")q=function(){F(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Pe=z.port2;z.port1.onmessage=U,q=function(){Pe.postMessage(null)}}else q=function(){O(U,0)};function De(Z,ae){I=O(function(){Z(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var me=T;T=ae;try{return Z()}finally{T=me}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(Z,ae){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var me=T;T=Z;try{return ae()}finally{T=me}},t.unstable_scheduleCallback=function(Z,ae,me){var xe=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?xe+me:xe):me=xe,Z){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=me+Ce,Z={id:p++,callback:ae,priorityLevel:Z,startTime:me,expirationTime:Ce,sortIndex:-1},me>xe?(Z.sortIndex=me,e(f,Z),n(d)===null&&Z===n(f)&&(N?(k(I),I=-1):N=!0,De(K,me-xe))):(Z.sortIndex=Ce,e(d,Z),C||b||(C=!0,H||(H=!0,q()))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var ae=T;return function(){var me=T;T=ae;try{return Z.apply(this,arguments)}finally{T=me}}}})(_v)),_v}var Zw;function tL(){return Zw||(Zw=1,vv.exports=eL()),vv.exports}var Tv={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function nL(){if(eA)return ti;eA=1;var t=b_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ti.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},ti.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},ti.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ti.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ti.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ti.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ti.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ti.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ti.requestFormReset=function(d){i.d.r(d)},ti.unstable_batchedUpdates=function(d,f){return d(f)},ti.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},ti.useFormStatus=function(){return l.H.useHostTransitionStatus()},ti.version="19.2.0",ti}var tA;function T1(){if(tA)return Tv.exports;tA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tv.exports=nL(),Tv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function iL(){if(nA)return Uc;nA=1;var t=tL(),e=b_(),n=T1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return d(_),s;if(E===h)return d(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var A=!1,M=_.child;M;){if(M===u){A=!0,u=_,h=E;break}if(M===h){A=!0,h=_,u=E;break}M=M.sibling}if(!A){for(M=E.child;M;){if(M===u){A=!0,u=E,h=_;break}if(M===h){A=!0,h=E,u=_;break}M=M.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var z=Symbol.for("react.client.reference");function Pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case F:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case $:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:Pe(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return Pe(s(a))}catch{}}return null}var De=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},xe=[],Ce=-1;function j(s){return{current:s}}function ee(s){0>Ce||(s.current=xe[Ce],xe[Ce]=null,Ce--)}function pe(s,a){Ce++,xe[Ce]=s.current,s.current=a}var ne=j(null),he=j(null),Ee=j(null),Ve=j(null);function Be(s,a){switch(pe(Ee,a),pe(he,s),pe(ne,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?yw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=yw(a),s=vw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(ne),pe(ne,s)}function Tt(){ee(ne),ee(he),ee(Ee)}function Nn(s){s.memoizedState!==null&&pe(Ve,s);var a=ne.current,u=vw(a,s.type);a!==u&&(pe(he,s),pe(ne,u))}function di(s){he.current===s&&(ee(ne),ee(he)),Ve.current===s&&(ee(Ve),Mc._currentValue=me)}var Zt,Wn;function Un(s){if(Zt===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Zt=a&&a[1]||"",Wn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+s+Wn}var An=!1;function fi(s,a){if(!s||An)return"";An=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ie){var te=ie}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(ie){te=ie}s.call(ue.prototype)}}else{try{throw Error()}catch(ie){te=ie}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),A=E[0],M=E[1];if(A&&M){var G=A.split(`
`),Q=M.split(`
`);for(_=h=0;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;for(;_<Q.length&&!Q[_].includes("DetermineComponentFrameRoot");)_++;if(h===G.length||_===Q.length)for(h=G.length-1,_=Q.length-1;1<=h&&0<=_&&G[h]!==Q[_];)_--;for(;1<=h&&0<=_;h--,_--)if(G[h]!==Q[_]){if(h!==1||_!==1)do if(h--,_--,0>_||G[h]!==Q[_]){var se=`
`+G[h].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=h&&0<=_);break}}}finally{An=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Un(u):""}function Oi(s,a){switch(s.tag){case 26:case 27:case 5:return Un(s.type);case 16:return Un("Lazy");case 13:return s.child!==a&&a!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return fi(s.type,!1);case 11:return fi(s.type.render,!1);case 1:return fi(s.type,!0);case 31:return Un("Activity");default:return""}}function en(s){try{var a="",u=null;do a+=Oi(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var wi=Object.prototype.hasOwnProperty,Xn=t.unstable_scheduleCallback,Ai=t.unstable_cancelCallback,Qn=t.unstable_shouldYield,Fn=t.unstable_requestPaint,Ie=t.unstable_now,tn=t.unstable_getCurrentPriorityLevel,Ne=t.unstable_ImmediatePriority,Ot=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Jt=t.unstable_LowPriority,Sr=t.unstable_IdlePriority,qr=t.log,Pn=t.unstable_setDisableYieldValue,hi=null,cn=null;function de(s){if(typeof qr=="function"&&Pn(s),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(hi,s)}catch{}}var be=Math.clz32?Math.clz32:ct,we=Math.log,je=Math.LN2;function ct(s){return s>>>=0,s===0?32:31-(we(s)/je|0)|0}var Je=256,We=262144,Xe=4194304;function Qe(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function oe(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~E,h!==0?_=Qe(h):(A&=M,A!==0?_=Qe(A):u||(u=M&~s,u!==0&&(_=Qe(u))))):(M=h&~E,M!==0?_=Qe(M):A!==0?_=Qe(A):u||(u=h&~s,u!==0&&(_=Qe(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function ve(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ke(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var s=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),s}function kt(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ct(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ft(s,a,u,h,_,E){var A=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,G=s.expirationTimes,Q=s.hiddenUpdates;for(u=A&~u;0<u;){var se=31-be(u),ue=1<<se;M[se]=0,G[se]=-1;var te=Q[se];if(te!==null)for(Q[se]=null,se=0;se<te.length;se++){var ie=te[se];ie!==null&&(ie.lane&=-536870913)}u&=~ue}h!==0&&xn(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~a))}function xn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-be(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Vt(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-be(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function Zn(s,a){var u=a&-a;return u=(u&42)!==0?1:er(u),(u&(s.suspendedLanes|a))!==0?0:u}function er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Bn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function pi(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:zw(s.type))}function us(s,a){var u=ae.p;try{return ae.p=s,a()}finally{ae.p=u}}var Ui=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ui,dn="__reactProps$"+Ui,Fi="__reactContainer$"+Ui,tr="__reactEvents$"+Ui,Bi="__reactListeners$"+Ui,aa="__reactHandles$"+Ui,br="__reactResources$"+Ui,nr="__reactMarker$"+Ui;function ir(s){delete s[Ut],delete s[dn],delete s[tr],delete s[Bi],delete s[aa]}function xi(s){var a=s[Ut];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Fi]||u[Ut]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Aw(s);s!==null;){if(u=s[Ut])return u;s=Aw(s)}return a}s=u,u=s.parentNode}return null}function rr(s){if(s=s[Ut]||s[Fi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Hr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function mi(s){var a=s[br];return a||(a=s[br]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(s){s[nr]=!0}var wr=new Set,Ar={};function gi(s,a){Gr(s,a),Gr(s+"Capture",a)}function Gr(s,a){for(Ar[s]=a,s=0;s<a.length;s++)wr.add(a[s])}var gg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gu={},ju={};function mf(s){return wi.call(ju,s)?!0:wi.call(Gu,s)?!1:gg.test(s)?ju[s]=!0:(Gu[s]=!0,!1)}function Ks(s,a,u){if(mf(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Ys(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function sr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function yi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function gf(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(A){u=""+A,E.call(this,A)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function al(s){if(!s._valueTracker){var a=gf(s)?"checked":"value";s._valueTracker=yg(s,a,""+s[a])}}function $u(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=gf(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ll(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cs=/[\n"\\]/g;function nn(s){return s.replace(cs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Js(s,a,u,h,_,E,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yi(a)):s.value!==""+yi(a)&&(s.value=""+yi(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?ul(s,A,yi(a)):u!=null?ul(s,A,yi(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+yi(M):s.removeAttribute("name")}function la(s,a,u,h,_,E,A,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){al(s);return}u=u!=null?""+yi(u):"",a=a!=null?""+yi(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),al(s)}function ul(s,a,u){a==="number"&&ll(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ht(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+yi(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function ua(s,a,u){if(a!=null&&(a=""+yi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+yi(u):""}function Ws(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(De(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=yi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),al(s)}function or(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var vg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ku(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||vg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function yf(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&Ku(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&Ku(s,E,a[E])}function Yu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _g=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(s){return Tg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Dn(){}var cl=null;function dl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ds=null,zi=null;function vf(s){var a=rr(s);if(a&&(s=a.stateNode)){var u=s[dn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Js(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[dn]||null;if(!_)throw Error(i(90));Js(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&$u(h)}break e;case"textarea":ua(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ht(s,!!u.multiple,a,!1)}}}var Ju=!1;function _f(s,a,u){if(Ju)return s(a,u);Ju=!0;try{var h=s(a);return h}finally{if(Ju=!1,(ds!==null||zi!==null)&&(mh(),ds&&(a=ds,s=zi,zi=ds=null,vf(a),s)))for(a=0;a<s.length;a++)vf(s[a])}}function Ci(s,a){var u=s.stateNode;if(u===null)return null;var h=u[dn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=!1;if(xr)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Wu=!1}var qi=null,fl=null,Kr=null;function Xs(){if(Kr)return Kr;var s,a=fl,u=a.length,h,_="value"in qi?qi.value:qi.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var A=u-s;for(h=1;h<=A&&a[u-h]===_[E-h];h++);return Kr=_.slice(s,1<h?1-h:void 0)}function ca(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Qs(){return!0}function Ft(){return!1}function ei(s){function a(u,h,_,E,A){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Qs:Ft,this.isPropagationStopped=Ft,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),a}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=ei(fs),Zs=v({},fs,{view:0,detail:0}),Tf=ei(Zs),eo,hl,vi,fa=v({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vi&&(vi&&s.type==="mousemove"?(eo=s.screenX-vi.screenX,hl=s.screenY-vi.screenY):hl=eo=0,vi=s),eo)},movementY:function(s){return"movementY"in s?s.movementY:hl}}),Ef=ei(fa),ha=v({},fa,{dataTransfer:0}),Sf=ei(ha),Xu=v({},Zs,{relatedTarget:0}),to=ei(Xu),bf=v({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=ei(bf),Eg=v({},fs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wf=ei(Eg),pa=v({},fs,{data:0}),Qu=ei(pa),Af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xf(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ec[s])?!!a[s]:!1}function no(){return xf}var Cf=v({},Zs,{key:function(s){if(s.key){var a=Af[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(s){return s.type==="keypress"?ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),If=ei(Cf),hs=v({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=ei(hs),Rf=v({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),Nf=ei(Rf),Pf=v({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=ei(Pf),_i=v({},fa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Df=ei(_i),Mf=v({},fs,{newState:0,oldState:0}),io=ei(Mf),g=[9,13,27,32],w=xr&&"CompositionEvent"in window,x=null;xr&&"documentMode"in document&&(x=document.documentMode);var L=xr&&"TextEvent"in window&&!x,W=xr&&(!w||x&&8<x&&11>=x),re=" ",ge=!1;function Et(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ze=!1;function Mn(s,a){switch(s){case"compositionend":return yn(a);case"keypress":return a.which!==32?null:(ge=!0,re);case"textInput":return s=a.data,s===re&&ge?null:s;default:return null}}function kn(s,a){if(Ze)return s==="compositionend"||!w&&Et(s,a)?(s=Xs(),Kr=fl=qi=null,Ze=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return W&&a.locale!=="ko"?null:a.data;default:return null}}var ro={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ii(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ro[s.type]:a==="textarea"}function ma(s,a,u,h){ds?zi?zi.push(h):zi=[h]:ds=h,a=Sh(a,"onChange"),0<a.length&&(u=new da("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ps=null,nc=null;function wk(s){dw(s,0)}function kf(s){var a=Hr(s);if($u(a))return s}function NE(s,a){if(s==="change")return a}var PE=!1;if(xr){var Sg;if(xr){var bg="oninput"in document;if(!bg){var DE=document.createElement("div");DE.setAttribute("oninput","return;"),bg=typeof DE.oninput=="function"}Sg=bg}else Sg=!1;PE=Sg&&(!document.documentMode||9<document.documentMode)}function ME(){ps&&(ps.detachEvent("onpropertychange",kE),nc=ps=null)}function kE(s){if(s.propertyName==="value"&&kf(nc)){var a=[];ma(a,nc,s,dl(s)),_f(wk,a)}}function Ak(s,a,u){s==="focusin"?(ME(),ps=a,nc=u,ps.attachEvent("onpropertychange",kE)):s==="focusout"&&ME()}function xk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return kf(nc)}function Ck(s,a){if(s==="click")return kf(a)}function Ik(s,a){if(s==="input"||s==="change")return kf(a)}function Rk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Hi=typeof Object.is=="function"?Object.is:Rk;function ic(s,a){if(Hi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!wi.call(a,_)||!Hi(s[_],a[_]))return!1}return!0}function VE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function LE(s,a){var u=VE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=VE(u)}}function OE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?OE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function UE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ll(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ll(s.document)}return a}function wg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Nk=xr&&"documentMode"in document&&11>=document.documentMode,gl=null,Ag=null,rc=null,xg=!1;function FE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;xg||gl==null||gl!==ll(h)||(h=gl,"selectionStart"in h&&wg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),rc&&ic(rc,h)||(rc=h,h=Sh(Ag,"onSelect"),0<h.length&&(a=new da("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=gl)))}function ga(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var yl={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},Cg={},BE={};xr&&(BE=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function ya(s){if(Cg[s])return Cg[s];if(!yl[s])return s;var a=yl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in BE)return Cg[s]=a[u];return s}var zE=ya("animationend"),qE=ya("animationiteration"),HE=ya("animationstart"),Pk=ya("transitionrun"),Dk=ya("transitionstart"),Mk=ya("transitioncancel"),GE=ya("transitionend"),jE=new Map,Ig="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ig.push("scrollEnd");function Cr(s,a){jE.set(s,a),gi(a,[s])}var Vf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ar=[],vl=0,Rg=0;function Lf(){for(var s=vl,a=Rg=vl=0;a<s;){var u=ar[a];ar[a++]=null;var h=ar[a];ar[a++]=null;var _=ar[a];ar[a++]=null;var E=ar[a];if(ar[a++]=null,h!==null&&_!==null){var A=h.pending;A===null?_.next=_:(_.next=A.next,A.next=_),h.pending=_}E!==0&&$E(u,_,E)}}function Of(s,a,u,h){ar[vl++]=s,ar[vl++]=a,ar[vl++]=u,ar[vl++]=h,Rg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Ng(s,a,u,h){return Of(s,a,u,h),Uf(s)}function va(s,a){return Of(s,null,null,a),Uf(s)}function $E(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-be(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function Uf(s){if(50<xc)throw xc=0,Fy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var _l={};function kk(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(s,a,u,h){return new kk(s,a,u,h)}function Pg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=Gi(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function KE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Ff(s,a,u,h,_,E){var A=0;if(h=s,typeof s=="function")Pg(s)&&(A=1);else if(typeof s=="string")A=FV(s,u,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Gi(31,u,a,_),s.elementType=P,s.lanes=E,s;case N:return _a(u.children,_,E,a);case D:A=8,_|=24;break;case O:return s=Gi(12,u,a,_|2),s.elementType=O,s.lanes=E,s;case K:return s=Gi(13,u,a,_),s.elementType=K,s.lanes=E,s;case H:return s=Gi(19,u,a,_),s.elementType=H,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:A=10;break e;case k:A=9;break e;case $:A=11;break e;case I:A=14;break e;case R:A=16,h=null;break e}A=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Gi(A,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function _a(s,a,u,h){return s=Gi(7,s,h,a),s.lanes=u,s}function Dg(s,a,u){return s=Gi(6,s,null,a),s.lanes=u,s}function YE(s){var a=Gi(18,null,null,0);return a.stateNode=s,a}function Mg(s,a,u){return a=Gi(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var JE=new WeakMap;function lr(s,a){if(typeof s=="object"&&s!==null){var u=JE.get(s);return u!==void 0?u:(a={value:s,source:a,stack:en(a)},JE.set(s,a),a)}return{value:s,source:a,stack:en(a)}}var Tl=[],El=0,Bf=null,sc=0,ur=[],cr=0,so=null,Yr=1,Jr="";function gs(s,a){Tl[El++]=sc,Tl[El++]=Bf,Bf=s,sc=a}function WE(s,a,u){ur[cr++]=Yr,ur[cr++]=Jr,ur[cr++]=so,so=s;var h=Yr;s=Jr;var _=32-be(h)-1;h&=~(1<<_),u+=1;var E=32-be(a)+_;if(30<E){var A=_-_%5;E=(h&(1<<A)-1).toString(32),h>>=A,_-=A,Yr=1<<32-be(a)+_|u<<_|h,Jr=E+s}else Yr=1<<E|u<<_|h,Jr=s}function kg(s){s.return!==null&&(gs(s,1),WE(s,1,0))}function Vg(s){for(;s===Bf;)Bf=Tl[--El],Tl[El]=null,sc=Tl[--El],Tl[El]=null;for(;s===so;)so=ur[--cr],ur[cr]=null,Jr=ur[--cr],ur[cr]=null,Yr=ur[--cr],ur[cr]=null}function XE(s,a){ur[cr++]=Yr,ur[cr++]=Jr,ur[cr++]=so,Yr=a.id,Jr=a.overflow,so=s}var zn=null,Bt=null,lt=!1,oo=null,dr=!1,Lg=Error(i(519));function ao(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(lr(a,s)),Lg}function QE(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[Ut]=s,a[dn]=h,u){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(u=0;u<Ic.length;u++)nt(Ic[u],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),la(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Ws(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||mw(a.textContent,u)?(h.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),h.onScroll!=null&&nt("scroll",a),h.onScrollEnd!=null&&nt("scrollend",a),h.onClick!=null&&(a.onclick=Dn),a=!0):a=!1,a||ao(s,!0)}function ZE(s){for(zn=s.return;zn;)switch(zn.tag){case 5:case 31:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:zn=zn.return}}function Sl(s){if(s!==zn)return!1;if(!lt)return ZE(s),lt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||ev(s.type,s.memoizedProps)),u=!u),u&&Bt&&ao(s),ZE(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Bt=ww(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Bt=ww(s)}else a===27?(a=Bt,So(s.type)?(s=sv,sv=null,Bt=s):Bt=a):Bt=zn?hr(s.stateNode.nextSibling):null;return!0}function Ta(){Bt=zn=null,lt=!1}function Og(){var s=oo;return s!==null&&(Di===null?Di=s:Di.push.apply(Di,s),oo=null),s}function oc(s){oo===null?oo=[s]:oo.push(s)}var Ug=j(null),Ea=null,ys=null;function lo(s,a,u){pe(Ug,a._currentValue),a._currentValue=u}function vs(s){s._currentValue=Ug.current,ee(Ug)}function Fg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Bg(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var A=_.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=_;for(var G=0;G<a.length;G++)if(M.context===a[G]){E.lanes|=u,M=E.alternate,M!==null&&(M.lanes|=u),Fg(E.return,u,s),h||(A=null);break e}E=M.next}}else if(_.tag===18){if(A=_.return,A===null)throw Error(i(341));A.lanes|=u,E=A.alternate,E!==null&&(E.lanes|=u),Fg(A,u,s),A=null}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===s){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}}function bl(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var A=_.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=_.type;Hi(_.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(_===Ve.current){if(A=_.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Mc):s=[Mc])}_=_.return}s!==null&&Bg(a,s,u,h),a.flags|=262144}function zf(s){for(s=s.firstContext;s!==null;){if(!Hi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Sa(s){Ea=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qn(s){return eS(Ea,s)}function qf(s,a){return Ea===null&&Sa(s),eS(s,a)}function eS(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ys===null){if(s===null)throw Error(i(308));ys=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ys=ys.next=a;return u}var Vk=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Lk=t.unstable_scheduleCallback,Ok=t.unstable_NormalPriority,vn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zg(){return{controller:new Vk,data:new Map,refCount:0}}function ac(s){s.refCount--,s.refCount===0&&Lk(Ok,function(){s.controller.abort()})}var lc=null,qg=0,wl=0,Al=null;function Uk(s,a){if(lc===null){var u=lc=[];qg=0,wl=jy(),Al={status:"pending",value:void 0,then:function(h){u.push(h)}}}return qg++,a.then(tS,tS),a}function tS(){if(--qg===0&&lc!==null){Al!==null&&(Al.status="fulfilled");var s=lc;lc=null,wl=0,Al=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Fk(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var nS=Z.S;Z.S=function(s,a){Fb=Ie(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Uk(s,a),nS!==null&&nS(s,a)};var ba=j(null);function Hg(){var s=ba.current;return s!==null?s:Dt.pooledCache}function Hf(s,a){a===null?pe(ba,ba.current):pe(ba,a.pool)}function iS(){var s=Hg();return s===null?null:{parent:vn._currentValue,pool:s}}var xl=Error(i(460)),Gg=Error(i(474)),Gf=Error(i(542)),jf={then:function(){}};function rS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Dn,Dn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,aS(s),s;default:if(typeof a.status=="string")a.then(Dn,Dn);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,aS(s),s}throw Aa=a,xl}}function wa(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Aa=u,xl):u}}var Aa=null;function oS(){if(Aa===null)throw Error(i(459));var s=Aa;return Aa=null,s}function aS(s){if(s===xl||s===Gf)throw Error(i(483))}var Cl=null,uc=0;function $f(s){var a=uc;return uc+=1,Cl===null&&(Cl=[]),sS(Cl,s,a)}function cc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Kf(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function lS(s){function a(J,Y){if(s){var X=J.deletions;X===null?(J.deletions=[Y],J.flags|=16):X.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=ms(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,X){return J.index=X,s?(X=J.alternate,X!==null?(X=X.index,X<Y?(J.flags|=67108866,Y):X):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function A(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Y,X,le){return Y===null||Y.tag!==6?(Y=Dg(X,J.mode,le),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function G(J,Y,X,le){var Me=X.type;return Me===N?se(J,Y,X.props.children,le,X.key):Y!==null&&(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===R&&wa(Me)===Y.type)?(Y=_(Y,X.props),cc(Y,X),Y.return=J,Y):(Y=Ff(X.type,X.key,X.props,null,J.mode,le),cc(Y,X),Y.return=J,Y)}function Q(J,Y,X,le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==X.containerInfo||Y.stateNode.implementation!==X.implementation?(Y=Mg(X,J.mode,le),Y.return=J,Y):(Y=_(Y,X.children||[]),Y.return=J,Y)}function se(J,Y,X,le,Me){return Y===null||Y.tag!==7?(Y=_a(X,J.mode,le,Me),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function ue(J,Y,X){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Dg(""+Y,J.mode,X),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return X=Ff(Y.type,Y.key,Y.props,null,J.mode,X),cc(X,Y),X.return=J,X;case C:return Y=Mg(Y,J.mode,X),Y.return=J,Y;case R:return Y=wa(Y),ue(J,Y,X)}if(De(Y)||q(Y))return Y=_a(Y,J.mode,X,null),Y.return=J,Y;if(typeof Y.then=="function")return ue(J,$f(Y),X);if(Y.$$typeof===F)return ue(J,qf(J,Y),X);Kf(J,Y)}return null}function te(J,Y,X,le){var Me=Y!==null?Y.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Me!==null?null:M(J,Y,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===Me?G(J,Y,X,le):null;case C:return X.key===Me?Q(J,Y,X,le):null;case R:return X=wa(X),te(J,Y,X,le)}if(De(X)||q(X))return Me!==null?null:se(J,Y,X,le,null);if(typeof X.then=="function")return te(J,Y,$f(X),le);if(X.$$typeof===F)return te(J,Y,qf(J,X),le);Kf(J,X)}return null}function ie(J,Y,X,le,Me){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return J=J.get(X)||null,M(Y,J,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return J=J.get(le.key===null?X:le.key)||null,G(Y,J,le,Me);case C:return J=J.get(le.key===null?X:le.key)||null,Q(Y,J,le,Me);case R:return le=wa(le),ie(J,Y,X,le,Me)}if(De(le)||q(le))return J=J.get(X)||null,se(Y,J,le,Me,null);if(typeof le.then=="function")return ie(J,Y,X,$f(le),Me);if(le.$$typeof===F)return ie(J,Y,X,qf(Y,le),Me);Kf(Y,le)}return null}function Ae(J,Y,X,le){for(var Me=null,pt=null,Re=Y,Ye=Y=0,st=null;Re!==null&&Ye<X.length;Ye++){Re.index>Ye?(st=Re,Re=null):st=Re.sibling;var mt=te(J,Re,X[Ye],le);if(mt===null){Re===null&&(Re=st);break}s&&Re&&mt.alternate===null&&a(J,Re),Y=E(mt,Y,Ye),pt===null?Me=mt:pt.sibling=mt,pt=mt,Re=st}if(Ye===X.length)return u(J,Re),lt&&gs(J,Ye),Me;if(Re===null){for(;Ye<X.length;Ye++)Re=ue(J,X[Ye],le),Re!==null&&(Y=E(Re,Y,Ye),pt===null?Me=Re:pt.sibling=Re,pt=Re);return lt&&gs(J,Ye),Me}for(Re=h(Re);Ye<X.length;Ye++)st=ie(Re,J,Ye,X[Ye],le),st!==null&&(s&&st.alternate!==null&&Re.delete(st.key===null?Ye:st.key),Y=E(st,Y,Ye),pt===null?Me=st:pt.sibling=st,pt=st);return s&&Re.forEach(function(Co){return a(J,Co)}),lt&&gs(J,Ye),Me}function Le(J,Y,X,le){if(X==null)throw Error(i(151));for(var Me=null,pt=null,Re=Y,Ye=Y=0,st=null,mt=X.next();Re!==null&&!mt.done;Ye++,mt=X.next()){Re.index>Ye?(st=Re,Re=null):st=Re.sibling;var Co=te(J,Re,mt.value,le);if(Co===null){Re===null&&(Re=st);break}s&&Re&&Co.alternate===null&&a(J,Re),Y=E(Co,Y,Ye),pt===null?Me=Co:pt.sibling=Co,pt=Co,Re=st}if(mt.done)return u(J,Re),lt&&gs(J,Ye),Me;if(Re===null){for(;!mt.done;Ye++,mt=X.next())mt=ue(J,mt.value,le),mt!==null&&(Y=E(mt,Y,Ye),pt===null?Me=mt:pt.sibling=mt,pt=mt);return lt&&gs(J,Ye),Me}for(Re=h(Re);!mt.done;Ye++,mt=X.next())mt=ie(Re,J,Ye,mt.value,le),mt!==null&&(s&&mt.alternate!==null&&Re.delete(mt.key===null?Ye:mt.key),Y=E(mt,Y,Ye),pt===null?Me=mt:pt.sibling=mt,pt=mt);return s&&Re.forEach(function(WV){return a(J,WV)}),lt&&gs(J,Ye),Me}function Nt(J,Y,X,le){if(typeof X=="object"&&X!==null&&X.type===N&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:e:{for(var Me=X.key;Y!==null;){if(Y.key===Me){if(Me=X.type,Me===N){if(Y.tag===7){u(J,Y.sibling),le=_(Y,X.props.children),le.return=J,J=le;break e}}else if(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===R&&wa(Me)===Y.type){u(J,Y.sibling),le=_(Y,X.props),cc(le,X),le.return=J,J=le;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}X.type===N?(le=_a(X.props.children,J.mode,le,X.key),le.return=J,J=le):(le=Ff(X.type,X.key,X.props,null,J.mode,le),cc(le,X),le.return=J,J=le)}return A(J);case C:e:{for(Me=X.key;Y!==null;){if(Y.key===Me)if(Y.tag===4&&Y.stateNode.containerInfo===X.containerInfo&&Y.stateNode.implementation===X.implementation){u(J,Y.sibling),le=_(Y,X.children||[]),le.return=J,J=le;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}le=Mg(X,J.mode,le),le.return=J,J=le}return A(J);case R:return X=wa(X),Nt(J,Y,X,le)}if(De(X))return Ae(J,Y,X,le);if(q(X)){if(Me=q(X),typeof Me!="function")throw Error(i(150));return X=Me.call(X),Le(J,Y,X,le)}if(typeof X.then=="function")return Nt(J,Y,$f(X),le);if(X.$$typeof===F)return Nt(J,Y,qf(J,X),le);Kf(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,Y!==null&&Y.tag===6?(u(J,Y.sibling),le=_(Y,X),le.return=J,J=le):(u(J,Y),le=Dg(X,J.mode,le),le.return=J,J=le),A(J)):u(J,Y)}return function(J,Y,X,le){try{uc=0;var Me=Nt(J,Y,X,le);return Cl=null,Me}catch(Re){if(Re===xl||Re===Gf)throw Re;var pt=Gi(29,Re,null,J.mode);return pt.lanes=le,pt.return=J,pt}finally{}}}var xa=lS(!0),uS=lS(!1),uo=!1;function jg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $g(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function co(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function fo(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=Uf(s),$E(s,null,u),a}return Of(s,h,a,u),Uf(s)}function dc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Vt(s,u)}}function Kg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=A:E=E.next=A,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Yg=!1;function fc(){if(Yg){var s=Al;if(s!==null)throw s}}function hc(s,a,u,h){Yg=!1;var _=s.updateQueue;uo=!1;var E=_.firstBaseUpdate,A=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var G=M,Q=G.next;G.next=null,A===null?E=Q:A.next=Q,A=G;var se=s.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==A&&(M===null?se.firstBaseUpdate=Q:M.next=Q,se.lastBaseUpdate=G))}if(E!==null){var ue=_.baseState;A=0,se=Q=G=null,M=E;do{var te=M.lane&-536870913,ie=te!==M.lane;if(ie?(rt&te)===te:(h&te)===te){te!==0&&te===wl&&(Yg=!0),se!==null&&(se=se.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ae=s,Le=M;te=a;var Nt=u;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){ue=Ae.call(Nt,ue,te);break e}ue=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,te=typeof Ae=="function"?Ae.call(Nt,ue,te):Ae,te==null)break e;ue=v({},ue,te);break e;case 2:uo=!0}}te=M.callback,te!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=_.callbacks,ie===null?_.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Q=se=ie,G=ue):se=se.next=ie,A|=te;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,_.lastBaseUpdate=ie,_.shared.pending=null}}while(!0);se===null&&(G=ue),_.baseState=G,_.firstBaseUpdate=Q,_.lastBaseUpdate=se,E===null&&(_.shared.lanes=0),yo|=A,s.lanes=A,s.memoizedState=ue}}function cS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function dS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)cS(u[s],a)}var Il=j(null),Yf=j(0);function fS(s,a){s=Cs,pe(Yf,s),pe(Il,a),Cs=s|a.baseLanes}function Jg(){pe(Yf,Cs),pe(Il,Il.current)}function Wg(){Cs=Yf.current,ee(Il),ee(Yf)}var ji=j(null),fr=null;function ho(s){var a=s.alternate;pe(fn,fn.current&1),pe(ji,s),fr===null&&(a===null||Il.current!==null||a.memoizedState!==null)&&(fr=s)}function Xg(s){pe(fn,fn.current),pe(ji,s),fr===null&&(fr=s)}function hS(s){s.tag===22?(pe(fn,fn.current),pe(ji,s),fr===null&&(fr=s)):po()}function po(){pe(fn,fn.current),pe(ji,ji.current)}function $i(s){ee(ji),fr===s&&(fr=null),ee(fn)}var fn=j(0);function Jf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||iv(u)||rv(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _s=0,$e=null,It=null,_n=null,Wf=!1,Rl=!1,Ca=!1,Xf=0,pc=0,Nl=null,Bk=0;function rn(){throw Error(i(321))}function Qg(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Hi(s[u],a[u]))return!1;return!0}function Zg(s,a,u,h,_,E){return _s=E,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Z.H=s===null||s.memoizedState===null?WS:py,Ca=!1,E=u(h,_),Ca=!1,Rl&&(E=mS(a,u,h,_)),pS(s),E}function pS(s){Z.H=yc;var a=It!==null&&It.next!==null;if(_s=0,_n=It=$e=null,Wf=!1,pc=0,Nl=null,a)throw Error(i(300));s===null||Tn||(s=s.dependencies,s!==null&&zf(s)&&(Tn=!0))}function mS(s,a,u,h){$e=s;var _=0;do{if(Rl&&(Nl=null),pc=0,Rl=!1,25<=_)throw Error(i(301));if(_+=1,_n=It=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}Z.H=XS,E=a(u,h)}while(Rl);return E}function zk(){var s=Z.H,a=s.useState()[0];return a=typeof a.then=="function"?mc(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&($e.flags|=1024),a}function ey(){var s=Xf!==0;return Xf=0,s}function ty(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function ny(s){if(Wf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Wf=!1}_s=0,_n=It=$e=null,Rl=!1,pc=Xf=0,Nl=null}function Ti(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?$e.memoizedState=_n=s:_n=_n.next=s,_n}function hn(){if(It===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=_n===null?$e.memoizedState:_n.next;if(a!==null)_n=a,It=s;else{if(s===null)throw $e.alternate===null?Error(i(467)):Error(i(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},_n===null?$e.memoizedState=_n=s:_n=_n.next=s}return _n}function Qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(s){var a=pc;return pc+=1,Nl===null&&(Nl=[]),s=sS(Nl,s,a),a=$e,(_n===null?a.memoizedState:_n.next)===null&&(a=a.alternate,Z.H=a===null||a.memoizedState===null?WS:py),s}function Zf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return mc(s);if(s.$$typeof===F)return qn(s)}throw Error(i(438,String(s)))}function iy(s){var a=null,u=$e.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=$e.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Qf(),$e.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=V;return a.index++,u}function Ts(s,a){return typeof a=="function"?a(s):a}function eh(s){var a=hn();return ry(a,It,s)}function ry(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var A=_.next;_.next=E.next,E.next=A}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var M=A=null,G=null,Q=a,se=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(rt&ue)===ue:(_s&ue)===ue){var te=Q.revertLane;if(te===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===wl&&(se=!0);else if((_s&te)===te){Q=Q.next,te===wl&&(se=!0);continue}else ue={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},G===null?(M=G=ue,A=E):G=G.next=ue,$e.lanes|=te,yo|=te;ue=Q.action,Ca&&u(E,ue),E=Q.hasEagerState?Q.eagerState:u(E,ue)}else te={lane:ue,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},G===null?(M=G=te,A=E):G=G.next=te,$e.lanes|=ue,yo|=ue;Q=Q.next}while(Q!==null&&Q!==a);if(G===null?A=E:G.next=M,!Hi(E,s.memoizedState)&&(Tn=!0,se&&(u=Al,u!==null)))throw u;s.memoizedState=E,s.baseState=A,s.baseQueue=G,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function sy(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var A=_=_.next;do E=s(E,A.action),A=A.next;while(A!==_);Hi(E,a.memoizedState)||(Tn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function gS(s,a,u){var h=$e,_=hn(),E=lt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var A=!Hi((It||_).memoizedState,u);if(A&&(_.memoizedState=u,Tn=!0),_=_.queue,ly(_S.bind(null,h,_,s),[s]),_.getSnapshot!==a||A||_n!==null&&_n.memoizedState.tag&1){if(h.flags|=2048,Pl(9,{destroy:void 0},vS.bind(null,h,_,u,a),null),Dt===null)throw Error(i(349));E||(_s&127)!==0||yS(h,a,u)}return u}function yS(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=$e.updateQueue,a===null?(a=Qf(),$e.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function vS(s,a,u,h){a.value=u,a.getSnapshot=h,TS(a)&&ES(s)}function _S(s,a,u){return u(function(){TS(a)&&ES(s)})}function TS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Hi(s,u)}catch{return!0}}function ES(s){var a=va(s,2);a!==null&&Mi(a,s,2)}function oy(s){var a=Ti();if(typeof s=="function"){var u=s;if(s=u(),Ca){de(!0);try{u()}finally{de(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:s},a}function SS(s,a,u,h){return s.baseState=u,ry(s,It,typeof h=="function"?h:Ts)}function qk(s,a,u,h,_){if(ih(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};Z.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,bS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function bS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=Z.T,A={};Z.T=A;try{var M=u(_,h),G=Z.S;G!==null&&G(A,M),wS(s,a,M)}catch(Q){ay(s,a,Q)}finally{E!==null&&A.types!==null&&(E.types=A.types),Z.T=E}}else try{E=u(_,h),wS(s,a,E)}catch(Q){ay(s,a,Q)}}function wS(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){AS(s,a,h)},function(h){return ay(s,a,h)}):AS(s,a,u)}function AS(s,a,u){a.status="fulfilled",a.value=u,xS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,bS(s,u)))}function ay(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,xS(a),a=a.next;while(a!==h)}s.action=null}function xS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function CS(s,a){return a}function IS(s,a){if(lt){var u=Dt.formState;if(u!==null){e:{var h=$e;if(lt){if(Bt){t:{for(var _=Bt,E=dr;_.nodeType!==8;){if(!E){_=null;break t}if(_=hr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){Bt=hr(_.nextSibling),h=_.data==="F!";break e}}ao(h)}h=!1}h&&(a=u[0])}}return u=Ti(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CS,lastRenderedState:a},u.queue=h,u=KS.bind(null,$e,h),h.dispatch=u,h=oy(!1),E=hy.bind(null,$e,!1,h.queue),h=Ti(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=qk.bind(null,$e,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function RS(s){var a=hn();return NS(a,It,s)}function NS(s,a,u){if(a=ry(s,a,CS)[0],s=eh(Ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=mc(a)}catch(A){throw A===xl?Gf:A}else h=a;a=hn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&($e.flags|=2048,Pl(9,{destroy:void 0},Hk.bind(null,_,u),null)),[h,E,s]}function Hk(s,a){s.action=a}function PS(s){var a=hn(),u=It;if(u!==null)return NS(a,u,s);hn(),a=a.memoizedState,u=hn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Pl(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=$e.updateQueue,a===null&&(a=Qf(),$e.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function DS(){return hn().memoizedState}function th(s,a,u,h){var _=Ti();$e.flags|=s,_.memoizedState=Pl(1|a,{destroy:void 0},u,h===void 0?null:h)}function nh(s,a,u,h){var _=hn();h=h===void 0?null:h;var E=_.memoizedState.inst;It!==null&&h!==null&&Qg(h,It.memoizedState.deps)?_.memoizedState=Pl(a,E,u,h):($e.flags|=s,_.memoizedState=Pl(1|a,E,u,h))}function MS(s,a){th(8390656,8,s,a)}function ly(s,a){nh(2048,8,s,a)}function Gk(s){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=Qf(),$e.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function kS(s){var a=hn().memoizedState;return Gk({ref:a,nextImpl:s}),function(){if((vt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function VS(s,a){return nh(4,2,s,a)}function LS(s,a){return nh(4,4,s,a)}function OS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function US(s,a,u){u=u!=null?u.concat([s]):null,nh(4,4,OS.bind(null,a,s),u)}function uy(){}function FS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Qg(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function BS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Qg(a,h[1]))return h[0];if(h=s(),Ca){de(!0);try{s()}finally{de(!1)}}return u.memoizedState=[h,a],h}function cy(s,a,u){return u===void 0||(_s&1073741824)!==0&&(rt&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=zb(),$e.lanes|=s,yo|=s,u)}function zS(s,a,u,h){return Hi(u,a)?u:Il.current!==null?(s=cy(s,u,h),Hi(s,a)||(Tn=!0),s):(_s&42)===0||(_s&1073741824)!==0&&(rt&261930)===0?(Tn=!0,s.memoizedState=u):(s=zb(),$e.lanes|=s,yo|=s,a)}function qS(s,a,u,h,_){var E=ae.p;ae.p=E!==0&&8>E?E:8;var A=Z.T,M={};Z.T=M,hy(s,!1,a,u);try{var G=_(),Q=Z.S;if(Q!==null&&Q(M,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var se=Fk(G,h);gc(s,a,se,Ji(s))}else gc(s,a,h,Ji(s))}catch(ue){gc(s,a,{then:function(){},status:"rejected",reason:ue},Ji())}finally{ae.p=E,A!==null&&M.types!==null&&(A.types=M.types),Z.T=A}}function jk(){}function dy(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=HS(s).queue;qS(s,_,a,me,u===null?jk:function(){return GS(s),u(h)})}function HS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function GS(s){var a=HS(s);a.next===null&&(a=s.alternate.memoizedState),gc(s,a.next.queue,{},Ji())}function fy(){return qn(Mc)}function jS(){return hn().memoizedState}function $S(){return hn().memoizedState}function $k(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ji();s=co(u);var h=fo(a,s,u);h!==null&&(Mi(h,a,u),dc(h,a,u)),a={cache:zg()},s.payload=a;return}a=a.return}}function Kk(s,a,u){var h=Ji();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ih(s)?YS(a,u):(u=Ng(s,a,u,h),u!==null&&(Mi(u,s,h),JS(u,a,h)))}function KS(s,a,u){var h=Ji();gc(s,a,u,h)}function gc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ih(s))YS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var A=a.lastRenderedState,M=E(A,u);if(_.hasEagerState=!0,_.eagerState=M,Hi(M,A))return Of(s,a,_,0),Dt===null&&Lf(),!1}catch{}finally{}if(u=Ng(s,a,_,h),u!==null)return Mi(u,s,h),JS(u,a,h),!0}return!1}function hy(s,a,u,h){if(h={lane:2,revertLane:jy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ih(s)){if(a)throw Error(i(479))}else a=Ng(s,u,h,2),a!==null&&Mi(a,s,2)}function ih(s){var a=s.alternate;return s===$e||a!==null&&a===$e}function YS(s,a){Rl=Wf=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function JS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Vt(s,u)}}var yc={readContext:qn,use:Zf,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};yc.useEffectEvent=rn;var WS={readContext:qn,use:Zf,useCallback:function(s,a){return Ti().memoizedState=[s,a===void 0?null:a],s},useContext:qn,useEffect:MS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,th(4194308,4,OS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return th(4194308,4,s,a)},useInsertionEffect:function(s,a){th(4,2,s,a)},useMemo:function(s,a){var u=Ti();a=a===void 0?null:a;var h=s();if(Ca){de(!0);try{s()}finally{de(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Ti();if(u!==void 0){var _=u(a);if(Ca){de(!0);try{u(a)}finally{de(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=Kk.bind(null,$e,s),[h.memoizedState,s]},useRef:function(s){var a=Ti();return s={current:s},a.memoizedState=s},useState:function(s){s=oy(s);var a=s.queue,u=KS.bind(null,$e,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:uy,useDeferredValue:function(s,a){var u=Ti();return cy(u,s,a)},useTransition:function(){var s=oy(!1);return s=qS.bind(null,$e,s.queue,!0,!1),Ti().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=$e,_=Ti();if(lt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Dt===null)throw Error(i(349));(rt&127)!==0||yS(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,MS(_S.bind(null,h,E,s),[s]),h.flags|=2048,Pl(9,{destroy:void 0},vS.bind(null,h,E,u,a),null),u},useId:function(){var s=Ti(),a=Dt.identifierPrefix;if(lt){var u=Jr,h=Yr;u=(h&~(1<<32-be(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Xf++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Bk++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:fy,useFormState:IS,useActionState:IS,useOptimistic:function(s){var a=Ti();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=hy.bind(null,$e,!0,u),u.dispatch=a,[s,a]},useMemoCache:iy,useCacheRefresh:function(){return Ti().memoizedState=$k.bind(null,$e)},useEffectEvent:function(s){var a=Ti(),u={impl:s};return a.memoizedState=u,function(){if((vt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},py={readContext:qn,use:Zf,useCallback:FS,useContext:qn,useEffect:ly,useImperativeHandle:US,useInsertionEffect:VS,useLayoutEffect:LS,useMemo:BS,useReducer:eh,useRef:DS,useState:function(){return eh(Ts)},useDebugValue:uy,useDeferredValue:function(s,a){var u=hn();return zS(u,It.memoizedState,s,a)},useTransition:function(){var s=eh(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:mc(s),a]},useSyncExternalStore:gS,useId:jS,useHostTransitionStatus:fy,useFormState:RS,useActionState:RS,useOptimistic:function(s,a){var u=hn();return SS(u,It,s,a)},useMemoCache:iy,useCacheRefresh:$S};py.useEffectEvent=kS;var XS={readContext:qn,use:Zf,useCallback:FS,useContext:qn,useEffect:ly,useImperativeHandle:US,useInsertionEffect:VS,useLayoutEffect:LS,useMemo:BS,useReducer:sy,useRef:DS,useState:function(){return sy(Ts)},useDebugValue:uy,useDeferredValue:function(s,a){var u=hn();return It===null?cy(u,s,a):zS(u,It.memoizedState,s,a)},useTransition:function(){var s=sy(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:mc(s),a]},useSyncExternalStore:gS,useId:jS,useHostTransitionStatus:fy,useFormState:PS,useActionState:PS,useOptimistic:function(s,a){var u=hn();return It!==null?SS(u,It,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:iy,useCacheRefresh:$S};XS.useEffectEvent=kS;function my(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var gy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Ji(),_=co(h);_.payload=a,u!=null&&(_.callback=u),a=fo(s,_,h),a!==null&&(Mi(a,s,h),dc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Ji(),_=co(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=fo(s,_,h),a!==null&&(Mi(a,s,h),dc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Ji(),h=co(u);h.tag=2,a!=null&&(h.callback=a),a=fo(s,h,u),a!==null&&(Mi(a,s,u),dc(a,s,u))}};function QS(s,a,u,h,_,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,A):a.prototype&&a.prototype.isPureReactComponent?!ic(u,h)||!ic(_,E):!0}function ZS(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&gy.enqueueReplaceState(a,a.state,null)}function Ia(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function eb(s){Vf(s)}function tb(s){console.error(s)}function nb(s){Vf(s)}function rh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ib(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function yy(s,a,u){return u=co(u),u.tag=3,u.payload={element:null},u.callback=function(){rh(s,a)},u}function rb(s){return s=co(s),s.tag=3,s}function sb(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){ib(a,u,h)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){ib(a,u,h),typeof _!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function Yk(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&bl(a,u,_,!0),u=ji.current,u!==null){switch(u.tag){case 31:case 13:return fr===null?gh():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===jf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),qy(s,h,_)),!1;case 22:return u.flags|=65536,h===jf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),qy(s,h,_)),!1}throw Error(i(435,u.tag))}return qy(s,h,_),gh(),!1}if(lt)return a=ji.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==Lg&&(s=Error(i(422),{cause:h}),oc(lr(s,u)))):(h!==Lg&&(a=Error(i(423),{cause:h}),oc(lr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=lr(h,u),_=yy(s.stateNode,h,_),Kg(s,_),sn!==4&&(sn=2)),!1;var E=Error(i(520),{cause:h});if(E=lr(E,u),Ac===null?Ac=[E]:Ac.push(E),sn!==4&&(sn=2),a===null)return!0;h=lr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=yy(u.stateNode,h,s),Kg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(vo===null||!vo.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=rb(_),sb(_,s,u,h),Kg(u,_),!1}u=u.return}while(u!==null);return!1}var vy=Error(i(461)),Tn=!1;function Hn(s,a,u,h){a.child=s===null?uS(a,null,u,h):xa(a,s.child,u,h)}function ob(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var A={};for(var M in h)M!=="ref"&&(A[M]=h[M])}else A=h;return Sa(a),h=Zg(s,a,u,A,E,_),M=ey(),s!==null&&!Tn?(ty(s,a,_),Es(s,a,_)):(lt&&M&&kg(a),a.flags|=1,Hn(s,a,h,_),a.child)}function ab(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Pg(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,lb(s,a,E,h,_)):(s=Ff(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!xy(s,_)){var A=E.memoizedProps;if(u=u.compare,u=u!==null?u:ic,u(A,h)&&s.ref===a.ref)return Es(s,a,_)}return a.flags|=1,s=ms(E,h),s.ref=a.ref,s.return=a,a.child=s}function lb(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(ic(E,h)&&s.ref===a.ref)if(Tn=!1,a.pendingProps=h=E,xy(s,_))(s.flags&131072)!==0&&(Tn=!0);else return a.lanes=s.lanes,Es(s,a,_)}return _y(s,a,u,h,_)}function ub(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return cb(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Hf(a,E!==null?E.cachePool:null),E!==null?fS(a,E):Jg(),hS(a);else return h=a.lanes=536870912,cb(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(Hf(a,E.cachePool),fS(a,E),po(),a.memoizedState=null):(s!==null&&Hf(a,null),Jg(),po());return Hn(s,a,_,u),a.child}function vc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function cb(s,a,u,h,_){var E=Hg();return E=E===null?null:{parent:vn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&Hf(a,null),Jg(),hS(a),s!==null&&bl(s,a,h,!0),a.childLanes=_,null}function sh(s,a){return a=ah({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function db(s,a,u){return xa(a,s.child,null,u),s=sh(a,a.pendingProps),s.flags|=2,$i(a),a.memoizedState=null,s}function Jk(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(lt){if(h.mode==="hidden")return s=sh(a,h),a.lanes=536870912,vc(null,s);if(Xg(a),(s=Bt)?(s=bw(s,dr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:so!==null?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},u=YE(s),u.return=a,a.child=u,zn=a,Bt=null)):s=null,s===null)throw ao(a);return a.lanes=536870912,null}return sh(a,h)}var E=s.memoizedState;if(E!==null){var A=E.dehydrated;if(Xg(a),_)if(a.flags&256)a.flags&=-257,a=db(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Tn||bl(s,a,u,!1),_=(u&s.childLanes)!==0,Tn||_){if(h=Dt,h!==null&&(A=Zn(h,u),A!==0&&A!==E.retryLane))throw E.retryLane=A,va(s,A),Mi(h,s,A),vy;gh(),a=db(s,a,u)}else s=E.treeContext,Bt=hr(A.nextSibling),zn=a,lt=!0,oo=null,dr=!1,s!==null&&XE(a,s),a=sh(a,h),a.flags|=4096;return a}return s=ms(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function oh(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function _y(s,a,u,h,_){return Sa(a),u=Zg(s,a,u,h,void 0,_),h=ey(),s!==null&&!Tn?(ty(s,a,_),Es(s,a,_)):(lt&&h&&kg(a),a.flags|=1,Hn(s,a,u,_),a.child)}function fb(s,a,u,h,_,E){return Sa(a),a.updateQueue=null,u=mS(a,h,u,_),pS(s),h=ey(),s!==null&&!Tn?(ty(s,a,E),Es(s,a,E)):(lt&&h&&kg(a),a.flags|=1,Hn(s,a,u,E),a.child)}function hb(s,a,u,h,_){if(Sa(a),a.stateNode===null){var E=_l,A=u.contextType;typeof A=="object"&&A!==null&&(E=qn(A)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=gy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},jg(a),A=u.contextType,E.context=typeof A=="object"&&A!==null?qn(A):_l,E.state=a.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(my(a,u,A,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&gy.enqueueReplaceState(E,E.state,null),hc(a,h,E,_),fc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var M=a.memoizedProps,G=Ia(u,M);E.props=G;var Q=E.context,se=u.contextType;A=_l,typeof se=="object"&&se!==null&&(A=qn(se));var ue=u.getDerivedStateFromProps;se=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Q!==A)&&ZS(a,E,h,A),uo=!1;var te=a.memoizedState;E.state=te,hc(a,h,E,_),fc(),Q=a.memoizedState,M||te!==Q||uo?(typeof ue=="function"&&(my(a,u,ue,h),Q=a.memoizedState),(G=uo||QS(a,u,G,h,te,Q,A))?(se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Q),E.props=h,E.state=Q,E.context=A,h=G):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,$g(s,a),A=a.memoizedProps,se=Ia(u,A),E.props=se,ue=a.pendingProps,te=E.context,Q=u.contextType,G=_l,typeof Q=="object"&&Q!==null&&(G=qn(Q)),M=u.getDerivedStateFromProps,(Q=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ue||te!==G)&&ZS(a,E,h,G),uo=!1,te=a.memoizedState,E.state=te,hc(a,h,E,_),fc();var ie=a.memoizedState;A!==ue||te!==ie||uo||s!==null&&s.dependencies!==null&&zf(s.dependencies)?(typeof M=="function"&&(my(a,u,M,h),ie=a.memoizedState),(se=uo||QS(a,u,se,h,te,ie,G)||s!==null&&s.dependencies!==null&&zf(s.dependencies))?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ie,G),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ie,G)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),E.props=h,E.state=ie,E.context=G,h=se):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,oh(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=xa(a,s.child,null,_),a.child=xa(a,null,u,_)):Hn(s,a,u,_),a.memoizedState=E.state,s=a.child):s=Es(s,a,_),s}function pb(s,a,u,h){return Ta(),a.flags|=256,Hn(s,a,u,h),a.child}var Ty={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ey(s){return{baseLanes:s,cachePool:iS()}}function Sy(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Yi),s}function mb(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),A&&(_=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(lt){if(_?ho(a):po(),(s=Bt)?(s=bw(s,dr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:so!==null?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},u=YE(s),u.return=a,a.child=u,zn=a,Bt=null)):s=null,s===null)throw ao(a);return rv(s)?a.lanes=32:a.lanes=536870912,null}var M=h.children;return h=h.fallback,_?(po(),_=a.mode,M=ah({mode:"hidden",children:M},_),h=_a(h,_,u,null),M.return=a,h.return=a,M.sibling=h,a.child=M,h=a.child,h.memoizedState=Ey(u),h.childLanes=Sy(s,A,u),a.memoizedState=Ty,vc(null,h)):(ho(a),by(a,M))}var G=s.memoizedState;if(G!==null&&(M=G.dehydrated,M!==null)){if(E)a.flags&256?(ho(a),a.flags&=-257,a=wy(s,a,u)):a.memoizedState!==null?(po(),a.child=s.child,a.flags|=128,a=null):(po(),M=h.fallback,_=a.mode,h=ah({mode:"visible",children:h.children},_),M=_a(M,_,u,null),M.flags|=2,h.return=a,M.return=a,h.sibling=M,a.child=h,xa(a,s.child,null,u),h=a.child,h.memoizedState=Ey(u),h.childLanes=Sy(s,A,u),a.memoizedState=Ty,a=vc(null,h));else if(ho(a),rv(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Q=A.dgst;A=Q,h=Error(i(419)),h.stack="",h.digest=A,oc({value:h,source:null,stack:null}),a=wy(s,a,u)}else if(Tn||bl(s,a,u,!1),A=(u&s.childLanes)!==0,Tn||A){if(A=Dt,A!==null&&(h=Zn(A,u),h!==0&&h!==G.retryLane))throw G.retryLane=h,va(s,h),Mi(A,s,h),vy;iv(M)||gh(),a=wy(s,a,u)}else iv(M)?(a.flags|=192,a.child=s.child,a=null):(s=G.treeContext,Bt=hr(M.nextSibling),zn=a,lt=!0,oo=null,dr=!1,s!==null&&XE(a,s),a=by(a,h.children),a.flags|=4096);return a}return _?(po(),M=h.fallback,_=a.mode,G=s.child,Q=G.sibling,h=ms(G,{mode:"hidden",children:h.children}),h.subtreeFlags=G.subtreeFlags&65011712,Q!==null?M=ms(Q,M):(M=_a(M,_,u,null),M.flags|=2),M.return=a,h.return=a,h.sibling=M,a.child=h,vc(null,h),h=a.child,M=s.child.memoizedState,M===null?M=Ey(u):(_=M.cachePool,_!==null?(G=vn._currentValue,_=_.parent!==G?{parent:G,pool:G}:_):_=iS(),M={baseLanes:M.baseLanes|u,cachePool:_}),h.memoizedState=M,h.childLanes=Sy(s,A,u),a.memoizedState=Ty,vc(s.child,h)):(ho(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=u,a.memoizedState=null,u)}function by(s,a){return a=ah({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ah(s,a){return s=Gi(22,s,null,a),s.lanes=0,s}function wy(s,a,u){return xa(a,s.child,null,u),s=by(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function gb(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Fg(s.return,a,u)}function Ay(s,a,u,h,_,E){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=u,A.tailMode=_,A.treeForkCount=E)}function yb(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var A=fn.current,M=(A&2)!==0;if(M?(A=A&1|2,a.flags|=128):A&=1,pe(fn,A),Hn(s,a,h,u),h=lt?sc:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gb(s,u,a);else if(s.tag===19)gb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&Jf(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Ay(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&Jf(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Ay(a,!0,u,null,E,h);break;case"together":Ay(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Es(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),yo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(bl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function xy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&zf(s)))}function Wk(s,a,u){switch(a.tag){case 3:Be(a,a.stateNode.containerInfo),lo(a,vn,s.memoizedState.cache),Ta();break;case 27:case 5:Nn(a);break;case 4:Be(a,a.stateNode.containerInfo);break;case 10:lo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Xg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(ho(a),a.flags|=128,null):(u&a.child.childLanes)!==0?mb(s,a,u):(ho(a),s=Es(s,a,u),s!==null?s.sibling:null);ho(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(bl(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return yb(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),pe(fn,fn.current),h)break;return null;case 22:return a.lanes=0,ub(s,a,u,a.pendingProps);case 24:lo(a,vn,s.memoizedState.cache)}return Es(s,a,u)}function vb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Tn=!0;else{if(!xy(s,u)&&(a.flags&128)===0)return Tn=!1,Wk(s,a,u);Tn=(s.flags&131072)!==0}else Tn=!1,lt&&(a.flags&1048576)!==0&&WE(a,sc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=wa(a.elementType),a.type=s,typeof s=="function")Pg(s)?(h=Ia(s,h),a.tag=1,a=hb(null,a,s,h,u)):(a.tag=0,a=_y(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===$){a.tag=11,a=ob(null,a,s,h,u);break e}else if(_===I){a.tag=14,a=ab(null,a,s,h,u);break e}}throw a=Pe(s)||s,Error(i(306,a,""))}}return a;case 0:return _y(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=Ia(h,a.pendingProps),hb(s,a,h,_,u);case 3:e:{if(Be(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,$g(s,a),hc(a,h,null,u);var A=a.memoizedState;if(h=A.cache,lo(a,vn,h),h!==E.cache&&Bg(a,[vn],u,!0),fc(),h=A.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=pb(s,a,h,u);break e}else if(h!==_){_=lr(Error(i(424)),a),oc(_),a=pb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bt=hr(s.firstChild),zn=a,lt=!0,oo=null,dr=!0,u=uS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ta(),h===_){a=Es(s,a,u);break e}Hn(s,a,h,u)}a=a.child}return a;case 26:return oh(s,a),s===null?(u=Rw(a.type,null,a.pendingProps,null))?a.memoizedState=u:lt||(u=a.type,s=a.pendingProps,h=bh(Ee.current).createElement(u),h[Ut]=a,h[dn]=s,Gn(h,u,s),Kt(h),a.stateNode=h):a.memoizedState=Rw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Nn(a),s===null&&lt&&(h=a.stateNode=xw(a.type,a.pendingProps,Ee.current),zn=a,dr=!0,_=Bt,So(a.type)?(sv=_,Bt=hr(h.firstChild)):Bt=_),Hn(s,a,a.pendingProps.children,u),oh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&lt&&((_=h=Bt)&&(h=xV(h,a.type,a.pendingProps,dr),h!==null?(a.stateNode=h,zn=a,Bt=hr(h.firstChild),dr=!1,_=!0):_=!1),_||ao(a)),Nn(a),_=a.type,E=a.pendingProps,A=s!==null?s.memoizedProps:null,h=E.children,ev(_,E)?h=null:A!==null&&ev(_,A)&&(a.flags|=32),a.memoizedState!==null&&(_=Zg(s,a,zk,null,null,u),Mc._currentValue=_),oh(s,a),Hn(s,a,h,u),a.child;case 6:return s===null&&lt&&((s=u=Bt)&&(u=CV(u,a.pendingProps,dr),u!==null?(a.stateNode=u,zn=a,Bt=null,s=!0):s=!1),s||ao(a)),null;case 13:return mb(s,a,u);case 4:return Be(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=xa(a,null,h,u):Hn(s,a,h,u),a.child;case 11:return ob(s,a,a.type,a.pendingProps,u);case 7:return Hn(s,a,a.pendingProps,u),a.child;case 8:return Hn(s,a,a.pendingProps.children,u),a.child;case 12:return Hn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,lo(a,a.type,h.value),Hn(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,Sa(a),_=qn(_),h=h(_),a.flags|=1,Hn(s,a,h,u),a.child;case 14:return ab(s,a,a.type,a.pendingProps,u);case 15:return lb(s,a,a.type,a.pendingProps,u);case 19:return yb(s,a,u);case 31:return Jk(s,a,u);case 22:return ub(s,a,u,a.pendingProps);case 24:return Sa(a),h=qn(vn),s===null?(_=Hg(),_===null&&(_=Dt,E=zg(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},jg(a),lo(a,vn,_)):((s.lanes&u)!==0&&($g(s,a),hc(a,null,null,u),fc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),lo(a,vn,h)):(h=E.cache,lo(a,vn,h),h!==_.cache&&Bg(a,[vn],u,!0))),Hn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ss(s){s.flags|=4}function Cy(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(jb())s.flags|=8192;else throw Aa=jf,Gg}else s.flags&=-16777217}function _b(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kw(a))if(jb())s.flags|=8192;else throw Aa=jf,Gg}function lh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?wt():536870912,s.lanes|=a,Vl|=a)}function _c(s,a){if(!lt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function zt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function Xk(s,a,u){var h=a.pendingProps;switch(Vg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(a),null;case 1:return zt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),vs(vn),Tt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Sl(a)?Ss(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Og())),zt(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(Ss(a),E!==null?(zt(a),_b(a,E)):(zt(a),Cy(a,_,null,h,u))):E?E!==s.memoizedState?(Ss(a),zt(a),_b(a,E)):(zt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ss(a),zt(a),Cy(a,_,s,h,u)),null;case 27:if(di(a),u=Ee.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return zt(a),null}s=ne.current,Sl(a)?QE(a):(s=xw(_,h,u),a.stateNode=s,Ss(a))}return zt(a),null;case 5:if(di(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return zt(a),null}if(E=ne.current,Sl(a))QE(a);else{var A=bh(Ee.current);switch(E){case 1:E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=A.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?A.createElement(_,{is:h.is}):A.createElement(_)}}E[Ut]=a,E[dn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)E.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=E;e:switch(Gn(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ss(a)}}return zt(a),Cy(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Ee.current,Sl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=zn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[Ut]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||mw(s.nodeValue,u)),s||ao(a,!0)}else s=bh(s).createTextNode(h),s[Ut]=a,a.stateNode=s}return zt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Sl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ut]=a}else Ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;zt(a),s=!1}else u=Og(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?($i(a),a):($i(a),null);if((a.flags&128)!==0)throw Error(i(558))}return zt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Sl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Ut]=a}else Ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;zt(a),_=!1}else _=Og(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?($i(a),a):($i(a),null)}return $i(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),lh(a,a.updateQueue),zt(a),null);case 4:return Tt(),s===null&&Jy(a.stateNode.containerInfo),zt(a),null;case 10:return vs(a.type),zt(a),null;case 19:if(ee(fn),h=a.memoizedState,h===null)return zt(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)_c(h,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=Jf(s),E!==null){for(a.flags|=128,_c(h,!1),s=E.updateQueue,a.updateQueue=s,lh(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)KE(u,s),u=u.sibling;return pe(fn,fn.current&1|2),lt&&gs(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&Ie()>hh&&(a.flags|=128,_=!0,_c(h,!1),a.lanes=4194304)}else{if(!_)if(s=Jf(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,lh(a,s),_c(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!lt)return zt(a),null}else 2*Ie()-h.renderingStartTime>hh&&u!==536870912&&(a.flags|=128,_=!0,_c(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ie(),s.sibling=null,u=fn.current,pe(fn,_?u&1|2:u&1),lt&&gs(a,h.treeForkCount),s):(zt(a),null);case 22:case 23:return $i(a),Wg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(zt(a),a.subtreeFlags&6&&(a.flags|=8192)):zt(a),u=a.updateQueue,u!==null&&lh(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&ee(ba),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),vs(vn),zt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Qk(s,a){switch(Vg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return vs(vn),Tt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return di(a),null;case 31:if(a.memoizedState!==null){if($i(a),a.alternate===null)throw Error(i(340));Ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if($i(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ee(fn),null;case 4:return Tt(),null;case 10:return vs(a.type),null;case 22:case 23:return $i(a),Wg(),s!==null&&ee(ba),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return vs(vn),null;case 25:return null;default:return null}}function Tb(s,a){switch(Vg(a),a.tag){case 3:vs(vn),Tt();break;case 26:case 27:case 5:di(a);break;case 4:Tt();break;case 31:a.memoizedState!==null&&$i(a);break;case 13:$i(a);break;case 19:ee(fn);break;case 10:vs(a.type);break;case 22:case 23:$i(a),Wg(),s!==null&&ee(ba);break;case 24:vs(vn)}}function Tc(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,A=u.inst;h=E(),A.destroy=h}u=u.next}while(u!==_)}}catch(M){xt(a,a.return,M)}}function mo(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var A=h.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,_=a;var G=u,Q=M;try{Q()}catch(se){xt(_,G,se)}}}h=h.next}while(h!==E)}}catch(se){xt(a,a.return,se)}}function Eb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{dS(a,u)}catch(h){xt(s,s.return,h)}}}function Sb(s,a,u){u.props=Ia(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){xt(s,a,h)}}function Ec(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){xt(s,a,_)}}function Wr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){xt(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){xt(s,a,_)}else u.current=null}function bb(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){xt(s,s.return,_)}}function Iy(s,a,u){try{var h=s.stateNode;TV(h,s.type,u,a),h[dn]=a}catch(_){xt(s,s.return,_)}}function wb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&So(s.type)||s.tag===4}function Ry(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&So(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ny(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Dn));else if(h!==4&&(h===27&&So(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Ny(s,a,u),s=s.sibling;s!==null;)Ny(s,a,u),s=s.sibling}function uh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&So(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(uh(s,a,u),s=s.sibling;s!==null;)uh(s,a,u),s=s.sibling}function Ab(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Gn(a,h,u),a[Ut]=s,a[dn]=u}catch(E){xt(s,s.return,E)}}var bs=!1,En=!1,Py=!1,xb=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function Zk(s,a){if(s=s.containerInfo,Qy=Nh,s=UE(s),wg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var A=0,M=-1,G=-1,Q=0,se=0,ue=s,te=null;t:for(;;){for(var ie;ue!==u||_!==0&&ue.nodeType!==3||(M=A+_),ue!==E||h!==0&&ue.nodeType!==3||(G=A+h),ue.nodeType===3&&(A+=ue.nodeValue.length),(ie=ue.firstChild)!==null;)te=ue,ue=ie;for(;;){if(ue===s)break t;if(te===u&&++Q===_&&(M=A),te===E&&++se===h&&(G=A),(ie=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ie}u=M===-1||G===-1?null:{start:M,end:G}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zy={focusedElem:s,selectionRange:u},Nh=!1,Vn=a;Vn!==null;)if(a=Vn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Vn=s;else for(;Vn!==null;){switch(a=Vn,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ae=Ia(u.type,_);s=h.getSnapshotBeforeUpdate(Ae,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){xt(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)nv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":nv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Vn=s;break}Vn=a.return}}function Cb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:As(s,u),h&4&&Tc(5,u);break;case 1:if(As(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(A){xt(u,u.return,A)}else{var _=Ia(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(u,u.return,A)}}h&64&&Eb(u),h&512&&Ec(u,u.return);break;case 3:if(As(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{dS(s,a)}catch(A){xt(u,u.return,A)}}break;case 27:a===null&&h&4&&Ab(u);case 26:case 5:As(s,u),a===null&&h&4&&bb(u),h&512&&Ec(u,u.return);break;case 12:As(s,u);break;case 31:As(s,u),h&4&&Nb(s,u);break;case 13:As(s,u),h&4&&Pb(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=lV.bind(null,u),IV(s,u))));break;case 22:if(h=u.memoizedState!==null||bs,!h){a=a!==null&&a.memoizedState!==null||En,_=bs;var E=En;bs=h,(En=a)&&!E?xs(s,u,(u.subtreeFlags&8772)!==0):As(s,u),bs=_,En=E}break;case 30:break;default:As(s,u)}}function Ib(s){var a=s.alternate;a!==null&&(s.alternate=null,Ib(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ir(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Yt=null,Ri=!1;function ws(s,a,u){for(u=u.child;u!==null;)Rb(s,a,u),u=u.sibling}function Rb(s,a,u){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(hi,u)}catch{}switch(u.tag){case 26:En||Wr(u,a),ws(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:En||Wr(u,a);var h=Yt,_=Ri;So(u.type)&&(Yt=u.stateNode,Ri=!1),ws(s,a,u),Nc(u.stateNode),Yt=h,Ri=_;break;case 5:En||Wr(u,a);case 6:if(h=Yt,_=Ri,Yt=null,ws(s,a,u),Yt=h,Ri=_,Yt!==null)if(Ri)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(u.stateNode)}catch(E){xt(u,a,E)}else try{Yt.removeChild(u.stateNode)}catch(E){xt(u,a,E)}break;case 18:Yt!==null&&(Ri?(s=Yt,Ew(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Hl(s)):Ew(Yt,u.stateNode));break;case 4:h=Yt,_=Ri,Yt=u.stateNode.containerInfo,Ri=!0,ws(s,a,u),Yt=h,Ri=_;break;case 0:case 11:case 14:case 15:mo(2,u,a),En||mo(4,u,a),ws(s,a,u);break;case 1:En||(Wr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Sb(u,a,h)),ws(s,a,u);break;case 21:ws(s,a,u);break;case 22:En=(h=En)||u.memoizedState!==null,ws(s,a,u),En=h;break;default:ws(s,a,u)}}function Nb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hl(s)}catch(u){xt(a,a.return,u)}}}function Pb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hl(s)}catch(u){xt(a,a.return,u)}}function eV(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new xb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new xb),a;default:throw Error(i(435,s.tag))}}function ch(s,a){var u=eV(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=uV.bind(null,s,h);h.then(_,_)}})}function Ni(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,A=a,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(So(M.type)){Yt=M.stateNode,Ri=!1;break e}break;case 5:Yt=M.stateNode,Ri=!1;break e;case 3:case 4:Yt=M.stateNode.containerInfo,Ri=!0;break e}M=M.return}if(Yt===null)throw Error(i(160));Rb(E,A,_),Yt=null,Ri=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Db(a,s),a=a.sibling}var Ir=null;function Db(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ni(a,s),Pi(s),h&4&&(mo(3,s,s.return),Tc(3,s),mo(5,s,s.return));break;case 1:Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),h&64&&bs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Ir;if(Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[nr]||E[Ut]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),Gn(E,h,u),E[Ut]=s,Kt(E),h=E;break e;case"link":var A=Dw("link","href",_).get(h+(u.href||""));if(A){for(var M=0;M<A.length;M++)if(E=A[M],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(M,1);break t}}E=_.createElement(h),Gn(E,h,u),_.head.appendChild(E);break;case"meta":if(A=Dw("meta","content",_).get(h+(u.content||""))){for(M=0;M<A.length;M++)if(E=A[M],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(M,1);break t}}E=_.createElement(h),Gn(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[Ut]=s,Kt(E),h=E}s.stateNode=h}else Mw(_,s.type,s.stateNode);else s.stateNode=Pw(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Mw(_,s.type,s.stateNode):Pw(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Iy(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),u!==null&&h&4&&Iy(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),s.flags&32){_=s.stateNode;try{or(_,"")}catch(Ae){xt(s,s.return,Ae)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,Iy(s,_,u!==null?u.memoizedProps:_)),h&1024&&(Py=!0);break;case 6:if(Ni(a,s),Pi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ae){xt(s,s.return,Ae)}}break;case 3:if(xh=null,_=Ir,Ir=wh(a.containerInfo),Ni(a,s),Ir=_,Pi(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Hl(a.containerInfo)}catch(Ae){xt(s,s.return,Ae)}Py&&(Py=!1,Mb(s));break;case 4:h=Ir,Ir=wh(s.stateNode.containerInfo),Ni(a,s),Pi(s),Ir=h;break;case 12:Ni(a,s),Pi(s);break;case 31:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ch(s,h)));break;case 13:Ni(a,s),Pi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(fh=Ie()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ch(s,h)));break;case 22:_=s.memoizedState!==null;var G=u!==null&&u.memoizedState!==null,Q=bs,se=En;if(bs=Q||_,En=se||G,Ni(a,s),En=se,bs=Q,Pi(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||G||bs||En||Ra(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){G=u=a;try{if(E=G.stateNode,_)A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=G.stateNode;var ue=G.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ae){xt(G,G.return,Ae)}}}else if(a.tag===6){if(u===null){G=a;try{G.stateNode.nodeValue=_?"":G.memoizedProps}catch(Ae){xt(G,G.return,Ae)}}}else if(a.tag===18){if(u===null){G=a;try{var ie=G.stateNode;_?Sw(ie,!0):Sw(G.stateNode,!1)}catch(Ae){xt(G,G.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,ch(s,u))));break;case 19:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ch(s,h)));break;case 30:break;case 21:break;default:Ni(a,s),Pi(s)}}function Pi(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(wb(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Ry(s);uh(s,E,_);break;case 5:var A=u.stateNode;u.flags&32&&(or(A,""),u.flags&=-33);var M=Ry(s);uh(s,M,A);break;case 3:case 4:var G=u.stateNode.containerInfo,Q=Ry(s);Ny(s,Q,G);break;default:throw Error(i(161))}}catch(se){xt(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Mb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Mb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function As(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cb(s,a.alternate,a),a=a.sibling}function Ra(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:mo(4,a,a.return),Ra(a);break;case 1:Wr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Sb(a,a.return,u),Ra(a);break;case 27:Nc(a.stateNode);case 26:case 5:Wr(a,a.return),Ra(a);break;case 22:a.memoizedState===null&&Ra(a);break;case 30:Ra(a);break;default:Ra(a)}s=s.sibling}}function xs(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,A=E.flags;switch(E.tag){case 0:case 11:case 15:xs(_,E,u),Tc(4,E);break;case 1:if(xs(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Q){xt(h,h.return,Q)}if(h=E,_=h.updateQueue,_!==null){var M=h.stateNode;try{var G=_.shared.hiddenCallbacks;if(G!==null)for(_.shared.hiddenCallbacks=null,_=0;_<G.length;_++)cS(G[_],M)}catch(Q){xt(h,h.return,Q)}}u&&A&64&&Eb(E),Ec(E,E.return);break;case 27:Ab(E);case 26:case 5:xs(_,E,u),u&&h===null&&A&4&&bb(E),Ec(E,E.return);break;case 12:xs(_,E,u);break;case 31:xs(_,E,u),u&&A&4&&Nb(_,E);break;case 13:xs(_,E,u),u&&A&4&&Pb(_,E);break;case 22:E.memoizedState===null&&xs(_,E,u),Ec(E,E.return);break;case 30:break;default:xs(_,E,u)}a=a.sibling}}function Dy(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&ac(u))}function My(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ac(s))}function Rr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)kb(s,a,u,h),a=a.sibling}function kb(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(s,a,u,h),_&2048&&Tc(9,a);break;case 1:Rr(s,a,u,h);break;case 3:Rr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ac(s)));break;case 12:if(_&2048){Rr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,A=E.id,M=E.onPostCommit;typeof M=="function"&&M(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){xt(a,a.return,G)}}else Rr(s,a,u,h);break;case 31:Rr(s,a,u,h);break;case 13:Rr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,A=a.alternate,a.memoizedState!==null?E._visibility&2?Rr(s,a,u,h):Sc(s,a):E._visibility&2?Rr(s,a,u,h):(E._visibility|=2,Dl(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&Dy(A,a);break;case 24:Rr(s,a,u,h),_&2048&&My(a.alternate,a);break;default:Rr(s,a,u,h)}}function Dl(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,A=a,M=u,G=h,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Dl(E,A,M,G,_),Tc(8,A);break;case 23:break;case 22:var se=A.stateNode;A.memoizedState!==null?se._visibility&2?Dl(E,A,M,G,_):Sc(E,A):(se._visibility|=2,Dl(E,A,M,G,_)),_&&Q&2048&&Dy(A.alternate,A);break;case 24:Dl(E,A,M,G,_),_&&Q&2048&&My(A.alternate,A);break;default:Dl(E,A,M,G,_)}a=a.sibling}}function Sc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:Sc(u,h),_&2048&&Dy(h.alternate,h);break;case 24:Sc(u,h),_&2048&&My(h.alternate,h);break;default:Sc(u,h)}a=a.sibling}}var bc=8192;function Ml(s,a,u){if(s.subtreeFlags&bc)for(s=s.child;s!==null;)Vb(s,a,u),s=s.sibling}function Vb(s,a,u){switch(s.tag){case 26:Ml(s,a,u),s.flags&bc&&s.memoizedState!==null&&BV(u,Ir,s.memoizedState,s.memoizedProps);break;case 5:Ml(s,a,u);break;case 3:case 4:var h=Ir;Ir=wh(s.stateNode.containerInfo),Ml(s,a,u),Ir=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=bc,bc=16777216,Ml(s,a,u),bc=h):Ml(s,a,u));break;default:Ml(s,a,u)}}function Lb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function wc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Ub(h,s)}Lb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ob(s),s=s.sibling}function Ob(s){switch(s.tag){case 0:case 11:case 15:wc(s),s.flags&2048&&mo(9,s,s.return);break;case 3:wc(s);break;case 12:wc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,dh(s)):wc(s);break;default:wc(s)}}function dh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Ub(h,s)}Lb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:mo(8,a,a.return),dh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,dh(a));break;default:dh(a)}s=s.sibling}}function Ub(s,a){for(;Vn!==null;){var u=Vn;switch(u.tag){case 0:case 11:case 15:mo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ac(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Vn=h;else e:for(u=s;Vn!==null;){h=Vn;var _=h.sibling,E=h.return;if(Ib(h),h===u){Vn=null;break e}if(_!==null){_.return=E,Vn=_;break e}Vn=E}}}var tV={getCacheForType:function(s){var a=qn(vn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return qn(vn).controller.signal}},nV=typeof WeakMap=="function"?WeakMap:Map,vt=0,Dt=null,tt=null,rt=0,At=0,Ki=null,go=!1,kl=!1,ky=!1,Cs=0,sn=0,yo=0,Na=0,Vy=0,Yi=0,Vl=0,Ac=null,Di=null,Ly=!1,fh=0,Fb=0,hh=1/0,ph=null,vo=null,Cn=0,_o=null,Ll=null,Is=0,Oy=0,Uy=null,Bb=null,xc=0,Fy=null;function Ji(){return(vt&2)!==0&&rt!==0?rt&-rt:Z.T!==null?jy():pi()}function zb(){if(Yi===0)if((rt&536870912)===0||lt){var s=We;We<<=1,(We&3932160)===0&&(We=262144),Yi=s}else Yi=536870912;return s=ji.current,s!==null&&(s.flags|=32),Yi}function Mi(s,a,u){(s===Dt&&(At===2||At===9)||s.cancelPendingCommit!==null)&&(Ol(s,0),To(s,rt,Yi,!1)),Ct(s,u),((vt&2)===0||s!==Dt)&&(s===Dt&&((vt&2)===0&&(Na|=u),sn===4&&To(s,rt,Yi,!1)),Xr(s))}function qb(s,a,u){if((vt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||ve(s,a),_=h?sV(s,a):zy(s,a,!0),E=h;do{if(_===0){kl&&!h&&To(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!iV(u)){_=zy(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var M=s;_=Ac;var G=M.current.memoizedState.isDehydrated;if(G&&(Ol(M,A).flags|=256),A=zy(M,A,!1),A!==2){if(ky&&!G){M.errorRecoveryDisabledLanes|=E,Na|=E,_=4;break e}E=Di,Di=_,E!==null&&(Di===null?Di=E:Di.push.apply(Di,E))}_=A}if(E=!1,_!==2)continue}}if(_===1){Ol(s,0),To(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:To(h,a,Yi,!go);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=fh+300-Ie(),10<_)){if(To(h,a,Yi,!go),oe(h,0,!0)!==0)break e;Is=a,h.timeoutHandle=_w(Hb.bind(null,h,u,Di,ph,Ly,a,Yi,Na,Vl,go,E,"Throttled",-0,0),_);break e}Hb(h,u,Di,ph,Ly,a,Yi,Na,Vl,go,E,null,-0,0)}}break}while(!0);Xr(s)}function Hb(s,a,u,h,_,E,A,M,G,Q,se,ue,te,ie){if(s.timeoutHandle=-1,ue=a.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},Vb(a,E,ue);var Ae=(E&62914560)===E?fh-Ie():(E&4194048)===E?Fb-Ie():0;if(Ae=zV(ue,Ae),Ae!==null){Is=E,s.cancelPendingCommit=Ae(Xb.bind(null,s,a,E,u,h,_,A,M,G,se,ue,null,te,ie)),To(s,E,A,!Q);return}}Xb(s,a,E,u,h,_,A,M,G)}function iV(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!Hi(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function To(s,a,u,h){a&=~Vy,a&=~Na,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-be(_),A=1<<E;h[E]=-1,_&=~A}u!==0&&xn(s,u,a)}function mh(){return(vt&6)===0?(Cc(0),!1):!0}function By(){if(tt!==null){if(At===0)var s=tt.return;else s=tt,ys=Ea=null,ny(s),Cl=null,uc=0,s=tt;for(;s!==null;)Tb(s.alternate,s),s=s.return;tt=null}}function Ol(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,bV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Is=0,By(),Dt=s,tt=u=ms(s.current,null),rt=a,At=0,Ki=null,go=!1,kl=ve(s,a),ky=!1,Vl=Yi=Vy=Na=yo=sn=0,Di=Ac=null,Ly=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-be(h),E=1<<_;a|=s[_],h&=~E}return Cs=a,Lf(),u}function Gb(s,a){$e=null,Z.H=yc,a===xl||a===Gf?(a=oS(),At=3):a===Gg?(a=oS(),At=4):At=a===vy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ki=a,tt===null&&(sn=1,rh(s,lr(a,s.current)))}function jb(){var s=ji.current;return s===null?!0:(rt&4194048)===rt?fr===null:(rt&62914560)===rt||(rt&536870912)!==0?s===fr:!1}function $b(){var s=Z.H;return Z.H=yc,s===null?yc:s}function Kb(){var s=Z.A;return Z.A=tV,s}function gh(){sn=4,go||(rt&4194048)!==rt&&ji.current!==null||(kl=!0),(yo&134217727)===0&&(Na&134217727)===0||Dt===null||To(Dt,rt,Yi,!1)}function zy(s,a,u){var h=vt;vt|=2;var _=$b(),E=Kb();(Dt!==s||rt!==a)&&(ph=null,Ol(s,a)),a=!1;var A=sn;e:do try{if(At!==0&&tt!==null){var M=tt,G=Ki;switch(At){case 8:By(),A=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(a=!0);var Q=At;if(At=0,Ki=null,Ul(s,M,G,Q),u&&kl){A=0;break e}break;default:Q=At,At=0,Ki=null,Ul(s,M,G,Q)}}rV(),A=sn;break}catch(se){Gb(s,se)}while(!0);return a&&s.shellSuspendCounter++,ys=Ea=null,vt=h,Z.H=_,Z.A=E,tt===null&&(Dt=null,rt=0,Lf()),A}function rV(){for(;tt!==null;)Yb(tt)}function sV(s,a){var u=vt;vt|=2;var h=$b(),_=Kb();Dt!==s||rt!==a?(ph=null,hh=Ie()+500,Ol(s,a)):kl=ve(s,a);e:do try{if(At!==0&&tt!==null){a=tt;var E=Ki;t:switch(At){case 1:At=0,Ki=null,Ul(s,a,E,1);break;case 2:case 9:if(rS(E)){At=0,Ki=null,Jb(a);break}a=function(){At!==2&&At!==9||Dt!==s||(At=7),Xr(s)},E.then(a,a);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:rS(E)?(At=0,Ki=null,Jb(a)):(At=0,Ki=null,Ul(s,a,E,7));break;case 5:var A=null;switch(tt.tag){case 26:A=tt.memoizedState;case 5:case 27:var M=tt;if(A?kw(A):M.stateNode.complete){At=0,Ki=null;var G=M.sibling;if(G!==null)tt=G;else{var Q=M.return;Q!==null?(tt=Q,yh(Q)):tt=null}break t}}At=0,Ki=null,Ul(s,a,E,5);break;case 6:At=0,Ki=null,Ul(s,a,E,6);break;case 8:By(),sn=6;break e;default:throw Error(i(462))}}oV();break}catch(se){Gb(s,se)}while(!0);return ys=Ea=null,Z.H=h,Z.A=_,vt=u,tt!==null?0:(Dt=null,rt=0,Lf(),sn)}function oV(){for(;tt!==null&&!Qn();)Yb(tt)}function Yb(s){var a=vb(s.alternate,s,Cs);s.memoizedProps=s.pendingProps,a===null?yh(s):tt=a}function Jb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=fb(u,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=fb(u,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:ny(a);default:Tb(u,a),a=tt=KE(a,Cs),a=vb(u,a,Cs)}s.memoizedProps=s.pendingProps,a===null?yh(s):tt=a}function Ul(s,a,u,h){ys=Ea=null,ny(a),Cl=null,uc=0;var _=a.return;try{if(Yk(s,_,a,u,rt)){sn=1,rh(s,lr(u,s.current)),tt=null;return}}catch(E){if(_!==null)throw tt=_,E;sn=1,rh(s,lr(u,s.current)),tt=null;return}a.flags&32768?(lt||h===1?s=!0:kl||(rt&536870912)!==0?s=!1:(go=s=!0,(h===2||h===9||h===3||h===6)&&(h=ji.current,h!==null&&h.tag===13&&(h.flags|=16384))),Wb(a,s)):yh(a)}function yh(s){var a=s;do{if((a.flags&32768)!==0){Wb(a,go);return}s=a.return;var u=Xk(a.alternate,a,Cs);if(u!==null){tt=u;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=s}while(a!==null);sn===0&&(sn=5)}function Wb(s,a){do{var u=Qk(s.alternate,s);if(u!==null){u.flags&=32767,tt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){tt=s;return}tt=s=u}while(s!==null);sn=6,tt=null}function Xb(s,a,u,h,_,E,A,M,G){s.cancelPendingCommit=null;do vh();while(Cn!==0);if((vt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Rg,ft(s,u,E,A,M,G),s===Dt&&(tt=Dt=null,rt=0),Ll=a,_o=s,Is=u,Oy=E,Uy=_,Bb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cV($t,function(){return nw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=Z.T,Z.T=null,_=ae.p,ae.p=2,A=vt,vt|=4;try{Zk(s,a,u)}finally{vt=A,ae.p=_,Z.T=h}}Cn=1,Qb(),Zb(),ew()}}function Qb(){if(Cn===1){Cn=0;var s=_o,a=Ll,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null;var h=ae.p;ae.p=2;var _=vt;vt|=4;try{Db(a,s);var E=Zy,A=UE(s.containerInfo),M=E.focusedElem,G=E.selectionRange;if(A!==M&&M&&M.ownerDocument&&OE(M.ownerDocument.documentElement,M)){if(G!==null&&wg(M)){var Q=G.start,se=G.end;if(se===void 0&&(se=Q),"selectionStart"in M)M.selectionStart=Q,M.selectionEnd=Math.min(se,M.value.length);else{var ue=M.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ae=M.textContent.length,Le=Math.min(G.start,Ae),Nt=G.end===void 0?Le:Math.min(G.end,Ae);!ie.extend&&Le>Nt&&(A=Nt,Nt=Le,Le=A);var J=LE(M,Le),Y=LE(M,Nt);if(J&&Y&&(ie.rangeCount!==1||ie.anchorNode!==J.node||ie.anchorOffset!==J.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var X=ue.createRange();X.setStart(J.node,J.offset),ie.removeAllRanges(),Le>Nt?(ie.addRange(X),ie.extend(Y.node,Y.offset)):(X.setEnd(Y.node,Y.offset),ie.addRange(X))}}}}for(ue=[],ie=M;ie=ie.parentNode;)ie.nodeType===1&&ue.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ue.length;M++){var le=ue[M];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Nh=!!Qy,Zy=Qy=null}finally{vt=_,ae.p=h,Z.T=u}}s.current=a,Cn=2}}function Zb(){if(Cn===2){Cn=0;var s=_o,a=Ll,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=Z.T,Z.T=null;var h=ae.p;ae.p=2;var _=vt;vt|=4;try{Cb(s,a.alternate,a)}finally{vt=_,ae.p=h,Z.T=u}}Cn=3}}function ew(){if(Cn===4||Cn===3){Cn=0,Fn();var s=_o,a=Ll,u=Is,h=Bb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Cn=5:(Cn=0,Ll=_o=null,tw(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(vo=null),Bn(u),a=a.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(hi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=Z.T,_=ae.p,ae.p=2,Z.T=null;try{for(var E=s.onRecoverableError,A=0;A<h.length;A++){var M=h[A];E(M.value,{componentStack:M.stack})}}finally{Z.T=a,ae.p=_}}(Is&3)!==0&&vh(),Xr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===Fy?xc++:(xc=0,Fy=s):xc=0,Cc(0)}}function tw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ac(a)))}function vh(){return Qb(),Zb(),ew(),nw()}function nw(){if(Cn!==5)return!1;var s=_o,a=Oy;Oy=0;var u=Bn(Is),h=Z.T,_=ae.p;try{ae.p=32>u?32:u,Z.T=null,u=Uy,Uy=null;var E=_o,A=Is;if(Cn=0,Ll=_o=null,Is=0,(vt&6)!==0)throw Error(i(331));var M=vt;if(vt|=4,Ob(E.current),kb(E,E.current,A,u),vt=M,Cc(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(hi,E)}catch{}return!0}finally{ae.p=_,Z.T=h,tw(s,a)}}function iw(s,a,u){a=lr(u,a),a=yy(s.stateNode,a,2),s=fo(s,a,2),s!==null&&(Ct(s,2),Xr(s))}function xt(s,a,u){if(s.tag===3)iw(s,s,u);else for(;a!==null;){if(a.tag===3){iw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vo===null||!vo.has(h))){s=lr(u,s),u=rb(2),h=fo(a,u,2),h!==null&&(sb(u,h,a,s),Ct(h,2),Xr(h));break}}a=a.return}}function qy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new nV;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(ky=!0,_.add(u),s=aV.bind(null,s,a,u),a.then(s,s))}function aV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Dt===s&&(rt&u)===u&&(sn===4||sn===3&&(rt&62914560)===rt&&300>Ie()-fh?(vt&2)===0&&Ol(s,0):Vy|=u,Vl===rt&&(Vl=0)),Xr(s)}function rw(s,a){a===0&&(a=wt()),s=va(s,a),s!==null&&(Ct(s,a),Xr(s))}function lV(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),rw(s,u)}function uV(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),rw(s,u)}function cV(s,a){return Xn(s,a)}var _h=null,Fl=null,Hy=!1,Th=!1,Gy=!1,Eo=0;function Xr(s){s!==Fl&&s.next===null&&(Fl===null?_h=Fl=s:Fl=Fl.next=s),Th=!0,Hy||(Hy=!0,fV())}function Cc(s,a){if(!Gy&&Th){Gy=!0;do for(var u=!1,h=_h;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var A=h.suspendedLanes,M=h.pingedLanes;E=(1<<31-be(42|s)+1)-1,E&=_&~(A&~M),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,lw(h,E))}else E=rt,E=oe(h,h===Dt?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||ve(h,E)||(u=!0,lw(h,E));h=h.next}while(u);Gy=!1}}function dV(){sw()}function sw(){Th=Hy=!1;var s=0;Eo!==0&&SV()&&(s=Eo);for(var a=Ie(),u=null,h=_h;h!==null;){var _=h.next,E=ow(h,a);E===0?(h.next=null,u===null?_h=_:u.next=_,_===null&&(Fl=u)):(u=h,(s!==0||(E&3)!==0)&&(Th=!0)),h=_}Cn!==0&&Cn!==5||Cc(s),Eo!==0&&(Eo=0)}function ow(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-be(E),M=1<<A,G=_[A];G===-1?((M&u)===0||(M&h)!==0)&&(_[A]=Ke(M,a)):G<=a&&(s.expiredLanes|=M),E&=~M}if(a=Dt,u=rt,u=oe(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(At===2||At===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ai(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ve(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&Ai(h),Bn(u)){case 2:case 8:u=Ot;break;case 32:u=$t;break;case 268435456:u=Sr;break;default:u=$t}return h=aw.bind(null,s),u=Xn(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&Ai(h),s.callbackPriority=2,s.callbackNode=null,2}function aw(s,a){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(vh()&&s.callbackNode!==u)return null;var h=rt;return h=oe(s,s===Dt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(qb(s,h,a),ow(s,Ie()),s.callbackNode!=null&&s.callbackNode===u?aw.bind(null,s):null)}function lw(s,a){if(vh())return null;qb(s,a,!0)}function fV(){wV(function(){(vt&6)!==0?Xn(Ne,dV):sw()})}function jy(){if(Eo===0){var s=wl;s===0&&(s=Je,Je<<=1,(Je&261888)===0&&(Je=256)),Eo=s}return Eo}function uw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:jr(""+s)}function cw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function hV(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=uw((_[dn]||null).action),A=h.submitter;A&&(a=(a=A[dn]||null)?uw(a.formAction):A.getAttribute("formAction"),a!==null&&(E=a,A=null));var M=new da("action","action",null,h,_);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Eo!==0){var G=A?cw(_,A):new FormData(_);dy(u,{pending:!0,data:G,method:_.method,action:E},null,G)}}else typeof E=="function"&&(M.preventDefault(),G=A?cw(_,A):new FormData(_),dy(u,{pending:!0,data:G,method:_.method,action:E},E,G))},currentTarget:_}]})}}for(var $y=0;$y<Ig.length;$y++){var Ky=Ig[$y],pV=Ky.toLowerCase(),mV=Ky[0].toUpperCase()+Ky.slice(1);Cr(pV,"on"+mV)}Cr(zE,"onAnimationEnd"),Cr(qE,"onAnimationIteration"),Cr(HE,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Pk,"onTransitionRun"),Cr(Dk,"onTransitionStart"),Cr(Mk,"onTransitionCancel"),Cr(GE,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function dw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var A=h.length-1;0<=A;A--){var M=h[A],G=M.instance,Q=M.currentTarget;if(M=M.listener,G!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(se){Vf(se)}_.currentTarget=null,E=G}else for(A=0;A<h.length;A++){if(M=h[A],G=M.instance,Q=M.currentTarget,M=M.listener,G!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(se){Vf(se)}_.currentTarget=null,E=G}}}}function nt(s,a){var u=a[tr];u===void 0&&(u=a[tr]=new Set);var h=s+"__bubble";u.has(h)||(fw(a,s,2,!1),u.add(h))}function Yy(s,a,u){var h=0;a&&(h|=4),fw(u,s,h,a)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Jy(s){if(!s[Eh]){s[Eh]=!0,wr.forEach(function(u){u!=="selectionchange"&&(gV.has(u)||Yy(u,!1,s),Yy(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Eh]||(a[Eh]=!0,Yy("selectionchange",!1,a))}}function fw(s,a,u,h){switch(zw(a)){case 2:var _=GV;break;case 8:_=jV;break;default:_=cv}u=_.bind(null,a,u,s),_=void 0,!Wu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function Wy(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var M=h.stateNode.containerInfo;if(M===_)break;if(A===4)for(A=h.return;A!==null;){var G=A.tag;if((G===3||G===4)&&A.stateNode.containerInfo===_)return;A=A.return}for(;M!==null;){if(A=xi(M),A===null)return;if(G=A.tag,G===5||G===6||G===26||G===27){h=E=A;continue e}M=M.parentNode}}h=h.return}_f(function(){var Q=E,se=dl(u),ue=[];e:{var te=jE.get(s);if(te!==void 0){var ie=da,Ae=s;switch(s){case"keypress":if(ca(u)===0)break e;case"keydown":case"keyup":ie=If;break;case"focusin":Ae="focus",ie=to;break;case"focusout":Ae="blur",ie=to;break;case"beforeblur":case"afterblur":ie=to;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Nf;break;case zE:case qE:case HE:ie=pl;break;case GE:ie=ml;break;case"scroll":case"scrollend":ie=Tf;break;case"wheel":ie=Df;break;case"copy":case"cut":case"paste":ie=wf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=tc;break;case"toggle":case"beforetoggle":ie=io}var Le=(a&4)!==0,Nt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Q,X;Y!==null;){var le=Y;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||J===null||(le=Ci(Y,J),le!=null&&Le.push(Rc(Y,le,X))),Nt)break;Y=Y.return}0<Le.length&&(te=new ie(te,Ae,null,u,se),ue.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",te&&u!==cl&&(Ae=u.relatedTarget||u.fromElement)&&(xi(Ae)||Ae[Fi]))break e;if((ie||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ae=u.relatedTarget||u.toElement,ie=Q,Ae=Ae?xi(Ae):null,Ae!==null&&(Nt=o(Ae),Le=Ae.tag,Ae!==Nt||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(ie=null,Ae=Q),ie!==Ae)){if(Le=Ef,le="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=tc,le="onPointerLeave",J="onPointerEnter",Y="pointer"),Nt=ie==null?te:Hr(ie),X=Ae==null?te:Hr(Ae),te=new Le(le,Y+"leave",ie,u,se),te.target=Nt,te.relatedTarget=X,le=null,xi(se)===Q&&(Le=new Le(J,Y+"enter",Ae,u,se),Le.target=X,Le.relatedTarget=Nt,le=Le),Nt=le,ie&&Ae)t:{for(Le=yV,J=ie,Y=Ae,X=0,le=J;le;le=Le(le))X++;le=0;for(var Me=Y;Me;Me=Le(Me))le++;for(;0<X-le;)J=Le(J),X--;for(;0<le-X;)Y=Le(Y),le--;for(;X--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ie!==null&&hw(ue,te,ie,Le,!1),Ae!==null&&Nt!==null&&hw(ue,Nt,Ae,Le,!0)}}e:{if(te=Q?Hr(Q):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var pt=NE;else if(Ii(te))if(PE)pt=Ik;else{pt=xk;var Re=Ak}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Q&&Yu(Q.elementType)&&(pt=NE):pt=Ck;if(pt&&(pt=pt(s,Q))){ma(ue,pt,u,se);break e}Re&&Re(s,te,Q),s==="focusout"&&Q&&te.type==="number"&&Q.memoizedProps.value!=null&&ul(te,"number",te.value)}switch(Re=Q?Hr(Q):window,s){case"focusin":(Ii(Re)||Re.contentEditable==="true")&&(gl=Re,Ag=Q,rc=null);break;case"focusout":rc=Ag=gl=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,FE(ue,u,se);break;case"selectionchange":if(Nk)break;case"keydown":case"keyup":FE(ue,u,se)}var Ye;if(w)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Ze?Et(s,u)&&(st="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(st="onCompositionStart");st&&(W&&u.locale!=="ko"&&(Ze||st!=="onCompositionStart"?st==="onCompositionEnd"&&Ze&&(Ye=Xs()):(qi=se,fl="value"in qi?qi.value:qi.textContent,Ze=!0)),Re=Sh(Q,st),0<Re.length&&(st=new Qu(st,s,null,u,se),ue.push({event:st,listeners:Re}),Ye?st.data=Ye:(Ye=yn(u),Ye!==null&&(st.data=Ye)))),(Ye=L?Mn(s,u):kn(s,u))&&(st=Sh(Q,"onBeforeInput"),0<st.length&&(Re=new Qu("onBeforeInput","beforeinput",null,u,se),ue.push({event:Re,listeners:st}),Re.data=Ye)),hV(ue,s,Q,u,se)}dw(ue,a)})}function Rc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Sh(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Ci(s,u),_!=null&&h.unshift(Rc(s,_,E)),_=Ci(s,a),_!=null&&h.push(Rc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function yV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function hw(s,a,u,h,_){for(var E=a._reactName,A=[];u!==null&&u!==h;){var M=u,G=M.alternate,Q=M.stateNode;if(M=M.tag,G!==null&&G===h)break;M!==5&&M!==26&&M!==27||Q===null||(G=Q,_?(Q=Ci(u,E),Q!=null&&A.unshift(Rc(u,Q,G))):_||(Q=Ci(u,E),Q!=null&&A.push(Rc(u,Q,G)))),u=u.return}A.length!==0&&s.push({event:a,listeners:A})}var vV=/\r\n?/g,_V=/\u0000|\uFFFD/g;function pw(s){return(typeof s=="string"?s:""+s).replace(vV,`
`).replace(_V,"")}function mw(s,a){return a=pw(a),pw(s)===a}function Rt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||or(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&or(s,""+h);break;case"className":Ys(s,"class",h);break;case"tabIndex":Ys(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(s,u,h);break;case"style":yf(s,h,E);break;case"data":if(a!=="object"){Ys(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=jr(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&Rt(s,a,"name",_.name,_,null),Rt(s,a,"formEncType",_.formEncType,_,null),Rt(s,a,"formMethod",_.formMethod,_,null),Rt(s,a,"formTarget",_.formTarget,_,null)):(Rt(s,a,"encType",_.encType,_,null),Rt(s,a,"method",_.method,_,null),Rt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=jr(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=jr(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":nt("beforetoggle",s),nt("toggle",s),Ks(s,"popover",h);break;case"xlinkActuate":sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":sr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":sr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":sr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":sr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ks(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=_g.get(u)||u,Ks(s,u,h))}}function Xy(s,a,u,h,_,E){switch(u){case"style":yf(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?or(s,h):(typeof h=="number"||typeof h=="bigint")&&or(s,""+h);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[dn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ks(s,u,h)}}}function Gn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var A=u[E];if(A!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,E,A,u,null)}}_&&Rt(s,a,"srcSet",u.srcSet,u,null),h&&Rt(s,a,"src",u.src,u,null);return;case"input":nt("invalid",s);var M=E=A=_=null,G=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var se=u[h];if(se!=null)switch(h){case"name":_=se;break;case"type":A=se;break;case"checked":G=se;break;case"defaultChecked":Q=se;break;case"value":E=se;break;case"defaultValue":M=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:Rt(s,a,h,se,u,null)}}la(s,E,M,G,Q,A,_,!1);return;case"select":nt("invalid",s),h=A=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":E=M;break;case"defaultValue":A=M;break;case"multiple":h=M;default:Rt(s,a,_,M,u,null)}a=E,u=A,s.multiple=!!h,a!=null?ht(s,!!h,a,!1):u!=null&&ht(s,!!h,u,!0);return;case"textarea":nt("invalid",s),E=_=h=null;for(A in u)if(u.hasOwnProperty(A)&&(M=u[A],M!=null))switch(A){case"value":h=M;break;case"defaultValue":_=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Rt(s,a,A,M,u,null)}Ws(s,h,_,E);return;case"option":for(G in u)if(u.hasOwnProperty(G)&&(h=u[G],h!=null))switch(G){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rt(s,a,G,h,u,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(h=0;h<Ic.length;h++)nt(Ic[h],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,Q,h,u,null)}return;default:if(Yu(a)){for(se in u)u.hasOwnProperty(se)&&(h=u[se],h!==void 0&&Xy(s,a,se,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&Rt(s,a,M,h,u,null))}function TV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,A=null,M=null,G=null,Q=null,se=null;for(ie in u){var ue=u[ie];if(u.hasOwnProperty(ie)&&ue!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":G=ue;default:h.hasOwnProperty(ie)||Rt(s,a,ie,null,h,ue)}}for(var te in h){var ie=h[te];if(ue=u[te],h.hasOwnProperty(te)&&(ie!=null||ue!=null))switch(te){case"type":E=ie;break;case"name":_=ie;break;case"checked":Q=ie;break;case"defaultChecked":se=ie;break;case"value":A=ie;break;case"defaultValue":M=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==ue&&Rt(s,a,te,ie,h,ue)}}Js(s,A,M,G,Q,se,E,_);return;case"select":ie=A=M=te=null;for(E in u)if(G=u[E],u.hasOwnProperty(E)&&G!=null)switch(E){case"value":break;case"multiple":ie=G;default:h.hasOwnProperty(E)||Rt(s,a,E,null,h,G)}for(_ in h)if(E=h[_],G=u[_],h.hasOwnProperty(_)&&(E!=null||G!=null))switch(_){case"value":te=E;break;case"defaultValue":M=E;break;case"multiple":A=E;default:E!==G&&Rt(s,a,_,E,h,G)}a=M,u=A,h=ie,te!=null?ht(s,!!u,te,!1):!!h!=!!u&&(a!=null?ht(s,!!u,a,!0):ht(s,!!u,u?[]:"",!1));return;case"textarea":ie=te=null;for(M in u)if(_=u[M],u.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Rt(s,a,M,null,h,_)}for(A in h)if(_=h[A],E=u[A],h.hasOwnProperty(A)&&(_!=null||E!=null))switch(A){case"value":te=_;break;case"defaultValue":ie=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&Rt(s,a,A,_,h,E)}ua(s,te,ie);return;case"option":for(var Ae in u)if(te=u[Ae],u.hasOwnProperty(Ae)&&te!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:Rt(s,a,Ae,null,h,te)}for(G in h)if(te=h[G],ie=u[G],h.hasOwnProperty(G)&&te!==ie&&(te!=null||ie!=null))switch(G){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Rt(s,a,G,te,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&Rt(s,a,Le,null,h,te);for(Q in h)if(te=h[Q],ie=u[Q],h.hasOwnProperty(Q)&&te!==ie&&(te!=null||ie!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Rt(s,a,Q,te,h,ie)}return;default:if(Yu(a)){for(var Nt in u)te=u[Nt],u.hasOwnProperty(Nt)&&te!==void 0&&!h.hasOwnProperty(Nt)&&Xy(s,a,Nt,void 0,h,te);for(se in h)te=h[se],ie=u[se],!h.hasOwnProperty(se)||te===ie||te===void 0&&ie===void 0||Xy(s,a,se,te,h,ie);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&Rt(s,a,J,null,h,te);for(ue in h)te=h[ue],ie=u[ue],!h.hasOwnProperty(ue)||te===ie||te==null&&ie==null||Rt(s,a,ue,te,h,ie)}function gw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,A=_.initiatorType,M=_.duration;if(E&&M&&gw(A)){for(A=0,M=_.responseEnd,h+=1;h<u.length;h++){var G=u[h],Q=G.startTime;if(Q>M)break;var se=G.transferSize,ue=G.initiatorType;se&&gw(ue)&&(G=G.responseEnd,A+=se*(G<M?1:(M-Q)/(G-Q)))}if(--h,a+=8*(E+A)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Qy=null,Zy=null;function bh(s){return s.nodeType===9?s:s.ownerDocument}function yw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function ev(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var tv=null;function SV(){var s=window.event;return s&&s.type==="popstate"?s===tv?!1:(tv=s,!0):(tv=null,!1)}var _w=typeof setTimeout=="function"?setTimeout:void 0,bV=typeof clearTimeout=="function"?clearTimeout:void 0,Tw=typeof Promise=="function"?Promise:void 0,wV=typeof queueMicrotask=="function"?queueMicrotask:typeof Tw<"u"?function(s){return Tw.resolve(null).then(s).catch(AV)}:_w;function AV(s){setTimeout(function(){throw s})}function So(s){return s==="head"}function Ew(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),Hl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Nc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Nc(u);for(var E=u.firstChild;E;){var A=E.nextSibling,M=E.nodeName;E[nr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=A}}else u==="body"&&Nc(s.ownerDocument.body);u=_}while(u);Hl(a)}function Sw(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function nv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":nv(u),ir(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function xV(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[nr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=hr(s.nextSibling),s===null)break}return null}function CV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=hr(s.nextSibling),s===null))return null;return s}function bw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=hr(s.nextSibling),s===null))return null;return s}function iv(s){return s.data==="$?"||s.data==="$~"}function rv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function IV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var sv=null;function ww(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return hr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Aw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function xw(s,a,u){switch(a=bh(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Nc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ir(s)}var pr=new Map,Cw=new Set;function wh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=ae.d;ae.d={f:RV,r:NV,D:PV,C:DV,L:MV,m:kV,X:LV,S:VV,M:OV};function RV(){var s=Rs.f(),a=mh();return s||a}function NV(s){var a=rr(s);a!==null&&a.tag===5&&a.type==="form"?GS(a):Rs.r(s)}var Bl=typeof document>"u"?null:document;function Iw(s,a,u){var h=Bl;if(h&&typeof a=="string"&&a){var _=nn(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),Cw.has(_)||(Cw.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),Gn(a,"link",s),Kt(a),h.head.appendChild(a)))}}function PV(s){Rs.D(s),Iw("dns-prefetch",s,null)}function DV(s,a){Rs.C(s,a),Iw("preconnect",s,a)}function MV(s,a,u){Rs.L(s,a,u);var h=Bl;if(h&&s&&a){var _='link[rel="preload"][as="'+nn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+nn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+nn(u.imageSizes)+'"]')):_+='[href="'+nn(s)+'"]';var E=_;switch(a){case"style":E=zl(s);break;case"script":E=ql(s)}pr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),pr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(Pc(E))||a==="script"&&h.querySelector(Dc(E))||(a=h.createElement("link"),Gn(a,"link",s),Kt(a),h.head.appendChild(a)))}}function kV(s,a){Rs.m(s,a);var u=Bl;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+nn(h)+'"][href="'+nn(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=ql(s)}if(!pr.has(E)&&(s=v({rel:"modulepreload",href:s},a),pr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Dc(E)))return}h=u.createElement("link"),Gn(h,"link",s),Kt(h),u.head.appendChild(h)}}}function VV(s,a,u){Rs.S(s,a,u);var h=Bl;if(h&&s){var _=mi(h).hoistableStyles,E=zl(s);a=a||"default";var A=_.get(E);if(!A){var M={loading:0,preload:null};if(A=h.querySelector(Pc(E)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=pr.get(E))&&ov(s,u);var G=A=h.createElement("link");Kt(G),Gn(G,"link",s),G._p=new Promise(function(Q,se){G.onload=Q,G.onerror=se}),G.addEventListener("load",function(){M.loading|=1}),G.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ah(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:M},_.set(E,A)}}}function LV(s,a){Rs.X(s,a);var u=Bl;if(u&&s){var h=mi(u).hoistableScripts,_=ql(s),E=h.get(_);E||(E=u.querySelector(Dc(_)),E||(s=v({src:s,async:!0},a),(a=pr.get(_))&&av(s,a),E=u.createElement("script"),Kt(E),Gn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function OV(s,a){Rs.M(s,a);var u=Bl;if(u&&s){var h=mi(u).hoistableScripts,_=ql(s),E=h.get(_);E||(E=u.querySelector(Dc(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=pr.get(_))&&av(s,a),E=u.createElement("script"),Kt(E),Gn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function Rw(s,a,u,h){var _=(_=Ee.current)?wh(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=zl(u.href),u=mi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=zl(u.href);var E=mi(_).hoistableStyles,A=E.get(s);if(A||(_=_.ownerDocument||_,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=_.querySelector(Pc(s)))&&!E._p&&(A.instance=E,A.state.loading=5),pr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(s,u),E||UV(_,s,u,A.state))),a&&h===null)throw Error(i(528,""));return A}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ql(u),u=mi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function zl(s){return'href="'+nn(s)+'"'}function Pc(s){return'link[rel="stylesheet"]['+s+"]"}function Nw(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function UV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Gn(a,"link",u),Kt(a),s.head.appendChild(a))}function ql(s){return'[src="'+nn(s)+'"]'}function Dc(s){return"script[async]"+s}function Pw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+nn(u.href)+'"]');if(h)return a.instance=h,Kt(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Kt(h),Gn(h,"style",_),Ah(h,u.precedence,s),a.instance=h;case"stylesheet":_=zl(u.href);var E=s.querySelector(Pc(_));if(E)return a.state.loading|=4,a.instance=E,Kt(E),E;h=Nw(u),(_=pr.get(_))&&ov(h,_),E=(s.ownerDocument||s).createElement("link"),Kt(E);var A=E;return A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),Gn(E,"link",h),a.state.loading|=4,Ah(E,u.precedence,s),a.instance=E;case"script":return E=ql(u.src),(_=s.querySelector(Dc(E)))?(a.instance=_,Kt(_),_):(h=u,(_=pr.get(E))&&(h=v({},u),av(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),Kt(_),Gn(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Ah(h,u.precedence,s));return a.instance}function Ah(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,A=0;A<h.length;A++){var M=h[A];if(M.dataset.precedence===a)E=M;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function ov(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function av(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var xh=null;function Dw(s,a,u){if(xh===null){var h=new Map,_=xh=new Map;_.set(u,h)}else _=xh,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[nr]||E[Ut]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(a)||"";A=s+A;var M=h.get(A);M?M.push(E):h.set(A,[E])}}return h}function Mw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function FV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function kw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function BV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=zl(h.href),E=a.querySelector(Pc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Ch.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Kt(E);return}E=a.ownerDocument||a,h=Nw(h),(_=pr.get(_))&&ov(h,_),E=E.createElement("link"),Kt(E);var A=E;A._p=new Promise(function(M,G){A.onload=M,A.onerror=G}),Gn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Ch.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var lv=0;function zV(s,a){return s.stylesheets&&s.count===0&&Rh(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Rh(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&lv===0&&(lv=62500*EV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Rh(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>lv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function Ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ih=null;function Rh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ih=new Map,a.forEach(qV,s),Ih=null,Ch.call(s))}function qV(s,a){if(!(a.state.loading&4)){var u=Ih.get(s);if(u)var h=u.get(null);else{u=new Map,Ih.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var A=_[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),h=A)}h&&u.set(null,h)}_=a.instance,A=_.getAttribute("data-precedence"),E=u.get(A)||h,E===h&&u.set(null,_),u.set(A,_),this.count++,h=Ch.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var Mc={$$typeof:F,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function HV(s,a,u,h,_,E,A,M,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function Vw(s,a,u,h,_,E,A,M,G,Q,se,ue){return s=new HV(s,a,u,A,G,Q,se,ue,M),a=1,E===!0&&(a|=24),E=Gi(3,null,null,a),s.current=E,E.stateNode=s,a=zg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},jg(E),s}function Lw(s){return s?(s=_l,s):_l}function Ow(s,a,u,h,_,E){_=Lw(_),h.context===null?h.context=_:h.pendingContext=_,h=co(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=fo(s,h,a),u!==null&&(Mi(u,s,a),dc(u,s,a))}function Uw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function uv(s,a){Uw(s,a),(s=s.alternate)&&Uw(s,a)}function Fw(s){if(s.tag===13||s.tag===31){var a=va(s,67108864);a!==null&&Mi(a,s,67108864),uv(s,67108864)}}function Bw(s){if(s.tag===13||s.tag===31){var a=Ji();a=er(a);var u=va(s,a);u!==null&&Mi(u,s,a),uv(s,a)}}var Nh=!0;function GV(s,a,u,h){var _=Z.T;Z.T=null;var E=ae.p;try{ae.p=2,cv(s,a,u,h)}finally{ae.p=E,Z.T=_}}function jV(s,a,u,h){var _=Z.T;Z.T=null;var E=ae.p;try{ae.p=8,cv(s,a,u,h)}finally{ae.p=E,Z.T=_}}function cv(s,a,u,h){if(Nh){var _=dv(h);if(_===null)Wy(s,a,h,Ph,u),qw(s,h);else if(KV(_,s,a,u,h))h.stopPropagation();else if(qw(s,h),a&4&&-1<$V.indexOf(s)){for(;_!==null;){var E=rr(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=Qe(E.pendingLanes);if(A!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var G=1<<31-be(A);M.entanglements[1]|=G,A&=~G}Xr(E),(vt&6)===0&&(hh=Ie()+500,Cc(0))}}break;case 31:case 13:M=va(E,2),M!==null&&Mi(M,E,2),mh(),uv(E,2)}if(E=dv(h),E===null&&Wy(s,a,h,Ph,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else Wy(s,a,h,null,u)}}function dv(s){return s=dl(s),fv(s)}var Ph=null;function fv(s){if(Ph=null,s=xi(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Ph=s,null}function zw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case Ne:return 2;case Ot:return 8;case $t:case Jt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var hv=!1,bo=null,wo=null,Ao=null,kc=new Map,Vc=new Map,xo=[],$V="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qw(s,a){switch(s){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":kc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(a.pointerId)}}function Lc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=rr(a),a!==null&&Fw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function KV(s,a,u,h,_){switch(a){case"focusin":return bo=Lc(bo,s,a,u,h,_),!0;case"dragenter":return wo=Lc(wo,s,a,u,h,_),!0;case"mouseover":return Ao=Lc(Ao,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return kc.set(E,Lc(kc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Vc.set(E,Lc(Vc.get(E)||null,s,a,u,h,_)),!0}return!1}function Hw(s){var a=xi(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,us(s.priority,function(){Bw(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,us(s.priority,function(){Bw(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Dh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=dv(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);cl=h,u.target.dispatchEvent(h),cl=null}else return a=rr(u),a!==null&&Fw(a),s.blockedOn=u,!1;a.shift()}return!0}function Gw(s,a,u){Dh(s)&&u.delete(a)}function YV(){hv=!1,bo!==null&&Dh(bo)&&(bo=null),wo!==null&&Dh(wo)&&(wo=null),Ao!==null&&Dh(Ao)&&(Ao=null),kc.forEach(Gw),Vc.forEach(Gw)}function Mh(s,a){s.blockedOn===a&&(s.blockedOn=null,hv||(hv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YV)))}var kh=null;function jw(s){kh!==s&&(kh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kh===s&&(kh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(fv(h||u)===null)continue;break}var E=rr(u);E!==null&&(s.splice(a,3),a-=3,dy(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function Hl(s){function a(G){return Mh(G,s)}bo!==null&&Mh(bo,s),wo!==null&&Mh(wo,s),Ao!==null&&Mh(Ao,s),kc.forEach(a),Vc.forEach(a);for(var u=0;u<xo.length;u++){var h=xo[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<xo.length&&(u=xo[0],u.blockedOn===null);)Hw(u),u.blockedOn===null&&xo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],A=_[dn]||null;if(typeof E=="function")A||jw(u);else if(A){var M=null;if(E&&E.hasAttribute("formAction")){if(_=E,A=E[dn]||null)M=A.formAction;else if(fv(_)!==null)continue}else M=A.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),jw(u)}}}function $w(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(A){return _=A})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function pv(s){this._internalRoot=s}Vh.prototype.render=pv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Ji();Ow(u,h,s,a,null,null)},Vh.prototype.unmount=pv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ow(s.current,2,null,s,null,null),mh(),a[Fi]=null}};function Vh(s){this._internalRoot=s}Vh.prototype.unstable_scheduleHydration=function(s){if(s){var a=pi();s={blockedOn:null,target:s,priority:a};for(var u=0;u<xo.length&&a!==0&&a<xo[u].priority;u++);xo.splice(u,0,s),u===0&&Hw(s)}};var Kw=e.version;if(Kw!=="19.2.0")throw Error(i(527,Kw,"19.2.0"));ae.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var JV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{hi=Lh.inject(JV),cn=Lh}catch{}}return Uc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=eb,E=tb,A=nb;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Vw(s,1,!1,null,null,u,h,null,_,E,A,$w),s[Fi]=a.current,Jy(s),new pv(a)},Uc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=eb,A=tb,M=nb,G=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(G=u.formState)),a=Vw(s,1,!0,a,u??null,h,_,G,E,A,M,$w),a.context=Lw(null),u=a.current,h=Ji(),h=er(h),_=co(h),_.callback=null,fo(u,_,h),u=h,a.current.lanes=u,Ct(a,u),Xr(a),s[Fi]=a.current,Jy(s),new Vh(a)},Uc.version="19.2.0",Uc}var iA;function rL(){if(iA)return yv.exports;iA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yv.exports=iL(),yv.exports}var sL=rL();const oL=_1(sL),Fc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],aL=({onComplete:t})=>{const[e,n]=B.useState(0),i=()=>{e<Fc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Fc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Fc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Fc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Fc.length-1?"Suivant":"Commencer"})]})]})]})})},lL=()=>{};var rA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},uL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},S1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(T=64)),i.push(n[p],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(E1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new cL;const T=o<<2|c>>4;if(i.push(T),f!==64){const b=c<<4&240|f>>2;if(i.push(b),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dL=function(t){const e=E1(t);return S1.encodeByteArray(e,!0)},kp=function(t){return dL(t).replace(/\./g,"")},b1=function(t){try{return S1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=()=>fL().__FIREBASE_DEFAULTS__,pL=()=>{if(typeof process>"u"||typeof rA>"u")return;const t=rA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b1(t[1]);return e&&JSON.parse(e)},Cm=()=>{try{return lL()||hL()||pL()||mL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w1=t=>{var e,n;return(n=(e=Cm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},w_=t=>{const e=w1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},A1=()=>{var t;return(t=Cm())===null||t===void 0?void 0:t.config},x1=t=>{var e;return(e=Cm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Im(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kp(JSON.stringify(n)),kp(JSON.stringify(l)),""].join(".")}const ad={};function yL(){const t={prod:[],emulator:[]};for(const e of Object.keys(ad))ad[e]?t.emulator.push(e):t.prod.push(e);return t}function vL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sA=!1;function Rm(t,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||ad[t]===e||ad[t]||sA)return;ad[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=yL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{sA=!0,l()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=vL(i),b=n("text"),C=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),k=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;c(F),p(D,N);const $=f();d(k,O),F.append(k,C,D,$),document.body.appendChild(F)}o?(C.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function TL(){var t;const e=(t=Cm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wL(){const t=ci();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AL(){return!TL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="FirebaseError";class Fr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=IL,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yd.prototype.create)}}class Yd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?RL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Fr(r,c,i)}}function RL(t,e){return t.replace(NL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const NL=/\{\$([^}]+)}/g;function PL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ya(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(oA(o)&&oA(l)){if(!Ya(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function oA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DL(t,e){const n=new ML(t,e);return n.subscribe.bind(n)}class ML{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");kL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ev),r.error===void 0&&(r.error=Ev),r.complete===void 0&&(r.complete=Ev);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ev(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Os{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OL(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LL(t){return t===Ma?void 0:t}function OL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const FL={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},BL=ot.INFO,zL={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},qL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=zL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class A_{constructor(e){this.name=e,this._logLevel=BL,this._logHandler=qL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const HL=(t,e)=>e.some(n=>t instanceof n);let aA,lA;function GL(){return aA||(aA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jL(){return lA||(lA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I1=new WeakMap,r0=new WeakMap,R1=new WeakMap,Sv=new WeakMap,x_=new WeakMap;function $L(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Fo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&I1.set(n,t)}).catch(()=>{}),x_.set(e,t),e}function KL(t){if(r0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});r0.set(t,e)}let s0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YL(t){s0=t(s0)}function JL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bv(this),e,...n);return R1.set(i,e.sort?e.sort():[e]),Fo(i)}:jL().includes(t)?function(...e){return t.apply(bv(this),e),Fo(I1.get(this))}:function(...e){return Fo(t.apply(bv(this),e))}}function WL(t){return typeof t=="function"?JL(t):(t instanceof IDBTransaction&&KL(t),HL(t,GL())?new Proxy(t,s0):t)}function Fo(t){if(t instanceof IDBRequest)return $L(t);if(Sv.has(t))return Sv.get(t);const e=WL(t);return e!==t&&(Sv.set(t,e),x_.set(e,t)),e}const bv=t=>x_.get(t);function XL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Fo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Fo(l.result),d.oldVersion,d.newVersion,Fo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const QL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],wv=new Map;function uA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wv.get(e))return wv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ZL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||QL.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&d.done]))[0]};return wv.set(e,o),o}YL(t=>({...t,get:(e,n,i)=>uA(e,n)||t.get(e,n,i),has:(e,n)=>!!uA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function tO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const o0="@firebase/app",cA="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new A_("@firebase/app"),nO="@firebase/app-compat",iO="@firebase/analytics-compat",rO="@firebase/analytics",sO="@firebase/app-check-compat",oO="@firebase/app-check",aO="@firebase/auth",lO="@firebase/auth-compat",uO="@firebase/database",cO="@firebase/data-connect",dO="@firebase/database-compat",fO="@firebase/functions",hO="@firebase/functions-compat",pO="@firebase/installations",mO="@firebase/installations-compat",gO="@firebase/messaging",yO="@firebase/messaging-compat",vO="@firebase/performance",_O="@firebase/performance-compat",TO="@firebase/remote-config",EO="@firebase/remote-config-compat",SO="@firebase/storage",bO="@firebase/storage-compat",wO="@firebase/firestore",AO="@firebase/ai",xO="@firebase/firestore-compat",CO="firebase",IO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="[DEFAULT]",RO={[o0]:"fire-core",[nO]:"fire-core-compat",[rO]:"fire-analytics",[iO]:"fire-analytics-compat",[oO]:"fire-app-check",[sO]:"fire-app-check-compat",[aO]:"fire-auth",[lO]:"fire-auth-compat",[uO]:"fire-rtdb",[cO]:"fire-data-connect",[dO]:"fire-rtdb-compat",[fO]:"fire-fn",[hO]:"fire-fn-compat",[pO]:"fire-iid",[mO]:"fire-iid-compat",[gO]:"fire-fcm",[yO]:"fire-fcm-compat",[vO]:"fire-perf",[_O]:"fire-perf-compat",[TO]:"fire-rc",[EO]:"fire-rc-compat",[SO]:"fire-gcs",[bO]:"fire-gcs-compat",[wO]:"fire-fst",[xO]:"fire-fst-compat",[AO]:"fire-vertex","fire-js":"fire-js",[CO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=new Map,NO=new Map,l0=new Map;function dA(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(l0.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;l0.set(e,t);for(const n of Vp.values())dA(n,t);for(const n of NO.values())dA(n,t);return!0}function Wd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new Yd("app","Firebase",PO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=IO;function N1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:a0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Bo.create("bad-app-name",{appName:String(r)});if(n||(n=A1()),!n)throw Bo.create("no-options");const o=Vp.get(r);if(o){if(Ya(n,o.options)&&Ya(i,o.config))return o;throw Bo.create("duplicate-app",{appName:r})}const l=new UL(r);for(const d of l0.values())l.addComponent(d);const c=new DO(n,i,l);return Vp.set(r,c),c}function Nm(t=a0){const e=Vp.get(t);if(!e&&t===a0&&A1())return N1();if(!e)throw Bo.create("no-app",{appName:t});return e}function _r(t,e,n){var i;let r=(i=RO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(c.join(" "));return}Go(new Os(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="firebase-heartbeat-database",kO=1,Rd="firebase-heartbeat-store";let Av=null;function P1(){return Av||(Av=XL(MO,kO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bo.create("idb-open",{originalErrorMessage:t.message})})),Av}async function VO(t){try{const n=(await P1()).transaction(Rd),i=await n.objectStore(Rd).get(D1(t));return await n.done,i}catch(e){if(e instanceof Fr)Us.warn(e.message);else{const n=Bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function fA(t,e){try{const i=(await P1()).transaction(Rd,"readwrite");await i.objectStore(Rd).put(e,D1(t)),await i.done}catch(n){if(n instanceof Fr)Us.warn(n.message);else{const i=Bo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(i.message)}}}function D1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1024,OO=30;class UO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=hA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>OO){const l=zO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Us.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hA(),{heartbeatsToSend:i,unsentEntries:r}=FO(this._heartbeatsCache.heartbeats),o=kp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Us.warn(n),""}}}function hA(){return new Date().toISOString().substring(0,10)}function FO(t,e=LO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),pA(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pA(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class BO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pA(t){return kp(JSON.stringify({version:2,heartbeats:t})).length}function zO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){Go(new Os("platform-logger",e=>new eO(e),"PRIVATE")),Go(new Os("heartbeat",e=>new UO(e),"PRIVATE")),_r(o0,cA,t),_r(o0,cA,"esm2017"),_r("fire-js","")}qO("");function C_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function M1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HO=M1,k1=new Yd("auth","Firebase",M1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new A_("@firebase/auth");function GO(t,...e){Lp.logLevel<=ot.WARN&&Lp.warn(`Auth (${nl}): ${t}`,...e)}function fp(t,...e){Lp.logLevel<=ot.ERROR&&Lp.error(`Auth (${nl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw R_(t,...e)}function Lr(t,...e){return R_(t,...e)}function I_(t,e,n){const i=Object.assign(Object.assign({},HO()),{[e]:n});return new Yd("auth","Firebase",i).create(e,{appName:t.name})}function ks(t){return I_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Er(t,"argument-error"),I_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function R_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return k1.create(t,...e)}function Ue(t,e,...n){if(!t)throw R_(e,...n)}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fp(e),new Error(e)}function Fs(t,e){t||Ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $O(){return mA()==="http:"||mA()==="https:"}function mA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($O()||SL()||"connection"in navigator)?navigator.onLine:!0}function YO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fs(n>e,"Short delay should be less than long delay!"),this.isMobile=_L()||bL()}get(){return KO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e){Fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XO=new Xd(3e4,6e4);function ea(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ta(t,e,n,i,r={}){return L1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Jd(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return EL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(f.credentials="include"),V1.fetch()(await O1(t,t.config.apiHost,n,c),f)})}async function L1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},JO),e);try{const r=new ZO(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Oh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Oh(t,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw I_(t,p,f);Er(t,p)}}catch(r){if(r instanceof Fr)throw r;Er(t,"network-request-failed",{message:String(r)})}}async function Qd(t,e,n,i,r={}){const o=await ta(t,e,n,i,r);return"mfaPendingCredential"in o&&Er(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function O1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?N_(t.config,r):`${t.config.apiScheme}://${r}`;return WO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function QO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Lr(this.auth,"network-request-failed")),XO.get())})}}function Oh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Lr(t,e,i);return r.customData._tokenResponse=n,r}function gA(t){return t!==void 0&&t.enterprise!==void 0}class e4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t4(t,e){return ta(t,"GET","/v2/recaptchaConfig",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e){return ta(t,"POST","/v1/accounts:delete",e)}async function Op(t,e){return ta(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function i4(t,e=!1){const n=Mt(t),i=await n.getIdToken(e),r=P_(i);Ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ld(xv(r.auth_time)),issuedAtTime:ld(xv(r.iat)),expirationTime:ld(xv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function xv(t){return Number(t)*1e3}function P_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return fp("JWT malformed, contained fewer than 3 sections"),null;try{const r=b1(n);return r?JSON.parse(r):(fp("Failed to decode base64 JWT payload"),null)}catch(r){return fp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function yA(t){const e=P_(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fr&&r4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function r4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ld(this.lastLoginAt),this.creationTime=ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Nd(t,Op(n,{idToken:i}));Ue(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?U1(o.providerUserInfo):[],c=a4(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new c0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function o4(t){const e=Mt(t);await Up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function U1(t){return t.map(e=>{var{providerId:n}=e,i=C_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){const n=await L1(t,{},async()=>{const i=Jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await O1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(d.credentials="include"),V1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u4(t,e){return ta(t,"POST","/v2/accounts:revokeToken",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=yA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await l4(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new au;return i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Ue(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new au,this.toJSON())}_performRefresh(){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=C_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new c0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nd(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return i4(this,e)}reload(){return o4(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Up(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await Nd(this,n4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,d,f,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,O=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:$,isAnonymous:K,providerData:H,stsTokenManager:I}=n;Ue(F&&I,e,"internal-error");const R=au.fromJSON(this.name,I);Ue(typeof F=="string",e,"internal-error"),Io(v,e.name),Io(T,e.name),Ue(typeof $=="boolean",e,"internal-error"),Ue(typeof K=="boolean",e,"internal-error"),Io(b,e.name),Io(C,e.name),Io(N,e.name),Io(D,e.name),Io(O,e.name),Io(k,e.name);const P=new Mr({uid:F,auth:e,email:T,emailVerified:$,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:b,tenantId:N,stsTokenManager:R,createdAt:O,lastLoginAt:k});return H&&Array.isArray(H)&&(P.providerData=H.map(V=>Object.assign({},V))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new au;r.updateFromServerResponse(n);const o=new Mr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Up(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ue(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?U1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new au;c.updateFromIdToken(i);const d=new Mr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new c0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new Map;function Ms(t){Fs(t instanceof Function,"Expected a class definition");let e=vA.get(t);return e?(Fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F1.type="NONE";const _A=F1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e,n){return`firebase:${t}:${e}:${n}`}class lu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=hp(this.userKey,r.apiKey,o),this.fullPersistenceKey=hp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Op(this.auth,{idToken:e}).catch(()=>{});return n?Mr._fromGetAccountInfoResponse(this.auth,n,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new lu(Ms(_A),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Ms(_A);const l=hp(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const T=await Op(e,{idToken:p}).catch(()=>{});if(!T)break;v=await Mr._fromGetAccountInfoResponse(e,T,p)}else v=Mr._fromJSON(e,p);f!==o&&(c=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new lu(o,e,i):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new lu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j1(e))return"Blackberry";if($1(e))return"Webos";if(z1(e))return"Safari";if((e.includes("chrome/")||q1(e))&&!e.includes("edge/"))return"Chrome";if(G1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function B1(t=ci()){return/firefox\//i.test(t)}function z1(t=ci()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q1(t=ci()){return/crios\//i.test(t)}function H1(t=ci()){return/iemobile/i.test(t)}function G1(t=ci()){return/android/i.test(t)}function j1(t=ci()){return/blackberry/i.test(t)}function $1(t=ci()){return/webos/i.test(t)}function D_(t=ci()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c4(t=ci()){var e;return D_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d4(){return wL()&&document.documentMode===10}function K1(t=ci()){return D_(t)||G1(t)||$1(t)||j1(t)||/windows phone/i.test(t)||H1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e=[]){let n;switch(t){case"Browser":n=TA(ci());break;case"Worker":n=`${TA(ci())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e={}){return ta(t,"GET","/v2/passwordPolicy",ea(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=6;class m4{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:p4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EA(this),this.idTokenSubscription=new EA(this),this.beforeStateQueue=new f4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ms(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await lu.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Op(this,{idToken:e}),i=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Up(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(ks(this));const n=e?Mt(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h4(this),n=new m4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await u4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ms(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await lu.create(this,[Ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function na(t){return Mt(t)}class EA{constructor(e){this.auth=e,this.observer=null,this.addObserver=DL(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y4(t){Pm=t}function J1(t){return Pm.loadJS(t)}function v4(){return Pm.recaptchaEnterpriseScript}function _4(){return Pm.gapiScript}function T4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class E4{constructor(){this.enterprise=new S4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class S4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const b4="recaptcha-enterprise",W1="NO_RECAPTCHA";class w4{constructor(e){this.type=b4,this.auth=na(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{t4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new e4(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function r(o,l,c){const d=window.grecaptcha;gA(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(W1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new E4().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&gA(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=v4();d.length!==0&&(d+=c),J1(d).then(()=>{r(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function SA(t,e,n,i=!1,r=!1){const o=new w4(t);let l;if(r)l=W1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function d0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await SA(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await SA(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t,e){const n=Wd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ya(o,e??{}))return r;Er(r,"already-initialized")}return n.initialize({options:e})}function x4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function C4(t,e,n){const i=na(t);Ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=X1(e),{host:l,port:c}=I4(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ue(Ya(f,i.config.emulator)&&Ya(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Gs(l)?(Im(`${o}//${l}${d}`),Rm("Auth",!0)):R4()}function X1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I4(t){const e=X1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:bA(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:bA(l)}}}function bA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,n){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}async function N4(t,e){return ta(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e){return Qd(t,"POST","/v1/accounts:signInWithPassword",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e){return Qd(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}async function M4(t,e){return Qd(t,"POST","/v1/accounts:signInWithEmailLink",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends M_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Pd(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Pd(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,n,"signInWithPassword",P4);case"emailLink":return D4(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,i,"signUpPassword",N4);case"emailLink":return M4(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t,e){return Qd(t,"POST","/v1/accounts:signInWithIdp",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="http://localhost";class Ja extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=C_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Ja(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return uu(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,uu(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uu(e,n)}buildRequest(){const e={requestUri:k4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L4(t){const e=Yc(Jc(t)).link,n=e?Yc(Jc(e)).deep_link_id:null,i=Yc(Jc(t)).deep_link_id;return(i?Yc(Jc(i)).link:null)||i||n||e||t}class k_{constructor(e){var n,i,r,o,l,c;const d=Yc(Jc(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=V4((r=d.mode)!==null&&r!==void 0?r:null);Ue(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=L4(e);try{return new k_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.providerId=Nu.PROVIDER_ID}static credential(e,n){return Pd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=k_.parseLink(n);return Ue(i,"argument-error"),Pd._fromEmailAndCode(e,i.code,i.tenantId)}}Nu.PROVIDER_ID="password";Nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends V_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Zd{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ja._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ps.credential(n,i)}catch{return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com";Ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Zd{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.GITHUB_SIGN_IN_METHOD="github.com";Po.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Zd{constructor(){super("twitter.com")}static credential(e,n){return Ja._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Do.credential(n,i)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e){return Qd(t,"POST","/v1/accounts:signUp",ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Mr._fromIdTokenResponse(e,i,r),l=wA(i);return new Wa({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=wA(i);return new Wa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function wA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends Fr{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Fp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Fp(e,n,i,r)}}function Q1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fp._fromErrorAndOperation(t,o,e,i):o})}async function U4(t,e,n=!1){const i=await Nd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(ks(i));const r="reauthenticate";try{const o=await Nd(t,Q1(i,r,e,t),n);Ue(o.idToken,i,"internal-error");const l=P_(o.idToken);Ue(l,i,"internal-error");const{sub:c}=l;return Ue(t.uid===c,i,"user-mismatch"),Wa._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Er(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e,n=!1){if(Si(t.app))return Promise.reject(ks(t));const i="signIn",r=await Q1(t,i,e),o=await Wa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function B4(t,e){return Z1(na(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t){const e=na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z4(t,e,n){if(Si(t.app))return Promise.reject(ks(t));const i=na(t),l=await d0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&eN(t),d}),c=await Wa._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function q4(t,e,n){return Si(t.app)?Promise.reject(ks(t)):B4(Mt(t),Nu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&eN(t),i})}function H4(t,e,n,i){return Mt(t).onIdTokenChanged(e,n,i)}function G4(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function j4(t,e,n,i){return Mt(t).onAuthStateChanged(e,n,i)}function Cv(t){return Mt(t).signOut()}const Bp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bp,"1"),this.storage.removeItem(Bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=1e3,K4=10;class nN extends tN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);d4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,K4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},$4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nN.type="LOCAL";const Y4=nN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends tN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iN.type="SESSION";const rN=iN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Dm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await J4(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=L_("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function X4(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function Q4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eU(){return sN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebaseLocalStorageDb",tU=1,zp="firebaseLocalStorage",aN="fbase_key";class ef{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([zp],e?"readwrite":"readonly").objectStore(zp)}function nU(){const t=indexedDB.deleteDatabase(oN);return new ef(t).toPromise()}function f0(){const t=indexedDB.open(oN,tU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(zp,{keyPath:aN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(zp)?e(i):(i.close(),await nU(),e(await f0()))})})}async function AA(t,e,n){const i=Mm(t,!0).put({[aN]:e,value:n});return new ef(i).toPromise()}async function iU(t,e){const n=Mm(t,!1).get(e),i=await new ef(n).toPromise();return i===void 0?null:i.value}function xA(t,e){const n=Mm(t,!0).delete(e);return new ef(n).toPromise()}const rU=800,sU=3;class lN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await f0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>sU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dm._getInstance(eU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Q4(),!this.activeServiceWorker)return;this.sender=new W4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await f0();return await AA(e,Bp,"1"),await xA(e,Bp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>AA(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>iU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Mm(r,!1).getAll();return new ef(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lN.type="LOCAL";const oU=lN;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){return e?Ms(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends M_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aU(t){return Z1(t.auth,new O_(t),t.bypassAuthState)}function lU(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),F4(n,new O_(t),t.bypassAuthState)}async function uU(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),U4(n,new O_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aU;case"linkViaPopup":case"linkViaRedirect":return uU;case"reauthViaPopup":case"reauthViaRedirect":return lU;default:Er(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=new Xd(2e3,1e4);async function dU(t,e,n){if(Si(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const i=na(t);jO(t,e,V_);const r=uN(i,n);return new Ua(i,"signInViaPopup",e,r).executeNotNull()}class Ua extends cN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Fs(this.filter.length===1,"Popup operations only handle one event");const e=L_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cU.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="pendingRedirect",pp=new Map;class hU extends cN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=pp.get(this.auth._key());if(!e){try{const i=await pU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}pp.set(this.auth._key(),e)}return this.bypassAuthState||pp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pU(t,e){const n=yU(e),i=gU(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function mU(t,e){pp.set(t._key(),e)}function gU(t){return Ms(t._redirectPersistence)}function yU(t){return hp(fU,t.config.apiKey,t.name)}async function vU(t,e,n=!1){if(Si(t.app))return Promise.reject(ks(t));const i=na(t),r=uN(i,e),l=await new hU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=600*1e3;class TU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!dN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_U&&this.cachedEventUids.clear(),this.cachedEventUids.has(CA(e))}saveEventToCache(e){this.cachedEventUids.add(CA(e)),this.lastProcessedEventTime=Date.now()}}function CA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e={}){return ta(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wU=/^https?/;async function AU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SU(t);for(const n of e)try{if(xU(n))return}catch{}Er(t,"unauthorized-domain")}function xU(t){const e=u0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!wU.test(n))return!1;if(bU.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=new Xd(3e4,6e4);function IA(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IU(t){return new Promise((e,n)=>{var i,r,o;function l(){IA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IA(),n(Lr(t,"network-request-failed"))},timeout:CU.get()})}if(!((r=(i=es().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=es().gapi)===null||o===void 0)&&o.load)l();else{const c=T4("iframefcb");return es()[c]=()=>{gapi.load?l():n(Lr(t,"network-request-failed"))},J1(`${_4()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw mp=null,e})}let mp=null;function RU(t){return mp=mp||IU(t),mp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new Xd(5e3,15e3),PU="__/auth/iframe",DU="emulator/auth/iframe",MU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VU(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?N_(e,DU):`https://${t.config.authDomain}/${PU}`,i={apiKey:e.apiKey,appName:t.name,v:nl},r=kU.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Jd(i).slice(1)}`}async function LU(t){const e=await RU(t),n=es().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:VU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MU,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Lr(t,"network-request-failed"),c=es().setTimeout(()=>{o(l)},NU.get());function d(){es().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UU=500,FU=600,BU="_blank",zU="http://localhost";class RA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qU(t,e,n,i=UU,r=FU){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},OU),{width:i.toString(),height:r.toString(),top:o,left:l}),f=ci().toLowerCase();n&&(c=q1(f)?BU:n),B1(f)&&(e=e||zU,d.scrollbars="yes");const p=Object.entries(d).reduce((T,[b,C])=>`${T}${b}=${C},`,"");if(c4(f)&&c!=="_self")return HU(e||"",c),new RA(null);const v=window.open(e||"",c,p);Ue(v,t,"popup-blocked");try{v.focus()}catch{}return new RA(v)}function HU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="__/auth/handler",jU="emulator/auth/handler",$U=encodeURIComponent("fac");async function NA(t,e,n,i,r,o){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:nl,eventId:r};if(e instanceof V_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",PL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof Zd){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${$U}=${encodeURIComponent(d)}`:"";return`${KU(t)}?${Jd(c).slice(1)}${f}`}function KU({config:t}){return t.emulator?N_(t,jU):`https://${t.authDomain}/${GU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="webStorageSupport";class YU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rN,this._completeRedirectFn=vU,this._overrideRedirectResult=mU}async _openPopup(e,n,i,r){var o;Fs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await NA(e,n,i,u0(),r);return qU(e,l,L_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await NA(e,n,i,u0(),r);return X4(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Fs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await LU(e),i=new TU(e);return n.register("authEvent",r=>(Ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Iv,{type:Iv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Iv];l!==void 0&&n(!!l),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K1()||z1()||D_()}}const JU=YU;var PA="@firebase/auth",DA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QU(t){Go(new Os("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y1(t)},f=new g4(i,r,o,d);return x4(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Go(new Os("auth-internal",e=>{const n=na(e.getProvider("auth").getImmediate());return(i=>new WU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(PA,DA,XU(t)),_r(PA,DA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=300,e3=x1("authIdTokenMaxAge")||ZU;let MA=null;const t3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>e3)return;const r=n==null?void 0:n.token;MA!==r&&(MA=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function n3(t=Nm()){const e=Wd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A4(t,{popupRedirectResolver:JU,persistence:[oU,Y4,rN]}),i=x1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=t3(o.toString());G4(n,l,()=>l(n.currentUser)),H4(n,c=>l(c))}}const r=w1("auth");return r&&C4(n,`http://${r}`),n}function i3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y4({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Lr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",i3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QU("Browser");var r3="firebase",s3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(r3,s3,"app");var kA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,fN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function P(){}P.prototype=R.prototype,I.D=R.prototype,I.prototype=new P,I.prototype.constructor=I,I.C=function(V,U,q){for(var z=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)z[Pe-2]=arguments[Pe];return R.prototype[U].apply(V,z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,R,P){P||(P=0);var V=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)V[U]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(U=0;16>U;++U)V[U]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=I.g[0],P=I.g[1],U=I.g[2];var q=I.g[3],z=R+(q^P&(U^q))+V[0]+3614090360&4294967295;R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[1]+3905402710&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[2]+606105819&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[3]+3250441966&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[4]+4118548399&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[5]+1200080426&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[6]+2821735955&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[7]+4249261313&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[8]+1770035416&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[9]+2336552879&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[10]+4294925233&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[11]+2304563134&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[12]+1804603682&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[13]+4254626195&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[14]+2792965006&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[15]+1236535329&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(U^q&(P^U))+V[1]+4129170786&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[6]+3225465664&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[11]+643717713&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[0]+3921069994&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[5]+3593408605&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[10]+38016083&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[15]+3634488961&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[4]+3889429448&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[9]+568446438&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[14]+3275163606&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[3]+4107603335&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[8]+1163531501&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[13]+2850285829&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[2]+4243563512&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[7]+1735328473&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[12]+2368359562&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(P^U^q)+V[5]+4294588738&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[8]+2272392833&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[11]+1839030562&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[14]+4259657740&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[1]+2763975236&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[4]+1272893353&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[7]+4139469664&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[10]+3200236656&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[13]+681279174&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[0]+3936430074&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[3]+3572445317&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[6]+76029189&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[9]+3654602809&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[12]+3873151461&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[15]+530742520&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[2]+3299628645&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(U^(P|~q))+V[0]+4096336452&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[7]+1126891415&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[14]+2878612391&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[5]+4237533241&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[12]+1700485571&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[3]+2399980690&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[10]+4293915773&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[1]+2240044497&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[8]+1873313359&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[15]+4264355552&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[6]+2734768916&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[13]+1309151649&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[4]+4149444226&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[11]+3174756917&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[2]+718787259&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(U+(z<<21&4294967295|z>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+q&4294967295}i.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var P=R-this.blockSize,V=this.B,U=this.h,q=0;q<R;){if(U==0)for(;q<=P;)r(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<R;)if(V[U++]=I.charCodeAt(q++),U==this.blockSize){r(this,V),U=0;break}}else for(;q<R;)if(V[U++]=I[q++],U==this.blockSize){r(this,V),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var P=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=P&255,P/=256;for(this.u(I),I=Array(16),R=P=0;4>R;++R)for(var V=0;32>V;V+=8)I[P++]=this.g[R]>>>V&255;return I};function o(I,R){var P=c;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=R(I)}function l(I,R){this.h=R;for(var P=[],V=!0,U=I.length-1;0<=U;U--){var q=I[U]|0;V&&q==R||(P[U]=q,V=!1)}this.g=P}var c={};function d(I){return-128<=I&&128>I?o(I,function(R){return new l([R|0],0>R?-1:0)}):new l([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return D(f(-I));for(var R=[],P=1,V=0;I>=P;V++)R[V]=I/P|0,P*=4294967296;return new l(R,0)}function p(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return D(p(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(R,8)),V=v,U=0;U<I.length;U+=8){var q=Math.min(8,I.length-U),z=parseInt(I.substring(U,U+q),R);8>q?(q=f(Math.pow(R,q)),V=V.j(q).add(f(z))):(V=V.j(P),V=V.add(f(z)))}return V}var v=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-D(this).m();for(var I=0,R=1,P=0;P<this.g.length;P++){var V=this.i(P);I+=(0<=V?V:4294967296+V)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(N(this))return"-"+D(this).toString(I);for(var R=f(Math.pow(I,6)),P=this,V="";;){var U=$(P,R).g;P=O(P,U.j(R));var q=((0<P.g.length?P.g[0]:P.h)>>>0).toString(I);if(P=U,C(P))return q+V;for(;6>q.length;)q="0"+q;V=q+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=O(this,I),N(I)?-1:C(I)?0:1};function D(I){for(var R=I.g.length,P=[],V=0;V<R;V++)P[V]=~I.g[V];return new l(P,~I.h).add(T)}t.abs=function(){return N(this)?D(this):this},t.add=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0,U=0;U<=R;U++){var q=V+(this.i(U)&65535)+(I.i(U)&65535),z=(q>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);V=z>>>16,q&=65535,z&=65535,P[U]=z<<16|q}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(I,R){return I.add(D(R))}t.j=function(I){if(C(this)||C(I))return v;if(N(this))return N(I)?D(this).j(D(I)):D(D(this).j(I));if(N(I))return D(this.j(D(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var R=this.g.length+I.g.length,P=[],V=0;V<2*R;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<I.g.length;U++){var q=this.i(V)>>>16,z=this.i(V)&65535,Pe=I.i(U)>>>16,De=I.i(U)&65535;P[2*V+2*U]+=z*De,k(P,2*V+2*U),P[2*V+2*U+1]+=q*De,k(P,2*V+2*U+1),P[2*V+2*U+1]+=z*Pe,k(P,2*V+2*U+1),P[2*V+2*U+2]+=q*Pe,k(P,2*V+2*U+2)}for(V=0;V<R;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=R;V<2*R;V++)P[V]=0;return new l(P,0)};function k(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function F(I,R){this.g=I,this.h=R}function $(I,R){if(C(R))throw Error("division by zero");if(C(I))return new F(v,v);if(N(I))return R=$(D(I),R),new F(D(R.g),D(R.h));if(N(R))return R=$(I,D(R)),new F(D(R.g),R.h);if(30<I.g.length){if(N(I)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var P=T,V=R;0>=V.l(I);)P=K(P),V=K(V);var U=H(P,1),q=H(V,1);for(V=H(V,2),P=H(P,2);!C(V);){var z=q.add(V);0>=z.l(I)&&(U=U.add(P),q=z),V=H(V,1),P=H(P,1)}return R=O(I,U.j(R)),new F(U,R)}for(U=v;0<=I.l(R);){for(P=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),q=f(P),z=q.j(R);N(z)||0<z.l(I);)P-=V,q=f(P),z=q.j(R);C(q)&&(q=T),U=U.add(q),I=O(I,z)}return new F(U,I)}t.A=function(I){return $(this,I).h},t.and=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)&I.i(V);return new l(P,this.h&I.h)},t.or=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)|I.i(V);return new l(P,this.h|I.h)},t.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)^I.i(V);return new l(P,this.h^I.h)};function K(I){for(var R=I.g.length+1,P=[],V=0;V<R;V++)P[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(P,I.h)}function H(I,R){var P=R>>5;R%=32;for(var V=I.g.length-P,U=[],q=0;q<V;q++)U[q]=0<R?I.i(q+P)>>>R|I.i(q+P+1)<<32-R:I.i(q+P);return new l(U,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,zo=l}).apply(typeof kA<"u"?kA:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hN,Wc,pN,gp,h0,mN,gN,yN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,x){return g==Array.prototype||g==Object.prototype||(g[w]=x.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var w=0;w<g.length;++w){var x=g[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var x=i;g=g.split(".");for(var L=0;L<g.length-1;L++){var W=g[L];if(!(W in x))break e;x=x[W]}g=g[g.length-1],L=x[g],w=w(L),w!=L&&w!=null&&e(x,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var x=0,L=!1,W={next:function(){if(!L&&x<g.length){var re=x++;return{value:w(re,g[re]),done:!1}}return L=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function f(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,x){return g.call.apply(g.bind,arguments)}function v(g,w,x){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,L),g.apply(w,W)}}return function(){return g.apply(w,arguments)}}function T(g,w,x){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function b(g,w){var x=Array.prototype.slice.call(arguments,1);return function(){var L=x.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function C(g,w){function x(){}x.prototype=w.prototype,g.aa=w.prototype,g.prototype=new x,g.prototype.constructor=g,g.Qb=function(L,W,re){for(var ge=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)ge[Et-2]=arguments[Et];return w.prototype[W].apply(L,ge)}}function N(g){const w=g.length;if(0<w){const x=Array(w);for(let L=0;L<w;L++)x[L]=g[L];return x}return[]}function D(g,w){for(let x=1;x<arguments.length;x++){const L=arguments[x];if(d(L)){const W=g.length||0,re=L.length||0;g.length=W+re;for(let ge=0;ge<re;ge++)g[W+ge]=L[ge]}else g.push(L)}}class O{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function $(g){return $[" "](g),g}$[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(g,w,x){for(const L in g)w.call(x,g[L],L,g)}function I(g,w){for(const x in g)w.call(void 0,g[x],x,g)}function R(g){const w={};for(const x in g)w[x]=g[x];return w}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,w){let x,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(x in L)g[x]=L[x];for(let re=0;re<P.length;re++)x=P[re],Object.prototype.hasOwnProperty.call(L,x)&&(g[x]=L[x])}}function U(g){var w=1;g=g.split(":");const x=[];for(;0<w&&g.length;)x.push(g.shift()),w--;return g.length&&x.push(g.join(":")),x}function q(g){c.setTimeout(()=>{throw g},0)}function z(){var g=xe;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class Pe{constructor(){this.h=this.g=null}add(w,x){const L=De.get();L.set(w,x),this.h?this.h.next=L:this.g=L,this.h=L}}var De=new O(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,me=!1,xe=new Pe,Ce=()=>{const g=c.Promise.resolve(void 0);ae=()=>{g.then(j)}};var j=()=>{for(var g;g=z();){try{g.h.call(g.g)}catch(x){q(x)}var w=De;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}me=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ne=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};c.addEventListener("test",x,w),c.removeEventListener("test",x,w)}catch{}return g})();function he(g,w){if(pe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var x=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{$(w.nodeName);var W=!0;break e}catch{}W=!1}W||(w=null)}}else x=="mouseover"?w=g.fromElement:x=="mouseout"&&(w=g.toElement);this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ee[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&he.aa.h.call(this)}}C(he,pe);var Ee={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Tt(g,w,x,L,W){this.listener=g,this.proxy=null,this.src=w,this.type=x,this.capture=!!L,this.ha=W,this.key=++Be,this.da=this.fa=!1}function Nn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function di(g){this.src=g,this.g={},this.h=0}di.prototype.add=function(g,w,x,L,W){var re=g.toString();g=this.g[re],g||(g=this.g[re]=[],this.h++);var ge=Wn(g,w,L,W);return-1<ge?(w=g[ge],x||(w.fa=!1)):(w=new Tt(w,this.src,re,!!L,W),w.fa=x,g.push(w)),w};function Zt(g,w){var x=w.type;if(x in g.g){var L=g.g[x],W=Array.prototype.indexOf.call(L,w,void 0),re;(re=0<=W)&&Array.prototype.splice.call(L,W,1),re&&(Nn(w),g.g[x].length==0&&(delete g.g[x],g.h--))}}function Wn(g,w,x,L){for(var W=0;W<g.length;++W){var re=g[W];if(!re.da&&re.listener==w&&re.capture==!!x&&re.ha==L)return W}return-1}var Un="closure_lm_"+(1e6*Math.random()|0),An={};function fi(g,w,x,L,W){if(Array.isArray(w)){for(var re=0;re<w.length;re++)fi(g,w[re],x,L,W);return null}return x=tn(x),g&&g[Ve]?g.K(w,x,f(L)?!!L.capture:!1,W):Oi(g,w,x,!1,L,W)}function Oi(g,w,x,L,W,re){if(!w)throw Error("Invalid event type");var ge=f(W)?!!W.capture:!!W,Et=Fn(g);if(Et||(g[Un]=Et=new di(g)),x=Et.add(w,x,L,ge,re),x.proxy)return x;if(L=en(),x.proxy=L,L.src=g,L.listener=x,g.addEventListener)ne||(W=ge),W===void 0&&(W=!1),g.addEventListener(w.toString(),L,W);else if(g.attachEvent)g.attachEvent(Ai(w.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return x}function en(){function g(x){return w.call(g.src,g.listener,x)}const w=Qn;return g}function wi(g,w,x,L,W){if(Array.isArray(w))for(var re=0;re<w.length;re++)wi(g,w[re],x,L,W);else L=f(L)?!!L.capture:!!L,x=tn(x),g&&g[Ve]?(g=g.i,w=String(w).toString(),w in g.g&&(re=g.g[w],x=Wn(re,x,L,W),-1<x&&(Nn(re[x]),Array.prototype.splice.call(re,x,1),re.length==0&&(delete g.g[w],g.h--)))):g&&(g=Fn(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Wn(w,x,L,W)),(x=-1<g?w[g]:null)&&Xn(x))}function Xn(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ve])Zt(w.i,g);else{var x=g.type,L=g.proxy;w.removeEventListener?w.removeEventListener(x,L,g.capture):w.detachEvent?w.detachEvent(Ai(x),L):w.addListener&&w.removeListener&&w.removeListener(L),(x=Fn(w))?(Zt(x,g),x.h==0&&(x.src=null,w[Un]=null)):Nn(g)}}}function Ai(g){return g in An?An[g]:An[g]="on"+g}function Qn(g,w){if(g.da)g=!0;else{w=new he(w,this);var x=g.listener,L=g.ha||g.src;g.fa&&Xn(g),g=x.call(L,w)}return g}function Fn(g){return g=g[Un],g instanceof di?g:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(g){return typeof g=="function"?g:(g[Ie]||(g[Ie]=function(w){return g.handleEvent(w)}),g[Ie])}function Ne(){ee.call(this),this.i=new di(this),this.M=this,this.F=null}C(Ne,ee),Ne.prototype[Ve]=!0,Ne.prototype.removeEventListener=function(g,w,x,L){wi(this,g,w,x,L)};function Ot(g,w){var x,L=g.F;if(L)for(x=[];L;L=L.F)x.push(L);if(g=g.M,L=w.type||w,typeof w=="string")w=new pe(w,g);else if(w instanceof pe)w.target=w.target||g;else{var W=w;w=new pe(L,g),V(w,W)}if(W=!0,x)for(var re=x.length-1;0<=re;re--){var ge=w.g=x[re];W=$t(ge,L,!0,w)&&W}if(ge=w.g=g,W=$t(ge,L,!0,w)&&W,W=$t(ge,L,!1,w)&&W,x)for(re=0;re<x.length;re++)ge=w.g=x[re],W=$t(ge,L,!1,w)&&W}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var x=g.g[w],L=0;L<x.length;L++)Nn(x[L]);delete g.g[w],g.h--}}this.F=null},Ne.prototype.K=function(g,w,x,L){return this.i.add(String(g),w,!1,x,L)},Ne.prototype.L=function(g,w,x,L){return this.i.add(String(g),w,!0,x,L)};function $t(g,w,x,L){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var W=!0,re=0;re<w.length;++re){var ge=w[re];if(ge&&!ge.da&&ge.capture==x){var Et=ge.listener,yn=ge.ha||ge.src;ge.fa&&Zt(g.i,ge),W=Et.call(yn,L)!==!1&&W}}return W&&!L.defaultPrevented}function Jt(g,w,x){if(typeof g=="function")x&&(g=T(g,x));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function Sr(g){g.g=Jt(()=>{g.g=null,g.i&&(g.i=!1,Sr(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class qr extends ee{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(g){ee.call(this),this.h=g,this.g={}}C(Pn,ee);var hi=[];function cn(g){H(g.g,function(w,x){this.g.hasOwnProperty(x)&&Xn(w)},g),g.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),cn(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=c.JSON.stringify,be=c.JSON.parse,we=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function je(){}je.prototype.h=null;function ct(g){return g.h||(g.h=g.i())}function Je(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){pe.call(this,"d")}C(Xe,pe);function Qe(){pe.call(this,"c")}C(Qe,pe);var oe={},ve=null;function Ke(){return ve=ve||new Ne}oe.La="serverreachability";function wt(g){pe.call(this,oe.La,g)}C(wt,pe);function kt(g){const w=Ke();Ot(w,new wt(w))}oe.STAT_EVENT="statevent";function Ct(g,w){pe.call(this,oe.STAT_EVENT,g),this.stat=w}C(Ct,pe);function ft(g){const w=Ke();Ot(w,new Ct(w,g))}oe.Ma="timingevent";function xn(g,w){pe.call(this,oe.Ma,g),this.size=w}C(xn,pe);function Vt(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function er(g,w,x,L,W,re){g.info(function(){if(g.g)if(re)for(var ge="",Et=re.split("&"),yn=0;yn<Et.length;yn++){var Ze=Et[yn].split("=");if(1<Ze.length){var Mn=Ze[0];Ze=Ze[1];var kn=Mn.split("_");ge=2<=kn.length&&kn[1]=="type"?ge+(Mn+"="+Ze+"&"):ge+(Mn+"=redacted&")}}else ge=null;else ge=re;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+w+`
`+x+`
`+ge})}function Bn(g,w,x,L,W,re,ge){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+w+`
`+x+`
`+re+" "+ge})}function pi(g,w,x,L){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ui(g,x)+(L?" "+L:"")})}function us(g,w){g.info(function(){return"TIMEOUT: "+w})}Zn.prototype.info=function(){};function Ui(g,w){if(!g.g)return w;if(!w)return null;try{var x=JSON.parse(w);if(x){for(g=0;g<x.length;g++)if(Array.isArray(x[g])){var L=x[g];if(!(2>L.length)){var W=L[1];if(Array.isArray(W)&&!(1>W.length)){var re=W[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return de(x)}catch{return w}}var Ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fi;function tr(){}C(tr,je),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},Fi=new tr;function Bi(g,w,x,L){this.j=g,this.i=w,this.l=x,this.R=L||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aa}function aa(){this.i=null,this.g="",this.h=!1}var br={},nr={};function ir(g,w,x){g.L=1,g.v=ua(nn(w)),g.m=x,g.P=!0,xi(g,null)}function xi(g,w){g.F=Date.now(),mi(g),g.A=nn(g.v);var x=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),ds(x.i,"t",L),g.C=0,x=g.j.J,g.h=new aa,g.g=Nf(g.j,x?w:null,!g.m),0<g.O&&(g.M=new qr(T(g.Y,g,g.g),g.O)),w=g.U,x=g.g,L=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(hi[0]=W.toString()),W=hi);for(var re=0;re<W.length;re++){var ge=fi(x,W[re],L||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),kt(),er(g.i,g.u,g.A,g.l,g.R,g.m)}Bi.prototype.ca=function(g){g=g.target;const w=this.M;w&&vi(g)==3?w.j():this.Y(g)},Bi.prototype.Y=function(g){try{if(g==this.g)e:{const kn=vi(this.g);var w=this.g.Ba();const ro=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||kn!=4||w==7||(w==8||0>=ro?kt(3):kt(2)),wr(this);var x=this.g.Z();this.X=x;t:if(rr(this)){var L=fa(this.g);g="";var W=L.length,re=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Ar(this);var ge="";break t}this.h.i=new c.TextDecoder}for(w=0;w<W;w++)this.h.h=!0,g+=this.h.i.decode(L[w],{stream:!(re&&w==W-1)});L.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=x==200,Bn(this.i,this.u,this.A,this.l,this.R,kn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,yn=this.g;if((Et=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Et)){var Ze=Et;break t}}Ze=null}if(x=Ze)pi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gr(this,x);else{this.o=!1,this.s=3,ft(12),gi(this),Ar(this);break e}}if(this.P){x=!0;let Ii;for(;!this.J&&this.C<ge.length;)if(Ii=Hr(this,ge),Ii==nr){kn==4&&(this.s=4,ft(14),x=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ii==br){this.s=4,ft(15),pi(this.i,this.l,ge,"[Invalid Chunk]"),x=!1;break}else pi(this.i,this.l,Ii,null),Gr(this,Ii);if(rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ge.length!=0||this.h.h||(this.s=1,ft(16),x=!1),this.o=this.o&&x,!x)pi(this.i,this.l,ge,"[Invalid Chunked Response]"),gi(this),Ar(this);else if(0<ge.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),ec(Mn),Mn.M=!0,ft(11))}}else pi(this.i,this.l,ge,null),Gr(this,ge);kn==4&&gi(this),this.o&&!this.J&&(kn==4?Cf(this.j,this):(this.o=!1,mi(this)))}else Ef(this.g),x==400&&0<ge.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),gi(this),Ar(this)}}}catch{}finally{}};function rr(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Hr(g,w){var x=g.C,L=w.indexOf(`
`,x);return L==-1?nr:(x=Number(w.substring(x,L)),isNaN(x)?br:(L+=1,L+x>w.length?nr:(w=w.slice(L,L+x),g.C=L+x,w)))}Bi.prototype.cancel=function(){this.J=!0,gi(this)};function mi(g){g.S=Date.now()+g.I,Kt(g,g.I)}function Kt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Vt(T(g.ba,g),w)}function wr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Bi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(us(this.i,this.A),this.L!=2&&(kt(),ft(17)),gi(this),this.s=2,Ar(this)):Kt(this,this.S-g)};function Ar(g){g.j.G==0||g.J||Cf(g.j,g)}function gi(g){wr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,cn(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Gr(g,w){try{var x=g.j;if(x.G!=0&&(x.g==g||Ks(x.h,g))){if(!g.K&&Ks(x.h,g)&&x.G==3){try{var L=x.Da.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<g.F)no(x),to(x);else break e;Zu(x),ft(18)}}else x.za=W[1],0<x.za-x.T&&37500>W[2]&&x.F&&x.v==0&&!x.C&&(x.C=Vt(T(x.Za,x),6e3));if(1>=mf(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else hs(x,11)}else if((g.K||x.g==g)&&no(x),!k(w))for(W=x.Da.g.parse(w),w=0;w<W.length;w++){let Ze=W[w];if(x.T=Ze[0],Ze=Ze[1],x.G==2)if(Ze[0]=="c"){x.K=Ze[1],x.ia=Ze[2];const Mn=Ze[3];Mn!=null&&(x.la=Mn,x.j.info("VER="+x.la));const kn=Ze[4];kn!=null&&(x.Aa=kn,x.j.info("SVER="+x.Aa));const ro=Ze[5];ro!=null&&typeof ro=="number"&&0<ro&&(L=1.5*ro,x.L=L,x.j.info("backChannelRequestTimeoutMs_="+L)),L=x;const Ii=g.g;if(Ii){const ma=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var re=L.h;re.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ys(re,re.h),re.h=null))}if(L.D){const ps=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(L.ya=ps,ht(L.I,L.D,ps))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-g.F,x.j.info("Handshake RTT: "+x.R+"ms")),L=x;var ge=g;if(L.qa=Rf(L,L.J?L.ia:null,L.W),ge.K){sr(L.h,ge);var Et=ge,yn=L.L;yn&&(Et.I=yn),Et.B&&(wr(Et),mi(Et)),L.g=ge}else Af(L);0<x.i.length&&pl(x)}else Ze[0]!="stop"&&Ze[0]!="close"||hs(x,7);else x.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?hs(x,7):Xu(x):Ze[0]!="noop"&&x.l&&x.l.ta(Ze),x.v=0)}}kt(4)}catch{}}var gg=class{constructor(g,w){this.g=g,this.map=w}};function Gu(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ju(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function mf(g){return g.h?1:g.g?g.g.size:0}function Ks(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Ys(g,w){g.g?g.g.add(w):g.h=w}function sr(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}Gu.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const x of g.g.values())w=w.concat(x.D);return w}return N(g.i)}function gf(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var w=[],x=g.length,L=0;L<x;L++)w.push(g[L]);return w}w=[],x=0;for(L in g)w[x++]=g[L];return w}function yg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var w=[];g=g.length;for(var x=0;x<g;x++)w.push(x);return w}w=[],x=0;for(const L in g)w[x++]=L;return w}}}function al(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var x=yg(g),L=gf(g),W=L.length,re=0;re<W;re++)w.call(void 0,L[re],x&&x[re],g)}var $u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(g,w){if(g){g=g.split("&");for(var x=0;x<g.length;x++){var L=g[x].indexOf("="),W=null;if(0<=L){var re=g[x].substring(0,L);W=g[x].substring(L+1)}else re=g[x];w(re,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function cs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof cs){this.h=g.h,Js(this,g.j),this.o=g.o,this.g=g.g,la(this,g.s),this.l=g.l;var w=g.i,x=new jr;x.i=w.i,w.g&&(x.g=new Map(w.g),x.h=w.h),ul(this,x),this.m=g.m}else g&&(w=String(g).match($u))?(this.h=!1,Js(this,w[1]||"",!0),this.o=Ws(w[2]||""),this.g=Ws(w[3]||"",!0),la(this,w[4]),this.l=Ws(w[5]||"",!0),ul(this,w[6]||"",!0),this.m=Ws(w[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}cs.prototype.toString=function(){var g=[],w=this.j;w&&g.push(or(w,Ku,!0),":");var x=this.g;return(x||w=="file")&&(g.push("//"),(w=this.o)&&g.push(or(w,Ku,!0),"@"),g.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&g.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(or(x,x.charAt(0)=="/"?Yu:yf,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",or(x,Tg)),g.join("")};function nn(g){return new cs(g)}function Js(g,w,x){g.j=x?Ws(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function la(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function ul(g,w,x){w instanceof jr?(g.i=w,vf(g.i,g.h)):(x||(w=or(w,_g)),g.i=new jr(w,g.h))}function ht(g,w,x){g.i.set(w,x)}function ua(g){return ht(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ws(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function or(g,w,x){return typeof g=="string"?(g=encodeURI(g).replace(w,vg),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function vg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ku=/[#\/\?@]/g,yf=/[#\?:]/g,Yu=/[#\?]/g,_g=/[#\?@]/g,Tg=/#/g;function jr(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Dn(g){g.g||(g.g=new Map,g.h=0,g.i&&ll(g.i,function(w,x){g.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}t=jr.prototype,t.add=function(g,w){Dn(this),this.i=null,g=zi(this,g);var x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(w),this.h+=1,this};function cl(g,w){Dn(g),w=zi(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function dl(g,w){return Dn(g),w=zi(g,w),g.g.has(w)}t.forEach=function(g,w){Dn(this),this.g.forEach(function(x,L){x.forEach(function(W){g.call(w,W,L,this)},this)},this)},t.na=function(){Dn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),x=[];for(let L=0;L<w.length;L++){const W=g[L];for(let re=0;re<W.length;re++)x.push(w[L])}return x},t.V=function(g){Dn(this);let w=[];if(typeof g=="string")dl(this,g)&&(w=w.concat(this.g.get(zi(this,g))));else{g=Array.from(this.g.values());for(let x=0;x<g.length;x++)w=w.concat(g[x])}return w},t.set=function(g,w){return Dn(this),this.i=null,g=zi(this,g),dl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function ds(g,w,x){cl(g,w),0<x.length&&(g.i=null,g.g.set(zi(g,w),N(x)),g.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var x=0;x<w.length;x++){var L=w[x];const re=encodeURIComponent(String(L)),ge=this.V(L);for(L=0;L<ge.length;L++){var W=re;ge[L]!==""&&(W+="="+encodeURIComponent(String(ge[L]))),g.push(W)}}return this.i=g.join("&")};function zi(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function vf(g,w){w&&!g.j&&(Dn(g),g.i=null,g.g.forEach(function(x,L){var W=L.toLowerCase();L!=W&&(cl(this,L),ds(this,W,x))},g)),g.j=w}function Ju(g,w){const x=new Zn;if(c.Image){const L=new Image;L.onload=b(Ci,x,"TestLoadImage: loaded",!0,w,L),L.onerror=b(Ci,x,"TestLoadImage: error",!1,w,L),L.onabort=b(Ci,x,"TestLoadImage: abort",!1,w,L),L.ontimeout=b(Ci,x,"TestLoadImage: timeout",!1,w,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else w(!1)}function _f(g,w){const x=new Zn,L=new AbortController,W=setTimeout(()=>{L.abort(),Ci(x,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:L.signal}).then(re=>{clearTimeout(W),re.ok?Ci(x,"TestPingServer: ok",!0,w):Ci(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),Ci(x,"TestPingServer: error",!1,w)})}function Ci(g,w,x,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(x)}catch{}}function xr(){this.g=new we}function Wu(g,w,x){const L=x||"";try{al(g,function(W,re){let ge=W;f(W)&&(ge=de(W)),w.push(L+re+"="+encodeURIComponent(ge))})}catch(W){throw w.push(L+"type="+encodeURIComponent("_badmap")),W}}function $r(g){this.l=g.Ub||null,this.j=g.eb||!1}C($r,je),$r.prototype.g=function(){return new qi(this.l,this.j)},$r.prototype.i=(function(g){return function(){return g}})({});function qi(g,w){Ne.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(qi,Ne),t=qi.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Xs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function fl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Kr(this):Xs(this),this.readyState==3&&fl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Kr(this))},t.Qa=function(g){this.g&&(this.response=g,Kr(this))},t.ga=function(){this.g&&Kr(this)};function Kr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Xs(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=w.next();return g.join(`\r
`)};function Xs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ca(g){let w="";return H(g,function(x,L){w+=L,w+=":",w+=x,w+=`\r
`}),w}function Qs(g,w,x){e:{for(L in x){var L=!1;break e}L=!0}L||(x=ca(x),typeof g=="string"?x!=null&&encodeURIComponent(String(x)):ht(g,w,x))}function Ft(g){Ne.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ft,Ne);var ei=/^https?$/i,fs=["POST","PUT"];t=Ft.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,x,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fi.g(),this.v=this.o?ct(this.o):ct(Fi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(re){da(this,re);return}if(g=x||"",x=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)x.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())x.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(x.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fs,w,void 0))||L||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of x)this.g.setRequestHeader(re,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hl(this),this.u=!0,this.g.send(g),this.u=!1}catch(re){da(this,re)}};function da(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,Zs(g),eo(g)}function Zs(g){g.A||(g.A=!0,Ot(g,"complete"),Ot(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Ot(this,"complete"),Ot(this,"abort"),eo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eo(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tf(this):this.bb())},t.bb=function(){Tf(this)};function Tf(g){if(g.h&&typeof l<"u"&&(!g.v[1]||vi(g)!=4||g.Z()!=2)){if(g.u&&vi(g)==4)Jt(g.Ea,0,g);else if(Ot(g,"readystatechange"),vi(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var L;if(L=ge===0){var W=String(g.D).match($u)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),L=!ei.test(W?W.toLowerCase():"")}x=L}if(x)Ot(g,"complete"),Ot(g,"success");else{g.m=6;try{var re=2<vi(g)?g.g.statusText:""}catch{re=""}g.l=re+" ["+g.Z()+"]",Zs(g)}}finally{eo(g)}}}}function eo(g,w){if(g.g){hl(g);const x=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||Ot(g,"ready");try{x.onreadystatechange=L}catch{}}}function hl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function vi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),be(w)}};function fa(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ef(g){const w={};g=(g.g&&2<=vi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var x=U(g[L]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const re=w[W]||[];w[W]=re,re.push(x)}I(w,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(g,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||w}function Sf(g){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,g),this.cb=ha("retryDelaySeedMs",1e4,g),this.Wa=ha("forwardChannelMaxRetries",2,g),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Gu(g&&g.concurrentRequestLimit),this.Da=new xr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sf.prototype,t.la=8,t.G=1,t.connect=function(g,w,x,L){ft(0),this.W=g,this.H=w||{},x&&L!==void 0&&(this.H.OSID=x,this.H.OAID=L),this.F=this.X,this.I=Rf(this,null,this.W),pl(this)};function Xu(g){if(bf(g),g.G==3){var w=g.U++,x=nn(g.I);if(ht(x,"SID",g.K),ht(x,"RID",w),ht(x,"TYPE","terminate"),pa(g,x),w=new Bi(g,g.j,w),w.L=2,w.v=ua(nn(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!x&&c.Image&&(new Image().src=w.v,x=!0),x||(w.g=Nf(w.j,null),w.g.ea(w.v)),w.F=Date.now(),mi(w)}tc(g)}function to(g){g.g&&(ec(g),g.g.cancel(),g.g=null)}function bf(g){to(g),g.u&&(c.clearTimeout(g.u),g.u=null),no(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function pl(g){if(!ju(g.h)&&!g.s){g.s=!0;var w=g.Ga;ae||Ce(),me||(ae(),me=!0),xe.add(w,g),g.B=0}}function Eg(g,w){return mf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Vt(T(g.Ga,g,w),If(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Bi(this,this.j,g);let re=this.o;if(this.S&&(re?(re=R(re),V(re,this.S)):re=this.S),this.m!==null||this.O||(W.H=re,re=null),this.P)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var L=this.i[x];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,4096<w){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=Qu(this,W,w),x=nn(this.I),ht(x,"RID",g),ht(x,"CVER",22),this.D&&ht(x,"X-HTTP-Session-Id",this.D),pa(this,x),re&&(this.O?w="headers="+encodeURIComponent(String(ca(re)))+"&"+w:this.m&&Qs(x,this.m,re)),Ys(this.h,W),this.Ua&&ht(x,"TYPE","init"),this.P?(ht(x,"$req",w),ht(x,"SID","null"),W.T=!0,ir(W,x,null)):ir(W,x,w),this.G=2}}else this.G==3&&(g?wf(this,g):this.i.length==0||ju(this.h)||wf(this))};function wf(g,w){var x;w?x=w.l:x=g.U++;const L=nn(g.I);ht(L,"SID",g.K),ht(L,"RID",x),ht(L,"AID",g.T),pa(g,L),g.m&&g.o&&Qs(L,g.m,g.o),x=new Bi(g,g.j,x,g.B+1),g.m===null&&(x.H=g.o),w&&(g.i=w.D.concat(g.i)),w=Qu(g,x,1e3),x.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ys(g.h,x),ir(x,L,w)}function pa(g,w){g.H&&H(g.H,function(x,L){ht(w,L,x)}),g.l&&al({},function(x,L){ht(w,L,x)})}function Qu(g,w,x){x=Math.min(g.i.length,x);var L=g.l?T(g.l.Na,g.l,g):null;e:{var W=g.i;let re=-1;for(;;){const ge=["count="+x];re==-1?0<x?(re=W[0].g,ge.push("ofs="+re)):re=0:ge.push("ofs="+re);let Et=!0;for(let yn=0;yn<x;yn++){let Ze=W[yn].g;const Mn=W[yn].map;if(Ze-=re,0>Ze)re=Math.max(0,W[yn].g-100),Et=!1;else try{Wu(Mn,ge,"req"+Ze+"_")}catch{L&&L(Mn)}}if(Et){L=ge.join("&");break e}}}return g=g.i.splice(0,x),w.D=g,L}function Af(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;ae||Ce(),me||(ae(),me=!0),xe.add(w,g),g.v=0}}function Zu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Vt(T(g.Fa,g),If(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,xf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Vt(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),to(this),xf(this))};function ec(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function xf(g){g.g=new Bi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=nn(g.qa);ht(w,"RID","rpc"),ht(w,"SID",g.K),ht(w,"AID",g.T),ht(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&ht(w,"TO",g.ja),ht(w,"TYPE","xmlhttp"),pa(g,w),g.m&&g.o&&Qs(w,g.m,g.o),g.L&&(g.g.I=g.L);var x=g.g;g=g.ia,x.L=1,x.v=ua(nn(w)),x.m=null,x.P=!0,xi(x,g)}t.Za=function(){this.C!=null&&(this.C=null,to(this),Zu(this),ft(19))};function no(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Cf(g,w){var x=null;if(g.g==w){no(g),ec(g),g.g=null;var L=2}else if(Ks(g.h,w))x=w.D,sr(g.h,w),L=1;else return;if(g.G!=0){if(w.o)if(L==1){x=w.m?w.m.length:0,w=Date.now()-w.F;var W=g.B;L=Ke(),Ot(L,new xn(L,x)),pl(g)}else Af(g);else if(W=w.s,W==3||W==0&&0<w.X||!(L==1&&Eg(g,w)||L==2&&Zu(g)))switch(x&&0<x.length&&(w=g.h,w.i=w.i.concat(x)),W){case 1:hs(g,5);break;case 4:hs(g,10);break;case 3:hs(g,6);break;default:hs(g,2)}}}function If(g,w){let x=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(x*=2),x*w}function hs(g,w){if(g.j.info("Error code "+w),w==2){var x=T(g.fb,g),L=g.Xa;const W=!L;L=new cs(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Js(L,"https"),ua(L),W?Ju(L.toString(),x):_f(L.toString(),x)}else ft(2);g.G=0,g.l&&g.l.sa(w),tc(g),bf(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function tc(g){if(g.G=0,g.ka=[],g.l){const w=yi(g.h);(w.length!=0||g.i.length!=0)&&(D(g.ka,w),D(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function Rf(g,w,x){var L=x instanceof cs?nn(x):new cs(x);if(L.g!="")w&&(L.g=w+"."+L.g),la(L,L.s);else{var W=c.location;L=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;var re=new cs(null);L&&Js(re,L),w&&(re.g=w),W&&la(re,W),x&&(re.l=x),L=re}return x=g.D,w=g.ya,x&&w&&ht(L,x,w),ht(L,"VER",g.la),pa(g,L),L}function Nf(g,w,x){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new Ft(new $r({eb:x})):new Ft(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pf(){}t=Pf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ml(){}ml.prototype.g=function(g,w){return new _i(g,w)};function _i(g,w){Ne.call(this),this.g=new Sf(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new io(this)}C(_i,Ne),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Xu(this.g)},_i.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.u&&(x={},x.__data__=de(g),g=x);w.i.push(new gg(w.Ya++,g)),w.G==3&&pl(w)},_i.prototype.N=function(){this.g.l=null,delete this.j,Xu(this.g),delete this.g,_i.aa.N.call(this)};function Df(g){Xe.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const x in w){g=x;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}C(Df,Xe);function Mf(){Qe.call(this),this.status=1}C(Mf,Qe);function io(g){this.g=g}C(io,Pf),io.prototype.ua=function(){Ot(this.g,"a")},io.prototype.ta=function(g){Ot(this.g,new Df(g))},io.prototype.sa=function(g){Ot(this.g,new Mf)},io.prototype.ra=function(){Ot(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,yN=function(){return new ml},gN=function(){return Ke()},mN=oe,h0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ut.NO_ERROR=0,Ut.TIMEOUT=8,Ut.HTTP_ERROR=6,gp=Ut,dn.COMPLETE="complete",pN=dn,Je.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,Wc=Je,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,hN=Ft}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const VA="@firebase/firestore",LA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new A_("@firebase/firestore");function Jl(){return Xa.logLevel}function Se(t,...e){if(Xa.logLevel<=ot.DEBUG){const n=e.map(U_);Xa.debug(`Firestore (${Pu}): ${t}`,...n)}}function Bs(t,...e){if(Xa.logLevel<=ot.ERROR){const n=e.map(U_);Xa.error(`Firestore (${Pu}): ${t}`,...n)}}function jo(t,...e){if(Xa.logLevel<=ot.WARN){const n=e.map(U_);Xa.warn(`Firestore (${Pu}): ${t}`,...n)}}function U_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,vN(t,i,n)}function vN(t,e,n){let i=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bs(i),new Error(i)}function bt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||vN(e,r,i)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oi.UNAUTHENTICATED)))}shutdown(){}}class a3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class l3{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qo,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},c=d=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new _N(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class u3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new u3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const i=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new OA(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=f3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function et(t,e){return t<e?-1:t>e?1:0}function p0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return et(i,r);{const o=TN(),l=h3(o.encode(UA(t,n)),o.encode(UA(e,n)));return l!==0?l:et(i,r)}}n+=i>65535?2:1}return et(t.length,e.length)}function UA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function h3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return et(t[n],e[n]);return et(t.length,e.length)}function vu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="__name__";class Zr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Fe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Zr.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return et(e.length,n.length)}static compareSegments(e,n){const i=Zr.isNumericId(e),r=Zr.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):p0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class Lt extends Zr{construct(e,n,i){return new Lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const p3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends Zr{construct(e,n,i){return new Yn(e,n,i)}static isValidIdentifier(e){return p3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FA}static keyField(){return new Yn([FA])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(n)}static emptyPath(){return new Yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Lt.fromString(e))}static fromName(e){return new ke(Lt.fromString(e).popFirst(5))}static empty(){return new ke(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e,n){if(!n)throw new Te(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m3(t,e,n,i){if(e===!0&&i===!0)throw new Te(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BA(t){if(!ke.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zA(t){if(ke.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function km(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(t);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){const n={typeString:t};return e&&(n.value=e),n}function tf(t,e){if(!SN(t))throw new Te(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Te(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=-62135596800,HA=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*HA);return new Gt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qA)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HA}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tf(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:wn("string",Gt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Gt(0,0))}static max(){return new ze(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=-1;function g3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(i===1e9?new Gt(n+1,0):new Gt(n,i));return new $o(r,ke.empty(),e)}function y3(t){return new $o(t.readTime,t.key,Dd)}class $o{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new $o(ze.min(),ke.empty(),Dd)}static max(){return new $o(ze.max(),ke.empty(),Dd)}}function v3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==_3)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,i)=>{n(e)}))}static reject(e){return new fe(((n,i)=>{i(e)}))}static waitFor(e){return new fe(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(d=>i(d)))})),l=!0,o===r&&n()}))}static or(e){let n=fe.resolve(!1);for(const i of e)n=n.next((r=>r?fe.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new fe(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new fe(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function E3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Vm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=-1;function Lm(t){return t==null}function qp(t){return t===0&&1/t==-1/0}function S3(t){return typeof t=="number"&&Number.isInteger(t)&&!qp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="";function b3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GA(e)),e=w3(t.get(n),e);return GA(e)}function w3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case bN:n+="";break;default:n+=o}}return n}function GA(t){return t+bN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||Kn.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Kn.RED,this.left=r??Kn.EMPTY,this.right=o??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Kn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Kn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Kn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $A(this.data.getIterator())}getIteratorFrom(e){return new $A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Rn(this.comparator);return n.data=e,n}}class $A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new Wi([])}unionWith(e){let n=new Rn(Yn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new AN("Invalid base64 string: "+o):o}})(e);return new Jn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const A3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=A3.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yo(t){return typeof t=="string"?Jn.fromBase64String(t):Jn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="server_timestamp",CN="__type__",IN="__previous_value__",RN="__local_write_time__";function z_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CN])===null||n===void 0?void 0:n.stringValue)===xN}function Om(t){const e=t.mapValue.fields[IN];return z_(e)?Om(e):e}function Md(t){const e=Ko(t.mapValue.fields[RN].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n,i,r,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Hp="(default)";class kd{constructor(e,n){this.projectId=e,this.database=n||Hp}static empty(){return new kd("","")}get isDefaultDatabase(){return this.database===Hp}isEqual(e){return e instanceof kd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="__type__",C3="__max__",Bh={mapValue:{}},PN="__vector__",Gp="value";function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?z_(t)?4:R3(t)?9007199254740991:I3(t)?10:11:Fe(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Md(t).isEqual(Md(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Ko(r.timestampValue),c=Ko(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Yo(r.bytesValue).isEqual(Yo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return mn(r.geoPointValue.latitude)===mn(o.geoPointValue.latitude)&&mn(r.geoPointValue.longitude)===mn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return mn(r.integerValue)===mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=mn(r.doubleValue),c=mn(o.doubleValue);return l===c?qp(l)===qp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return vu(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(jA(l)!==jA(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!ls(l[d],c[d])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Vd(t,e){return(t.values||[]).find((n=>ls(n,e)))!==void 0}function _u(t,e){if(t===e)return 0;const n=Jo(t),i=Jo(e);if(n!==i)return et(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mn(o.integerValue||o.doubleValue),d=mn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return KA(t.timestampValue,e.timestampValue);case 4:return KA(Md(t),Md(e));case 5:return p0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Yo(o),d=Yo(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=et(c[f],d[f]);if(p!==0)return p}return et(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=et(mn(o.latitude),mn(l.latitude));return c!==0?c:et(mn(o.longitude),mn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return YA(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,d,f,p;const v=o.fields||{},T=l.fields||{},b=(c=v[Gp])===null||c===void 0?void 0:c.arrayValue,C=(d=T[Gp])===null||d===void 0?void 0:d.arrayValue,N=et(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:YA(b,C)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Bh.mapValue&&l===Bh.mapValue)return 0;if(o===Bh.mapValue)return 1;if(l===Bh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const T=p0(d[v],p[v]);if(T!==0)return T;const b=_u(c[d[v]],f[p[v]]);if(b!==0)return b}return et(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{le:n})}}function KA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=Ko(t),i=Ko(e),r=et(n.seconds,i.seconds);return r!==0?r:et(n.nanos,i.nanos)}function YA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=_u(n[r],i[r]);if(o)return o}return et(n.length,i.length)}function Tu(t){return m0(t)}function m0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ko(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Yo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=m0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${m0(n.fields[l])}`;return r+"}"})(t.mapValue):Fe(61005,{value:t})}function yp(t){switch(Jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Om(t);return e?16+yp(e):16;case 5:return 2*t.stringValue.length;case 6:return Yo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+yp(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return ia(i.fields,((o,l)=>{r+=o.length+yp(l)})),r})(t.mapValue);default:throw Fe(13486,{value:t})}}function JA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function q_(t){return!!t&&"arrayValue"in t}function WA(t){return!!t&&"nullValue"in t}function XA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vp(t){return!!t&&"mapValue"in t}function I3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NN])===null||n===void 0?void 0:n.stringValue)===PN}function ud(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=ud(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ud(t.arrayValue.values[n]);return e}return Object.assign({},t)}function R3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===C3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!vp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(n)}setAll(e){let n=Yn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=ud(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());vp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];vp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ia(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Vi(ud(this.value))}}function DN(t){const e=[];return ia(t.fields,((n,i)=>{const r=new Yn([n]);if(vp(i)){const o=DN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ai(e,0,ze.min(),ze.min(),ze.min(),Vi.empty(),0)}static newFoundDocument(e,n,i,r){return new ai(e,1,n,ze.min(),i,r,0)}static newNoDocument(e,n){return new ai(e,2,n,ze.min(),ze.min(),Vi.empty(),0)}static newUnknownDocument(e,n){return new ai(e,3,n,ze.min(),ze.min(),Vi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.position=e,this.inclusive=n}}function QA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=ke.comparator(ke.fromName(l.referenceValue),n.key):i=_u(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n="asc"){this.field=e,this.dir=n}}function N3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class bn extends MN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new D3(e,n,i):n==="array-contains"?new V3(e,i):n==="in"?new L3(e,i):n==="not-in"?new O3(e,i):n==="array-contains-any"?new U3(e,i):new bn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new M3(e,i):new k3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_u(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(_u(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends MN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ur(e,n)}matches(e){return kN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function kN(t){return t.op==="and"}function VN(t){return P3(t)&&kN(t)}function P3(t){for(const e of t.filters)if(e instanceof Ur)return!1;return!0}function y0(t){if(t instanceof bn)return t.field.canonicalString()+t.op.toString()+Tu(t.value);if(VN(t))return t.filters.map((e=>y0(e))).join(",");{const e=t.filters.map((n=>y0(n))).join(",");return`${t.op}(${e})`}}function LN(t,e){return t instanceof bn?(function(i,r){return r instanceof bn&&i.op===r.op&&i.field.isEqual(r.field)&&ls(i.value,r.value)})(t,e):t instanceof Ur?(function(i,r){return r instanceof Ur&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&LN(l,r.filters[c])),!0):!1})(t,e):void Fe(19439)}function ON(t){return t instanceof bn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tu(n.value)}`})(t):t instanceof Ur?(function(n){return n.op.toString()+" {"+n.getFilters().map(ON).join(" ,")+"}"})(t):"Filter"}class D3 extends bn{constructor(e,n,i){super(e,n,i),this.key=ke.fromName(i.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class M3 extends bn{constructor(e,n){super(e,"in",n),this.keys=UN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class k3 extends bn{constructor(e,n){super(e,"not-in",n),this.keys=UN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function UN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>ke.fromName(i.referenceValue)))}class V3 extends bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return q_(n)&&Vd(n.arrayValue,this.value)}}class L3 extends bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vd(this.value.arrayValue,n)}}class O3 extends bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vd(this.value.arrayValue,n)}}class U3 extends bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!q_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Vd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function ex(t,e=null,n=[],i=[],r=null,o=null,l=null){return new F3(t,e,n,i,r,o,l)}function H_(t){const e=Ge(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>y0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Lm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Tu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Tu(i))).join(",")),e.Pe=n}return e.Pe}function G_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZA(t.startAt,e.startAt)&&ZA(t.endAt,e.endAt)}function v0(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function B3(t,e,n,i,r,o,l,c){return new nf(t,e,n,i,r,o,l,c)}function Um(t){return new nf(t)}function tx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FN(t){return t.collectionGroup!==null}function cd(t){const e=Ge(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Rn(Yn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $p(o,i))})),n.has(Yn.keyField().canonicalString())||e.Te.push(new $p(Yn.keyField(),i))}return e.Te}function ns(t){const e=Ge(t);return e.Ie||(e.Ie=z3(e,cd(t))),e.Ie}function z3(t,e){if(t.limitType==="F")return ex(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new $p(r.field,o)}));const n=t.endAt?new jp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new jp(t.startAt.position,t.startAt.inclusive):null;return ex(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _0(t,e){const n=t.filters.concat([e]);return new nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function T0(t,e,n){return new nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fm(t,e){return G_(ns(t),ns(e))&&t.limitType===e.limitType}function BN(t){return`${H_(ns(t))}|lt:${t.limitType}`}function Wl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>ON(r))).join(", ")}]`),Lm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Tu(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Tu(r))).join(",")),`Target(${i})`})(ns(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ke.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of cd(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,d){const f=QA(l,c,d);return l.inclusive?f<=0:f<0})(i.startAt,cd(i),r)||i.endAt&&!(function(l,c,d){const f=QA(l,c,d);return l.inclusive?f>=0:f>0})(i.endAt,cd(i),r))})(t,e)}function q3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zN(t){return(e,n)=>{let i=!1;for(const r of cd(t)){const o=H3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function H3(t,e,n){const i=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?_u(d,f):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return wN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=new Qt(ke.comparator);function zs(){return G3}const qN=new Qt(ke.comparator);function Xc(...t){let e=qN;for(const n of t)e=e.insert(n.key,n);return e}function HN(t){let e=qN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Fa(){return dd()}function GN(){return dd()}function dd(){return new il((t=>t.toString()),((t,e)=>t.isEqual(e)))}const j3=new Qt(ke.comparator),$3=new Rn(ke.comparator);function at(...t){let e=$3;for(const n of t)e=e.add(n);return e}const K3=new Rn(et);function Y3(){return K3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qp(e)?"-0":e}}function jN(t){return{integerValue:""+t}}function J3(t,e){return S3(e)?jN(e):j_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this._=void 0}}function W3(t,e,n){return t instanceof Kp?(function(r,o){const l={fields:{[CN]:{stringValue:xN},[RN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&z_(o)&&(o=Om(o)),o&&(l.fields[IN]=o),{mapValue:l}})(n,e):t instanceof Ld?KN(t,e):t instanceof Od?YN(t,e):(function(r,o){const l=$N(r,o),c=nx(l)+nx(r.Ee);return g0(l)&&g0(r.Ee)?jN(c):j_(r.serializer,c)})(t,e)}function X3(t,e,n){return t instanceof Ld?KN(t,e):t instanceof Od?YN(t,e):n}function $N(t,e){return t instanceof Yp?(function(i){return g0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Kp extends zm{}class Ld extends zm{constructor(e){super(),this.elements=e}}function KN(t,e){const n=JN(e);for(const i of t.elements)n.some((r=>ls(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Od extends zm{constructor(e){super(),this.elements=e}}function YN(t,e){let n=JN(e);for(const i of t.elements)n=n.filter((r=>!ls(r,i)));return{arrayValue:{values:n}}}class Yp extends zm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function nx(t){return mn(t.integerValue||t.doubleValue)}function JN(t){return q_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Q3(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Ld&&r instanceof Ld||i instanceof Od&&r instanceof Od?vu(i.elements,r.elements,ls):i instanceof Yp&&r instanceof Yp?ls(i.Ee,r.Ee):i instanceof Kp&&r instanceof Kp})(t.transform,e.transform)}class Z3{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _p(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qm{}function WN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $_(t.key,Or.none()):new rf(t.key,t.data,Or.none());{const n=t.data,i=Vi.empty();let r=new Rn(Yn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new ra(t.key,i,new Wi(r.toArray()),Or.none())}}function e5(t,e,n){t instanceof rf?(function(r,o,l){const c=r.value.clone(),d=rx(r.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ra?(function(r,o,l){if(!_p(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=rx(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(XN(r)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function fd(t,e,n,i){return t instanceof rf?(function(o,l,c,d){if(!_p(o.precondition,l))return c;const f=o.value.clone(),p=sx(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof ra?(function(o,l,c,d){if(!_p(o.precondition,l))return c;const f=sx(o.fieldTransforms,d,l),p=l.data;return p.setAll(XN(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return _p(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function t5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=$N(i.transform,r||null);o!=null&&(n===null&&(n=Vi.empty()),n.set(i.field,o))}return n||null}function ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&vu(i,r,((o,l)=>Q3(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rf extends qm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ra extends qm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function rx(t,e,n){const i=new Map;bt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,X3(l,c,n[r]))}return i}function sx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,W3(o,l,e))}return i}class $_ extends qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n5 extends qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&e5(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=fd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=fd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=GN();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const d=WN(l,c);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(ze.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&vu(this.mutations,e.mutations,((n,i)=>ix(n,i)))&&vu(this.baseMutations,e.baseMutations,((n,i)=>ix(n,i)))}}class K_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){bt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return j3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new K_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,dt;function o5(t){switch(t){case ce.OK:return Fe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function QN(t){if(t===void 0)return Bs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Sn.OK:return ce.OK;case Sn.CANCELLED:return ce.CANCELLED;case Sn.UNKNOWN:return ce.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return ce.INTERNAL;case Sn.UNAVAILABLE:return ce.UNAVAILABLE;case Sn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Sn.NOT_FOUND:return ce.NOT_FOUND;case Sn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Sn.ABORTED:return ce.ABORTED;case Sn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Sn.DATA_LOSS:return ce.DATA_LOSS;default:return Fe(39323,{code:t})}}(dt=Sn||(Sn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=new zo([4294967295,4294967295],0);function ox(t){const e=TN().encode(t),n=new fN;return n.update(e),new Uint8Array(n.digest())}function ax(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zo([n,i],0),new zo([r,o],0)]}class Y_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qc(`Invalid padding: ${n}`);if(i<0)throw new Qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=zo.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(zo.fromNumber(i)));return r.compare(a5)===1&&(r=new zo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=ox(e),[i,r]=ax(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Y_(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=ox(e),[i,r]=ax(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,sf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Hm(ze.min(),r,new Qt(et),zs(),at())}}class sf{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new sf(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class ZN{constructor(e,n){this.targetId=e,this.De=n}}class eP{constructor(e,n,i=Jn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class lx{constructor(){this.ve=0,this.Ce=ux(),this.Fe=Jn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),n=at(),i=at();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Fe(38017,{changeType:o})}})),new sf(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=ux()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class l5{constructor(e){this.We=e,this.Ge=new Map,this.ze=zs(),this.je=zh(),this.Je=zh(),this.He=new Qt(et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(v0(o))if(i===0){const l=new ke(o.path);this.Xe(n,l,ai.newNoDocument(l,ze.min()))}else bt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Yo(i).toUint8Array()}catch(d){if(d instanceof AN)return jo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Y_(l,r,o)}catch(d){return jo(d instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&v0(c.target)){const d=new ke(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,ai.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=at();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Hm(e,n,this.He,this.ze,i);return this.ze=zs(),this.je=zh(),this.Je=zh(),this.He=new Qt(et),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new lx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Rn(et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Rn(et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lx),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function zh(){return new Qt(ke.comparator)}function ux(){return new Qt(ke.comparator)}const u5={asc:"ASCENDING",desc:"DESCENDING"},c5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d5={and:"AND",or:"OR"};class f5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function E0(t,e){return t.useProto3Json||Lm(e)?e:{value:e}}function Jp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h5(t,e){return Jp(t,e.toTimestamp())}function is(t){return bt(!!t,49232),ze.fromTimestamp((function(n){const i=Ko(n);return new Gt(i.seconds,i.nanos)})(t))}function J_(t,e){return S0(t,e).canonicalString()}function S0(t,e){const n=(function(r){return new Lt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function nP(t){const e=Lt.fromString(t);return bt(aP(e),10190,{key:e.toString()}),e}function b0(t,e){return J_(t.databaseId,e.path)}function Rv(t,e){const n=nP(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(rP(n))}function iP(t,e){return J_(t.databaseId,e)}function p5(t){const e=nP(t);return e.length===4?Lt.emptyPath():rP(e)}function w0(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rP(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cx(t,e,n){return{name:b0(t,e),fields:n.value.mapValue.fields}}function m5(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(bt(p===void 0||typeof p=="string",58123),Jn.fromBase64String(p||"")):(bt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Jn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?ce.UNKNOWN:QN(f.code);return new Te(p,f.message||"")})(l);n=new eP(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Rv(t,i.document.name),o=is(i.document.updateTime),l=i.document.createTime?is(i.document.createTime):ze.min(),c=new Vi({mapValue:{fields:i.document.fields}}),d=ai.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Tp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Rv(t,i.document),o=i.readTime?is(i.readTime):ze.min(),l=ai.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Tp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Rv(t,i.document),o=i.removedTargetIds||[];n=new Tp([],o,r,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new s5(r,o),c=i.targetId;n=new ZN(c,l)}}return n}function g5(t,e){let n;if(e instanceof rf)n={update:cx(t,e.key,e.value)};else if(e instanceof $_)n={delete:b0(t,e.key)};else if(e instanceof ra)n={update:cx(t,e.key,e.data),updateMask:A5(e.fieldMask)};else{if(!(e instanceof n5))return Fe(16599,{Rt:e.type});n={verify:b0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Kp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ld)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Od)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Fe(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:h5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(t,e.precondition)),n}function y5(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?is(r.updateTime):is(o);return l.isEqual(ze.min())&&(l=is(o)),new Z3(l,r.transformResults||[])})(n,e)))):[]}function v5(t,e){return{documents:[iP(t,e.path)]}}function _5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=iP(t,r);const o=(function(f){if(f.length!==0)return oP(Ur.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(T){return{field:Xl(T.field),direction:S5(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=E0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:r}}function T5(t){let e=p5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){bt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=sP(v);return T instanceof Ur&&VN(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(C){return new $p(Ql(C.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Lm(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(v){const T=!!v.before,b=v.values||[];return new jp(b,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const T=!v.before,b=v.values||[];return new jp(b,T)})(n.endAt)),B3(e,r,l,o,c,"F",d,f)}function E5(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ql(n.unaryFilter.field);return bn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ql(n.unaryFilter.field);return bn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ql(n.unaryFilter.field);return bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ql(n.unaryFilter.field);return bn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return bn.create(Ql(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ur.create(n.compositeFilter.filters.map((i=>sP(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function S5(t){return u5[t]}function b5(t){return c5[t]}function w5(t){return d5[t]}function Xl(t){return{fieldPath:t.canonicalString()}}function Ql(t){return Yn.fromServerFormat(t.fieldPath)}function oP(t){return t instanceof bn?(function(n){if(n.op==="=="){if(XA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NAN"}};if(WA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NAN"}};if(WA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(n.field),op:b5(n.op),value:n.value}}})(t):t instanceof Ur?(function(n){const i=n.getFilters().map((r=>oP(r)));return i.length===1?i[0]:{compositeFilter:{op:w5(n.op),filters:i}}})(t):Fe(54877,{filter:t})}function A5(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function aP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,i,r,o=ze.min(),l=ze.min(),c=Jn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.gt=e}}function C5(t){const e=T5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?T0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.Dn=new R5}addToCollectionParentIndex(e,n){return this.Dn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve($o.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve($o.min())}updateCollectionGroup(e,n,i){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class R5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Rn(Lt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Rn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lP=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(lP,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Eu(0)}static ur(){return new Eu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="LruGarbageCollector",N5=1048576;function hx([t,e],[n,i]){const r=et(t,n);return r===0?et(e,i):r}class P5{constructor(e){this.Tr=e,this.buffer=new Rn(hx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();hx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Se(fx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mu(n)?Se(fx,"Ignoring IndexedDB error during garbage collection: ",n):await Du(n)}await this.Rr(3e5)}))}}class M5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Vm.ue);const i=new P5(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(dx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dx):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Jl()<=ot.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function k5(t,e){return new M5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&fd(i.mutation,r,Wi.empty(),Gt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,at()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=at()){const r=Fa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=Xc();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=Fa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,at())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=zs();const l=dd(),c=(function(){return dd()})();return n.forEach(((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof ra)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),fd(p.mutation,f,p.mutation.getFieldMask(),Gt.now())):l.set(f.key,Wi.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>{var v;return c.set(f,new L5(p,(v=l.get(f))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=dd();let r=new Qt(((l,c)=>l-c)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||Wi.empty();p=c.applyToLocalView(f,p),i.set(d,p);const v=(r.get(c.batchId)||at()).add(d);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,v=GN();p.forEach((T=>{if(!o.has(T)){const b=WN(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return fe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):fe.resolve(Fa());let c=Dd,d=o;return l.next((f=>fe.forEach(f,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{d=d.insert(p,T)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,at()))).next((p=>({batchId:c,changes:HN(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((i=>{let r=Xc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=Xc();return this.indexManager.getCollectionParents(e,o).next((c=>fe.forEach(c,(d=>{const f=(function(v,T){return new nf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,ai.newInvalidDocument(p)))}));let c=Xc();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&fd(p.mutation,f,Wi.empty(),Gt.now()),Bm(n,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:is(r.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:C5(r.bundledQuery),readTime:is(r.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.overlays=new Qt(ke.comparator),this.kr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fa();return fe.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),fe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),fe.resolve()}getOverlaysForCollection(e,n,i){const r=Fa(),o=n.length+1,l=new ke(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Qt(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Fa(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=Fa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return fe.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new r5(n,i));let o=this.kr.get(n);o===void 0&&(o=at(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.qr=new Rn(On.Qr),this.$r=new Rn(On.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new On(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new On(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new ke(new Lt([])),i=new On(n,e),r=new On(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ke(new Lt([])),i=new On(n,e),r=new On(n,e+1);let o=at();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new On(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ke.comparator(e.key,n.key)||et(e.Hr,n.Hr)}static Ur(e,n){return et(e.Hr,n.Hr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Rn(On.Qr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new i5(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new On(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?B_:this.er-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new On(n,0),r=new On(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Rn(et);return n.forEach((r=>{const o=new On(r,0),l=new On(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),fe.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ke.isDocumentKey(o)||(o=o.child(""));const l=new On(new ke(o),0);let c=new Rn(et);return this.Yr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Hr)),!0)}),l),fe.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){bt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return fe.forEach(n.mutations,(r=>{const o=new On(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new On(n,0),r=this.Yr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.ni=e,this.docs=(function(){return new Qt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(e,n){let i=zs();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ai.newInvalidDocument(r))})),fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=zs();const l=n.path,c=new ke(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||v3(y3(p),i)<=0||(r.has(p.key)||Bm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Fe(9500)}ri(e,n){return fe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new H5(this)}getSize(e){return fe.resolve(this.size)}}class H5 extends V5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),fe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.persistence=e,this.ii=new il((n=>H_(n)),G_),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new W_,this.targetCount=0,this._i=Eu.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),fe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Eu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.hr(n),fe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),fe.waitFor(o).next((()=>r))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return fe.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),fe.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return fe.resolve(i)}containsKey(e,n){return fe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Vm(0),this.ci=!1,this.ci=!0,this.li=new B5,this.referenceDelegate=e(this),this.hi=new G5(this),this.indexManager=new I5,this.remoteDocumentCache=(function(r){return new q5(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new x5(n),this.Ti=new U5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new z5(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){Se("MemoryPersistence","Starting transaction:",e);const r=new j5(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return fe.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class j5 extends T3{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.Ai=new W_,this.Ri=null}static Vi(e){return new X_(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),fe.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.mi,(i=>{const r=ke.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,ze.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return fe.or([()=>fe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Wp{constructor(e,n){this.persistence=e,this.gi=new il((i=>b3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=k5(this,n)}static Vi(e,n){return new Wp(e,n)}Ii(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return fe.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?fe.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,ze.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yp(e.data.value)),n}Sr(e,n,i){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return fe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=at(),r=at();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Q_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return AL()?8:E3(ci())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new $5;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Jl()<=ot.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Jl()<=ot.DEBUG&&Se("QueryEngine","Query:",Wl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Jl()<=ot.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):fe.resolve())}ps(e,n){if(tx(n))return fe.resolve(null);let i=ns(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=T0(n,null,"F"),i=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=at(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.bs(n,c);return this.Ds(n,f,l,d.readTime)?this.ps(e,T0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ys(e,n,i,r){return tx(n)||r.isEqual(ze.min())?fe.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?fe.resolve(null):(Jl()<=ot.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wl(n)),this.vs(e,l,n,g3(r,Dd)).next((c=>c)))}))}bs(e,n){let i=new Rn(zN(e));return n.forEach(((r,o)=>{Bm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return Jl()<=ot.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Wl(n)),this.gs.getDocumentsMatchingQuery(e,n,$o.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="LocalStore",Y5=3e8;class J5{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Qt(et),this.Ms=new il((o=>H_(o)),G_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function W5(t,e,n,i){return new J5(t,e,n,i)}async function cP(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let d=at();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function X5(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,p){const v=f.batch,T=v.keys();let b=fe.resolve();return T.forEach((C=>{b=b.next((()=>p.getEntry(d,C))).next((N=>{const D=f.docVersions.get(C);bt(D!==null,48541),N.version.compareTo(D)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=at();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function dP(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function Q5(t,e){const n=Ge(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Jn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(v,b),(function(N,D,O){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Y5?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(T,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let d=zs(),f=at();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(Z5(o,l,e.documentUpdates).next((p=>{d=p.Ls,f=p.ks}))),!i.isEqual(ze.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return fe.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Fs=r,o)))}function Z5(t,e,n){let i=at(),r=at();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=zs();return n.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual(ze.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Se(Z_,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ls:l,ks:r}}))}function e6(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=B_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function t6(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,fe.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Oo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function A0(t,e,n){const i=Ge(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Mu(l))throw l;Se(Z_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function px(t,e,n){const i=Ge(t);let r=ze.min(),o=at();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=Ge(d),T=v.Ms.get(p);return T!==void 0?fe.resolve(v.Fs.get(T)):v.hi.getTargetData(f,p)})(i,l,ns(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:ze.min(),n?o:at()))).next((c=>(n6(i,q3(e),c),{documents:c,qs:o})))))}function n6(t,e,n){let i=t.xs.get(e)||ze.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class mx{constructor(){this.activeTargetIds=Y3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i6{constructor(){this.Fo=new mx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new mx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="ConnectivityMonitor";class yx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Se(gx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Se(gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function x0(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="RestConnection",s6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Hp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=x0(),c=this.Go(e,n.toUriEncodedString());Se(Nv,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:f}=new URL(c),p=Gs(f);return this.jo(e,c,d,i,p).then((v=>(Se(Nv,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw jo(Nv,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=s6[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class l6 extends o6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=x0();return new Promise(((c,d)=>{const f=new hN;f.setWithCredentials(!0),f.listenOnce(pN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case gp.NO_ERROR:const v=f.getResponseJson();Se(ni,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case gp.TIMEOUT:Se(ni,`RPC '${e}' ${l} timed out`),d(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:const T=f.getStatus();if(Se(ni,`RPC '${e}' ${l} failed with status:`,T,"response text:",f.getResponseText()),T>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const N=(function(O){const k=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(k)>=0?k:ce.UNKNOWN})(C.status);d(new Te(N,C.message))}else d(new Te(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Se(ni,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);Se(ni,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=x0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=yN(),c=gN(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");Se(ni,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);this.T_(v);let T=!1,b=!1;const C=new a6({Ho:D=>{b?Se(ni,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(T||(Se(ni,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),Se(ni,`RPC '${e}' stream ${r} sending:`,D),v.send(D))},Yo:()=>v.close()}),N=(D,O,k)=>{D.listen(O,(F=>{try{k(F)}catch($){setTimeout((()=>{throw $}),0)}}))};return N(v,Wc.EventType.OPEN,(()=>{b||(Se(ni,`RPC '${e}' stream ${r} transport opened.`),C.s_())})),N(v,Wc.EventType.CLOSE,(()=>{b||(b=!0,Se(ni,`RPC '${e}' stream ${r} transport closed`),C.__(),this.I_(v))})),N(v,Wc.EventType.ERROR,(D=>{b||(b=!0,jo(ni,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),C.__(new Te(ce.UNAVAILABLE,"The operation could not be completed")))})),N(v,Wc.EventType.MESSAGE,(D=>{var O;if(!b){const k=D.data[0];bt(!!k,16349);const F=k,$=(F==null?void 0:F.error)||((O=F[0])===null||O===void 0?void 0:O.error);if($){Se(ni,`RPC '${e}' stream ${r} received error:`,$);const K=$.status;let H=(function(P){const V=Sn[P];if(V!==void 0)return QN(V)})(K),I=$.message;H===void 0&&(H=ce.INTERNAL,I="Unknown error status: "+K+" with message "+$.message),b=!0,C.__(new Te(H,I)),v.close()}else Se(ni,`RPC '${e}' stream ${r} received:`,k),C.a_(k)}})),N(c,mN.STAT_EVENT,(D=>{D.stat===h0.PROXY?Se(ni,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===h0.NOPROXY&&Se(ni,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.o_()}),0),C}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Pv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return new f5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&Se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="PersistentStream";class hP{constructor(e,n,i,r,o,l,c,d){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Bs(n.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new Te(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Se(vx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Se(vx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class u6 extends hP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=m5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ze.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?is(l.readTime):ze.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=w0(this.serializer),n.addTarget=(function(o,l){let c;const d=l.target;if(c=v0(d)?{documents:v5(o,d)}:{query:_5(o,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=tP(o,l.resumeToken);const f=E0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(ze.min())>0){c.readTime=Jp(o,l.snapshotVersion.toTimestamp());const f=E0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=E5(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=w0(this.serializer),n.removeTarget=e,this.k_(n)}}class c6 extends hP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=y5(e.writeResults,e.commitTime),i=is(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=w0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>g5(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{}class f6 extends d6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,S0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ce.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,S0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ce.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class h6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Bs(n),this._a=!1):Se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="RemoteStore";class p6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{rl(this)&&(Se(Qa,"Restarting streams for network reachability change."),await(async function(d){const f=Ge(d);f.Ia.add(4),await of(f),f.Aa.set("Unknown"),f.Ia.delete(4),await jm(f)})(this))}))})),this.Aa=new h6(i,r)}}async function jm(t){if(rl(t))for(const e of t.da)await e(!0)}async function of(t){for(const e of t.da)await e(!1)}function pP(t,e){const n=Ge(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),iT(n)?nT(n):ku(n).x_()&&tT(n,e))}function eT(t,e){const n=Ge(t),i=ku(n);n.Ta.delete(e),i.x_()&&mP(n,e),n.Ta.size===0&&(i.x_()?i.B_():rl(n)&&n.Aa.set("Unknown"))}function tT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ku(t).H_(e)}function mP(t,e){t.Ra.$e(e),ku(t).Y_(e)}function nT(t){t.Ra=new l5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ku(t).start(),t.Aa.aa()}function iT(t){return rl(t)&&!ku(t).M_()&&t.Ta.size>0}function rl(t){return Ge(t).Ia.size===0}function gP(t){t.Ra=void 0}async function m6(t){t.Aa.set("Online")}async function g6(t){t.Ta.forEach(((e,n)=>{tT(t,e)}))}async function y6(t,e){gP(t),iT(t)?(t.Aa.la(e),nT(t)):t.Aa.set("Unknown")}async function v6(t,e,n){if(t.Aa.set("Online"),e instanceof eP&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){Se(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xp(t,i)}else if(e instanceof Tp?t.Ra.Ye(e):e instanceof ZN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ze.min()))try{const i=await dP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ta.get(f);p&&o.Ta.set(f,p.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(Jn.EMPTY_BYTE_STRING,p.snapshotVersion)),mP(o,d);const v=new Oo(p.target,d,f,p.sequenceNumber);tT(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){Se(Qa,"Failed to raise snapshot:",i),await Xp(t,i)}}async function Xp(t,e,n){if(!Mu(e))throw e;t.Ia.add(1),await of(t),t.Aa.set("Offline"),n||(n=()=>dP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(Qa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await jm(t)}))}function yP(t,e){return e().catch((n=>Xp(t,n,e)))}async function $m(t){const e=Ge(t),n=Wo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:B_;for(;_6(e);)try{const r=await e6(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,T6(e,r)}catch(r){await Xp(e,r)}vP(e)&&_P(e)}function _6(t){return rl(t)&&t.Pa.length<10}function T6(t,e){t.Pa.push(e);const n=Wo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function vP(t){return rl(t)&&!Wo(t).M_()&&t.Pa.length>0}function _P(t){Wo(t).start()}async function E6(t){Wo(t).na()}async function S6(t){const e=Wo(t);for(const n of t.Pa)e.X_(n.mutations)}async function b6(t,e,n){const i=t.Pa.shift(),r=K_.from(i,e,n);await yP(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await $m(t)}async function w6(t,e){e&&Wo(t).Z_&&await(async function(i,r){if((function(l){return o5(l)&&l!==ce.ABORTED})(r.code)){const o=i.Pa.shift();Wo(i).N_(),await yP(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await $m(i)}})(t,e),vP(t)&&_P(t)}async function _x(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Se(Qa,"RemoteStore received new credentials");const i=rl(n);n.Ia.add(3),await of(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await jm(n)}async function A6(t,e){const n=Ge(t);e?(n.Ia.delete(2),await jm(n)):e||(n.Ia.add(2),await of(n),n.Aa.set("Unknown"))}function ku(t){return t.Va||(t.Va=(function(n,i,r){const o=Ge(n);return o.ia(),new u6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:m6.bind(null,t),e_:g6.bind(null,t),n_:y6.bind(null,t),J_:v6.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),iT(t)?nT(t):t.Aa.set("Unknown")):(await t.Va.stop(),gP(t))}))),t.Va}function Wo(t){return t.ma||(t.ma=(function(n,i,r){const o=Ge(n);return o.ia(),new c6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:E6.bind(null,t),n_:w6.bind(null,t),ea:S6.bind(null,t),ta:b6.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await $m(t)):(await t.ma.stop(),t.Pa.length>0&&(Se(Qa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new rT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sT(t,e){if(Bs("AsyncQueue",`${e}: ${t}`),Mu(t))return new Te(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{static emptySet(e){return new cu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ke.comparator(n.key,i.key):(n,i)=>ke.comparator(n.key,i.key),this.keyedMap=Xc(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new cu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.fa=new Qt(ke.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Su{constructor(e,n,i,r,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Su(e,n,cu.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class C6{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=Ge(n),o=r.queries;r.queries=Ex(),o.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Te(ce.ABORTED,"Firestore shutting down"))}}function Ex(){return new il((t=>BN(t)),Fm)}async function TP(t,e){const n=Ge(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new x6,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=sT(l,`Initialization of query '${Wl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&oT(n)}async function EP(t,e){const n=Ge(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function I6(t,e){const n=Ge(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&oT(n)}function R6(t,e,n){const i=Ge(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function oT(t){t.Da.forEach((e=>{e.next()}))}var C0,Sx;(Sx=C0||(C0={})).Fa="default",Sx.Cache="cache";class SP{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Su(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==C0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.key=e}}class wP{constructor(e){this.key=e}}class N6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=zN(e),this.eu=new cu(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Tx,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),b=Bm(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;T&&b?T.data.isEqual(b.data)?C!==N&&(i.track({type:3,doc:b}),D=!0):this.iu(T,b)||(i.track({type:2,doc:b}),D=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),D=!0):T&&!b&&(i.track({type:1,doc:T}),D=!0,(d||f)&&(c=!0)),D&&(b?(l=l.add(b),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(b,C){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:D})}};return N(b)-N(C)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,f=d!==this.Ya;return this.Ya=d,l.length!==0||f?{snapshot:new Su(this.query,e.eu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new wP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new bP(i))})),n}uu(e){this.Ha=e.qs,this.Za=at();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Su.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const aT="SyncEngine";class P6{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class D6{constructor(e){this.key=e,this.lu=!1}}class M6{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new il((c=>BN(c)),Fm),this.Tu=new Map,this.Iu=new Set,this.du=new Qt(ke.comparator),this.Eu=new Map,this.Au=new W_,this.Ru={},this.Vu=new Map,this.mu=Eu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function k6(t,e,n=!0){const i=NP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await AP(i,e,n,!0),r}async function V6(t,e){const n=NP(t);await AP(n,e,!0,!1)}async function AP(t,e,n,i){const r=await t6(t.localStore,ns(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await L6(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&pP(t.remoteStore,r),c}async function L6(t,e,n,i,r){t.gu=(v,T,b)=>(async function(N,D,O,k){let F=D.view.nu(O);F.Ds&&(F=await px(N.localStore,D.query,!1).then((({documents:I})=>D.view.nu(I,F))));const $=k&&k.targetChanges.get(D.targetId),K=k&&k.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(F,N.isPrimaryClient,$,K);return wx(N,D.targetId,H._u),H.snapshot})(t,v,T,b);const o=await px(t.localStore,e,!0),l=new N6(e,o.qs),c=l.nu(o.documents),d=sf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,d);wx(t,n,f._u);const p=new P6(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function O6(t,e,n){const i=Ge(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!Fm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await A0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&eT(i.remoteStore,r.targetId),I0(i,r.targetId)})).catch(Du)):(I0(i,r.targetId),await A0(i.localStore,r.targetId,!0))}async function U6(t,e){const n=Ge(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),eT(n.remoteStore,i.targetId))}async function F6(t,e,n){const i=$6(t);try{const r=await(function(l,c){const d=Ge(l),f=Gt.now(),p=c.reduce(((b,C)=>b.add(C.key)),at());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=zs(),N=at();return d.Os.getEntries(b,p).next((D=>{C=D,C.forEach(((O,k)=>{k.isValidDocument()||(N=N.add(O))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,C))).next((D=>{v=D;const O=[];for(const k of c){const F=t5(k,v.get(k.key).overlayedDocument);F!=null&&O.push(new ra(k.key,F,DN(F.value.mapValue),Or.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,O,c)})).next((D=>{T=D;const O=D.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(b,D.batchId,O)}))})).then((()=>({batchId:T.batchId,changes:HN(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new Qt(et)),f=f.insert(c,d),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,n),await af(i,r.changes),await $m(i.remoteStore)}catch(r){const o=sT(r,"Failed to persist write");n.reject(o)}}async function xP(t,e){const n=Ge(t);try{const i=await Q5(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?bt(l.lu,14607):r.removedDocuments.size>0&&(bt(l.lu,42227),l.lu=!1))})),await af(n,i,e)}catch(i){await Du(i)}}function bx(t,e,n){const i=Ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const d=Ge(l);d.onlineState=c;let f=!1;d.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(f=!0)})),f&&oT(d)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function B6(t,e,n){const i=Ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new Qt(ke.comparator);l=l.insert(o,ai.newNoDocument(o,ze.min()));const c=at().add(o),d=new Hm(ze.min(),new Map,new Qt(et),l,c);await xP(i,d),i.du=i.du.remove(o),i.Eu.delete(e),lT(i)}else await A0(i.localStore,e,!1).then((()=>I0(i,e,n))).catch(Du)}async function z6(t,e){const n=Ge(t),i=e.batch.batchId;try{const r=await X5(n.localStore,e);IP(n,i,null),CP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await af(n,r)}catch(r){await Du(r)}}async function q6(t,e,n){const i=Ge(t);try{const r=await(function(l,c){const d=Ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next((v=>(bt(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);IP(i,e,n),CP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await af(i,r)}catch(r){await Du(r)}}function CP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function IP(t,e,n){const i=Ge(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function I0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||RP(t,i)}))}function RP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(eT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),lT(t))}function wx(t,e,n){for(const i of n)i instanceof bP?(t.Au.addReference(i.key,e),H6(t,i)):i instanceof wP?(Se(aT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||RP(t,i.key)):Fe(19791,{yu:i})}function H6(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Se(aT,"New document in limbo: "+n),t.Iu.add(i),lT(t))}function lT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ke(Lt.fromString(e)),i=t.mu.next();t.Eu.set(i,new D6(n)),t.du=t.du.insert(n,i),pP(t.remoteStore,new Oo(ns(Um(n.path)),i,"TargetPurposeLimboResolution",Vm.ue))}}async function af(t,e,n){const i=Ge(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=Q_.Es(d.targetId,f);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(d,f){const p=Ge(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(f,(T=>fe.forEach(T.Is,(b=>p.persistence.referenceDelegate.addReference(v,T.targetId,b))).next((()=>fe.forEach(T.ds,(b=>p.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))))))}catch(v){if(!Mu(v))throw v;Se(Z_,"Failed to update sequence numbers: "+v)}for(const v of f){const T=v.targetId;if(!v.fromCache){const b=p.Fs.get(T),C=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(C);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function G6(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Se(aT,"User change. New user:",e.toKey());const i=await cP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Te(ce.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await af(n,i.Bs)}}function j6(t,e){const n=Ge(t),i=n.Eu.get(e);if(i&&i.lu)return at().add(i.key);{let r=at();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function NP(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B6.bind(null,e),e.hu.J_=I6.bind(null,e.eventManager),e.hu.pu=R6.bind(null,e.eventManager),e}function $6(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q6.bind(null,e),e}class Qp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return W5(this.persistence,new K5,e.initialUser,this.serializer)}Du(e){return new uP(X_.Vi,this.serializer)}bu(e){return new i6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qp.provider={build:()=>new Qp};class K6 extends Qp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){bt(this.persistence.referenceDelegate instanceof Wp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new D5(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new uP((i=>Wp.Vi(i,n)),this.serializer)}}class R0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=G6.bind(null,this.syncEngine),await A6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C6})()}createDatastore(e){const n=Gm(e.databaseInfo.databaseId),i=(function(o){return new l6(o)})(e.databaseInfo);return(function(o,l,c,d){return new f6(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new p6(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>bx(this.syncEngine,n,0)),(function(){return yx.C()?new yx:new r6})())}createSyncEngine(e,n){return(function(r,o,l,c,d,f,p){const v=new M6(r,o,l,c,d,f);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=Ge(r);Se(Qa,"RemoteStore shutting down."),o.Ia.add(5),await of(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="FirestoreClient";class Y6{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=oi.UNAUTHENTICATED,this.clientId=F_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Se(Xo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Se(Xo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=sT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Dv(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Xo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await cP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{jo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Se("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{jo("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function Ax(t,e){t.asyncQueue.verifyOperationInProgress();const n=await J6(t);Se(Xo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>_x(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>_x(e.remoteStore,r))),t._onlineComponents=e}async function J6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Xo,"Using user provided OfflineComponentProvider");try{await Dv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Dv(t,new Qp)}}else Se(Xo,"Using default OfflineComponentProvider"),await Dv(t,new K6(void 0));return t._offlineComponents}async function DP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Xo,"Using user provided OnlineComponentProvider"),await Ax(t,t._uninitializedComponentsProvider._online)):(Se(Xo,"Using default OnlineComponentProvider"),await Ax(t,new R0))),t._onlineComponents}function W6(t){return DP(t).then((e=>e.syncEngine))}async function N0(t){const e=await DP(t),n=e.eventManager;return n.onListen=k6.bind(null,e.syncEngine),n.onUnlisten=O6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U6.bind(null,e.syncEngine),n}function X6(t,e,n={}){const i=new qo;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const p=new PP({next:T=>{p.Ou(),l.enqueueAndForget((()=>EP(o,v)));const b=T.docs.has(c);!b&&T.fromCache?f.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&d&&d.source==="server"?f.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),v=new SP(Um(c.path),p,{includeMetadataChanges:!0,ka:!0});return TP(o,v)})(await N0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="firestore.googleapis.com",Cx=!0;class Ix{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kP,this.ssl=Cx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N5)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Km{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new o3;switch(i.type){case"firstParty":return new c3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=xx.get(n);i&&(Se("ComponentProvider","Removing Datastore"),xx.delete(n),i.terminate())})(this),Promise.resolve()}}function Q6(t,e,n,i={}){var r;t=ts(t,Km);const o=Gs(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(Im(`https://${d}`),Rm("Firestore",!0)),l.host!==kP&&l.host!==d&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!Ya(f,c)&&(t._setSettings(f),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=oi.MOCK_USER;else{p=C1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new oi(T)}t._authCredentials=new a3(new _N(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vu(this.firestore,e,this._query)}}class gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(tf(n,gn._jsonSchema))return new gn(e,i||null,new ke(Lt.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:wn("string",gn._jsonSchemaVersion),referencePath:wn("string")};class Ho extends Vu{constructor(e,n,i){super(e,n,Um(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new ke(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function Lu(t,e,...n){if(t=Mt(t),EN("collection","path",e),t instanceof Km){const i=Lt.fromString(e,...n);return zA(i),new Ho(t,null,i)}{if(!(t instanceof gn||t instanceof Ho))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Lt.fromString(e,...n));return zA(i),new Ho(t.firestore,null,i)}}function Ou(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=F_.newId()),EN("doc","path",e),t instanceof Km){const i=Lt.fromString(e,...n);return BA(i),new gn(t,null,new ke(i))}{if(!(t instanceof gn||t instanceof Ho))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Lt.fromString(e,...n));return BA(i),new gn(t.firestore,t instanceof Ho?t.converter:null,new ke(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="AsyncQueue";class Nx{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fP(this,"async_queue_retry"),this.oc=()=>{const i=Pv();i&&Se(Rx,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Pv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Pv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new qo;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Mu(e))throw e;Se(Rx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Bs("INTERNAL UNHANDLED ERROR: ",Px(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=rT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Fe(47125,{hc:Px(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Px(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Za extends Km{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Nx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nx(e),this._firestoreClient=void 0,await e}}}function Z6(t,e){const n=typeof t=="object"?t:Nm(),i=typeof t=="string"?t:Hp,r=Wd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=w_("firestore");o&&Q6(r,...o)}return r}function uT(t){if(t._terminated)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eF(t),t._firestoreClient}function eF(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,d,f,p){return new x3(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,MP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Y6(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(Jn.fromBase64String(e))}catch(n){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tf(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:wn("string",vr._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rs._jsonSchemaVersion}}static fromJSON(e){if(tf(e,rs._jsonSchema))return new rs(e.latitude,e.longitude)}}rs._jsonSchemaVersion="firestore/geoPoint/1.0",rs._jsonSchema={type:wn("string",rs._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tf(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ss(e.vectorValues);throw new Te(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:wn("string",ss._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/^__.*__$/;class nF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new rf(e,this.data,n,this.fieldTransforms)}}class VP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ra(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:t})}}class dT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new dT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(LP(this.Ec)&&tF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class iF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Gm(e)}Dc(e,n,i,r=!1){return new dT({Ec:e,methodName:n,bc:i,path:Yn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fT(t){const e=t._freezeSettings(),n=Gm(t._databaseId);return new iF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rF(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);hT("Data must be an object, but it was:",l,i);const c=OP(i,l);let d,f;if(o.merge)d=new Wi(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=P0(e,v,n);if(!l.contains(T))throw new Te(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);FP(p,T)||p.push(T)}d=new Wi(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new nF(new Vi(c),d,f)}class Jm extends cT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jm}}function sF(t,e,n,i){const r=t.Dc(1,e,n);hT("Data must be an object, but it was:",r,i);const o=[],l=Vi.empty();ia(i,((d,f)=>{const p=pT(e,d,n);f=Mt(f);const v=r.gc(p);if(f instanceof Jm)o.push(p);else{const T=lf(f,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Wi(o);return new VP(l,c,r.fieldTransforms)}function oF(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[P0(e,i,n)],d=[r];if(o.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(P0(e,o[T])),d.push(o[T+1]);const f=[],p=Vi.empty();for(let T=c.length-1;T>=0;--T)if(!FP(f,c[T])){const b=c[T];let C=d[T];C=Mt(C);const N=l.gc(b);if(C instanceof Jm)f.push(b);else{const D=lf(C,N);D!=null&&(f.push(b),p.set(b,D))}}const v=new Wi(f);return new VP(p,v,l.fieldTransforms)}function aF(t,e,n,i=!1){return lf(n,t.Dc(i?4:3,e))}function lf(t,e){if(UP(t=Mt(t)))return hT("Unsupported field value:",e,t),OP(t,e);if(t instanceof cT)return(function(i,r){if(!LP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let d=lf(c,r.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return J3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Gt.fromDate(i);return{timestampValue:Jp(r.serializer,o)}}if(i instanceof Gt){const o=new Gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jp(r.serializer,o)}}if(i instanceof rs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vr)return{bytesValue:tP(r.serializer,i._byteString)};if(i instanceof gn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:J_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ss)return(function(l,c){return{mapValue:{fields:{[NN]:{stringValue:PN},[Gp]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return j_(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${km(i)}`)})(t,e)}function OP(t,e){const n={};return wN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,((i,r)=>{const o=lf(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function UP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof rs||t instanceof vr||t instanceof gn||t instanceof cT||t instanceof ss)}function hT(t,e,n){if(!UP(n)||!SN(n)){const i=km(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function P0(t,e,n){if((e=Mt(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return pT(t,e);throw Zp("Field path arguments must be of type string or ",t,!1,void 0,n)}const lF=new RegExp("[~\\*/\\[\\]]");function pT(t,e,n){if(e.search(lF)>=0)throw Zp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ym(...e.split("."))._internalPath}catch{throw Zp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zp(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new Te(ce.INVALID_ARGUMENT,c+t+d)}function FP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uF extends BP{data(){return super.data()}}function zP(t,e){return typeof e=="string"?pT(t,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mT{}class dF extends mT{}function gT(t,e,...n){let i=[];e instanceof mT&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof vT)).length,c=o.filter((d=>d instanceof yT)).length;if(l>1||l>0&&c>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class yT extends dF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yT(e,n,i)}_apply(e){const n=this._parse(e);return qP(e._query,n),new Vu(e.firestore,e.converter,_0(e._query,n))}_parse(e){const n=fT(e.firestore);return(function(o,l,c,d,f,p,v){let T;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){kx(v,p);const C=[];for(const N of v)C.push(Mx(d,o,N));T={arrayValue:{values:C}}}else T=Mx(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||kx(v,p),T=aF(c,l,v,p==="in"||p==="not-in");return bn.create(f,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vT extends mT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vT(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const d of c)qP(l,d),l=_0(l,d)})(e._query,n),new Vu(e.firestore,e.converter,_0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Mx(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FN(e)&&n.indexOf("/")!==-1)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Lt.fromString(n));if(!ke.isDocumentKey(i))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JA(t,new ke(i))}if(n instanceof gn)return JA(t,n._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${km(n)}.`)}function kx(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fF{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ia(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Gp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>mn(l.doubleValue)));return new ss(o)}convertGeoPoint(e){return new rs(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Om(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){const n=Ko(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Lt.fromString(e);bt(aP(i),9688,{name:e});const r=new kd(i.get(1),i.get(3)),o=new ke(i.popFirst(5));return r.isEqual(n)||Bs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Zc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qa extends BP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(zP("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",qa._jsonSchema={type:wn("string",qa._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class Ep extends qa{data(e={}){return super.data(e)}}class du{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Zc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ep(this._firestore,this._userDataWriter,i.key,i,new Zc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const d=new Ep(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Zc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new Ep(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Zc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:pF(c.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=du._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=F_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){t=ts(t,gn);const e=ts(t.firestore,Za);return X6(uT(e),t._key).then((n=>GP(e,t,n)))}du._jsonSchemaVersion="firestore/querySnapshot/1.0",du._jsonSchema={type:wn("string",du._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class HP extends fF{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function gF(t,e,n,...i){t=ts(t,gn);const r=ts(t.firestore,Za),o=fT(r);let l;return l=typeof(e=Mt(e))=="string"||e instanceof Ym?oF(o,"updateDoc",t._key,e,n,i):sF(o,"updateDoc",t._key,e),ST(r,[l.toMutation(t._key,Or.exists(!0))])}function _T(t){return ST(ts(t.firestore,Za),[new $_(t._key,Or.none())])}function TT(t,e){const n=ts(t.firestore,Za),i=Ou(t),r=hF(t.converter,e);return ST(n,[rF(fT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Or.exists(!1))]).then((()=>i))}function ET(t,...e){var n,i,r;t=Mt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Dx(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Dx(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(t instanceof gn)f=ts(t.firestore,Za),p=Um(t._key.path),d={next:v=>{e[l]&&e[l](GP(f,t,v))},error:e[l+1],complete:e[l+2]};else{const v=ts(t,Vu);f=ts(v.firestore,Za),p=v._query;const T=new HP(f);d={next:b=>{e[l]&&e[l](new du(f,T,v,b))},error:e[l+1],complete:e[l+2]},cF(t._query)}return(function(T,b,C,N){const D=new PP(N),O=new SP(b,D,C);return T.asyncQueue.enqueueAndForget((async()=>TP(await N0(T),O))),()=>{D.Ou(),T.asyncQueue.enqueueAndForget((async()=>EP(await N0(T),O)))}})(uT(f),p,c,d)}function ST(t,e){return(function(i,r){const o=new qo;return i.asyncQueue.enqueueAndForget((async()=>F6(await W6(i),r,o))),o.promise})(uT(t),e)}function GP(t,e,n){const i=n.docs.get(e._key),r=new HP(t);return new qa(t,r,e._key,i,new Zc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Pu=r})(nl),Go(new Os("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new Za(new l3(i.getProvider("auth-internal")),new d3(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(f.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),_r(VA,LA,e),_r(VA,LA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="firebasestorage.googleapis.com",$P="storageBucket",yF=120*1e3,vF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Fr{constructor(e,n,i=0){super(Mv(e),`Firebase Storage: ${n} (${Mv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function Mv(t){return"storage/"+t}function bT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(ln.UNKNOWN,t)}function _F(t){return new un(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TF(t){return new un(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(ln.UNAUTHENTICATED,t)}function SF(){return new un(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bF(t){return new un(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wF(){return new un(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AF(){return new un(ln.CANCELED,"User canceled the upload/download.")}function xF(t){return new un(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function CF(t){return new un(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function IF(){return new un(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$P+"' property when initializing the app?")}function RF(){return new un(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NF(){return new un(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PF(t){return new un(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function D0(t){return new un(ln.INVALID_ARGUMENT,t)}function KP(){return new un(ln.APP_DELETED,"The Firebase app was deleted.")}function DF(t){return new un(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hd(t,e){return new un(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bc(t){throw new un(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Xi.makeFromUrl(e,n)}catch{return new Xi(e,"")}if(i.path==="")return i;throw CF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),d={bucket:1,path:3};function f($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),C={bucket:1,path:3},N=n===jP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",O=new RegExp(`^https?://${N}/${r}/${D}`,"i"),F=[{regex:c,indices:d,postModify:o},{regex:b,indices:C,postModify:f},{regex:O,indices:{bucket:1,path:2},postModify:f}];for(let $=0;$<F.length;$++){const K=F[$],H=K.regex.exec(e);if(H){const I=H[K.indices.bucket];let R=H[K.indices.path];R||(R=""),i=new Xi(I,R),K.postModify(i);break}}if(i==null)throw xF(e);return i}}class MF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...D){f||(f=!0,e.apply(null,D))}function v(D){r=setTimeout(()=>{r=null,t(b,d())},D)}function T(){o&&clearTimeout(o)}function b(D,...O){if(f){T();return}if(D){T(),p.call(null,D,...O);return}if(d()||l){T(),p.call(null,D,...O);return}i<64&&(i*=2);let F;c===1?(c=2,F=0):F=(i+Math.random())*1e3,v(F)}let C=!1;function N(D){C||(C=!0,T(),!f&&(r!==null?(D||(c=2),clearTimeout(r),v(0)):D||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function VF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){return t!==void 0}function OF(t){return typeof t=="object"&&!Array.isArray(t)}function wT(t){return typeof t=="string"||t instanceof String}function Vx(t){return AT()&&t instanceof Blob}function AT(){return typeof Blob<"u"}function Lx(t,e,n,i){if(i<e)throw D0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw D0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function YP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n,i,r,o,l,c,d,f,p,v,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Hh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ha.NO_ERROR,d=o.getStatus();if(!c||UF(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===Ha.ABORT;i(!1,new Hh(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new Hh(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());LF(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=bT();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(r.canceled){const d=this.appDelete_?KP():AF();l(d)}else{const d=wF();l(d)}};this.canceled_?n(!1,new Hh(!1,null,!0)):this.backoffId_=kF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function BF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GF(t,e,n,i,r,o,l=!0,c=!1){const d=YP(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return qF(p,e),BF(p,n),zF(p,o),HF(p,i),new FF(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $F(...t){const e=jF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(AT())return new Blob(t);throw new un(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){if(typeof atob>"u")throw PF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kv{constructor(e,n){this.data=e,this.contentType=n||null}}function JP(t,e){switch(t){case kr.RAW:return new kv(WP(e));case kr.BASE64:case kr.BASE64URL:return new kv(XP(t,e));case kr.DATA_URL:return new kv(WF(e),XF(e))}throw bT()}function WP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function JF(t){let e;try{e=decodeURIComponent(t)}catch{throw hd(kr.DATA_URL,"Malformed data URL.")}return WP(e)}function XP(t,e){switch(t){case kr.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw hd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case kr.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw hd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=YF(e)}catch(r){throw r.message.includes("polyfill")?r:hd(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class QP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hd(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=QF(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function WF(t){const e=new QP(t);return e.base64?XP(kr.BASE64,e.rest):JF(e.rest)}function XF(t){return new QP(t).contentType}function QF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){let i=0,r="";Vx(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Vx(this.data_)){const i=this.data_,r=KF(i,e,n);return r===null?null:new Mo(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Mo(i,!0)}}static getBlob(...e){if(AT()){const n=e.map(i=>i instanceof Mo?i.data_:i);return new Mo($F.apply(null,n))}else{const n=e.map(l=>wT(l)?JP(kr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Mo(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){let e;try{e=JSON.parse(t)}catch{return null}return OF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eB(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function eD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t,e){return e}class Ei{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||tB}}let Gh=null;function nB(t){return!wT(t)||t.length<2?t:eD(t)}function tD(){if(Gh)return Gh;const t=[];t.push(new Ei("bucket")),t.push(new Ei("generation")),t.push(new Ei("metageneration")),t.push(new Ei("name","fullPath",!0));function e(o,l){return nB(l)}const n=new Ei("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ei("size");return r.xform=i,t.push(r),t.push(new Ei("timeCreated")),t.push(new Ei("updated")),t.push(new Ei("md5Hash",null,!0)),t.push(new Ei("cacheControl",null,!0)),t.push(new Ei("contentDisposition",null,!0)),t.push(new Ei("contentEncoding",null,!0)),t.push(new Ei("contentLanguage",null,!0)),t.push(new Ei("contentType",null,!0)),t.push(new Ei("metadata","customMetadata",!0)),Gh=t,Gh}function iB(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Xi(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function rB(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return iB(i,t),i}function nD(t,e,n){const i=ZP(e);return i===null?null:rB(t,i,n)}function sB(t,e,n,i){const r=ZP(e);if(r===null||!wT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),b=xT(T,n,i),C=YP({alt:"media",token:f});return b+C})[0]}function oB(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class iD{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){if(!t)throw bT()}function aB(t,e){function n(i,r){const o=nD(t,r,e);return rD(o!==null),o}return n}function lB(t,e){function n(i,r){const o=nD(t,r,e);return rD(o!==null),sB(o,r,t.host,t._protocol)}return n}function sD(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=SF():r=EF():n.getStatus()===402?r=TF(t.bucket):n.getStatus()===403?r=bF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function uB(t){const e=sD(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=_F(t.path)),o.serverResponse=r.serverResponse,o}return n}function cB(t,e,n){const i=e.fullServerUrl(),r=xT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new iD(r,o,lB(t,n),l);return c.errorHandler=uB(e),c}function dB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=dB(null,e)),i}function hB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let $=0;$<2;$++)F=F+Math.random().toString().slice(2);return F}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=fB(e,i,r),p=oB(f,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,T=`\r
--`+d+"--",b=Mo.getBlob(v,i,T);if(b===null)throw RF();const C={name:f.fullPath},N=xT(o,t.host,t._protocol),D="POST",O=t.maxUploadRetryTime,k=new iD(N,D,aB(t,n),O);return k.urlParams=C,k.headers=l,k.body=b.uploadData(),k.errorHandler=sD(e),k}class pB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Bc("cannot .send() more than once");if(Gs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mB extends pB{initXhr(){this.xhr_.responseType="text"}}function oD(){return new mB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this._service=e,n instanceof Xi?this._location=n:this._location=Xi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new el(e,n)}get root(){const e=new Xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eD(this._location.path)}get storage(){return this._service}get parent(){const e=ZF(this._location.path);if(e===null)return null;const n=new Xi(this._location.bucket,e);return new el(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DF(e)}}function aD(t,e,n){t._throwIfRoot("uploadBytes");const i=hB(t.storage,t._location,tD(),new Mo(e,!0),n);return t.storage.makeRequestWithTokens(i,oD).then(r=>({metadata:r,ref:t}))}function gB(t,e,n=kr.RAW,i){t._throwIfRoot("uploadString");const r=JP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),aD(t,r.data,o)}function yB(t){t._throwIfRoot("getDownloadURL");const e=cB(t.storage,t._location,tD());return t.storage.makeRequestWithTokens(e,oD).then(n=>{if(n===null)throw NF();return n})}function vB(t,e){const n=eB(t._location.path,e),i=new Xi(t._location.bucket,n);return new el(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(t){return/^[A-Za-z]+:\/\//.test(t)}function TB(t,e){return new el(t,e)}function lD(t,e){if(t instanceof CT){const n=t;if(n._bucket==null)throw IF();const i=new el(n,n._bucket);return e!=null?lD(i,e):i}else return e!==void 0?vB(t,e):t}function EB(t,e){if(e&&_B(e)){if(t instanceof CT)return TB(t,e);throw D0("To use ref(service, url), the first argument must be a Storage instance.")}else return lD(t,e)}function Ox(t,e){const n=e==null?void 0:e[$P];return n==null?null:Xi.makeFromBucketSpec(n,t)}function SB(t,e,n,i={}){t.host=`${e}:${n}`;const r=Gs(e);r&&(Im(`https://${t.host}/b`),Rm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:C1(o,t.app.options.projectId))}class CT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=jP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yF,this._maxUploadRetryTime=vF,this._requests=new Set,r!=null?this._bucket=Xi.makeFromBucketSpec(r,this._host):this._bucket=Ox(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xi.makeFromBucketSpec(this._url,e):this._bucket=Ox(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new el(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new MF(KP());{const l=GF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Ux="@firebase/storage",Fx="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="storage";function bB(t,e,n){return t=Mt(t),aD(t,e,n)}function wB(t,e,n,i){return t=Mt(t),gB(t,e,n,i)}function cD(t){return t=Mt(t),yB(t)}function dD(t,e){return t=Mt(t),EB(t,e)}function AB(t=Nm(),e){t=Mt(t);const i=Wd(t,uD).getImmediate({identifier:e}),r=w_("storage");return r&&xB(i,...r),i}function xB(t,e,n,i={}){SB(t,e,n,i)}function CB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new CT(n,i,r,e,nl)}function IB(){Go(new Os(uD,CB,"PUBLIC").setMultipleInstances(!0)),_r(Ux,Fx,""),_r(Ux,Fx,"esm2017")}IB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="type.googleapis.com/google.protobuf.Int64Value",NB="type.googleapis.com/google.protobuf.UInt64Value";function fD(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function em(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>em(e));if(typeof t=="function"||typeof t=="object")return fD(t,e=>em(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case RB:case NB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bu(e)):typeof t=="function"||typeof t=="object"?fD(t,e=>bu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Fr{constructor(e,n,i){super(`${IT}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Li.prototype)}}function PB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tm(t,e){let n=PB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!Bx[l])return new Li("internal","internal");n=Bx[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=bu(r))}}catch{}return n==="ok"?null:new Li(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Si(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="us-central1",MB=/^data: (.*?)(?:\n|$)/;function kB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class VB{constructor(e,n,i,r,o=M0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new DB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=M0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function LB(t,e,n){const i=Gs(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Im(t.emulatorOrigin),Rm("Functions",!0))}function OB(t,e,n){const i=r=>FB(t,e,r,{});return i.stream=(r,o)=>zB(t,e,r,o),i}async function UB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function hD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function FB(t,e,n,i){const r=t._url(e);return BB(t,r,n,i)}async function BB(t,e,n,i){n=em(n);const r={data:n},o=await hD(t,i),l=i.timeout||7e4,c=kB(l),d=await Promise.race([UB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new Li("cancelled","Firebase Functions instance was deleted.");const f=tm(d.status,d.json);if(f)throw f;if(!d.json)throw new Li("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new Li("internal","Response is missing data field.");return{data:bu(p)}}function zB(t,e,n,i){const r=t._url(e);return qB(t,r,n,i||{})}async function qB(t,e,n,i){var r;n=em(n);const o={data:n},l=await hD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new Li("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const C=tm(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let d,f;const p=new Promise((b,C)=>{d=b,f=C});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const b=new Li("cancelled","Request was cancelled.");f(b)});const v=c.body.getReader(),T=HB(v,d,f,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:C,done:N}=await b.read();return{value:C,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function HB(t,e,n,i){const r=(l,c)=>{const d=l.match(MB);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(bu(p.result));return}if("message"in p){c.enqueue(bu(p.message));return}if("error"in p){const v=tm(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof Li){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return d();async function d(){if(i!=null&&i.aborted){const f=new Li("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new Li("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(f,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return d()}catch(f){const p=f instanceof Li?f:tm(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const zx="@firebase/functions",qx="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="auth-internal",jB="app-check-internal",$B="messaging-internal";function KB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(GB),l=n.getProvider($B),c=n.getProvider(jB);return new VB(r,o,l,c,i)};Go(new Os(IT,e,"PUBLIC").setMultipleInstances(!0)),_r(zx,qx,t),_r(zx,qx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t=Nm(),e=M0){const i=Wd(Mt(t),IT).getImmediate({identifier:e}),r=w_("functions");return r&&JB(i,...r),i}function JB(t,e,n){LB(Mt(t),e,n)}function WB(t,e,n){return OB(Mt(t),e)}KB();const XB={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Wm=N1(XB),ka=n3(Wm),QB=new Ps,Br=Z6(Wm),pD=AB(Wm),ZB=YB(Wm,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let e9,t9;function n9(){return{geminiUrl:e9,vertexUrl:t9}}function i9(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=n9();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class js{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];y(p,e.slice(o+1),n[f])}else for(const f of d)y(f,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function r9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}k0(t,r,o,0,l)}}function k0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])k0(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const v=[];for(const T of n.slice(i))T==="*"?v.push(f):v.push(T);y(l,v,p)}for(const f of c)delete l[f]}}else{const l=t;o in l&&k0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s9(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function o9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],l9(l)),e}function a9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],u9(l)),e}function l9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>c9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function u9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>d9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function c9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],y9(n)),e}function d9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],v9(n)),e}function f9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function h9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function p9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],m9(l)),e}function m9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function mD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],g9(l)),e}function g9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function y9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],RT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function v9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],RT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hx;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hx||(Hx={}));var Gx;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Gx||(Gx={}));var jx;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(jx||(jx={}));var He;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(He||(He={}));var $x;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($x||($x={}));var Kx;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Kx||(Kx={}));var Yx;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Yx||(Yx={}));var Jx;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Jx||(Jx={}));var Wx;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Wx||(Wx={}));var Xx;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Xx||(Xx={}));var Qx;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Qx||(Qx={}));var Zx;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Zx||(Zx={}));var eC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(eC||(eC={}));var tC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(tC||(tC={}));var nC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(nC||(nC={}));var iC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iC||(iC={}));var rC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rC||(rC={}));var sC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(sC||(sC={}));var oC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oC||(oC={}));var nm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(nm||(nm={}));var aC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aC||(aC={}));var lC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lC||(lC={}));var uC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uC||(uC={}));var V0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(V0||(V0={}));var cC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cC||(cC={}));var dC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dC||(dC={}));var fC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(fC||(fC={}));var hC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hC||(hC={}));var pC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pC||(pC={}));var mC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mC||(mC={}));var gC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(gC||(gC={}));var yC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(yC||(yC={}));var vC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(vC||(vC={}));var _C;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(_C||(_C={}));var TC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(TC||(TC={}));var EC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(EC||(EC={}));var SC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SC||(SC={}));var bC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bC||(bC={}));var wC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(wC||(wC={}));var AC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(AC||(AC={}));var xC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(xC||(xC={}));var CC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(CC||(CC={}));var IC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IC||(IC={}));var RC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(RC||(RC={}));var NC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(NC||(NC={}));var PC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(PC||(PC={}));var DC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(DC||(DC={}));var MC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MC||(MC={}));var kC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kC||(kC={}));var VC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(VC||(VC={}));var LC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(LC||(LC={}));var OC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(OC||(OC={}));var UC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UC||(UC={}));var FC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(FC||(FC={}));var eu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(eu||(eu={}));class L0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class zc{get text(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const v=[];for(const T of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,C]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,f+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const v of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,b]of Object.entries(v))T!=="inlineData"&&(b!==null||b!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class BC{}class zC{}class _9{}class T9{}class E9{}class S9{}class qC{}class HC{}class GC{}class b9{}class im{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new im;let r;const o=e;return n?r=a9(o):r=o9(o),Object.assign(i,r),i}}class jC{}class $C{}class KC{}class w9{}class A9{}class x9{}class NT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new NT,o=p9(e);return Object.assign(i,o),i}}class C9{}class I9{}class R9{}class YC{}class N9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class P9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class PT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new PT,o=mD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gD(t,e){const n=yt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function yD(t){return Array.isArray(t)?t.map(e=>rm(e)):[rm(t)]}function rm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vD(t){const e=rm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _D(t){const e=rm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function TD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>JC(e)):[JC(t)]}function O0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function WC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function XC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function li(t){if(t==null)throw new Error("ContentUnion is required");return O0(t)?t:{role:"user",parts:TD(t)}}function DT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=li(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=li(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>li(n)):[li(e)]}function Tr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(WC(t)||XC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[li(t)]}const e=[],n=[],i=O0(t[0]);for(const r of t){const o=O0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(WC(r)||XC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:TD(n)}),e}function D9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(He).includes(n[0].toUpperCase())?n[0].toUpperCase():He.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(He).includes(i.toUpperCase())?i.toUpperCase():He.TYPE_UNSPECIFIED})}}function fu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&D9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(He).includes(c.toUpperCase())?c.toUpperCase():He.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=fu(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}d.push(fu(f))}e[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=fu(p);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function MT(t){return fu(t)}function kT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function VT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Uu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fu(e.response));return t}function Fu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function M9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function $s(t,e){if(typeof e!="string")throw new Error("name must be a string");return M9(t,e,"cachedContents")}function ED(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function sa(t){return RT(t)}function k9(t){return t!=null&&typeof t=="object"&&"name"in t}function V9(t){return t!=null&&typeof t=="object"&&"video"in t}function L9(t){return t!=null&&typeof t=="object"&&"uri"in t}function SD(t){var e;let n;if(k9(t)&&(n=t.name),!(L9(t)&&(n=t.uri,n===void 0))&&!(V9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function bD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function wD(t){for(const e of["models","tunedModels","publisherModels"])if(O9(t,e))return t[e];return[]}function O9(t,e){return t!==null&&typeof t=="object"&&e in t}function U9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function F9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=U9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function AD(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function B9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function xD(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Bu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function CD(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ez(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function q9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function H9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Sp(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],CD(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=m(t,["metadata","model"]);d!=null&&y(e,["model"],d);const f=m(t,["metadata","output"]);return f!=null&&y(e,["dest"],z9(xD(f))),e}function U0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],CD(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(e,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],G9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],q9(xD(T)));const b=m(t,["completionStats"]);return b!=null&&y(e,["completionStats"],b),e}function G9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function j9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Tz(t,l))),y(n,["requests","requests"],o)}return n}function $9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function K9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Y9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function J9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function W9(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],X9(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function X9(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function ID(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Iz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Q9(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Z9(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],H9(B9(r))),n}function QC(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],j9(t,AD(t,r)));const o=m(e,["config"]);return o!=null&&Q9(o,n),n}function ez(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],$9(AD(t,r)));const o=m(e,["config"]);return o!=null&&Z9(o,n),n}function tz(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function nz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],uz(t,r));const o=m(e,["config"]);return o!=null&&tz(o,n),n}function iz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function rz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function sz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function oz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function az(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=DT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],lz(r,n)),r9(n,{"requests[].*":"requests[].request.*"})),n}function lz(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uz(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],az(t,r)),n}function cz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function dz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hz(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ID(li(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],MT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let q=F;Array.isArray(q)&&(q=q.map(z=>Rz(z))),y(n,["safetySettings"],q)}const $=m(e,["tools"]);if(n!==void 0&&$!=null){let q=Fu($);Array.isArray(q)&&(q=q.map(z=>Pz(Uu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],Nz(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],$s(t,H));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],kT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],_z(U)),i}function pz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>W9(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function mz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function gz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Bu(t,i)),n}function yz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function vz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function _z(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Tz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=Tr(r);Array.isArray(c)&&(c=c.map(d=>ID(d))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],hz(t,l,m(n,["request"],{}))),n}function Ez(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],pz(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function Sz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function bz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function wz(t){const e={},n=m(t,["config"]);return n!=null&&Sz(n,e),e}function Az(t){const e={},n=m(t,["config"]);return n!=null&&bz(n,e),e}function xz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Sp(l))),y(e,["batchJobs"],o)}return e}function Cz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>U0(l))),y(e,["batchJobs"],o)}return e}function Iz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],cz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],dz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],K9(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Rz(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function Nz(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],fz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function Pz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],yz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],vz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qs||(qs={}));class sl{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dz extends js{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new sl(qs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=QC(this.apiClient,e),i=n._url,r=_e("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=T,v.request=b}f.push(v)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=ez(this.apiClient,e);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>U0(p))}else{const f=QC(this.apiClient,e);return c=_e("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Sp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nz(this.apiClient,e);return o=_e("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Sp(d))}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=gz(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>U0(p))}else{const f=mz(this.apiClient,e);return c=_e("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Sp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=J9(this.apiClient,e);l=_e("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=Y9(this.apiClient,e);l=_e("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Az(e);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Cz(p),T=new YC;return Object.assign(T,v),T})}else{const f=wz(e);return c=_e("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=xz(p),T=new YC;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=rz(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>oz(p))}else{const f=iz(this.apiClient,e);return c=_e("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>sz(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ZC(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>nq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function kz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Tr(l);Array.isArray(p)&&(p=p.map(v=>ZC(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ZC(li(c)));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>rq(v))),y(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],iq(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Vz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=Tr(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],li(c));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>sq(T))),y(e,["tools"],v)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function Lz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],gD(t,i));const r=m(e,["config"]);return r!=null&&kz(r,n),n}function Oz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],gD(t,i));const r=m(e,["config"]);return r!=null&&Vz(r,n),n}function Uz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],$s(t,i)),n}function Fz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],$s(t,i)),n}function Bz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function zz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function qz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Hz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function $z(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],$s(t,i)),n}function Kz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],$s(t,i)),n}function Yz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Jz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Wz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Xz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Qz(t){const e={},n=m(t,["config"]);return n!=null&&Wz(n,e),e}function Zz(t){const e={},n=m(t,["config"]);return n!=null&&Xz(n,e),e}function eq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function tq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function nq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],qz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Hz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Mz(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function iq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Gz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function rq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Yz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Jz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function sq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>jz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function oq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function aq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function lq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],$s(t,i));const r=m(e,["config"]);return r!=null&&oq(r,n),n}function uq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],$s(t,i));const r=m(e,["config"]);return r!=null&&aq(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cq extends js{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new sl(qs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Oz(this.apiClient,e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Lz(this.apiClient,e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Kz(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=$z(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Fz(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=zz(p),T=new $C;return Object.assign(T,v),T})}else{const f=Uz(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Bz(p),T=new $C;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=uq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=lq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Zz(e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=tq(p),T=new KC;return Object.assign(T,v),T})}else{const f=Qz(e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=eq(p),T=new KC;return Object.assign(T,v),T})}}}function eI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ht(t){return this instanceof Ht?(this.v=t,this):new Ht(t)}function hu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(C){return Promise.resolve(C).then(b,v)}}function c(b,C){i[b]&&(r[b]=function(N){return new Promise(function(D,O){o.push([b,N,D,O])>1||d(b,N)})},C&&(r[b]=C(r[b])))}function d(b,C){try{f(i[b](C))}catch(N){T(o[0][3],N)}}function f(b){b.value instanceof Ht?Promise.resolve(b.value.v).then(p,v):T(o[0][2],b)}function p(b){d("next",b)}function v(b){d("throw",b)}function T(b,C){b(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function pd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof eI=="function"?eI(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dq(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:RD(n)}function RD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fq(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!RD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class hq{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new pq(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pq{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),fq(o)}async sendMessage(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await r,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const b=f?[f]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?tI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return hu(this,arguments,function*(){var l,c,d,f;const p=[];try{for(var v=!0,T=pd(e),b;b=yield Ht(T.next()),l=b.done,!l;v=!0){f=b.value,v=!1;const C=f;if(dq(C)){const N=(r=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield Ht(C)}}catch(C){c={error:C}}finally{try{!v&&!l&&(d=T.return)&&(yield Ht(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...tI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xm extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xm.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mq(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function gq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function yq(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],SD(n)),e}function vq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function _q(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],SD(n)),e}function Tq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Eq(t){const e={},n=m(t,["config"]);return n!=null&&Tq(n,e),e}function Sq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bq extends js{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new sl(qs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Eq(e);return o=_e("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Sq(d),p=new C9;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mq(e);return o=_e("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=gq(d),p=new I9;return Object.assign(p,f),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_q(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yq(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=vq(d),p=new R9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bp(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wq(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Bq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Aq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function xq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Cq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Iq(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],ND(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const $=m(t,["temperature"]);$!=null&&y(e,["temperature"],$);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Rq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Nq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Pq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],VT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],wq(li(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Fu(N);Array.isArray(H)&&(H=H.map(I=>qq(Uu(I)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],zq(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Dq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],Iq(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],ND(VT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],li(C));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Fu(N);Array.isArray(H)&&(H=H.map(I=>Hq(Uu(I)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],D);const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Mq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Pq(r,n)),n}function kq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Dq(r,n)),n}function Vq(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function Lq(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function Oq(t){const e={},n=m(t,["media"]);if(n!=null){let f=yD(n);Array.isArray(f)&&(f=f.map(p=>bp(p))),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],bp(_D(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],bp(vD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function Uq(t){const e={},n=m(t,["media"]);if(n!=null){let f=yD(n);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],_D(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],vD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function Fq(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Gq(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=m(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function Bq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Aq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],xq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],bp(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function zq(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ND(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function qq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Rq(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Nq(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function Hq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Cq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Gq(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=m(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["promptTokensDetails"],b)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["responseTokensDetails"],b)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["toolUsePromptTokensDetails"],b)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $q(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Kq(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Kq(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Yq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let o=Tr(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function Jq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function Wq(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],Xq(i)),e}function Xq(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Qm(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>oG(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Qq(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function Zq(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eH(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],li(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>VD(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],jH(o)),n}function tH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Qm(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&Zq(o),n}function nH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&eH(o,n),n}function iH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function rH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function sH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function oH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function aH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function lH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function uH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function cH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>fG(d))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&uH(l,n),n}function dH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Zm(o))),y(e,["generatedImages"],r)}return e}function fH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function pH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=DT(t,r);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&fH(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],yt(t,l)),n}function mH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=DT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&hH(o,n),n}function gH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function yH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Wq(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function vH(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function _H(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function TH(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EH(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function bH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],Qm(li(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],MT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let q=F;Array.isArray(q)&&(q=q.map(z=>hG(z))),y(n,["safetySettings"],q)}const $=m(e,["tools"]);if(n!==void 0&&$!=null){let q=Fu($);Array.isArray(q)&&(q=q.map(z=>TG(Uu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],_G(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],$s(t,H));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],kT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],WH(U)),i}function wH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],li(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],MT(O));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const $=m(e,["modelSelectionConfig"]);$!=null&&y(i,["modelConfig"],$);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let Z=K;Array.isArray(Z)&&(Z=Z.map(ae=>ae)),y(n,["safetySettings"],Z)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let Z=Fu(H);Array.isArray(Z)&&(Z=Z.map(ae=>VD(Uu(ae)))),y(n,["tools"],Z)}const I=m(e,["toolConfig"]);n!==void 0&&I!=null&&y(n,["toolConfig"],I);const R=m(e,["labels"]);n!==void 0&&R!=null&&y(n,["labels"],R);const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&y(n,["cachedContent"],$s(t,P));const V=m(e,["responseModalities"]);V!=null&&y(i,["responseModalities"],V);const U=m(e,["mediaResolution"]);U!=null&&y(i,["mediaResolution"],U);const q=m(e,["speechConfig"]);q!=null&&y(i,["speechConfig"],kD(kT(q)));const z=m(e,["audioTimestamp"]);z!=null&&y(i,["audioTimestamp"],z);const Pe=m(e,["thinkingConfig"]);Pe!=null&&y(i,["thinkingConfig"],Pe);const De=m(e,["imageConfig"]);return De!=null&&y(i,["imageConfig"],XH(De)),i}function nI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Qm(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],bH(t,o,n)),n}function iI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],wH(t,o,n)),n}function rI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>$q(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function sI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["candidates"],f)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function AH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&y(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function xH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function CH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&AH(o,n),n}function IH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&xH(o,n),n}function RH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>zH(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],DD(r)),e}function NH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Zm(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],MD(r)),e}function PH(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=m(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],eg(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>MG(b))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function DH(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=m(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=m(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const C=m(t,["generateAudio"]);e!==void 0&&C!=null&&y(e,["parameters","generateAudio"],C);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],zr(N));const D=m(t,["referenceImages"]);if(e!==void 0&&D!=null){let F=D;Array.isArray(F)&&(F=F.map($=>kG($))),y(e,["instances[0]","referenceImages"],F)}const O=m(t,["mask"]);e!==void 0&&O!=null&&y(e,["instances[0]","mask"],DG(O));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function MH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],OH(l)),e}function kH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],UH(l)),e}function VH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],eg(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],LD(l));const c=m(e,["source"]);c!=null&&FH(c,n);const d=m(e,["config"]);return d!=null&&PH(d,n),n}function LH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],zr(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],OD(l));const c=m(e,["source"]);c!=null&&BH(c,n);const d=m(e,["config"]);return d!=null&&DH(d,n),n}function OH(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>HH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function UH(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>GH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function FH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],eg(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],LD(o)),n}function BH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],zr(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],OD(o)),n}function zH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],QH(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],DD(r)),e}function Zm(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],PD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],MD(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function qH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],PD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function HH(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],NG(n)),e}function GH(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],PG(n)),e}function jH(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],kD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const $=m(t,["temperature"]);$!=null&&y(e,["temperature"],$);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $H(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function KH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function YH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function JH(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function WH(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XH(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function QH(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],sa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function PD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],sa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function eg(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],sa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function zr(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],sa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function ZH(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],bD(t,c)),i}function eG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],bD(t,c)),i}function tG(t,e){const n={},i=m(e,["config"]);return i!=null&&ZH(t,i,n),n}function nG(t,e){const n={},i=m(e,["config"]);return i!=null&&eG(t,i,n),n}function iG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=wD(r);Array.isArray(o)&&(o=o.map(l=>F0(l))),y(e,["models"],o)}return e}function rG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=wD(r);Array.isArray(o)&&(o=o.map(l=>B0(l))),y(e,["models"],o)}return e}function sG(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function F0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],EG(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=m(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const f=m(t,["supportedGenerationMethods"]);f!=null&&y(e,["supportedActions"],f);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const b=m(t,["topK"]);b!=null&&y(e,["topK"],b);const C=m(t,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function B0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>vH(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const d=m(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],SG(d));const f=m(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function oG(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],_H(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],TH(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],jq(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function aG(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],zr(n)),e}function lG(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const b=m(t,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),n}function uG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&dG(r,n);const o=m(e,["config"]);return o!=null&&lG(o,n),n}function cG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Zm(r))),y(e,["generatedImages"],i)}return e}function dG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],zr(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>aG(c))),y(e,["instances[0]","productImages"],l)}return n}function fG(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],zr(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],sG(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],Qq(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=m(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function DD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function MD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function hG(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function pG(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],zr(n)),e}function mG(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=m(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function gG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&vG(r,n);const o=m(e,["config"]);return o!=null&&mG(o,n),n}function yG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>qH(r))),y(e,["generatedMasks"],i)}return e}function vG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],zr(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],pG(o)),n}function kD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function _G(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],EH(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function TG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],YH(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],JH(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function VD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>SH(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function EG(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function SG(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function bG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function wG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function AG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],yt(t,i));const r=m(e,["config"]);return r!=null&&bG(r,n),n}function xG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&wG(r,n),n}function CG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const b=m(t,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),n}function IG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],zr(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&CG(l,n),n}function RG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Zm(o))),y(e,["generatedImages"],r)}return e}function NG(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],sa(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function PG(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],sa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function DG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],zr(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function MG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],eg(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function kG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],zr(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function LD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],sa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function OD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],sa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VG="Content-Type",LG="X-Server-Timeout",OG="User-Agent",z0="x-goog-api-client",UG="1.30.0",FG=`google-genai-sdk/${UG}`,BG="v1beta1",zG="v1beta",oI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qG{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:BG,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:zG,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&HG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await aI(r),new L0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await aI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return hu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Ht(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),b=T.status,C=T.code,N=`got status: ${b}. ${JSON.stringify(v)}`;if(C>=400&&C<600)throw new Xm({message:N,status:C})}}catch(v){if(v.name==="ApiError")throw v}l+=f;let p=l.match(oI);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ht(new L0(T)),l=l.slice(p[0].length),p=l.match(oI)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=FG+" "+this.clientOptions.userAgentExtra;return e[OG]=n,e[z0]=n,e[VG]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(LG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const d={file:r},f=this.getFileName(e),p=_e("upload/v1beta/files",d._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&i.customMetadata&&(v.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(v.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(f,c,d,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function aI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Xm({message:r,status:n}):new Error(r)}}function HG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GG="mcp_used/unknown";let jG=!1;function UD(t){for(const e of t)if($G(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jG}function FD(t){var e;const n=(e=t[z0])!==null&&e!==void 0?e:"";t[z0]=(n+` ${GG}`).trimStart()}function $G(t){return t!==null&&typeof t=="object"&&t instanceof LT}function KG(t,e=100){return hu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Ht(t.listTools({cursor:i}));for(const l of o.tools)yield yield Ht(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class LT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new LT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,pd(KG(p))),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),F9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function YG(t,e,n){const i=new P9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class JG{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=QG(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(F=>{f=F}),v=e.callbacks,T=function(){f({})},b=this.apiClient,C={onopen:T,onmessage:F=>{YG(b,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},N=this.webSocketFactory.create(d,XG(l),C);N.connect(),await p;const k={setup:{model:yt(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new WG(N,this.apiClient)}}class WG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Lq(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Vq(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(eu.PLAY)}pause(){this.sendPlaybackControl(eu.PAUSE)}stop(){this.sendPlaybackControl(eu.STOP)}resetContext(){this.sendPlaybackControl(eu.RESET_CONTEXT)}close(){this.conn.close()}}function XG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function QG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e8(t,e,n){const i=new N9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=Fq(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class t8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new JG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&UD(e.config.tools)&&FD(v);const T=s8(v);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const P=this.apiClient.getApiKey();let V="BidiGenerateContent",U="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",U="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${V}?${U}=${P}`}let b=()=>{};const C=new Promise(P=>{b=P}),N=e.callbacks,D=function(){var P;(P=N==null?void 0:N.onopen)===null||P===void 0||P.call(N),b({})},O=this.apiClient,k={onopen:D,onmessage:P=>{e8(O,N.onmessage,P)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(P){}},F=this.webSocketFactory.create(p,r8(T),k);F.connect(),await C;let $=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const P=this.apiClient.getProject(),V=this.apiClient.getLocation();$=`projects/${P}/locations/${V}/`+$}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[nm.AUDIO]}:e.config.responseModalities=[nm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const P of H)if(this.isCallableTool(P)){const V=P;I.push(await V.tool())}else I.push(P);I.length>0&&(e.config.tools=I);const R={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=kq(this.apiClient,R):K=Mq(this.apiClient,R),delete K.config,F.send(JSON.stringify(K)),new i8(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n8={turnComplete:!0};class i8{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Tr(n.turns),e.isVertexAI()||(i=i.map(r=>Qm(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(ZG)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},n8),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Uq(e)}:n={realtimeInput:Oq(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function r8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function s8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lI=10;function uI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(pu(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function pu(t){return"callTool"in t&&typeof t.callTool=="function"}function o8(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>pu(r)))!==null&&i!==void 0?i:!1}function cI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(pu(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function dI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a8 extends js{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!o8(n)||uI(n.config))return await this.generateContentInternal(d);const f=cI(n);if(f.length>0){const N=f.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=Tr(d.contents),b=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:lI;let C=0;for(;C<b&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,D=[];for(const O of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(pu(O)){const F=await O.callTool(p.functionCalls);D.push(...F)}C++,v={role:"user",parts:D},d.contents=Tr(d.contents),d.contents.push(N),d.contents.push(v),dI(d.config)&&(T.push(N),T.push(v))}return dI(d.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),uI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const d=cI(n);if(d.length>0){const v=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new sl(qs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>pu(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&UD(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),FD(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(pu(l)){const c=l,d=await c.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:lI;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(f,p,v){var T,b;return hu(this,arguments,function*(){for(var C,N,D,O;c<o;){l&&(c++,l=!1);const K=yield Ht(f.processParamsMaybeAddMcpUsage(v)),H=yield Ht(f.generateContentStreamInternal(K)),I=[],R=[];try{for(var k=!0,F=(N=void 0,pd(H)),$;$=yield Ht(F.next()),C=$.done,!C;k=!0){O=$.value,k=!1;const P=O;if(yield yield Ht(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){R.push(P.candidates[0].content);for(const V of(b=P.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(V.functionCall.name)){const U=yield Ht(p.get(V.functionCall.name).callTool([V.functionCall]));I.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(P){N={error:P}}finally{try{!k&&!C&&(D=F.return)&&(yield Ht(D.call(F)))}finally{if(N)throw N.error}}if(I.length>0){l=!0;const P=new zc;P.candidates=[{content:{role:"user",parts:I}}],yield yield Ht(P);const V=[];V.push(...R),V.push({role:"user",parts:I});const U=Tr(v.contents).concat(V);v.contents=U}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iI(this.apiClient,e);return c=_e("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=sI(p),T=new zc;return Object.assign(T,v),T})}else{const f=nI(this.apiClient,e);return c=_e("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rI(p),T=new zc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iI(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return hu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,O=pd(v),k;k=yield Ht(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,$=sI(yield Ht(F.json()));$.sdkHttpResponse={headers:F.headers};const K=new zc;Object.assign(K,$),yield yield Ht(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(C=O.return)&&(yield Ht(C.call(O)))}finally{if(b)throw b.error}}})})}else{const f=nI(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return hu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,O=pd(v),k;k=yield Ht(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,$=rI(yield Ht(F.json()));$.sdkHttpResponse={headers:F.headers};const K=new zc;Object.assign(K,$),yield yield Ht(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(C=O.return)&&(yield Ht(C.call(O)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=mH(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=yH(p),T=new BC;return Object.assign(T,v),T})}else{const f=pH(this.apiClient,e);return c=_e("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=gH(p),T=new BC;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=IH(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=NH(p),T=new zC;return Object.assign(T,v),T})}else{const f=CH(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=RH(p),T=new zC;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=cH(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=dH(d),p=new _9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=IG(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=RG(d),p=new T9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=uG(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=cG(d),p=new E9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=gG(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=yG(d),p=new S9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=KH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>B0(p))}else{const f=$H(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>F0(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=nG(this.apiClient,e);return c=_e("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rG(p),T=new qC;return Object.assign(T,v),T})}else{const f=tG(this.apiClient,e);return c=_e("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=iG(p),T=new qC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=xG(this.apiClient,e);return c=_e("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>B0(p))}else{const f=AG(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>F0(p))}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lH(p),T=new HC;return Object.assign(T,v),T})}else{const f=sH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aH(p),T=new HC;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=nH(this.apiClient,e);return c=_e("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rH(p),T=new GC;return Object.assign(T,v),T})}else{const f=tH(this.apiClient,e);return c=_e("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=iH(p),T=new GC;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Yq(this.apiClient,e);return o=_e("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Jq(d),p=new b9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=LH(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=kH(p),T=new im;return Object.assign(T,v),T})}else{const f=VH(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=MH(p),T=new im;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l8 extends js{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=h9(e);return c=_e("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=f9(e);return c=_e("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=s9(e);return o=_e("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u8(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function c8(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>_8(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function d8(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],v8(t,c));const d=m(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function f8(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],d8(t,i,n)),n}function h8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function p8(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function g8(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function y8(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],VT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],c8(li(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Fu(N);Array.isArray(H)&&(H=H.map(I=>E8(Uu(I)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],T8(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function v8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],y8(r,n)),n}function _8(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],h8(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],p8(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],u8(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function T8(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function E8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],m8(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],g8(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S8(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function b8(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=S8(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class w8 extends js{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=f8(this.apiClient,e);o=_e("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=b8(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A8(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function x8(t){const e={},n=m(t,["config"]);return n!=null&&A8(n,e),e}function C8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function I8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&C8(i,e),e}function R8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function N8(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function P8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],M8(l)),e}function D8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&N8(r,e),e}function M8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function k8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function V8(t){const e={},n=m(t,["config"]);return n!=null&&k8(n,e),e}function L8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function O8(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function U8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&O8(i,e),e}function F8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function z8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&B8(i,e),e}function q8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function H8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function G8(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&H8(i,e),e}function j8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $8 extends js{constructor(e){super(),this.apiClient=e,this.list=async n=>new sl(qs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=q8(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=z8(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=G8(e);return o=_e("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=j8(d),p=new w9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K8 extends js{constructor(e,n=new $8(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new sl(qs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=R8(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=I8(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=L8(d),p=new A9;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U8(e);return o=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=F8(d),p=new x9;return Object.assign(p,f),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=D8(e);return o=_e("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=P8(d),p=new NT;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function J8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function W8(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=m(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function X8(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec"],fI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec"],fI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function Q8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&u7(o);const l=m(t,["config"]);return l!=null&&W8(l,n),n}function Z8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&c7(o,n,e);const l=m(t,["config"]);return l!=null&&X8(l,n,e),n}function e7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function t7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function n7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function i7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function r7(t,e){const n={},i=m(t,["config"]);return i!=null&&n7(i,n),n}function s7(t,e){const n={},i=m(t,["config"]);return i!=null&&i7(i,n),n}function o7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>BD(c))),y(n,["tuningJobs"],l)}return n}function a7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>q0(c))),y(n,["tuningJobs"],l)}return n}function l7(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function u7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function c7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function BD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],ED(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],l7(T)),n}function q0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],ED(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const b=m(t,["tunedModel"]);b!=null&&y(n,["tunedModel"],b);const C=m(t,["preTunedModel"]);C!=null&&y(n,["preTunedModel"],C);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const D=m(t,["preferenceOptimizationSpec"]);D!=null&&y(n,["preferenceOptimizationSpec"],D);const O=m(t,["tuningDataStats"]);O!=null&&y(n,["tuningDataStats"],O);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const F=m(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const $=m(t,["customBaseModel"]);$!=null&&y(n,["customBaseModel"],$);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const H=m(t,["labels"]);H!=null&&y(n,["labels"],H);const I=m(t,["outputUri"]);I!=null&&y(n,["outputUri"],I);const R=m(t,["pipelineJob"]);R!=null&&y(n,["pipelineJob"],R);const P=m(t,["serviceAccount"]);P!=null&&y(n,["serviceAccount"],P);const V=m(t,["tunedModelDisplayName"]);V!=null&&y(n,["tunedModelDisplayName"],V);const U=m(t,["veoTuningSpec"]);return U!=null&&y(n,["veoTuningSpec"],U),n}function d7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function fI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f7 extends js{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new sl(qs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:V0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=t7(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>q0(p))}else{const f=e7(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>BD(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=s7(e);return c=_e("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=a7(p),T=new jC;return Object.assign(T,v),T})}else{const f=r7(e);return c=_e("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=o7(p),T=new jC;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=J8(e);l=_e("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=Y8(e);l=_e("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Z8(e,e);return o=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>q0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q8(e);return o=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>d7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const p7=1024*1024*8,m7=3,g7=1e3,y7=2,sm="x-goog-upload-status";async function v7(t,e,n){var i;const r=await zD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[sm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function _7(t,e,n){var i;const r=await zD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[sm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=mD(o),c=new PT;return Object.assign(c,l),c}async function zD(t,e,n){var i,r;let o=0,l=0,c=new L0(new Response),d="upload";for(o=t.size;l<o;){const f=Math.min(p7,o-l),p=t.slice(l,l+f);l+f>=o&&(d+=", finalize");let v=0,T=g7;for(;v<m7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[sm]));)v++,await E7(T),T=T*y7;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[sm])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function T7(t){return{size:t.size,type:t.type}}function E7(t){return new Promise(e=>setTimeout(e,t))}class S7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b7{create(e,n,i){return new w7(e,n,i)}}class w7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hI="x-goog-api-key";class A7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(hI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x7="gl-node/";class C7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=i9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new A7(this.apiKey);this.apiClient=new qG({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:x7+"web",uploader:new S7,downloader:new h7}),this.models=new a8(this.apiClient),this.live=new t8(this.apiClient,r,new b7),this.batches=new Dz(this.apiClient),this.chats=new hq(this.models,this.apiClient),this.caches=new cq(this.apiClient),this.files=new bq(this.apiClient),this.operations=new l8(this.apiClient),this.authTokens=new w8(this.apiClient),this.tunings=new f7(this.apiClient),this.fileSearchStores=new K8(this.apiClient)}}const qD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},tg=new C7({apiKey:qD.geminiApiKey});function ng(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function I7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await tg.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:He.OBJECT,properties:{items:{type:He.ARRAY,items:{type:He.OBJECT,properties:{analysis:{type:He.STRING},category:{type:He.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:He.STRING},material:{type:He.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=ng(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function R7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Matire: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),f=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert reconnu pour ton got impeccable. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
Vtements disponibles :
${d}
${f}

**RGLES CRITIQUES** :

1. **BASE** : Utilise UNIQUEMENT les articles lists. Chaque tenue doit tre complte (Haut + Bas + Chaussures).

2. **ACCESSOIRES** : Chaque tenue DOIT tre accompagne d'une montre (si disponible).

3. **SUPERPOSITION (LAYERING)** :
   - **Pull col V**  OBLIGATOIREMENT avec une chemise en dessous
   - **Pull col camionneur/zipp**  OBLIGATOIREMENT avec un t-shirt ou chemise en dessous
   - **Veste/Blazer**  Peut aller sur t-shirt, chemise, ou pull fin

4. **LOGIQUE THERMIQUE (CRITIQUE)** :
   - Analyse la mto mentionne dans le contexte.
   
   | Temprature | Rgle |
   |-------------|-------|
   | **< 10C (FROID)** | Layering OBLIGATOIRE : T-shirt + Pull + Manteau. JAMAIS une chemise seule sous un manteau. |
   | **10-20C (DOUX)** | Pull, sweat ou veste lgre suffisent. |
   | **> 20C (CHAUD)** | Une seule couche lgre (t-shirt OU chemise). JAMAIS de pull ni veste. |
   | **> 30C (TRS CHAUD)** | Vtements trs lgers uniquement. INTERDITS : jeans pais, matires synthtiques. |

5. **INTERDICTIONS THERMIQUES ABSOLUES** :
   -  Doudoune/veste d'hiver si > 15C
   -  Short si < 12C
   -  Sandales si < 15C
   -  Pull en laine si > 22C

6. **MATIRES ADAPTES** :
   - **Chaud (> 25C)** : Privilgier coton lger, lin, matires respirantes
   - **Froid (< 10C)** : Privilgier laine, polaire, matires chaudes
   
7. **HARMONIE DES COULEURS & MOTIFS** :
   - **Rgle des 3 couleurs** : Maximum 3 couleurs diffrentes par tenue
   - **quilibre motifs** : Si le haut est  motifs  bas UNI. Jamais 2 motifs diffrents ensemble.
   - **Contraste** : viter les tons trop proches (bleu marine + noir) sauf choix dlibr

8. **VARIT** : Les 3 tenues doivent tre VISUELLEMENT diffrentes. vite de rpter le mme pantalon 3 fois.

**SORTIE** : Renvoie l'ID EXACT et la description pour chaque article slectionn.`,v=await tg.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:He.OBJECT,properties:{tenues:{type:He.ARRAY,items:{type:He.OBJECT,properties:{titre:{type:He.STRING},description:{type:He.STRING},vetements:{type:He.ARRAY,items:{type:He.OBJECT,properties:{id:{type:He.STRING},description:{type:He.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=ng(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function N7(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques.
  
  Garde-robe :
  ${n}
  
  Renvoie un rsum, les points forts, les manques, et des suggestions avec priorit et prix estim.`,r=await tg.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:He.OBJECT,properties:{summary:{type:He.STRING},strengths:{type:He.ARRAY,items:{type:He.STRING}},gaps:{type:He.ARRAY,items:{type:He.STRING}},suggestions:{type:He.ARRAY,items:{type:He.OBJECT,properties:{category:{type:He.STRING},description:{type:He.STRING},reason:{type:He.STRING},priority:{type:He.STRING,enum:["high","medium","low"]},estimatedPrice:{type:He.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),o=ng(r);return JSON.parse(o)}async function P7(t,e,n,i,r){const o=new Set((e||[]).flatMap(C=>C.itemIds)),c=t.filter(C=>!o.has(C.id)).map(C=>`- ${C.analysis} (ID: ${C.id}, Cat: ${C.category}, Couleur: ${C.color}, Matire: ${C.material})`).join(`
`),d=e.map(C=>`- ${C.name} (Ensemble, ID: ${C.id})`).join(`
`),f=[c,d].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS (${r} kg max)** :
- C'est une LIMITE MAXIMALE, pas un objectif  minimiser
- Tu DOIS prparer une valise COMPLTE pour ${n} jours
- Estime les poids moyens : t-shirt ~150g, chemise ~200g, jean ~600g, pantalon lger ~400g, pull ~400g, veste ~700g, chaussures ~800g
- Vrifie que le total ne DPASSE PAS ${r} kg, mais n'hsite pas  t'en approcher
- Si tu es largement en dessous de la limite, AJOUTE des vtements utiles`:"",v=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

5. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- Ne mentionne pas l'existence des rgles
- La liste des articles avec leur ID exact`,T=await tg.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:He.OBJECT,properties:{titre:{type:He.STRING},resume:{type:He.STRING},valise:{type:He.ARRAY,items:{type:He.OBJECT,properties:{id:{type:He.STRING},description:{type:He.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=ng(T);return JSON.parse(b)}const D7=WB(ZB,"generateVisualOutfit");async function M7(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const r=(await D7({garmentUrl:n.imageSrc,category:n.category,description:n.analysis})).data;if(!r||!r.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),r.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const k7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),V7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),H0=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),HD=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ud=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),ig=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),pI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),GD=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),L7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),O7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),U7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),F7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),om=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),OT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),rg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),UT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),B7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),jD=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),FT=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Fd=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),z7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),$D=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),KD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),q7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(V7,{}):S.jsx(k7,{})})]})]})}),H7="DRESSMEUP2025",mI=({user:t})=>{var $,K,H;const[e,n]=B.useState(""),[i,r]=B.useState(""),[o,l]=B.useState(""),[c,d]=B.useState(!1),[f,p]=B.useState(!1),[v,T]=B.useState(null),[b,C]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{const I=R=>{N.current&&!N.current.contains(R.target)&&p(!1)};return f&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[f]);const D=async I=>{try{return(await mF(Ou(Br,"allowedEmails",I.toLowerCase()))).exists()}catch(R){return console.error("Erreur vrification email:",R),!1}},O=async()=>{C(!0),T(null);try{const R=(await dU(ka,QB)).user.email;if(!R){await Cv(ka),T("Impossible de rcuprer l'email du compte Google.");return}if(!await D(R)){await Cv(ka),T("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(I){console.error("Erreur de connexion Google:",I),T(I.message||"Erreur de connexion")}finally{C(!1)}},k=async I=>{I.preventDefault(),C(!0),T(null);try{if(c){if(o!==H7){T("Code d'invitation invalide."),C(!1);return}if(!await D(e)){T("Votre email n'est pas dans la liste des beta testeurs."),C(!1);return}await z4(ka,e,i)}else{if(!await D(e)){T("Votre email n'est pas autoris  accder  la beta."),C(!1);return}await q4(ka,e,i)}}catch(R){console.error("Erreur d'authentification:",R),R.code==="auth/user-not-found"?T("Aucun compte trouv avec cet email."):R.code==="auth/wrong-password"?T("Mot de passe incorrect."):R.code==="auth/email-already-in-use"?T("Cet email est dj utilis."):R.code==="auth/weak-password"?T("Le mot de passe doit contenir au moins 6 caractres."):T(R.message||"Erreur d'authentification")}finally{C(!1)}},F=async()=>{try{await Cv(ka)}catch(I){console.error("Erreur de dconnexion:",I)}};return t?S.jsxs("div",{className:"relative",ref:N,children:[S.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:((($=t.displayName)==null?void 0:$[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((H=t.email)==null?void 0:H.split("@")[0])})]}),f&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:F,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),v&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:v}),S.jsx("button",{onClick:O,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:I=>n(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:I=>l(I.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{d(!c),T(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},BT=B.createContext({});function zT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const sg=B.createContext(null),qT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class G7 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function j7({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(qT);return B.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(G7,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const $7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=zT(K7),d=B.useId(),f=B.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=B.useMemo(()=>({id:d,initial:e,isPresent:n,custom:r,onExitComplete:f,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),f]:[n,f]);return B.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),B.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(j7,{isPresent:n,children:t})),S.jsx(sg.Provider,{value:p,children:t})};function K7(){return new Map}function YD(t=!0){const e=B.useContext(sg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const l=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const jh=t=>t.key||"";function gI(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const HT=typeof window<"u",JD=HT?B.useLayoutEffect:B.useEffect,Y7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=YD(l),f=B.useMemo(()=>gI(t),[t]),p=l&&!c?[]:f.map(jh),v=B.useRef(!0),T=B.useRef(f),b=zT(()=>new Map),[C,N]=B.useState(f),[D,O]=B.useState(f);JD(()=>{v.current=!1,T.current=f;for(let $=0;$<D.length;$++){const K=jh(D[$]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[D,p.length,p.join("-")]);const k=[];if(f!==C){let $=[...f];for(let K=0;K<D.length;K++){const H=D[K],I=jh(H);p.includes(I)||($.splice(K,0,H),k.push(H))}o==="wait"&&k.length&&($=k),O(gI($)),N(f);return}const{forceRender:F}=B.useContext(BT);return S.jsx(S.Fragment,{children:D.map($=>{const K=jh($),H=l&&!c?!1:f===D||p.includes(K),I=()=>{if(b.has(K))b.set(K,!0);else return;let R=!0;b.forEach(P=>{P||(R=!1)}),R&&(F==null||F(),O(T.current),l&&(d==null||d()),i&&i())};return S.jsx($7,{isPresent:H,initial:!v.current||n?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:H?void 0:I,children:$},K)})})},Qi=t=>t;let WD=Qi;function GT(t){let e;return()=>(e===void 0&&(e=t()),e)}const wu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Vs=t=>t*1e3,Ls=t=>t/1e3,J7={useManualTiming:!1};function W7(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,v=!1)=>{const b=v&&i?e:n;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const $h=["read","resolveKeyframes","update","preRender","render","postRender"],X7=40;function XD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=$h.reduce((O,k)=>(O[k]=W7(o),O),{}),{read:c,resolveKeyframes:d,update:f,preRender:p,render:v,postRender:T}=l,b=()=>{const O=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(O-r.timestamp,X7),1),r.timestamp=O,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},C=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:$h.reduce((O,k)=>{const F=l[k];return O[k]=($,K=!1,H=!1)=>(n||C(),F.schedule($,K,H)),O},{}),cancel:O=>{for(let k=0;k<$h.length;k++)l[$h[k]].cancel(O)},state:r,steps:l}}const{schedule:jt,cancel:Qo,state:$n,steps:Vv}=XD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0),QD=B.createContext({strict:!1}),yI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Au={};for(const t in yI)Au[t]={isEnabled:e=>yI[t].some(n=>!!e[n])};function Q7(t){for(const e in t)Au[e]={...Au[e],...t[e]}}const Z7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function am(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z7.has(t)}let ZD=t=>!am(t);function ej(t){t&&(ZD=e=>e.startsWith("on")?!am(e):t(e))}try{ej(require("@emotion/is-prop-valid").default)}catch{}function tj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(ZD(r)||n===!0&&am(r)||!e&&!am(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function nj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const og=B.createContext({});function Bd(t){return typeof t=="string"||Array.isArray(t)}function ag(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const jT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$T=["initial",...jT];function lg(t){return ag(t.animate)||$T.some(e=>Bd(t[e]))}function eM(t){return!!(lg(t)||t.variants)}function ij(t,e){if(lg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Bd(n)?n:void 0,animate:Bd(i)?i:void 0}}return t.inherit!==!1?e:{}}function rj(t){const{initial:e,animate:n}=ij(t,B.useContext(og));return B.useMemo(()=>({initial:e,animate:n}),[vI(e),vI(n)])}function vI(t){return Array.isArray(t)?t.join(" "):t}const sj=Symbol.for("motionComponentSymbol");function tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oj(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):tu(n)&&(n.current=i))},[e])}const KT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aj="framerAppearId",tM="data-"+KT(aj),{schedule:YT}=XD(queueMicrotask,!1),nM=B.createContext({});function lj(t,e,n,i,r){var o,l;const{visualElement:c}=B.useContext(og),d=B.useContext(QD),f=B.useContext(sg),p=B.useContext(qT).reducedMotion,v=B.useRef(null);i=i||d.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,b=B.useContext(nM);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&uj(v.current,n,r,b);const C=B.useRef(!1);B.useInsertionEffect(()=>{T&&C.current&&T.update(n,f)});const N=n[tM],D=B.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return JD(()=>{T&&(C.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),YT.render(T.render),D.current&&T.animationState&&T.animationState.animateChanges())}),B.useEffect(()=>{T&&(!D.current&&T.animationState&&T.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)===null||O===void 0||O.call(window,N)}),D.current=!1))}),T}function uj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:iM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&tu(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}function iM(t){if(t)return t.options.allowProjection!==!1?t.projection:iM(t.parent)}function cj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&Q7(t);function c(f,p){let v;const T={...B.useContext(qT),...f,layoutId:dj(f)},{isStatic:b}=T,C=rj(f),N=i(f,b);if(!b&&HT){fj();const D=hj(T);v=D.MeasureLayout,C.visualElement=lj(r,N,T,e,D.ProjectionNode)}return S.jsxs(og.Provider,{value:C,children:[v&&C.visualElement?S.jsx(v,{visualElement:C.visualElement,...T}):null,n(r,f,oj(N,C.visualElement,p),N,b,C.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const d=B.forwardRef(c);return d[sj]=r,d}function dj({layoutId:t}){const e=B.useContext(BT).id;return e&&t!==void 0?e+"-"+t:t}function fj(t,e){B.useContext(QD).strict}function hj(t){const{drag:e,layout:n}=Au;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const pj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JT(t){return typeof t!="string"||t.includes("-")?!1:!!(pj.indexOf(t)>-1||/[A-Z]/u.test(t))}function _I(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function WT(t,e,n,i){if(typeof e=="function"){const[r,o]=_I(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=_I(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const G0=t=>Array.isArray(t),mj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gj=t=>G0(t)?t[t.length-1]||0:t,ui=t=>!!(t&&t.getVelocity);function wp(t){const e=ui(t)?t.get():t;return mj(e)?e.toValue():e}function yj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:vj(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const rM=t=>(e,n)=>{const i=B.useContext(og),r=B.useContext(sg),o=()=>yj(t,e,i,r);return n?o():zT(o)};function vj(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=wp(o[T]);let{initial:l,animate:c}=t;const d=lg(t),f=eM(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!ag(v)){const T=Array.isArray(v)?v:[v];for(let b=0;b<T.length;b++){const C=WT(t,T[b]);if(C){const{transitionEnd:N,transition:D,...O}=C;for(const k in O){let F=O[k];if(Array.isArray(F)){const $=p?F.length-1:0;F=F[$]}F!==null&&(r[k]=F)}for(const k in N)r[k]=N[k]}}}return r}const zu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ol=new Set(zu),sM=t=>e=>typeof e=="string"&&e.startsWith(t),oM=sM("--"),_j=sM("var(--"),XT=t=>_j(t)?Tj.test(t.split("/*")[0].trim()):!1,Tj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,aM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hs=(t,e,n)=>n>e?e:n<t?t:n,qu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zd={...qu,transform:t=>Hs(0,1,t)},Kh={...qu,default:1},uf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ro=uf("deg"),os=uf("%"),Oe=uf("px"),Ej=uf("vh"),Sj=uf("vw"),TI={...os,parse:t=>os.parse(t)/100,transform:t=>os.transform(t*100)},bj={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe},wj={rotate:Ro,rotateX:Ro,rotateY:Ro,rotateZ:Ro,scale:Kh,scaleX:Kh,scaleY:Kh,scaleZ:Kh,skew:Ro,skewX:Ro,skewY:Ro,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:zd,originX:TI,originY:TI,originZ:Oe},EI={...qu,transform:Math.round},QT={...bj,...wj,zIndex:EI,size:Oe,fillOpacity:zd,strokeOpacity:zd,numOctaves:EI},Aj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xj=zu.length;function Cj(t,e,n){let i="",r=!0;for(let o=0;o<xj;o++){const l=zu[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=aM(c,QT[l]);if(!d){r=!1;const p=Aj[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function ZT(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const f=e[d];if(ol.has(d)){l=!0;continue}else if(oM(d)){r[d]=f;continue}else{const p=aM(f,QT[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(l||n?i.transform=Cj(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const Ij={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rj={offset:"strokeDashoffset",array:"strokeDasharray"};function Nj(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Ij:Rj;t[o.offset]=Oe.transform(-i);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function SI(t,e,n){return typeof t=="string"?t:Oe.transform(e+n*t)}function Pj(t,e,n){const i=SI(e,t.x,t.width),r=SI(n,t.y,t.height);return`${i} ${r}`}function eE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},p,v){if(ZT(t,f,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:C}=t;T.transform&&(C&&(b.transform=T.transform),delete T.transform),C&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=Pj(C,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&Nj(T,l,c,d,!1)}const tE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),lM=()=>({...tE(),attrs:{}}),nE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const cM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dM(t,e,n,i){uM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(cM.has(r)?r:KT(r),e.attrs[r])}const lm={};function Dj(t){Object.assign(lm,t)}function fM(t,{layout:e,layoutId:n}){return ol.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!lm[t]||t==="opacity")}function iE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(ui(r[l])||e.style&&ui(e.style[l])||fM(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function hM(t,e,n){const i=iE(t,e,n);for(const r in t)if(ui(t[r])||ui(e[r])){const o=zu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function Mj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const bI=["x","y","width","height","cx","cy","r"],kj={useVisualState:rM({scrapeMotionValuesFromProps:hM,createRenderState:lM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(ol.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<bI.length;c++){const d=bI[c];t[d]!==e[d]&&(l=!0)}l&&jt.read(()=>{Mj(n,i),jt.render(()=>{eE(i,r,nE(n.tagName),t.transformTemplate),dM(n,i)})})}})},Vj={useVisualState:rM({scrapeMotionValuesFromProps:iE,createRenderState:tE})};function pM(t,e,n){for(const i in e)!ui(e[i])&&!fM(i,n)&&(t[i]=e[i])}function Lj({transformTemplate:t},e){return B.useMemo(()=>{const n=tE();return ZT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Oj(t,e){const n=t.style||{},i={};return pM(i,n,t),Object.assign(i,Lj(t,e)),i}function Uj(t,e){const n={},i=Oj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Fj(t,e,n,i){const r=B.useMemo(()=>{const o=lM();return eE(o,e,nE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};pM(o,t.style,t),r.style={...o,...r.style}}return r}function Bj(t=!1){return(n,i,r,{latestValues:o},l)=>{const d=(JT(n)?Fj:Uj)(i,o,l,n),f=tj(i,typeof n=="string",t),p=n!==B.Fragment?{...f,...d,ref:r}:{},{children:v}=i,T=B.useMemo(()=>ui(v)?v.get():v,[v]);return B.createElement(n,{...p,children:T})}}function zj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...JT(i)?kj:Vj,preloadedFeatures:t,useRender:Bj(r),createVisualElement:e,Component:i};return cj(l)}}function mM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ug(t,e,n){const i=t.getProps();return WT(i,e,n!==void 0?n:i.custom,t)}const qj=GT(()=>window.ScrollTimeline!==void 0);class Hj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(qj()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Gj extends Hj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function rE(t,e){return t?t[e]||t.default||t:void 0}const j0=2e4;function gM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<j0;)e+=n,i=t.next(e);return e>=j0?1/0:e}function sE(t){return typeof t=="function"}function wI(t,e){t.timeline=e,t.onfinish=null}const oE=t=>Array.isArray(t)&&typeof t[0]=="number",jj={linearEasing:void 0};function $j(t,e){const n=GT(t);return()=>{var i;return(i=jj[e])!==null&&i!==void 0?i:n()}}const um=$j(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(wu(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function vM(t){return!!(typeof t=="function"&&um()||!t||typeof t=="string"&&(t in $0||um())||oE(t)||Array.isArray(t)&&t.every(vM))}const ed=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,$0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ed([0,.65,.55,1]),circOut:ed([.55,0,1,.45]),backIn:ed([.31,.01,.66,-.59]),backOut:ed([.33,1.53,.69,.99])};function _M(t,e){if(t)return typeof t=="function"&&um()?yM(t,e):oE(t)?ed(t):Array.isArray(t)?t.map(n=>_M(n,e)||$0.easeOut):$0[t]}const Nr={x:!1,y:!1};function TM(){return Nr.x||Nr.y}function Kj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function EM(t,e){const n=Kj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function AI(t){return e=>{e.pointerType==="touch"||TM()||t(e)}}function Yj(t,e,n={}){const[i,r,o]=EM(t,n),l=AI(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const p=AI(v=>{f(v),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const SM=(t,e)=>e?t===e?!0:SM(t,e.parentElement):!1,aE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Jj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Wj(t){return Jj.has(t.tagName)||t.tabIndex!==-1}const td=new WeakSet;function xI(t){return e=>{e.key==="Enter"&&t(e)}}function Lv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Xj=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=xI(()=>{if(td.has(n))return;Lv(n,"down");const r=xI(()=>{Lv(n,"up")}),o=()=>Lv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function CI(t){return aE(t)&&!TM()}function Qj(t,e,n={}){const[i,r,o]=EM(t,n),l=c=>{const d=c.currentTarget;if(!CI(c)||td.has(d))return;td.add(d);const f=e(c),p=(b,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!CI(b)||!td.has(d))&&(td.delete(d),typeof f=="function"&&f(b,{success:C}))},v=b=>{p(b,n.useGlobalTarget||SM(d,b.target))},T=b=>{p(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!Wj(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",f=>Xj(f,r),r)}),o}function Zj(t){return t==="x"||t==="y"?Nr[t]?null:(Nr[t]=!0,()=>{Nr[t]=!1}):Nr.x||Nr.y?null:(Nr.x=Nr.y=!0,()=>{Nr.x=Nr.y=!1})}const bM=new Set(["width","height","top","left","right","bottom",...zu]);let Ap;function e$(){Ap=void 0}const as={now:()=>(Ap===void 0&&as.set($n.isProcessing||J7.useManualTiming?$n.timestamp:performance.now()),Ap),set:t=>{Ap=t,queueMicrotask(e$)}};function lE(t,e){t.indexOf(e)===-1&&t.push(e)}function uE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class cE{constructor(){this.subscriptions=[]}add(e){return lE(this.subscriptions,e),()=>uE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function wM(t,e){return e?t*(1e3/e):0}const II=30,t$=t=>!isNaN(parseFloat(t));class n${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=as.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=as.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=t$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cE);const i=this.events[e].add(n);return e==="change"?()=>{i(),jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=as.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>II)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,II);return wM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qd(t,e){return new n$(t,e)}function i$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qd(n))}function r$(t,e){const n=ug(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=gj(o[l]);i$(t,l,c)}}function s$(t){return!!(ui(t)&&t.add)}function K0(t,e){const n=t.getValue("willChange");if(s$(n))return n.add(e)}function AM(t){return t.props[tM]}const xM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,o$=1e-7,a$=12;function l$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=xM(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>o$&&++c<a$);return l}function cf(t,e,n,i){if(t===e&&n===i)return Qi;const r=o=>l$(o,0,1,t,n);return o=>o===0||o===1?o:xM(r(o),e,i)}const CM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IM=t=>e=>1-t(1-e),RM=cf(.33,1.53,.69,.99),dE=IM(RM),NM=CM(dE),PM=t=>(t*=2)<1?.5*dE(t):.5*(2-Math.pow(2,-10*(t-1))),fE=t=>1-Math.sin(Math.acos(t)),DM=IM(fE),MM=CM(fE),kM=t=>/^0[^.\s]+$/u.test(t);function u$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kM(t):!0}const md=t=>Math.round(t*1e5)/1e5,hE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function c$(t){return t==null}const d$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pE=(t,e)=>n=>!!(typeof n=="string"&&d$.test(n)&&n.startsWith(t)||e&&!c$(n)&&Object.prototype.hasOwnProperty.call(n,e)),VM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(hE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},f$=t=>Hs(0,255,t),Ov={...qu,transform:t=>Math.round(f$(t))},Ba={test:pE("rgb","red"),parse:VM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Ov.transform(t)+", "+Ov.transform(e)+", "+Ov.transform(n)+", "+md(zd.transform(i))+")"};function h$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Y0={test:pE("#"),parse:h$,transform:Ba.transform},nu={test:pE("hsl","hue"),parse:VM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+os.transform(md(e))+", "+os.transform(md(n))+", "+md(zd.transform(i))+")"},ri={test:t=>Ba.test(t)||Y0.test(t)||nu.test(t),parse:t=>Ba.test(t)?Ba.parse(t):nu.test(t)?nu.parse(t):Y0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ba.transform(t):nu.transform(t)},p$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(p$))===null||n===void 0?void 0:n.length)||0)>0}const LM="number",OM="color",g$="var",y$="var(",RI="${}",v$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(v$,d=>(ri.test(d)?(i.color.push(o),r.push(OM),n.push(ri.parse(d))):d.startsWith(y$)?(i.var.push(o),r.push(g$),n.push(d)):(i.number.push(o),r.push(LM),n.push(parseFloat(d))),++o,RI)).split(RI);return{values:n,split:c,indexes:i,types:r}}function UM(t){return Hd(t).values}function FM(t){const{split:e,types:n}=Hd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===LM?o+=md(r[l]):c===OM?o+=ri.transform(r[l]):o+=r[l]}return o}}const _$=t=>typeof t=="number"?0:t;function T$(t){const e=UM(t);return FM(t)(e.map(_$))}const Zo={test:m$,parse:UM,createTransformer:FM,getAnimatableNone:T$},E$=new Set(["brightness","contrast","saturate","opacity"]);function S$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(hE)||[];if(!i)return t;const r=n.replace(i,"");let o=E$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const b$=/\b([a-z-]*)\(.*?\)/gu,J0={...Zo,getAnimatableNone:t=>{const e=t.match(b$);return e?e.map(S$).join(" "):t}},w$={...QT,color:ri,backgroundColor:ri,outlineColor:ri,fill:ri,stroke:ri,borderColor:ri,borderTopColor:ri,borderRightColor:ri,borderBottomColor:ri,borderLeftColor:ri,filter:J0,WebkitFilter:J0},mE=t=>w$[t];function BM(t,e){let n=mE(t);return n!==J0&&(n=Zo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const A$=new Set(["auto","none","0"]);function x$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!A$.has(o)&&Hd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=BM(n,r)}const NI=t=>t===qu||t===Oe,PI=(t,e)=>parseFloat(t.split(", ")[e]),DI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return PI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?PI(o[1],t):0}},C$=new Set(["x","y","z"]),I$=zu.filter(t=>!C$.has(t));function R$(t){const e=[];return I$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const xu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:DI(4,13),y:DI(5,14)};xu.translateX=xu.x;xu.translateY=xu.y;const Ga=new Set;let W0=!1,X0=!1;function zM(){if(X0){const t=Array.from(Ga).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=R$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}X0=!1,W0=!1,Ga.forEach(t=>t.complete()),Ga.clear()}function qM(){Ga.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(X0=!0)})}function N$(){qM(),zM()}class gE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ga.add(this),W0||(W0=!0,jt.read(qM),jt.resolveKeyframes(zM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ga.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ga.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const HM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),P$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function D$(t){const e=P$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function GM(t,e,n=1){const[i,r]=D$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return HM(l)?parseFloat(l):l}return XT(r)?GM(r,e,n+1):r}const jM=t=>e=>e.test(t),M$={test:t=>t==="auto",parse:t=>t},$M=[qu,Oe,os,Ro,Sj,Ej,M$],MI=t=>$M.find(jM(t));class KM extends gE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),XT(f))){const p=GM(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!bM.has(i)||e.length!==2)return;const[r,o]=e,l=MI(r),c=MI(o);if(l!==c)if(NI(l)&&NI(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)u$(e[r])&&i.push(r);i.length&&x$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=xu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{n.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const kI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zo.test(t)||t==="0")&&!t.startsWith("url("));function k$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function V$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=kI(r,e),c=kI(o,e);return!l||!c?!1:k$(t)||(n==="spring"||sE(n))&&i}const L$=t=>t!==null;function cg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(L$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const O$=40;class YM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=as.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>O$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&N$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=as.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!V$(e,i,r,o))if(l)this.options.duration=0;else{d&&d(cg(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xt=(t,e,n)=>t+(e-t)*n;function Uv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function U$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Uv(d,c,t+1/3),o=Uv(d,c,t),l=Uv(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function cm(t,e){return n=>n>0?e:t}const Fv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},F$=[Y0,Ba,nu],B$=t=>F$.find(e=>e.test(t));function VI(t){const e=B$(t);if(!e)return!1;let n=e.parse(t);return e===nu&&(n=U$(n)),n}const LI=(t,e)=>{const n=VI(t),i=VI(e);if(!n||!i)return cm(t,e);const r={...n};return o=>(r.red=Fv(n.red,i.red,o),r.green=Fv(n.green,i.green,o),r.blue=Fv(n.blue,i.blue,o),r.alpha=Xt(n.alpha,i.alpha,o),Ba.transform(r))},z$=(t,e)=>n=>e(t(n)),df=(...t)=>t.reduce(z$),Q0=new Set(["none","hidden"]);function q$(t,e){return Q0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function H$(t,e){return n=>Xt(t,e,n)}function yE(t){return typeof t=="number"?H$:typeof t=="string"?XT(t)?cm:ri.test(t)?LI:$$:Array.isArray(t)?JM:typeof t=="object"?ri.test(t)?LI:G$:cm}function JM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>yE(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function G$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=yE(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function j$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=d,r[l]++}return i}const $$=(t,e)=>{const n=Zo.createTransformer(e),i=Hd(t),r=Hd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Q0.has(t)&&!r.values.length||Q0.has(e)&&!i.values.length?q$(t,e):df(JM(j$(i,r),r.values),n):cm(t,e)};function WM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xt(t,e,n):yE(t)(t,e)}const K$=5;function XM(t,e,n){const i=Math.max(e-K$,0);return wM(n-t(i),e-i)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bv=.001;function Y$({duration:t=an.duration,bounce:e=an.bounce,velocity:n=an.velocity,mass:i=an.mass}){let r,o,l=1-e;l=Hs(an.minDamping,an.maxDamping,l),t=Hs(an.minDuration,an.maxDuration,Ls(t)),l<1?(r=f=>{const p=f*l,v=p*t,T=p-n,b=Z0(f,l),C=Math.exp(-v);return Bv-T/b*C},o=f=>{const v=f*l*t,T=v*n+n,b=Math.pow(l,2)*Math.pow(f,2)*t,C=Math.exp(-v),N=Z0(Math.pow(f,2),l);return(-r(f)+Bv>0?-1:1)*((T-b)*C)/N}):(r=f=>{const p=Math.exp(-f*t),v=(f-n)*t+1;return-Bv+p*v},o=f=>{const p=Math.exp(-f*t),v=(n-f)*(t*t);return p*v});const c=5/t,d=W$(r,o,c);if(t=Vs(t),isNaN(d))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const J$=12;function W$(t,e,n){let i=n;for(let r=1;r<J$;r++)i=i-t(i)/e(i);return i}function Z0(t,e){return t*Math.sqrt(1-e*e)}const X$=["duration","bounce"],Q$=["stiffness","damping","mass"];function OI(t,e){return e.some(n=>t[n]!==void 0)}function Z$(t){let e={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!OI(t,Q$)&&OI(t,X$))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Hs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:an.mass,stiffness:r,damping:o}}else{const n=Y$(t);e={...e,...n,mass:an.mass},e.isResolvedFromDuration=!0}return e}function QM(t=an.visualDuration,e=an.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:v,velocity:T,isResolvedFromDuration:b}=Z$({...n,velocity:-Ls(n.velocity||0)}),C=T||0,N=f/(2*Math.sqrt(d*p)),D=l-o,O=Ls(Math.sqrt(d/p)),k=Math.abs(D)<5;i||(i=k?an.restSpeed.granular:an.restSpeed.default),r||(r=k?an.restDelta.granular:an.restDelta.default);let F;if(N<1){const K=Z0(O,N);F=H=>{const I=Math.exp(-N*O*H);return l-I*((C+N*O*D)/K*Math.sin(K*H)+D*Math.cos(K*H))}}else if(N===1)F=K=>l-Math.exp(-O*K)*(D+(C+O*D)*K);else{const K=O*Math.sqrt(N*N-1);F=H=>{const I=Math.exp(-N*O*H),R=Math.min(K*H,300);return l-I*((C+N*O*D)*Math.sinh(R)+K*D*Math.cosh(R))/K}}const $={calculatedDuration:b&&v||null,next:K=>{const H=F(K);if(b)c.done=K>=v;else{let I=0;N<1&&(I=K===0?Vs(C):XM(F,K,H));const R=Math.abs(I)<=i,P=Math.abs(l-H)<=r;c.done=R&&P}return c.value=c.done?l:H,c},toString:()=>{const K=Math.min(gM($),j0),H=yM(I=>$.next(K*I).value,K,30);return K+"ms "+H}};return $}function UI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},b=R=>c!==void 0&&R<c||d!==void 0&&R>d,C=R=>c===void 0?d:d===void 0||Math.abs(c-R)<Math.abs(d-R)?c:d;let N=n*e;const D=v+N,O=l===void 0?D:l(D);O!==D&&(N=O-v);const k=R=>-N*Math.exp(-R/i),F=R=>O+k(R),$=R=>{const P=k(R),V=F(R);T.done=Math.abs(P)<=f,T.value=T.done?O:V};let K,H;const I=R=>{b(T.value)&&(K=R,H=QM({keyframes:[T.value,C(T.value)],velocity:XM(F,R,T.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return I(0),{calculatedDuration:null,next:R=>{let P=!1;return!H&&K===void 0&&(P=!0,$(R),I(R)),K!==void 0&&R>=K?H.next(R-K):(!P&&$(R),T)}}}const eK=cf(.42,0,1,1),tK=cf(0,0,.58,1),ZM=cf(.42,0,.58,1),nK=t=>Array.isArray(t)&&typeof t[0]!="number",iK={linear:Qi,easeIn:eK,easeInOut:ZM,easeOut:tK,circIn:fE,circInOut:MM,circOut:DM,backIn:dE,backInOut:NM,backOut:RM,anticipate:PM},FI=t=>{if(oE(t)){WD(t.length===4);const[e,n,i,r]=t;return cf(e,n,i,r)}else if(typeof t=="string")return iK[t];return t};function rK(t,e,n){const i=[],r=n||WM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||Qi:e;c=df(d,c)}i.push(c)}return i}function sK(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(WD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=rK(e,i,r),d=c.length,f=p=>{if(l&&p<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=wu(t[v],t[v+1],p);return c[v](T)};return n?p=>f(Hs(t[0],t[o-1],p)):f}function oK(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=wu(0,e,i);t.push(Xt(n,1,r))}}function aK(t){const e=[0];return oK(e,t.length-1),e}function lK(t,e){return t.map(n=>n*e)}function uK(t,e){return t.map(()=>e||ZM).splice(0,t.length-1)}function dm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=nK(i)?i.map(FI):FI(i),o={done:!1,value:e[0]},l=lK(n&&n.length===e.length?n:aK(e),t),c=sK(l,e,{ease:Array.isArray(r)?r:uK(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const cK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>jt.update(e,!0),stop:()=>Qo(e),now:()=>$n.isProcessing?$n.timestamp:as.now()}},dK={decay:UI,inertia:UI,tween:dm,keyframes:dm,spring:QM},fK=t=>t/100;class vE extends YM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||gE,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=sE(n)?n:dK[n]||dm;let d,f;c!==dm&&typeof e[0]!="number"&&(d=df(fK,WM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=gM(p));const{calculatedDuration:v}=p,T=v+r,b=T*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:T,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:b,repeatType:C,repeatDelay:N,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?O<0:O>p;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,$=o;if(b){const R=Math.min(this.currentTime,p)/v;let P=Math.floor(R),V=R%1;!V&&R>=1&&(V=1),V===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(C==="reverse"?(V=1-V,N&&(V-=N/v)):C==="mirror"&&($=l)),F=Hs(0,1,V)*v}const K=k?{done:!1,value:d[0]}:$.next(F);c&&(K.value=c(K.value));let{done:H}=K;!k&&f!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return I&&r!==void 0&&(K.value=cg(d,this.options,r)),D&&D(K.value),I&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Ls(e.calculatedDuration):0}get time(){return Ls(this.currentTime)}set time(e){e=Vs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ls(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=cK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const hK=new Set(["opacity","clipPath","filter","transform"]);function pK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:n};d&&(f.offset=d);const p=_M(c,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const mK=GT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fm=10,gK=2e4;function yK(t){return sE(t.type)||t.type==="spring"||!vM(t.ease)}function vK(t,e){const n=new vE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<gK;)i=n.sample(o),r.push(i.value),o+=fm;return{times:void 0,keyframes:r,duration:o-fm,ease:"linear"}}const e2={anticipate:PM,backInOut:NM,circInOut:MM};function _K(t){return t in e2}class BI extends YM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new KM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&um()&&_K(o)&&(o=e2[o]),yK(this.options)){const{onComplete:v,onUpdate:T,motionValue:b,element:C,...N}=this.options,D=vK(e,N);e=D.keyframes,e.length===1&&(e[1]=e[0]),i=D.duration,r=D.times,o=D.ease,l="keyframes"}const p=pK(c.owner.current,d,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(wI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(cg(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ls(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ls(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Vs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qi;const{animation:i}=n;wI(i,e)}return Qi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:v,element:T,...b}=this.options,C=new vE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=Vs(this.time);f.setWithVelocity(C.sample(N-fm).value,C.sample(N).value,fm)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=n.owner.getProps();return mK()&&i&&hK.has(i)&&!d&&!f&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const TK={type:"spring",stiffness:500,damping:25,restSpeed:10},EK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SK={type:"keyframes",duration:.8},bK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wK=(t,{keyframes:e})=>e.length>2?SK:ol.has(t)?t.startsWith("scale")?EK(e[1]):TK:bK;function AK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const _E=(t,e,n,i={},r,o)=>l=>{const c=rE(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Vs(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};AK(c)||(p={...p,...wK(t,p)}),p.duration&&(p.duration=Vs(p.duration)),p.repeatDelay&&(p.repeatDelay=Vs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=cg(p.keyframes,c);if(T!==void 0)return jt.update(()=>{p.onUpdate(T),p.onComplete()}),new Gj([])}return!o&&BI.supports(p)?new BI(p):new vE(p)};function xK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function t2(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(l=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in d){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||p&&xK(p,v))continue;const C={delay:n,...rE(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const O=AM(t);if(O){const k=window.MotionHandoffAnimation(O,v,jt);k!==null&&(C.startTime=k,N=!0)}}K0(t,v),T.start(_E(v,T,b,t.shouldReduceMotion&&bM.has(v)?{type:!1}:C,t,N));const D=T.animation;D&&f.push(D)}return c&&Promise.all(f).then(()=>{jt.update(()=>{c&&r$(t,c)})}),f}function e_(t,e,n={}){var i;const r=ug(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(t2(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return CK(t,e,p+f,v,T,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function CK(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>c-f*i;return Array.from(t.variantChildren).sort(IK).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(e_(f,e,{...o,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function IK(t,e){return t.sortNodePosition(e)}function RK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>e_(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=e_(t,e,n);else{const r=typeof e=="function"?ug(t,e,n.custom):e;i=Promise.all(t2(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const NK=$T.length;function n2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?n2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<NK;n++){const i=$T[n],r=t.props[i];(Bd(r)||r===!1)&&(e[i]=r)}return e}const PK=[...jT].reverse(),DK=jT.length;function MK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>RK(t,n,i)))}function kK(t){let e=MK(t),n=zI(),i=!0;const r=d=>(f,p)=>{var v;const T=ug(t,p,d==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:b,transitionEnd:C,...N}=T;f={...f,...N,...C}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,p=n2(t.parent)||{},v=[],T=new Set;let b={},C=1/0;for(let D=0;D<DK;D++){const O=PK[D],k=n[O],F=f[O]!==void 0?f[O]:p[O],$=Bd(F),K=O===d?k.isActive:null;K===!1&&(C=D);let H=F===p[O]&&F!==f[O]&&$;if(H&&i&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...b},!k.isActive&&K===null||!F&&!k.prevProp||ag(F)||typeof F=="boolean")continue;const I=VK(k.prevProp,F);let R=I||O===d&&k.isActive&&!H&&$||D>C&&$,P=!1;const V=Array.isArray(F)?F:[F];let U=V.reduce(r(O),{});K===!1&&(U={});const{prevResolvedValues:q={}}=k,z={...q,...U},Pe=ae=>{R=!0,T.has(ae)&&(P=!0,T.delete(ae)),k.needsAnimating[ae]=!0;const me=t.getValue(ae);me&&(me.liveStyle=!1)};for(const ae in z){const me=U[ae],xe=q[ae];if(b.hasOwnProperty(ae))continue;let Ce=!1;G0(me)&&G0(xe)?Ce=!mM(me,xe):Ce=me!==xe,Ce?me!=null?Pe(ae):T.add(ae):me!==void 0&&T.has(ae)?Pe(ae):k.protectedKeys[ae]=!0}k.prevProp=F,k.prevResolvedValues=U,k.isActive&&(b={...b,...U}),i&&t.blockInitialAnimation&&(R=!1),R&&(!(H&&I)||P)&&v.push(...V.map(ae=>({animation:ae,options:{type:O}})))}if(T.size){const D={};T.forEach(O=>{const k=t.getBaseTarget(O),F=t.getValue(O);F&&(F.liveStyle=!0),D[O]=k??null}),v.push({animation:D})}let N=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(d,f){var p;if(n[d].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),n[d].isActive=f;const v=l(d);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=zI(),i=!0}}}function VK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mM(e,t):!1}function Pa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zI(){return{animate:Pa(!0),whileInView:Pa(),whileHover:Pa(),whileTap:Pa(),whileDrag:Pa(),whileFocus:Pa(),exit:Pa()}}class oa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LK extends oa{constructor(e){super(e),e.animationState||(e.animationState=kK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ag(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let OK=0;class UK extends oa{constructor(){super(...arguments),this.id=OK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const FK={animation:{Feature:LK},exit:{Feature:UK}};function Gd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ff(t){return{point:{x:t.pageX,y:t.pageY}}}const BK=t=>e=>aE(e)&&t(e,ff(e));function gd(t,e,n,i){return Gd(t,e,BK(n),i)}const qI=(t,e)=>Math.abs(t-e);function zK(t,e){const n=qI(t.x,e.x),i=qI(t.y,e.y);return Math.sqrt(n**2+i**2)}class i2{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=qv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,b=zK(v.offset,{x:0,y:0})>=3;if(!T&&!b)return;const{point:C}=v,{timestamp:N}=$n;this.history.push({...C,timestamp:N});const{onStart:D,onMove:O}=this.handlers;T||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=zv(T,this.transformPagePoint),jt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=qv(v.type==="pointercancel"?this.lastMoveEventInfo:zv(T,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,D),C&&C(v,D)},!aE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=ff(e),c=zv(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=$n;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,qv(c,this.history)),this.removeListeners=df(gd(this.contextWindow,"pointermove",this.handlePointerMove),gd(this.contextWindow,"pointerup",this.handlePointerUp),gd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qo(this.updatePoint)}}function zv(t,e){return e?{point:e(t.point)}:t}function HI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qv({point:t},e){return{point:t,delta:HI(t,r2(e)),offset:HI(t,qK(e)),velocity:HK(e,.1)}}function qK(t){return t[0]}function r2(t){return t[t.length-1]}function HK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=r2(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Vs(e)));)n--;if(!i)return{x:0,y:0};const o=Ls(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const s2=1e-4,GK=1-s2,jK=1+s2,o2=.01,$K=0-o2,KK=0+o2;function Zi(t){return t.max-t.min}function YK(t,e,n){return Math.abs(t-e)<=n}function GI(t,e,n,i=.5){t.origin=i,t.originPoint=Xt(e.min,e.max,t.origin),t.scale=Zi(n)/Zi(e),t.translate=Xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=GK&&t.scale<=jK||isNaN(t.scale))&&(t.scale=1),(t.translate>=$K&&t.translate<=KK||isNaN(t.translate))&&(t.translate=0)}function yd(t,e,n,i){GI(t.x,e.x,n.x,i?i.originX:void 0),GI(t.y,e.y,n.y,i?i.originY:void 0)}function jI(t,e,n){t.min=n.min+e.min,t.max=t.min+Zi(e)}function JK(t,e,n){jI(t.x,e.x,n.x),jI(t.y,e.y,n.y)}function $I(t,e,n){t.min=e.min-n.min,t.max=t.min+Zi(e)}function vd(t,e,n){$I(t.x,e.x,n.x),$I(t.y,e.y,n.y)}function WK(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Xt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Xt(n,t,i.max):Math.min(t,n)),t}function KI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function XK(t,{top:e,left:n,bottom:i,right:r}){return{x:KI(t.x,n,r),y:KI(t.y,e,i)}}function YI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function QK(t,e){return{x:YI(t.x,e.x),y:YI(t.y,e.y)}}function ZK(t,e){let n=.5;const i=Zi(t),r=Zi(e);return r>i?n=wu(e.min,e.max-i,t.min):i>r&&(n=wu(t.min,t.max-r,e.min)),Hs(0,1,n)}function eY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const t_=.35;function tY(t=t_){return t===!1?t=0:t===!0&&(t=t_),{x:JI(t,"left","right"),y:JI(t,"top","bottom")}}function JI(t,e,n){return{min:WI(t,e),max:WI(t,n)}}function WI(t,e){return typeof t=="number"?t:t[e]||0}const XI=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:XI(),y:XI()}),QI=()=>({min:0,max:0}),pn=()=>({x:QI(),y:QI()});function gr(t){return[t("x"),t("y")]}function a2({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function nY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Hv(t){return t===void 0||t===1}function n_({scale:t,scaleX:e,scaleY:n}){return!Hv(t)||!Hv(e)||!Hv(n)}function Va(t){return n_(t)||l2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function l2(t){return ZI(t.x)||ZI(t.y)}function ZI(t){return t&&t!=="0%"}function hm(t,e,n){const i=t-n,r=e*i;return n+r}function eR(t,e,n,i,r){return r!==void 0&&(t=hm(t,r,i)),hm(t,n,i)+e}function i_(t,e=0,n=1,i,r){t.min=eR(t.min,e,n,i,r),t.max=eR(t.max,e,n,i,r)}function u2(t,{x:e,y:n}){i_(t.x,e.translate,e.scale,e.originPoint),i_(t.y,n.translate,n.scale,n.originPoint)}const tR=.999999999999,nR=1.0000000000001;function rY(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&su(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,u2(t,l)),i&&Va(o.latestValues)&&su(t,o.latestValues))}e.x<nR&&e.x>tR&&(e.x=1),e.y<nR&&e.y>tR&&(e.y=1)}function ru(t,e){t.min=t.min+e,t.max=t.max+e}function iR(t,e,n,i,r=.5){const o=Xt(t.min,t.max,r);i_(t,e,n,o,i)}function su(t,e){iR(t.x,e.x,e.scaleX,e.scale,e.originX),iR(t.y,e.y,e.scaleY,e.scale,e.originY)}function c2(t,e){return a2(iY(t.getBoundingClientRect(),e))}function sY(t,e,n){const i=c2(t,n),{scroll:r}=e;return r&&(ru(i.x,r.offset.x),ru(i.y,r.offset.y)),i}const d2=({current:t})=>t?t.ownerDocument.defaultView:null,oY=new WeakMap;class aY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ff(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:b,onDragStart:C}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zj(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gr(D=>{let O=this.getAxisMotionValue(D).get()||0;if(os.test(O)){const{projection:k}=this.visualElement;if(k&&k.layout){const F=k.layout.layoutBox[D];F&&(O=Zi(F)*(parseFloat(O)/100))}}this.originPoint[D]=O}),C&&jt.postRender(()=>C(p,v)),K0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:C,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=v;if(b&&this.currentDirection===null){this.currentDirection=lY(D),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),d=()=>gr(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new i2(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:d2(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&jt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Yh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=WK(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&tu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=XK(r.layoutBox,n):this.constraints=!1,this.elastic=tY(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=eY(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=sY(i,r.root,this.visualElement.getTransformPagePoint());let l=QK(r.layout.layoutBox,o);if(n){const c=n(nY(l));this.hasMutatedConstraints=!!c,c&&(l=a2(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=gr(p=>{if(!Yh(p,n,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,b=r?40:1e7,C={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return K0(this.visualElement,e),i.start(_E(e,i,0,n,this.visualElement,!1))}stopAnimation(){gr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){gr(n=>{const{drag:i}=this.getProps();if(!Yh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Xt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!tu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=ZK({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gr(l=>{if(!Yh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(Xt(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;oY.set(this.visualElement,this);const e=this.visualElement.current,n=gd(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();tu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),jt.read(i);const l=Gd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(gr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=t_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Yh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uY extends oa{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new aY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const rR=t=>(e,n)=>{t&&jt.postRender(()=>t(e,n))};class cY extends oa{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new i2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:d2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:rR(e),onStart:rR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&jt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=gd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=sR(t,e.target.x),i=sR(t,e.target.y);return`${n}% ${i}%`}},dY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Zo.parse(t);if(r.length>5)return i;const o=Zo.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const f=Xt(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class fY extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Dj(hY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),xp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||jt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),YT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function f2(t){const[e,n]=YD(),i=B.useContext(BT);return S.jsx(fY,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(nM),isPresent:e,safeToRemove:n})}const hY={borderRadius:{...qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qc,borderTopRightRadius:qc,borderBottomLeftRadius:qc,borderBottomRightRadius:qc,boxShadow:dY};function pY(t,e,n){const i=ui(t)?t:qd(t);return i.start(_E("",i,e,n)),i.animation}function mY(t){return t instanceof SVGElement&&t.tagName!=="svg"}const gY=(t,e)=>t.depth-e.depth;class yY{constructor(){this.children=[],this.isDirty=!1}add(e){lE(this.children,e),this.isDirty=!0}remove(e){uE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gY),this.isDirty=!1,this.children.forEach(e)}}function vY(t,e){const n=as.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Qo(i),t(o-e))};return jt.read(i,!0),()=>Qo(i)}const h2=["TopLeft","TopRight","BottomLeft","BottomRight"],_Y=h2.length,oR=t=>typeof t=="string"?parseFloat(t):t,aR=t=>typeof t=="number"||Oe.test(t);function TY(t,e,n,i,r,o){r?(t.opacity=Xt(0,n.opacity!==void 0?n.opacity:1,EY(i)),t.opacityExit=Xt(e.opacity!==void 0?e.opacity:1,0,SY(i))):o&&(t.opacity=Xt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<_Y;l++){const c=`border${h2[l]}Radius`;let d=lR(e,c),f=lR(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||aR(d)===aR(f)?(t[c]=Math.max(Xt(oR(d),oR(f),i),0),(os.test(f)||os.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=Xt(e.rotate||0,n.rotate||0,i))}function lR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const EY=p2(0,.5,DM),SY=p2(.5,.95,Qi);function p2(t,e,n){return i=>i<t?0:i>e?1:n(wu(t,e,i))}function uR(t,e){t.min=e.min,t.max=e.max}function mr(t,e){uR(t.x,e.x),uR(t.y,e.y)}function cR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function dR(t,e,n,i,r){return t-=e,t=hm(t,1/n,i),r!==void 0&&(t=hm(t,1/r,i)),t}function bY(t,e=0,n=1,i=.5,r,o=t,l=t){if(os.test(e)&&(e=parseFloat(e),e=Xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Xt(o.min,o.max,i);t===o&&(c-=e),t.min=dR(t.min,e,n,c,r),t.max=dR(t.max,e,n,c,r)}function fR(t,e,[n,i,r],o,l){bY(t,e[n],e[i],e[r],e.scale,o,l)}const wY=["x","scaleX","originX"],AY=["y","scaleY","originY"];function hR(t,e,n,i){fR(t.x,e,wY,n?n.x:void 0,i?i.x:void 0),fR(t.y,e,AY,n?n.y:void 0,i?i.y:void 0)}function pR(t){return t.translate===0&&t.scale===1}function m2(t){return pR(t.x)&&pR(t.y)}function mR(t,e){return t.min===e.min&&t.max===e.max}function xY(t,e){return mR(t.x,e.x)&&mR(t.y,e.y)}function gR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function g2(t,e){return gR(t.x,e.x)&&gR(t.y,e.y)}function yR(t){return Zi(t.x)/Zi(t.y)}function vR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class CY{constructor(){this.members=[]}add(e){lE(this.members,e),e.scheduleRender()}remove(e){if(uE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:T,skewX:b,skewY:C}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),C&&(i+=`skewY(${C}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const La={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},nd=typeof window<"u"&&window.MotionDebug!==void 0,Gv=["","X","Y","Z"],RY={visibility:"hidden"},_R=1e3;let NY=0;function jv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function y2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=AM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",jt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&y2(i)}function v2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=NY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nd&&(La.totalNodes=La.resolvedTargetDeltas=La.recalculatedProjection=0),this.nodes.forEach(MY),this.nodes.forEach(UY),this.nodes.forEach(FY),this.nodes.forEach(kY),nd&&window.MotionDebug.record(La)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new yY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new cE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mY(l),this.instance=l;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=vY(T,250),xp.hasAnimatedSinceResize&&(xp.hasAnimatedSinceResize=!1,this.nodes.forEach(ER))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:b,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||GY,{onLayoutAnimationStart:D,onLayoutAnimationComplete:O}=p.getProps(),k=!this.targetLayout||!g2(this.targetLayout,C)||b,F=!T&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const $={...rE(N,"layout"),onPlay:D,onComplete:O};(p.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($)}else T||ER(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&y2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TR);return}this.isUpdating||this.nodes.forEach(LY),this.isUpdating=!1,this.nodes.forEach(OY),this.nodes.forEach(PY),this.nodes.forEach(DY),this.clearAllSnapshots();const c=as.now();$n.delta=Hs(0,1e3/60,c-$n.timestamp),$n.timestamp=c,$n.isProcessing=!0,Vv.update.process($n),Vv.preRender.process($n),Vv.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,YT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VY),this.sharedNodes.forEach(zY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!m2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||Va(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),jY(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return pn();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some($Y))){const{scroll:p}=this.root;p&&(ru(d.x,p.offset.x),ru(d.y,p.offset.y))}return d}removeElementScroll(l){var c;const d=pn();if(mr(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&mr(d,l),ru(d.x,v.offset.x),ru(d.y,v.offset.y))}return d}applyTransform(l,c=!1){const d=pn();mr(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&su(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Va(p.latestValues)&&su(d,p.latestValues)}return Va(this.latestValues)&&su(d,this.latestValues),d}removeTransform(l){const c=pn();mr(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Va(f.latestValues))continue;n_(f.latestValues)&&f.updateSnapshot();const p=pn(),v=f.measurePageBox();mr(p,v),hR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Va(this.latestValues)&&hR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),vd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mr(this.target,this.layout.layoutBox),u2(this.target,this.targetDelta)):mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),vd(this.relativeTargetOrigin,this.target,b.target),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nd&&La.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||n_(this.parent.latestValues)||l2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(f=!1),f)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;mr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,b=this.treeScale.y;rY(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pn());const{target:C}=c;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cR(this.prevProjectionDelta.x,this.projectionDelta.x),cR(this.prevProjectionDelta.y,this.projectionDelta.y)),yd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==b||!vR(this.projectionDelta.x,this.prevProjectionDelta.x)||!vR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),nd&&La.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=pn(),b=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=b!==C,D=this.getStack(),O=!D||D.members.length<=1,k=!!(N&&!O&&this.options.crossfade===!0&&!this.path.some(HY));this.animationProgress=0;let F;this.mixTargetDelta=$=>{const K=$/1e3;SR(v.x,l.x,K),SR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vd(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qY(this.relativeTarget,this.relativeTargetOrigin,T,K),F&&xY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=pn()),mr(F,this.relativeTarget)),N&&(this.animationValues=p,TY(p,f,this.latestValues,K,k,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jt.update(()=>{xp.hasAnimatedSinceResize=!0,this.currentAnimation=pY(0,_R,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_R),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&_2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||pn();const v=Zi(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const T=Zi(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+T}mr(c,d),su(c,p),yd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new CY),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&jv("z",l,f,this.animationValues);for(let p=0;p<Gv.length;p++)jv(`rotate${Gv[p]}`,l,f,this.animationValues),jv(`skew${Gv[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return RY;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=wp(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=wp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Va(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=IY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(f.transform=p(T,f.transform));const{x:b,y:C}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${C.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:f.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in lm){if(T[N]===void 0)continue;const{correct:D,applyTo:O}=lm[N],k=f.transform==="none"?T[N]:D(T[N],v);if(O){const F=O.length;for(let $=0;$<F;$++)f[O[$]]=k}else f[N]=k}return this.options.layoutId&&(f.pointerEvents=v===this?wp(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(TR),this.root.sharedNodes.clear()}}}function PY(t){t.updateLayout()}function DY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=Zi(T);T.min=i[v].min,T.max=T.min+b}):_2(o,n.layoutBox,i)&&gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=Zi(i[v]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const c=iu();yd(c,i,n.layoutBox);const d=iu();l?yd(d,t.applyTransform(r,!0),n.measuredBox):yd(d,i,n.layoutBox);const f=!m2(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:b}=v;if(T&&b){const C=pn();vd(C,n.layoutBox,T.layoutBox);const N=pn();vd(N,i,b.layoutBox),g2(C,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function MY(t){nd&&La.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VY(t){t.clearSnapshot()}function TR(t){t.clearMeasurements()}function LY(t){t.isLayoutDirty=!1}function OY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ER(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function UY(t){t.resolveTargetDelta()}function FY(t){t.calcProjection()}function BY(t){t.resetSkewAndRotation()}function zY(t){t.removeLeadSnapshot()}function SR(t,e,n){t.translate=Xt(e.translate,0,n),t.scale=Xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function bR(t,e,n,i){t.min=Xt(e.min,n.min,i),t.max=Xt(e.max,n.max,i)}function qY(t,e,n,i){bR(t.x,e.x,n.x,i),bR(t.y,e.y,n.y,i)}function HY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const GY={duration:.45,ease:[.4,0,.1,1]},wR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),AR=wR("applewebkit/")&&!wR("chrome/")?Math.round:Qi;function xR(t){t.min=AR(t.min),t.max=AR(t.max)}function jY(t){xR(t.x),xR(t.y)}function _2(t,e,n){return t==="position"||t==="preserve-aspect"&&!YK(yR(e),yR(n),.2)}function $Y(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const KY=v2({attachResizeListener:(t,e)=>Gd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$v={current:void 0},T2=v2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$v.current){const t=new KY({});t.mount(window),t.setOptions({layoutScroll:!0}),$v.current=t}return $v.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),YY={pan:{Feature:cY},drag:{Feature:uY,ProjectionNode:T2,MeasureLayout:f2}};function CR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&jt.postRender(()=>o(e,ff(e)))}class JY extends oa{mount(){const{current:e}=this.node;e&&(this.unmount=Yj(e,n=>(CR(this.node,n,"Start"),i=>CR(this.node,i,"End"))))}unmount(){}}class WY extends oa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=df(Gd(this.node.current,"focus",()=>this.onFocus()),Gd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&jt.postRender(()=>o(e,ff(e)))}class XY extends oa{mount(){const{current:e}=this.node;e&&(this.unmount=Qj(e,n=>(IR(this.node,n,"Start"),(i,{success:r})=>IR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const r_=new WeakMap,Kv=new WeakMap,QY=t=>{const e=r_.get(t.target);e&&e(t)},ZY=t=>{t.forEach(QY)};function eJ({root:t,...e}){const n=t||document;Kv.has(n)||Kv.set(n,{});const i=Kv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(ZY,{root:t,...e})),i[r]}function tJ(t,e,n){const i=eJ(e);return r_.set(t,n),i.observe(t),()=>{r_.delete(t),i.unobserve(t)}}const nJ={some:0,all:1};class iJ extends oa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:nJ[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=f?p:v;T&&T(d)};return tJ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rJ(e,n))&&this.startObserver()}unmount(){}}function rJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const sJ={inView:{Feature:iJ},tap:{Feature:XY},focus:{Feature:WY},hover:{Feature:JY}},oJ={layout:{ProjectionNode:T2,MeasureLayout:f2}},s_={current:null},E2={current:!1};function aJ(){if(E2.current=!0,!!HT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>s_.current=t.matches;t.addListener(e),e()}else s_.current=!1}const lJ=[...$M,ri,Zo],uJ=t=>lJ.find(jM(t)),RR=new WeakMap;function cJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ui(r))t.addValue(i,r);else if(ui(o))t.addValue(i,qd(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,qd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const NR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=as.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,jt.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=lg(n),this.isVariantNode=eM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in T){const C=T[b];d[b]!==void 0&&ui(C)&&C.set(d[b],!1)}}mount(e){this.current=e,RR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),E2.current||aJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:s_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){RR.delete(this.current),this.projection&&this.projection.unmount(),Qo(this.notifyUpdate),Qo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ol.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Au){const n=Au[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<NR.length;i++){const r=NR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=cJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=qd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(HM(r)||kM(r))?r=parseFloat(r):!uJ(r)&&Zo.test(n)&&(r=BM(e,n)),this.setBaseTarget(e,ui(r)?r.get():r)),ui(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=WT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ui(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class S2 extends dJ{constructor(){super(...arguments),this.KeyframeResolver=KM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ui(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fJ(t){return window.getComputedStyle(t)}class hJ extends S2{constructor(){super(...arguments),this.type="html",this.renderInstance=uM}readValueFromInstance(e,n){if(ol.has(n)){const i=mE(n);return i&&i.default||0}else{const i=fJ(e),r=(oM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return c2(e,n)}build(e,n,i){ZT(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return iE(e,n,i)}}class pJ extends S2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ol.has(n)){const i=mE(n);return i&&i.default||0}return n=cM.has(n)?n:KT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return hM(e,n,i)}build(e,n,i){eE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){dM(e,n,i,r)}mount(e){this.isSVGTag=nE(e.tagName),super.mount(e)}}const mJ=(t,e)=>JT(t)?new pJ(e):new hJ(e,{allowProjection:t!==B.Fragment}),gJ=zj({...FK,...sJ,...YY,...oJ},mJ),Ns=nj(gJ),yJ=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),vJ=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return S.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[S.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[S.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),S.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),S.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),S.jsxs(Ns.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[S.jsxs(Ns.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[S.jsx(Ud,{}),S.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),S.jsxs(Ns.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",S.jsx("br",{}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),S.jsxs(Ns.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,S.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),S.jsxs(Ns.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[S.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[S.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",S.jsx(yJ,{})]}),S.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-2 sm:mt-0",children:"*Aucune carte bancaire requise"})]})]}),S.jsx(Ns.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),S.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),S.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),S.jsx(Ns.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),S.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})})]}),S.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:S.jsxs("div",{className:"max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),S.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(Yv,{icon:S.jsx(H0,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),S.jsx(Yv,{icon:S.jsx(Ud,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),S.jsx(Yv,{icon:S.jsx(jD,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),S.jsx("section",{className:"py-20 px-4 text-center",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),S.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},Yv=({icon:t,title:e,description:n})=>S.jsxs(Ns.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[S.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:S.jsx("div",{className:"w-6 h-6",children:t})}),S.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),_J=({onAnalyze:t,isAnalyzing:e})=>{const n=B.useRef(null),[i,r]=B.useState([]),[o,l]=B.useState(!1),[c,d]=B.useState(!1);B.useEffect(()=>{const k=()=>d(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),B.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const f=k=>{const F=k.map($=>({id:`${$.name}-${$.lastModified}-${Math.random()}`,file:$,preview:URL.createObjectURL($)}));r($=>[...$,...F])},p=k=>{k.target.files&&(f(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},C=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},D=k=>{const F=i.find($=>$.id===k);F&&URL.revokeObjectURL(F.preview),r($=>$.filter(K=>K.id!==k))},O=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:C,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(HD,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(H0,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(H0,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>D(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(ig,{})})]},k.id))}),S.jsxs("button",{onClick:O,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Ud,{}),"Analyser les ",i.length," article(s)"]})]})]})},TJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),EJ=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:r,isSet:o,isFavorite:l})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(UT,{})}):l?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Fd,{className:"w-4 h-4"})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(rg,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),S.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:S.jsx(ig,{})})]}),SJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},bJ=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var ee,pe;const[l,c]=B.useState("Hauts"),[d,f]=B.useState(SJ),[p,v]=B.useState(""),[T,b]=B.useState("favorites"),[C,N]=B.useState(!1),[D,O]=B.useState(new Set),k=B.useMemo(()=>n||[],[n]),F=B.useMemo(()=>new Set(k.flatMap(ne=>ne.itemIds||[])),[k]),$=t.length,K=[{name:"Hauts",icon:S.jsx(L7,{})},{name:"Bas",icon:S.jsx(O7,{})},{name:"Chaussures",icon:S.jsx(U7,{})},{name:"Accessoires",icon:S.jsx(F7,{})}],H=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],I=ne=>{C?O(he=>{const Ee=new Set(he);return Ee.has(ne.id)?Ee.delete(ne.id):Ee.add(ne.id),Ee}):i(ne)},R=(ne,he)=>{ne.stopPropagation(),D.has(he)&&O(Ee=>{const Ve=new Set(Ee);return Ve.delete(he),Ve}),r(he)},P=ne=>[...ne].sort((he,Ee)=>{switch(T){case"favorites":return(Ee.isFavorite?1:0)-(he.isFavorite?1:0);case"newest":return(Ee.createdAt||0)-(he.createdAt||0);case"oldest":return(he.createdAt||0)-(Ee.createdAt||0);case"color":return he.color.localeCompare(Ee.color);case"category":return he.category.localeCompare(Ee.category);default:return 0}}),V=B.useMemo(()=>{if(!p.trim())return t;const ne=p.toLowerCase();return t.filter(he=>he.analysis.toLowerCase().includes(ne)||he.color.toLowerCase().includes(ne)||he.material.toLowerCase().includes(ne)||he.category.toLowerCase().includes(ne))},[t,p]),U=B.useMemo(()=>{if(!l)return[];const ne=V.filter(Ee=>Ee.category===l),he=d[l];return he?ne.filter(Ee=>{const Ve=he.color==="Toutes"||Ee.color===he.color,Be=he.material==="Toutes"||Ee.material===he.material;return Ve&&Be}):ne},[V,l,(ee=d[l])==null?void 0:ee.color,(pe=d[l])==null?void 0:pe.material]),q=B.useMemo(()=>P(U),[U,T]),z=B.useMemo(()=>K.reduce((ne,{name:he})=>(ne[he]=V.filter(Ee=>Ee.category===he).length,ne),{}),[V]),Pe=B.useMemo(()=>{if(!l)return[];const ne=V.filter(he=>he.category===l).map(he=>he.color);return["Toutes",...Array.from(new Set(ne))]},[V,l]),De=B.useMemo(()=>{if(!l)return[];const ne=V.filter(he=>he.category===l).map(he=>he.material);return["Toutes",...Array.from(new Set(ne))]},[V,l]),Z=ne=>{l&&f(he=>({...he,[l]:{...he[l],color:ne}}))},ae=ne=>{l&&f(he=>({...he,[l]:{...he[l],material:ne}}))},me=ne=>{c(l===ne?null:ne)},xe=()=>{N(!C),O(new Set)},Ce=()=>{if(D.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const ne=window.prompt("Donnez un nom  cet ensemble :");ne&&(o(ne,Array.from(D)),xe())},j=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((ne,he)=>S.jsx(TJ,{},he))})]}):$===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(pI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(pI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[$," vtement",$>1?"s":""]})]})]}),C?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:xe,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:Ce,disabled:D.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",D.size,")"]})]}):S.jsxs("button",{onClick:xe,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(rg,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx($D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:ne=>v(ne.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:j,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(ig,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(KD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:ne=>b(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:H.map(ne=>S.jsx("option",{value:ne.value,children:ne.label},ne.value))}),S.jsx(om,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[V.length," rsultat",V.length>1?"s":"",' pour "',p,'"']}),C&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:ne,icon:he})=>{const Ee=z[ne]||0,Ve=l===ne;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>me(ne),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:he}),S.jsx("span",{className:"font-semibold text-lg",children:ne}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Ee,")"]})]}),S.jsx(om,{className:`w-5 h-5 transition-transform ${Ve?"rotate-180":""}`})]}),Ve&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:d[ne].color,onChange:Be=>Z(Be.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Pe.map(Be=>S.jsx("option",{value:Be,children:Be},Be))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:d[ne].material,onChange:Be=>ae(Be.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:De.map(Be=>S.jsx("option",{value:Be,children:Be},Be))})]})]}),q.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(Y7,{mode:"popLayout",children:q.map((Be,Tt)=>S.jsx(Ns.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Tt*.05,type:"spring",bounce:.3},children:S.jsx(EJ,{imageSrc:Be.imageSrc,analysis:Be.analysis,onClick:()=>I(Be),onRemove:Nn=>R(Nn,Be.id),isSelected:D.has(Be.id),isSet:F.has(Be.id),isFavorite:Be.isFavorite})},Be.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},ne)})})]})},b2=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=In.useState(""),d=p=>{p.preventDefault(),n(l||"Casual")},f=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:d,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:f.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Ud,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},wJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l})=>{const[c,d]=B.useState(null);B.useEffect(()=>{if(!c)return;const p=v=>{v.key==="Escape"&&d(null)};return window.addEventListener("keydown",p),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",p),document.body.style.overflow="auto"}},[c]);const f=p=>{const{id:v,description:T}=p,b=v?v.trim():"",C=T?T.trim().toLowerCase():"";let N=e.find(O=>O.id===b);if(N)return N;let D=n.find(O=>O.id===b);if(D)return D;if(b&&(N=e.find(O=>O.analysis.toLowerCase().includes(b.toLowerCase())),N)||C&&(N=e.find(O=>{const k=O.analysis.toLowerCase();return k.includes(C)||C.includes(k)}),N))return N};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((p,v)=>{const T=i.some(C=>C.titre===p.titre&&C.description===p.description),b=l===p.titre;return S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:p.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>o(p),disabled:b,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:b?S.jsx(HD,{className:"h-5 w-5"}):S.jsx(z7,{})}),S.jsx("button",{onClick:()=>r(p),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?S.jsx(Fd,{className:"w-6 h-6 text-gold"}):S.jsx(FT,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:p.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:p.vetements.map((C,N)=>{const D=f(C),O=D?D.imageSrc:null;return S.jsx("button",{onClick:()=>O&&d(O),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!O,"aria-label":`Agrandir l'image de : ${C.description}`,title:C.description,children:O?S.jsx("img",{src:O,alt:C.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(GD,{})})},N)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:p.vetements.map((C,N)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:C.description},N))})]},v)})}),c&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>d(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[S.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>d(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(OT,{})})]})})]})},pm=B.memo(wJ),AJ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l})=>{const[c,d]=B.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[f,p]=B.useState(!1),v=e.find(D=>D.itemIds.includes(t.id));B.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),B.useEffect(()=>{const D=F=>{F.key==="Escape"&&n()};document.body.style.overflow="hidden",window.addEventListener("keydown",D);const O=document.querySelector('[role="dialog"]'),k=O==null?void 0:O.querySelector("button, input, textarea, select");return k==null||k.focus(),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",D)}},[n]);const T=D=>{const{name:O,value:k}=D.target;d(F=>({...F,[O]:k}))},b=D=>{D.preventDefault(),i({...t,...c}),p(!0),setTimeout(()=>{p(!1)},2e3)},C=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},N=D=>{D.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),S.jsx("button",{onClick:N,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Fd,{className:"w-6 h-6 text-red-500"}):S.jsx(FT,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:S.jsx(OT,{})})]}),S.jsxs("form",{onSubmit:b,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[S.jsxs("div",{className:"space-y-4 flex-grow",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(D=>S.jsx("option",{value:D,children:D},D))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),v&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:v.name,children:v.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(v.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(B7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:C,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(ig,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(Ud,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:f,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${f?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:f?S.jsxs(S.Fragment,{children:[S.jsx(UT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},w2=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=B.useState(3),[l,c]=B.useState(""),[d,f]=B.useState(""),p=v=>{v.preventDefault();const T=l||"",b=d?parseFloat(d):void 0;T.trim()&&r>0&&n(r,T,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:d,onChange:v=>f(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(jD,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},A2=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(f=>f.id===o);if(c)return c;let d=n.find(f=>f.id===o);if(d)return d;if(c=e.find(f=>f.analysis===o),c||(c=e.find(f=>f.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(GD,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},za={light:()=>{"vibrate"in navigator&&navigator.vibrate(10)},medium:()=>{"vibrate"in navigator&&navigator.vibrate(20)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,50,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50])}},xJ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=B.useState(!1),o=B.useRef(null),l=B.useRef(null),c=v=>{const T=Array.from(v.target.files||[]);T.length>0&&(za.success(),t(T),r(!1)),v.target.value=""},d=()=>{za.medium(),r(!i)},f=()=>{var v;(v=o.current)==null||v.click()},p=()=>{var v;(v=l.current)==null||v.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:d,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},CJ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,isAnalyzingWardrobe:o,clothingCount:l,favoriteOutfitCount:c})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&S.jsx("button",{onClick:t,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[S.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),S.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsxs("div",{className:"text-red-500",children:[S.jsx(FT,{})," "]}),S.jsx("p",{className:"text-2xl font-bold",children:c}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),IJ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>{za.light(),e(r.id)},className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},RJ=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]})]},o))})]})]})]})})};var NJ=PJ()?B.useLayoutEffect:B.useEffect;function PJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function DJ(){var t=B.useState(Object.create(null)),e=t[1];return B.useCallback(function(){e(Object.create(null))},[])}var MJ=T1(),kJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=B.useRef(null),l=B.useRef(null),c=DJ();return NJ(function(){if(o.current){var d=o.current.ownerDocument;return l.current=d==null?void 0:d.createElement(r),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?MJ.createPortal(n,l.current):B.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)};function TE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ut(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function qt(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Pt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Pt||(Pt={}));var Cu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Cu||(Cu={}));var o_=Pt.Start,EE=Pt.Stop,hf=Pt.Raise,dg=Pt.Send,x2=Pt.Cancel,VJ=Pt.NullEvent,SE=Pt.Assign;Pt.After;Pt.DoneState;var C2=Pt.Log,LJ=Pt.Init,a_=Pt.Invoke;Pt.ErrorExecution;var PR=Pt.ErrorPlatform,OJ=Pt.ErrorCustom,I2=Pt.Update,UJ=Pt.Choose,FJ=Pt.Pure,R2=".",DR={},l_="xstate.guard",BJ="",Jh;function bE(t,e,n){n===void 0&&(n=R2);var i=_d(t,n),r=_d(e,n);return St(r)?St(i)?r===i:!1:St(i)?i in r:Object.keys(i).every(function(o){return o in r?bE(i[o],r[o]):!1})}function N2(t){try{return St(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function u_(t,e){try{return Hu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function zJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function _d(t,e){if(zJ(t))return t.value;if(Hu(t))return mm(t);if(typeof t!="string")return t;var n=u_(t,e);return mm(n)}function mm(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function id(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function MR(t,e,n){var i,r,o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];n(f)&&(o[d]=e(f,d,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var qJ=function(t){return function(e){var n,i,r=e;try{for(var o=ut(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function HJ(t,e){return function(n){var i,r,o=n;try{for(var l=ut(t),c=l.next();!c.done;c=l.next()){var d=c.value;o=o[e][d]}}catch(f){i={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function Cp(t){if(!t)return[[]];if(St(t))return[[t]];var e=Wt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:Cp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Wt(t){var e;return(e=[]).concat.apply(e,qt([],gt(t),!1))}function P2(t){return Hu(t)?t:[t]}function Pr(t){return t===void 0?[]:P2(t)}function gm(t,e,n){var i,r;if(_t(t))return t(e,n.data);var o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];_t(f)?o[d]=f(e,n.data):o[d]=f}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function GJ(t){return/^(done|error)\./.test(t)}function kR(t){return!!(t instanceof Promise||t!==null&&(_t(t)||typeof t=="object")&&_t(t.then))}function jJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function $J(t,e){var n,i,r=gt([[],[]],2),o=r[0],l=r[1];try{for(var c=ut(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function D2(t,e){return id(t.states,function(n,i){if(n){var r=(St(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:D2(n,r)}}})}function KJ(t,e){return{current:e,states:D2(t,e)}}function VR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,d,f=l.assignment,p={state:i,action:l,_event:e},v={};if(_t(f))v=f(o,e.data,p);else try{for(var T=ut(Object.keys(f)),b=T.next();!b.done;b=T.next()){var C=b.value,N=f[C];v[C]=_t(N)?N(o,e.data,p):N}}catch(D){c={error:D}}finally{try{b&&!b.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var YJ=function(){};function Hu(t){return Array.isArray(t)}function _t(t){return typeof t=="function"}function St(t){return typeof t=="string"}function M2(t,e){if(t)return St(t)?{type:l_,name:t,predicate:e?e[t]:void 0}:_t(t)?{type:l_,name:t.name,predicate:t}:t}function JJ(t){try{return"subscribe"in t&&_t(t.subscribe)}catch{return!1}}var ko=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Jh={},Jh[ko]=function(){return this},Jh[Symbol.observable]=function(){return this};function Iu(t){return!!t&&"__xstatenode"in t}function WJ(t){return!!t&&typeof t.send=="function"}function fg(t,e){return St(t)||typeof t=="number"?ye({type:t},e):t}function jn(t,e){if(!St(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=fg(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Gl(t,e){var n=P2(e).map(function(i){return typeof i>"u"||typeof i=="string"||Iu(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function XJ(t){if(!(t===void 0||t===BJ))return Pr(t)}function k2(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===l_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function V2(t){return typeof t=="string"?{type:t}:t}function Ip(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function Wh(t,e){return"".concat(t,":invocation[").concat(e,"]")}function c_(t){return(t.type===hf||t.type===dg&&t.to===Cu.Internal)&&typeof t.delay!="number"}var mu=jn({type:LJ});function d_(t,e){return e&&e[t]||void 0}function jd(t,e){var n;if(St(t)||typeof t=="number"){var i=d_(t,e);_t(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(_t(t))n={type:t.name||t.toString(),exec:t};else{var i=d_(t.type,e);if(_t(i))n=ye(ye({},t),{exec:i});else if(i){var r=i.type||t.type;n=ye(ye(ye({},i),t),{type:r})}else n=t}return n}var Vo=function(t,e){if(!t)return[];var n=Hu(t)?t:[t];return n.map(function(i){return jd(i,e)})};function wE(t){var e=jd(t);return ye(ye({id:St(t)?t:e.id},e),{type:e.type})}function QJ(t,e){return{type:hf,event:typeof t=="function"?t:fg(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function ZJ(t,e,n,i){var r={_event:n},o=jn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;return ye(ye({},t),{type:hf,_event:o,delay:l})}function eW(t,e){return{to:e?e.to:void 0,type:dg,event:_t(t)?t:fg(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_t(t)?t.name:N2(t)}}function tW(t,e,n,i){var r={_event:n},o=jn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;var d=_t(t.to)?t.to(e,n.data,r):t.to;return ye(ye({},t),{to:d,_event:o,event:o.data,delay:l})}var nW=function(t,e,n){return ye(ye({},t),{value:St(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},iW=function(t){return{type:x2,sendId:t}};function rW(t){var e=wE(t);return{type:Pt.Start,activity:e,exec:void 0}}function sW(t){var e=_t(t)?t:wE(t);return{type:Pt.Stop,activity:e,exec:void 0}}function oW(t,e,n){var i=_t(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Pt.Stop,activity:r};return o}var aW=function(t){return{type:SE,assignment:t}};function lW(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.After,"(").concat(t,")").concat(n)}function Xh(t,e){var n="".concat(Pt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function Rp(t,e){var n="".concat(Pt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function rd(t,e){var n="".concat(Pt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var uW=function(t){var e,n,i=[];try{for(var r=ut(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===SE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function ym(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:uW(r),d=c.length?VR(n,i,c,e):n,f=l?[n]:void 0,p=[];function v(C,N){var D;switch(N.type){case hf:{var O=ZJ(N,d,i,t.options.delays);return o&&typeof O.delay=="number"&&o(O,d,i),O}case dg:var k=tW(N,d,i,t.options.delays);return o&&k.to!==Cu.Internal&&(C==="entry"?p.push(k):o(k,d,i)),k;case C2:{var F=nW(N,d,i);return o==null||o(F,d,i),F}case UJ:{var $=N,K=(D=$.conds.find(function(Z){var ae=M2(Z.cond,t.options.guards);return!ae||k2(t,ae,d,i,o?void 0:e)}))===null||D===void 0?void 0:D.actions;if(!K)return[];var H=gt(ym(t,e,d,i,[{type:C,actions:Vo(Pr(K),t.options.actions)}],o,l),2),I=H[0],R=H[1];return d=R,f==null||f.push(d),I}case FJ:{var K=N.get(d,i.data);if(!K)return[];var P=gt(ym(t,e,d,i,[{type:C,actions:Vo(Pr(K),t.options.actions)}],o,l),2),V=P[0],U=P[1];return d=U,f==null||f.push(d),V}case EE:{var F=oW(N,d,i);return o==null||o(F,n,i),F}case SE:{d=VR(d,i,[N],o?void 0:e),f==null||f.push(d);break}default:var q=jd(N,t.options.actions),z=q.exec;if(o)o(q,d,i);else if(z&&f){var Pe=f.length-1,De=ye(ye({},q),{exec:function(Z){for(var ae=[],me=1;me<arguments.length;me++)ae[me-1]=arguments[me];z.apply(void 0,qt([f[Pe]],gt(ae),!1))}});q=De}return q}}function T(C){var N,D,O=[];try{for(var k=ut(C.actions),F=k.next();!F.done;F=k.next()){var $=F.value,K=v(C.type,$);K&&(O=O.concat(K))}}catch(H){N={error:H}}finally{try{F&&!F.done&&(D=k.return)&&D.call(k)}finally{if(N)throw N.error}}return p.forEach(function(H){o(H,d,i)}),p.length=0,O}var b=Wt(r.map(T));return[b,d]}var Zl=function(t,e){var n=e(t);return n};function L2(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ko]=function(){return this},e}function cW(t,e,n,i){var r,o=V2(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?gm(t.data,n,i):void 0,d=l?O2(l,t.id,c):L2(t.id);return d.meta=t,d}function O2(t,e,n){var i=L2(e);if(i.deferred=!0,Iu(t)){var r=i.state=Zl(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function dW(t){try{return typeof t.send=="function"}catch{return!1}}function fW(t){return dW(t)&&"id"in t}function hW(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ko]=function(){return this},e),t)}var vm=function(t){return t.type==="atomic"||t.type==="final"};function U2(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function $d(t){return U2(t).filter(function(e){return e.type!=="history"})}function F2(t){var e=[t];return vm(t)?e:e.concat(Wt($d(t).map(F2)))}function sd(t,e){var n,i,r,o,l,c,d,f,p=new Set(t),v=f_(p),T=new Set(e);try{for(var b=ut(T),C=b.next();!C.done;C=b.next())for(var N=C.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){n={error:P}}finally{try{C&&!C.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var O=f_(T);try{for(var k=ut(T),F=k.next();!F.done;F=k.next()){var N=F.value;if(N.type==="compound"&&(!O.get(N)||!O.get(N).length))v.get(N)?v.get(N).forEach(function(V){return T.add(V)}):N.initialStateNodes.forEach(function(V){return T.add(V)});else if(N.type==="parallel")try{for(var $=(l=void 0,ut($d(N))),K=$.next();!K.done;K=$.next()){var H=K.value;T.has(H)||(T.add(H),v.get(H)?v.get(H).forEach(function(V){return T.add(V)}):H.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{K&&!K.done&&(c=$.return)&&c.call($)}finally{if(l)throw l.error}}}}catch(P){r={error:P}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var I=ut(T),R=I.next();!R.done;R=I.next())for(var N=R.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){d={error:P}}finally{try{R&&!R.done&&(f=I.return)&&f.call(I)}finally{if(d)throw d.error}}return T}function B2(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(vm(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=B2(o,e)}),r}function f_(t){var e,n,i=new Map;try{for(var r=ut(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function pW(t,e){var n=sd([t],e);return B2(t,f_(n))}function od(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function mW(t){return qt([],gt(new Set(Wt(qt([],gt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Np(t,e){return e.type==="compound"?$d(e).some(function(n){return n.type==="final"&&od(t,n)}):e.type==="parallel"?$d(e).every(function(n){return Np(t,n)}):!1}function gW(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function LR(t){return new Set(Wt(t.map(function(e){return e.tags})))}function z2(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(St(t)||St(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return z2(t[r],e[r])})}function yW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function vW(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var yr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=DR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||DR,this.meta=gW(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return mW(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=mu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=mu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),St(e))return[e];var r=Object.keys(e);return r.concat.apply(r,qt([],gt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=TE(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return bE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;YJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),_W={deferEvents:!1},OR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},_W),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),Jv=new Map,TW=0,Hc={bookId:function(){return"x:".concat(TW++)},register:function(t,e){return Jv.set(t,e),t},get:function(t){return Jv.get(t)},free:function(t){Jv.delete(t)}};function AE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function EW(){var t=AE();if(t&&"__xstate__"in t)return t.__xstate__}function SW(t){if(AE()){var e=EW();e&&e.register(t)}}function bW(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var f=r.shift();n=t.transition(n,f,d),i.forEach(function(p){return p.next(n)})}o=!1}},c=hW({id:e.id,send:function(f){r.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,p,v){var T=Ip(f,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var wW={sync:!1,autoForward:!1},Ln;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Ln||(Ln={}));var AW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Ln.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if(Hu(p))return i.batch(p),i.state;var T=jn(fg(p,v));if(i.status===Ln.Stopped)return i.state;if(i.status!==Ln.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(p,v,T){var b=i.parent&&(v===Cu.Parent||i.parent.id===v),C=b?i.parent:St(v)?v===Cu.Internal?i:i.children.get(v)||Hc.get(v):WJ(v)?v:void 0;if(!C){if(!b)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in C){if(i.status!==Ln.Stopped||i.parent!==C||i.state.done){var N=ye(ye({},p),{name:p.name===OJ?"".concat(rd(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,N]):C.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,p.data]):C.send(p.data)},this._exec=function(p,v,T,b){b===void 0&&(b=i.machine.options.actions);var C=p.exec||d_(p.type,b),N=_t(C)?C:C?C.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(Pe){throw i.parent&&i.parent.send({type:"xstate.error",data:Pe}),Pe}switch(p.type){case hf:{var D=p;i.defer(D);break}case dg:var O=p;if(typeof O.delay=="number"){i.defer(O);return}else O.to?i.sendTo(O._event,O.to,T===mu):i.send(O._event);break;case x2:i.cancel(p.sendId);break;case o_:{if(i.status!==Ln.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Pt.Invoke){var F=V2(k.src),$=i.machine.options.services?i.machine.options.services[F.type]:void 0,K=k.id,H=k.data,I="autoForward"in k?k.autoForward:!!k.forward;if(!$)return;var R=H?gm(H,v,T):void 0;if(typeof $=="string")return;var P=_t($)?$(v,T.data,{data:R,src:F,meta:k.meta}):$;if(!P)return;var V=void 0;Iu(P)&&(P=R?P.withContext(R):P,V={autoForward:I}),i.spawn(P,K,V)}else i.spawnActivity(k);break}case EE:{i.stopChild(p.activity.id);break}case C2:var U=p,q=U.label,z=U.value;q?i.logger(q,z):i.logger(z);break}};var r=ye(ye({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,d=r.id,f=d!==void 0?d:e.id;this.id=f,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new OR({deferEvents:this.options.deferEvents}),this.sessionId=Hc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Zl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ut(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,d,f,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===mu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(P){v.state.children[P.id]=P}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ut(this.eventListeners),C=b.next();!C.done;C=b.next()){var N=C.value;N(e.event)}}catch(P){i={error:P}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var D=ut(this.listeners),O=D.next();!O.done;O=D.next()){var N=O.value;N(e,e.event)}}catch(P){o={error:P}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ut(this.contextListeners),F=k.next();!F.done;F=k.next()){var $=F.value;$(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){c={error:P}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(P){return P.type==="final"&&P.parent===v.machine}),H=K&&K.doneData?gm(K.doneData,e.context,n):void 0;this._doneEvent=Rp(this.id,H);try{for(var I=ut(this.doneListeners),R=I.next();!R.done;R=I.next()){var N=R.value;N(this._doneEvent)}}catch(P){f={error:P}}finally{try{R&&!R.done&&(p=I.return)&&p.call(I)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Hc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Ln.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Ip(e,n,i);this.listeners.add(o.next),this.status!==Ln.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Ln.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Ln.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Ln.Running)return this;this.machine._init(),Hc.register(this.sessionId,this),this.initialized=!0,this.status=Ln.Running;var i=e===void 0?this.initialState:Zl(this,function(){return yW(e)?n.machine.resolveState(e):n.machine.resolveState(yr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,mu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){_t(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,d,f,p;try{for(var v=ut(this.listeners),T=v.next();!T.done;T=v.next()){var b=T.value;this.listeners.delete(b)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var C=ut(this.stopListeners),N=C.next();!N.done;N=C.next()){var b=N.value;b(),this.stopListeners.delete(b)}}catch(I){i={error:I}}finally{try{N&&!N.done&&(r=C.return)&&r.call(C)}finally{if(i)throw i.error}}try{for(var D=ut(this.contextListeners),O=D.next();!O.done;O=D.next()){var b=O.value;this.contextListeners.delete(b)}}catch(I){o={error:I}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ut(this.doneListeners),F=k.next();!F.done;F=k.next()){var b=F.value;this.doneListeners.delete(b)}}catch(I){c={error:I}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Ln.Stopped,this._initialState=void 0;try{for(var $=ut(Object.keys(this.delayedEventsMap)),K=$.next();!K.done;K=$.next()){var H=K.value;this.clock.clearTimeout(this.delayedEventsMap[H])}}catch(I){f={error:I}}finally{try{K&&!K.done&&(p=$.return)&&p.call($)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new OR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=jn({type:"xstate.stop"}),o=Zl(e,function(){var l=Wt(qt([],gt(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return Vo(v.onExit,e.machine.options.actions)})),c=gt(ym(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],f=c[1],p=new yr({value:e.state.value,context:f,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(v){return!c_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Hc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Ln.NotStarted&&this.options.deferEvents)){if(this.status!==Ln.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,d=[],f=function(b){var C=jn(b);n.forward(C),l=Zl(n,function(){return n.machine.transition(l,C,void 0,i||void 0)}),d.push.apply(d,qt([],gt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return vW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ut(e),v=p.next();!v.done;v=p.next()){var T=v.value;f(T)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=d,n.update(l,jn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=jn(e);if(r.name.indexOf(PR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(PR)===0}))throw r.data.data;var o=Zl(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ut(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),_t(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Ln.Running)return O2(e,n);if(kR(e))return this.spawnPromise(Promise.resolve(e),n);if(_t(e))return this.spawnCallback(e,n);if(fW(e))return this.spawnActor(e,n);if(JJ(e))return this.spawnObservable(e,n);if(Iu(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(jJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),o=ye(ye({},wW),n);o.sync&&r.onTransition(function(c){i.send(I2,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(jn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=bW(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(d){o||(l=d,r.removeChild(n),r.send(jn(Rp(n,d),{origin:n})))},function(d){if(!o){r.removeChild(n);var f=rd(n,d);try{r.send(jn(f,{origin:n}))}catch{r.devTools&&r.devTools.send(f,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,f,p){var v=Ip(d,f,p),T=!1;return e.then(function(b){T||(v.next(b),!T&&v.complete())},function(b){T||v.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[ko]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,d,f=function(T){d=T,c.forEach(function(b){return b(T)}),!o&&r.send(jn(T,{origin:n}))},p;try{p=e(f,function(T){l.add(T)})}catch(T){this.send(rd(n,T))}if(kR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=Ip(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,_t(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[ko]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(d){o=d,r.send(jn(d,{origin:n}))},function(d){r.removeChild(n),r.send(jn(rd(n,d),{origin:n}))},function(){r.removeChild(n),r.send(jn(Rp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,f,p){return e.subscribe(d,f,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[ko]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[ko]=function(){return this},i))},t.prototype.attachDev=function(){var e=AE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}SW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ko]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Ln.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=q2,t})();function q2(t,e){var n=new AW(t,e);return n}function xW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Qh(t){return ye(ye({type:a_},t),{toJSON:function(){t.onDone,t.onError;var e=TE(t,["onDone","onError"]);return ye(ye({},e),{type:a_,src:xW(t.src)})}})}var Zh="",h_="#",Wv="*",jl={},$l=function(t){return t[0]===h_},CW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},IW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(CW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:R2),this.id=this.config.id||qt([this.machine.key],gt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?id(this.config.states,function(f,p){var v,T=new t(f,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ye((v={},v[T.id]=T,v),T.idMap)),T}):jl;var c=0;function d(f){var p,v;f.order=c++;try{for(var T=ut(U2(f)),b=T.next();!b.done;b=T.next()){var C=b.value;d(C)}}catch(N){p={error:N}}finally{try{b&&!b.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var p=f.event;return p===Zh}):Zh in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Pr(this.config.entry||this.config.onEntry).map(function(f){return jd(f)}),this.onExit=Pr(this.config.exit||this.config.onExit).map(function(f){return jd(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Pr(this.config.invoke).map(function(f,p){var v,T;if(Iu(f)){var b=Wh(o.id,p);return o.machine.options.services=ye((v={},v[b]=f,v),o.machine.options.services),Qh({src:b,id:b})}else if(St(f.src)){var b=f.id||Wh(o.id,p);return Qh(ye(ye({},f),{id:b,src:f.src}))}else if(Iu(f.src)||_t(f.src)){var b=f.id||Wh(o.id,p);return o.machine.options.services=ye((T={},T[b]=f.src,T),o.machine.options.services),Qh(ye(ye({id:b},f),{src:b}))}else{var C=f.src;return Qh(ye(ye({id:Wh(o.id,p)},f),{src:C}))}}),this.activities=Pr(this.config.activities).concat(this.invoke).map(function(f){return wE(f)}),this.transition=this.transition.bind(this),this.tags=Pr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||F2(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ye(ye({},r),e.actions),activities:ye(ye({},o),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return _t(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:id(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Zh,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===Wv});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=_t(o)?"".concat(e.id,":delay[").concat(l,"]"):o,d=lW(c,e.id);return e.onEntry.push(eW(d,{delay:o})),e.onExit.push(iW(d)),d},r=Hu(n)?n.map(function(o,l){var c=i(o.delay,l);return ye(ye({},o),{event:c})}):Wt(Object.keys(n).map(function(o,l){var c=n[o],d=St(c)?{target:c}:c,f=isNaN(+o)?o:+o,p=i(f,l);return Pr(d).map(function(v){return ye(ye({},v),{event:p,delay:f})})}));return r.map(function(o){var l=o.delay;return ye(ye({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof yr?e.value:_d(e,this.delimiter);if(St(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,qt([],gt(Wt(l.map(function(d){return i.getStateNode(d).getStateNodes(r[d])}))),!1)),c},t.prototype.handles=function(e){var n=N2(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof yr?e:yr.create(e),i=Array.from(sd([],this.getStateNodes(n.value)));return new yr(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:Np(i,this),tags:LR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ut(Object.keys(e)),d=c.next();!d.done;d=c.next()){var f=d.value,p=e[f];if(p){var v=this.getStateNode(f),T=v._transition(p,n,i);T&&(l[f]=T)}}}catch(O){r={error:O}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(O){return l[O]}),C=Wt(b.map(function(O){return O.transitions})),N=b.some(function(O){return O.transitions.length>0});if(!N)return this.next(n,i);var D=Wt(Object.keys(l).map(function(O){return l[O].configuration}));return{transitions:C,exitSet:Wt(b.map(function(O){return O.exitSet})),configuration:D,source:n,actions:Wt(Object.keys(l).map(function(O){return l[O].actions}))}},t.prototype._transition=function(e,n,i){return St(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,jn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],d=[],f;try{for(var p=ut(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,b=T.cond,C=T.in,N=e.context,D=C?St(C)&&$l(C)?e.matches(_d(this.getStateNodeById(C).path,this.delimiter)):bE(_d(C,this.delimiter),qJ(this.path.slice(0,-2))(e.value)):!0,O=!1;try{O=!b||k2(this.machine,b,N,n,e)}catch($){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat($.message))}if(O&&D){T.target!==void 0&&(d=T.target),c.push.apply(c,qt([],gt(T.actions),!1)),f=T;break}}}catch($){i={error:$}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Wt(d.map(function($){return o.getRelativeStateNodes($,e.historyValue)})),F=!!f.internal;return{transitions:[f],exitSet:F?[]:Wt(d.map(function($){return o.getPotentiallyReenteringNodes($)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var d,f,p,v,T=this,b=l?sd([],this.getStateNodes(l.value)):[],C=new Set;try{for(var N=ut(Array.from(e).sort(function(U,q){return U.order-q.order})),D=N.next();!D.done;D=N.next()){var O=D.value;(!od(b,O)||od(i.exitSet,O)||O.parent&&C.has(O.parent))&&C.add(O)}}catch(U){d={error:U}}finally{try{D&&!D.done&&(f=N.return)&&f.call(N)}finally{if(d)throw d.error}}try{for(var k=ut(b),F=k.next();!F.done;F=k.next()){var O=F.value;(!od(e,O)||od(i.exitSet,O.parent))&&i.exitSet.push(O)}}catch(U){p={error:U}}finally{try{F&&!F.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(U,q){return q.order-U.order});var $=Array.from(C).sort(function(U,q){return U.order-q.order}),K=new Set(i.exitSet),H=Wt($.map(function(U){var q=[];if(U.type!=="final")return q;var z=U.parent;if(!z.parent)return q;q.push(Xh(U.id,U.doneData),Xh(z.id,U.doneData?gm(U.doneData,r,o):void 0));var Pe=z.parent;return Pe.type==="parallel"&&$d(Pe).every(function(De){return Np(i.configuration,De)})&&q.push(Xh(Pe.id)),q})),I=$.map(function(U){var q=U.onEntry,z=U.activities.map(function(Pe){return rW(Pe)});return{type:"entry",actions:Vo(c?qt(qt([],gt(q),!1),gt(z),!1):qt(qt([],gt(z),!1),gt(q),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:H.map(function(U){return QJ(U)})}),R=Array.from(K).map(function(U){return{type:"exit",actions:Vo(qt(qt([],gt(U.onExit),!1),gt(U.activities.map(function(q){return sW(q)})),!1),T.machine.options.actions)}}),P=R.concat({type:"transition",actions:Vo(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=Vo(Wt(qt([],gt(e),!1).sort(function(U,q){return q.order-U.order}).map(function(U){return U.onExit})),this.machine.options.actions).filter(function(U){return!c_(U)});return P.concat({type:"stop",actions:V})}return P},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=jn(n),l;if(e instanceof yr)l=i===void 0?e:this.resolveState(yr.from(e,i));else{var c=St(e)?this.resolve(mm(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(yr.from(c,d))}if(this.strict&&!this.events.includes(o.name)&&!GJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=sd([],this.getStateNodes(l.value)),v=f.configuration.length?sd(p,f.configuration):p;return f.configuration=qt([],gt(v),!1),this.resolveTransition(f,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,qt([],gt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,d,f,p=this;o===void 0&&(o=mu);var v=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],C=Np(b,this),N=T?pW(this.machine,v):void 0,D=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,O=this.getActions(new Set(b),C,e,i,o,n,r),k=n?ye({},n.activities):{};try{for(var F=ut(O),$=F.next();!$.done;$=F.next()){var K=$.value;try{for(var H=(d=void 0,ut(K.actions)),I=H.next();!I.done;I=H.next()){var R=I.value;R.type===o_?k[R.activity.id||R.activity.type]=R:R.type===EE&&(k[R.activity.id||R.activity.type]=!1)}}catch(ne){d={error:ne}}finally{try{I&&!I.done&&(f=H.return)&&f.call(H)}finally{if(d)throw d.error}}}}catch(ne){l={error:ne}}finally{try{$&&!$.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}var P=gt(ym(this,n,i,o,O,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=P[0],U=P[1],q=gt($J(V,c_),2),z=q[0],Pe=q[1],De=V.filter(function(ne){var he;return ne.type===o_&&((he=ne.activity)===null||he===void 0?void 0:he.type)===a_}),Z=De.reduce(function(ne,he){return ne[he.activity.id]=cW(he.activity,p.machine,U,o),ne},n?ye({},n.children):{}),ae=new yr({value:N||n.value,context:U,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?D?KJ(D,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?Pe:[],activities:N?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:Z,done:C,tags:LR(b),machine:this}),me=i!==U;ae.changed=o.name===I2||me;var xe=ae.history;xe&&delete xe.history;var Ce=!C&&(this._transient||v.some(function(ne){return ne._transient}));if(!T&&(!Ce||o.name===Zh))return ae;var j=ae;if(!C)for(Ce&&(j=this.resolveRaisedTransition(j,{type:VJ},o,r));z.length;){var ee=z.shift();j=this.resolveRaisedTransition(j,ee._event,o,r)}var pe=j.changed||(xe?!!j.actions.length||me||typeof xe.value!=typeof j.value||!z2(j.value,xe.value):void 0);return j.changed=pe,j.history=xe,j},t.prototype.getStateNode=function(e){if($l(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=$l(e)?e.slice(h_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&$l(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=u_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||jl;switch(this.type){case"parallel":return id(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):jl});case"compound":if(St(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?id(e,function(o,l){return o?i.getStateNode(l).resolve(o):jl}):this.initialStateValue||{};default:return e||jl}},t.prototype.getResolvedPath=function(e){if($l(e)){var n=this.machine.idMap[e.slice(h_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return u_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=MR(this.states,function(i){return i.initialStateValue||jl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=vm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;St(n.target)?e=$l(n.target)?mm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(vm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=Cp(this.initialStateValue);return Wt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=gt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:MR(this.states,function(n,i){if(!e)return n.historyValue();var r=St(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Wt(Cp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=HJ(i.path,"states")(e).current;return St(o)?[i.getStateNode(o)]:Wt(Cp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Wt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ut(Object.keys(o)),d=c.next();!d.done;d=c.next()){var f=d.value,p=o[f];if(p.states)try{for(var v=(i=void 0,ut(p.events)),T=v.next();!T.done;T=v.next()){var b=T.value;l.add("".concat(b))}}catch(C){i={error:C}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!St(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=XJ(e.target),r="internal"in e?e.internal:i?i.some(function(d){return St(d)&&d[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:Vo(Pr(e.actions)),cond:M2(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=Wv,c=o[l],d=c===void 0?[]:c,f=TE(o,[typeof l=="symbol"?l:l+""]);r=Wt(Object.keys(f).map(function(k){var F=Gl(k,f[k]);return F}).concat(Gl(Wv,d)))}var p=this.config.always?Gl("",this.config.always):[],v=this.config.onDone?Gl(String(Xh(this.id)),this.config.onDone):[],T=Wt(this.invoke.map(function(k){var F=[];return k.onDone&&F.push.apply(F,qt([],gt(Gl(String(Rp(k.id)),k.onDone)),!1)),k.onError&&F.push.apply(F,qt([],gt(Gl(String(rd(k.id)),k.onError)),!1)),F})),b=this.after,C=Wt(qt(qt(qt(qt([],gt(v),!1),gt(T),!1),gt(r),!1),gt(p),!1).map(function(k){return Pr(k).map(function(F){return i.formatTransition(F)})}));try{for(var N=ut(b),D=N.next();!D.done;D=N.next()){var O=D.value;C.push(O)}}catch(k){e={error:k}}finally{try{D&&!D.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return C},t})();function RW(t,e,n){return n===void 0&&(n=t.context),new IW(t,e,n)}var NW=aW,p_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(p_||(p_={}));var Td=B.useLayoutEffect;function UR(t){var e=B.useRef();return e.current||(e.current={v:t()}),e.current.v}var PW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},DW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function MW(t,e){var n,i,r=PW([[],[]],2),o=r[0],l=r[1];try{for(var c=DW(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var Gc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},FR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function BR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function kW(t){var e=B.useRef([]),n=B.useRef([]);Td(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),d=Gc(MW(c,function(v){return v.exec.__effect===p_.Effect}),2),f=d[0],p=d[1];(o=e.current).push.apply(o,FR([],Gc(f.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,FR([],Gc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),Td(function(){for(;n.current.length;){var i=Gc(n.current.shift(),2),r=i[0],o=i[1];BR(r,o)}}),B.useEffect(function(){for(;e.current.length;){var i=Gc(e.current.shift(),2),r=i[0],o=i[1];BR(r,o)}})}var Ed=function(){return Ed=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ed.apply(this,arguments)},VW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function LW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function OW(t,e,n){e===void 0&&(e={});var i=UR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,d=e.services,f=e.delays,p=e.state,v=VW(e,["context","guards","actions","activities","services","delays","state"]),T=UR(function(){var b={context:r,guards:o,actions:l,activities:c,services:d,delays:f},C=i.withConfig(b,function(){return Ed(Ed({},i.context),r)});return q2(C,Ed({deferEvents:!0},v))});return Td(function(){var b;return n&&(b=T.subscribe(LW(n))),function(){b==null||b.unsubscribe()}},[n]),Td(function(){return T.start(p?yr.create(p):void 0),function(){T.stop()}},[]),Td(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,f)},[l,o,c,d,f]),kW(T),T}var UW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function FW(t,e){e===void 0&&(e={});var n=B.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=OW(t,e,n),r=UW(B.useState(function(){var c=i.machine.initialState;return e.state?yr.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},on.apply(null,arguments)}function gu(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const it={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(it.str(t)||it.num(t))return t===e;if(it.obj(t)&&it.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return it.und(n)?t===e:!0}};function BW(t,e){return n=>(it.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function zW(){const t=B.useState(!1),e=t[1];return B.useCallback(()=>e(i=>!i),[])}function Da(t,e){return it.und(t)||it.nul(t)?e:t}function ep(t){return it.und(t)?[]:it.arr(t)?t:[t]}function ou(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return it.fun(t)?t(...n):t}function qW(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,gu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Xv(t){const e=qW(t);if(it.und(e))return on({to:e},t);const n=Object.keys(t).reduce((i,r)=>it.und(e[r])?on({},i,{[r]:t[r]}):i,{});return on({to:e},n)}function HW(t,e){return e&&(it.fun(e)?e(t):it.obj(e)&&(e.current=t)),t}class Dr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class m_ extends Dr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Dr&&e.removeChild(this))}}class H2 extends Dr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Dr)||(n[i]=r instanceof Dr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let xE;function GW(t,e){xE={fn:t,transform:e}}let G2;function jW(t){G2=t}let j2=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,_m;function $W(t){_m=t}let $2=()=>Date.now(),KW=t=>t.current,K2;function YW(t){K2=t}class JW extends H2{constructor(e,n){super(),this.update=void 0,this.payload=e.style?on({},e,{style:K2(e.style)}):e,this.update=n,this.attach()}}const WW=t=>it.fun(t)&&!(t.prototype instanceof In.Component),XW=t=>B.forwardRef((n,i)=>{const r=zW(),o=B.useRef(!0),l=B.useRef(null),c=B.useRef(null),d=B.useCallback(T=>{const b=l.current,C=()=>{let N=!1;c.current&&(N=xE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new JW(T,C),b&&b.detach()},[]);B.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),B.useImperativeHandle(i,()=>KW(c)),d(n);const f=l.current.getValue();f.scrollTop,f.scrollLeft;const p=gu(f,["scrollTop","scrollLeft"]),v=WW(t)?void 0:T=>c.current=HW(T,i);return In.createElement(t,on({},p,{ref:v}))});let Sd=!1;const ja=new Set,Y2=()=>{if(!Sd)return!1;let t=$2();for(let e of ja){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let d=r.animatedValues[c];if(d.done)continue;let f=r.fromValues[c],p=r.toValues[c],v=d.lastPosition,T=p instanceof Dr,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){d.setValue(p),d.done=!0;continue}if(typeof f=="string"||typeof p=="string"){d.setValue(p),d.done=!0;continue}if(r.duration!==void 0)v=f+r.easing((t-d.startTime)/r.duration)*(p-f),o=t>=d.startTime+r.duration;else if(r.decay)v=f+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),o=Math.abs(d.lastPosition-v)<.1,o&&(p=v);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let C=Math.floor(t-l);for(let k=0;k<C;++k){let F=-r.tension*(v-p),$=-r.friction*b,K=(F+$)/r.mass;b=b+K*1/1e3,v=v+b*1/1e3}let N=r.clamp&&r.tension!==0?f<p?v>p:v<p:!1,D=Math.abs(b)<=r.precision,O=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||D&&O,d.lastVelocity=b,d.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(d.value!==p&&(v=p),d.done=!0):n=!0,d.setValue(v),d.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(ja.delete(e),e.stop(!0))}return ja.size?j2(Y2):Sd=!1,Sd},QW=t=>{ja.has(t)||ja.add(t),Sd||(Sd=!0,j2(Y2))},ZW=t=>{ja.has(t)&&ja.delete(t)};function Tm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Tm({range:t,output:e,extrapolate:n});if(_m&&typeof t.output[0]=="string")return _m(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(f=>f);return f=>{const p=tX(f,o);return eX(f,o[p],o[p+1],r[p],r[p+1],d,l,c,i.map)}}function eX(t,e,n,i,r,o,l,c,d){let f=d?d(t):t;if(f<e){if(l==="identity")return f;l==="clamp"&&(f=e)}if(f>n){if(c==="identity")return f;c==="clamp"&&(f=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function tX(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Ru extends m_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof m_&&!(e instanceof Ru)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Tm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Tm(e,n,i)}interpolate(e,n,i){return new Ru(this,e,n,i)}}const Kl=(t,e,n)=>t&&new Ru(t,e,n),nX={default:{tension:170,friction:26}};function J2(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>J2(n,e))}class g_ extends Dr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&J2(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Ru(this,e,n,i)}}class iX extends m_{constructor(e){super(),this.payload=e.map(n=>new g_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Ru(this,e,n)}}let rX=0,sX=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=rX++}update(e){if(!e)return this;const n=Xv(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=gu(n,["delay","to"]);if(it.arr(o)||it.fun(o))this.queue.push(on({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(d=>{let f=d[0],p=d[1];const v=on({to:{[f]:p},delay:ou(r,f)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=on({},c[v.delay],v,{to:on({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,d=c===void 0?{}:c;it.obj(l)&&(this.merged=on({},l,this.merged)),it.obj(d)&&(this.merged=on({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=gu(r,["delay"]);const d=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=it.arr(c.to)||it.fun(c.to);l?setTimeout(()=>{n===this.guid&&(f?this.runAsync(c,d):this.diff(c).start(d))},l):f?this.runAsync(c,d):this.diff(c).start(d)})}else it.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),QW(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&ZW(this),this}runAsync(e,n){var i=this;e.delay;let r=gu(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(it.arr(r.to))for(let c=0;c<r.to.length;c++){const d=c,f=on({},r,Xv(r.to[d]));it.arr(f.config)&&(f.config=f.config[d]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(f).start(p))})}else if(it.fun(r.to)){let c=0,d;l=l.then(()=>r.to(f=>{const p=on({},r,Xv(f));if(it.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return d=new Promise(v=>this.diff(p).start(v))},function(f){return f===void 0&&(f=!0),i.stop(f)}).then(()=>d))}l.then(n)}diff(e){this.props=on({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,d=c===void 0?{}:c,f=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(f){var b=[l,r];r=b[0],l=b[1]}this.merged=on({},r,this.merged,l),this.hasChanged=!1;let C=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,D)=>{let O=D[0],k=D[1],F=N[O]||{};const $=it.num(k),K=it.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!G2[k],H=it.arr(k),I=!$&&!H&&!K;let R=it.und(r[O])?k:r[O],P=$||H||K?k:1,V=ou(d,O);C&&(P=C.animations[O].parent);let U=F.parent,q=F.interpolation,z=ep(C?P.getPayload():P),Pe,De=k;I&&(De=_m({range:[0,1],output:[k,k]})(1));let Z=q&&q.getValue();const me=!it.und(U)&&F.animatedValues.some(ee=>!ee.done),xe=!it.equ(De,Z),Ce=!it.equ(De,F.previous),j=!it.equ(V,F.config);if(v||Ce&&xe||j){if($||K)U=q=F.parent||new g_(R);else if(H)U=q=F.parent||new iX(R);else if(I){let ee=F.interpolation&&F.interpolation.calc(F.parent.value);ee=ee!==void 0&&!v?ee:R,F.parent?(U=F.parent,U.setValue(0,!1)):U=new g_(0);const pe={output:[ee,k]};F.interpolation?(q=F.interpolation,F.interpolation.updateConfig(pe)):q=U.interpolate(pe)}return z=ep(C?P.getPayload():P),Pe=ep(U.getPayload()),v&&!I&&U.setValue(R,!1),this.hasChanged=!0,Pe.forEach(ee=>{ee.startPosition=ee.value,ee.lastPosition=ee.value,ee.lastVelocity=me?ee.lastVelocity:void 0,ee.lastTime=me?ee.lastTime:void 0,ee.startTime=$2(),ee.done=!1,ee.animatedStyles.clear()}),ou(T,O)&&U.setValue(I?P:k,!1),on({},N,{[O]:on({},F,{name:O,parent:U,interpolation:q,animatedValues:Pe,toValues:z,previous:De,config:V,fromValues:ep(U.getValue()),immediate:ou(T,O),initialVelocity:Da(V.velocity,0),clamp:Da(V.clamp,!1),precision:Da(V.precision,.01),tension:Da(V.tension,170),friction:Da(V.friction,26),mass:Da(V.mass,1),duration:V.duration,easing:Da(V.easing,ee=>ee),decay:V.decay})})}else return xe?N:(I&&(U.setValue(1,!1),q.updateConfig({output:[De,De]})),U.done=!0,this.hasChanged=!0,on({},N,{[O]:on({},N[O],{previous:De})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const oX=(t,e)=>{const n=B.useRef(!1),i=B.useRef(),r=it.fun(e),o=B.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const b=new sX,C=r?ou(e,T,b):e[T];return T===0&&(p=C.ref),b.update(C),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,B.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const d=B.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?ou(p,T,v):p[T]),c||v.start()}),[t]);B.useEffect(()=>{n.current?r||d(e):c||i.current.forEach(p=>p.start())}),B.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const f=i.current.map(p=>p.getValues());return r?[f,d,p=>i.current.forEach(v=>v.pause(p))]:f},aX=t=>{const e=it.fun(t),n=oX(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class lX extends H2{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Dr)&&(e=xE.transform(e)),this.payload=e}}const Em={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Vr="[-+]?\\d*\\.?\\d+",Sm=Vr+"%";function hg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const uX=new RegExp("rgb"+hg(Vr,Vr,Vr)),cX=new RegExp("rgba"+hg(Vr,Vr,Vr,Vr)),dX=new RegExp("hsl"+hg(Vr,Sm,Sm)),fX=new RegExp("hsla"+hg(Vr,Sm,Sm,Vr)),hX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mX=/^#([0-9a-fA-F]{6})$/,gX=/^#([0-9a-fA-F]{8})$/;function yX(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mX.exec(t))?parseInt(e[1]+"ff",16)>>>0:Em.hasOwnProperty(t)?Em[t]:(e=uX.exec(t))?(Yl(e[1])<<24|Yl(e[2])<<16|Yl(e[3])<<8|255)>>>0:(e=cX.exec(t))?(Yl(e[1])<<24|Yl(e[2])<<16|Yl(e[3])<<8|HR(e[4]))>>>0:(e=hX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gX.exec(t))?parseInt(e[1],16)>>>0:(e=pX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=dX.exec(t))?(zR(qR(e[1]),tp(e[2]),tp(e[3]))|255)>>>0:(e=fX.exec(t))?(zR(qR(e[1]),tp(e[2]),tp(e[3]))|HR(e[4]))>>>0:null}function Qv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=Qv(r,i,t+1/3),l=Qv(r,i,t),c=Qv(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function Yl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function qR(t){return(parseFloat(t)%360+360)%360/360}function HR(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function tp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function GR(t){let e=yX(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const np=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,vX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,_X=new RegExp(`(${Object.keys(Em).join("|")})`,"g"),TX=t=>{const e=t.output.map(r=>r.replace(vX,GR)).map(r=>r.replace(_X,GR)),n=e[0].match(np).map(()=>[]);e.forEach(r=>{r.match(np).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(np).map((r,o)=>Tm(on({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(np,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,f,p)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(f)}, ${p})`)}};let bd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const EX=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),SX=["Webkit","Ms","Moz","O"];bd=Object.keys(bd).reduce((t,e)=>(SX.forEach(n=>t[EX(n,e)]=t[e]),t),bd);function bX(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(bd.hasOwnProperty(t)&&bd[t])?e+"px":(""+e).trim()}const jR={};YW(t=>new lX(t));$W(TX);jW(Em);GW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,d=gu(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=bX(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in d){const v=f?p:jR[p]||(jR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,d[p])}return}else return!1},t=>t);const wX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],AX=BW(XW),xX=AX(wX);function $R(t,e){return t.map(function(n,i){return n+e[i]})}function W2(t,e){return t.map(function(n,i){return n-e[i]})}function y_(t){return Math.hypot.apply(Math,t)}function CX(t,e,n){var i=y_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),d=e.map(function(p){return r*p}),f=y_(t);return{velocities:c,velocity:l,distance:f,direction:d}}function v_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function IX(t,e,n){return Math.max(e,Math.min(t,n))}function RX(t,e){return Math.pow(t,e*5)}function KR(t,e,n){return e===0||Math.abs(e)===1/0?RX(t,n):t*e*n/(e+n*t)}function wd(t,e,n,i){return i===void 0&&(i=.15),i===0?IX(t,e,n):t<e?-KR(e-t,n-e,i)+e:t>n?+KR(t-n,n-e,i)+n:t}function NX(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function PX(t,e,n){return e&&NX(t.prototype,e),t}function bi(){return bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bi.apply(this,arguments)}function X2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function DX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ip(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MX(t,e){if(t){if(typeof t=="string")return YR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YR(t,e)}}function YR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pg(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=MX(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function Q2(){}function Z2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?Q2:e.length===1?e[0]:function(){for(var i,r=pg(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Lo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function rp(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function CE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=CE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var kX=180,VX=.15,LX=.5,OX=60,UX={threshold:function(e){return e===void 0&&(e=0),Lo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Lo(VX);case!1:return Lo(0);default:return Lo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Lo(e)}},ek=bi({},UX,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return ek.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,d=c===void 0?-1/0:c,f=n.bottom,p=f===void 0?1/0:f;return[[r,l],[d,p]]}}),FX=typeof window<"u"&&window.document&&window.document.createElement,BX={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=FX?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},zX=bi({},ek,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,f=d===void 0?void 0:d,p=Lo(e,o?3:c||f?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=LX),Lo(e)},swipeDistance:function(e){return e===void 0&&(e=OX),Lo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return kX;case!1:return 0;default:return e}}});function qX(t){return t===void 0&&(t={}),CE(t,BX)}function HX(t){return t===void 0&&(t={}),CE(t,zX)}function GX(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=DX(t,["domTarget","eventOptions","window","enabled"]),l=qX({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=HX(o),l}function jc(t){return bi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Q2,canceled:!1,memo:void 0,args:void 0},t)}function tk(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=jc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var Oa=new Map,jX=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(f))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var d=bi({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),f=r.handler(d);return r.state.memo=f!==void 0?f:r.state.memo,r.state._active||r.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,d=r.threshold,f=this.state,p=f._bounds,v=f._initial,T=f._active,b=f._intentional,C=f.lastOffset,N=f.movement,D=this.getInternalMovement(i,this.state),O=b[0]===!1?JR(D[0],d[0]):b[0],k=b[1]===!1?JR(D[1],d[1]):b[1],F=this.checkIntentionality([O,k],D);if(F._blocked)return bi({},F,{_movement:D,delta:[0,0]});var $=F._intentional,K=D,H,I;if($[0]!==!1&&b[0]===!1&&(I=rp(o,this.state),H=rp(l,this.state),v[0]=I[0],p[0]=H[0]),$[1]!==!1&&b[1]===!1){var R,P;I=(R=I)!=null?R:rp(o,this.state),H=(P=H)!=null?P:rp(l,this.state),v[1]=I[1],p[1]=H[1]}var V=[$[0]!==!1?D[0]-$[0]:v[0],$[1]!==!1?D[1]-$[1]:v[1]],U=$R(V,C),q=T?c:[0,0];return V=WR(p,$R(V,v),q),bi({},F,{intentional:$[0]!==!1||$[1]!==!1,_initial:v,_movement:K,movement:V,values:i,offset:WR(p,U,q),delta:W2(V,N)})},e.clean=function(){this.clearTimeout()},PX(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function JR(t,e){return Math.abs(t)>=e?v_(t)*e:!1}function WR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],d=c[0],f=c[1],p=t[1],v=p[0],T=p[1];return[wd(i,d,f,o),wd(r,v,T,l)]}function Zv(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,d=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:d,args:r,previous:c}}function $X(t,e,n){var i=t.state.offset,r=n.timeStamp;return bi({},tk()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function KX(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,bi({},e,{event:n})].concat(r))}}var YX=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=pg(n.classes),d;!(d=c()).done;){var f=d.value;new f(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],b=T[0],C=T[1];__(i,b,KX(C,bi({},n.state.shared,{args:o})))}return n.config.domTarget?QX(n,i):ZX(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=ik(n.config),r=n.config.eventOptions;i&&pf(i,nk(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),JX(n)},this.state=tk(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function JX(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];pf(n,l,i)}t.windowListeners={}}}function WX(t,e){var n=t.config,i=t.windowListeners;n.window&&(pf(n.window,i[e],n.eventOptions),delete i[e])}function XX(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(pf(i.window,r[e],i.eventOptions),rk(i.window,r[e]=n,i.eventOptions))}function QX(t,e){var n=t.config,i=t.domListeners,r=ik(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;pf(r,nk(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],f=d[0],p=d[1],v=f.slice(2).toLowerCase();i.push([v,Z2.apply(void 0,p)])}rk(r,i,o)}function ZX(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],d=c[0],f=c[1],p=Array.isArray(f)?f:[f],v=d+r;i[v]=Z2.apply(void 0,p)}return i}function nk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function ik(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function __(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function rk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=pg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function pf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=pg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function eQ(t,e,n){n===void 0&&(n={});var i=nQ(t),r=In.useMemo(function(){return new YX(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,In.useEffect(r.effect,[]),r.config.domTarget?tQ:r.bind}function tQ(){}function nQ(t){var e=new Set;return t.drag&&e.add(Oa.get("drag")),t.wheel&&e.add(Oa.get("wheel")),t.scroll&&e.add(Oa.get("scroll")),t.move&&e.add(Oa.get("move")),t.pinch&&e.add(Oa.get("pinch")),t.hover&&e.add(Oa.get("hover")),e}var iQ=(function(t){X2(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return W2(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],d=l[1],f=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:r,_blocked:!0,axis:f}:(r[f==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,CX(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(jX);function sk(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function XR(t){var e="buttons"in t?t.buttons:0,n=sk(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:d}}function QR(t){var e=sk(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var rQ=3,sQ=220,oQ=(function(t){X2(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(XX(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(ip(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=XR(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=QR(r),c=i.getKinematics(l,r),d=Zv(ip(i),r),f=i.state._isTap,p=y_(c._movement);f&&p>=rQ&&(f=!1),i.updateGestureState(bi({},d,c,{_isTap:f})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],f=i.state.movement,p=f[0],v=f[1],T=i.state._intentional,b=T[0],C=T[1],N=i.config.swipeVelocity,D=N[0],O=N[1],k=i.config.swipeDistance,F=k[0],$=k[1],K=bi({},Zv(ip(i),r),i.getMovement(i.state.values)),H=[0,0];K.elapsedTime<sQ&&(b!==!1&&Math.abs(c)>D&&Math.abs(p)>F&&(H[0]=v_(c)),C!==!1&&Math.abs(d)>O&&Math.abs(v)>$&&(H[1]=v_(d))),i.updateGestureState(bi({},K,{tap:o,swipe:H})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(ip(i)),i.state._delayedEvent=!1,WX(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=QR(r);this.updateSharedState(XR(r)),this.updateGestureState(bi({},$X(this,o,r),Zv(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(__(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";__(r,o,this.onClick)}},e})(iQ);function aQ(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return o&&n===this&&e(d,i)||(r=t.apply(this,d),o=!0,n=this,i=d),r}return l}function Pp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Pp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!Pp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!Pp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function lQ(t,e){try{return Pp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function uQ(t,e){e===void 0&&(e={}),Oa.set("drag",oQ);var n=B.useRef();return n.current||(n.current=aQ(GX,lQ)),eQ({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ok=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],bm=ok.join(","),ak=typeof Element>"u",tl=ak?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,T_=!ak&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},lk=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(bm));return n&&tl.call(e,bm)&&r.unshift(e),r=r.filter(i),r},uk=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,f=t(d,!0,i);i.flatten?r.push.apply(r,f):r.push({scope:l,candidates:f})}else{var p=tl.call(l,bm);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var b=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},ck=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},cQ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},dk=function(e){return e.tagName==="INPUT"},dQ=function(e){return dk(e)&&e.type==="hidden"},fQ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},hQ=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},pQ=function(e){if(!e.name)return!0;var n=e.form||T_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=hQ(r,e.form);return!o||o===e},mQ=function(e){return dk(e)&&e.type==="radio"},gQ=function(e){return mQ(e)&&!pQ(e)},ZR=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},yQ=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=tl.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(tl.call(l,"details:not([open]) *"))return!0;var c=T_(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var f=e;e;){var p=e.parentElement,v=T_(e);if(p&&!p.shadowRoot&&r(p)===!0)return ZR(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=f}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return ZR(e);return!1},vQ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return tl.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},wm=function(e,n){return!(n.disabled||dQ(n)||yQ(n,e)||fQ(n)||vQ(n))},E_=function(e,n){return!(gQ(n)||ck(n)<0||!wm(e,n))},_Q=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},TQ=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,d=ck(c,l),f=l?t(r.candidates):c;d===0?l?n.push.apply(n,f):n.push(c):i.push({documentOrder:o,tabIndex:d,item:r,isScope:l,content:f})}),i.sort(cQ).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},EQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=uk([e],n.includeContainer,{filter:E_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:_Q}):i=lk(e,n.includeContainer,E_.bind(null,n)),TQ(i)},SQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=uk([e],n.includeContainer,{filter:wm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=lk(e,n.includeContainer,wm.bind(null,n)),i},sp=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return tl.call(e,bm)===!1?!1:E_(n,e)},bQ=ok.concat("iframe").join(","),e0=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return tl.call(e,bQ)===!1?!1:wm(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function e1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function t1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e1(Object(n),!0).forEach(function(i){wQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),AQ=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xQ=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},CQ=function(e){return e.key==="Tab"||e.keyCode===9},i1=function(e){return setTimeout(e,0)},r1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},$c=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},op=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},IQ=function(e,n){var i=(n==null?void 0:n.document)||document,r=t1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(H,I,R){return H&&H[I]!==void 0?H[I]:r[R||I]},d=function(H){return o.containerGroups.findIndex(function(I){var R=I.container,P=I.tabbableNodes;return R.contains(H)||P.find(function(V){return V===H})})},f=function(H){var I=r[H];if(typeof I=="function"){for(var R=arguments.length,P=new Array(R>1?R-1:0),V=1;V<R;V++)P[V-1]=arguments[V];I=I.apply(void 0,P)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var U=I;if(typeof I=="string"&&(U=i.querySelector(I),!U))throw new Error("`".concat(H,"` as selector refers to no known node"));return U},p=function(){var H=f("initialFocus");if(H===!1)return!1;if(H===void 0)if(d(i.activeElement)>=0)H=i.activeElement;else{var I=o.tabbableGroups[0],R=I&&I.firstTabbableNode;H=R||f("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},v=function(){if(o.containerGroups=o.containers.map(function(H){var I=EQ(H,r.tabbableOptions),R=SQ(H,r.tabbableOptions);return{container:H,tabbableNodes:I,focusableNodes:R,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,q=R.findIndex(function(z){return z===V});if(!(q<0))return U?R.slice(q+1).find(function(z){return sp(z,r.tabbableOptions)}):R.slice(0,q).reverse().find(function(z){return sp(z,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(H){if(H!==!1&&H!==i.activeElement){if(!H||!H.focus){K(p());return}H.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=H,AQ(H)&&H.select()}},b=function(H){var I=f("setReturnFocus",H);return I||(I===!1?!1:H)},C=function(H){var I=op(H);if(!(d(I)>=0)){if($c(r.clickOutsideDeactivates,H)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!e0(I,r.tabbableOptions)});return}$c(r.allowOutsideClick,H)||H.preventDefault()}},N=function(H){var I=op(H),R=d(I)>=0;R||I instanceof Document?R&&(o.mostRecentlyFocusedNode=I):(H.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},D=function(H){var I=op(H);v();var R=null;if(o.tabbableGroups.length>0){var P=d(I),V=P>=0?o.containerGroups[P]:void 0;if(P<0)H.shiftKey?R=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:R=o.tabbableGroups[0].firstTabbableNode;else if(H.shiftKey){var U=r1(o.tabbableGroups,function(ae){var me=ae.firstTabbableNode;return I===me});if(U<0&&(V.container===I||e0(I,r.tabbableOptions)&&!sp(I,r.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(U=P),U>=0){var q=U===0?o.tabbableGroups.length-1:U-1,z=o.tabbableGroups[q];R=z.lastTabbableNode}}else{var Pe=r1(o.tabbableGroups,function(ae){var me=ae.lastTabbableNode;return I===me});if(Pe<0&&(V.container===I||e0(I,r.tabbableOptions)&&!sp(I,r.tabbableOptions)&&!V.nextTabbableNode(I))&&(Pe=P),Pe>=0){var De=Pe===o.tabbableGroups.length-1?0:Pe+1,Z=o.tabbableGroups[De];R=Z.firstTabbableNode}}}else R=f("fallbackFocus");R&&(H.preventDefault(),T(R))},O=function(H){if(xQ(H)&&$c(r.escapeDeactivates,H)!==!1){H.preventDefault(),l.deactivate();return}if(CQ(H)){D(H);return}},k=function(H){var I=op(H);d(I)>=0||$c(r.clickOutsideDeactivates,H)||$c(r.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},F=function(){if(o.active)return n1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?i1(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",C,{capture:!0,passive:!1}),i.addEventListener("touchstart",C,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",O,{capture:!0,passive:!1}),l},$=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",C,!0),i.removeEventListener("touchstart",C,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",O,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(H){if(o.active)return this;var I=c(H,"onActivate"),R=c(H,"onPostActivate"),P=c(H,"checkCanFocusTrap");P||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){P&&v(),F(),R&&R()};return P?(P(o.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(H){if(!o.active)return this;var I=t1({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},H);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,$(),o.active=!1,o.paused=!1,n1.deactivateTrap(l);var R=c(I,"onDeactivate"),P=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),U=c(I,"returnFocus","returnFocusOnDeactivate");R&&R();var q=function(){i1(function(){U&&T(b(o.nodeFocusedBeforeActivation)),P&&P()})};return U&&V?(V(b(o.nodeFocusedBeforeActivation)).then(q,q),this):(q(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,$(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),F(),this)},updateContainerElements:function(H){var I=[].concat(H).filter(Boolean);return o.containers=I.map(function(R){return typeof R=="string"?i.querySelector(R):R}),o.active&&v(),this}},l.updateContainerElements(e),l};function RQ(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var IE=!1;if(typeof window<"u"){var s1={get passive(){IE=!0}};window.addEventListener("testPassive",null,s1),window.removeEventListener("testPassive",null,s1)}var fk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Uo=[],Am=!1,hk=-1,Ad=void 0,xd=void 0,pk=function(e){return Uo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},xm=function(e){var n=e||window.event;return pk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},NQ=function(e){if(xd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(xd=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Ad===void 0&&(Ad=document.body.style.overflow,document.body.style.overflow="hidden")},PQ=function(){xd!==void 0&&(document.body.style.paddingRight=xd,xd=void 0),Ad!==void 0&&(document.body.style.overflow=Ad,Ad=void 0)},DQ=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},MQ=function(e,n){var i=e.targetTouches[0].clientY-hk;return pk(e.target)?!1:n&&n.scrollTop===0&&i>0||DQ(n)&&i<0?xm(e):(e.stopPropagation(),!0)},kQ=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Uo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Uo=[].concat(RQ(Uo),[i]),fk?(e.ontouchstart=function(r){r.targetTouches.length===1&&(hk=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&MQ(r,e)},Am||(document.addEventListener("touchmove",xm,IE?{passive:!1}:void 0),Am=!0)):NQ(n)}},VQ=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Uo=Uo.filter(function(n){return n.targetElement!==e}),fk?(e.ontouchstart=null,e.ontouchmove=null,Am&&Uo.length===0&&(document.removeEventListener("touchmove",xm,IE?{passive:!1}:void 0),Am=!1)):Uo.length||PQ()},$a=[],LQ=function(){return $a.some(function(t){return t.activeTargets.length>0})},OQ=function(){return $a.some(function(t){return t.skippedTargets.length>0})},o1="ResizeObserver loop completed with undelivered notifications.",UQ=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:o1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=o1),window.dispatchEvent(t)},Kd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Kd||(Kd={}));var Ka=function(t){return Object.freeze(t)},FQ=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ka(this)}return t})(),mk=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ka(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,d=e.width,f=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:d,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),RE=function(t){return t instanceof SVGElement&&"getBBox"in t},gk=function(t){if(RE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},a1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},BQ=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Cd=typeof window<"u"?window:{},ap=new WeakMap,l1=/auto|scroll/,zQ=/^tb|vertical/,qQ=/msie|trident/i.test(Cd.navigator&&Cd.navigator.userAgent),Qr=function(t){return parseFloat(t||"0")},yu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new FQ((n?e:t)||0,(n?t:e)||0)},u1=Ka({devicePixelContentBoxSize:yu(),borderBoxSize:yu(),contentBoxSize:yu(),contentRect:new mk(0,0,0,0)}),yk=function(t,e){if(e===void 0&&(e=!1),ap.has(t)&&!e)return ap.get(t);if(gk(t))return ap.set(t,u1),u1;var n=getComputedStyle(t),i=RE(t)&&t.ownerSVGElement&&t.getBBox(),r=!qQ&&n.boxSizing==="border-box",o=zQ.test(n.writingMode||""),l=!i&&l1.test(n.overflowY||""),c=!i&&l1.test(n.overflowX||""),d=i?0:Qr(n.paddingTop),f=i?0:Qr(n.paddingRight),p=i?0:Qr(n.paddingBottom),v=i?0:Qr(n.paddingLeft),T=i?0:Qr(n.borderTopWidth),b=i?0:Qr(n.borderRightWidth),C=i?0:Qr(n.borderBottomWidth),N=i?0:Qr(n.borderLeftWidth),D=v+f,O=d+p,k=N+b,F=T+C,$=c?t.offsetHeight-F-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,H=r?D+k:0,I=r?O+F:0,R=i?i.width:Qr(n.width)-H-K,P=i?i.height:Qr(n.height)-I-$,V=R+D+K+k,U=P+O+$+F,q=Ka({devicePixelContentBoxSize:yu(Math.round(R*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:yu(V,U,o),contentBoxSize:yu(R,P,o),contentRect:new mk(v,d,R,P)});return ap.set(t,q),q},vk=function(t,e,n){var i=yk(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Kd.DEVICE_PIXEL_CONTENT_BOX:return l;case Kd.BORDER_BOX:return r;default:return o}},HQ=(function(){function t(e){var n=yk(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ka([n.borderBoxSize]),this.contentBoxSize=Ka([n.contentBoxSize]),this.devicePixelContentBoxSize=Ka([n.devicePixelContentBoxSize])}return t})(),_k=function(t){if(gk(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},GQ=function(){var t=1/0,e=[];$a.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(f){var p=new HQ(f.target),v=_k(f.target);c.push(p),f.lastReportedSize=vk(f.target,f.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},c1=function(t){$a.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(_k(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},jQ=function(){var t=0;for(c1(t);LQ();)t=GQ(),c1(t);return OQ()&&UQ(),t>0},t0,Tk=[],$Q=function(){return Tk.splice(0).forEach(function(t){return t()})},KQ=function(t){if(!t0){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return $Q()}).observe(n,i),t0=function(){n.textContent="".concat(e?e--:e++)}}Tk.push(t),t0()},YQ=function(t){KQ(function(){requestAnimationFrame(t)})},Dp=0,JQ=function(){return!!Dp},WQ=250,XQ={attributes:!0,characterData:!0,childList:!0,subtree:!0},d1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],f1=function(t){return t===void 0&&(t=0),Date.now()+t},n0=!1,QQ=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=WQ),!n0){n0=!0;var i=f1(e);YQ(function(){var r=!1;try{r=jQ()}finally{if(n0=!1,e=i-f1(),!JQ())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,XQ)};document.body?n():Cd.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),d1.forEach(function(n){return Cd.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),d1.forEach(function(n){return Cd.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),S_=new QQ,h1=function(t){!Dp&&t>0&&S_.start(),Dp+=t,!Dp&&S_.stop()},ZQ=function(t){return!RE(t)&&!BQ(t)&&getComputedStyle(t).display==="inline"},eZ=(function(){function t(e,n){this.target=e,this.observedBox=n||Kd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=vk(this.target,this.observedBox,!0);return ZQ(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),tZ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),lp=new WeakMap,p1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},up=(function(){function t(){}return t.connect=function(e,n){var i=new tZ(e,n);lp.set(e,i)},t.observe=function(e,n,i){var r=lp.get(e),o=r.observationTargets.length===0;p1(r.observationTargets,n)<0&&(o&&$a.push(r),r.observationTargets.push(new eZ(n,i&&i.box)),h1(1),S_.schedule())},t.unobserve=function(e,n){var i=lp.get(e),r=p1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&$a.splice($a.indexOf(i),1),i.observationTargets.splice(r,1),h1(-1))},t.disconnect=function(e){var n=this,i=lp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),nZ=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");up.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!a1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");up.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!a1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");up.unobserve(this,e)},t.prototype.disconnect=function(){up.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function si(){return si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},si.apply(this,arguments)}function Mp(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var Id=typeof window<"u"?B.useLayoutEffect:B.useEffect;function Kc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function cp(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var iZ={box:"border-box"};function i0(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=B.useState(0),l=o[0],c=o[1];B.useDebugValue(n+": "+l);var d=B.useCallback(function(f){c(f[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return Id(function(){if(t.current&&i){var f=new nZ(d);return f.observe(t.current,iZ),function(){f.disconnect()}}},[t,d,i]),i?l:0}function ii(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var m1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},g1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},rZ=RW({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:si({},m1,g1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:si({},m1,g1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:si({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[NW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),sZ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],oZ=["velocity"],aZ=["onRest","config"],Ek=nX.default,lZ=Ek.tension,dp=Ek.friction,uZ=In.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,d=t.initialState,f=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,C=b===void 0?dZ:b,N=t.snapPoints,D=N===void 0?fZ:N,O=t.blocking,k=O===void 0||O,F=t.scrollLocking,$=F===void 0||F,K=t.style,H=t.onSpringStart,I=t.onSpringCancel,R=t.onSpringEnd,P=t.reserveScrollBarGap,V=P===void 0?k:P,U=t.expandOnContentDrag,q=U!==void 0&&U,z=Mp(t,sZ),Pe=(function(){var de=B.useState(!1),be=de[0],we=de[1],je=B.useState({}),ct=je[0],Je=je[1],We=B.useCallback(function(Xe){return Je(function(Qe){var oe;return si({},Qe,((oe={})[Xe]=!1,oe))}),function(){Je(function(Qe){var oe;return si({},Qe,((oe={})[Xe]=!0,oe))})}},[]);return B.useEffect(function(){var Xe=Object.values(ct);Xe.length!==0&&Xe.every(Boolean)&&we(!0)},[ct]),{ready:be,registerReady:We}})(),De=Pe.ready,Z=Pe.registerReady,ae=B.useRef(!1),me=B.useRef(H),xe=B.useRef(I),Ce=B.useRef(R);B.useEffect(function(){me.current=H,xe.current=I,Ce.current=R},[I,H,R]);var j,ee,pe=aX(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),ne=pe[0],he=pe[1],Ee=B.useRef(null),Ve=B.useRef(null),Be=B.useRef(null),Tt=B.useRef(null),Nn=B.useRef(null),di=B.useRef(null),Zt=B.useRef(0),Wn=B.useRef(),Un=B.useRef(!1),An=(j=B.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),ee=B.useRef(j==null?void 0:j.matches),B.useDebugValue(ee.current?"reduce":"no-preference"),B.useEffect(function(){var de=function(be){ee.current=be.matches};return j==null||j.addListener(de),function(){return j==null?void 0:j.removeListener(de)}},[j]),ee),fi=(function(de){var be=de.targetRef,we=de.enabled,je=de.reserveScrollBarGap,ct=B.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return ct.current.deactivate(),void(ct.current={activate:function(){},deactivate:function(){}});var Je=be.current,We=!1;ct.current={activate:function(){We||(We=!0,kQ(Je,{allowTouchMove:function(Xe){return Xe.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:je}))},deactivate:function(){We&&(We=!1,VQ(Je))}}},[we,be,je]),ct})({targetRef:Ve,enabled:De&&$,reserveScrollBarGap:V}),Oi=(function(de){var be=de.targetRef,we=de.enabled,je=B.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return je.current.deactivate(),void(je.current={activate:function(){},deactivate:function(){}});var ct=be.current,Je=!1,We=[],Xe=[];je.current={activate:function(){if(!Je){Je=!0;var Qe=ct.parentNode;document.querySelectorAll("body > *").forEach(function(oe){if(oe!==Qe){var ve=oe.getAttribute("aria-hidden");ve!==null&&ve!=="false"||(We.push(ve),Xe.push(oe),oe.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Je&&(Je=!1,Xe.forEach(function(Qe,oe){var ve=We[oe];ve===null?Qe.removeAttribute("aria-hidden"):Qe.setAttribute("aria-hidden",ve)}),We=[],Xe=[])}}},[be,we]),je})({targetRef:Ee,enabled:De&&k}),en=(function(de){var be=de.targetRef,we=de.fallbackRef,je=de.initialFocusRef,ct=de.enabled,Je=B.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return B.useDebugValue(ct?"Enabled":"Disabled"),B.useEffect(function(){if(!ct)return Je.current.deactivate(),void(Je.current={activate:function(){},deactivate:function(){}});var We=we.current,Xe=IQ(be.current,{onActivate:void 0,initialFocus:je?function(){return(je==null?void 0:je.current)||We}:void 0,fallbackFocus:We,escapeDeactivates:!1,clickOutsideDeactivates:!1}),Qe=!1;Je.current={activate:function(){try{return Qe?Promise.resolve():(Qe=!0,Promise.resolve(Xe.activate()).then(function(){return Promise.resolve(new Promise(function(oe){return setTimeout(function(){return oe(void 0)},0)})).then(function(){})}))}catch(oe){return Promise.reject(oe)}},deactivate:function(){Qe&&(Qe=!1,Xe.deactivate())}}},[ct,we,je,be]),Je})({targetRef:Ee,fallbackRef:di,initialFocusRef:p||void 0,enabled:De&&k&&p!==!1}),wi=(function(de){var be=de.getSnapPoints,we=de.heightRef,je=de.lastSnapRef,ct=de.ready,Je=(function(Ct){var ft=Ct.contentRef,xn=Ct.controlledMaxHeight,Vt=Ct.footerEnabled,Zn=Ct.footerRef,er=Ct.headerEnabled,Bn=Ct.headerRef,pi=Ct.registerReady,us=Ct.resizeSourceRef,Ui=B.useMemo(function(){return pi("contentHeight")},[pi]),Ut=(function(br,nr,ir){var xi=B.useMemo(function(){return nr("maxHeight")},[nr]),rr=B.useState(function(){return cp(br)||typeof window<"u"?window.innerHeight:0}),Hr=rr[0],mi=rr[1],Kt=Hr>0,wr=B.useRef(0);return B.useDebugValue(br?"controlled":"auto"),B.useEffect(function(){Kt&&xi()},[Kt,xi]),Id(function(){if(br)return mi(cp(br)),void(ir.current="maxheightprop");var Ar=function(){wr.current||(wr.current=requestAnimationFrame(function(){mi(window.innerHeight),ir.current="window",wr.current=0}))};return window.addEventListener("resize",Ar),mi(window.innerHeight),ir.current="window",xi(),function(){window.removeEventListener("resize",Ar),cancelAnimationFrame(wr.current)}},[br,xi,ir]),Hr})(xn,pi,us),dn=i0(Bn,{label:"headerHeight",enabled:er,resizeSourceRef:us}),Fi=i0(ft,{label:"contentHeight",enabled:!0,resizeSourceRef:us}),tr=i0(Zn,{label:"footerHeight",enabled:Vt,resizeSourceRef:us}),Bi=Math.min(Ut-dn-tr,Fi)+dn+tr;B.useDebugValue("minHeight: "+Bi);var aa=Fi>0;return B.useEffect(function(){aa&&Ui()},[aa,Ui]),{maxHeight:Ut,minHeight:Bi,headerHeight:dn,footerHeight:tr}})({contentRef:de.contentRef,controlledMaxHeight:de.controlledMaxHeight,footerEnabled:de.footerEnabled,footerRef:de.footerRef,headerEnabled:de.headerEnabled,headerRef:de.headerRef,registerReady:de.registerReady,resizeSourceRef:de.resizeSourceRef}),We=Je.maxHeight,Xe=Je.minHeight,Qe=Je.headerHeight,oe=Je.footerHeight,ve=(function(Ct,ft){var xn=[].concat(Ct).map(cp).reduce(function(Bn,pi){return Bn.add(Kc(pi,0,ft)),Bn},new Set),Vt=Array.from(xn),Zn=Math.min.apply(Math,Vt);if(Number.isNaN(Zn))throw new TypeError("minSnap is NaN");var er=Math.max.apply(Math,Vt);if(Number.isNaN(er))throw new TypeError("maxSnap is NaN");return{snapPoints:Vt,minSnap:Zn,maxSnap:er}})(ct?be({height:we.current,footerHeight:oe,headerHeight:Qe,minHeight:Xe,maxHeight:We}):[0],We),Ke=ve.snapPoints,wt=ve.minSnap,kt=ve.maxSnap;return B.useDebugValue("minSnap: "+wt+", maxSnap:"+kt),{minSnap:wt,maxSnap:kt,findSnap:function(Ct){var ft=cp(typeof Ct=="function"?Ct({footerHeight:oe,headerHeight:Qe,height:we.current,minHeight:Xe,maxHeight:We,snapPoints:Ke,lastSnap:je.current}):Ct);return Ke.reduce(function(xn,Vt){return Math.abs(Vt-ft)<Math.abs(xn-ft)?Vt:xn},wt)},maxHeight:We}})({contentRef:Be,controlledMaxHeight:T,footerEnabled:!!o,footerRef:Nn,getSnapPoints:D,headerEnabled:l!==!1,headerRef:Tt,heightRef:Zt,lastSnapRef:f,ready:De,registerReady:Z,resizeSourceRef:Wn}),Xn=wi.minSnap,Ai=wi.maxSnap,Qn=wi.maxHeight,Fn=wi.findSnap,Ie=B.useRef(Qn),tn=B.useRef(Xn),Ne=B.useRef(Ai),Ot=B.useRef(Fn),$t=B.useRef(0);Id(function(){Ie.current=Qn,Ne.current=Ai,tn.current=Xn,Ot.current=Fn,$t.current=Fn(C)},[Fn,C,Qn,Ai,Xn]);var Jt=B.useCallback(function(de){var be=de.onRest,we=de.config,je=(we=we===void 0?{}:we).velocity,ct=je===void 0?1:je,Je=Mp(we,oZ),We=Mp(de,aZ);return new Promise(function(Xe){return he(si({},We,{config:si({velocity:ct},Je,{mass:1,tension:lZ,friction:Math.max(dp,dp+(dp-dp*ct))}),onRest:function(){var Qe=[].slice.call(arguments);Xe.apply(void 0,Qe),be==null||be.apply(void 0,Qe)}}))})},[he]),Sr=FW(rZ,{devTools:!1,actions:{onOpenCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"OPEN"})},[]),onSnapCancel:B.useCallback(function(de){return xe.current==null?void 0:xe.current({type:"SNAP",source:de.snapSource})},[]),onCloseCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"CLOSE"})},[]),onResizeCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"RESIZE",source:Wn.current})},[]),onOpenEnd:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"OPEN"})},[]),onSnapEnd:B.useCallback(function(de,be){return Ce.current==null?void 0:Ce.current({type:"SNAP",source:de.snapSource})},[]),onResizeEnd:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"RESIZE",source:Wn.current})},[])},context:{initialState:d},services:{onSnapStart:B.useCallback(function(de,be){try{return Promise.resolve(me.current==null?void 0:me.current({type:"SNAP",source:be.payload.source||"custom"}))}catch(we){return Promise.reject(we)}},[]),onOpenStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"OPEN"}))}catch(de){return Promise.reject(de)}},[]),onCloseStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"CLOSE"}))}catch(de){return Promise.reject(de)}},[]),onResizeStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"RESIZE",source:Wn.current}))}catch(de){return Promise.reject(de)}},[]),onSnapEnd:B.useCallback(function(de,be){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"SNAP",source:de.snapSource}))}catch(we){return Promise.reject(we)}},[]),onOpenEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"OPEN"}))}catch(de){return Promise.reject(de)}},[]),onCloseEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"CLOSE"}))}catch(de){return Promise.reject(de)}},[]),onResizeEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"RESIZE",source:Wn.current}))}catch(de){return Promise.reject(de)}},[]),renderVisuallyHidden:B.useCallback(function(de,be){try{return Promise.resolve(Jt({y:$t.current,ready:0,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(we){return Promise.reject(we)}},[Jt]),activate:B.useCallback(function(de,be){try{return ae.current=!0,Promise.resolve(Promise.all([fi.current.activate(),en.current.activate(),Oi.current.activate()])).then(function(){})}catch(we){return Promise.reject(we)}},[Oi,en,fi]),deactivate:B.useCallback(function(){try{return fi.current.deactivate(),en.current.deactivate(),Oi.current.deactivate(),ae.current=!1,Promise.resolve()}catch(de){return Promise.reject(de)}},[Oi,en,fi]),openImmediately:B.useCallback(function(){try{return Zt.current=$t.current,Promise.resolve(Jt({y:$t.current,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(de){return Promise.reject(de)}},[Jt]),openSmoothly:B.useCallback(function(){try{return Promise.resolve(Jt({y:0,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:$t.current,immediate:!0})).then(function(){return Zt.current=$t.current,Promise.resolve(Jt({y:$t.current,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:$t.current,immediate:An.current})).then(function(){})})}catch(de){return Promise.reject(de)}},[Jt,An]),snapSmoothly:B.useCallback(function(de,be){try{var we=Ot.current(de.y);return Zt.current=we,f.current=we,Promise.resolve(Jt({y:we,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:tn.current,immediate:An.current,config:{velocity:de.velocity}})).then(function(){})}catch(je){return Promise.reject(je)}},[Jt,f,An]),resizeSmoothly:B.useCallback(function(){try{var de=Ot.current(Zt.current);return Zt.current=de,f.current=de,Promise.resolve(Jt({y:de,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:tn.current,immediate:Wn.current!=="element"||An.current})).then(function(){})}catch(be){return Promise.reject(be)}},[Jt,f,An]),closeSmoothly:B.useCallback(function(de,be){try{return Jt({minSnap:Zt.current,immediate:!0}),Zt.current=0,Promise.resolve(Jt({y:0,maxHeight:Ie.current,maxSnap:Ne.current,immediate:An.current})).then(function(){return Promise.resolve(Jt({ready:0,immediate:!0})).then(function(){})})}catch(we){return Promise.reject(we)}},[Jt,An])}}),qr=Sr[0],Pn=Sr[1];B.useEffect(function(){De&&Pn(c?"OPEN":"CLOSE")},[c,Pn,De]),Id(function(){(Qn||Ai||Xn)&&Pn("RESIZE")},[Qn,Ai,Xn,Pn]),B.useEffect(function(){return function(){fi.current.deactivate(),en.current.deactivate(),Oi.current.deactivate()}},[Oi,en,fi]),B.useImperativeHandle(e,function(){return{snapTo:function(de,be){var we=be===void 0?{}:be,je=we.velocity,ct=je===void 0?1:je,Je=we.source,We=Je===void 0?"custom":Je;Pn("SNAP",{payload:{y:Ot.current(de),velocity:ct,source:We}})},get height(){return Zt.current}}},[Pn]),B.useEffect(function(){var de=Ve.current,be=function(je){Un.current&&je.preventDefault()},we=function(je){de.scrollTop<0&&(requestAnimationFrame(function(){de.style.overflow="hidden",de.scrollTop=0,de.style.removeProperty("overflow")}),je.preventDefault())};return q&&(de.addEventListener("scroll",be),de.addEventListener("touchmove",be),de.addEventListener("touchstart",we)),function(){de.removeEventListener("scroll",be),de.removeEventListener("touchmove",be),de.removeEventListener("touchstart",we)}},[q,Ve]);var hi=uQ(function(de){var be=de.args,we=(be=be===void 0?[]:be)[0],je=(we=we===void 0?{}:we).closeOnTap,ct=je!==void 0&&je,Je=we.isContentDragging,We=Je!==void 0&&Je,Xe=de.cancel,Qe=de.direction[1],oe=de.down,ve=de.first,Ke=de.last,wt=de.memo,kt=wt===void 0?ne.y.getValue():wt,Ct=de.tap,ft=de.velocity,xn=-1*de.movement[1];if(!ae.current)return Xe(),kt;if(v&&ct&&Ct)return Xe(),setTimeout(function(){return v()},0),kt;if(Ct)return kt;var Vt=kt+xn,Zn=xn*ft,er=Math.max(tn.current,Math.min(Ne.current,Vt+2*Zn));if(!oe&&v&&Qe>0&&Vt+Zn<tn.current/2)return Xe(),v(),kt;var Bn=oe?v||tn.current!==Ne.current?wd(Vt,v?0:tn.current,Ne.current,.55):Vt<tn.current?wd(Vt,tn.current,2*Ne.current,.55):wd(Vt,tn.current/2,Ne.current,.55):er;return q&&We?(Bn>=Ne.current&&(Bn=Ne.current),kt===Ne.current&&Ve.current.scrollTop>0&&(Bn=Ne.current),Un.current=Bn<Ne.current):Un.current=!1,ve&&Pn("DRAG"),Ke?(Pn("SNAP",{payload:{y:Bn,velocity:ft>.05?ft:1,source:"dragging"}}),kt):(he({y:Bn,ready:1,maxHeight:Ie.current,maxSnap:Ne.current,minSnap:tn.current,immediate:!0,config:{velocity:ft}}),kt)},{filterTaps:!0});if(Number.isNaN(Ne.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(tn.current))throw new TypeError("minSnapRef is NaN!!");var cn=(function(de){var be,we=de.spring,je=Kl([we.y,we.maxHeight],function(oe,ve){return Math.round(Kc(ve-oe,0,16))+"px"}),ct=Kl([we.y,we.minSnap,we.maxSnap],function(oe,ve,Ke){return Kc(oe,ve,Ke)+"px"}),Je=Kl([we.y,we.minSnap,we.maxSnap],function(oe,ve,Ke){return oe<ve?ve-oe+"px":oe>Ke?Ke-oe+"px":"0px"}),We=Kl([we.y,we.maxSnap],function(oe,ve){return oe>=ve?Math.ceil(oe-ve):0}),Xe=Kl([we.y,we.minSnap],function(oe,ve){if(!ve)return 0;var Ke=Math.max(ve/2-45,0);return Kc((oe-Ke)*(1/(Math.min(ve/2+45,ve)-Ke)+0),0,1)}),Qe=Kl([we.y,we.minSnap],function(oe,ve){return ve?Kc(oe/ve,0,1):0});return(be={})["--rsbs-content-opacity"]=Xe,be["--rsbs-backdrop-opacity"]=Qe,be["--rsbs-antigap-scale-y"]=We,be["--rsbs-overlay-translate-y"]=Je,be["--rsbs-overlay-rounded"]=je,be["--rsbs-overlay-h"]=ct,be})({spring:ne});return In.createElement(xX.div,si({},z,{"data-rsbs-root":!0,"data-rsbs-state":cZ.find(qr.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Ee,style:si({},cn,K,{opacity:ne.ready})}),i,k&&In.createElement("div",si({key:"backdrop","data-rsbs-backdrop":!0},hi({closeOnTap:!0}))),In.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:di,onKeyDown:function(de){de.key==="Escape"&&(de.stopPropagation(),v&&v())}},l!==!1&&In.createElement("div",si({key:"header","data-rsbs-header":!0,ref:Tt},hi()),l),In.createElement("div",si({key:"scroll","data-rsbs-scroll":!0,ref:Ve},q?hi({isContentDragging:!0}):{}),In.createElement("div",{"data-rsbs-content":!0,ref:Be},n)),o&&In.createElement("div",si({key:"footer",ref:Nn,"data-rsbs-footer":!0},hi()),o)))}),cZ=["closed","opening","open","closing","dragging","snapping","resizing"];function dZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function fZ(t){return t.minHeight}var hZ=["onSpringStart","onSpringEnd","skipInitialTransition"],mg=B.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Mp(t,hZ),l=B.useState(!1),c=l[0],d=l[1],f=B.useRef(),p=B.useRef(null),v=B.useRef(r&&o.open?"OPEN":"CLOSED");Id(function(){if(o.open)return cancelAnimationFrame(f.current),d(!0),function(){v.current="CLOSED"}},[o.open]);var T=B.useCallback(function(C){return Promise.resolve(n==null?void 0:n(C)).then(function(){C.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),b=B.useCallback(function(C){return Promise.resolve(i==null?void 0:i(C)).then(function(){C.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?In.createElement(kJ,{"data-rsbs-portal":!0},In.createElement(uZ,si({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:b}))):null});const pZ=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})=>{const b=document.documentElement.classList.contains("dark"),C=B.useRef(null);return B.useEffect(()=>{!r&&o.length>0&&C.current&&C.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(mg,{open:t,onDismiss:l,className:b?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:N})=>N*.65,snapPoints:({minHeight:N,maxHeight:D})=>[N,D*.65,D*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(b2,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:d}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:C,children:o.length>0&&S.jsx(pm,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})})]})})},mZ=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(mg,{open:t,onDismiss:c,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.6,snapPoints:({maxHeight:f})=>[f*.55,f*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(w2,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(A2,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},gZ=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=B.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),f=e.filter(b=>!c.has(b.id)).reduce((b,C)=>(b[C.category]||(b[C.category]=[]),b[C.category].push(C),b),{}),p=b=>{l(C=>{const N=new Set(C);return N.has(b)?N.delete(b):N.add(b),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(mg,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(rg,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(f).map(b=>f[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[b].map(C=>{const N=o.has(C.id);return S.jsxs("button",{onClick:()=>p(C.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(UT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:C.imageSrc,alt:C.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:C.analysis})]},C.id)})})]},b))})]})})},yZ=(t,e)=>{const n=Lu(Br,"users",t,"items"),i=gT(n);return ET(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},vZ=async(t,e)=>{try{const n=Lu(Br,"users",t,"items");return(await TT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},y1=async(t,e,n)=>{try{const i=Ou(Br,"users",t,"items",e);await gF(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},v1=async(t,e)=>{try{const n=Ou(Br,"users",t,"items",e);await _T(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},_Z=(t,e)=>{const n=Lu(Br,"users",t,"favoriteOutfits"),i=gT(n);return ET(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},TZ=async(t,e)=>{try{const n=Lu(Br,"users",t,"favoriteOutfits");return(await TT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},EZ=async(t,e)=>{try{const n=Ou(Br,"users",t,"favoriteOutfits",e);await _T(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},SZ=(t,e)=>{const n=Lu(Br,"users",t,"sets"),i=gT(n);return ET(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},bZ=async(t,e)=>{try{const n=Lu(Br,"users",t,"sets");return(await TT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},wZ=async(t,e)=>{try{const n=Ou(Br,"users",t,"sets",e);await _T(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},AZ=async(t,e,n)=>{try{const i=dD(pD,`users/${t}/clothing/${n}.jpg`);return await wB(i,e,"data_url"),await cD(i)}catch(i){throw console.error("Erreur upload vtement:",i),i}},xZ=async(t,e)=>{try{const n=await CZ(e,1024),i=dD(pD,`users/${t}/profile/model_photo.jpg`);return await bB(i,n),await cD(i)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},CZ=(t,e)=>new Promise((n,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=o=>{var c;const l=new Image;l.src=(c=o.target)==null?void 0:c.result,l.onload=()=>{const d=e/l.width,f=document.createElement("canvas");f.width=e,f.height=l.height*d;const p=f.getContext("2d");p?(p.drawImage(l,0,0,f.width,f.height),f.toBlob(v=>{v?n(v):i(new Error("Blob creation failed"))},"image/jpeg",.85)):i(new Error("Canvas error"))}},r.onerror=o=>i(o)}),Sk=B.createContext(void 0),IZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),d=800,f=d/o.width;c.width=d,c.height=o.height*f;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),RZ=({children:t,user:e})=>{const[n,i]=B.useState([]),[r,o]=B.useState([]),[l,c]=B.useState([]),[d,f]=B.useState(localStorage.getItem("dressmup_user_model_url")),[p,v]=B.useState(!1),[T,b]=B.useState(!0);B.useEffect(()=>{d&&localStorage.setItem("dressmup_user_model_url",d)},[d]),B.useEffect(()=>{if(e){const I=yZ(e.uid,V=>{i(V),b(!1)}),R=SZ(e.uid,V=>{o(V)}),P=_Z(e.uid,V=>{c(V)});return()=>{I(),R(),P()}}else i([]),o([]),c([]),b(!1)},[e]);const C=B.useCallback(async I=>{if(e)try{const R=await xZ(e.uid,I);f(R)}catch(R){throw console.error("Erreur mise  jour photo modle:",R),R}},[e]),N=B.useCallback(async I=>{if(!(I.length===0||!e)){v(!0);try{const R=I.map(z=>IZ(z)),P=await Promise.all(R),V=P.map(z=>z.split(",")[1]),U=await I7(V),q=Math.min(U.length,I.length);for(let z=0;z<q;z++){const Pe=U[z];let De="";try{De=await vZ(e.uid,{...Pe,createdAt:Date.now()});const Z=await AZ(e.uid,P[z],De);await y1(e.uid,De,{imageSrc:Z})}catch(Z){console.error(`chec pour ${I[z].name}.`,Z),De&&await v1(e.uid,De)}}}catch(R){console.error("Erreur lot:",R)}finally{v(!1)}}},[e]),D=B.useCallback(async I=>{e&&await v1(e.uid,I)},[e]),O=B.useCallback(async I=>{e&&await y1(e.uid,I.id,I)},[e]),k=B.useCallback(async I=>{if(!e)return;const{id:R,...P}=I;await TZ(e.uid,P)},[e]),F=B.useCallback(async I=>{e&&await EZ(e.uid,I)},[e]),$=B.useCallback(async(I,R)=>{var U;if(!e)return;const P=((U=n.find(q=>q.id===R[0]))==null?void 0:U.imageSrc)||"",V={name:I,itemIds:R,imageSrc:P};await bZ(e.uid,V)},[e,n]),K=B.useCallback(async I=>{e&&await wZ(e.uid,I)},[e]),H={clothingItems:n,clothingSets:r,favoriteOutfits:l,userModelImage:d,setUserModelImage:f,updateUserModelPhoto:C,isAnalyzing:p,analyzeClothingItems:N,deleteClothingItem:D,updateClothingItem:O,createClothingSet:$,deleteClothingSet:K,addFavoriteOutfit:k,deleteFavoriteOutfit:F,loading:T};return S.jsx(Sk.Provider,{value:H,children:t})},NZ=()=>{const t=B.useContext(Sk);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},PZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(mg,{open:t,onDismiss:e,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.65,snapPoints:({maxHeight:f})=>[f*.65,f*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(pm,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},DZ=({imageUrl:t,onClose:e})=>(B.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),S.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),S.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[S.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),S.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),S.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:S.jsx(OT,{})})]})]})),MZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState(null),[r,o]=B.useState([]),[l,c]=B.useState(!1),[d,f]=B.useState(null),[p,v]=B.useState(!1),[T,b]=B.useState(null),[C,N]=B.useState(!1),[D,O]=B.useState("home"),[k,F]=B.useState(!1),[$,K]=B.useState(!1),[H,I]=B.useState(!1),[R,P]=B.useState(!1),[V,U]=B.useState(null),[q,z]=B.useState(null),[Pe,De]=B.useState(!1),[Z,ae]=B.useState(0),[me,xe]=B.useState(null),[Ce,j]=B.useState(null),[ee,pe]=B.useState(!1),[ne,he]=B.useState(""),[Ee,Ve]=B.useState("favorites");B.useEffect(()=>{if(n){const oe=setTimeout(()=>i(null),5e3);return()=>clearTimeout(oe)}},[n]);const[Be,Tt]=B.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:Nn,clothingSets:di,isAnalyzing:Zt,analyzeClothingItems:Wn,deleteClothingItem:Un,createClothingSet:An,updateClothingItem:fi,deleteClothingSet:Oi,favoriteOutfits:en,addFavoriteOutfit:wi,deleteFavoriteOutfit:Xn,loading:Ai}=NZ(),[Qn,Fn]=B.useState(null),Ie=In.useMemo(()=>(Nn||[]).sort((ve,Ke)=>(Ke.isFavorite?1:0)-(ve.isFavorite?1:0)),[Nn]),tn=B.useCallback(oe=>{const ve=en.find(Ke=>Ke.titre===oe.titre&&Ke.description===oe.description);ve?(Xn(ve.id),Fn("Retir des favoris"),za.light()):(wi(oe),Fn("Ajout aux favoris "),za.success()),setTimeout(()=>Fn(null),2e3)},[en,wi,Xn]),Ne=In.useMemo(()=>di||[],[di]),Ot=In.useMemo(()=>new Set(Ne.flatMap(oe=>oe.itemIds||[])),[Ne]);B.useEffect(()=>{const oe=async ve=>{const Ke=ve.coords.latitude,wt=ve.coords.longitude,kt=qD.openWeatherApiKey,Ct=`https://api.openweathermap.org/data/2.5/weather?lat=${Ke}&lon=${wt}&appid=${kt}&units=metric&lang=fr`;try{const ft=await fetch(Ct);if(!ft.ok)throw new Error("Impossible de rcuprer la mto.");const xn=await ft.json(),Vt=`${Math.round(xn.main.temp)}C, ${xn.weather[0].description},  ${xn.name}`;U(Vt),z(null)}catch{z("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(oe,()=>z("Activez la golocalisation pour la mto.")):z("Golocalisation non supporte.")},[]);const $t=B.useCallback(async(oe,ve)=>{if(Ie.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const Ke=V?`Mto actuelle : ${V}. Occasion : ${oe}`:`Occasion : ${oe}`;try{const wt=await R7(Ie,Ne,Ke,ve);o(wt)}catch(wt){i(wt instanceof Error?wt.message:"Erreur inconnue")}finally{c(!1)}},[Ie,Ne,V]),Jt=B.useCallback(async(oe,ve,Ke)=>{if(Ie.length===0){i("Veuillez d'abord ajouter des vtements.");return}v(!0),i(null);try{const wt=await P7(Ie,Ne,oe,ve,Ke);f(wt)}catch(wt){i(wt instanceof Error?wt.message:"Erreur inconnue")}finally{v(!1)}},[Ie,Ne]),Sr=B.useCallback(async()=>{if(Ie.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}N(!0),i(null);try{const oe=await N7(Ie,Ne);b(oe)}catch(oe){i(oe instanceof Error?oe.message:"Erreur inconnue")}finally{N(!1)}},[Ie,Ne]),qr=B.useCallback(async oe=>{if(xe(oe.titre),i(null),!userModelImage){xe(null),setShowModelProfileModal(!0),Fn("Ajoutez une photo de vous pour l'essayage ");return}try{const ve=oe.vetements.map(wt=>Ie.find(kt=>kt.id===wt.id||kt.analysis===wt.description)).filter(wt=>!!wt);if(ve.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const Ke=await M7(ve,userModelImage);j(Ke)}catch(ve){i(getUserFriendlyError(ve))}finally{xe(null)}},[Ie,userModelImage]),Pn=B.useCallback(()=>F(!0),[]),hi=B.useCallback(()=>K(!0),[]),cn=oe=>e(oe),de=()=>e(null),be=oe=>{Un(oe).catch(i),e(null)},we=oe=>{fi(oe).catch(i),e(oe)},je=oe=>{const ve=`Focus sur l'article : ${oe.analysis}`;$t(ve,oe),e(null),window.innerWidth<768&&F(!0)},ct=B.useCallback((oe,ve)=>{An(oe,ve).catch(i)},[An]),Je=B.useCallback(oe=>{Oi(oe).catch(i)},[Oi]);B.useCallback(async()=>{De(!0),za.medium(),await new Promise(oe=>setTimeout(oe,1e3)),De(!1),za.success()},[]);const We={hauts:Ie.filter(oe=>oe.category==="Hauts").length,bas:Ie.filter(oe=>oe.category==="Bas").length,chaussures:Ie.filter(oe=>oe.category==="Chaussures").length,accessoires:Ie.filter(oe=>oe.category==="Accessoires").length},Xe=B.useMemo(()=>{if(D==="home")return[];let oe=Ie.filter(ve=>D==="hauts"?ve.category==="Hauts":D==="bas"?ve.category==="Bas":D==="chaussures"?ve.category==="Chaussures":D==="accessoires"?ve.category==="Accessoires":!1);if(ne.trim()){const ve=ne.toLowerCase();oe=oe.filter(Ke=>Ke.analysis.toLowerCase().includes(ve)||Ke.color.toLowerCase().includes(ve)||Ke.material.toLowerCase().includes(ve))}return[...oe].sort((ve,Ke)=>{switch(Ee){case"favorites":return(Ke.isFavorite?1:0)-(ve.isFavorite?1:0);case"newest":return(Ke.createdAt||0)-(ve.createdAt||0);case"oldest":return(ve.createdAt||0)-(Ke.createdAt||0);case"color":return ve.color.localeCompare(Ke.color);default:return 0}})},[D,Ie,ne,Ee]),Qe=k||$||H||!!t||!!T||!!Ce;return B.useEffect(()=>{const oe=document.querySelector("header");oe&&(oe.style.zIndex=Qe?"10":"50")},[Qe]),B.useEffect(()=>{if(!Zt&&Ie.length>Z&&Z>0){const oe=Ie.length-Z;Fn(`${oe} vtement${oe>1?"s":""} ajout${oe>1?"s":""} `),setTimeout(()=>Fn(null),2e3)}ae(Ie.length)},[Zt,Ie.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between",role:"alert",children:[S.jsxs("div",{children:[S.jsx("strong",{className:"font-bold",children:"Erreur: "}),S.jsx("span",{className:"inline",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-red-500/30 rounded-full transition-colors","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Ie.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:Sr,disabled:C,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:C?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(_J,{onAnalyze:Wn,isAnalyzing:Zt})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(bJ,{clothingItems:Ie,clothingSets:Ne,onItemClick:cn,onDeleteItem:be,onCreateSet:ct,isLoading:Ai})}),S.jsxs("div",{className:"md:hidden",children:[D==="home"&&S.jsx(CJ,{onAnalyzeWardrobe:Sr,onScrollToOutfits:Pn,onScrollToVacation:hi,onStartSetCreation:()=>I(!0),onShowFavorites:()=>P(!0),isAnalyzingWardrobe:C,clothingCount:Ie.length,favoriteOutfitCount:en.length}),D!=="home"&&S.jsxs("div",{className:"pb-24",children:[Pe&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:D}),S.jsxs("p",{className:"text-sm text-gray-500",children:[Xe.length," vtement",Xe.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx($D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:ne,onChange:oe=>he(oe.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),ne&&S.jsx("button",{onClick:()=>he(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(KD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Ee,onChange:oe=>Ve(oe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(om,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Xe.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Xe.map(oe=>S.jsxs("div",{onClick:()=>cn(oe),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[oe.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Fd,{className:"w-4 h-4"})}):Ot.has(oe.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(rg,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:oe.imageSrc,alt:oe.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:oe.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:oe.color})]})]},oe.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:ne?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',ne,'"']}),S.jsx("button",{onClick:()=>he(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(b2,{clothingItems:Ie,clothingSets:Ne,onGenerate:$t,isGenerating:l,weatherInfo:V,weatherError:q})}),r.length>0&&S.jsx(pm,{outfits:r,allClothingItems:Ie,allClothingSets:Ne,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:qr,generatingVisualFor:me}),en.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>pe(!ee),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Fd,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",en.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${ee?"rotate-180":""} text-gray-400`,children:S.jsx(om,{})})]}),ee&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(pm,{outfits:en,allClothingItems:Ie,allClothingSets:Ne,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:qr,generatingVisualFor:me})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(w2,{clothingItems:Ie,clothingSets:Ne,onGeneratePlan:Jt,isGenerating:p})}),d&&S.jsx(A2,{plan:d,allClothingItems:Ie,allClothingSets:Ne,onCreateSet:ct})]})]}),t&&S.jsx(AJ,{item:t,clothingSets:Ne,onClose:de,onUpdate:we,onGenerateFrom:je,onRemoveSet:Je,onDelete:be}),T&&S.jsx(RJ,{analysis:T,onClose:()=>b(null)}),Ce&&S.jsx(DZ,{imageUrl:Ce,onClose:()=>j(null)}),S.jsx(xJ,{onFilesSelected:Wn,isAnalyzing:Zt,isOtherModalOpen:Qe}),S.jsx(IJ,{activeTab:D,onTabChange:O,counts:We}),S.jsx(pZ,{open:k,clothingItems:Ie,clothingSets:Ne,onGenerate:$t,isGenerating:l,suggestedOutfits:r,onClose:()=>F(!1),weatherInfo:V,weatherError:q,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:qr,generatingVisualFor:me}),S.jsx(mZ,{open:$,clothingItems:Ie,clothingSets:Ne,onGeneratePlan:Jt,isGenerating:p,vacationPlan:d,onCreateSet:ct,onClose:()=>K(!1)}),S.jsx(gZ,{open:H,clothingItems:Ie,clothingSets:Ne,onClose:()=>I(!1),onCreateSet:(oe,ve)=>{ct(oe,ve),I(!1)}}),S.jsx(PZ,{open:R,onClose:()=>P(!1),allClothingItems:Ie,allClothingSets:Ne,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:qr,generatingVisualFor:me}),Be&&S.jsx(aL,{onComplete:()=>Tt(!1)}),Qn&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Qn.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),Qn.includes("Retir")&&S.jsx("span",{children:""}),Qn.includes("ajout")&&!Qn.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:Qn.replace("","").trim()})]})})]})},kZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState("dark"),[r,o]=B.useState(!1);B.useEffect(()=>{const c=j4(ka,d=>{e(d),d&&o(!1)});return()=>c()},[]),B.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const l=()=>{i(c=>c==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx(q7,{theme:n,toggleTheme:l,children:S.jsx(mI,{user:t})}),S.jsx(RZ,{user:t,children:S.jsx(MZ,{})})]}):r?S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:S.jsxs("div",{className:"w-full max-w-md",children:[S.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),S.jsx(mI,{user:t})]})}):S.jsx(vJ,{onGetStarted:()=>o(!0)})})},bk=document.getElementById("root");if(!bk)throw new Error("L'lment root est introuvable dans le DOM");const VZ=oL.createRoot(bk);VZ.render(S.jsx(In.StrictMode,{children:S.jsx(kZ,{})}));
