(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function mC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Og={exports:{}},Ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function s2(){if(rS)return Ku;rS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Ku.Fragment=e,Ku.jsx=n,Ku.jsxs=n,Ku}var sS;function o2(){return sS||(sS=1,Og.exports=s2()),Og.exports}var A=o2(),Ug={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS;function a2(){if(oS)return Fe;oS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,L={};function z(H,te,fe){this.props=H,this.context=te,this.refs=L,this.updater=fe||N}z.prototype.isReactComponent={},z.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function F(){}F.prototype=z.prototype;function B(H,te,fe){this.props=H,this.context=te,this.refs=L,this.updater=fe||N}var K=B.prototype=new F;K.constructor=B,P(K,z.prototype),K.isPureReactComponent=!0;var X=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(H,te,fe){var pe=fe.ref;return{$$typeof:t,type:H,key:te,ref:pe!==void 0?pe:null,props:fe}}function V(H,te){return R(H.type,te,H.props)}function D(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function O(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return te[fe]})}var U=/\/+/g;function be(H,te){return typeof H=="object"&&H!==null&&H.key!=null?O(""+H.key):te.toString(36)}function ve(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(G,G):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ee(H,te,fe,pe,we){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var Ue=!1;if(H===null)Ue=!0;else switch(De){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(H.$$typeof){case t:case e:Ue=!0;break;case y:return Ue=H._init,ee(Ue(H._payload),te,fe,pe,we)}}if(Ue)return we=we(H),Ue=pe===""?"."+be(H,0):pe,X(we)?(fe="",Ue!=null&&(fe=Ue.replace(U,"$&/")+"/"),ee(we,te,fe,"",function(Cn){return Cn})):we!=null&&(D(we)&&(we=V(we,fe+(we.key==null||H&&H.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+Ue)),te.push(we)),1;Ue=0;var jt=pe===""?".":pe+":";if(X(H))for(var xe=0;xe<H.length;xe++)pe=H[xe],De=jt+be(pe,xe),Ue+=ee(pe,te,fe,De,we);else if(xe=b(H),typeof xe=="function")for(H=xe.call(H),xe=0;!(pe=H.next()).done;)pe=pe.value,De=jt+be(pe,xe++),Ue+=ee(pe,te,fe,De,we);else if(De==="object"){if(typeof H.then=="function")return ee(ve(H),te,fe,pe,we);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ce(H,te,fe){if(H==null)return H;var pe=[],we=0;return ee(H,pe,"","",function(De){return te.call(fe,De,we++)}),pe}function he(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Ie=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Me={map:ce,forEach:function(H,te,fe){ce(H,function(){te.apply(this,arguments)},fe)},count:function(H){var te=0;return ce(H,function(){te++}),te},toArray:function(H){return ce(H,function(te){return te})||[]},only:function(H){if(!D(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Fe.Activity=E,Fe.Children=Me,Fe.Component=z,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=B,Fe.StrictMode=i,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return I.H.useMemoCache(H)}},Fe.cache=function(H){return function(){return H.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(H,te,fe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var pe=P({},H.props),we=H.key;if(te!=null)for(De in te.key!==void 0&&(we=""+te.key),te)!x.call(te,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&te.ref===void 0||(pe[De]=te[De]);var De=arguments.length-2;if(De===1)pe.children=fe;else if(1<De){for(var Ue=Array(De),jt=0;jt<De;jt++)Ue[jt]=arguments[jt+2];pe.children=Ue}return R(H.type,we,pe)},Fe.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Fe.createElement=function(H,te,fe){var pe,we={},De=null;if(te!=null)for(pe in te.key!==void 0&&(De=""+te.key),te)x.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=te[pe]);var Ue=arguments.length-2;if(Ue===1)we.children=fe;else if(1<Ue){for(var jt=Array(Ue),xe=0;xe<Ue;xe++)jt[xe]=arguments[xe+2];we.children=jt}if(H&&H.defaultProps)for(pe in Ue=H.defaultProps,Ue)we[pe]===void 0&&(we[pe]=Ue[pe]);return R(H,De,we)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(H){return{$$typeof:c,render:H}},Fe.isValidElement=D,Fe.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:he}},Fe.memo=function(H,te){return{$$typeof:h,type:H,compare:te===void 0?null:te}},Fe.startTransition=function(H){var te=I.T,fe={};I.T=fe;try{var pe=H(),we=I.S;we!==null&&we(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(G,Ie)}catch(De){Ie(De)}finally{te!==null&&fe.types!==null&&(te.types=fe.types),I.T=te}},Fe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Fe.use=function(H){return I.H.use(H)},Fe.useActionState=function(H,te,fe){return I.H.useActionState(H,te,fe)},Fe.useCallback=function(H,te){return I.H.useCallback(H,te)},Fe.useContext=function(H){return I.H.useContext(H)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(H,te){return I.H.useDeferredValue(H,te)},Fe.useEffect=function(H,te){return I.H.useEffect(H,te)},Fe.useEffectEvent=function(H){return I.H.useEffectEvent(H)},Fe.useId=function(){return I.H.useId()},Fe.useImperativeHandle=function(H,te,fe){return I.H.useImperativeHandle(H,te,fe)},Fe.useInsertionEffect=function(H,te){return I.H.useInsertionEffect(H,te)},Fe.useLayoutEffect=function(H,te){return I.H.useLayoutEffect(H,te)},Fe.useMemo=function(H,te){return I.H.useMemo(H,te)},Fe.useOptimistic=function(H,te){return I.H.useOptimistic(H,te)},Fe.useReducer=function(H,te,fe){return I.H.useReducer(H,te,fe)},Fe.useRef=function(H){return I.H.useRef(H)},Fe.useState=function(H){return I.H.useState(H)},Fe.useSyncExternalStore=function(H,te,fe){return I.H.useSyncExternalStore(H,te,fe)},Fe.useTransition=function(){return I.H.useTransition()},Fe.version="19.2.0",Fe}var aS;function dv(){return aS||(aS=1,Ug.exports=a2()),Ug.exports}var j=dv();const wn=mC(j);var Fg={exports:{}},Ju={},Bg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function l2(){return lS||(lS=1,(function(t){function e(ee,ce){var he=ee.length;ee.push(ce);e:for(;0<he;){var Ie=he-1>>>1,Me=ee[Ie];if(0<s(Me,ce))ee[Ie]=ce,ee[he]=Me,he=Ie;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],he=ee.pop();if(he!==ce){ee[0]=he;e:for(var Ie=0,Me=ee.length,H=Me>>>1;Ie<H;){var te=2*(Ie+1)-1,fe=ee[te],pe=te+1,we=ee[pe];if(0>s(fe,he))pe<Me&&0>s(we,fe)?(ee[Ie]=we,ee[pe]=he,Ie=pe):(ee[Ie]=fe,ee[te]=he,Ie=te);else if(pe<Me&&0>s(we,he))ee[Ie]=we,ee[pe]=he,Ie=pe;else break e}}return ce}function s(ee,ce){var he=ee.sortIndex-ce.sortIndex;return he!==0?he:ee.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],y=1,E=null,T=3,b=!1,N=!1,P=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=ee)i(h),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(h)}}function X(ee){if(P=!1,K(ee),!N)if(n(d)!==null)N=!0,G||(G=!0,O());else{var ce=n(h);ce!==null&&ve(X,ce.startTime-ee)}}var G=!1,I=-1,x=5,R=-1;function V(){return L?!0:!(t.unstable_now()-R<x)}function D(){if(L=!1,G){var ee=t.unstable_now();R=ee;var ce=!0;try{e:{N=!1,P&&(P=!1,F(I),I=-1),b=!0;var he=T;try{t:{for(K(ee),E=n(d);E!==null&&!(E.expirationTime>ee&&V());){var Ie=E.callback;if(typeof Ie=="function"){E.callback=null,T=E.priorityLevel;var Me=Ie(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof Me=="function"){E.callback=Me,K(ee),ce=!0;break t}E===n(d)&&i(d),K(ee)}else i(d);E=n(d)}if(E!==null)ce=!0;else{var H=n(h);H!==null&&ve(X,H.startTime-ee),ce=!1}}break e}finally{E=null,T=he,b=!1}ce=void 0}}finally{ce?O():G=!1}}}var O;if(typeof B=="function")O=function(){B(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,be=U.port2;U.port1.onmessage=D,O=function(){be.postMessage(null)}}else O=function(){z(D,0)};function ve(ee,ce){I=z(function(){ee(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var he=T;T=ce;try{return ee()}finally{T=he}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=T;T=ee;try{return ce()}finally{T=he}},t.unstable_scheduleCallback=function(ee,ce,he){var Ie=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,ee){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=he+Me,ee={id:y++,callback:ce,priorityLevel:ee,startTime:he,expirationTime:Me,sortIndex:-1},he>Ie?(ee.sortIndex=he,e(h,ee),n(d)===null&&ee===n(h)&&(P?(F(I),I=-1):P=!0,ve(X,he-Ie))):(ee.sortIndex=Me,e(d,ee),N||b||(N=!0,G||(G=!0,O()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var ce=T;return function(){var he=T;T=ce;try{return ee.apply(this,arguments)}finally{T=he}}}})(qg)),qg}var uS;function u2(){return uS||(uS=1,Bg.exports=l2()),Bg.exports}var zg={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function c2(){if(cS)return Jn;cS=1;var t=dv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:y}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jn.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,y)},Jn.flushSync=function(d){var h=l.T,y=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=y,i.d.f()}},Jn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Jn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Jn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:b}):y==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Jn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Jn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin);i.d.L(d,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Jn.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Jn.requestFormReset=function(d){i.d.r(d)},Jn.unstable_batchedUpdates=function(d,h){return d(h)},Jn.useFormState=function(d,h,y){return l.H.useFormState(d,h,y)},Jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var fS;function gC(){if(fS)return zg.exports;fS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zg.exports=c2(),zg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dS;function f2(){if(dS)return Ju;dS=1;var t=u2(),e=dv(),n=gC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var w=!1,M=v.child;M;){if(M===u){w=!0,u=v,f=_;break}if(M===f){w=!0,f=v,u=_;break}M=M.sibling}if(!w){for(M=_.child;M;){if(M===u){w=!0,u=_,f=v;break}if(M===f){w=!0,f=_,u=v;break}M=M.sibling}if(!w)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),B=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function be(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case X:return"Suspense";case G:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case B:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:be(r.type)||"Memo";case x:o=r._payload,r=r._init;try{return be(r(o))}catch{}}return null}var ve=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],Me=-1;function H(r){return{current:r}}function te(r){0>Me||(r.current=Ie[Me],Ie[Me]=null,Me--)}function fe(r,o){Me++,Ie[Me]=r.current,r.current=o}var pe=H(null),we=H(null),De=H(null),Ue=H(null);function jt(r,o){switch(fe(De,o),fe(we,r),fe(pe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?IT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=IT(o),r=xT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(pe),fe(pe,r)}function xe(){te(pe),te(we),te(De)}function Cn(r){r.memoizedState!==null&&fe(Ue,r);var o=pe.current,u=xT(o,r.type);o!==u&&(fe(we,r),fe(pe,u))}function ut(r){we.current===r&&(te(pe),te(we)),Ue.current===r&&(te(Ue),Hu._currentValue=he)}var _n,Ln;function In(r){if(_n===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);_n=o&&o[1]||"",Ln=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+r+Ln}var En=!1;function xn(r,o){if(!r||En)return"";En=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var Z=ne}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(ne){Z=ne}r.call(ae.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),w=_[0],M=_[1];if(w&&M){var q=w.split(`
`),Q=M.split(`
`);for(v=f=0;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===q.length||v===Q.length)for(f=q.length-1,v=Q.length-1;1<=f&&0<=v&&q[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(q[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||q[f]!==Q[v]){var re=`
`+q[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{En=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?In(u):""}function qi(r,o){switch(r.tag){case 26:case 27:case 5:return In(r.type);case 16:return In("Lazy");case 13:return r.child!==o&&o!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return xn(r.type,!1);case 11:return xn(r.type.render,!1);case 1:return xn(r.type,!0);case 31:return In("Activity");default:return""}}function Ci(r){try{var o="",u=null;do o+=qi(r,u),u=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var mi=Object.prototype.hasOwnProperty,ni=t.unstable_scheduleCallback,ii=t.unstable_cancelCallback,cr=t.unstable_shouldYield,zi=t.unstable_requestPaint,ct=t.unstable_now,Tn=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Ct=t.unstable_UserBlockingPriority,Yt=t.unstable_NormalPriority,me=t.unstable_LowPriority,ft=t.unstable_IdlePriority,nn=t.log,It=t.unstable_setDisableYieldValue,Rn=null,un=null;function oe(r){if(typeof nn=="function"&&It(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Rn,r)}catch{}}var Te=Math.clz32?Math.clz32:St,Se=Math.log,$e=Math.LN2;function St(r){return r>>>=0,r===0?32:31-(Se(r)/$e|0)|0}var Ye=256,We=262144,at=4194304;function rt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ke(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var M=f&134217727;return M!==0?(f=M&~_,f!==0?v=rt(f):(w&=M,w!==0?v=rt(w):u||(u=M&~r,u!==0&&(v=rt(u))))):(M=f&~_,M!==0?v=rt(M):w!==0?v=rt(w):u||(u=f&~r,u!==0&&(v=rt(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function je(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Sn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var r=at;return at<<=1,(at&62914560)===0&&(at=4194304),r}function rn(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function kt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function At(r,o,u,f,v,_){var w=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var M=r.entanglements,q=r.expirationTimes,Q=r.hiddenUpdates;for(u=w&~u;0<u;){var re=31-Te(u),ae=1<<re;M[re]=0,q[re]=-1;var Z=Q[re];if(Z!==null)for(Q[re]=null,re=0;re<Z.length;re++){var ne=Z[re];ne!==null&&(ne.lane&=-536870913)}u&=~ae}f!==0&&ri(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(w&~o))}function ri(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Te(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function Ht(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Te(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function jn(r,o){var u=o&-o;return u=(u&42)!==0?1:Gi(u),(u&(r.suspendedLanes|o))!==0?0:u}function Gi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function On(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function si(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:QT(r.type))}function jr(r,o){var u=ce.p;try{return ce.p=r,o()}finally{ce.p=u}}var Ii=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Ii,sn="__reactProps$"+Ii,xi="__reactContainer$"+Ii,$i="__reactEvents$"+Ii,Ri="__reactListeners$"+Ii,Lo="__reactHandles$"+Ii,fr="__reactResources$"+Ii,ji="__reactMarker$"+Ii;function Ki(r){delete r[Vt],delete r[sn],delete r[$i],delete r[Ri],delete r[Lo]}function gi(r){var o=r[Vt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[xi]||u[Vt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=VT(r);r!==null;){if(u=r[Vt])return u;r=VT(r)}return o}r=u,u=r.parentNode}return null}function Ji(r){if(r=r[Vt]||r[xi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Ir(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function oi(r){var o=r[fr];return o||(o=r[fr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Gt(r){r[ji]=!0}var dr=new Set,hr={};function ai(r,o){xr(r,o),xr(r+"Capture",o)}function xr(r,o){for(hr[r]=o,r=0;r<o.length;r++)dr.add(o[r])}var Up=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function af(r){return mi.call(tu,r)?!0:mi.call(eu,r)?!1:Up.test(r)?tu[r]=!0:(eu[r]=!0,!1)}function Cs(r,o,u){if(af(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function Is(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Yi(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}function li(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lf(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Fp(r,o,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(w){u=""+w,_.call(this,w)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function xa(r){if(!r._valueTracker){var o=lf(r)?"checked":"value";r._valueTracker=Fp(r,o,""+r[o])}}function nu(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=lf(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Ra(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Kr=/[\n"\\]/g;function Wt(r){return r.replace(Kr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xs(r,o,u,f,v,_,w,M){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),o!=null?w==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+li(o)):r.value!==""+li(o)&&(r.value=""+li(o)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),o!=null?Na(r,w,li(o)):u!=null?Na(r,w,li(u)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+li(M):r.removeAttribute("name")}function Oo(r,o,u,f,v,_,w,M){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){xa(r);return}u=u!=null?""+li(u):"",o=o!=null?""+li(o):u,M||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=M?r.checked:!!f,r.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),xa(r)}function Na(r,o,u){o==="number"&&Ra(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function dt(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+li(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Uo(r,o,u){if(o!=null&&(o=""+li(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+li(u):""}function Rs(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(ve(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=li(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),xa(r)}function Wi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Bp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Bp.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function uf(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&iu(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&iu(r,_,o[_])}function ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rr(r){return zp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Nn(){}var Ma=null;function Da(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jr=null,Ni=null;function cf(r){var o=Ji(r);if(o&&(r=o.stateNode)){var u=r[sn]||null;e:switch(r=o.stateNode,o.type){case"input":if(xs(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Wt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[sn]||null;if(!v)throw Error(i(90));xs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&nu(f)}break e;case"textarea":Uo(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&dt(r,!!u.multiple,o,!1)}}}var su=!1;function ff(r,o,u){if(su)return r(o,u);su=!0;try{var f=r(o);return f}finally{if(su=!1,(Jr!==null||Ni!==null)&&(ad(),Jr&&(o=Jr,r=Ni,Ni=Jr=null,cf(o),r)))for(o=0;o<r.length;o++)cf(r[o])}}function yi(r,o){var u=r.stateNode;if(u===null)return null;var f=u[sn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(pr)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{ou=!1}var Mi=null,ka=null,Mr=null;function Ns(){if(Mr)return Mr;var r,o=ka,u=o.length,f,v="value"in Mi?Mi.value:Mi.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var w=u-r;for(f=1;f<=w&&o[u-f]===v[_-f];f++);return Mr=v.slice(r,1<f?1-f:void 0)}function Fo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ms(){return!0}function Lt(){return!1}function Kn(r){function o(u,f,v,_,w){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(u=r[M],this[M]=u?u(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ms:Lt,this.isPropagationStopped=Lt,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),o}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Kn(Yr),Ds=E({},Yr,{view:0,detail:0}),df=Kn(Ds),ks,Pa,ui,qo=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ui&&(ui&&r.type==="mousemove"?(ks=r.screenX-ui.screenX,Pa=r.screenY-ui.screenY):Pa=ks=0,ui=r),ks)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),hf=Kn(qo),zo=E({},qo,{dataTransfer:0}),pf=Kn(zo),au=E({},Ds,{relatedTarget:0}),Ps=Kn(au),mf=E({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Kn(mf),Hp=E({},Yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gf=Kn(Hp),Ho=E({},Yr,{data:0}),lu=Kn(Ho),yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=cu[r])?!!o[r]:!1}function Vs(){return vf}var _f=E({},Ds,{key:function(r){if(r.key){var o=yf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(r){return r.type==="keypress"?Fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ef=Kn(_f),Wr=E({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=Kn(Wr),Tf=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),Sf=Kn(Tf),Af=E({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),La=Kn(Af),ci=E({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),wf=Kn(ci),bf=E({},Yr,{newState:0,oldState:0}),Ls=Kn(bf),m=[9,13,27,32],S=pr&&"CompositionEvent"in window,C=null;pr&&"documentMode"in document&&(C=document.documentMode);var k=pr&&"TextEvent"in window&&!C,Y=pr&&(!S||C&&8<C&&11>=C),ie=" ",de=!1;function _t(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cn(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ke=!1;function Mn(r,o){switch(r){case"compositionend":return cn(o);case"keypress":return o.which!==32?null:(de=!0,ie);case"textInput":return r=o.data,r===ie&&de?null:r;default:return null}}function Dn(r,o){if(Ke)return r==="compositionend"||!S&&_t(r,o)?(r=Ns(),Mr=ka=Mi=null,Ke=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Y&&o.locale!=="ko"?null:o.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Os[r.type]:o==="textarea"}function Go(r,o,u,f){Jr?Ni?Ni.push(f):Ni=[f]:Jr=f,o=pd(o,"onChange"),0<o.length&&(u=new Bo("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Qr=null,du=null;function D1(r){TT(r,0)}function Cf(r){var o=Ir(r);if(nu(o))return r}function B0(r,o){if(r==="change")return o}var q0=!1;if(pr){var Gp;if(pr){var $p="oninput"in document;if(!$p){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),$p=typeof z0.oninput=="function"}Gp=$p}else Gp=!1;q0=Gp&&(!document.documentMode||9<document.documentMode)}function H0(){Qr&&(Qr.detachEvent("onpropertychange",G0),du=Qr=null)}function G0(r){if(r.propertyName==="value"&&Cf(du)){var o=[];Go(o,du,r,Da(r)),ff(D1,o)}}function k1(r,o,u){r==="focusin"?(H0(),Qr=o,du=u,Qr.attachEvent("onpropertychange",G0)):r==="focusout"&&H0()}function P1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cf(du)}function V1(r,o){if(r==="click")return Cf(o)}function L1(r,o){if(r==="input"||r==="change")return Cf(o)}function O1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Di=typeof Object.is=="function"?Object.is:O1;function hu(r,o){if(Di(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!mi.call(o,v)||!Di(r[v],o[v]))return!1}return!0}function $0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function j0(r,o){var u=$0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=$0(u)}}function K0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?K0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function J0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ra(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ra(r.document)}return o}function jp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var U1=pr&&"documentMode"in document&&11>=document.documentMode,Oa=null,Kp=null,pu=null,Jp=!1;function Y0(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Jp||Oa==null||Oa!==Ra(f)||(f=Oa,"selectionStart"in f&&jp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),pu&&hu(pu,f)||(pu=f,f=pd(Kp,"onSelect"),0<f.length&&(o=new Bo("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=Oa)))}function $o(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Ua={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionrun:$o("Transition","TransitionRun"),transitionstart:$o("Transition","TransitionStart"),transitioncancel:$o("Transition","TransitionCancel"),transitionend:$o("Transition","TransitionEnd")},Yp={},W0={};pr&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function jo(r){if(Yp[r])return Yp[r];if(!Ua[r])return r;var o=Ua[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in W0)return Yp[r]=o[u];return r}var Q0=jo("animationend"),X0=jo("animationiteration"),Z0=jo("animationstart"),F1=jo("transitionrun"),B1=jo("transitionstart"),q1=jo("transitioncancel"),e_=jo("transitionend"),t_=new Map,Wp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wp.push("scrollEnd");function mr(r,o){t_.set(r,o),ai(o,[r])}var If=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Qi=[],Fa=0,Qp=0;function xf(){for(var r=Fa,o=Qp=Fa=0;o<r;){var u=Qi[o];Qi[o++]=null;var f=Qi[o];Qi[o++]=null;var v=Qi[o];Qi[o++]=null;var _=Qi[o];if(Qi[o++]=null,f!==null&&v!==null){var w=f.pending;w===null?v.next=v:(v.next=w.next,w.next=v),f.pending=v}_!==0&&n_(u,v,_)}}function Rf(r,o,u,f){Qi[Fa++]=r,Qi[Fa++]=o,Qi[Fa++]=u,Qi[Fa++]=f,Qp|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Xp(r,o,u,f){return Rf(r,o,u,f),Nf(r)}function Ko(r,o){return Rf(r,null,null,o),Nf(r)}function n_(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-Te(u),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),_):null}function Nf(r){if(50<Lu)throw Lu=0,ag=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ba={};function z1(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(r,o,u,f){return new z1(r,o,u,f)}function Zp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xr(r,o){var u=r.alternate;return u===null?(u=ki(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function i_(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Mf(r,o,u,f,v,_){var w=0;if(f=r,typeof r=="function")Zp(r)&&(w=1);else if(typeof r=="string")w=KN(r,u,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=ki(31,u,o,v),r.elementType=R,r.lanes=_,r;case P:return Jo(u.children,v,_,o);case L:w=8,v|=24;break;case z:return r=ki(12,u,o,v|2),r.elementType=z,r.lanes=_,r;case X:return r=ki(13,u,o,v),r.elementType=X,r.lanes=_,r;case G:return r=ki(19,u,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:w=10;break e;case F:w=9;break e;case K:w=11;break e;case I:w=14;break e;case x:w=16,f=null;break e}w=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=ki(w,u,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function Jo(r,o,u,f){return r=ki(7,r,f,o),r.lanes=u,r}function em(r,o,u){return r=ki(6,r,null,o),r.lanes=u,r}function r_(r){var o=ki(18,null,null,0);return o.stateNode=r,o}function tm(r,o,u){return o=ki(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var s_=new WeakMap;function Xi(r,o){if(typeof r=="object"&&r!==null){var u=s_.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Ci(o)},s_.set(r,o),o)}return{value:r,source:o,stack:Ci(o)}}var qa=[],za=0,Df=null,mu=0,Zi=[],er=0,Us=null,Dr=1,kr="";function Zr(r,o){qa[za++]=mu,qa[za++]=Df,Df=r,mu=o}function o_(r,o,u){Zi[er++]=Dr,Zi[er++]=kr,Zi[er++]=Us,Us=r;var f=Dr;r=kr;var v=32-Te(f)-1;f&=~(1<<v),u+=1;var _=32-Te(o)+v;if(30<_){var w=v-v%5;_=(f&(1<<w)-1).toString(32),f>>=w,v-=w,Dr=1<<32-Te(o)+v|u<<v|f,kr=_+r}else Dr=1<<_|u<<v|f,kr=r}function nm(r){r.return!==null&&(Zr(r,1),o_(r,1,0))}function im(r){for(;r===Df;)Df=qa[--za],qa[za]=null,mu=qa[--za],qa[za]=null;for(;r===Us;)Us=Zi[--er],Zi[er]=null,kr=Zi[--er],Zi[er]=null,Dr=Zi[--er],Zi[er]=null}function a_(r,o){Zi[er++]=Dr,Zi[er++]=kr,Zi[er++]=Us,Dr=o.id,kr=o.overflow,Us=r}var Un=null,Ot=null,st=!1,Fs=null,tr=!1,rm=Error(i(519));function Bs(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Xi(o,r)),rm}function l_(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Vt]=r,o[sn]=f,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<Uu.length;u++)Xe(Uu[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Oo(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Rs(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||bT(o.textContent,u)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=Nn),o=!0):o=!1,o||Bs(r,!0)}function u_(r){for(Un=r.return;Un;)switch(Un.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:Un=Un.return}}function Ha(r){if(r!==Un)return!1;if(!st)return u_(r),st=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Sg(r.type,r.memoizedProps)),u=!u),u&&Ot&&Bs(r),u_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=PT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=PT(r)}else o===27?(o=Ot,eo(r.type)?(r=Ig,Ig=null,Ot=r):Ot=o):Ot=Un?ir(r.stateNode.nextSibling):null;return!0}function Yo(){Ot=Un=null,st=!1}function sm(){var r=Fs;return r!==null&&(Si===null?Si=r:Si.push.apply(Si,r),Fs=null),r}function gu(r){Fs===null?Fs=[r]:Fs.push(r)}var om=H(null),Wo=null,es=null;function qs(r,o,u){fe(om,o._currentValue),o._currentValue=u}function ts(r){r._currentValue=om.current,te(om)}function am(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function lm(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var w=v.child;_=_.firstContext;e:for(;_!==null;){var M=_;_=v;for(var q=0;q<o.length;q++)if(M.context===o[q]){_.lanes|=u,M=_.alternate,M!==null&&(M.lanes|=u),am(_.return,u,r),f||(w=null);break e}_=M.next}}else if(v.tag===18){if(w=v.return,w===null)throw Error(i(341));w.lanes|=u,_=w.alternate,_!==null&&(_.lanes|=u),am(w,u,r),w=null}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===r){w=null;break}if(v=w.sibling,v!==null){v.return=w.return,w=v;break}w=w.return}v=w}}function Ga(r,o,u,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var w=v.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var M=v.type;Di(v.pendingProps.value,w.value)||(r!==null?r.push(M):r=[M])}}else if(v===Ue.current){if(w=v.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Hu):r=[Hu])}v=v.return}r!==null&&lm(o,r,u,f),o.flags|=262144}function kf(r){for(r=r.firstContext;r!==null;){if(!Di(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qo(r){Wo=r,es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fn(r){return c_(Wo,r)}function Pf(r,o){return Wo===null&&Qo(r),c_(r,o)}function c_(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},es===null){if(r===null)throw Error(i(308));es=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else es=es.next=o;return u}var H1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},G1=t.unstable_scheduleCallback,$1=t.unstable_NormalPriority,fn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function um(){return{controller:new H1,data:new Map,refCount:0}}function yu(r){r.refCount--,r.refCount===0&&G1($1,function(){r.controller.abort()})}var vu=null,cm=0,$a=0,ja=null;function j1(r,o){if(vu===null){var u=vu=[];cm=0,$a=hg(),ja={status:"pending",value:void 0,then:function(f){u.push(f)}}}return cm++,o.then(f_,f_),o}function f_(){if(--cm===0&&vu!==null){ja!==null&&(ja.status="fulfilled");var r=vu;vu=null,$a=0,ja=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function K1(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var d_=ee.S;ee.S=function(r,o){YE=ct(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&j1(r,o),d_!==null&&d_(r,o)};var Xo=H(null);function fm(){var r=Xo.current;return r!==null?r:Dt.pooledCache}function Vf(r,o){o===null?fe(Xo,Xo.current):fe(Xo,o.pool)}function h_(){var r=fm();return r===null?null:{parent:fn._currentValue,pool:r}}var Ka=Error(i(460)),dm=Error(i(474)),Lf=Error(i(542)),Of={then:function(){}};function p_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function m_(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Nn,Nn),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,y_(r),r;default:if(typeof o.status=="string")o.then(Nn,Nn);else{if(r=Dt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,y_(r),r}throw ea=o,Ka}}function Zo(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ea=u,Ka):u}}var ea=null;function g_(){if(ea===null)throw Error(i(459));var r=ea;return ea=null,r}function y_(r){if(r===Ka||r===Lf)throw Error(i(483))}var Ja=null,_u=0;function Uf(r){var o=_u;return _u+=1,Ja===null&&(Ja=[]),m_(Ja,r,o)}function Eu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ff(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function v_(r){function o(J,$){if(r){var W=J.deletions;W===null?(J.deletions=[$],J.flags|=16):W.push($)}}function u(J,$){if(!r)return null;for(;$!==null;)o(J,$),$=$.sibling;return null}function f(J){for(var $=new Map;J!==null;)J.key!==null?$.set(J.key,J):$.set(J.index,J),J=J.sibling;return $}function v(J,$){return J=Xr(J,$),J.index=0,J.sibling=null,J}function _(J,$,W){return J.index=W,r?(W=J.alternate,W!==null?(W=W.index,W<$?(J.flags|=67108866,$):W):(J.flags|=67108866,$)):(J.flags|=1048576,$)}function w(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function M(J,$,W,se){return $===null||$.tag!==6?($=em(W,J.mode,se),$.return=J,$):($=v($,W),$.return=J,$)}function q(J,$,W,se){var Re=W.type;return Re===P?re(J,$,W.props.children,se,W.key):$!==null&&($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Zo(Re)===$.type)?($=v($,W.props),Eu($,W),$.return=J,$):($=Mf(W.type,W.key,W.props,null,J.mode,se),Eu($,W),$.return=J,$)}function Q(J,$,W,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==W.containerInfo||$.stateNode.implementation!==W.implementation?($=tm(W,J.mode,se),$.return=J,$):($=v($,W.children||[]),$.return=J,$)}function re(J,$,W,se,Re){return $===null||$.tag!==7?($=Jo(W,J.mode,se,Re),$.return=J,$):($=v($,W),$.return=J,$)}function ae(J,$,W){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=em(""+$,J.mode,W),$.return=J,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return W=Mf($.type,$.key,$.props,null,J.mode,W),Eu(W,$),W.return=J,W;case N:return $=tm($,J.mode,W),$.return=J,$;case x:return $=Zo($),ae(J,$,W)}if(ve($)||O($))return $=Jo($,J.mode,W,null),$.return=J,$;if(typeof $.then=="function")return ae(J,Uf($),W);if($.$$typeof===B)return ae(J,Pf(J,$),W);Ff(J,$)}return null}function Z(J,$,W,se){var Re=$!==null?$.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Re!==null?null:M(J,$,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return W.key===Re?q(J,$,W,se):null;case N:return W.key===Re?Q(J,$,W,se):null;case x:return W=Zo(W),Z(J,$,W,se)}if(ve(W)||O(W))return Re!==null?null:re(J,$,W,se,null);if(typeof W.then=="function")return Z(J,$,Uf(W),se);if(W.$$typeof===B)return Z(J,$,Pf(J,W),se);Ff(J,W)}return null}function ne(J,$,W,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return J=J.get(W)||null,M($,J,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return J=J.get(se.key===null?W:se.key)||null,q($,J,se,Re);case N:return J=J.get(se.key===null?W:se.key)||null,Q($,J,se,Re);case x:return se=Zo(se),ne(J,$,W,se,Re)}if(ve(se)||O(se))return J=J.get(W)||null,re($,J,se,Re,null);if(typeof se.then=="function")return ne(J,$,W,Uf(se),Re);if(se.$$typeof===B)return ne(J,$,W,Pf($,se),Re);Ff($,se)}return null}function Ae(J,$,W,se){for(var Re=null,ht=null,Ce=$,Ge=$=0,tt=null;Ce!==null&&Ge<W.length;Ge++){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var pt=Z(J,Ce,W[Ge],se);if(pt===null){Ce===null&&(Ce=tt);break}r&&Ce&&pt.alternate===null&&o(J,Ce),$=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt,Ce=tt}if(Ge===W.length)return u(J,Ce),st&&Zr(J,Ge),Re;if(Ce===null){for(;Ge<W.length;Ge++)Ce=ae(J,W[Ge],se),Ce!==null&&($=_(Ce,$,Ge),ht===null?Re=Ce:ht.sibling=Ce,ht=Ce);return st&&Zr(J,Ge),Re}for(Ce=f(Ce);Ge<W.length;Ge++)tt=ne(Ce,J,Ge,W[Ge],se),tt!==null&&(r&&tt.alternate!==null&&Ce.delete(tt.key===null?Ge:tt.key),$=_(tt,$,Ge),ht===null?Re=tt:ht.sibling=tt,ht=tt);return r&&Ce.forEach(function(so){return o(J,so)}),st&&Zr(J,Ge),Re}function Pe(J,$,W,se){if(W==null)throw Error(i(151));for(var Re=null,ht=null,Ce=$,Ge=$=0,tt=null,pt=W.next();Ce!==null&&!pt.done;Ge++,pt=W.next()){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var so=Z(J,Ce,pt.value,se);if(so===null){Ce===null&&(Ce=tt);break}r&&Ce&&so.alternate===null&&o(J,Ce),$=_(so,$,Ge),ht===null?Re=so:ht.sibling=so,ht=so,Ce=tt}if(pt.done)return u(J,Ce),st&&Zr(J,Ge),Re;if(Ce===null){for(;!pt.done;Ge++,pt=W.next())pt=ae(J,pt.value,se),pt!==null&&($=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return st&&Zr(J,Ge),Re}for(Ce=f(Ce);!pt.done;Ge++,pt=W.next())pt=ne(Ce,J,Ge,pt.value,se),pt!==null&&(r&&pt.alternate!==null&&Ce.delete(pt.key===null?Ge:pt.key),$=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return r&&Ce.forEach(function(r2){return o(J,r2)}),st&&Zr(J,Ge),Re}function Nt(J,$,W,se){if(typeof W=="object"&&W!==null&&W.type===P&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case b:e:{for(var Re=W.key;$!==null;){if($.key===Re){if(Re=W.type,Re===P){if($.tag===7){u(J,$.sibling),se=v($,W.props.children),se.return=J,J=se;break e}}else if($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Zo(Re)===$.type){u(J,$.sibling),se=v($,W.props),Eu(se,W),se.return=J,J=se;break e}u(J,$);break}else o(J,$);$=$.sibling}W.type===P?(se=Jo(W.props.children,J.mode,se,W.key),se.return=J,J=se):(se=Mf(W.type,W.key,W.props,null,J.mode,se),Eu(se,W),se.return=J,J=se)}return w(J);case N:e:{for(Re=W.key;$!==null;){if($.key===Re)if($.tag===4&&$.stateNode.containerInfo===W.containerInfo&&$.stateNode.implementation===W.implementation){u(J,$.sibling),se=v($,W.children||[]),se.return=J,J=se;break e}else{u(J,$);break}else o(J,$);$=$.sibling}se=tm(W,J.mode,se),se.return=J,J=se}return w(J);case x:return W=Zo(W),Nt(J,$,W,se)}if(ve(W))return Ae(J,$,W,se);if(O(W)){if(Re=O(W),typeof Re!="function")throw Error(i(150));return W=Re.call(W),Pe(J,$,W,se)}if(typeof W.then=="function")return Nt(J,$,Uf(W),se);if(W.$$typeof===B)return Nt(J,$,Pf(J,W),se);Ff(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,$!==null&&$.tag===6?(u(J,$.sibling),se=v($,W),se.return=J,J=se):(u(J,$),se=em(W,J.mode,se),se.return=J,J=se),w(J)):u(J,$)}return function(J,$,W,se){try{_u=0;var Re=Nt(J,$,W,se);return Ja=null,Re}catch(Ce){if(Ce===Ka||Ce===Lf)throw Ce;var ht=ki(29,Ce,null,J.mode);return ht.lanes=se,ht.return=J,ht}finally{}}}var ta=v_(!0),__=v_(!1),zs=!1;function hm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Gs(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(yt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Nf(r),n_(r,null,u),o}return Rf(r,f,o,u),Nf(r)}function Tu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}function mm(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=w:_=_.next=w,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var gm=!1;function Su(){if(gm){var r=ja;if(r!==null)throw r}}function Au(r,o,u,f){gm=!1;var v=r.updateQueue;zs=!1;var _=v.firstBaseUpdate,w=v.lastBaseUpdate,M=v.shared.pending;if(M!==null){v.shared.pending=null;var q=M,Q=q.next;q.next=null,w===null?_=Q:w.next=Q,w=q;var re=r.alternate;re!==null&&(re=re.updateQueue,M=re.lastBaseUpdate,M!==w&&(M===null?re.firstBaseUpdate=Q:M.next=Q,re.lastBaseUpdate=q))}if(_!==null){var ae=v.baseState;w=0,re=Q=q=null,M=_;do{var Z=M.lane&-536870913,ne=Z!==M.lane;if(ne?(et&Z)===Z:(f&Z)===Z){Z!==0&&Z===$a&&(gm=!0),re!==null&&(re=re.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ae=r,Pe=M;Z=o;var Nt=u;switch(Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){ae=Ae.call(Nt,ae,Z);break e}ae=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,Z=typeof Ae=="function"?Ae.call(Nt,ae,Z):Ae,Z==null)break e;ae=E({},ae,Z);break e;case 2:zs=!0}}Z=M.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:M.tag,payload:M.payload,callback:M.callback,next:null},re===null?(Q=re=ne,q=ae):re=re.next=ne,w|=Z;if(M=M.next,M===null){if(M=v.shared.pending,M===null)break;ne=M,M=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(q=ae),v.baseState=q,v.firstBaseUpdate=Q,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),Ys|=w,r.lanes=w,r.memoizedState=ae}}function E_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function T_(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)E_(u[r],o)}var Ya=H(null),Bf=H(0);function S_(r,o){r=cs,fe(Bf,r),fe(Ya,o),cs=r|o.baseLanes}function ym(){fe(Bf,cs),fe(Ya,Ya.current)}function vm(){cs=Bf.current,te(Ya),te(Bf)}var Pi=H(null),nr=null;function $s(r){var o=r.alternate;fe(on,on.current&1),fe(Pi,r),nr===null&&(o===null||Ya.current!==null||o.memoizedState!==null)&&(nr=r)}function _m(r){fe(on,on.current),fe(Pi,r),nr===null&&(nr=r)}function A_(r){r.tag===22?(fe(on,on.current),fe(Pi,r),nr===null&&(nr=r)):js()}function js(){fe(on,on.current),fe(Pi,Pi.current)}function Vi(r){te(Pi),nr===r&&(nr=null),te(on)}var on=H(0);function qf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||bg(u)||Cg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ns=0,He=null,xt=null,dn=null,zf=!1,Wa=!1,na=!1,Hf=0,wu=0,Qa=null,J1=0;function Qt(){throw Error(i(321))}function Em(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Di(r[u],o[u]))return!1;return!0}function Tm(r,o,u,f,v,_){return ns=_,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ee.H=r===null||r.memoizedState===null?oE:Lm,na=!1,_=u(f,v),na=!1,Wa&&(_=b_(o,u,f,v)),w_(r),_}function w_(r){ee.H=Iu;var o=xt!==null&&xt.next!==null;if(ns=0,dn=xt=He=null,zf=!1,wu=0,Qa=null,o)throw Error(i(300));r===null||hn||(r=r.dependencies,r!==null&&kf(r)&&(hn=!0))}function b_(r,o,u,f){He=r;var v=0;do{if(Wa&&(Qa=null),wu=0,Wa=!1,25<=v)throw Error(i(301));if(v+=1,dn=xt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=aE,_=o(u,f)}while(Wa);return _}function Y1(){var r=ee.H,o=r.useState()[0];return o=typeof o.then=="function"?bu(o):o,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(He.flags|=1024),o}function Sm(){var r=Hf!==0;return Hf=0,r}function Am(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function wm(r){if(zf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zf=!1}ns=0,dn=xt=He=null,Wa=!1,wu=Hf=0,Qa=null}function fi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=r:dn=dn.next=r,dn}function an(){if(xt===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var o=dn===null?He.memoizedState:dn.next;if(o!==null)dn=o,xt=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},dn===null?He.memoizedState=dn=r:dn=dn.next=r}return dn}function Gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(r){var o=wu;return wu+=1,Qa===null&&(Qa=[]),r=m_(Qa,r,o),o=He,(dn===null?o.memoizedState:dn.next)===null&&(o=o.alternate,ee.H=o===null||o.memoizedState===null?oE:Lm),r}function $f(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bu(r);if(r.$$typeof===B)return Fn(r)}throw Error(i(438,String(r)))}function bm(r){var o=null,u=He.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=He.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Gf(),He.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=V;return o.index++,u}function is(r,o){return typeof o=="function"?o(r):o}function jf(r){var o=an();return Cm(o,xt,r)}function Cm(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var w=v.next;v.next=_.next,_.next=w}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var M=w=null,q=null,Q=o,re=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(et&ae)===ae:(ns&ae)===ae){var Z=Q.revertLane;if(Z===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===$a&&(re=!0);else if((ns&Z)===Z){Q=Q.next,Z===$a&&(re=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(M=q=ae,w=_):q=q.next=ae,He.lanes|=Z,Ys|=Z;ae=Q.action,na&&u(_,ae),_=Q.hasEagerState?Q.eagerState:u(_,ae)}else Z={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(M=q=Z,w=_):q=q.next=Z,He.lanes|=ae,Ys|=ae;Q=Q.next}while(Q!==null&&Q!==o);if(q===null?w=_:q.next=M,!Di(_,r.memoizedState)&&(hn=!0,re&&(u=ja,u!==null)))throw u;r.memoizedState=_,r.baseState=w,r.baseQueue=q,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Im(r){var o=an(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var w=v=v.next;do _=r(_,w.action),w=w.next;while(w!==v);Di(_,o.memoizedState)||(hn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function C_(r,o,u){var f=He,v=an(),_=st;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var w=!Di((xt||v).memoizedState,u);if(w&&(v.memoizedState=u,hn=!0),v=v.queue,Nm(R_.bind(null,f,v,r),[r]),v.getSnapshot!==o||w||dn!==null&&dn.memoizedState.tag&1){if(f.flags|=2048,Xa(9,{destroy:void 0},x_.bind(null,f,v,u,o),null),Dt===null)throw Error(i(349));_||(ns&127)!==0||I_(f,o,u)}return u}function I_(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=He.updateQueue,o===null?(o=Gf(),He.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function x_(r,o,u,f){o.value=u,o.getSnapshot=f,N_(o)&&M_(r)}function R_(r,o,u){return u(function(){N_(o)&&M_(r)})}function N_(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Di(r,u)}catch{return!0}}function M_(r){var o=Ko(r,2);o!==null&&Ai(o,r,2)}function xm(r){var o=fi();if(typeof r=="function"){var u=r;if(r=u(),na){oe(!0);try{u()}finally{oe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},o}function D_(r,o,u,f){return r.baseState=u,Cm(r,xt,typeof f=="function"?f:is)}function W1(r,o,u,f,v){if(Yf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};ee.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,k_(o,_)):(_.next=u.next,o.pending=u.next=_)}}function k_(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=ee.T,w={};ee.T=w;try{var M=u(v,f),q=ee.S;q!==null&&q(w,M),P_(r,o,M)}catch(Q){Rm(r,o,Q)}finally{_!==null&&w.types!==null&&(_.types=w.types),ee.T=_}}else try{_=u(v,f),P_(r,o,_)}catch(Q){Rm(r,o,Q)}}function P_(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){V_(r,o,f)},function(f){return Rm(r,o,f)}):V_(r,o,u)}function V_(r,o,u){o.status="fulfilled",o.value=u,L_(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,k_(r,u)))}function Rm(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,L_(o),o=o.next;while(o!==f)}r.action=null}function L_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function O_(r,o){return o}function U_(r,o){if(st){var u=Dt.formState;if(u!==null){e:{var f=He;if(st){if(Ot){t:{for(var v=Ot,_=tr;v.nodeType!==8;){if(!_){v=null;break t}if(v=ir(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Ot=ir(v.nextSibling),f=v.data==="F!";break e}}Bs(f)}f=!1}f&&(o=u[0])}}return u=fi(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O_,lastRenderedState:o},u.queue=f,u=iE.bind(null,He,f),f.dispatch=u,f=xm(!1),_=Vm.bind(null,He,!1,f.queue),f=fi(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=W1.bind(null,He,v,_,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function F_(r){var o=an();return B_(o,xt,r)}function B_(r,o,u){if(o=Cm(r,o,O_)[0],r=jf(is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=bu(o)}catch(w){throw w===Ka?Lf:w}else f=o;o=an();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(He.flags|=2048,Xa(9,{destroy:void 0},Q1.bind(null,v,u),null)),[f,_,r]}function Q1(r,o){r.action=o}function q_(r){var o=an(),u=xt;if(u!==null)return B_(o,u,r);an(),o=o.memoizedState,u=an();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Xa(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=He.updateQueue,o===null&&(o=Gf(),He.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function z_(){return an().memoizedState}function Kf(r,o,u,f){var v=fi();He.flags|=r,v.memoizedState=Xa(1|o,{destroy:void 0},u,f===void 0?null:f)}function Jf(r,o,u,f){var v=an();f=f===void 0?null:f;var _=v.memoizedState.inst;xt!==null&&f!==null&&Em(f,xt.memoizedState.deps)?v.memoizedState=Xa(o,_,u,f):(He.flags|=r,v.memoizedState=Xa(1|o,_,u,f))}function H_(r,o){Kf(8390656,8,r,o)}function Nm(r,o){Jf(2048,8,r,o)}function X1(r){He.flags|=4;var o=He.updateQueue;if(o===null)o=Gf(),He.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function G_(r){var o=an().memoizedState;return X1({ref:o,nextImpl:r}),function(){if((yt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function $_(r,o){return Jf(4,2,r,o)}function j_(r,o){return Jf(4,4,r,o)}function K_(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function J_(r,o,u){u=u!=null?u.concat([r]):null,Jf(4,4,K_.bind(null,o,r),u)}function Mm(){}function Y_(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&Em(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function W_(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&Em(o,f[1]))return f[0];if(f=r(),na){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f}function Dm(r,o,u){return u===void 0||(ns&1073741824)!==0&&(et&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=QE(),He.lanes|=r,Ys|=r,u)}function Q_(r,o,u,f){return Di(u,o)?u:Ya.current!==null?(r=Dm(r,u,f),Di(r,o)||(hn=!0),r):(ns&42)===0||(ns&1073741824)!==0&&(et&261930)===0?(hn=!0,r.memoizedState=u):(r=QE(),He.lanes|=r,Ys|=r,o)}function X_(r,o,u,f,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var w=ee.T,M={};ee.T=M,Vm(r,!1,o,u);try{var q=v(),Q=ee.S;if(Q!==null&&Q(M,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var re=K1(q,f);Cu(r,o,re,Ui(r))}else Cu(r,o,f,Ui(r))}catch(ae){Cu(r,o,{then:function(){},status:"rejected",reason:ae},Ui())}finally{ce.p=_,w!==null&&M.types!==null&&(w.types=M.types),ee.T=w}}function Z1(){}function km(r,o,u,f){if(r.tag!==5)throw Error(i(476));var v=Z_(r).queue;X_(r,v,o,he,u===null?Z1:function(){return eE(r),u(f)})}function Z_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:he},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function eE(r){var o=Z_(r);o.next===null&&(o=r.alternate.memoizedState),Cu(r,o.next.queue,{},Ui())}function Pm(){return Fn(Hu)}function tE(){return an().memoizedState}function nE(){return an().memoizedState}function eN(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ui();r=Hs(u);var f=Gs(o,r,u);f!==null&&(Ai(f,o,u),Tu(f,o,u)),o={cache:um()},r.payload=o;return}o=o.return}}function tN(r,o,u){var f=Ui();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Yf(r)?rE(o,u):(u=Xp(r,o,u,f),u!==null&&(Ai(u,r,f),sE(u,o,f)))}function iE(r,o,u){var f=Ui();Cu(r,o,u,f)}function Cu(r,o,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Yf(r))rE(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var w=o.lastRenderedState,M=_(w,u);if(v.hasEagerState=!0,v.eagerState=M,Di(M,w))return Rf(r,o,v,0),Dt===null&&xf(),!1}catch{}finally{}if(u=Xp(r,o,v,f),u!==null)return Ai(u,r,f),sE(u,o,f),!0}return!1}function Vm(r,o,u,f){if(f={lane:2,revertLane:hg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Yf(r)){if(o)throw Error(i(479))}else o=Xp(r,u,f,2),o!==null&&Ai(o,r,2)}function Yf(r){var o=r.alternate;return r===He||o!==null&&o===He}function rE(r,o){Wa=zf=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function sE(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}var Iu={readContext:Fn,use:$f,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Iu.useEffectEvent=Qt;var oE={readContext:Fn,use:$f,useCallback:function(r,o){return fi().memoizedState=[r,o===void 0?null:o],r},useContext:Fn,useEffect:H_,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Kf(4194308,4,K_.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Kf(4194308,4,r,o)},useInsertionEffect:function(r,o){Kf(4,2,r,o)},useMemo:function(r,o){var u=fi();o=o===void 0?null:o;var f=r();if(na){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=fi();if(u!==void 0){var v=u(o);if(na){oe(!0);try{u(o)}finally{oe(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=tN.bind(null,He,r),[f.memoizedState,r]},useRef:function(r){var o=fi();return r={current:r},o.memoizedState=r},useState:function(r){r=xm(r);var o=r.queue,u=iE.bind(null,He,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Mm,useDeferredValue:function(r,o){var u=fi();return Dm(u,r,o)},useTransition:function(){var r=xm(!1);return r=X_.bind(null,He,r.queue,!0,!1),fi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=He,v=fi();if(st){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Dt===null)throw Error(i(349));(et&127)!==0||I_(f,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,H_(R_.bind(null,f,_,r),[r]),f.flags|=2048,Xa(9,{destroy:void 0},x_.bind(null,f,_,u,o),null),u},useId:function(){var r=fi(),o=Dt.identifierPrefix;if(st){var u=kr,f=Dr;u=(f&~(1<<32-Te(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Hf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=J1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Pm,useFormState:U_,useActionState:U_,useOptimistic:function(r){var o=fi();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Vm.bind(null,He,!0,u),u.dispatch=o,[r,o]},useMemoCache:bm,useCacheRefresh:function(){return fi().memoizedState=eN.bind(null,He)},useEffectEvent:function(r){var o=fi(),u={impl:r};return o.memoizedState=u,function(){if((yt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Lm={readContext:Fn,use:$f,useCallback:Y_,useContext:Fn,useEffect:Nm,useImperativeHandle:J_,useInsertionEffect:$_,useLayoutEffect:j_,useMemo:W_,useReducer:jf,useRef:z_,useState:function(){return jf(is)},useDebugValue:Mm,useDeferredValue:function(r,o){var u=an();return Q_(u,xt.memoizedState,r,o)},useTransition:function(){var r=jf(is)[0],o=an().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:C_,useId:tE,useHostTransitionStatus:Pm,useFormState:F_,useActionState:F_,useOptimistic:function(r,o){var u=an();return D_(u,xt,r,o)},useMemoCache:bm,useCacheRefresh:nE};Lm.useEffectEvent=G_;var aE={readContext:Fn,use:$f,useCallback:Y_,useContext:Fn,useEffect:Nm,useImperativeHandle:J_,useInsertionEffect:$_,useLayoutEffect:j_,useMemo:W_,useReducer:Im,useRef:z_,useState:function(){return Im(is)},useDebugValue:Mm,useDeferredValue:function(r,o){var u=an();return xt===null?Dm(u,r,o):Q_(u,xt.memoizedState,r,o)},useTransition:function(){var r=Im(is)[0],o=an().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:C_,useId:tE,useHostTransitionStatus:Pm,useFormState:q_,useActionState:q_,useOptimistic:function(r,o){var u=an();return xt!==null?D_(u,xt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:bm,useCacheRefresh:nE};aE.useEffectEvent=G_;function Om(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Um={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Ui(),v=Hs(f);v.payload=o,u!=null&&(v.callback=u),o=Gs(r,v,f),o!==null&&(Ai(o,r,f),Tu(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Ui(),v=Hs(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Gs(r,v,f),o!==null&&(Ai(o,r,f),Tu(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Ui(),f=Hs(u);f.tag=2,o!=null&&(f.callback=o),o=Gs(r,f,u),o!==null&&(Ai(o,r,u),Tu(o,r,u))}};function lE(r,o,u,f,v,_,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,w):o.prototype&&o.prototype.isPureReactComponent?!hu(u,f)||!hu(v,_):!0}function uE(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&Um.enqueueReplaceState(o,o.state,null)}function ia(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function cE(r){If(r)}function fE(r){console.error(r)}function dE(r){If(r)}function Wf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function hE(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Fm(r,o,u){return u=Hs(u),u.tag=3,u.payload={element:null},u.callback=function(){Wf(r,o)},u}function pE(r){return r=Hs(r),r.tag=3,r}function mE(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){hE(o,u,f)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){hE(o,u,f),typeof v!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function nN(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Ga(o,u,v,!0),u=Pi.current,u!==null){switch(u.tag){case 31:case 13:return nr===null?ld():u.alternate===null&&Xt===0&&(Xt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Of?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),cg(r,f,v)),!1;case 22:return u.flags|=65536,f===Of?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),cg(r,f,v)),!1}throw Error(i(435,u.tag))}return cg(r,f,v),ld(),!1}if(st)return o=Pi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==rm&&(r=Error(i(422),{cause:f}),gu(Xi(r,u)))):(f!==rm&&(o=Error(i(423),{cause:f}),gu(Xi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=Xi(f,u),v=Fm(r.stateNode,f,v),mm(r,v),Xt!==4&&(Xt=2)),!1;var _=Error(i(520),{cause:f});if(_=Xi(_,u),Vu===null?Vu=[_]:Vu.push(_),Xt!==4&&(Xt=2),o===null)return!0;f=Xi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Fm(u.stateNode,f,r),mm(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ws===null||!Ws.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=pE(v),mE(v,r,u,f),mm(u,v),!1}u=u.return}while(u!==null);return!1}var Bm=Error(i(461)),hn=!1;function Bn(r,o,u,f){o.child=r===null?__(o,null,u,f):ta(o,r.child,u,f)}function gE(r,o,u,f,v){u=u.render;var _=o.ref;if("ref"in f){var w={};for(var M in f)M!=="ref"&&(w[M]=f[M])}else w=f;return Qo(o),f=Tm(r,o,u,w,_,v),M=Sm(),r!==null&&!hn?(Am(r,o,v),rs(r,o,v)):(st&&M&&nm(o),o.flags|=1,Bn(r,o,f,v),o.child)}function yE(r,o,u,f,v){if(r===null){var _=u.type;return typeof _=="function"&&!Zp(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,vE(r,o,_,f,v)):(r=Mf(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Jm(r,v)){var w=_.memoizedProps;if(u=u.compare,u=u!==null?u:hu,u(w,f)&&r.ref===o.ref)return rs(r,o,v)}return o.flags|=1,r=Xr(_,f),r.ref=o.ref,r.return=o,o.child=r}function vE(r,o,u,f,v){if(r!==null){var _=r.memoizedProps;if(hu(_,f)&&r.ref===o.ref)if(hn=!1,o.pendingProps=f=_,Jm(r,v))(r.flags&131072)!==0&&(hn=!0);else return o.lanes=r.lanes,rs(r,o,v)}return qm(r,o,u,f,v)}function _E(r,o,u,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return EE(r,o,_,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Vf(o,_!==null?_.cachePool:null),_!==null?S_(o,_):ym(),A_(o);else return f=o.lanes=536870912,EE(r,o,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Vf(o,_.cachePool),S_(o,_),js(),o.memoizedState=null):(r!==null&&Vf(o,null),ym(),js());return Bn(r,o,v,u),o.child}function xu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function EE(r,o,u,f,v){var _=fm();return _=_===null?null:{parent:fn._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Vf(o,null),ym(),A_(o),r!==null&&Ga(r,o,f,!0),o.childLanes=v,null}function Qf(r,o){return o=Zf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function TE(r,o,u){return ta(o,r.child,null,u),r=Qf(o,o.pendingProps),r.flags|=2,Vi(o),o.memoizedState=null,r}function iN(r,o,u){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(st){if(f.mode==="hidden")return r=Qf(o,f),o.lanes=536870912,xu(null,r);if(_m(o),(r=Ot)?(r=kT(r,tr),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Dr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},u=r_(r),u.return=o,o.child=u,Un=o,Ot=null)):r=null,r===null)throw Bs(o);return o.lanes=536870912,null}return Qf(o,f)}var _=r.memoizedState;if(_!==null){var w=_.dehydrated;if(_m(o),v)if(o.flags&256)o.flags&=-257,o=TE(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(hn||Ga(r,o,u,!1),v=(u&r.childLanes)!==0,hn||v){if(f=Dt,f!==null&&(w=jn(f,u),w!==0&&w!==_.retryLane))throw _.retryLane=w,Ko(r,w),Ai(f,r,w),Bm;ld(),o=TE(r,o,u)}else r=_.treeContext,Ot=ir(w.nextSibling),Un=o,st=!0,Fs=null,tr=!1,r!==null&&a_(o,r),o=Qf(o,f),o.flags|=4096;return o}return r=Xr(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Xf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function qm(r,o,u,f,v){return Qo(o),u=Tm(r,o,u,f,void 0,v),f=Sm(),r!==null&&!hn?(Am(r,o,v),rs(r,o,v)):(st&&f&&nm(o),o.flags|=1,Bn(r,o,u,v),o.child)}function SE(r,o,u,f,v,_){return Qo(o),o.updateQueue=null,u=b_(o,f,u,v),w_(r),f=Sm(),r!==null&&!hn?(Am(r,o,_),rs(r,o,_)):(st&&f&&nm(o),o.flags|=1,Bn(r,o,u,_),o.child)}function AE(r,o,u,f,v){if(Qo(o),o.stateNode===null){var _=Ba,w=u.contextType;typeof w=="object"&&w!==null&&(_=Fn(w)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Um,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},hm(o),w=u.contextType,_.context=typeof w=="object"&&w!==null?Fn(w):Ba,_.state=o.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Om(o,u,w,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Um.enqueueReplaceState(_,_.state,null),Au(o,f,_,v),Su(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var M=o.memoizedProps,q=ia(u,M);_.props=q;var Q=_.context,re=u.contextType;w=Ba,typeof re=="object"&&re!==null&&(w=Fn(re));var ae=u.getDerivedStateFromProps;re=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M||Q!==w)&&uE(o,_,f,w),zs=!1;var Z=o.memoizedState;_.state=Z,Au(o,f,_,v),Su(),Q=o.memoizedState,M||Z!==Q||zs?(typeof ae=="function"&&(Om(o,u,ae,f),Q=o.memoizedState),(q=zs||lE(o,u,q,f,Z,Q,w))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),_.props=f,_.state=Q,_.context=w,f=q):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,pm(r,o),w=o.memoizedProps,re=ia(u,w),_.props=re,ae=o.pendingProps,Z=_.context,Q=u.contextType,q=Ba,typeof Q=="object"&&Q!==null&&(q=Fn(Q)),M=u.getDerivedStateFromProps,(Q=typeof M=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ae||Z!==q)&&uE(o,_,f,q),zs=!1,Z=o.memoizedState,_.state=Z,Au(o,f,_,v),Su();var ne=o.memoizedState;w!==ae||Z!==ne||zs||r!==null&&r.dependencies!==null&&kf(r.dependencies)?(typeof M=="function"&&(Om(o,u,M,f),ne=o.memoizedState),(re=zs||lE(o,u,re,f,Z,ne,q)||r!==null&&r.dependencies!==null&&kf(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,q)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=q,f=re):(typeof _.componentDidUpdate!="function"||w===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,Xf(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=ta(o,r.child,null,v),o.child=ta(o,null,u,v)):Bn(r,o,u,v),o.memoizedState=_.state,r=o.child):r=rs(r,o,v),r}function wE(r,o,u,f){return Yo(),o.flags|=256,Bn(r,o,u,f),o.child}var zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hm(r){return{baseLanes:r,cachePool:h_()}}function Gm(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Oi),r}function bE(r,o,u){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,w;if((w=_)||(w=r!==null&&r.memoizedState===null?!1:(on.current&2)!==0),w&&(v=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,r===null){if(st){if(v?$s(o):js(),(r=Ot)?(r=kT(r,tr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Dr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},u=r_(r),u.return=o,o.child=u,Un=o,Ot=null)):r=null,r===null)throw Bs(o);return Cg(r)?o.lanes=32:o.lanes=536870912,null}var M=f.children;return f=f.fallback,v?(js(),v=o.mode,M=Zf({mode:"hidden",children:M},v),f=Jo(f,v,u,null),M.return=o,f.return=o,M.sibling=f,o.child=M,f=o.child,f.memoizedState=Hm(u),f.childLanes=Gm(r,w,u),o.memoizedState=zm,xu(null,f)):($s(o),$m(o,M))}var q=r.memoizedState;if(q!==null&&(M=q.dehydrated,M!==null)){if(_)o.flags&256?($s(o),o.flags&=-257,o=jm(r,o,u)):o.memoizedState!==null?(js(),o.child=r.child,o.flags|=128,o=null):(js(),M=f.fallback,v=o.mode,f=Zf({mode:"visible",children:f.children},v),M=Jo(M,v,u,null),M.flags|=2,f.return=o,M.return=o,f.sibling=M,o.child=f,ta(o,r.child,null,u),f=o.child,f.memoizedState=Hm(u),f.childLanes=Gm(r,w,u),o.memoizedState=zm,o=xu(null,f));else if($s(o),Cg(M)){if(w=M.nextSibling&&M.nextSibling.dataset,w)var Q=w.dgst;w=Q,f=Error(i(419)),f.stack="",f.digest=w,gu({value:f,source:null,stack:null}),o=jm(r,o,u)}else if(hn||Ga(r,o,u,!1),w=(u&r.childLanes)!==0,hn||w){if(w=Dt,w!==null&&(f=jn(w,u),f!==0&&f!==q.retryLane))throw q.retryLane=f,Ko(r,f),Ai(w,r,f),Bm;bg(M)||ld(),o=jm(r,o,u)}else bg(M)?(o.flags|=192,o.child=r.child,o=null):(r=q.treeContext,Ot=ir(M.nextSibling),Un=o,st=!0,Fs=null,tr=!1,r!==null&&a_(o,r),o=$m(o,f.children),o.flags|=4096);return o}return v?(js(),M=f.fallback,v=o.mode,q=r.child,Q=q.sibling,f=Xr(q,{mode:"hidden",children:f.children}),f.subtreeFlags=q.subtreeFlags&65011712,Q!==null?M=Xr(Q,M):(M=Jo(M,v,u,null),M.flags|=2),M.return=o,f.return=o,f.sibling=M,o.child=f,xu(null,f),f=o.child,M=r.child.memoizedState,M===null?M=Hm(u):(v=M.cachePool,v!==null?(q=fn._currentValue,v=v.parent!==q?{parent:q,pool:q}:v):v=h_(),M={baseLanes:M.baseLanes|u,cachePool:v}),f.memoizedState=M,f.childLanes=Gm(r,w,u),o.memoizedState=zm,xu(r.child,f)):($s(o),u=r.child,r=u.sibling,u=Xr(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(w=o.deletions,w===null?(o.deletions=[r],o.flags|=16):w.push(r)),o.child=u,o.memoizedState=null,u)}function $m(r,o){return o=Zf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Zf(r,o){return r=ki(22,r,null,o),r.lanes=0,r}function jm(r,o,u){return ta(o,r.child,null,u),r=$m(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function CE(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),am(r.return,o,u)}function Km(r,o,u,f,v,_){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=v,w.treeForkCount=_)}function IE(r,o,u){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var w=on.current,M=(w&2)!==0;if(M?(w=w&1|2,o.flags|=128):w&=1,fe(on,w),Bn(r,o,f,u),f=st?mu:0,!M&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&CE(r,u,o);else if(r.tag===19)CE(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&qf(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Km(o,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&qf(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}Km(o,!0,u,null,_,f);break;case"together":Km(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function rs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ys|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Ga(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Xr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Xr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Jm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&kf(r)))}function rN(r,o,u){switch(o.tag){case 3:jt(o,o.stateNode.containerInfo),qs(o,fn,r.memoizedState.cache),Yo();break;case 27:case 5:Cn(o);break;case 4:jt(o,o.stateNode.containerInfo);break;case 10:qs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,_m(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?($s(o),o.flags|=128,null):(u&o.child.childLanes)!==0?bE(r,o,u):($s(o),r=rs(r,o,u),r!==null?r.sibling:null);$s(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Ga(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return IE(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(on,on.current),f)break;return null;case 22:return o.lanes=0,_E(r,o,u,o.pendingProps);case 24:qs(o,fn,r.memoizedState.cache)}return rs(r,o,u)}function xE(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)hn=!0;else{if(!Jm(r,u)&&(o.flags&128)===0)return hn=!1,rN(r,o,u);hn=(r.flags&131072)!==0}else hn=!1,st&&(o.flags&1048576)!==0&&o_(o,mu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=Zo(o.elementType),o.type=r,typeof r=="function")Zp(r)?(f=ia(r,f),o.tag=1,o=AE(null,o,r,f,u)):(o.tag=0,o=qm(null,o,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===K){o.tag=11,o=gE(null,o,r,f,u);break e}else if(v===I){o.tag=14,o=yE(null,o,r,f,u);break e}}throw o=be(r)||r,Error(i(306,o,""))}}return o;case 0:return qm(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=ia(f,o.pendingProps),AE(r,o,f,v,u);case 3:e:{if(jt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,pm(r,o),Au(o,f,null,u);var w=o.memoizedState;if(f=w.cache,qs(o,fn,f),f!==_.cache&&lm(o,[fn],u,!0),Su(),f=w.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=wE(r,o,f,u);break e}else if(f!==v){v=Xi(Error(i(424)),o),gu(v),o=wE(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=ir(r.firstChild),Un=o,st=!0,Fs=null,tr=!0,u=__(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Yo(),f===v){o=rs(r,o,u);break e}Bn(r,o,f,u)}o=o.child}return o;case 26:return Xf(r,o),r===null?(u=FT(o.type,null,o.pendingProps,null))?o.memoizedState=u:st||(u=o.type,r=o.pendingProps,f=md(De.current).createElement(u),f[Vt]=o,f[sn]=r,qn(f,u,r),Gt(f),o.stateNode=f):o.memoizedState=FT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Cn(o),r===null&&st&&(f=o.stateNode=LT(o.type,o.pendingProps,De.current),Un=o,tr=!0,v=Ot,eo(o.type)?(Ig=v,Ot=ir(f.firstChild)):Ot=v),Bn(r,o,o.pendingProps.children,u),Xf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&st&&((v=f=Ot)&&(f=PN(f,o.type,o.pendingProps,tr),f!==null?(o.stateNode=f,Un=o,Ot=ir(f.firstChild),tr=!1,v=!0):v=!1),v||Bs(o)),Cn(o),v=o.type,_=o.pendingProps,w=r!==null?r.memoizedProps:null,f=_.children,Sg(v,_)?f=null:w!==null&&Sg(v,w)&&(o.flags|=32),o.memoizedState!==null&&(v=Tm(r,o,Y1,null,null,u),Hu._currentValue=v),Xf(r,o),Bn(r,o,f,u),o.child;case 6:return r===null&&st&&((r=u=Ot)&&(u=VN(u,o.pendingProps,tr),u!==null?(o.stateNode=u,Un=o,Ot=null,r=!0):r=!1),r||Bs(o)),null;case 13:return bE(r,o,u);case 4:return jt(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=ta(o,null,f,u):Bn(r,o,f,u),o.child;case 11:return gE(r,o,o.type,o.pendingProps,u);case 7:return Bn(r,o,o.pendingProps,u),o.child;case 8:return Bn(r,o,o.pendingProps.children,u),o.child;case 12:return Bn(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,qs(o,o.type,f.value),Bn(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Qo(o),v=Fn(v),f=f(v),o.flags|=1,Bn(r,o,f,u),o.child;case 14:return yE(r,o,o.type,o.pendingProps,u);case 15:return vE(r,o,o.type,o.pendingProps,u);case 19:return IE(r,o,u);case 31:return iN(r,o,u);case 22:return _E(r,o,u,o.pendingProps);case 24:return Qo(o),f=Fn(fn),r===null?(v=fm(),v===null&&(v=Dt,_=um(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:f,cache:v},hm(o),qs(o,fn,v)):((r.lanes&u)!==0&&(pm(r,o),Au(o,null,null,u),Su()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),qs(o,fn,f)):(f=_.cache,qs(o,fn,f),f!==v.cache&&lm(o,[fn],u,!0))),Bn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ss(r){r.flags|=4}function Ym(r,o,u,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(tT())r.flags|=8192;else throw ea=Of,dm}else r.flags&=-16777217}function RE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!GT(o))if(tT())r.flags|=8192;else throw ea=Of,dm}function ed(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Hi():536870912,r.lanes|=o,nl|=o)}function Ru(r,o){if(!st)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Ut(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function sN(r,o,u){var f=o.pendingProps;switch(im(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ts(fn),xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Ha(o)?ss(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,sm())),Ut(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(ss(o),_!==null?(Ut(o),RE(o,_)):(Ut(o),Ym(o,v,null,f,u))):_?_!==r.memoizedState?(ss(o),Ut(o),RE(o,_)):(Ut(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ss(o),Ut(o),Ym(o,v,r,f,u)),null;case 27:if(ut(o),u=De.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}r=pe.current,Ha(o)?l_(o):(r=LT(v,f,u),o.stateNode=r,ss(o))}return Ut(o),null;case 5:if(ut(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}if(_=pe.current,Ha(o))l_(o);else{var w=md(De.current);switch(_){case 1:_=w.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=w.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=w.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=w.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?w.createElement("select",{is:f.is}):w.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?w.createElement(v,{is:f.is}):w.createElement(v)}}_[Vt]=o,_[sn]=f;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)_.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=_;e:switch(qn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ss(o)}}return Ut(o),Ym(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=De.current,Ha(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=Un,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Vt]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||bT(r.nodeValue,u)),r||Bs(o,!0)}else r=md(r).createTextNode(f),r[Vt]=o,o.stateNode=r}return Ut(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(f=Ha(o),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Vt]=o}else Yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),r=!1}else u=sm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Vi(o),o):(Vi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Ut(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ha(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Vt]=o}else Yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),v=!1}else v=sm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Vi(o),o):(Vi(o),null)}return Vi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),ed(o,o.updateQueue),Ut(o),null);case 4:return xe(),r===null&&yg(o.stateNode.containerInfo),Ut(o),null;case 10:return ts(o.type),Ut(o),null;case 19:if(te(on),f=o.memoizedState,f===null)return Ut(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)Ru(f,!1);else{if(Xt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=qf(r),_!==null){for(o.flags|=128,Ru(f,!1),r=_.updateQueue,o.updateQueue=r,ed(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)i_(u,r),u=u.sibling;return fe(on,on.current&1|2),st&&Zr(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&ct()>sd&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304)}else{if(!v)if(r=qf(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,ed(o,r),Ru(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!st)return Ut(o),null}else 2*ct()-f.renderingStartTime>sd&&u!==536870912&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=ct(),r.sibling=null,u=on.current,fe(on,v?u&1|2:u&1),st&&Zr(o,f.treeForkCount),r):(Ut(o),null);case 22:case 23:return Vi(o),vm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),u=o.updateQueue,u!==null&&ed(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&te(Xo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ts(fn),Ut(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function oN(r,o){switch(im(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ts(fn),xe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ut(o),null;case 31:if(o.memoizedState!==null){if(Vi(o),o.alternate===null)throw Error(i(340));Yo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Vi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Yo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return te(on),null;case 4:return xe(),null;case 10:return ts(o.type),null;case 22:case 23:return Vi(o),vm(),r!==null&&te(Xo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ts(fn),null;case 25:return null;default:return null}}function NE(r,o){switch(im(o),o.tag){case 3:ts(fn),xe();break;case 26:case 27:case 5:ut(o);break;case 4:xe();break;case 31:o.memoizedState!==null&&Vi(o);break;case 13:Vi(o);break;case 19:te(on);break;case 10:ts(o.type);break;case 22:case 23:Vi(o),vm(),r!==null&&te(Xo);break;case 24:ts(fn)}}function Nu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var _=u.create,w=u.inst;f=_(),w.destroy=f}u=u.next}while(u!==v)}}catch(M){bt(o,o.return,M)}}function Ks(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var w=f.inst,M=w.destroy;if(M!==void 0){w.destroy=void 0,v=o;var q=u,Q=M;try{Q()}catch(re){bt(v,q,re)}}}f=f.next}while(f!==_)}}catch(re){bt(o,o.return,re)}}function ME(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{T_(o,u)}catch(f){bt(r,r.return,f)}}}function DE(r,o,u){u.props=ia(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){bt(r,o,f)}}function Mu(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){bt(r,o,v)}}function Pr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){bt(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){bt(r,o,v)}else u.current=null}function kE(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){bt(r,r.return,v)}}function Wm(r,o,u){try{var f=r.stateNode;xN(f,r.type,u,o),f[sn]=o}catch(v){bt(r,r.return,v)}}function PE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&eo(r.type)||r.tag===4}function Qm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||PE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&eo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xm(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Nn));else if(f!==4&&(f===27&&eo(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Xm(r,o,u),r=r.sibling;r!==null;)Xm(r,o,u),r=r.sibling}function td(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&eo(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(td(r,o,u),r=r.sibling;r!==null;)td(r,o,u),r=r.sibling}function VE(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);qn(o,f,u),o[Vt]=r,o[sn]=u}catch(_){bt(r,r.return,_)}}var os=!1,pn=!1,Zm=!1,LE=typeof WeakSet=="function"?WeakSet:Set,kn=null;function aN(r,o){if(r=r.containerInfo,Eg=Sd,r=J0(r),jp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var w=0,M=-1,q=-1,Q=0,re=0,ae=r,Z=null;t:for(;;){for(var ne;ae!==u||v!==0&&ae.nodeType!==3||(M=w+v),ae!==_||f!==0&&ae.nodeType!==3||(q=w+f),ae.nodeType===3&&(w+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)Z=ae,ae=ne;for(;;){if(ae===r)break t;if(Z===u&&++Q===v&&(M=w),Z===_&&++re===f&&(q=w),(ne=ae.nextSibling)!==null)break;ae=Z,Z=ae.parentNode}ae=ne}u=M===-1||q===-1?null:{start:M,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tg={focusedElem:r,selectionRange:u},Sd=!1,kn=o;kn!==null;)if(o=kn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,kn=r;else for(;kn!==null;){switch(o=kn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var Ae=ia(u.type,v);r=f.getSnapshotBeforeUpdate(Ae,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){bt(u,u.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)wg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,kn=r;break}kn=o.return}}function OE(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ls(r,u),f&4&&Nu(5,u);break;case 1:if(ls(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(w){bt(u,u.return,w)}else{var v=ia(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(w){bt(u,u.return,w)}}f&64&&ME(u),f&512&&Mu(u,u.return);break;case 3:if(ls(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{T_(r,o)}catch(w){bt(u,u.return,w)}}break;case 27:o===null&&f&4&&VE(u);case 26:case 5:ls(r,u),o===null&&f&4&&kE(u),f&512&&Mu(u,u.return);break;case 12:ls(r,u);break;case 31:ls(r,u),f&4&&BE(r,u);break;case 13:ls(r,u),f&4&&qE(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=gN.bind(null,u),LN(r,u))));break;case 22:if(f=u.memoizedState!==null||os,!f){o=o!==null&&o.memoizedState!==null||pn,v=os;var _=pn;os=f,(pn=o)&&!_?us(r,u,(u.subtreeFlags&8772)!==0):ls(r,u),os=v,pn=_}break;case 30:break;default:ls(r,u)}}function UE(r){var o=r.alternate;o!==null&&(r.alternate=null,UE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Ki(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var $t=null,_i=!1;function as(r,o,u){for(u=u.child;u!==null;)FE(r,o,u),u=u.sibling}function FE(r,o,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Rn,u)}catch{}switch(u.tag){case 26:pn||Pr(u,o),as(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:pn||Pr(u,o);var f=$t,v=_i;eo(u.type)&&($t=u.stateNode,_i=!1),as(r,o,u),Bu(u.stateNode),$t=f,_i=v;break;case 5:pn||Pr(u,o);case 6:if(f=$t,v=_i,$t=null,as(r,o,u),$t=f,_i=v,$t!==null)if(_i)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(u.stateNode)}catch(_){bt(u,o,_)}else try{$t.removeChild(u.stateNode)}catch(_){bt(u,o,_)}break;case 18:$t!==null&&(_i?(r=$t,MT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),cl(r)):MT($t,u.stateNode));break;case 4:f=$t,v=_i,$t=u.stateNode.containerInfo,_i=!0,as(r,o,u),$t=f,_i=v;break;case 0:case 11:case 14:case 15:Ks(2,u,o),pn||Ks(4,u,o),as(r,o,u);break;case 1:pn||(Pr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&DE(u,o,f)),as(r,o,u);break;case 21:as(r,o,u);break;case 22:pn=(f=pn)||u.memoizedState!==null,as(r,o,u),pn=f;break;default:as(r,o,u)}}function BE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(u){bt(o,o.return,u)}}}function qE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(u){bt(o,o.return,u)}}function lN(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new LE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new LE),o;default:throw Error(i(435,r.tag))}}function nd(r,o){var u=lN(r);o.forEach(function(f){if(!u.has(f)){u.add(f);var v=yN.bind(null,r,f);f.then(v,v)}})}function Ei(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=r,w=o,M=w;e:for(;M!==null;){switch(M.tag){case 27:if(eo(M.type)){$t=M.stateNode,_i=!1;break e}break;case 5:$t=M.stateNode,_i=!1;break e;case 3:case 4:$t=M.stateNode.containerInfo,_i=!0;break e}M=M.return}if($t===null)throw Error(i(160));FE(_,w,v),$t=null,_i=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)zE(o,r),o=o.sibling}var gr=null;function zE(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ei(o,r),Ti(r),f&4&&(Ks(3,r,r.return),Nu(3,r),Ks(5,r,r.return));break;case 1:Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),f&64&&os&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=gr;if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[ji]||_[Vt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),qn(_,f,u),_[Vt]=r,Gt(_),f=_;break e;case"link":var w=zT("link","href",v).get(f+(u.href||""));if(w){for(var M=0;M<w.length;M++)if(_=w[M],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(M,1);break t}}_=v.createElement(f),qn(_,f,u),v.head.appendChild(_);break;case"meta":if(w=zT("meta","content",v).get(f+(u.content||""))){for(M=0;M<w.length;M++)if(_=w[M],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(M,1);break t}}_=v.createElement(f),qn(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Vt]=r,Gt(_),f=_}r.stateNode=f}else HT(v,r.type,r.stateNode);else r.stateNode=qT(v,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?HT(v,r.type,r.stateNode):qT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Wm(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),u!==null&&f&4&&Wm(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),r.flags&32){v=r.stateNode;try{Wi(v,"")}catch(Ae){bt(r,r.return,Ae)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,Wm(r,v,u!==null?u.memoizedProps:v)),f&1024&&(Zm=!0);break;case 6:if(Ei(o,r),Ti(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(Ae){bt(r,r.return,Ae)}}break;case 3:if(vd=null,v=gr,gr=gd(o.containerInfo),Ei(o,r),gr=v,Ti(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{cl(o.containerInfo)}catch(Ae){bt(r,r.return,Ae)}Zm&&(Zm=!1,HE(r));break;case 4:f=gr,gr=gd(r.stateNode.containerInfo),Ei(o,r),Ti(r),gr=f;break;case 12:Ei(o,r),Ti(r);break;case 31:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 13:Ei(o,r),Ti(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(rd=ct()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 22:v=r.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,Q=os,re=pn;if(os=Q||v,pn=re||q,Ei(o,r),pn=re,os=Q,Ti(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||q||os||pn||ra(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(_=q.stateNode,v)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{M=q.stateNode;var ae=q.memoizedProps.style,Z=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;M.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){bt(q,q.return,Ae)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=v?"":q.memoizedProps}catch(Ae){bt(q,q.return,Ae)}}}else if(o.tag===18){if(u===null){q=o;try{var ne=q.stateNode;v?DT(ne,!0):DT(q.stateNode,!1)}catch(Ae){bt(q,q.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,nd(r,u))));break;case 19:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 30:break;case 21:break;default:Ei(o,r),Ti(r)}}function Ti(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(PE(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=Qm(r);td(r,_,v);break;case 5:var w=u.stateNode;u.flags&32&&(Wi(w,""),u.flags&=-33);var M=Qm(r);td(r,M,w);break;case 3:case 4:var q=u.stateNode.containerInfo,Q=Qm(r);Xm(r,Q,q);break;default:throw Error(i(161))}}catch(re){bt(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function HE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;HE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ls(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)OE(r,o.alternate,o),o=o.sibling}function ra(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ks(4,o,o.return),ra(o);break;case 1:Pr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&DE(o,o.return,u),ra(o);break;case 27:Bu(o.stateNode);case 26:case 5:Pr(o,o.return),ra(o);break;case 22:o.memoizedState===null&&ra(o);break;case 30:ra(o);break;default:ra(o)}r=r.sibling}}function us(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,w=_.flags;switch(_.tag){case 0:case 11:case 15:us(v,_,u),Nu(4,_);break;case 1:if(us(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){bt(f,f.return,Q)}if(f=_,v=f.updateQueue,v!==null){var M=f.stateNode;try{var q=v.shared.hiddenCallbacks;if(q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<q.length;v++)E_(q[v],M)}catch(Q){bt(f,f.return,Q)}}u&&w&64&&ME(_),Mu(_,_.return);break;case 27:VE(_);case 26:case 5:us(v,_,u),u&&f===null&&w&4&&kE(_),Mu(_,_.return);break;case 12:us(v,_,u);break;case 31:us(v,_,u),u&&w&4&&BE(v,_);break;case 13:us(v,_,u),u&&w&4&&qE(v,_);break;case 22:_.memoizedState===null&&us(v,_,u),Mu(_,_.return);break;case 30:break;default:us(v,_,u)}o=o.sibling}}function eg(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&yu(u))}function tg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r))}function yr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)GE(r,o,u,f),o=o.sibling}function GE(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:yr(r,o,u,f),v&2048&&Nu(9,o);break;case 1:yr(r,o,u,f);break;case 3:yr(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r)));break;case 12:if(v&2048){yr(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,w=_.id,M=_.onPostCommit;typeof M=="function"&&M(w,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){bt(o,o.return,q)}}else yr(r,o,u,f);break;case 31:yr(r,o,u,f);break;case 13:yr(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,w=o.alternate,o.memoizedState!==null?_._visibility&2?yr(r,o,u,f):Du(r,o):_._visibility&2?yr(r,o,u,f):(_._visibility|=2,Za(r,o,u,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&eg(w,o);break;case 24:yr(r,o,u,f),v&2048&&tg(o.alternate,o);break;default:yr(r,o,u,f)}}function Za(r,o,u,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,w=o,M=u,q=f,Q=w.flags;switch(w.tag){case 0:case 11:case 15:Za(_,w,M,q,v),Nu(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?Za(_,w,M,q,v):Du(_,w):(re._visibility|=2,Za(_,w,M,q,v)),v&&Q&2048&&eg(w.alternate,w);break;case 24:Za(_,w,M,q,v),v&&Q&2048&&tg(w.alternate,w);break;default:Za(_,w,M,q,v)}o=o.sibling}}function Du(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:Du(u,f),v&2048&&eg(f.alternate,f);break;case 24:Du(u,f),v&2048&&tg(f.alternate,f);break;default:Du(u,f)}o=o.sibling}}var ku=8192;function el(r,o,u){if(r.subtreeFlags&ku)for(r=r.child;r!==null;)$E(r,o,u),r=r.sibling}function $E(r,o,u){switch(r.tag){case 26:el(r,o,u),r.flags&ku&&r.memoizedState!==null&&JN(u,gr,r.memoizedState,r.memoizedProps);break;case 5:el(r,o,u);break;case 3:case 4:var f=gr;gr=gd(r.stateNode.containerInfo),el(r,o,u),gr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=ku,ku=16777216,el(r,o,u),ku=f):el(r,o,u));break;default:el(r,o,u)}}function jE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Pu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,JE(f,r)}jE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)KE(r),r=r.sibling}function KE(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&Ks(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,id(r)):Pu(r);break;default:Pu(r)}}function id(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,JE(f,r)}jE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ks(8,o,o.return),id(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,id(o));break;default:id(o)}r=r.sibling}}function JE(r,o){for(;kn!==null;){var u=kn;switch(u.tag){case 0:case 11:case 15:Ks(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:yu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,kn=f;else e:for(u=r;kn!==null;){f=kn;var v=f.sibling,_=f.return;if(UE(f),f===u){kn=null;break e}if(v!==null){v.return=_,kn=v;break e}kn=_}}}var uN={getCacheForType:function(r){var o=Fn(fn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Fn(fn).controller.signal}},cN=typeof WeakMap=="function"?WeakMap:Map,yt=0,Dt=null,Qe=null,et=0,wt=0,Li=null,Js=!1,tl=!1,ng=!1,cs=0,Xt=0,Ys=0,sa=0,ig=0,Oi=0,nl=0,Vu=null,Si=null,rg=!1,rd=0,YE=0,sd=1/0,od=null,Ws=null,An=0,Qs=null,il=null,fs=0,sg=0,og=null,WE=null,Lu=0,ag=null;function Ui(){return(yt&2)!==0&&et!==0?et&-et:ee.T!==null?hg():si()}function QE(){if(Oi===0)if((et&536870912)===0||st){var r=We;We<<=1,(We&3932160)===0&&(We=262144),Oi=r}else Oi=536870912;return r=Pi.current,r!==null&&(r.flags|=32),Oi}function Ai(r,o,u){(r===Dt&&(wt===2||wt===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Xs(r,et,Oi,!1)),kt(r,u),((yt&2)===0||r!==Dt)&&(r===Dt&&((yt&2)===0&&(sa|=u),Xt===4&&Xs(r,et,Oi,!1)),Vr(r))}function XE(r,o,u){if((yt&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&r.expiredLanes)===0||je(r,o),v=f?hN(r,o):ug(r,o,!0),_=f;do{if(v===0){tl&&!f&&Xs(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!fN(u)){v=ug(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var M=r;v=Vu;var q=M.current.memoizedState.isDehydrated;if(q&&(rl(M,w).flags|=256),w=ug(M,w,!1),w!==2){if(ng&&!q){M.errorRecoveryDisabledLanes|=_,sa|=_,v=4;break e}_=Si,Si=v,_!==null&&(Si===null?Si=_:Si.push.apply(Si,_))}v=w}if(_=!1,v!==2)continue}}if(v===1){rl(r,0),Xs(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Xs(f,o,Oi,!Js);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=rd+300-ct(),10<v)){if(Xs(f,o,Oi,!Js),ke(f,0,!0)!==0)break e;fs=o,f.timeoutHandle=RT(ZE.bind(null,f,u,Si,od,rg,o,Oi,sa,nl,Js,_,"Throttled",-0,0),v);break e}ZE(f,u,Si,od,rg,o,Oi,sa,nl,Js,_,null,-0,0)}}break}while(!0);Vr(r)}function ZE(r,o,u,f,v,_,w,M,q,Q,re,ae,Z,ne){if(r.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},$E(o,_,ae);var Ae=(_&62914560)===_?rd-ct():(_&4194048)===_?YE-ct():0;if(Ae=YN(ae,Ae),Ae!==null){fs=_,r.cancelPendingCommit=Ae(aT.bind(null,r,o,_,u,f,v,w,M,q,re,ae,null,Z,ne)),Xs(r,_,w,!Q);return}}aT(r,o,_,u,f,v,w,M,q)}function fN(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!Di(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xs(r,o,u,f){o&=~ig,o&=~sa,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-Te(v),w=1<<_;f[_]=-1,v&=~w}u!==0&&ri(r,u,o)}function ad(){return(yt&6)===0?(Ou(0),!1):!0}function lg(){if(Qe!==null){if(wt===0)var r=Qe.return;else r=Qe,es=Wo=null,wm(r),Ja=null,_u=0,r=Qe;for(;r!==null;)NE(r.alternate,r),r=r.return;Qe=null}}function rl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,MN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),fs=0,lg(),Dt=r,Qe=u=Xr(r.current,null),et=o,wt=0,Li=null,Js=!1,tl=je(r,o),ng=!1,nl=Oi=ig=sa=Ys=Xt=0,Si=Vu=null,rg=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-Te(f),_=1<<v;o|=r[v],f&=~_}return cs=o,xf(),u}function eT(r,o){He=null,ee.H=Iu,o===Ka||o===Lf?(o=g_(),wt=3):o===dm?(o=g_(),wt=4):wt=o===Bm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Li=o,Qe===null&&(Xt=1,Wf(r,Xi(o,r.current)))}function tT(){var r=Pi.current;return r===null?!0:(et&4194048)===et?nr===null:(et&62914560)===et||(et&536870912)!==0?r===nr:!1}function nT(){var r=ee.H;return ee.H=Iu,r===null?Iu:r}function iT(){var r=ee.A;return ee.A=uN,r}function ld(){Xt=4,Js||(et&4194048)!==et&&Pi.current!==null||(tl=!0),(Ys&134217727)===0&&(sa&134217727)===0||Dt===null||Xs(Dt,et,Oi,!1)}function ug(r,o,u){var f=yt;yt|=2;var v=nT(),_=iT();(Dt!==r||et!==o)&&(od=null,rl(r,o)),o=!1;var w=Xt;e:do try{if(wt!==0&&Qe!==null){var M=Qe,q=Li;switch(wt){case 8:lg(),w=6;break e;case 3:case 2:case 9:case 6:Pi.current===null&&(o=!0);var Q=wt;if(wt=0,Li=null,sl(r,M,q,Q),u&&tl){w=0;break e}break;default:Q=wt,wt=0,Li=null,sl(r,M,q,Q)}}dN(),w=Xt;break}catch(re){eT(r,re)}while(!0);return o&&r.shellSuspendCounter++,es=Wo=null,yt=f,ee.H=v,ee.A=_,Qe===null&&(Dt=null,et=0,xf()),w}function dN(){for(;Qe!==null;)rT(Qe)}function hN(r,o){var u=yt;yt|=2;var f=nT(),v=iT();Dt!==r||et!==o?(od=null,sd=ct()+500,rl(r,o)):tl=je(r,o);e:do try{if(wt!==0&&Qe!==null){o=Qe;var _=Li;t:switch(wt){case 1:wt=0,Li=null,sl(r,o,_,1);break;case 2:case 9:if(p_(_)){wt=0,Li=null,sT(o);break}o=function(){wt!==2&&wt!==9||Dt!==r||(wt=7),Vr(r)},_.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:p_(_)?(wt=0,Li=null,sT(o)):(wt=0,Li=null,sl(r,o,_,7));break;case 5:var w=null;switch(Qe.tag){case 26:w=Qe.memoizedState;case 5:case 27:var M=Qe;if(w?GT(w):M.stateNode.complete){wt=0,Li=null;var q=M.sibling;if(q!==null)Qe=q;else{var Q=M.return;Q!==null?(Qe=Q,ud(Q)):Qe=null}break t}}wt=0,Li=null,sl(r,o,_,5);break;case 6:wt=0,Li=null,sl(r,o,_,6);break;case 8:lg(),Xt=6;break e;default:throw Error(i(462))}}pN();break}catch(re){eT(r,re)}while(!0);return es=Wo=null,ee.H=f,ee.A=v,yt=u,Qe!==null?0:(Dt=null,et=0,xf(),Xt)}function pN(){for(;Qe!==null&&!cr();)rT(Qe)}function rT(r){var o=xE(r.alternate,r,cs);r.memoizedProps=r.pendingProps,o===null?ud(r):Qe=o}function sT(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=SE(u,o,o.pendingProps,o.type,void 0,et);break;case 11:o=SE(u,o,o.pendingProps,o.type.render,o.ref,et);break;case 5:wm(o);default:NE(u,o),o=Qe=i_(o,cs),o=xE(u,o,cs)}r.memoizedProps=r.pendingProps,o===null?ud(r):Qe=o}function sl(r,o,u,f){es=Wo=null,wm(o),Ja=null,_u=0;var v=o.return;try{if(nN(r,v,o,u,et)){Xt=1,Wf(r,Xi(u,r.current)),Qe=null;return}}catch(_){if(v!==null)throw Qe=v,_;Xt=1,Wf(r,Xi(u,r.current)),Qe=null;return}o.flags&32768?(st||f===1?r=!0:tl||(et&536870912)!==0?r=!1:(Js=r=!0,(f===2||f===9||f===3||f===6)&&(f=Pi.current,f!==null&&f.tag===13&&(f.flags|=16384))),oT(o,r)):ud(o)}function ud(r){var o=r;do{if((o.flags&32768)!==0){oT(o,Js);return}r=o.return;var u=sN(o.alternate,o,cs);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=r}while(o!==null);Xt===0&&(Xt=5)}function oT(r,o){do{var u=oN(r.alternate,r);if(u!==null){u.flags&=32767,Qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=u}while(r!==null);Xt=6,Qe=null}function aT(r,o,u,f,v,_,w,M,q){r.cancelPendingCommit=null;do cd();while(An!==0);if((yt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Qp,At(r,u,_,w,M,q),r===Dt&&(Qe=Dt=null,et=0),il=o,Qs=r,fs=u,sg=_,og=v,WE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vN(Yt,function(){return dT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,v=ce.p,ce.p=2,w=yt,yt|=4;try{aN(r,o,u)}finally{yt=w,ce.p=v,ee.T=f}}An=1,lT(),uT(),cT()}}function lT(){if(An===1){An=0;var r=Qs,o=il,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{zE(o,r);var _=Tg,w=J0(r.containerInfo),M=_.focusedElem,q=_.selectionRange;if(w!==M&&M&&M.ownerDocument&&K0(M.ownerDocument.documentElement,M)){if(q!==null&&jp(M)){var Q=q.start,re=q.end;if(re===void 0&&(re=Q),"selectionStart"in M)M.selectionStart=Q,M.selectionEnd=Math.min(re,M.value.length);else{var ae=M.ownerDocument||document,Z=ae&&ae.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),Ae=M.textContent.length,Pe=Math.min(q.start,Ae),Nt=q.end===void 0?Pe:Math.min(q.end,Ae);!ne.extend&&Pe>Nt&&(w=Nt,Nt=Pe,Pe=w);var J=j0(M,Pe),$=j0(M,Nt);if(J&&$&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var W=ae.createRange();W.setStart(J.node,J.offset),ne.removeAllRanges(),Pe>Nt?(ne.addRange(W),ne.extend($.node,$.offset)):(W.setEnd($.node,$.offset),ne.addRange(W))}}}}for(ae=[],ne=M;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ae.length;M++){var se=ae[M];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Sd=!!Eg,Tg=Eg=null}finally{yt=v,ce.p=f,ee.T=u}}r.current=o,An=2}}function uT(){if(An===2){An=0;var r=Qs,o=il,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{OE(r,o.alternate,o)}finally{yt=v,ce.p=f,ee.T=u}}An=3}}function cT(){if(An===4||An===3){An=0,zi();var r=Qs,o=il,u=fs,f=WE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?An=5:(An=0,il=Qs=null,fT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ws=null),On(u),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Rn,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=ee.T,v=ce.p,ce.p=2,ee.T=null;try{for(var _=r.onRecoverableError,w=0;w<f.length;w++){var M=f[w];_(M.value,{componentStack:M.stack})}}finally{ee.T=o,ce.p=v}}(fs&3)!==0&&cd(),Vr(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===ag?Lu++:(Lu=0,ag=r):Lu=0,Ou(0)}}function fT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,yu(o)))}function cd(){return lT(),uT(),cT(),dT()}function dT(){if(An!==5)return!1;var r=Qs,o=sg;sg=0;var u=On(fs),f=ee.T,v=ce.p;try{ce.p=32>u?32:u,ee.T=null,u=og,og=null;var _=Qs,w=fs;if(An=0,il=Qs=null,fs=0,(yt&6)!==0)throw Error(i(331));var M=yt;if(yt|=4,KE(_.current),GE(_,_.current,w,u),yt=M,Ou(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Rn,_)}catch{}return!0}finally{ce.p=v,ee.T=f,fT(r,o)}}function hT(r,o,u){o=Xi(u,o),o=Fm(r.stateNode,o,2),r=Gs(r,o,2),r!==null&&(kt(r,2),Vr(r))}function bt(r,o,u){if(r.tag===3)hT(r,r,u);else for(;o!==null;){if(o.tag===3){hT(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))){r=Xi(u,r),u=pE(2),f=Gs(o,u,2),f!==null&&(mE(u,f,o,r),kt(f,2),Vr(f));break}}o=o.return}}function cg(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new cN;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(ng=!0,v.add(u),r=mN.bind(null,r,o,u),o.then(r,r))}function mN(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Dt===r&&(et&u)===u&&(Xt===4||Xt===3&&(et&62914560)===et&&300>ct()-rd?(yt&2)===0&&rl(r,0):ig|=u,nl===et&&(nl=0)),Vr(r)}function pT(r,o){o===0&&(o=Hi()),r=Ko(r,o),r!==null&&(kt(r,o),Vr(r))}function gN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),pT(r,u)}function yN(r,o){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),pT(r,u)}function vN(r,o){return ni(r,o)}var fd=null,ol=null,fg=!1,dd=!1,dg=!1,Zs=0;function Vr(r){r!==ol&&r.next===null&&(ol===null?fd=ol=r:ol=ol.next=r),dd=!0,fg||(fg=!0,EN())}function Ou(r,o){if(!dg&&dd){dg=!0;do for(var u=!1,f=fd;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var w=f.suspendedLanes,M=f.pingedLanes;_=(1<<31-Te(42|r)+1)-1,_&=v&~(w&~M),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,vT(f,_))}else _=et,_=ke(f,f===Dt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||je(f,_)||(u=!0,vT(f,_));f=f.next}while(u);dg=!1}}function _N(){mT()}function mT(){dd=fg=!1;var r=0;Zs!==0&&NN()&&(r=Zs);for(var o=ct(),u=null,f=fd;f!==null;){var v=f.next,_=gT(f,o);_===0?(f.next=null,u===null?fd=v:u.next=v,v===null&&(ol=u)):(u=f,(r!==0||(_&3)!==0)&&(dd=!0)),f=v}An!==0&&An!==5||Ou(r),Zs!==0&&(Zs=0)}function gT(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var w=31-Te(_),M=1<<w,q=v[w];q===-1?((M&u)===0||(M&f)!==0)&&(v[w]=Sn(M,o)):q<=o&&(r.expiredLanes|=M),_&=~M}if(o=Dt,u=et,u=ke(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(wt===2||wt===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ii(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||je(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&ii(f),On(u)){case 2:case 8:u=Ct;break;case 32:u=Yt;break;case 268435456:u=ft;break;default:u=Yt}return f=yT.bind(null,r),u=ni(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&ii(f),r.callbackPriority=2,r.callbackNode=null,2}function yT(r,o){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(cd()&&r.callbackNode!==u)return null;var f=et;return f=ke(r,r===Dt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(XE(r,f,o),gT(r,ct()),r.callbackNode!=null&&r.callbackNode===u?yT.bind(null,r):null)}function vT(r,o){if(cd())return null;XE(r,o,!0)}function EN(){DN(function(){(yt&6)!==0?ni(ze,_N):mT()})}function hg(){if(Zs===0){var r=$a;r===0&&(r=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),Zs=r}return Zs}function _T(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Rr(""+r)}function ET(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function TN(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var _=_T((v[sn]||null).action),w=f.submitter;w&&(o=(o=w[sn]||null)?_T(o.formAction):w.getAttribute("formAction"),o!==null&&(_=o,w=null));var M=new Bo("action","action",null,f,v);r.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Zs!==0){var q=w?ET(v,w):new FormData(v);km(u,{pending:!0,data:q,method:v.method,action:_},null,q)}}else typeof _=="function"&&(M.preventDefault(),q=w?ET(v,w):new FormData(v),km(u,{pending:!0,data:q,method:v.method,action:_},_,q))},currentTarget:v}]})}}for(var pg=0;pg<Wp.length;pg++){var mg=Wp[pg],SN=mg.toLowerCase(),AN=mg[0].toUpperCase()+mg.slice(1);mr(SN,"on"+AN)}mr(Q0,"onAnimationEnd"),mr(X0,"onAnimationIteration"),mr(Z0,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(F1,"onTransitionRun"),mr(B1,"onTransitionStart"),mr(q1,"onTransitionCancel"),mr(e_,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function TT(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var w=f.length-1;0<=w;w--){var M=f[w],q=M.instance,Q=M.currentTarget;if(M=M.listener,q!==_&&v.isPropagationStopped())break e;_=M,v.currentTarget=Q;try{_(v)}catch(re){If(re)}v.currentTarget=null,_=q}else for(w=0;w<f.length;w++){if(M=f[w],q=M.instance,Q=M.currentTarget,M=M.listener,q!==_&&v.isPropagationStopped())break e;_=M,v.currentTarget=Q;try{_(v)}catch(re){If(re)}v.currentTarget=null,_=q}}}}function Xe(r,o){var u=o[$i];u===void 0&&(u=o[$i]=new Set);var f=r+"__bubble";u.has(f)||(ST(o,r,2,!1),u.add(f))}function gg(r,o,u){var f=0;o&&(f|=4),ST(u,r,f,o)}var hd="_reactListening"+Math.random().toString(36).slice(2);function yg(r){if(!r[hd]){r[hd]=!0,dr.forEach(function(u){u!=="selectionchange"&&(wN.has(u)||gg(u,!1,r),gg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[hd]||(o[hd]=!0,gg("selectionchange",!1,o))}}function ST(r,o,u,f){switch(QT(o)){case 2:var v=XN;break;case 8:v=ZN;break;default:v=Dg}u=v.bind(null,o,u,r),v=void 0,!ou||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function vg(r,o,u,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var M=f.stateNode.containerInfo;if(M===v)break;if(w===4)for(w=f.return;w!==null;){var q=w.tag;if((q===3||q===4)&&w.stateNode.containerInfo===v)return;w=w.return}for(;M!==null;){if(w=gi(M),w===null)return;if(q=w.tag,q===5||q===6||q===26||q===27){f=_=w;continue e}M=M.parentNode}}f=f.return}ff(function(){var Q=_,re=Da(u),ae=[];e:{var Z=t_.get(r);if(Z!==void 0){var ne=Bo,Ae=r;switch(r){case"keypress":if(Fo(u)===0)break e;case"keydown":case"keyup":ne=Ef;break;case"focusin":Ae="focus",ne=Ps;break;case"focusout":Ae="blur",ne=Ps;break;case"beforeblur":case"afterblur":ne=Ps;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Sf;break;case Q0:case X0:case Z0:ne=Va;break;case e_:ne=La;break;case"scroll":case"scrollend":ne=df;break;case"wheel":ne=wf;break;case"copy":case"cut":case"paste":ne=gf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=fu;break;case"toggle":case"beforetoggle":ne=Ls}var Pe=(o&4)!==0,Nt=!Pe&&(r==="scroll"||r==="scrollend"),J=Pe?Z!==null?Z+"Capture":null:Z;Pe=[];for(var $=Q,W;$!==null;){var se=$;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||J===null||(se=yi($,J),se!=null&&Pe.push(Fu($,se,W))),Nt)break;$=$.return}0<Pe.length&&(Z=new ne(Z,Ae,null,u,re),ae.push({event:Z,listeners:Pe}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&u!==Ma&&(Ae=u.relatedTarget||u.fromElement)&&(gi(Ae)||Ae[xi]))break e;if((ne||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(Ae=u.relatedTarget||u.toElement,ne=Q,Ae=Ae?gi(Ae):null,Ae!==null&&(Nt=a(Ae),Pe=Ae.tag,Ae!==Nt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ae=null)):(ne=null,Ae=Q),ne!==Ae)){if(Pe=hf,se="onMouseLeave",J="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=fu,se="onPointerLeave",J="onPointerEnter",$="pointer"),Nt=ne==null?Z:Ir(ne),W=Ae==null?Z:Ir(Ae),Z=new Pe(se,$+"leave",ne,u,re),Z.target=Nt,Z.relatedTarget=W,se=null,gi(re)===Q&&(Pe=new Pe(J,$+"enter",Ae,u,re),Pe.target=W,Pe.relatedTarget=Nt,se=Pe),Nt=se,ne&&Ae)t:{for(Pe=bN,J=ne,$=Ae,W=0,se=J;se;se=Pe(se))W++;se=0;for(var Re=$;Re;Re=Pe(Re))se++;for(;0<W-se;)J=Pe(J),W--;for(;0<se-W;)$=Pe($),se--;for(;W--;){if(J===$||$!==null&&J===$.alternate){Pe=J;break t}J=Pe(J),$=Pe($)}Pe=null}else Pe=null;ne!==null&&AT(ae,Z,ne,Pe,!1),Ae!==null&&Nt!==null&&AT(ae,Nt,Ae,Pe,!0)}}e:{if(Z=Q?Ir(Q):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var ht=B0;else if(vi(Z))if(q0)ht=L1;else{ht=P1;var Ce=k1}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&ru(Q.elementType)&&(ht=B0):ht=V1;if(ht&&(ht=ht(r,Q))){Go(ae,ht,u,re);break e}Ce&&Ce(r,Z,Q),r==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Na(Z,"number",Z.value)}switch(Ce=Q?Ir(Q):window,r){case"focusin":(vi(Ce)||Ce.contentEditable==="true")&&(Oa=Ce,Kp=Q,pu=null);break;case"focusout":pu=Kp=Oa=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,Y0(ae,u,re);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":Y0(ae,u,re)}var Ge;if(S)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ke?_t(r,u)&&(tt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(tt="onCompositionStart");tt&&(Y&&u.locale!=="ko"&&(Ke||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ke&&(Ge=Ns()):(Mi=re,ka="value"in Mi?Mi.value:Mi.textContent,Ke=!0)),Ce=pd(Q,tt),0<Ce.length&&(tt=new lu(tt,r,null,u,re),ae.push({event:tt,listeners:Ce}),Ge?tt.data=Ge:(Ge=cn(u),Ge!==null&&(tt.data=Ge)))),(Ge=k?Mn(r,u):Dn(r,u))&&(tt=pd(Q,"onBeforeInput"),0<tt.length&&(Ce=new lu("onBeforeInput","beforeinput",null,u,re),ae.push({event:Ce,listeners:tt}),Ce.data=Ge)),TN(ae,r,Q,u,re)}TT(ae,o)})}function Fu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function pd(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=yi(r,u),v!=null&&f.unshift(Fu(r,v,_)),v=yi(r,o),v!=null&&f.push(Fu(r,v,_))),r.tag===3)return f;r=r.return}return[]}function bN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function AT(r,o,u,f,v){for(var _=o._reactName,w=[];u!==null&&u!==f;){var M=u,q=M.alternate,Q=M.stateNode;if(M=M.tag,q!==null&&q===f)break;M!==5&&M!==26&&M!==27||Q===null||(q=Q,v?(Q=yi(u,_),Q!=null&&w.unshift(Fu(u,Q,q))):v||(Q=yi(u,_),Q!=null&&w.push(Fu(u,Q,q)))),u=u.return}w.length!==0&&r.push({event:o,listeners:w})}var CN=/\r\n?/g,IN=/\u0000|\uFFFD/g;function wT(r){return(typeof r=="string"?r:""+r).replace(CN,`
`).replace(IN,"")}function bT(r,o){return o=wT(o),wT(r)===o}function Rt(r,o,u,f,v,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Wi(r,""+f);break;case"className":Is(r,"class",f);break;case"tabIndex":Is(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(r,u,f);break;case"style":uf(r,f,_);break;case"data":if(o!=="object"){Is(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Rr(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Rt(r,o,"name",v.name,v,null),Rt(r,o,"formEncType",v.formEncType,v,null),Rt(r,o,"formMethod",v.formMethod,v,null),Rt(r,o,"formTarget",v.formTarget,v,null)):(Rt(r,o,"encType",v.encType,v,null),Rt(r,o,"method",v.method,v,null),Rt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Rr(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Rr(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Cs(r,"popover",f);break;case"xlinkActuate":Yi(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Yi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Yi(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Yi(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Yi(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Yi(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Cs(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=qp.get(u)||u,Cs(r,u,f))}}function _g(r,o,u,f,v,_){switch(u){case"style":uf(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&Wi(r,""+f);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[sn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Cs(r,u,f)}}}function qn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var w=u[_];if(w!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,_,w,u,null)}}v&&Rt(r,o,"srcSet",u.srcSet,u,null),f&&Rt(r,o,"src",u.src,u,null);return;case"input":Xe("invalid",r);var M=_=w=v=null,q=null,Q=null;for(f in u)if(u.hasOwnProperty(f)){var re=u[f];if(re!=null)switch(f){case"name":v=re;break;case"type":w=re;break;case"checked":q=re;break;case"defaultChecked":Q=re;break;case"value":_=re;break;case"defaultValue":M=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:Rt(r,o,f,re,u,null)}}Oo(r,_,M,q,Q,w,v,!1);return;case"select":Xe("invalid",r),f=w=_=null;for(v in u)if(u.hasOwnProperty(v)&&(M=u[v],M!=null))switch(v){case"value":_=M;break;case"defaultValue":w=M;break;case"multiple":f=M;default:Rt(r,o,v,M,u,null)}o=_,u=w,r.multiple=!!f,o!=null?dt(r,!!f,o,!1):u!=null&&dt(r,!!f,u,!0);return;case"textarea":Xe("invalid",r),_=v=f=null;for(w in u)if(u.hasOwnProperty(w)&&(M=u[w],M!=null))switch(w){case"value":f=M;break;case"defaultValue":v=M;break;case"children":_=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Rt(r,o,w,M,u,null)}Rs(r,f,v,_);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(f=u[q],f!=null))switch(q){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Rt(r,o,q,f,u,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(f=0;f<Uu.length;f++)Xe(Uu[f],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(f=u[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,Q,f,u,null)}return;default:if(ru(o)){for(re in u)u.hasOwnProperty(re)&&(f=u[re],f!==void 0&&_g(r,o,re,f,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(f=u[M],f!=null&&Rt(r,o,M,f,u,null))}function xN(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,w=null,M=null,q=null,Q=null,re=null;for(ne in u){var ae=u[ne];if(u.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":q=ae;default:f.hasOwnProperty(ne)||Rt(r,o,ne,null,f,ae)}}for(var Z in f){var ne=f[Z];if(ae=u[Z],f.hasOwnProperty(Z)&&(ne!=null||ae!=null))switch(Z){case"type":_=ne;break;case"name":v=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":w=ne;break;case"defaultValue":M=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==ae&&Rt(r,o,Z,ne,f,ae)}}xs(r,w,M,q,Q,re,_,v);return;case"select":ne=w=M=Z=null;for(_ in u)if(q=u[_],u.hasOwnProperty(_)&&q!=null)switch(_){case"value":break;case"multiple":ne=q;default:f.hasOwnProperty(_)||Rt(r,o,_,null,f,q)}for(v in f)if(_=f[v],q=u[v],f.hasOwnProperty(v)&&(_!=null||q!=null))switch(v){case"value":Z=_;break;case"defaultValue":M=_;break;case"multiple":w=_;default:_!==q&&Rt(r,o,v,_,f,q)}o=M,u=w,f=ne,Z!=null?dt(r,!!u,Z,!1):!!f!=!!u&&(o!=null?dt(r,!!u,o,!0):dt(r,!!u,u?[]:"",!1));return;case"textarea":ne=Z=null;for(M in u)if(v=u[M],u.hasOwnProperty(M)&&v!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Rt(r,o,M,null,f,v)}for(w in f)if(v=f[w],_=u[w],f.hasOwnProperty(w)&&(v!=null||_!=null))switch(w){case"value":Z=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Rt(r,o,w,v,f,_)}Uo(r,Z,ne);return;case"option":for(var Ae in u)if(Z=u[Ae],u.hasOwnProperty(Ae)&&Z!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:Rt(r,o,Ae,null,f,Z)}for(q in f)if(Z=f[q],ne=u[q],f.hasOwnProperty(q)&&Z!==ne&&(Z!=null||ne!=null))switch(q){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Rt(r,o,q,Z,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)Z=u[Pe],u.hasOwnProperty(Pe)&&Z!=null&&!f.hasOwnProperty(Pe)&&Rt(r,o,Pe,null,f,Z);for(Q in f)if(Z=f[Q],ne=u[Q],f.hasOwnProperty(Q)&&Z!==ne&&(Z!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Rt(r,o,Q,Z,f,ne)}return;default:if(ru(o)){for(var Nt in u)Z=u[Nt],u.hasOwnProperty(Nt)&&Z!==void 0&&!f.hasOwnProperty(Nt)&&_g(r,o,Nt,void 0,f,Z);for(re in f)Z=f[re],ne=u[re],!f.hasOwnProperty(re)||Z===ne||Z===void 0&&ne===void 0||_g(r,o,re,Z,f,ne);return}}for(var J in u)Z=u[J],u.hasOwnProperty(J)&&Z!=null&&!f.hasOwnProperty(J)&&Rt(r,o,J,null,f,Z);for(ae in f)Z=f[ae],ne=u[ae],!f.hasOwnProperty(ae)||Z===ne||Z==null&&ne==null||Rt(r,o,ae,Z,f,ne)}function CT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,w=v.initiatorType,M=v.duration;if(_&&M&&CT(w)){for(w=0,M=v.responseEnd,f+=1;f<u.length;f++){var q=u[f],Q=q.startTime;if(Q>M)break;var re=q.transferSize,ae=q.initiatorType;re&&CT(ae)&&(q=q.responseEnd,w+=re*(q<M?1:(M-Q)/(q-Q)))}if(--f,o+=8*(_+w)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Eg=null,Tg=null;function md(r){return r.nodeType===9?r:r.ownerDocument}function IT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Sg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ag=null;function NN(){var r=window.event;return r&&r.type==="popstate"?r===Ag?!1:(Ag=r,!0):(Ag=null,!1)}var RT=typeof setTimeout=="function"?setTimeout:void 0,MN=typeof clearTimeout=="function"?clearTimeout:void 0,NT=typeof Promise=="function"?Promise:void 0,DN=typeof queueMicrotask=="function"?queueMicrotask:typeof NT<"u"?function(r){return NT.resolve(null).then(r).catch(kN)}:RT;function kN(r){setTimeout(function(){throw r})}function eo(r){return r==="head"}function MT(r,o){var u=o,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),cl(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Bu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Bu(u);for(var _=u.firstChild;_;){var w=_.nextSibling,M=_.nodeName;_[ji]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=w}}else u==="body"&&Bu(r.ownerDocument.body);u=v}while(u);cl(o)}function DT(r,o){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function wg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":wg(u),Ki(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function PN(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[ji])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ir(r.nextSibling),r===null)break}return null}function VN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ir(r.nextSibling),r===null))return null;return r}function kT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ir(r.nextSibling),r===null))return null;return r}function bg(r){return r.data==="$?"||r.data==="$~"}function Cg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function LN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function ir(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Ig=null;function PT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return ir(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function VT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function LT(r,o,u){switch(o=md(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Bu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Ki(r)}var rr=new Map,OT=new Set;function gd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=ce.d;ce.d={f:ON,r:UN,D:FN,C:BN,L:qN,m:zN,X:GN,S:HN,M:$N};function ON(){var r=ds.f(),o=ad();return r||o}function UN(r){var o=Ji(r);o!==null&&o.tag===5&&o.type==="form"?eE(o):ds.r(r)}var al=typeof document>"u"?null:document;function UT(r,o,u){var f=al;if(f&&typeof o=="string"&&o){var v=Wt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),OT.has(v)||(OT.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),qn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function FN(r){ds.D(r),UT("dns-prefetch",r,null)}function BN(r,o){ds.C(r,o),UT("preconnect",r,o)}function qN(r,o,u){ds.L(r,o,u);var f=al;if(f&&r&&o){var v='link[rel="preload"][as="'+Wt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Wt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Wt(u.imageSizes)+'"]')):v+='[href="'+Wt(r)+'"]';var _=v;switch(o){case"style":_=ll(r);break;case"script":_=ul(r)}rr.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),rr.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(qu(_))||o==="script"&&f.querySelector(zu(_))||(o=f.createElement("link"),qn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function zN(r,o){ds.m(r,o);var u=al;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Wt(f)+'"][href="'+Wt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ul(r)}if(!rr.has(_)&&(r=E({rel:"modulepreload",href:r},o),rr.set(_,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zu(_)))return}f=u.createElement("link"),qn(f,"link",r),Gt(f),u.head.appendChild(f)}}}function HN(r,o,u){ds.S(r,o,u);var f=al;if(f&&r){var v=oi(f).hoistableStyles,_=ll(r);o=o||"default";var w=v.get(_);if(!w){var M={loading:0,preload:null};if(w=f.querySelector(qu(_)))M.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=rr.get(_))&&xg(r,u);var q=w=f.createElement("link");Gt(q),qn(q,"link",r),q._p=new Promise(function(Q,re){q.onload=Q,q.onerror=re}),q.addEventListener("load",function(){M.loading|=1}),q.addEventListener("error",function(){M.loading|=2}),M.loading|=4,yd(w,o,f)}w={type:"stylesheet",instance:w,count:1,state:M},v.set(_,w)}}}function GN(r,o){ds.X(r,o);var u=al;if(u&&r){var f=oi(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0},o),(o=rr.get(v))&&Rg(r,o),_=u.createElement("script"),Gt(_),qn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function $N(r,o){ds.M(r,o);var u=al;if(u&&r){var f=oi(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=rr.get(v))&&Rg(r,o),_=u.createElement("script"),Gt(_),qn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function FT(r,o,u,f){var v=(v=De.current)?gd(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ll(u.href),u=oi(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ll(u.href);var _=oi(v).hoistableStyles,w=_.get(r);if(w||(v=v.ownerDocument||v,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,w),(_=v.querySelector(qu(r)))&&!_._p&&(w.instance=_,w.state.loading=5),rr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},rr.set(r,u),_||jN(v,r,u,w.state))),o&&f===null)throw Error(i(528,""));return w}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ul(u),u=oi(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ll(r){return'href="'+Wt(r)+'"'}function qu(r){return'link[rel="stylesheet"]['+r+"]"}function BT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function jN(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),qn(o,"link",u),Gt(o),r.head.appendChild(o))}function ul(r){return'[src="'+Wt(r)+'"]'}function zu(r){return"script[async]"+r}function qT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Wt(u.href)+'"]');if(f)return o.instance=f,Gt(f),f;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Gt(f),qn(f,"style",v),yd(f,u.precedence,r),o.instance=f;case"stylesheet":v=ll(u.href);var _=r.querySelector(qu(v));if(_)return o.state.loading|=4,o.instance=_,Gt(_),_;f=BT(u),(v=rr.get(v))&&xg(f,v),_=(r.ownerDocument||r).createElement("link"),Gt(_);var w=_;return w._p=new Promise(function(M,q){w.onload=M,w.onerror=q}),qn(_,"link",f),o.state.loading|=4,yd(_,u.precedence,r),o.instance=_;case"script":return _=ul(u.src),(v=r.querySelector(zu(_)))?(o.instance=v,Gt(v),v):(f=u,(v=rr.get(_))&&(f=E({},u),Rg(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Gt(v),qn(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,yd(f,u.precedence,r));return o.instance}function yd(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,w=0;w<f.length;w++){var M=f[w];if(M.dataset.precedence===o)_=M;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function xg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Rg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var vd=null;function zT(r,o,u){if(vd===null){var f=new Map,v=vd=new Map;v.set(u,f)}else v=vd,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[ji]||_[Vt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(o)||"";w=r+w;var M=f.get(w);M?M.push(_):f.set(w,[_])}}return f}function HT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function KN(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function GT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function JN(r,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ll(f.href),_=o.querySelector(qu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=_d.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,Gt(_);return}_=o.ownerDocument||o,f=BT(f),(v=rr.get(v))&&xg(f,v),_=_.createElement("link"),Gt(_);var w=_;w._p=new Promise(function(M,q){w.onload=M,w.onerror=q}),qn(_,"link",f),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=_d.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Ng=0;function YN(r,o){return r.stylesheets&&r.count===0&&Td(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Td(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&Ng===0&&(Ng=62500*RN());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Td(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Ng?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function _d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ed=null;function Td(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ed=new Map,o.forEach(WN,r),Ed=null,_d.call(r))}function WN(r,o){if(!(o.state.loading&4)){var u=Ed.get(r);if(u)var f=u.get(null);else{u=new Map,Ed.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var w=v[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),f=w)}f&&u.set(null,f)}v=o.instance,w=v.getAttribute("data-precedence"),_=u.get(w)||f,_===f&&u.set(null,v),u.set(w,v),this.count++,f=_d.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Hu={$$typeof:B,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function QN(r,o,u,f,v,_,w,M,q){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function $T(r,o,u,f,v,_,w,M,q,Q,re,ae){return r=new QN(r,o,u,w,q,Q,re,ae,M),o=1,_===!0&&(o|=24),_=ki(3,null,null,o),r.current=_,_.stateNode=r,o=um(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},hm(_),r}function jT(r){return r?(r=Ba,r):Ba}function KT(r,o,u,f,v,_){v=jT(v),f.context===null?f.context=v:f.pendingContext=v,f=Hs(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=Gs(r,f,o),u!==null&&(Ai(u,r,o),Tu(u,r,o))}function JT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Mg(r,o){JT(r,o),(r=r.alternate)&&JT(r,o)}function YT(r){if(r.tag===13||r.tag===31){var o=Ko(r,67108864);o!==null&&Ai(o,r,67108864),Mg(r,67108864)}}function WT(r){if(r.tag===13||r.tag===31){var o=Ui();o=Gi(o);var u=Ko(r,o);u!==null&&Ai(u,r,o),Mg(r,o)}}var Sd=!0;function XN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=2,Dg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function ZN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=8,Dg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function Dg(r,o,u,f){if(Sd){var v=kg(f);if(v===null)vg(r,o,f,Ad,u),XT(r,f);else if(t2(v,r,o,u,f))f.stopPropagation();else if(XT(r,f),o&4&&-1<e2.indexOf(r)){for(;v!==null;){var _=Ji(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=rt(_.pendingLanes);if(w!==0){var M=_;for(M.pendingLanes|=2,M.entangledLanes|=2;w;){var q=1<<31-Te(w);M.entanglements[1]|=q,w&=~q}Vr(_),(yt&6)===0&&(sd=ct()+500,Ou(0))}}break;case 31:case 13:M=Ko(_,2),M!==null&&Ai(M,_,2),ad(),Mg(_,2)}if(_=kg(f),_===null&&vg(r,o,f,Ad,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else vg(r,o,f,null,u)}}function kg(r){return r=Da(r),Pg(r)}var Ad=null;function Pg(r){if(Ad=null,r=gi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ad=r,null}function QT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tn()){case ze:return 2;case Ct:return 8;case Yt:case me:return 32;case ft:return 268435456;default:return 32}default:return 32}}var Vg=!1,to=null,no=null,io=null,Gu=new Map,$u=new Map,ro=[],e2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XT(r,o){switch(r){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":Gu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(o.pointerId)}}function ju(r,o,u,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Ji(o),o!==null&&YT(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function t2(r,o,u,f,v){switch(o){case"focusin":return to=ju(to,r,o,u,f,v),!0;case"dragenter":return no=ju(no,r,o,u,f,v),!0;case"mouseover":return io=ju(io,r,o,u,f,v),!0;case"pointerover":var _=v.pointerId;return Gu.set(_,ju(Gu.get(_)||null,r,o,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,$u.set(_,ju($u.get(_)||null,r,o,u,f,v)),!0}return!1}function ZT(r){var o=gi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,jr(r.priority,function(){WT(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,jr(r.priority,function(){WT(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=kg(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Ma=f,u.target.dispatchEvent(f),Ma=null}else return o=Ji(u),o!==null&&YT(o),r.blockedOn=u,!1;o.shift()}return!0}function eS(r,o,u){wd(r)&&u.delete(o)}function n2(){Vg=!1,to!==null&&wd(to)&&(to=null),no!==null&&wd(no)&&(no=null),io!==null&&wd(io)&&(io=null),Gu.forEach(eS),$u.forEach(eS)}function bd(r,o){r.blockedOn===o&&(r.blockedOn=null,Vg||(Vg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,n2)))}var Cd=null;function tS(r){Cd!==r&&(Cd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cd===r&&(Cd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(Pg(f||u)===null)continue;break}var _=Ji(u);_!==null&&(r.splice(o,3),o-=3,km(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function cl(r){function o(q){return bd(q,r)}to!==null&&bd(to,r),no!==null&&bd(no,r),io!==null&&bd(io,r),Gu.forEach(o),$u.forEach(o);for(var u=0;u<ro.length;u++){var f=ro[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<ro.length&&(u=ro[0],u.blockedOn===null);)ZT(u),u.blockedOn===null&&ro.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],w=v[sn]||null;if(typeof _=="function")w||tS(u);else if(w){var M=null;if(_&&_.hasAttribute("formAction")){if(v=_,w=_[sn]||null)M=w.formAction;else if(Pg(v)!==null)continue}else M=w.action;typeof M=="function"?u[f+1]=M:(u.splice(f,3),f-=3),tS(u)}}}function nS(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(w){return v=w})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Lg(r){this._internalRoot=r}Id.prototype.render=Lg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=Ui();KT(u,f,r,o,null,null)},Id.prototype.unmount=Lg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;KT(r.current,2,null,r,null,null),ad(),o[xi]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var o=si();r={blockedOn:null,target:r,priority:o};for(var u=0;u<ro.length&&o!==0&&o<ro[u].priority;u++);ro.splice(u,0,r),u===0&&ZT(r)}};var iS=e.version;if(iS!=="19.2.0")throw Error(i(527,iS,"19.2.0"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var i2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{Rn=xd.inject(i2),un=xd}catch{}}return Ju.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",v=cE,_=fE,w=dE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=$T(r,1,!1,null,null,u,f,null,v,_,w,nS),r[xi]=o.current,yg(r),new Lg(o)},Ju.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,v="",_=cE,w=fE,M=dE,q=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(q=u.formState)),o=$T(r,1,!0,o,u??null,f,v,q,_,w,M,nS),o.context=jT(null),u=o.current,f=Ui(),f=Gi(f),v=Hs(f),v.callback=null,Gs(u,v,f),u=f,o.current.lanes=u,kt(o,u),Vr(o),r[xi]=o.current,yg(r),new Id(o)},Ju.version="19.2.0",Ju}var hS;function d2(){if(hS)return Fg.exports;hS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fg.exports=f2(),Fg.exports}var h2=d2();const p2=mC(h2),m2=()=>{};var pS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},g2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},vC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,y=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,b=h&63;d||(b=64,l||(T=64)),i.push(n[y],n[E],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new y2;const T=a<<2|c>>4;if(i.push(T),h!==64){const b=c<<4&240|h>>2;if(i.push(b),E!==64){const N=h<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class y2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v2=function(t){const e=yC(t);return vC.encodeByteArray(e,!0)},_h=function(t){return v2(t).replace(/\./g,"")},_C=function(t){try{return vC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=()=>_2().__FIREBASE_DEFAULTS__,T2=()=>{if(typeof process>"u"||typeof pS>"u")return;const t=pS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_C(t[1]);return e&&JSON.parse(e)},ip=()=>{try{return m2()||E2()||T2()||S2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EC=t=>{var e,n;return(n=(e=ip())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hv=t=>{const e=EC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TC=()=>{var t;return(t=ip())===null||t===void 0?void 0:t.config},SC=t=>{var e;return(e=ip())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_h(JSON.stringify(n)),_h(JSON.stringify(l)),""].join(".")}const hc={};function w2(){const t={prod:[],emulator:[]};for(const e of Object.keys(hc))hc[e]?t.emulator.push(e):t.prod.push(e);return t}function b2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mS=!1;function sp(t,e){if(typeof window>"u"||typeof document>"u"||!As(window.location.host)||hc[t]===e||hc[t]||mS)return;hc[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=w2().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{mS=!0,l()},T}function y(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=b2(i),b=n("text"),N=document.getElementById(b)||document.createElement("span"),P=n("learnmore"),L=document.getElementById(P)||document.createElement("a"),z=n("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;c(B),y(L,P);const K=h();d(F,z),B.append(F,N,L,K),document.body.appendChild(B)}a?(N.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function I2(){var t;const e=(t=ip())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function N2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M2(){const t=ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D2(){return!I2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k2(){try{return typeof indexedDB=="object"}catch{return!1}}function P2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="FirebaseError";class Gr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=V2,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?L2(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Gr(s,c,i)}}function L2(t,e){return t.replace(O2,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const O2=/\{\$([^}]+)}/g;function U2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ya(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(gS(a)&&gS(l)){if(!ya(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function gS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ic(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function F2(t,e){const n=new B2(t,e);return n.subscribe.bind(n)}class B2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");q2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Hg),s.error===void 0&&(s.error=Hg),s.complete===void 0&&(s.complete=Hg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class ys{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new A2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G2(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:H2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H2(t){return t===aa?void 0:t}function G2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const j2={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},K2=nt.INFO,J2={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},Y2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=J2[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=K2,this._logHandler=Y2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const W2=(t,e)=>e.some(n=>t instanceof n);let yS,vS;function Q2(){return yS||(yS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X2(){return vS||(vS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wC=new WeakMap,fy=new WeakMap,bC=new WeakMap,Gg=new WeakMap,mv=new WeakMap;function Z2(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(yo(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&wC.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function eM(t){if(fy.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});fy.set(t,e)}let dy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tM(t){dy=t(dy)}function nM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($g(this),e,...n);return bC.set(i,e.sort?e.sort():[e]),yo(i)}:X2().includes(t)?function(...e){return t.apply($g(this),e),yo(wC.get(this))}:function(...e){return yo(t.apply($g(this),e))}}function iM(t){return typeof t=="function"?nM(t):(t instanceof IDBTransaction&&eM(t),W2(t,Q2())?new Proxy(t,dy):t)}function yo(t){if(t instanceof IDBRequest)return Z2(t);if(Gg.has(t))return Gg.get(t);const e=iM(t);return e!==t&&(Gg.set(t,e),mv.set(e,t)),e}const $g=t=>mv.get(t);function rM(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=yo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(yo(l.result),d.oldVersion,d.newVersion,yo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const sM=["get","getKey","getAll","getAllKeys","count"],oM=["put","add","delete","clear"],jg=new Map;function _S(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=oM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||sM.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return jg.set(e,a),a}tM(t=>({...t,get:(e,n,i)=>_S(e,n)||t.get(e,n,i),has:(e,n)=>!!_S(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function lM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hy="@firebase/app",ES="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new pv("@firebase/app"),uM="@firebase/app-compat",cM="@firebase/analytics-compat",fM="@firebase/analytics",dM="@firebase/app-check-compat",hM="@firebase/app-check",pM="@firebase/auth",mM="@firebase/auth-compat",gM="@firebase/database",yM="@firebase/data-connect",vM="@firebase/database-compat",_M="@firebase/functions",EM="@firebase/functions-compat",TM="@firebase/installations",SM="@firebase/installations-compat",AM="@firebase/messaging",wM="@firebase/messaging-compat",bM="@firebase/performance",CM="@firebase/performance-compat",IM="@firebase/remote-config",xM="@firebase/remote-config-compat",RM="@firebase/storage",NM="@firebase/storage-compat",MM="@firebase/firestore",DM="@firebase/ai",kM="@firebase/firestore-compat",PM="firebase",VM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="[DEFAULT]",LM={[hy]:"fire-core",[uM]:"fire-core-compat",[fM]:"fire-analytics",[cM]:"fire-analytics-compat",[hM]:"fire-app-check",[dM]:"fire-app-check-compat",[pM]:"fire-auth",[mM]:"fire-auth-compat",[gM]:"fire-rtdb",[yM]:"fire-data-connect",[vM]:"fire-rtdb-compat",[_M]:"fire-fn",[EM]:"fire-fn-compat",[TM]:"fire-iid",[SM]:"fire-iid-compat",[AM]:"fire-fcm",[wM]:"fire-fcm-compat",[bM]:"fire-perf",[CM]:"fire-perf-compat",[IM]:"fire-rc",[xM]:"fire-rc-compat",[RM]:"fire-gcs",[NM]:"fire-gcs-compat",[MM]:"fire-fst",[kM]:"fire-fst-compat",[DM]:"fire-vertex","fire-js":"fire-js",[PM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,OM=new Map,my=new Map;function TS(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function So(t){const e=t.name;if(my.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;my.set(e,t);for(const n of Eh.values())TS(n,t);for(const n of OM.values())TS(n,t);return!0}function $c(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new Hc("app","Firebase",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=VM;function CC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:py,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw vo.create("bad-app-name",{appName:String(s)});if(n||(n=TC()),!n)throw vo.create("no-options");const a=Eh.get(s);if(a){if(ya(n,a.options)&&ya(i,a.config))return a;throw vo.create("duplicate-app",{appName:s})}const l=new $2(s);for(const d of my.values())l.addComponent(d);const c=new FM(n,i,l);return Eh.set(s,c),c}function op(t=py){const e=Eh.get(t);if(!e&&t===py&&TC())return CC();if(!e)throw vo.create("no-app",{appName:t});return e}function ar(t,e,n){var i;let s=(i=LM[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(c.join(" "));return}So(new ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="firebase-heartbeat-database",qM=1,Mc="firebase-heartbeat-store";let Kg=null;function IC(){return Kg||(Kg=rM(BM,qM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(t=>{throw vo.create("idb-open",{originalErrorMessage:t.message})})),Kg}async function zM(t){try{const n=(await IC()).transaction(Mc),i=await n.objectStore(Mc).get(xC(t));return await n.done,i}catch(e){if(e instanceof Gr)vs.warn(e.message);else{const n=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(n.message)}}}async function SS(t,e){try{const i=(await IC()).transaction(Mc,"readwrite");await i.objectStore(Mc).put(e,xC(t)),await i.done}catch(n){if(n instanceof Gr)vs.warn(n.message);else{const i=vo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vs.warn(i.message)}}}function xC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=1024,GM=30;class $M{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=AS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>GM){const l=JM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AS(),{heartbeatsToSend:i,unsentEntries:s}=jM(this._heartbeatsCache.heartbeats),a=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return vs.warn(n),""}}}function AS(){return new Date().toISOString().substring(0,10)}function jM(t,e=HM){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),wS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class KM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k2()?P2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return SS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wS(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}function JM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t){So(new ys("platform-logger",e=>new aM(e),"PRIVATE")),So(new ys("heartbeat",e=>new $M(e),"PRIVATE")),ar(hy,ES,t),ar(hy,ES,"esm2017"),ar("fire-js","")}YM("");function gv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function RC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WM=RC,NC=new Hc("auth","Firebase",RC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new pv("@firebase/auth");function QM(t,...e){Th.logLevel<=nt.WARN&&Th.warn(`Auth (${wa}): ${t}`,...e)}function eh(t,...e){Th.logLevel<=nt.ERROR&&Th.error(`Auth (${wa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,...e){throw vv(t,...e)}function Ar(t,...e){return vv(t,...e)}function yv(t,e,n){const i=Object.assign(Object.assign({},WM()),{[e]:n});return new Hc("auth","Firebase",i).create(e,{appName:t.name})}function gs(t){return yv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XM(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ur(t,"argument-error"),yv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return NC.create(t,...e)}function Ve(t,e,...n){if(!t)throw vv(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eh(e),new Error(e)}function _s(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZM(){return bS()==="http:"||bS()==="https:"}function bS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZM()||R2()||"connection"in navigator)?navigator.onLine:!0}function tD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,_s(n>e,"Short delay should be less than long delay!"),this.isMobile=C2()||N2()}get(){return eD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){_s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rD=new jc(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mo(t,e,n,i,s={}){return DC(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Gc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return x2()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&As(t.emulatorConfig.host)&&(h.credentials="include"),MC.fetch()(await kC(t,t.config.apiHost,n,c),h)})}async function DC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},nD),e);try{const s=new oD(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Rd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Rd(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yv(t,y,h);ur(t,y)}}catch(s){if(s instanceof Gr)throw s;ur(t,"network-request-failed",{message:String(s)})}}async function Kc(t,e,n,i,s={}){const a=await Mo(t,e,n,i,s);return"mfaPendingCredential"in a&&ur(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function kC(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?_v(t.config,s):`${t.config.apiScheme}://${s}`;return iD.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function sD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ar(this.auth,"network-request-failed")),rD.get())})}}function Rd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Ar(t,e,i);return s.customData._tokenResponse=n,s}function CS(t){return t!==void 0&&t.enterprise!==void 0}class aD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lD(t,e){return Mo(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return Mo(t,"POST","/v1/accounts:delete",e)}async function Sh(t,e){return Mo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cD(t,e=!1){const n=zt(t),i=await n.getIdToken(e),s=Ev(i);Ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:pc(Jg(s.auth_time)),issuedAtTime:pc(Jg(s.iat)),expirationTime:pc(Jg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Jg(t){return Number(t)*1e3}function Ev(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=_C(n);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IS(t){const e=Ev(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Gr&&fD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function fD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Dc(t,Sh(n,{idToken:i}));Ve(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?PC(a.providerUserInfo):[],c=pD(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),y=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new yy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,E)}async function hD(t){const e=zt(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function PC(t){return t.map(e=>{var{providerId:n}=e,i=gv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e){const n=await DC(t,{},async()=>{const i=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await kC(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&As(t.emulatorConfig.host)&&(d.credentials="include"),MC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gD(t,e){return Mo(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=IS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await mD(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new Al;return i&&(Ve(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ve(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Ve(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=gv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cD(this,e)}reload(){return hD(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Dc(this,uD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,c,d,h,y;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,b=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,z=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:K,isAnonymous:X,providerData:G,stsTokenManager:I}=n;Ve(B&&I,e,"internal-error");const x=Al.fromJSON(this.name,I);Ve(typeof B=="string",e,"internal-error"),oo(E,e.name),oo(T,e.name),Ve(typeof K=="boolean",e,"internal-error"),Ve(typeof X=="boolean",e,"internal-error"),oo(b,e.name),oo(N,e.name),oo(P,e.name),oo(L,e.name),oo(z,e.name),oo(F,e.name);const R=new Er({uid:B,auth:e,email:T,emailVerified:K,displayName:E,isAnonymous:X,photoURL:N,phoneNumber:b,tenantId:P,stsTokenManager:x,createdAt:z,lastLoginAt:F});return G&&Array.isArray(G)&&(R.providerData=G.map(V=>Object.assign({},V))),L&&(R._redirectEventId=L),R}static async _fromIdTokenResponse(e,n,i=!1){const s=new Al;s.updateFromServerResponse(n);const a=new Er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Ah(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ve(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?PC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Al;c.updateFromIdToken(i);const d=new Er({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Map;function ms(t){_s(t instanceof Function,"Expected a class definition");let e=xS.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VC.type="NONE";const RS=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e,n){return`firebase:${t}:${e}:${n}`}class wl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,a),this.fullPersistenceKey=th("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new wl(ms(RS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||ms(RS);const l=th(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const y=await h._get(l);if(y){let E;if(typeof y=="string"){const T=await Sh(e,{idToken:y}).catch(()=>{});if(!T)break;E=await Er._fromGetAccountInfoResponse(e,T,y)}else E=Er._fromJSON(e,y);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new wl(a,e,i):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new wl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qC(e))return"Blackberry";if(zC(e))return"Webos";if(OC(e))return"Safari";if((e.includes("chrome/")||UC(e))&&!e.includes("edge/"))return"Chrome";if(BC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LC(t=ti()){return/firefox\//i.test(t)}function OC(t=ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UC(t=ti()){return/crios\//i.test(t)}function FC(t=ti()){return/iemobile/i.test(t)}function BC(t=ti()){return/android/i.test(t)}function qC(t=ti()){return/blackberry/i.test(t)}function zC(t=ti()){return/webos/i.test(t)}function Tv(t=ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yD(t=ti()){var e;return Tv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vD(){return M2()&&document.documentMode===10}function HC(t=ti()){return Tv(t)||BC(t)||zC(t)||qC(t)||/windows phone/i.test(t)||FC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e=[]){let n;switch(t){case"Browser":n=NS(ti());break;case"Worker":n=`${NS(ti())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=6;class SD{constructor(e){var n,i,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:TD,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MS(this),this.idTokenSubscription=new MS(this),this.beforeStateQueue=new _D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),i=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(gs(this));const n=e?zt(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ED(this),n=new SD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Do(t){return zt(t)}class MS{constructor(e){this.auth=e,this.observer=null,this.addObserver=F2(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wD(t){ap=t}function $C(t){return ap.loadJS(t)}function bD(){return ap.recaptchaEnterpriseScript}function CD(){return ap.gapiScript}function ID(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xD{constructor(){this.enterprise=new RD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ND="recaptcha-enterprise",jC="NO_RECAPTCHA";class MD{constructor(e){this.type=ND,this.auth=Do(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{lD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new aD(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,l,c){const d=window.grecaptcha;CS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(jC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xD().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&CS(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=bD();d.length!==0&&(d+=c),$C(d).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function DS(t,e,n,i=!1,s=!1){const a=new MD(t);let l;if(s)l=jC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vy(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await DS(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await DS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t,e){const n=$c(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ya(a,e??{}))return s;ur(s,"already-initialized")}return n.initialize({options:e})}function kD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function PD(t,e,n){const i=Do(t);Ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=KC(e),{host:l,port:c}=VD(e),d=c===null?"":`:${c}`,h={url:`${a}//${l}${d}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ve(ya(h,i.config.emulator)&&ya(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,As(l)?(rp(`${a}//${l}${d}`),sp("Auth",!0)):LD()}function KC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VD(t){const e=KC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:kS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:kS(l)}}}function kS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function OD(t,e){return Mo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function BD(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Sv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new kc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,n,"signInWithPassword",UD);case"emailLink":return FD(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,i,"signUpPassword",OD);case"emailLink":return BD(e,{idToken:n,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="http://localhost";class va extends Sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=gv(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new va(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:qD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HD(t){const e=nc(ic(t)).link,n=e?nc(ic(e)).deep_link_id:null,i=nc(ic(t)).deep_link_id;return(i?nc(ic(i)).link:null)||i||n||e||t}class Av{constructor(e){var n,i,s,a,l,c;const d=nc(ic(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,E=zD((s=d.mode)!==null&&s!==void 0?s:null);Ve(h&&y&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=y,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=HD(e);try{return new Av(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.providerId=Hl.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Av.parseLink(n);return Ve(i,"argument-error"),kc._fromEmailAndCode(e,i.code,i.tenantId)}}Hl.PROVIDER_ID="password";Hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends wv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Jc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hs.credential(n,i)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Jc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Jc{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return uo.credential(n,i)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e){return Kc(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await Er._fromIdTokenResponse(e,i,s),l=PS(i);return new _a({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=PS(i);return new _a({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function PS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Gr{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new wh(e,n,i,s)}}function JC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,a,e,i):a})}async function $D(t,e,n=!1){const i=await Dc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t,e,n=!1){const{auth:i}=t;if(hi(i.app))return Promise.reject(gs(i));const s="reauthenticate";try{const a=await Dc(t,JC(i,s,e,t),n);Ve(a.idToken,i,"internal-error");const l=Ev(a.idToken);Ve(l,i,"internal-error");const{sub:c}=l;return Ve(t.uid===c,i,"user-mismatch"),_a._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ur(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(t,e,n=!1){if(hi(t.app))return Promise.reject(gs(t));const i="signIn",s=await JC(t,i,e),a=await _a._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function KD(t,e){return YC(Do(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t){const e=Do(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JD(t,e,n){if(hi(t.app))return Promise.reject(gs(t));const i=Do(t),l=await vy(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GD).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&WC(t),d}),c=await _a._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function YD(t,e,n){return hi(t.app)?Promise.reject(gs(t)):KD(zt(t),Hl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WC(t),i})}function WD(t,e,n,i){return zt(t).onIdTokenChanged(e,n,i)}function QD(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function XD(t,e,n,i){return zt(t).onAuthStateChanged(e,n,i)}function ZD(t){return zt(t).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=1e3,tk=10;class XC extends QC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);vD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,tk):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XC.type="LOCAL";const nk=XC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC extends QC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZC.type="SESSION";const eI=ZC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new lp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await ik(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=bv("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function sk(t){Ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function ok(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ak(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lk(){return tI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebaseLocalStorageDb",uk=1,Ch="firebaseLocalStorage",iI="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function up(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function ck(){const t=indexedDB.deleteDatabase(nI);return new Yc(t).toPromise()}function _y(){const t=indexedDB.open(nI,uk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ch,{keyPath:iI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await ck(),e(await _y()))})})}async function VS(t,e,n){const i=up(t,!0).put({[iI]:e,value:n});return new Yc(i).toPromise()}async function fk(t,e){const n=up(t,!1).get(e),i=await new Yc(n).toPromise();return i===void 0?null:i.value}function LS(t,e){const n=up(t,!0).delete(e);return new Yc(n).toPromise()}const dk=800,hk=3;class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>hk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lp._getInstance(lk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ok(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await VS(e,bh,"1"),await LS(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>VS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>fk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=up(s,!1).getAll();return new Yc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rI.type="LOCAL";const pk=rI;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){return e?ms(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends Sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mk(t){return YC(t.auth,new Cv(t),t.bypassAuthState)}function gk(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),jD(n,new Cv(t),t.bypassAuthState)}async function yk(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),$D(n,new Cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mk;case"linkViaPopup":case"linkViaRedirect":return yk;case"reauthViaPopup":case"reauthViaRedirect":return gk;default:ur(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new jc(2e3,1e4);async function _k(t,e,n){if(hi(t.app))return Promise.reject(Ar(t,"operation-not-supported-in-this-environment"));const i=Do(t);XM(t,e,wv);const s=sI(i,n);return new ua(i,"signInViaPopup",e,s).executeNotNull()}class ua extends oI{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=bv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vk.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="pendingRedirect",nh=new Map;class Tk extends oI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const i=await Sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sk(t,e){const n=bk(e),i=wk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Ak(t,e){nh.set(t._key(),e)}function wk(t){return ms(t._redirectPersistence)}function bk(t){return th(Ek,t.config.apiKey,t.name)}async function Ck(t,e,n=!1){if(hi(t.app))return Promise.reject(gs(t));const i=Do(t),s=sI(i,e),l=await new Tk(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=600*1e3;class xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!aI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ar(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ik&&this.cachedEventUids.clear(),this.cachedEventUids.has(OS(e))}saveEventToCache(e){this.cachedEventUids.add(OS(e)),this.lastProcessedEventTime=Date.now()}}function OS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e={}){return Mo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dk=/^https?/;async function kk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Nk(t);for(const n of e)try{if(Pk(n))return}catch{}ur(t,"unauthorized-domain")}function Pk(t){const e=gy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Dk.test(n))return!1;if(Mk.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new jc(3e4,6e4);function US(){const t=Ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Lk(t){return new Promise((e,n)=>{var i,s,a;function l(){US(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{US(),n(Ar(t,"network-request-failed"))},timeout:Vk.get()})}if(!((s=(i=Ur().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ur().gapi)===null||a===void 0)&&a.load)l();else{const c=ID("iframefcb");return Ur()[c]=()=>{gapi.load?l():n(Ar(t,"network-request-failed"))},$C(`${CD()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw ih=null,e})}let ih=null;function Ok(t){return ih=ih||Lk(t),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new jc(5e3,15e3),Fk="__/auth/iframe",Bk="emulator/auth/iframe",qk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hk(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_v(e,Bk):`https://${t.config.authDomain}/${Fk}`,i={apiKey:e.apiKey,appName:t.name,v:wa},s=zk.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Gc(i).slice(1)}`}async function Gk(t){const e=await Ok(t),n=Ur().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:Hk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qk,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ar(t,"network-request-failed"),c=Ur().setTimeout(()=>{a(l)},Uk.get());function d(){Ur().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Kk=600,Jk="_blank",Yk="http://localhost";class FS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wk(t,e,n,i=jk,s=Kk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},$k),{width:i.toString(),height:s.toString(),top:a,left:l}),h=ti().toLowerCase();n&&(c=UC(h)?Jk:n),LC(h)&&(e=e||Yk,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[b,N])=>`${T}${b}=${N},`,"");if(yD(h)&&c!=="_self")return Qk(e||"",c),new FS(null);const E=window.open(e||"",c,y);Ve(E,t,"popup-blocked");try{E.focus()}catch{}return new FS(E)}function Qk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__/auth/handler",Zk="emulator/auth/handler",eP=encodeURIComponent("fac");async function BS(t,e,n,i,s,a){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:wa,eventId:s};if(e instanceof wv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",U2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))l[y]=E}if(e instanceof Jc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),h=d?`#${eP}=${encodeURIComponent(d)}`:"";return`${tP(t)}?${Gc(c).slice(1)}${h}`}function tP({config:t}){return t.emulator?_v(t,Zk):`https://${t.authDomain}/${Xk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="webStorageSupport";class nP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=Ck,this._overrideRedirectResult=Ak}async _openPopup(e,n,i,s){var a;_s((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await BS(e,n,i,gy(),s);return Wk(e,l,bv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await BS(e,n,i,gy(),s);return sk(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(_s(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Gk(e),i=new xk(e);return n.register("authEvent",s=>(Ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yg,{type:Yg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Yg];l!==void 0&&n(!!l),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HC()||OC()||Tv()}}const iP=nP;var qS="@firebase/auth",zS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oP(t){So(new ys("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ve(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GC(t)},h=new AD(i,s,a,d);return kD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),So(new ys("auth-internal",e=>{const n=Do(e.getProvider("auth").getImmediate());return(i=>new rP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(qS,zS,sP(t)),ar(qS,zS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=300,lP=SC("authIdTokenMaxAge")||aP;let HS=null;const uP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lP)return;const s=n==null?void 0:n.token;HS!==s&&(HS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cP(t=op()){const e=$c(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DD(t,{popupRedirectResolver:iP,persistence:[pk,nk,eI]}),i=SC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=uP(a.toString());QD(n,l,()=>l(n.currentUser)),WD(n,c=>l(c))}}const s=EC("auth");return s&&PD(n,`http://${s}`),n}function fP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Ar("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",fP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oP("Browser");var dP="firebase",hP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(dP,hP,"app");var GS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _o,lI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function R(){}R.prototype=x.prototype,I.D=x.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(V,D,O){for(var U=Array(arguments.length-2),be=2;be<arguments.length;be++)U[be-2]=arguments[be];return x.prototype[D].apply(V,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,R){R||(R=0);var V=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)V[D]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(D=0;16>D;++D)V[D]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=I.g[0],R=I.g[1],D=I.g[2];var O=I.g[3],U=x+(O^R&(D^O))+V[0]+3614090360&4294967295;x=R+(U<<7&4294967295|U>>>25),U=O+(D^x&(R^D))+V[1]+3905402710&4294967295,O=x+(U<<12&4294967295|U>>>20),U=D+(R^O&(x^R))+V[2]+606105819&4294967295,D=O+(U<<17&4294967295|U>>>15),U=R+(x^D&(O^x))+V[3]+3250441966&4294967295,R=D+(U<<22&4294967295|U>>>10),U=x+(O^R&(D^O))+V[4]+4118548399&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(D^x&(R^D))+V[5]+1200080426&4294967295,O=x+(U<<12&4294967295|U>>>20),U=D+(R^O&(x^R))+V[6]+2821735955&4294967295,D=O+(U<<17&4294967295|U>>>15),U=R+(x^D&(O^x))+V[7]+4249261313&4294967295,R=D+(U<<22&4294967295|U>>>10),U=x+(O^R&(D^O))+V[8]+1770035416&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(D^x&(R^D))+V[9]+2336552879&4294967295,O=x+(U<<12&4294967295|U>>>20),U=D+(R^O&(x^R))+V[10]+4294925233&4294967295,D=O+(U<<17&4294967295|U>>>15),U=R+(x^D&(O^x))+V[11]+2304563134&4294967295,R=D+(U<<22&4294967295|U>>>10),U=x+(O^R&(D^O))+V[12]+1804603682&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(D^x&(R^D))+V[13]+4254626195&4294967295,O=x+(U<<12&4294967295|U>>>20),U=D+(R^O&(x^R))+V[14]+2792965006&4294967295,D=O+(U<<17&4294967295|U>>>15),U=R+(x^D&(O^x))+V[15]+1236535329&4294967295,R=D+(U<<22&4294967295|U>>>10),U=x+(D^O&(R^D))+V[1]+4129170786&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^D&(x^R))+V[6]+3225465664&4294967295,O=x+(U<<9&4294967295|U>>>23),U=D+(x^R&(O^x))+V[11]+643717713&4294967295,D=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(D^O))+V[0]+3921069994&4294967295,R=D+(U<<20&4294967295|U>>>12),U=x+(D^O&(R^D))+V[5]+3593408605&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^D&(x^R))+V[10]+38016083&4294967295,O=x+(U<<9&4294967295|U>>>23),U=D+(x^R&(O^x))+V[15]+3634488961&4294967295,D=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(D^O))+V[4]+3889429448&4294967295,R=D+(U<<20&4294967295|U>>>12),U=x+(D^O&(R^D))+V[9]+568446438&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^D&(x^R))+V[14]+3275163606&4294967295,O=x+(U<<9&4294967295|U>>>23),U=D+(x^R&(O^x))+V[3]+4107603335&4294967295,D=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(D^O))+V[8]+1163531501&4294967295,R=D+(U<<20&4294967295|U>>>12),U=x+(D^O&(R^D))+V[13]+2850285829&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^D&(x^R))+V[2]+4243563512&4294967295,O=x+(U<<9&4294967295|U>>>23),U=D+(x^R&(O^x))+V[7]+1735328473&4294967295,D=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(D^O))+V[12]+2368359562&4294967295,R=D+(U<<20&4294967295|U>>>12),U=x+(R^D^O)+V[5]+4294588738&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^D)+V[8]+2272392833&4294967295,O=x+(U<<11&4294967295|U>>>21),U=D+(O^x^R)+V[11]+1839030562&4294967295,D=O+(U<<16&4294967295|U>>>16),U=R+(D^O^x)+V[14]+4259657740&4294967295,R=D+(U<<23&4294967295|U>>>9),U=x+(R^D^O)+V[1]+2763975236&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^D)+V[4]+1272893353&4294967295,O=x+(U<<11&4294967295|U>>>21),U=D+(O^x^R)+V[7]+4139469664&4294967295,D=O+(U<<16&4294967295|U>>>16),U=R+(D^O^x)+V[10]+3200236656&4294967295,R=D+(U<<23&4294967295|U>>>9),U=x+(R^D^O)+V[13]+681279174&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^D)+V[0]+3936430074&4294967295,O=x+(U<<11&4294967295|U>>>21),U=D+(O^x^R)+V[3]+3572445317&4294967295,D=O+(U<<16&4294967295|U>>>16),U=R+(D^O^x)+V[6]+76029189&4294967295,R=D+(U<<23&4294967295|U>>>9),U=x+(R^D^O)+V[9]+3654602809&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^D)+V[12]+3873151461&4294967295,O=x+(U<<11&4294967295|U>>>21),U=D+(O^x^R)+V[15]+530742520&4294967295,D=O+(U<<16&4294967295|U>>>16),U=R+(D^O^x)+V[2]+3299628645&4294967295,R=D+(U<<23&4294967295|U>>>9),U=x+(D^(R|~O))+V[0]+4096336452&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~D))+V[7]+1126891415&4294967295,O=x+(U<<10&4294967295|U>>>22),U=D+(x^(O|~R))+V[14]+2878612391&4294967295,D=O+(U<<15&4294967295|U>>>17),U=R+(O^(D|~x))+V[5]+4237533241&4294967295,R=D+(U<<21&4294967295|U>>>11),U=x+(D^(R|~O))+V[12]+1700485571&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~D))+V[3]+2399980690&4294967295,O=x+(U<<10&4294967295|U>>>22),U=D+(x^(O|~R))+V[10]+4293915773&4294967295,D=O+(U<<15&4294967295|U>>>17),U=R+(O^(D|~x))+V[1]+2240044497&4294967295,R=D+(U<<21&4294967295|U>>>11),U=x+(D^(R|~O))+V[8]+1873313359&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~D))+V[15]+4264355552&4294967295,O=x+(U<<10&4294967295|U>>>22),U=D+(x^(O|~R))+V[6]+2734768916&4294967295,D=O+(U<<15&4294967295|U>>>17),U=R+(O^(D|~x))+V[13]+1309151649&4294967295,R=D+(U<<21&4294967295|U>>>11),U=x+(D^(R|~O))+V[4]+4149444226&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~D))+V[11]+3174756917&4294967295,O=x+(U<<10&4294967295|U>>>22),U=D+(x^(O|~R))+V[2]+718787259&4294967295,D=O+(U<<15&4294967295|U>>>17),U=R+(O^(D|~x))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+O&4294967295}i.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var R=x-this.blockSize,V=this.B,D=this.h,O=0;O<x;){if(D==0)for(;O<=R;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<x;)if(V[D++]=I.charCodeAt(O++),D==this.blockSize){s(this,V),D=0;break}}else for(;O<x;)if(V[D++]=I[O++],D==this.blockSize){s(this,V),D=0;break}}this.h=D,this.o+=x},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var R=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=R&255,R/=256;for(this.u(I),I=Array(16),x=R=0;4>x;++x)for(var V=0;32>V;V+=8)I[R++]=this.g[x]>>>V&255;return I};function a(I,x){var R=c;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=x(I)}function l(I,x){this.h=x;for(var R=[],V=!0,D=I.length-1;0<=D;D--){var O=I[D]|0;V&&O==x||(R[D]=O,V=!1)}this.g=R}var c={};function d(I){return-128<=I&&128>I?a(I,function(x){return new l([x|0],0>x?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return L(h(-I));for(var x=[],R=1,V=0;I>=R;V++)x[V]=I/R|0,R*=4294967296;return new l(x,0)}function y(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return L(y(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(x,8)),V=E,D=0;D<I.length;D+=8){var O=Math.min(8,I.length-D),U=parseInt(I.substring(D,D+O),x);8>O?(O=h(Math.pow(x,O)),V=V.j(O).add(h(U))):(V=V.j(R),V=V.add(h(U)))}return V}var E=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(P(this))return-L(this).m();for(var I=0,x=1,R=0;R<this.g.length;R++){var V=this.i(R);I+=(0<=V?V:4294967296+V)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(P(this))return"-"+L(this).toString(I);for(var x=h(Math.pow(I,6)),R=this,V="";;){var D=K(R,x).g;R=z(R,D.j(x));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=D,N(R))return O+V;for(;6>O.length;)O="0"+O;V=O+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=z(this,I),P(I)?-1:N(I)?0:1};function L(I){for(var x=I.g.length,R=[],V=0;V<x;V++)R[V]=~I.g[V];return new l(R,~I.h).add(T)}t.abs=function(){return P(this)?L(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],V=0,D=0;D<=x;D++){var O=V+(this.i(D)&65535)+(I.i(D)&65535),U=(O>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);V=U>>>16,O&=65535,U&=65535,R[D]=U<<16|O}return new l(R,R[R.length-1]&-2147483648?-1:0)};function z(I,x){return I.add(L(x))}t.j=function(I){if(N(this)||N(I))return E;if(P(this))return P(I)?L(this).j(L(I)):L(L(this).j(I));if(P(I))return L(this.j(L(I)));if(0>this.l(b)&&0>I.l(b))return h(this.m()*I.m());for(var x=this.g.length+I.g.length,R=[],V=0;V<2*x;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var D=0;D<I.g.length;D++){var O=this.i(V)>>>16,U=this.i(V)&65535,be=I.i(D)>>>16,ve=I.i(D)&65535;R[2*V+2*D]+=U*ve,F(R,2*V+2*D),R[2*V+2*D+1]+=O*ve,F(R,2*V+2*D+1),R[2*V+2*D+1]+=U*be,F(R,2*V+2*D+1),R[2*V+2*D+2]+=O*be,F(R,2*V+2*D+2)}for(V=0;V<x;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=x;V<2*x;V++)R[V]=0;return new l(R,0)};function F(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function B(I,x){this.g=I,this.h=x}function K(I,x){if(N(x))throw Error("division by zero");if(N(I))return new B(E,E);if(P(I))return x=K(L(I),x),new B(L(x.g),L(x.h));if(P(x))return x=K(I,L(x)),new B(L(x.g),x.h);if(30<I.g.length){if(P(I)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=x;0>=V.l(I);)R=X(R),V=X(V);var D=G(R,1),O=G(V,1);for(V=G(V,2),R=G(R,2);!N(V);){var U=O.add(V);0>=U.l(I)&&(D=D.add(R),O=U),V=G(V,1),R=G(R,1)}return x=z(I,D.j(x)),new B(D,x)}for(D=E;0<=I.l(x);){for(R=Math.max(1,Math.floor(I.m()/x.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),O=h(R),U=O.j(x);P(U)||0<U.l(I);)R-=V,O=h(R),U=O.j(x);N(O)&&(O=T),D=D.add(O),I=z(I,U)}return new B(D,I)}t.A=function(I){return K(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],V=0;V<x;V++)R[V]=this.i(V)&I.i(V);return new l(R,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],V=0;V<x;V++)R[V]=this.i(V)|I.i(V);return new l(R,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],V=0;V<x;V++)R[V]=this.i(V)^I.i(V);return new l(R,this.h^I.h)};function X(I){for(var x=I.g.length+1,R=[],V=0;V<x;V++)R[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(R,I.h)}function G(I,x){var R=x>>5;x%=32;for(var V=I.g.length-R,D=[],O=0;O<V;O++)D[O]=0<x?I.i(O+R)>>>x|I.i(O+R+1)<<32-x:I.i(O+R);return new l(D,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,lI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,_o=l}).apply(typeof GS<"u"?GS:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uI,rc,cI,rh,Ey,fI,dI,hI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,C){return m==Array.prototype||m==Object.prototype||(m[S]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var C=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var Y=m[k];if(!(Y in C))break e;C=C[Y]}m=m[m.length-1],k=C[m],S=S(k),S!=k&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var C=0,k=!1,Y={next:function(){if(!k&&C<m.length){var ie=C++;return{value:S(ie,m[ie]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function y(m,S,C){return m.call.apply(m.bind,arguments)}function E(m,S,C){if(!m)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),m.apply(S,Y)}}return function(){return m.apply(S,arguments)}}function T(m,S,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,T.apply(null,arguments)}function b(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var k=C.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function N(m,S){function C(){}C.prototype=S.prototype,m.aa=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(k,Y,ie){for(var de=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)de[_t-2]=arguments[_t];return S.prototype[Y].apply(k,de)}}function P(m){const S=m.length;if(0<S){const C=Array(S);for(let k=0;k<S;k++)C[k]=m[k];return C}return[]}function L(m,S){for(let C=1;C<arguments.length;C++){const k=arguments[C];if(d(k)){const Y=m.length||0,ie=k.length||0;m.length=Y+ie;for(let de=0;de<ie;de++)m[Y+de]=k[de]}else m.push(k)}}class z{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function K(m){return K[" "](m),m}K[" "]=function(){};var X=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function G(m,S,C){for(const k in m)S.call(C,m[k],k,m)}function I(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function x(m){const S={};for(const C in m)S[C]=m[C];return S}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,S){let C,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(C in k)m[C]=k[C];for(let ie=0;ie<R.length;ie++)C=R[ie],Object.prototype.hasOwnProperty.call(k,C)&&(m[C]=k[C])}}function D(m){var S=1;m=m.split(":");const C=[];for(;0<S&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function O(m){c.setTimeout(()=>{throw m},0)}function U(){var m=Ie;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class be{constructor(){this.h=this.g=null}add(S,C){const k=ve.get();k.set(S,C),this.h?this.h.next=k:this.g=k,this.h=k}}var ve=new z(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,he=!1,Ie=new be,Me=()=>{const m=c.Promise.resolve(void 0);ce=()=>{m.then(H)}};var H=()=>{for(var m;m=U();){try{m.h.call(m.g)}catch(C){O(C)}var S=ve;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}he=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function we(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(X){e:{try{K(S.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(S=null)}}else C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement);this.relatedTarget=S,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:De[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&we.aa.h.call(this)}}N(we,fe);var De={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),jt=0;function xe(m,S,C,k,Y){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!k,this.ha=Y,this.key=++jt,this.da=this.fa=!1}function Cn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ut(m){this.src=m,this.g={},this.h=0}ut.prototype.add=function(m,S,C,k,Y){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var de=Ln(m,S,k,Y);return-1<de?(S=m[de],C||(S.fa=!1)):(S=new xe(S,this.src,ie,!!k,Y),S.fa=C,m.push(S)),S};function _n(m,S){var C=S.type;if(C in m.g){var k=m.g[C],Y=Array.prototype.indexOf.call(k,S,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(k,Y,1),ie&&(Cn(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ln(m,S,C,k){for(var Y=0;Y<m.length;++Y){var ie=m[Y];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==k)return Y}return-1}var In="closure_lm_"+(1e6*Math.random()|0),En={};function xn(m,S,C,k,Y){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)xn(m,S[ie],C,k,Y);return null}return C=Tn(C),m&&m[Ue]?m.K(S,C,h(k)?!!k.capture:!1,Y):qi(m,S,C,!1,k,Y)}function qi(m,S,C,k,Y,ie){if(!S)throw Error("Invalid event type");var de=h(Y)?!!Y.capture:!!Y,_t=zi(m);if(_t||(m[In]=_t=new ut(m)),C=_t.add(S,C,k,de,ie),C.proxy)return C;if(k=Ci(),C.proxy=k,k.src=m,k.listener=C,m.addEventListener)pe||(Y=de),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),k,Y);else if(m.attachEvent)m.attachEvent(ii(S.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ci(){function m(C){return S.call(m.src,m.listener,C)}const S=cr;return m}function mi(m,S,C,k,Y){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)mi(m,S[ie],C,k,Y);else k=h(k)?!!k.capture:!!k,C=Tn(C),m&&m[Ue]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],C=Ln(ie,C,k,Y),-1<C&&(Cn(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=zi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Ln(S,C,k,Y)),(C=-1<m?S[m]:null)&&ni(C))}function ni(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Ue])_n(S.i,m);else{var C=m.type,k=m.proxy;S.removeEventListener?S.removeEventListener(C,k,m.capture):S.detachEvent?S.detachEvent(ii(C),k):S.addListener&&S.removeListener&&S.removeListener(k),(C=zi(S))?(_n(C,m),C.h==0&&(C.src=null,S[In]=null)):Cn(m)}}}function ii(m){return m in En?En[m]:En[m]="on"+m}function cr(m,S){if(m.da)m=!0;else{S=new we(S,this);var C=m.listener,k=m.ha||m.src;m.fa&&ni(m),m=C.call(k,S)}return m}function zi(m){return m=m[In],m instanceof ut?m:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(m){return typeof m=="function"?m:(m[ct]||(m[ct]=function(S){return m.handleEvent(S)}),m[ct])}function ze(){te.call(this),this.i=new ut(this),this.M=this,this.F=null}N(ze,te),ze.prototype[Ue]=!0,ze.prototype.removeEventListener=function(m,S,C,k){mi(this,m,S,C,k)};function Ct(m,S){var C,k=m.F;if(k)for(C=[];k;k=k.F)C.push(k);if(m=m.M,k=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var Y=S;S=new fe(k,m),V(S,Y)}if(Y=!0,C)for(var ie=C.length-1;0<=ie;ie--){var de=S.g=C[ie];Y=Yt(de,k,!0,S)&&Y}if(de=S.g=m,Y=Yt(de,k,!0,S)&&Y,Y=Yt(de,k,!1,S)&&Y,C)for(ie=0;ie<C.length;ie++)de=S.g=C[ie],Y=Yt(de,k,!1,S)&&Y}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var C=m.g[S],k=0;k<C.length;k++)Cn(C[k]);delete m.g[S],m.h--}}this.F=null},ze.prototype.K=function(m,S,C,k){return this.i.add(String(m),S,!1,C,k)},ze.prototype.L=function(m,S,C,k){return this.i.add(String(m),S,!0,C,k)};function Yt(m,S,C,k){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var Y=!0,ie=0;ie<S.length;++ie){var de=S[ie];if(de&&!de.da&&de.capture==C){var _t=de.listener,cn=de.ha||de.src;de.fa&&_n(m.i,de),Y=_t.call(cn,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function me(m,S,C){if(typeof m=="function")C&&(m=T(m,C));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function ft(m){m.g=me(()=>{m.g=null,m.i&&(m.i=!1,ft(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class nn extends te{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function It(m){te.call(this),this.h=m,this.g={}}N(It,te);var Rn=[];function un(m){G(m.g,function(S,C){this.g.hasOwnProperty(C)&&ni(S)},m),m.g={}}It.prototype.N=function(){It.aa.N.call(this),un(this)},It.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=c.JSON.stringify,Te=c.JSON.parse,Se=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function $e(){}$e.prototype.h=null;function St(m){return m.h||(m.h=m.i())}function Ye(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){fe.call(this,"d")}N(at,fe);function rt(){fe.call(this,"c")}N(rt,fe);var ke={},je=null;function Sn(){return je=je||new ze}ke.La="serverreachability";function Hi(m){fe.call(this,ke.La,m)}N(Hi,fe);function rn(m){const S=Sn();Ct(S,new Hi(S))}ke.STAT_EVENT="statevent";function kt(m,S){fe.call(this,ke.STAT_EVENT,m),this.stat=S}N(kt,fe);function At(m){const S=Sn();Ct(S,new kt(S,m))}ke.Ma="timingevent";function ri(m,S){fe.call(this,ke.Ma,m),this.size=S}N(ri,fe);function Ht(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function Gi(m,S,C,k,Y,ie){m.info(function(){if(m.g)if(ie)for(var de="",_t=ie.split("&"),cn=0;cn<_t.length;cn++){var Ke=_t[cn].split("=");if(1<Ke.length){var Mn=Ke[0];Ke=Ke[1];var Dn=Mn.split("_");de=2<=Dn.length&&Dn[1]=="type"?de+(Mn+"="+Ke+"&"):de+(Mn+"=redacted&")}}else de=null;else de=ie;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+S+`
`+C+`
`+de})}function On(m,S,C,k,Y,ie,de){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+S+`
`+C+`
`+ie+" "+de})}function si(m,S,C,k){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ii(m,C)+(k?" "+k:"")})}function jr(m,S){m.info(function(){return"TIMEOUT: "+S})}jn.prototype.info=function(){};function Ii(m,S){if(!m.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var k=C[m];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var de=1;de<Y.length;de++)Y[de]=""}}}}return oe(C)}catch{return S}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function $i(){}N($i,$e),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},xi=new $i;function Ri(m,S,C,k){this.j=m,this.i=S,this.l=C,this.R=k||1,this.U=new It(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lo}function Lo(){this.i=null,this.g="",this.h=!1}var fr={},ji={};function Ki(m,S,C){m.L=1,m.v=Uo(Wt(S)),m.m=C,m.P=!0,gi(m,null)}function gi(m,S){m.F=Date.now(),oi(m),m.A=Wt(m.v);var C=m.A,k=m.R;Array.isArray(k)||(k=[String(k)]),Jr(C.i,"t",k),m.C=0,C=m.j.J,m.h=new Lo,m.g=Sf(m.j,C?S:null,!m.m),0<m.O&&(m.M=new nn(T(m.Y,m,m.g),m.O)),S=m.U,C=m.g,k=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Rn[0]=Y.toString()),Y=Rn);for(var ie=0;ie<Y.length;ie++){var de=xn(C,Y[ie],k||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),rn(),Gi(m.i,m.u,m.A,m.l,m.R,m.m)}Ri.prototype.ca=function(m){m=m.target;const S=this.M;S&&ui(m)==3?S.j():this.Y(m)},Ri.prototype.Y=function(m){try{if(m==this.g)e:{const Dn=ui(this.g);var S=this.g.Ba();const Os=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Dn!=4||S==7||(S==8||0>=Os?rn(3):rn(2)),dr(this);var C=this.g.Z();this.X=C;t:if(Ji(this)){var k=qo(this.g);m="";var Y=k.length,ie=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),hr(this);var de="";break t}this.h.i=new c.TextDecoder}for(S=0;S<Y;S++)this.h.h=!0,m+=this.h.i.decode(k[S],{stream:!(ie&&S==Y-1)});k.length=0,this.h.g+=m,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=C==200,On(this.i,this.u,this.A,this.l,this.R,Dn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,cn=this.g;if((_t=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(_t)){var Ke=_t;break t}}Ke=null}if(C=Ke)si(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xr(this,C);else{this.o=!1,this.s=3,At(12),ai(this),hr(this);break e}}if(this.P){C=!0;let vi;for(;!this.J&&this.C<de.length;)if(vi=Ir(this,de),vi==ji){Dn==4&&(this.s=4,At(14),C=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(vi==fr){this.s=4,At(15),si(this.i,this.l,de,"[Invalid Chunk]"),C=!1;break}else si(this.i,this.l,vi,null),xr(this,vi);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||de.length!=0||this.h.h||(this.s=1,At(16),C=!1),this.o=this.o&&C,!C)si(this.i,this.l,de,"[Invalid Chunked Response]"),ai(this),hr(this);else if(0<de.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),cu(Mn),Mn.M=!0,At(11))}}else si(this.i,this.l,de,null),xr(this,de);Dn==4&&ai(this),this.o&&!this.J&&(Dn==4?_f(this.j,this):(this.o=!1,oi(this)))}else hf(this.g),C==400&&0<de.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ai(this),hr(this)}}}catch{}finally{}};function Ji(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ir(m,S){var C=m.C,k=S.indexOf(`
`,C);return k==-1?ji:(C=Number(S.substring(C,k)),isNaN(C)?fr:(k+=1,k+C>S.length?ji:(S=S.slice(k,k+C),m.C=k+C,S)))}Ri.prototype.cancel=function(){this.J=!0,ai(this)};function oi(m){m.S=Date.now()+m.I,Gt(m,m.I)}function Gt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ht(T(m.ba,m),S)}function dr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ri.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(jr(this.i,this.A),this.L!=2&&(rn(),At(17)),ai(this),this.s=2,hr(this)):Gt(this,this.S-m)};function hr(m){m.j.G==0||m.J||_f(m.j,m)}function ai(m){dr(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,un(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function xr(m,S){try{var C=m.j;if(C.G!=0&&(C.g==m||Cs(C.h,m))){if(!m.K&&Cs(C.h,m)&&C.G==3){try{var k=C.Da.g.parse(S)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Vs(C),Ps(C);else break e;uu(C),At(18)}}else C.za=Y[1],0<C.za-C.T&&37500>Y[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ht(T(C.Za,C),6e3));if(1>=af(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Wr(C,11)}else if((m.K||C.g==m)&&Vs(C),!F(S))for(Y=C.Da.g.parse(S),S=0;S<Y.length;S++){let Ke=Y[S];if(C.T=Ke[0],Ke=Ke[1],C.G==2)if(Ke[0]=="c"){C.K=Ke[1],C.ia=Ke[2];const Mn=Ke[3];Mn!=null&&(C.la=Mn,C.j.info("VER="+C.la));const Dn=Ke[4];Dn!=null&&(C.Aa=Dn,C.j.info("SVER="+C.Aa));const Os=Ke[5];Os!=null&&typeof Os=="number"&&0<Os&&(k=1.5*Os,C.L=k,C.j.info("backChannelRequestTimeoutMs_="+k)),k=C;const vi=m.g;if(vi){const Go=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var ie=k.h;ie.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Is(ie,ie.h),ie.h=null))}if(k.D){const Qr=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(k.ya=Qr,dt(k.I,k.D,Qr))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),k=C;var de=m;if(k.qa=Tf(k,k.J?k.ia:null,k.W),de.K){Yi(k.h,de);var _t=de,cn=k.L;cn&&(_t.I=cn),_t.B&&(dr(_t),oi(_t)),k.g=de}else yf(k);0<C.i.length&&Va(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Wr(C,7);else C.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Wr(C,7):au(C):Ke[0]!="noop"&&C.l&&C.l.ta(Ke),C.v=0)}}rn(4)}catch{}}var Up=class{constructor(m,S){this.g=m,this.map=S}};function eu(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function af(m){return m.h?1:m.g?m.g.size:0}function Cs(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Is(m,S){m.g?m.g.add(S):m.h=S}function Yi(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}eu.prototype.cancel=function(){if(this.i=li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function li(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.D);return S}return P(m.i)}function lf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],C=m.length,k=0;k<C;k++)S.push(m[k]);return S}S=[],C=0;for(k in m)S[C++]=m[k];return S}function Fp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var C=0;C<m;C++)S.push(C);return S}S=[],C=0;for(const k in m)S[C++]=k;return S}}}function xa(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var C=Fp(m),k=lf(m),Y=k.length,ie=0;ie<Y;ie++)S.call(void 0,k[ie],C&&C[ie],m)}var nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(m,S){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var k=m[C].indexOf("="),Y=null;if(0<=k){var ie=m[C].substring(0,k);Y=m[C].substring(k+1)}else ie=m[C];S(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Kr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Kr){this.h=m.h,xs(this,m.j),this.o=m.o,this.g=m.g,Oo(this,m.s),this.l=m.l;var S=m.i,C=new Rr;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),Na(this,C),this.m=m.m}else m&&(S=String(m).match(nu))?(this.h=!1,xs(this,S[1]||"",!0),this.o=Rs(S[2]||""),this.g=Rs(S[3]||"",!0),Oo(this,S[4]),this.l=Rs(S[5]||"",!0),Na(this,S[6]||"",!0),this.m=Rs(S[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}Kr.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Wi(S,iu,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Wi(S,iu,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Wi(C,C.charAt(0)=="/"?ru:uf,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Wi(C,zp)),m.join("")};function Wt(m){return new Kr(m)}function xs(m,S,C){m.j=C?Rs(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Oo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Na(m,S,C){S instanceof Rr?(m.i=S,cf(m.i,m.h)):(C||(S=Wi(S,qp)),m.i=new Rr(S,m.h))}function dt(m,S,C){m.i.set(S,C)}function Uo(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Rs(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Wi(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,Bp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Bp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var iu=/[#\/\?@]/g,uf=/[#\?:]/g,ru=/[#\?]/g,qp=/[#\?@]/g,zp=/#/g;function Rr(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Nn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ra(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Rr.prototype,t.add=function(m,S){Nn(this),this.i=null,m=Ni(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function Ma(m,S){Nn(m),S=Ni(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Da(m,S){return Nn(m),S=Ni(m,S),m.g.has(S)}t.forEach=function(m,S){Nn(this),this.g.forEach(function(C,k){C.forEach(function(Y){m.call(S,Y,k,this)},this)},this)},t.na=function(){Nn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let k=0;k<S.length;k++){const Y=m[k];for(let ie=0;ie<Y.length;ie++)C.push(S[k])}return C},t.V=function(m){Nn(this);let S=[];if(typeof m=="string")Da(this,m)&&(S=S.concat(this.g.get(Ni(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)S=S.concat(m[C])}return S},t.set=function(m,S){return Nn(this),this.i=null,m=Ni(this,m),Da(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Jr(m,S,C){Ma(m,S),0<C.length&&(m.i=null,m.g.set(Ni(m,S),P(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var k=S[C];const ie=encodeURIComponent(String(k)),de=this.V(k);for(k=0;k<de.length;k++){var Y=ie;de[k]!==""&&(Y+="="+encodeURIComponent(String(de[k]))),m.push(Y)}}return this.i=m.join("&")};function Ni(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function cf(m,S){S&&!m.j&&(Nn(m),m.i=null,m.g.forEach(function(C,k){var Y=k.toLowerCase();k!=Y&&(Ma(this,k),Jr(this,Y,C))},m)),m.j=S}function su(m,S){const C=new jn;if(c.Image){const k=new Image;k.onload=b(yi,C,"TestLoadImage: loaded",!0,S,k),k.onerror=b(yi,C,"TestLoadImage: error",!1,S,k),k.onabort=b(yi,C,"TestLoadImage: abort",!1,S,k),k.ontimeout=b(yi,C,"TestLoadImage: timeout",!1,S,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else S(!1)}function ff(m,S){const C=new jn,k=new AbortController,Y=setTimeout(()=>{k.abort(),yi(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:k.signal}).then(ie=>{clearTimeout(Y),ie.ok?yi(C,"TestPingServer: ok",!0,S):yi(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),yi(C,"TestPingServer: error",!1,S)})}function yi(m,S,C,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(C)}catch{}}function pr(){this.g=new Se}function ou(m,S,C){const k=C||"";try{xa(m,function(Y,ie){let de=Y;h(Y)&&(de=oe(Y)),S.push(k+ie+"="+encodeURIComponent(de))})}catch(Y){throw S.push(k+"type="+encodeURIComponent("_badmap")),Y}}function Nr(m){this.l=m.Ub||null,this.j=m.eb||!1}N(Nr,$e),Nr.prototype.g=function(){return new Mi(this.l,this.j)},Nr.prototype.i=(function(m){return function(){return m}})({});function Mi(m,S){ze.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Mi,ze),t=Mi.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,Ns(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Mr(this):Ns(this),this.readyState==3&&ka(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Mr(this))},t.Qa=function(m){this.g&&(this.response=m,Mr(this))},t.ga=function(){this.g&&Mr(this)};function Mr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ns(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function Ns(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fo(m){let S="";return G(m,function(C,k){S+=k,S+=":",S+=C,S+=`\r
`}),S}function Ms(m,S,C){e:{for(k in C){var k=!1;break e}k=!0}k||(C=Fo(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):dt(m,S,C))}function Lt(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Lt,ze);var Kn=/^https?$/i,Yr=["POST","PUT"];t=Lt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,C,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?St(this.o):St(xi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){Bo(this,ie);return}if(m=C||"",C=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)C.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ie of k.keys())C.set(ie,k.get(ie));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yr,S,void 0))||k||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,de]of C)this.g.setRequestHeader(ie,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){Bo(this,ie)}};function Bo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Ds(m),ks(m)}function Ds(m){m.A||(m.A=!0,Ct(m,"complete"),Ct(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ct(this,"complete"),Ct(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?df(this):this.bb())},t.bb=function(){df(this)};function df(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ui(m)!=4||m.Z()!=2)){if(m.u&&ui(m)==4)me(m.Ea,0,m);else if(Ct(m,"readystatechange"),ui(m)==4){m.h=!1;try{const de=m.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var k;if(k=de===0){var Y=String(m.D).match(nu)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),k=!Kn.test(Y?Y.toLowerCase():"")}C=k}if(C)Ct(m,"complete"),Ct(m,"success");else{m.m=6;try{var ie=2<ui(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Ds(m)}}finally{ks(m)}}}}function ks(m,S){if(m.g){Pa(m);const C=m.g,k=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Ct(m,"ready");try{C.onreadystatechange=k}catch{}}}function Pa(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Te(S)}};function qo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function hf(m){const S={};m=(m.g&&2<=ui(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(F(m[k]))continue;var C=D(m[k]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[Y]||[];S[Y]=ie,ie.push(C)}I(S,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function pf(m){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,m),this.cb=zo("retryDelaySeedMs",1e4,m),this.Wa=zo("forwardChannelMaxRetries",2,m),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new eu(m&&m.concurrentRequestLimit),this.Da=new pr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pf.prototype,t.la=8,t.G=1,t.connect=function(m,S,C,k){At(0),this.W=m,this.H=S||{},C&&k!==void 0&&(this.H.OSID=C,this.H.OAID=k),this.F=this.X,this.I=Tf(this,null,this.W),Va(this)};function au(m){if(mf(m),m.G==3){var S=m.U++,C=Wt(m.I);if(dt(C,"SID",m.K),dt(C,"RID",S),dt(C,"TYPE","terminate"),Ho(m,C),S=new Ri(m,m.j,S),S.L=2,S.v=Uo(Wt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.v,C=!0),C||(S.g=Sf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),oi(S)}fu(m)}function Ps(m){m.g&&(cu(m),m.g.cancel(),m.g=null)}function mf(m){Ps(m),m.u&&(c.clearTimeout(m.u),m.u=null),Vs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Va(m){if(!tu(m.h)&&!m.s){m.s=!0;var S=m.Ga;ce||Me(),he||(ce(),he=!0),Ie.add(S,m),m.B=0}}function Hp(m,S){return af(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ht(T(m.Ga,m,S),Ef(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new Ri(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=x(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var k=this.i[C];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(S+=k,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=lu(this,Y,S),C=Wt(this.I),dt(C,"RID",m),dt(C,"CVER",22),this.D&&dt(C,"X-HTTP-Session-Id",this.D),Ho(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(Fo(ie)))+"&"+S:this.m&&Ms(C,this.m,ie)),Is(this.h,Y),this.Ua&&dt(C,"TYPE","init"),this.P?(dt(C,"$req",S),dt(C,"SID","null"),Y.T=!0,Ki(Y,C,null)):Ki(Y,C,S),this.G=2}}else this.G==3&&(m?gf(this,m):this.i.length==0||tu(this.h)||gf(this))};function gf(m,S){var C;S?C=S.l:C=m.U++;const k=Wt(m.I);dt(k,"SID",m.K),dt(k,"RID",C),dt(k,"AID",m.T),Ho(m,k),m.m&&m.o&&Ms(k,m.m,m.o),C=new Ri(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),S&&(m.i=S.D.concat(m.i)),S=lu(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Is(m.h,C),Ki(C,k,S)}function Ho(m,S){m.H&&G(m.H,function(C,k){dt(S,k,C)}),m.l&&xa({},function(C,k){dt(S,k,C)})}function lu(m,S,C){C=Math.min(m.i.length,C);var k=m.l?T(m.l.Na,m.l,m):null;e:{var Y=m.i;let ie=-1;for(;;){const de=["count="+C];ie==-1?0<C?(ie=Y[0].g,de.push("ofs="+ie)):ie=0:de.push("ofs="+ie);let _t=!0;for(let cn=0;cn<C;cn++){let Ke=Y[cn].g;const Mn=Y[cn].map;if(Ke-=ie,0>Ke)ie=Math.max(0,Y[cn].g-100),_t=!1;else try{ou(Mn,de,"req"+Ke+"_")}catch{k&&k(Mn)}}if(_t){k=de.join("&");break e}}}return m=m.i.splice(0,C),S.D=m,k}function yf(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ce||Me(),he||(ce(),he=!0),Ie.add(S,m),m.v=0}}function uu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ht(T(m.Fa,m),Ef(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,vf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ht(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Ps(this),vf(this))};function cu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function vf(m){m.g=new Ri(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Wt(m.qa);dt(S,"RID","rpc"),dt(S,"SID",m.K),dt(S,"AID",m.T),dt(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(S,"TO",m.ja),dt(S,"TYPE","xmlhttp"),Ho(m,S),m.m&&m.o&&Ms(S,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Uo(Wt(S)),C.m=null,C.P=!0,gi(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Ps(this),uu(this),At(19))};function Vs(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function _f(m,S){var C=null;if(m.g==S){Vs(m),cu(m),m.g=null;var k=2}else if(Cs(m.h,S))C=S.D,Yi(m.h,S),k=1;else return;if(m.G!=0){if(S.o)if(k==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var Y=m.B;k=Sn(),Ct(k,new ri(k,C)),Va(m)}else yf(m);else if(Y=S.s,Y==3||Y==0&&0<S.X||!(k==1&&Hp(m,S)||k==2&&uu(m)))switch(C&&0<C.length&&(S=m.h,S.i=S.i.concat(C)),Y){case 1:Wr(m,5);break;case 4:Wr(m,10);break;case 3:Wr(m,6);break;default:Wr(m,2)}}}function Ef(m,S){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*S}function Wr(m,S){if(m.j.info("Error code "+S),S==2){var C=T(m.fb,m),k=m.Xa;const Y=!k;k=new Kr(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xs(k,"https"),Uo(k),Y?su(k.toString(),C):ff(k.toString(),C)}else At(2);m.G=0,m.l&&m.l.sa(S),fu(m),mf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function fu(m){if(m.G=0,m.ka=[],m.l){const S=li(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ka,S),L(m.ka,m.i),m.h.i.length=0,P(m.i),m.i.length=0),m.l.ra()}}function Tf(m,S,C){var k=C instanceof Kr?Wt(C):new Kr(C);if(k.g!="")S&&(k.g=S+"."+k.g),Oo(k,k.s);else{var Y=c.location;k=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new Kr(null);k&&xs(ie,k),S&&(ie.g=S),Y&&Oo(ie,Y),C&&(ie.l=C),k=ie}return C=m.D,S=m.ya,C&&S&&dt(k,C,S),dt(k,"VER",m.la),Ho(m,k),k}function Sf(m,S,C){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new Lt(new Nr({eb:C})):new Lt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Af(){}t=Af.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(m,S){return new ci(m,S)};function ci(m,S){ze.call(this),this.g=new pf(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Ls(this)}N(ci,ze),ci.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ci.prototype.close=function(){au(this.g)},ci.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=oe(m),m=C);S.i.push(new Up(S.Ya++,m)),S.G==3&&Va(S)},ci.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,ci.aa.N.call(this)};function wf(m){at.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}N(wf,at);function bf(){rt.call(this),this.status=1}N(bf,rt);function Ls(m){this.g=m}N(Ls,Af),Ls.prototype.ua=function(){Ct(this.g,"a")},Ls.prototype.ta=function(m){Ct(this.g,new wf(m))},Ls.prototype.sa=function(m){Ct(this.g,new bf)},Ls.prototype.ra=function(){Ct(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,ci.prototype.send=ci.prototype.o,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,hI=function(){return new La},dI=function(){return Sn()},fI=ke,Ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,rh=Vt,sn.COMPLETE="complete",cI=sn,Ye.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",ze.prototype.listen=ze.prototype.K,rc=Ye,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,uI=Lt}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});const $S="@firebase/firestore",jS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new pv("@firebase/firestore");function gl(){return Ea.logLevel}function _e(t,...e){if(Ea.logLevel<=nt.DEBUG){const n=e.map(Iv);Ea.debug(`Firestore (${Gl}): ${t}`,...n)}}function Es(t,...e){if(Ea.logLevel<=nt.ERROR){const n=e.map(Iv);Ea.error(`Firestore (${Gl}): ${t}`,...n)}}function Ao(t,...e){if(Ea.logLevel<=nt.WARN){const n=e.map(Iv);Ea.warn(`Firestore (${Gl}): ${t}`,...n)}}function Iv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,pI(t,i,n)}function pI(t,e,n){let i=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Es(i),new Error(i)}function Tt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||pI(e,s,i)}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xn.UNAUTHENTICATED)))}shutdown(){}}class mP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gP{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Tt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fa,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fa)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string",31837,{l:i}),new mI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class yP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new yP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _P{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Tt(this.o===void 0,3512);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new KS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new KS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=EP(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function Ty(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Je(i,s);{const a=gI(),l=TP(a.encode(JS(t,n)),a.encode(JS(e,n)));return l!==0?l:Je(i,s)}}n+=i>65535?2:1}return Je(t.length,e.length)}function JS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function TP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Je(t[n],e[n]);return Je(t.length,e.length)}function Pl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__name__";class Or{constructor(e,n,i){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Le(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Je(e.length,n.length)}static compareSegments(e,n){const i=Or.isNumericId(e),s=Or.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(n)):Ty(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class Pt extends Or{construct(e,n,i){return new Pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const SP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Or{construct(e,n,i){return new Gn(e,n,i)}static isValidIdentifier(e){return SP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YS}static keyField(){return new Gn([YS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Pt.fromString(e))}static fromName(e){return new Ne(Pt.fromString(e).popFirst(5))}static empty(){return new Ne(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AP(t,e,n,i){if(e===!0&&i===!0)throw new Ee(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WS(t){if(!Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QS(t){if(Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le(12329,{type:typeof t})}function Eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cp(t);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wc(t,e){if(!vI(t))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=-62135596800,ZS=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*ZS);return new qt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<XS)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ZS}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-XS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:yn("string",qt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new qt(0,0))}static max(){return new Oe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function wP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(i===1e9?new qt(n+1,0):new qt(n,i));return new wo(s,Ne.empty(),e)}function bP(t){return new wo(t.readTime,t.key,Pc)}class wo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wo(Oe.min(),Ne.empty(),Pc)}static max(){return new wo(Oe.max(),Ne.empty(),Pc)}}function CP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==IP)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(d=>i(d)))})),l=!0,a===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((y=>{l[h]=y,++c,c===a&&i(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function RP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}fp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=-1;function dp(t){return t==null}function Ih(t){return t===0&&1/t==-1/0}function NP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="";function MP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=eA(e)),e=DP(t.get(n),e);return eA(e)}function DP(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case _I:n+="";break;default:n+=a}}return n}function eA(t){return t+_I+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Hn.RED,this.left=s??Hn.EMPTY,this.right=a??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Hn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nA(this.data.getIterator())}getIteratorFrom(e){return new nA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class nA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Fi([])}unionWith(e){let n=new bn(Gn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new TI("Invalid base64 string: "+a):a}})(e);return new $n(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const kP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(Tt(!!t,39018),typeof t=="string"){let e=0;const n=kP.exec(t);if(Tt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ln(t.seconds),nanos:ln(t.nanos)}}function ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Co(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="server_timestamp",AI="__type__",wI="__previous_value__",bI="__local_write_time__";function Nv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AI])===null||n===void 0?void 0:n.stringValue)===SI}function hp(t){const e=t.mapValue.fields[wI];return Nv(e)?hp(e):e}function Vc(t){const e=bo(t.mapValue.fields[bI].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,i,s,a,l,c,d,h,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=y}}const xh="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="__type__",VP="__max__",Dd={mapValue:{}},II="__vector__",Rh="value";function Io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nv(t)?4:OP(t)?9007199254740991:LP(t)?10:11:Le(28295,{value:t})}function Hr(t,e){if(t===e)return!0;const n=Io(t);if(n!==Io(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vc(t).isEqual(Vc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=bo(s.timestampValue),c=bo(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Co(s.bytesValue).isEqual(Co(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return ln(s.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ln(s.integerValue)===ln(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ln(s.doubleValue),c=ln(a.doubleValue);return l===c?Ih(l)===Ih(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Pl(t.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(tA(l)!==tA(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Hr(l[d],c[d])))return!1;return!0})(t,e);default:return Le(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find((n=>Hr(n,e)))!==void 0}function Vl(t,e){if(t===e)return 0;const n=Io(t),i=Io(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=ln(a.integerValue||a.doubleValue),d=ln(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return iA(t.timestampValue,e.timestampValue);case 4:return iA(Vc(t),Vc(e));case 5:return Ty(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=Co(a),d=Co(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const y=Je(c[h],d[h]);if(y!==0)return y}return Je(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Je(ln(a.latitude),ln(l.latitude));return c!==0?c:Je(ln(a.longitude),ln(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return rA(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var c,d,h,y;const E=a.fields||{},T=l.fields||{},b=(c=E[Rh])===null||c===void 0?void 0:c.arrayValue,N=(d=T[Rh])===null||d===void 0?void 0:d.arrayValue,P=Je(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return P!==0?P:rA(b,N)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Dd.mapValue&&l===Dd.mapValue)return 0;if(a===Dd.mapValue)return 1;if(l===Dd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=l.fields||{},y=Object.keys(h);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=Ty(d[E],y[E]);if(T!==0)return T;const b=Vl(c[d[E]],h[y[E]]);if(b!==0)return b}return Je(d.length,y.length)})(t.mapValue,e.mapValue);default:throw Le(23264,{le:n})}}function iA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=bo(t),i=bo(e),s=Je(n.seconds,i.seconds);return s!==0?s:Je(n.nanos,i.nanos)}function rA(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Vl(n[s],i[s]);if(a)return a}return Je(n.length,i.length)}function Ll(t){return Sy(t)}function Sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=bo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Co(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Sy(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Sy(n.fields[l])}`;return s+"}"})(t.mapValue):Le(61005,{value:t})}function sh(t){switch(Io(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hp(t);return e?16+sh(e):16;case 5:return 2*t.stringValue.length;case 6:return Co(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+sh(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return ko(i.fields,((a,l)=>{s+=a.length+sh(l)})),s})(t.mapValue);default:throw Le(13486,{value:t})}}function sA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ay(t){return!!t&&"integerValue"in t}function Mv(t){return!!t&&"arrayValue"in t}function oA(t){return!!t&&"nullValue"in t}function aA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function LP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CI])===null||n===void 0?void 0:n.stringValue)===II}function mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=mc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(n)}setAll(e){let n=Gn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=mc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];oh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ko(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new bi(mc(this.value))}}function xI(t){const e=[];return ko(t.fields,((n,i)=>{const s=new Gn([n]);if(oh(i)){const a=xI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Oe.min(),Oe.min(),Oe.min(),bi.empty(),0)}static newFoundDocument(e,n,i,s){return new Zn(e,1,n,Oe.min(),i,s,0)}static newNoDocument(e,n){return new Zn(e,2,n,Oe.min(),Oe.min(),bi.empty(),0)}static newUnknownDocument(e,n){return new Zn(e,3,n,Oe.min(),Oe.min(),bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.position=e,this.inclusive=n}}function lA(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=Vl(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function uA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n="asc"){this.field=e,this.dir=n}}function UP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class gn extends RI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new BP(e,n,i):n==="array-contains"?new HP(e,i):n==="in"?new GP(e,i):n==="not-in"?new $P(e,i):n==="array-contains-any"?new jP(e,i):new gn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new qP(e,i):new zP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vl(n,this.value)):n!==null&&Io(this.value)===Io(n)&&this.matchesComparison(Vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends RI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new br(e,n)}matches(e){return NI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function NI(t){return t.op==="and"}function MI(t){return FP(t)&&NI(t)}function FP(t){for(const e of t.filters)if(e instanceof br)return!1;return!0}function wy(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+Ll(t.value);if(MI(t))return t.filters.map((e=>wy(e))).join(",");{const e=t.filters.map((n=>wy(n))).join(",");return`${t.op}(${e})`}}function DI(t,e){return t instanceof gn?(function(i,s){return s instanceof gn&&i.op===s.op&&i.field.isEqual(s.field)&&Hr(i.value,s.value)})(t,e):t instanceof br?(function(i,s){return s instanceof br&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&DI(l,s.filters[c])),!0):!1})(t,e):void Le(19439)}function kI(t){return t instanceof gn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ll(n.value)}`})(t):t instanceof br?(function(n){return n.op.toString()+" {"+n.getFilters().map(kI).join(" ,")+"}"})(t):"Filter"}class BP extends gn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class qP extends gn{constructor(e,n){super(e,"in",n),this.keys=PI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zP extends gn{constructor(e,n){super(e,"not-in",n),this.keys=PI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function PI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class HP extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mv(n)&&Oc(n.arrayValue,this.value)}}class GP extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class $P extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class jP extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Oc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Pe=null}}function cA(t,e=null,n=[],i=[],s=null,a=null,l=null){return new KP(t,e,n,i,s,a,l)}function Dv(t){const e=qe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>wy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),dp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ll(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ll(i))).join(",")),e.Pe=n}return e.Pe}function kv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uA(t.startAt,e.startAt)&&uA(t.endAt,e.endAt)}function by(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function JP(t,e,n,i,s,a,l,c){return new Qc(t,e,n,i,s,a,l,c)}function Pv(t){return new Qc(t)}function fA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VI(t){return t.collectionGroup!==null}function gc(t){const e=qe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new bn(Gn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Mh(a,i))})),n.has(Gn.keyField().canonicalString())||e.Te.push(new Mh(Gn.keyField(),i))}return e.Te}function Fr(t){const e=qe(t);return e.Ie||(e.Ie=YP(e,gc(t))),e.Ie}function YP(t,e){if(t.limitType==="F")return cA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Mh(s.field,a)}));const n=t.endAt?new Nh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nh(t.startAt.position,t.startAt.inclusive):null;return cA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Cy(t,e){const n=t.filters.concat([e]);return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iy(t,e,n){return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pp(t,e){return kv(Fr(t),Fr(e))&&t.limitType===e.limitType}function LI(t){return`${Dv(Fr(t))}|lt:${t.limitType}`}function yl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>kI(s))).join(", ")}]`),dp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Ll(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Ll(s))).join(",")),`Target(${i})`})(Fr(t))}; limitType=${t.limitType})`}function mp(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of gc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,d){const h=lA(l,c,d);return l.inclusive?h<=0:h<0})(i.startAt,gc(i),s)||i.endAt&&!(function(l,c,d){const h=lA(l,c,d);return l.inclusive?h>=0:h>0})(i.endAt,gc(i),s))})(t,e)}function WP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OI(t){return(e,n)=>{let i=!1;for(const s of gc(t)){const a=QP(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function QP(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const d=l.data.field(a),h=c.data.field(a);return d!==null&&h!==null?Vl(d,h):Le(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return EI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Jt(Ne.comparator);function Ts(){return XP}const UI=new Jt(Ne.comparator);function sc(...t){let e=UI;for(const n of t)e=e.insert(n.key,n);return e}function FI(t){let e=UI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ca(){return yc()}function BI(){return yc()}function yc(){return new ba((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ZP=new Jt(Ne.comparator),eV=new bn(Ne.comparator);function it(...t){let e=eV;for(const n of t)e=e.add(n);return e}const tV=new bn(Je);function nV(){return tV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function qI(t){return{integerValue:""+t}}function iV(t,e){return NP(e)?qI(e):Vv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this._=void 0}}function rV(t,e,n){return t instanceof Dh?(function(s,a){const l={fields:{[AI]:{stringValue:SI},[bI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Nv(a)&&(a=hp(a)),a&&(l.fields[wI]=a),{mapValue:l}})(n,e):t instanceof Uc?HI(t,e):t instanceof Fc?GI(t,e):(function(s,a){const l=zI(s,a),c=dA(l)+dA(s.Ee);return Ay(l)&&Ay(s.Ee)?qI(c):Vv(s.serializer,c)})(t,e)}function sV(t,e,n){return t instanceof Uc?HI(t,e):t instanceof Fc?GI(t,e):n}function zI(t,e){return t instanceof kh?(function(i){return Ay(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Dh extends gp{}class Uc extends gp{constructor(e){super(),this.elements=e}}function HI(t,e){const n=$I(e);for(const i of t.elements)n.some((s=>Hr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Fc extends gp{constructor(e){super(),this.elements=e}}function GI(t,e){let n=$I(e);for(const i of t.elements)n=n.filter((s=>!Hr(s,i)));return{arrayValue:{values:n}}}class kh extends gp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function dA(t){return ln(t.integerValue||t.doubleValue)}function $I(t){return Mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oV(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Uc&&s instanceof Uc||i instanceof Fc&&s instanceof Fc?Pl(i.elements,s.elements,Hr):i instanceof kh&&s instanceof kh?Hr(i.Ee,s.Ee):i instanceof Dh&&s instanceof Dh})(t.transform,e.transform)}class aV{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yp{}function jI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lv(t.key,wr.none()):new Xc(t.key,t.data,wr.none());{const n=t.data,i=bi.empty();let s=new bn(Gn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Po(t.key,i,new Fi(s.toArray()),wr.none())}}function lV(t,e,n){t instanceof Xc?(function(s,a,l){const c=s.value.clone(),d=pA(s.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Po?(function(s,a,l){if(!ah(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=pA(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(KI(s)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function vc(t,e,n,i){return t instanceof Xc?(function(a,l,c,d){if(!ah(a.precondition,l))return c;const h=a.value.clone(),y=mA(a.fieldTransforms,d,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Po?(function(a,l,c,d){if(!ah(a.precondition,l))return c;const h=mA(a.fieldTransforms,d,l),y=l.data;return y.setAll(KI(a)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,l,c){return ah(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function uV(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=zI(i.transform,s||null);a!=null&&(n===null&&(n=bi.empty()),n.set(i.field,a))}return n||null}function hA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Pl(i,s,((a,l)=>oV(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends yp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Po extends yp{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function KI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function pA(t,e,n){const i=new Map;Tt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,sV(l,c,n[s]))}return i}function mA(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,rV(a,l,e))}return i}class Lv extends yp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cV extends yp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&lV(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=BI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const d=jI(l,c);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>hA(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>hA(n,i)))}}class Ov{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Tt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return ZP})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Ov(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,lt;function pV(t){switch(t){case le.OK:return Le(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Le(15467,{code:t})}}function JI(t){if(t===void 0)return Es("GRPC error has no .code"),le.UNKNOWN;switch(t){case mn.OK:return le.OK;case mn.CANCELLED:return le.CANCELLED;case mn.UNKNOWN:return le.UNKNOWN;case mn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case mn.INTERNAL:return le.INTERNAL;case mn.UNAVAILABLE:return le.UNAVAILABLE;case mn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case mn.NOT_FOUND:return le.NOT_FOUND;case mn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case mn.ABORTED:return le.ABORTED;case mn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case mn.DATA_LOSS:return le.DATA_LOSS;default:return Le(39323,{code:t})}}(lt=mn||(mn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new _o([4294967295,4294967295],0);function gA(t){const e=gI().encode(t),n=new lI;return n.update(e),new Uint8Array(n.digest())}function yA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new _o([n,i],0),new _o([s,a],0)]}class Uv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=_o.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(_o.fromNumber(i)));return s.compare(mV)===1&&(s=new _o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=gA(e),[i,s]=yA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Uv(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=gA(e),[i,s]=yA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new vp(Oe.min(),s,new Jt(Je),Ts(),it())}}class Zc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Zc(i,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class YI{constructor(e,n){this.targetId=e,this.De=n}}class WI{constructor(e,n,i=$n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class vA{constructor(){this.ve=0,this.Ce=_A(),this.Fe=$n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),n=it(),i=it();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Le(38017,{changeType:a})}})),new Zc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=_A()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class gV{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ts(),this.je=kd(),this.Je=kd(),this.He=new Jt(Je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(by(a))if(i===0){const l=new Ne(a.path);this.Xe(n,l,Zn.newNoDocument(l,Oe.min()))}else Tt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=Co(i).toUint8Array()}catch(d){if(d instanceof TI)return Ao("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Uv(l,s,a)}catch(d){return Ao(d instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,l)=>{const c=this.st(l);if(c){if(a.current&&by(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Zn.newNoDocument(d,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}}));let i=it();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new vp(e,n,this.He,this.ze,i);return this.ze=Ts(),this.je=kd(),this.Je=kd(),this.He=new Jt(Je),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new vA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new bn(Je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new bn(Je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function kd(){return new Jt(Ne.comparator)}function _A(){return new Jt(Ne.comparator)}const yV={asc:"ASCENDING",desc:"DESCENDING"},vV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_V={and:"AND",or:"OR"};class EV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xy(t,e){return t.useProto3Json||dp(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TV(t,e){return Ph(t,e.toTimestamp())}function Br(t){return Tt(!!t,49232),Oe.fromTimestamp((function(n){const i=bo(n);return new qt(i.seconds,i.nanos)})(t))}function Fv(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){const n=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function XI(t){const e=Pt.fromString(t);return Tt(ix(e),10190,{key:e.toString()}),e}function Ny(t,e){return Fv(t.databaseId,e.path)}function Wg(t,e){const n=XI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(ex(n))}function ZI(t,e){return Fv(t.databaseId,e)}function SV(t){const e=XI(t);return e.length===4?Pt.emptyPath():ex(e)}function My(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ex(t){return Tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function EA(t,e,n){return{name:Ny(t,e),fields:n.value.mapValue.fields}}function AV(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Le(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(Tt(y===void 0||typeof y=="string",58123),$n.fromBase64String(y||"")):(Tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),$n.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const y=h.code===void 0?le.UNKNOWN:JI(h.code);return new Ee(y,h.message||"")})(l);n=new WI(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Wg(t,i.document.name),a=Br(i.document.updateTime),l=i.document.createTime?Br(i.document.createTime):Oe.min(),c=new bi({mapValue:{fields:i.document.fields}}),d=Zn.newFoundDocument(s,a,l,c),h=i.targetIds||[],y=i.removedTargetIds||[];n=new lh(h,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Wg(t,i.document),a=i.readTime?Br(i.readTime):Oe.min(),l=Zn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new lh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Wg(t,i.document),a=i.removedTargetIds||[];n=new lh([],a,s,null)}else{if(!("filter"in e))return Le(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new hV(s,a),c=i.targetId;n=new YI(c,l)}}return n}function wV(t,e){let n;if(e instanceof Xc)n={update:EA(t,e.key,e.value)};else if(e instanceof Lv)n={delete:Ny(t,e.key)};else if(e instanceof Po)n={update:EA(t,e.key,e.data),updateMask:kV(e.fieldMask)};else{if(!(e instanceof cV))return Le(16599,{Rt:e.type});n={verify:Ny(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Le(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:TV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le(27497)})(t,e.precondition)),n}function bV(t,e){return t&&t.length>0?(Tt(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?Br(s.updateTime):Br(a);return l.isEqual(Oe.min())&&(l=Br(a)),new aV(l,s.transformResults||[])})(n,e)))):[]}function CV(t,e){return{documents:[ZI(t,e.path)]}}function IV(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ZI(t,s);const a=(function(h){if(h.length!==0)return nx(br.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:vl(T.field),direction:NV(T.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=xy(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function xV(t){let e=SV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Tt(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=(function(E){const T=tx(E);return T instanceof br&&MI(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(E){return E.map((T=>(function(N){return new Mh(_l(N.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,dp(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,b=E.values||[];return new Nh(b,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,b=E.values||[];return new Nh(b,T)})(n.endAt)),JP(e,s,l,a,c,"F",d,h)}function RV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tx(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_l(n.unaryFilter.field);return gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(n.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_l(n.unaryFilter.field);return gn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_l(n.unaryFilter.field);return gn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gn.create(_l(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return br.create(n.compositeFilter.filters.map((i=>tx(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(t):Le(30097,{filter:t})}function NV(t){return yV[t]}function MV(t){return vV[t]}function DV(t){return _V[t]}function vl(t){return{fieldPath:t.canonicalString()}}function _l(t){return Gn.fromServerFormat(t.fieldPath)}function nx(t){return t instanceof gn?(function(n){if(n.op==="=="){if(aA(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NAN"}};if(oA(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aA(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NAN"}};if(oA(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(n.field),op:MV(n.op),value:n.value}}})(t):t instanceof br?(function(n){const i=n.getFilters().map((s=>nx(s)));return i.length===1?i[0]:{compositeFilter:{op:DV(n.op),filters:i}}})(t):Le(54877,{filter:t})}function kV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ix(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,i,s,a=Oe.min(),l=Oe.min(),c=$n.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.gt=e}}function VV(t){const e=xV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.Dn=new OV}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(wo.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class OV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new bn(Pt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new bn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rx=41943040;class wi{static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(rx,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ol(0)}static ur(){return new Ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="LruGarbageCollector",UV=1048576;function AA([t,e],[n,i]){const s=Je(t,n);return s===0?Je(e,i):s}class FV{constructor(e){this.Tr=e,this.buffer=new bn(AA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();AA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(SA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jl(n)?_e(SA,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Rr(3e5)}))}}class qV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(fp.ue);const i=new FV(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(TA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,l,c,d,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),gl()<=nt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-y}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function zV(t,e){return new qV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new ba((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&vc(i.mutation,s,Fi.empty(),qt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,it()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=it()){const s=ca();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=sc();return a.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=ca();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,it())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=Ts();const l=yc(),c=(function(){return yc()})();return n.forEach(((d,h)=>{const y=i.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof Po)?a=a.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),vc(y.mutation,h,y.mutation.getFieldMask(),qt.now())):l.set(h.key,Fi.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,y)=>l.set(h,y))),n.forEach(((h,y)=>{var E;return c.set(h,new GV(y,(E=l.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=yc();let s=new Jt(((l,c)=>l-c)),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let y=i.get(d)||Fi.empty();y=c.applyToLocalView(h,y),i.set(d,y);const E=(s.get(c.batchId)||it()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,y=d.value,E=BI();y.forEach((T=>{if(!a.has(T)){const b=jI(n.get(T),i.get(T));b!==null&&E.set(T,b),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ue.resolve(ca());let c=Pc,d=a;return l.next((h=>ue.forEach(h,((y,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(y)?ue.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,it()))).next((y=>({batchId:c,changes:FI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=sc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=sc();return this.indexManager.getCollectionParents(e,a).next((c=>ue.forEach(c,(d=>{const h=(function(E,T){return new Qc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((y=>{y.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((d,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,Zn.newInvalidDocument(y)))}));let c=sc();return l.forEach(((d,h)=>{const y=a.get(d);y!==void 0&&vc(y.mutation,h,Fi.empty(),qt.now()),mp(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Br(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:VV(s.bundledQuery),readTime:Br(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.overlays=new Jt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ca();return ue.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=ca(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Jt(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=ca(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=ca(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return ue.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new dV(n,i));let a=this.kr.get(n);a===void 0&&(a=it(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.qr=new bn(Vn.Qr),this.$r=new bn(Vn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Vn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Vn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Pt([])),i=new Vn(n,e),s=new Vn(n,e+1),a=[];return this.$r.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Pt([])),i=new Vn(n,e),s=new Vn(n,e+1);let a=it();return this.$r.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new Vn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Vn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new bn(Vn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new fV(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new Vn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Rv:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Vn(n,0),s=new Vn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bn(Je);return n.forEach((s=>{const a=new Vn(s,0),l=new Vn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),ue.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Vn(new Ne(a),0);let c=new bn(Je);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),l),ue.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ue.forEach(n.mutations,(s=>{const a=new Vn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Vn(n,0),s=this.Yr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.ni=e,this.docs=(function(){return new Jt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(n))}getEntries(e,n){let i=Ts();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Zn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Ts();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:y}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||CP(bP(y),i)<=0||(s.has(y.key)||mp(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Le(9500)}ri(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new QV(this)}getSize(e){return ue.resolve(this.size)}}class QV extends HV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.persistence=e,this.ii=new ba((n=>Dv(n)),kv),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new Bv,this.targetCount=0,this._i=Ol.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(a).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.ai={},this.overlays={},this.ui=new fp(0),this.ci=!1,this.ci=!0,this.li=new JV,this.referenceDelegate=e(this),this.hi=new XV(this),this.indexManager=new LV,this.remoteDocumentCache=(function(s){return new WV(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new PV(n),this.Ti=new jV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new YV(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const s=new ZV(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return ue.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class ZV extends xP{constructor(e){super(),this.currentSequenceNumber=e}}class qv{constructor(e){this.persistence=e,this.Ai=new Bv,this.Ri=null}static Vi(e){return new qv(e)}get mi(){if(this.Ri)return this.Ri;throw Le(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Vh{constructor(e,n){this.persistence=e,this.gi=new ba((i=>MP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=zV(this,n)}static Vi(e,n){return new Vh(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Oe.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sh(e.data.value)),n}Sr(e,n,i){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=it(),s=it();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new zv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return D2()?8:RP(ti())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new eL;return this.ws(e,n,l).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(gl()<=nt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(gl()<=nt.DEBUG&&_e("QueryEngine","Query:",yl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(gl()<=nt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):ue.resolve())}ps(e,n){if(fA(n))return ue.resolve(null);let i=Fr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Iy(n,null,"F"),i=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=it(...a);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,l,d.readTime)?this.ps(e,Iy(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return fA(n)||s.isEqual(Oe.min())?ue.resolve(null):this.gs.getDocuments(e,i).next((a=>{const l=this.bs(n,a);return this.Ds(n,l,i,s)?ue.resolve(null):(gl()<=nt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(n)),this.vs(e,l,n,wP(s,Pc)).next((c=>c)))}))}bs(e,n){let i=new bn(OI(e));return n.forEach(((s,a)=>{mp(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return gl()<=nt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",yl(n)),this.gs.getDocumentsMatchingQuery(e,n,wo.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="LocalStore",nL=3e8;class iL{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(Je),this.Ms=new ba((a=>Dv(a)),kv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $V(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function rL(t,e,n,i){return new iL(t,e,n,i)}async function ox(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let d=it();for(const h of s){l.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}for(const h of a){c.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function sL(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,y){const E=h.batch,T=E.keys();let b=ue.resolve();return T.forEach((N=>{b=b.next((()=>y.getEntry(d,N))).next((P=>{const L=h.docVersions.get(N);Tt(L!==null,48541),P.version.compareTo(L)<0&&(E.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),y.addEntry(P)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=it();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function ax(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function oL(t,e){const n=qe(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((y,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,y.addedDocuments,E))));let b=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken($n.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,i)),s=s.insert(E,b),(function(P,L,z){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=nL?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,b,y)&&c.push(n.hi.updateTargetData(a,b))}));let d=Ts(),h=it();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(aL(a,l,e.documentUpdates).next((y=>{d=y.Ls,h=y.ks}))),!i.isEqual(Oe.min())){const y=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(y)}return ue.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function aL(t,e,n){let i=it(),s=it();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=Ts();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Oe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):_e(Hv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:l,ks:s}}))}function lL(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Rv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function uL(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(i).next((l=>(s=new mo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Dy(t,e,n){const i=qe(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!jl(l))throw l;_e(Hv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function wA(t,e,n){const i=qe(t);let s=Oe.min(),a=it();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,h,y){const E=qe(d),T=E.Ms.get(y);return T!==void 0?ue.resolve(E.Fs.get(T)):E.hi.getTargetData(h,y)})(i,l,Fr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?a:it()))).next((c=>(cL(i,WP(e),c),{documents:c,qs:a})))))}function cL(t,e,n){let i=t.xs.get(e)||Oe.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class bA{constructor(){this.activeTargetIds=nV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fL{constructor(){this.Fo=new bA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new bA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="ConnectivityMonitor";class IA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(CA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(CA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function ky(){return Pd===null?Pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="RestConnection",hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===xh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const l=ky(),c=this.Go(e,n.toUriEncodedString());_e(Qg,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),y=As(h);return this.jo(e,c,d,i,y).then((E=>(_e(Qg,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw Ao(Qg,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,l){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=hL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class gL extends pL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const l=ky();return new Promise(((c,d)=>{const h=new uI;h.setWithCredentials(!0),h.listenOnce(cI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case rh.NO_ERROR:const E=h.getResponseJson();_e(Yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case rh.TIMEOUT:_e(Yn,`RPC '${e}' ${l} timed out`),d(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const T=h.getStatus();if(_e(Yn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const N=b==null?void 0:b.error;if(N&&N.status&&N.message){const P=(function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(F)>=0?F:le.UNKNOWN})(N.status);d(new Ee(P,N.message))}else d(new Ee(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{c_:e,streamId:l,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{_e(Yn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);_e(Yn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",y,i,15)}))}P_(e,n,i){const s=ky(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=hI(),c=dI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=a.join("");_e(Yn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const E=l.createWebChannel(y,d);this.T_(E);let T=!1,b=!1;const N=new mL({Ho:L=>{b?_e(Yn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(T||(_e(Yn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),_e(Yn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Yo:()=>E.close()}),P=(L,z,F)=>{L.listen(z,(B=>{try{F(B)}catch(K){setTimeout((()=>{throw K}),0)}}))};return P(E,rc.EventType.OPEN,(()=>{b||(_e(Yn,`RPC '${e}' stream ${s} transport opened.`),N.s_())})),P(E,rc.EventType.CLOSE,(()=>{b||(b=!0,_e(Yn,`RPC '${e}' stream ${s} transport closed`),N.__(),this.I_(E))})),P(E,rc.EventType.ERROR,(L=>{b||(b=!0,Ao(Yn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),N.__(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),P(E,rc.EventType.MESSAGE,(L=>{var z;if(!b){const F=L.data[0];Tt(!!F,16349);const B=F,K=(B==null?void 0:B.error)||((z=B[0])===null||z===void 0?void 0:z.error);if(K){_e(Yn,`RPC '${e}' stream ${s} received error:`,K);const X=K.status;let G=(function(R){const V=mn[R];if(V!==void 0)return JI(V)})(X),I=K.message;G===void 0&&(G=le.INTERNAL,I="Unknown error status: "+X+" with message "+K.message),b=!0,N.__(new Ee(G,I)),E.close()}else _e(Yn,`RPC '${e}' stream ${s} received:`,F),N.a_(F)}})),P(c,fI.STAT_EVENT,(L=>{L.stat===Ey.PROXY?_e(Yn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===Ey.NOPROXY&&_e(Yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new EV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="PersistentStream";class ux{constructor(e,n,i,s,a,l,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new lx(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Ee(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(xA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(xA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yL extends ux{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=AV(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Oe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?Br(l.readTime):Oe.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=My(this.serializer),n.addTarget=(function(a,l){let c;const d=l.target;if(c=by(d)?{documents:CV(a,d)}:{query:IV(a,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=QI(a,l.resumeToken);const h=xy(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=Ph(a,l.snapshotVersion.toTimestamp());const h=xy(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=RV(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=My(this.serializer),n.removeTarget=e,this.k_(n)}}class vL extends ux{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=bV(e.writeResults,e.commitTime),i=Br(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=My(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>wV(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{}class EL extends _L{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Ry(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,Ry(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class TL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Es(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class SL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{Ca(this)&&(_e(Ta,"Restarting streams for network reachability change."),await(async function(d){const h=qe(d);h.Ia.add(4),await ef(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Ep(h)})(this))}))})),this.Aa=new TL(i,s)}}async function Ep(t){if(Ca(t))for(const e of t.da)await e(!0)}async function ef(t){for(const e of t.da)await e(!1)}function cx(t,e){const n=qe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Kv(n)?jv(n):Kl(n).x_()&&$v(n,e))}function Gv(t,e){const n=qe(t),i=Kl(n);n.Ta.delete(e),i.x_()&&fx(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ca(n)&&n.Aa.set("Unknown"))}function $v(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).H_(e)}function fx(t,e){t.Ra.$e(e),Kl(t).Y_(e)}function jv(t){t.Ra=new gV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.Aa.aa()}function Kv(t){return Ca(t)&&!Kl(t).M_()&&t.Ta.size>0}function Ca(t){return qe(t).Ia.size===0}function dx(t){t.Ra=void 0}async function AL(t){t.Aa.set("Online")}async function wL(t){t.Ta.forEach(((e,n)=>{$v(t,e)}))}async function bL(t,e){dx(t),Kv(t)?(t.Aa.la(e),jv(t)):t.Aa.set("Unknown")}async function CL(t,e,n){if(t.Aa.set("Online"),e instanceof WI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){_e(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Lh(t,i)}else if(e instanceof lh?t.Ra.Ye(e):e instanceof YI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Oe.min()))try{const i=await ax(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Ra.Pt(l);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ta.get(h);y&&a.Ta.set(h,y.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,h)=>{const y=a.Ta.get(d);if(!y)return;a.Ta.set(d,y.withResumeToken($n.EMPTY_BYTE_STRING,y.snapshotVersion)),fx(a,d);const E=new mo(y.target,d,h,y.sequenceNumber);$v(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(Ta,"Failed to raise snapshot:",i),await Lh(t,i)}}async function Lh(t,e,n){if(!jl(e))throw e;t.Ia.add(1),await ef(t),t.Aa.set("Offline"),n||(n=()=>ax(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(Ta,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ep(t)}))}function hx(t,e){return e().catch((n=>Lh(t,n,e)))}async function Tp(t){const e=qe(t),n=xo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Rv;for(;IL(e);)try{const s=await lL(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,xL(e,s)}catch(s){await Lh(e,s)}px(e)&&mx(e)}function IL(t){return Ca(t)&&t.Pa.length<10}function xL(t,e){t.Pa.push(e);const n=xo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function px(t){return Ca(t)&&!xo(t).M_()&&t.Pa.length>0}function mx(t){xo(t).start()}async function RL(t){xo(t).na()}async function NL(t){const e=xo(t);for(const n of t.Pa)e.X_(n.mutations)}async function ML(t,e,n){const i=t.Pa.shift(),s=Ov.from(i,e,n);await hx(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Tp(t)}async function DL(t,e){e&&xo(t).Z_&&await(async function(i,s){if((function(l){return pV(l)&&l!==le.ABORTED})(s.code)){const a=i.Pa.shift();xo(i).N_(),await hx(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Tp(i)}})(t,e),px(t)&&mx(t)}async function RA(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),_e(Ta,"RemoteStore received new credentials");const i=Ca(n);n.Ia.add(3),await ef(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ep(n)}async function kL(t,e){const n=qe(t);e?(n.Ia.delete(2),await Ep(n)):e||(n.Ia.add(2),await ef(n),n.Aa.set("Unknown"))}function Kl(t){return t.Va||(t.Va=(function(n,i,s){const a=qe(n);return a.ia(),new yL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:AL.bind(null,t),e_:wL.bind(null,t),n_:bL.bind(null,t),J_:CL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Kv(t)?jv(t):t.Aa.set("Unknown")):(await t.Va.stop(),dx(t))}))),t.Va}function xo(t){return t.ma||(t.ma=(function(n,i,s){const a=qe(n);return a.ia(),new vL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:RL.bind(null,t),n_:DL.bind(null,t),ea:NL.bind(null,t),ta:ML.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Tp(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(Ta,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Jv(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yv(t,e){if(Es("AsyncQueue",`${e}: ${t}`),jl(t))return new Ee(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=sc(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Cl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.fa=new Jt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Le(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ul{constructor(e,n,i,s,a,l,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Ul(e,n,Cl.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class VL{constructor(){this.queries=MA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=qe(n),a=s.queries;s.queries=MA(),a.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function MA(){return new ba((t=>LI(t)),pp)}async function LL(t,e){const n=qe(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new PL,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Yv(l,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Wv(n)}async function OL(t,e){const n=qe(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function UL(t,e){const n=qe(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.wa)c.Ca(s)&&(i=!0);l.ya=s}}i&&Wv(n)}function FL(t,e,n){const i=qe(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function Wv(t){t.Da.forEach((e=>{e.next()}))}var Py,DA;(DA=Py||(Py={})).Fa="default",DA.Cache="cache";class BL{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Py.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.key=e}}class yx{constructor(e){this.key=e}}class qL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=OI(e),this.eu=new Cl(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new NA,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const T=s.get(y),b=mp(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),P=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;T&&b?T.data.isEqual(b.data)?N!==P&&(i.track({type:3,doc:b}),L=!0):this.iu(T,b)||(i.track({type:2,doc:b}),L=!0,(d&&this.Xa(b,d)>0||h&&this.Xa(b,h)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),L=!0):T&&!b&&(i.track({type:1,doc:T}),L=!0,(d||h)&&(c=!0)),L&&(b?(l=l.add(b),a=P?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{eu:l,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((y,E)=>(function(b,N){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{At:L})}};return P(b)-P(N)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,l.length!==0||h?{snapshot:new Ul(this.query,e.eu,a,l,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new NA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new yx(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new gx(i))})),n}uu(e){this.Ha=e.qs,this.Za=it();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ul.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qv="SyncEngine";class zL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class HL{constructor(e){this.key=e,this.lu=!1}}class GL{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new ba((c=>LI(c)),pp),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ne.comparator),this.Eu=new Map,this.Au=new Bv,this.Ru={},this.Vu=new Map,this.mu=Ol.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function $L(t,e,n=!0){const i=Ax(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await vx(i,e,n,!0),s}async function jL(t,e){const n=Ax(t);await vx(n,e,!0,!1)}async function vx(t,e,n,i){const s=await uL(t.localStore,Fr(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await KL(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&cx(t.remoteStore,s),c}async function KL(t,e,n,i,s){t.gu=(E,T,b)=>(async function(P,L,z,F){let B=L.view.nu(z);B.Ds&&(B=await wA(P.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,B))));const K=F&&F.targetChanges.get(L.targetId),X=F&&F.targetMismatches.get(L.targetId)!=null,G=L.view.applyChanges(B,P.isPrimaryClient,K,X);return PA(P,L.targetId,G._u),G.snapshot})(t,E,T,b);const a=await wA(t.localStore,e,!0),l=new qL(e,a.qs),c=l.nu(a.documents),d=Zc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,d);PA(t,n,h._u);const y=new zL(e,n,l);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function JL(t,e,n){const i=qe(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((l=>!pp(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Dy(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Gv(i.remoteStore,s.targetId),Vy(i,s.targetId)})).catch($l)):(Vy(i,s.targetId),await Dy(i.localStore,s.targetId,!0))}async function YL(t,e){const n=qe(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Gv(n.remoteStore,i.targetId))}async function WL(t,e,n){const i=iO(t);try{const s=await(function(l,c){const d=qe(l),h=qt.now(),y=c.reduce(((b,N)=>b.add(N.key)),it());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let N=Ts(),P=it();return d.Os.getEntries(b,y).next((L=>{N=L,N.forEach(((z,F)=>{F.isValidDocument()||(P=P.add(z))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,N))).next((L=>{E=L;const z=[];for(const F of c){const B=uV(F,E.get(F.key).overlayedDocument);B!=null&&z.push(new Po(F.key,B,xI(B.value.mapValue),wr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,h,z,c)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(E,P);return d.documentOverlayCache.saveOverlays(b,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:FI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let h=l.Ru[l.currentUser.toKey()];h||(h=new Jt(Je)),h=h.insert(c,d),l.Ru[l.currentUser.toKey()]=h})(i,s.batchId,n),await tf(i,s.changes),await Tp(i.remoteStore)}catch(s){const a=Yv(s,"Failed to persist write");n.reject(a)}}async function _x(t,e){const n=qe(t);try{const i=await oL(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Eu.get(a);l&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?Tt(l.lu,14607):s.removedDocuments.size>0&&(Tt(l.lu,42227),l.lu=!1))})),await tf(n,i,e)}catch(i){await $l(i)}}function kA(t,e,n){const i=qe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=qe(l);d.onlineState=c;let h=!1;d.queries.forEach(((y,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&Wv(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function QL(t,e,n){const i=qe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let l=new Jt(Ne.comparator);l=l.insert(a,Zn.newNoDocument(a,Oe.min()));const c=it().add(a),d=new vp(Oe.min(),new Map,new Jt(Je),l,c);await _x(i,d),i.du=i.du.remove(a),i.Eu.delete(e),Xv(i)}else await Dy(i.localStore,e,!1).then((()=>Vy(i,e,n))).catch($l)}async function XL(t,e){const n=qe(t),i=e.batch.batchId;try{const s=await sL(n.localStore,e);Tx(n,i,null),Ex(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await tf(n,s)}catch(s){await $l(s)}}async function ZL(t,e,n){const i=qe(t);try{const s=await(function(l,c){const d=qe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(Tt(E!==null,37113),y=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>d.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);Tx(i,e,n),Ex(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await tf(i,s)}catch(s){await $l(s)}}function Ex(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function Tx(t,e,n){const i=qe(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Vy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||Sx(t,i)}))}function Sx(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Xv(t))}function PA(t,e,n){for(const i of n)i instanceof gx?(t.Au.addReference(i.key,e),eO(t,i)):i instanceof yx?(_e(Qv,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||Sx(t,i.key)):Le(19791,{yu:i})}function eO(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(Qv,"New document in limbo: "+n),t.Iu.add(i),Xv(t))}function Xv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Pt.fromString(e)),i=t.mu.next();t.Eu.set(i,new HL(n)),t.du=t.du.insert(n,i),cx(t.remoteStore,new mo(Fr(Pv(n.path)),i,"TargetPurposeLimboResolution",fp.ue))}}async function tf(t,e,n){const i=qe(t),s=[],a=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((h=>{var y;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=zv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(l),i.hu.J_(s),await(async function(d,h){const y=qe(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(T=>ue.forEach(T.Is,(b=>y.persistence.referenceDelegate.addReference(E,T.targetId,b))).next((()=>ue.forEach(T.ds,(b=>y.persistence.referenceDelegate.removeReference(E,T.targetId,b)))))))))}catch(E){if(!jl(E))throw E;_e(Hv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const b=y.Fs.get(T),N=b.snapshotVersion,P=b.withLastLimboFreeSnapshotVersion(N);y.Fs=y.Fs.insert(T,P)}}})(i.localStore,a))}async function tO(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){_e(Qv,"User change. New user:",e.toKey());const i=await ox(n.localStore,e);n.currentUser=e,(function(a,l){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Ee(le.CANCELLED,l))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tf(n,i.Bs)}}function nO(t,e){const n=qe(t),i=n.Eu.get(e);if(i&&i.lu)return it().add(i.key);{let s=it();const a=n.Tu.get(e);if(!a)return s;for(const l of a){const c=n.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function Ax(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_x.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QL.bind(null,e),e.hu.J_=UL.bind(null,e.eventManager),e.hu.pu=FL.bind(null,e.eventManager),e}function iO(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZL.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return rL(this.persistence,new tL,e.initialUser,this.serializer)}Du(e){return new sx(qv.Vi,this.serializer)}bu(e){return new fL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class rO extends Oh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Tt(this.persistence.referenceDelegate instanceof Vh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BV(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new sx((i=>Vh.Vi(i,n)),this.serializer)}}class Ly{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await kL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VL})()}createDatastore(e){const n=_p(e.databaseInfo.databaseId),i=(function(a){return new gL(a)})(e.databaseInfo);return(function(a,l,c,d){return new EL(a,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new SL(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>kA(this.syncEngine,n,0)),(function(){return IA.C()?new IA:new dL})())}createSyncEngine(e,n){return(function(s,a,l,c,d,h,y){const E=new GL(s,a,l,c,d,h);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=qe(s);_e(Ta,"RemoteStore shutting down."),a.Ia.add(5),await ef(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="FirestoreClient";class oO{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{_e(Ro,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_e(Ro,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Yv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Zg(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Ro,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await ox(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{Ao("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Ao("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function VA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aO(t);_e(Ro,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>RA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>RA(e.remoteStore,s))),t._onlineComponents=e}async function aO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Ro,"Using user provided OfflineComponentProvider");try{await Zg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ao("Error using user provided cache. Falling back to memory cache: "+n),await Zg(t,new Oh)}}else _e(Ro,"Using default OfflineComponentProvider"),await Zg(t,new rO(void 0));return t._offlineComponents}async function wx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Ro,"Using user provided OnlineComponentProvider"),await VA(t,t._uninitializedComponentsProvider._online)):(_e(Ro,"Using default OnlineComponentProvider"),await VA(t,new Ly))),t._onlineComponents}function lO(t){return wx(t).then((e=>e.syncEngine))}async function LA(t){const e=await wx(t),n=e.eventManager;return n.onListen=$L.bind(null,e.syncEngine),n.onUnlisten=JL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="firestore.googleapis.com",UA=!0;class FA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cx,this.ssl=UA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:UA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UV)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new pP;switch(i.type){case"firstParty":return new vP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=OA.get(n);i&&(_e("ComponentProvider","Removing Datastore"),OA.delete(n),i.terminate())})(this),Promise.resolve()}}function uO(t,e,n,i={}){var s;t=Eo(t,Sp);const a=As(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(rp(`https://${d}`),sp("Firestore",!0)),l.host!==Cx&&l.host!==d&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!ya(h,c)&&(t._setSettings(h),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=Xn.MOCK_USER;else{y=AC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xn(T)}t._authCredentials=new mP(new mI(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class vn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Wc(n,vn._jsonSchema))return new vn(e,i||null,new Ne(Pt.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:yn("string",vn._jsonSchemaVersion),referencePath:yn("string")};class To extends Jl{constructor(e,n,i){super(e,n,Pv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Ne(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function Yl(t,e,...n){if(t=zt(t),yI("collection","path",e),t instanceof Sp){const i=Pt.fromString(e,...n);return QS(i),new To(t,null,i)}{if(!(t instanceof vn||t instanceof To))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return QS(i),new To(t.firestore,null,i)}}function nf(t,e,...n){if(t=zt(t),arguments.length===1&&(e=xv.newId()),yI("doc","path",e),t instanceof Sp){const i=Pt.fromString(e,...n);return WS(i),new vn(t,null,new Ne(i))}{if(!(t instanceof vn||t instanceof To))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return WS(i),new vn(t.firestore,t instanceof To?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="AsyncQueue";class qA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new lx(this,"async_queue_retry"),this.oc=()=>{const i=Xg();i&&_e(BA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Xg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new fa;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!jl(e))throw e;_e(BA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Es("INTERNAL UNHANDLED ERROR: ",zA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Jv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Le(47125,{hc:zA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function zA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Fl extends Sp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new qA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qA(e),this._firestoreClient=void 0,await e}}}function cO(t,e){const n=typeof t=="object"?t:op(),i=typeof t=="string"?t:xh,s=$c(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=hv("firestore");a&&uO(s,...a)}return s}function Ix(t){if(t._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fO(t),t._firestoreClient}function fO(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,y){return new PP(c,d,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,bx(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new oO(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or($n.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:yn("string",or._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qr._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,qr._jsonSchema))return new qr(e.latitude,e.longitude)}}qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:yn("string",qr._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zr(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:yn("string",zr._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=/^__.*__$/;class hO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class xx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ec:t})}}class e0{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new e0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Uh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Rx(this.Ec)&&dO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class pO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||_p(e)}Dc(e,n,i,s=!1){return new e0({Ec:e,methodName:n,bc:i,path:Gn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t0(t){const e=t._freezeSettings(),n=_p(t._databaseId);return new pO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mO(t,e,n,i,s,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);n0("Data must be an object, but it was:",l,i);const c=Nx(i,l);let d,h;if(a.merge)d=new Fi(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=Oy(e,E,n);if(!l.contains(T))throw new Ee(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Dx(y,T)||y.push(T)}d=new Fi(y),h=l.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=l.fieldTransforms;return new hO(new bi(c),d,h)}class wp extends Zv{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function gO(t,e,n,i){const s=t.Dc(1,e,n);n0("Data must be an object, but it was:",s,i);const a=[],l=bi.empty();ko(i,((d,h)=>{const y=i0(e,d,n);h=zt(h);const E=s.gc(y);if(h instanceof wp)a.push(y);else{const T=rf(h,E);T!=null&&(a.push(y),l.set(y,T))}}));const c=new Fi(a);return new xx(l,c,s.fieldTransforms)}function yO(t,e,n,i,s,a){const l=t.Dc(1,e,n),c=[Oy(e,i,n)],d=[s];if(a.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)c.push(Oy(e,a[T])),d.push(a[T+1]);const h=[],y=bi.empty();for(let T=c.length-1;T>=0;--T)if(!Dx(h,c[T])){const b=c[T];let N=d[T];N=zt(N);const P=l.gc(b);if(N instanceof wp)h.push(b);else{const L=rf(N,P);L!=null&&(h.push(b),y.set(b,L))}}const E=new Fi(h);return new xx(y,E,l.fieldTransforms)}function vO(t,e,n,i=!1){return rf(n,t.Dc(i?4:3,e))}function rf(t,e){if(Mx(t=zt(t)))return n0("Unsupported field value:",e,t),Nx(t,e);if(t instanceof Zv)return(function(i,s){if(!Rx(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let d=rf(c,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=qt.fromDate(i);return{timestampValue:Ph(s.serializer,a)}}if(i instanceof qt){const a=new qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,a)}}if(i instanceof qr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof or)return{bytesValue:QI(s.serializer,i._byteString)};if(i instanceof vn){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof zr)return(function(l,c){return{mapValue:{fields:{[CI]:{stringValue:II},[Rh]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Vv(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${cp(i)}`)})(t,e)}function Nx(t,e){const n={};return EI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,((i,s)=>{const a=rf(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof qr||t instanceof or||t instanceof vn||t instanceof Zv||t instanceof zr)}function n0(t,e,n){if(!Mx(n)||!vI(n)){const i=cp(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Oy(t,e,n){if((e=zt(e))instanceof Ap)return e._internalPath;if(typeof e=="string")return i0(t,e);throw Uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const _O=new RegExp("[~\\*/\\[\\]]");function i0(t,e,n){if(e.search(_O)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ap(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(le.INVALID_ARGUMENT,c+t+d)}function Dx(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Px("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EO extends kx{data(){return super.data()}}function Px(t,e){return typeof e=="string"?i0(t,e):e instanceof Ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}class SO extends r0{}function s0(t,e,...n){let i=[];e instanceof r0&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((d=>d instanceof a0)).length,c=a.filter((d=>d instanceof o0)).length;if(l>1||l>0&&c>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class o0 extends SO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new o0(e,n,i)}_apply(e){const n=this._parse(e);return Vx(e._query,n),new Jl(e.firestore,e.converter,Cy(e._query,n))}_parse(e){const n=t0(e.firestore);return(function(a,l,c,d,h,y,E){let T;if(h.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){$A(E,y);const N=[];for(const P of E)N.push(GA(d,a,P));T={arrayValue:{values:N}}}else T=GA(d,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||$A(E,y),T=vO(c,l,E,y==="in"||y==="not-in");return gn.create(h,y,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class a0 extends r0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new a0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const d of c)Vx(l,d),l=Cy(l,d)})(e._query,n),new Jl(e.firestore,e.converter,Cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function GA(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VI(e)&&n.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pt.fromString(n));if(!Ne.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sA(t,new Ne(i))}if(n instanceof vn)return sA(t,n._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(n)}.`)}function $A(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vx(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AO{convertValue(e,n="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ko(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Rh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((l=>ln(l.doubleValue)));return new zr(a)}convertGeoPoint(e){return new qr(ln(e.latitude),ln(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const n=bo(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pt.fromString(e);Tt(ix(i),9688,{name:e});const s=new Lc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||Es(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends kx{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Px("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:yn("string",da._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class uh extends da{data(e={}){return super.data(e)}}class Il{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ac(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new uh(this._firestore,this._userDataWriter,i.key,i,new ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:bO(c.type),doc:d,oldIndex:h,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:t})}}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:yn("string",Il._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class Lx extends AO{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function CO(t,e,n,...i){t=Eo(t,vn);const s=Eo(t.firestore,Fl),a=t0(s);let l;return l=typeof(e=zt(e))=="string"||e instanceof Ap?yO(a,"updateDoc",t._key,e,n,i):gO(a,"updateDoc",t._key,e),f0(s,[l.toMutation(t._key,wr.exists(!0))])}function l0(t){return f0(Eo(t.firestore,Fl),[new Lv(t._key,wr.none())])}function u0(t,e){const n=Eo(t.firestore,Fl),i=nf(t),s=wO(t.converter,e);return f0(n,[mO(t0(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,wr.exists(!1))]).then((()=>i))}function c0(t,...e){var n,i,s;t=zt(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||HA(e[l])||(a=e[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(HA(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,h,y;if(t instanceof vn)h=Eo(t.firestore,Fl),y=Pv(t._key.path),d={next:E=>{e[l]&&e[l](IO(h,t,E))},error:e[l+1],complete:e[l+2]};else{const E=Eo(t,Jl);h=Eo(E.firestore,Fl),y=E._query;const T=new Lx(h);d={next:b=>{e[l]&&e[l](new Il(h,T,E,b))},error:e[l+1],complete:e[l+2]},TO(t._query)}return(function(T,b,N,P){const L=new sO(P),z=new BL(b,L,N);return T.asyncQueue.enqueueAndForget((async()=>LL(await LA(T),z))),()=>{L.Ou(),T.asyncQueue.enqueueAndForget((async()=>OL(await LA(T),z)))}})(Ix(h),y,c,d)}function f0(t,e){return(function(i,s){const a=new fa;return i.asyncQueue.enqueueAndForget((async()=>WL(await lO(i),s,a))),a.promise})(Ix(t),e)}function IO(t,e,n){const i=n.docs.get(e._key),s=new Lx(t);return new da(t,s,e._key,i,new ac(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Gl=s})(wa),So(new ys("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Fl(new gP(i.getProvider("auth-internal")),new _P(l,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(h.options.projectId,y)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),ar($S,jS,e),ar($S,jS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firebasestorage.googleapis.com",Ux="storageBucket",xO=120*1e3,RO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Gr{constructor(e,n,i=0){super(ey(e),`Firebase Storage: ${n} (${ey(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ey(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function ey(t){return"storage/"+t}function d0(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,t)}function NO(t){return new tn(en.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MO(t){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function DO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,t)}function kO(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function PO(t){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VO(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LO(){return new tn(en.CANCELED,"User canceled the upload/download.")}function OO(t){return new tn(en.INVALID_URL,"Invalid URL '"+t+"'.")}function UO(t){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function FO(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ux+"' property when initializing the app?")}function BO(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qO(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zO(t){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uy(t){return new tn(en.INVALID_ARGUMENT,t)}function Fx(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function HO(t){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _c(t,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yu(t){throw new tn(en.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Bi.makeFromUrl(e,n)}catch{return new Bi(e,"")}if(i.path==="")return i;throw UO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${E}/${y}/b/${s}/o${T}`,"i"),N={bucket:1,path:3},P=n===Ox?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",z=new RegExp(`^https?://${P}/${s}/${L}`,"i"),B=[{regex:c,indices:d,postModify:a},{regex:b,indices:N,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<B.length;K++){const X=B[K],G=X.regex.exec(e);if(G){const I=G[X.indices.bucket];let x=G[X.indices.path];x||(x=""),i=new Bi(I,x),X.postModify(i);break}}if(i==null)throw OO(e);return i}}class GO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e,n){let i=1,s=null,a=null,l=!1,c=0;function d(){return c===2}let h=!1;function y(...L){h||(h=!0,e.apply(null,L))}function E(L){s=setTimeout(()=>{s=null,t(b,d())},L)}function T(){a&&clearTimeout(a)}function b(L,...z){if(h){T();return}if(L){T(),y.call(null,L,...z);return}if(d()||l){T(),y.call(null,L,...z);return}i<64&&(i*=2);let B;c===1?(c=2,B=0):B=(i+Math.random())*1e3,E(B)}let N=!1;function P(L){N||(N=!0,T(),!h&&(s!==null?(L||(c=2),clearTimeout(s),E(0)):L||(c=1)))}return E(0),a=setTimeout(()=>{l=!0,P(!0)},n),P}function jO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){return t!==void 0}function JO(t){return typeof t=="object"&&!Array.isArray(t)}function h0(t){return typeof t=="string"||t instanceof String}function jA(t){return p0()&&t instanceof Blob}function p0(){return typeof Blob<"u"}function KA(t,e,n,i){if(i<e)throw Uy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Uy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Bx(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ha||(ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,i,s,a,l,c,d,h,y,E,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,P)=>{this.resolve_=N,this.reject_=P,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Vd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===ha.NO_ERROR,d=a.getStatus();if(!c||YO(d,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===ha.ABORT;i(!1,new Vd(!1,null,y));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Vd(h,a))})},n=(i,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());KO(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=d0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?Fx():LO();l(d)}else{const d=VO();l(d)}};this.canceled_?n(!1,new Vd(!1,null,!0)):this.backoffId_=$O(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function QO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function XO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function e4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function t4(t,e,n,i,s,a,l=!0,c=!1){const d=Bx(t.urlParams),h=t.url+d,y=Object.assign({},t.headers);return ZO(y,e),QO(y,n),XO(y,a),e4(y,i),new WO(h,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function i4(...t){const e=n4();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(p0())return new Blob(t);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function r4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){if(typeof atob>"u")throw zO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ty{constructor(e,n){this.data=e,this.contentType=n||null}}function qx(t,e){switch(t){case Tr.RAW:return new ty(zx(e));case Tr.BASE64:case Tr.BASE64URL:return new ty(Hx(t,e));case Tr.DATA_URL:return new ty(a4(e),l4(e))}throw d0()}function zx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,l=t.charCodeAt(++n);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function o4(t){let e;try{e=decodeURIComponent(t)}catch{throw _c(Tr.DATA_URL,"Malformed data URL.")}return zx(e)}function Hx(t,e){switch(t){case Tr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=s4(e)}catch(s){throw s.message.includes("polyfill")?s:_c(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class Gx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _c(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=u4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function a4(t){const e=new Gx(t);return e.base64?Hx(Tr.BASE64,e.rest):o4(e.rest)}function l4(t){return new Gx(t).contentType}function u4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){let i=0,s="";jA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(jA(this.data_)){const i=this.data_,s=r4(i,e,n);return s===null?null:new co(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new co(i,!0)}}static getBlob(...e){if(p0()){const n=e.map(i=>i instanceof co?i.data_:i);return new co(i4.apply(null,n))}else{const n=e.map(l=>h0(l)?qx(Tr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new co(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){let e;try{e=JSON.parse(t)}catch{return null}return JO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function f4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function jx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t,e){return e}class di{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||d4}}let Ld=null;function h4(t){return!h0(t)||t.length<2?t:jx(t)}function Kx(){if(Ld)return Ld;const t=[];t.push(new di("bucket")),t.push(new di("generation")),t.push(new di("metageneration")),t.push(new di("name","fullPath",!0));function e(a,l){return h4(l)}const n=new di("name");n.xform=e,t.push(n);function i(a,l){return l!==void 0?Number(l):l}const s=new di("size");return s.xform=i,t.push(s),t.push(new di("timeCreated")),t.push(new di("updated")),t.push(new di("md5Hash",null,!0)),t.push(new di("cacheControl",null,!0)),t.push(new di("contentDisposition",null,!0)),t.push(new di("contentEncoding",null,!0)),t.push(new di("contentLanguage",null,!0)),t.push(new di("contentType",null,!0)),t.push(new di("metadata","customMetadata",!0)),Ld=t,Ld}function p4(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new Bi(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function m4(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];i[l.local]=l.xform(i,e[l.server])}return p4(i,t),i}function Jx(t,e,n){const i=$x(e);return i===null?null:m4(t,i,n)}function g4(t,e,n,i){const s=$x(e);if(s===null||!h0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(h=>{const y=t.bucket,E=t.fullPath,T="/b/"+l(y)+"/o/"+l(E),b=m0(T,n,i),N=Bx({alt:"media",token:h});return b+N})[0]}function y4(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Yx{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){if(!t)throw d0()}function v4(t,e){function n(i,s){const a=Jx(t,s,e);return Wx(a!==null),a}return n}function _4(t,e){function n(i,s){const a=Jx(t,s,e);return Wx(a!==null),g4(a,s,t.host,t._protocol)}return n}function Qx(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=kO():s=DO():n.getStatus()===402?s=MO(t.bucket):n.getStatus()===403?s=PO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function E4(t){const e=Qx(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=NO(t.path)),a.serverResponse=s.serverResponse,a}return n}function T4(t,e,n){const i=e.fullServerUrl(),s=m0(i,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new Yx(s,a,_4(t,n),l);return c.errorHandler=E4(e),c}function S4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function A4(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=S4(null,e)),i}function w4(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let K=0;K<2;K++)B=B+Math.random().toString().slice(2);return B}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=A4(e,i,s),y=y4(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",b=co.getBlob(E,i,T);if(b===null)throw BO();const N={name:h.fullPath},P=m0(a,t.host,t._protocol),L="POST",z=t.maxUploadRetryTime,F=new Yx(P,L,v4(t,n),z);return F.urlParams=N,F.headers=l,F.body=b.uploadData(),F.errorHandler=Qx(e),F}class b4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Yu("cannot .send() more than once");if(As(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class C4 extends b4{initXhr(){this.xhr_.responseType="text"}}function Xx(){return new C4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this._service=e,n instanceof Bi?this._location=n:this._location=Bi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sa(e,n)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jx(this._location.path)}get storage(){return this._service}get parent(){const e=c4(this._location.path);if(e===null)return null;const n=new Bi(this._location.bucket,e);return new Sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw HO(e)}}function I4(t,e,n){t._throwIfRoot("uploadBytes");const i=w4(t.storage,t._location,Kx(),new co(e,!0),n);return t.storage.makeRequestWithTokens(i,Xx).then(s=>({metadata:s,ref:t}))}function x4(t,e,n=Tr.RAW,i){t._throwIfRoot("uploadString");const s=qx(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),I4(t,s.data,a)}function R4(t){t._throwIfRoot("getDownloadURL");const e=T4(t.storage,t._location,Kx());return t.storage.makeRequestWithTokens(e,Xx).then(n=>{if(n===null)throw qO();return n})}function N4(t,e){const n=f4(t._location.path,e),i=new Bi(t._location.bucket,n);return new Sa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){return/^[A-Za-z]+:\/\//.test(t)}function D4(t,e){return new Sa(t,e)}function Zx(t,e){if(t instanceof g0){const n=t;if(n._bucket==null)throw FO();const i=new Sa(n,n._bucket);return e!=null?Zx(i,e):i}else return e!==void 0?N4(t,e):t}function k4(t,e){if(e&&M4(e)){if(t instanceof g0)return D4(t,e);throw Uy("To use ref(service, url), the first argument must be a Storage instance.")}else return Zx(t,e)}function JA(t,e){const n=e==null?void 0:e[Ux];return n==null?null:Bi.makeFromBucketSpec(n,t)}function P4(t,e,n,i={}){t.host=`${e}:${n}`;const s=As(e);s&&(rp(`https://${t.host}/b`),sp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:AC(a,t.app.options.projectId))}class g0{constructor(e,n,i,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=Ox,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xO,this._maxUploadRetryTime=RO,this._requests=new Set,s!=null?this._bucket=Bi.makeFromBucketSpec(s,this._host):this._bucket=JA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bi.makeFromBucketSpec(this._url,e):this._bucket=JA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sa(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new GO(Fx());{const l=t4(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const YA="@firebase/storage",WA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="storage";function V4(t,e,n,i){return t=zt(t),x4(t,e,n,i)}function L4(t){return t=zt(t),R4(t)}function O4(t,e){return t=zt(t),k4(t,e)}function U4(t=op(),e){t=zt(t);const i=$c(t,eR).getImmediate({identifier:e}),s=hv("storage");return s&&F4(i,...s),i}function F4(t,e,n,i={}){P4(t,e,n,i)}function B4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new g0(n,i,s,e,wa)}function q4(){So(new ys(eR,B4,"PUBLIC").setMultipleInstances(!0)),ar(YA,WA,""),ar(YA,WA,"esm2017")}q4();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||i.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="us-central1";class H4{constructor(e,n,i,s,a=Fy,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new z4(e,n,i,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Fy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function G4(t,e,n){const i=As(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(rp(t.emulatorOrigin),sp("Functions",!0))}const QA="@firebase/functions",XA="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="auth-internal",j4="app-check-internal",K4="messaging-internal";function J4(t){const e=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider($4),l=n.getProvider(K4),c=n.getProvider(j4);return new H4(s,a,l,c,i)};So(new ys(tR,e,"PUBLIC").setMultipleInstances(!0)),ar(QA,XA,t),ar(QA,XA,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t=op(),e=Fy){const i=$c(zt(t),tR).getImmediate({identifier:e}),s=hv("functions");return s&&W4(i,...s),i}function W4(t,e,n){G4(zt(t),e,n)}J4();const Q4={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},bp=CC(Q4),lc=cP(bp),X4=new hs,$r=cO(bp),Z4=U4(bp);Y4(bp);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eU,tU;function nU(){return{geminiUrl:eU,vertexUrl:tU}}function iU(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=nU();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const y=d[h];g(y,e.slice(a+1),n[h])}else for(const h of d)g(h,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];g(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function rU(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}By(t,s,a,0,l)}}function By(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])By(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,y]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);g(l,E,y)}for(const h of c)delete l[h]}}else{const l=t;a in l&&By(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sU(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function oU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],lU(l)),e}function aU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],uU(l)),e}function lU(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>cU(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function uU(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>fU(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function cU(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],yU(n)),e}function fU(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],vU(n)),e}function dU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function hU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function pU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],mU(l)),e}function mU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function nR(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],gU(l)),e}function gU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function yU(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],y0(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function vU(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],y0(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ZA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ZA||(ZA={}));var ew;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ew||(ew={}));var tw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(tw||(tw={}));var Be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Be||(Be={}));var nw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nw||(nw={}));var iw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(iw||(iw={}));var rw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rw||(rw={}));var sw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(sw||(sw={}));var ow;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ow||(ow={}));var aw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(aw||(aw={}));var lw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lw||(lw={}));var uw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(uw||(uw={}));var cw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(cw||(cw={}));var fw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(fw||(fw={}));var dw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(dw||(dw={}));var hw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hw||(hw={}));var pw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(pw||(pw={}));var mw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(mw||(mw={}));var gw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(gw||(gw={}));var Fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Fh||(Fh={}));var yw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yw||(yw={}));var vw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(vw||(vw={}));var _w;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_w||(_w={}));var qy;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qy||(qy={}));var Ew;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ew||(Ew={}));var Tw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Tw||(Tw={}));var Sw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Sw||(Sw={}));var Aw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Aw||(Aw={}));var ww;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ww||(ww={}));var bw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bw||(bw={}));var Cw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Cw||(Cw={}));var Iw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Iw||(Iw={}));var xw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xw||(xw={}));var Rw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Rw||(Rw={}));var Nw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nw||(Nw={}));var Mw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Mw||(Mw={}));var Dw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Dw||(Dw={}));var kw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kw||(kw={}));var Pw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Pw||(Pw={}));var Vw;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Vw||(Vw={}));var Lw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Lw||(Lw={}));var Ow;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ow||(Ow={}));var Uw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Uw||(Uw={}));var Fw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Fw||(Fw={}));var Bw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Bw||(Bw={}));var qw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(qw||(qw={}));var zw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zw||(zw={}));var Hw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Hw||(Hw={}));var Gw;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Gw||(Gw={}));var $w;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($w||($w={}));var jw;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jw||(jw={}));var Kw;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Kw||(Kw={}));var Jw;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jw||(Jw={}));var Yw;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Yw||(Yw={}));var Tl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Tl||(Tl={}));class zy{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wu{get text(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,N]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(N!==null||N!==void 0)&&E.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,b]of Object.entries(E))T!=="inlineData"&&(b!==null||b!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class Ww{}class Qw{}class _U{}class EU{}class TU{}class SU{}class Xw{}class Zw{}class eb{}class AU{}class Bh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Bh;let s;const a=e;return n?s=aU(a):s=oU(a),Object.assign(i,s),i}}class tb{}class nb{}class ib{}class wU{}class bU{}class CU{}class v0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new v0,a=pU(e);return Object.assign(i,a),i}}class IU{}class xU{}class RU{}class rb{}class NU{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class MU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class _0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new _0,a=nR(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function iR(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function rR(t){return Array.isArray(t)?t.map(e=>qh(e)):[qh(t)]}function qh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function sR(t){const e=qh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oR(t){const e=qh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sb(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function aR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>sb(e)):[sb(t)]}function Hy(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ob(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ab(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ei(t){if(t==null)throw new Error("ContentUnion is required");return Hy(t)?t:{role:"user",parts:aR(t)}}function E0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ei(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ei(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ei(n)):[ei(e)]}function lr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ob(t)||ab(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ei(t)]}const e=[],n=[],i=Hy(t[0]);for(const s of t){const a=Hy(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(ob(s)||ab(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:aR(n)}),e}function DU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Be).includes(n[0].toUpperCase())?n[0].toUpperCase():Be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Be).includes(i.toUpperCase())?i.toUpperCase():Be.TYPE_UNSPECIFIED})}}function xl(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&DU(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Be).includes(c.toUpperCase())?c.toUpperCase():Be.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=xl(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(xl(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,y]of Object.entries(c))d[h]=xl(y);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function T0(t){return xl(t)}function S0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function A0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xl(e.response));return t}function Ql(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function kU(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function bs(t,e){if(typeof e!="string")throw new Error("name must be a string");return kU(t,e,"cachedContents")}function lR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vo(t){return y0(t)}function PU(t){return t!=null&&typeof t=="object"&&"name"in t}function VU(t){return t!=null&&typeof t=="object"&&"video"in t}function LU(t){return t!=null&&typeof t=="object"&&"uri"in t}function uR(t){var e;let n;if(PU(t)&&(n=t.name),!(LU(t)&&(n=t.uri,n===void 0))&&!(VU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function cR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function fR(t){for(const e of["models","tunedModels","publisherModels"])if(OU(t,e))return t[e];return[]}function OU(t,e){return t!==null&&typeof t=="object"&&e in t}function UU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function FU(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=UU(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function dR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function BU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function hR(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Xl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function pR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qU(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>T6(l))),g(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function zU(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function HU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ch(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&g(e,["state"],pR(s));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&g(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&g(e,["dest"],qU(hR(h))),e}function Gy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["state"]);s!=null&&g(e,["state"],pR(s));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["createTime"]);l!=null&&g(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(t,["model"]);y!=null&&g(e,["model"],y);const E=p(t,["inputConfig"]);E!=null&&g(e,["src"],GU(E));const T=p(t,["outputConfig"]);T!=null&&g(e,["dest"],zU(hR(T)));const b=p(t,["completionStats"]);return b!=null&&g(e,["completionStats"],b),e}function GU(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function $U(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>E6(t,l))),g(n,["requests","requests"],a)}return n}function jU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function KU(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function JU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function YU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function WU(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],QU(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(b=>b)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function QU(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function mR(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>x6(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function XU(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZU(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&g(e,["outputConfig"],HU(BU(s))),n}function lb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],$U(t,dR(t,s)));const a=p(e,["config"]);return a!=null&&XU(a,n),n}function e6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["inputConfig"],jU(dR(t,s)));const a=p(e,["config"]);return a!=null&&ZU(a,n),n}function t6(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function n6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],u6(t,s));const a=p(e,["config"]);return a!=null&&t6(a,n),n}function i6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function r6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function s6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function o6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function a6(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=E0(t,i);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(g(n,["_self"],l6(s,n)),rU(n,{"requests[].*":"requests[].request.*"})),n}function l6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function u6(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&g(n,["requests"],a6(t,s)),n}function c6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function f6(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d6(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],mR(ei(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&g(i,["seed"],P);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],T0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(U=>R6(U))),g(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Ql(K);Array.isArray(O)&&(O=O.map(U=>M6(Wl(U)))),g(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],N6(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],bs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],S0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const D=p(e,["imageConfig"]);return D!=null&&g(i,["imageConfig"],_6(D)),i}function p6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>WU(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function m6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function g6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function y6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function v6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function _6(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function E6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=lr(s);Array.isArray(c)&&(c=c.map(d=>mR(d))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(n,["request","generationConfig"],h6(t,l,p(n,["request"],{}))),n}function T6(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],p6(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function S6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function A6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function w6(t){const e={},n=p(t,["config"]);return n!=null&&S6(n,e),e}function b6(t){const e={},n=p(t,["config"]);return n!=null&&A6(n,e),e}function C6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ch(l))),g(e,["batchJobs"],a)}return e}function I6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Gy(l))),g(e,["batchJobs"],a)}return e}function x6(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],c6(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],f6(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],KU(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function R6(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function N6(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],d6(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function M6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],y6(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],v6(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ss;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ss||(Ss={}));class Ia{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6 extends ws{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=lb(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const y of d){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=T,E.request=b}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=e6(this.apiClient,e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Gy(y))}else{const h=lb(this.apiClient,e);return c=ye("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ch(y))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=n6(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ch(d))}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=g6(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Gy(y))}else{const h=m6(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ch(y))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=YU(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=JU(this.apiClient,e);l=ye("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=b6(e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=I6(y),T=new rb;return Object.assign(T,E),T})}else{const h=w6(e);return c=ye("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=C6(y),T=new rb;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=r6(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>o6(y))}else{const h=i6(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>s6(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k6(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ub(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>n3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function P6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let y=lr(l);Array.isArray(y)&&(y=y.map(E=>ub(E))),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],ub(ei(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>r3(E))),g(e,["tools"],y)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],i3(h)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function V6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let E=lr(l);Array.isArray(E)&&(E=E.map(T=>T)),g(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],ei(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>s3(T))),g(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(t,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),n}function L6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],iR(t,i));const s=p(e,["config"]);return s!=null&&P6(s,n),n}function O6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],iR(t,i));const s=p(e,["config"]);return s!=null&&V6(s,n),n}function U6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function F6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function B6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function q6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function z6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function H6(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function G6(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function j6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function K6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function J6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Y6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function W6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function Q6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function X6(t){const e={},n=p(t,["config"]);return n!=null&&W6(n,e),e}function Z6(t){const e={},n=p(t,["config"]);return n!=null&&Q6(n,e),e}function e3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function t3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function n3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],z6(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],H6(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],k6(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function i3(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],G6(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function r3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],J6(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],Y6(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function s3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>$6(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function o3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function a3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function l3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const s=p(e,["config"]);return s!=null&&o3(s,n),n}function u3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const s=p(e,["config"]);return s!=null&&a3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c3 extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=O6(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=L6(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=K6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=j6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=F6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=q6(y),T=new nb;return Object.assign(T,E),T})}else{const h=U6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=B6(y),T=new nb;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=u3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=l3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Z6(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=t3(y),T=new ib;return Object.assign(T,E),T})}else{const h=X6(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=e3(y),T=new ib;return Object.assign(T,E),T})}}}function cb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function Rl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(b){return function(N){return Promise.resolve(N).then(b,E)}}function c(b,N){i[b]&&(s[b]=function(P){return new Promise(function(L,z){a.push([b,P,L,z])>1||d(b,P)})},N&&(s[b]=N(s[b])))}function d(b,N){try{h(i[b](N))}catch(P){T(a[0][3],P)}}function h(b){b.value instanceof Bt?Promise.resolve(b.value.v).then(y,E):T(a[0][2],b)}function y(b){d("next",b)}function E(b){d("throw",b)}function T(b,N){b(N),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Ec(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof cb=="function"?cb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:gR(n)}function gR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function d3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!gR(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class h3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new p3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class p3{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),d3(a)}async sendMessage(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const d=await s,h=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(E))!==null&&c!==void 0?c:[]);const b=h?[h]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?fb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Rl(this,arguments,function*(){var l,c,d,h;const y=[];try{for(var E=!0,T=Ec(e),b;b=yield Bt(T.next()),l=b.done,!l;E=!0){h=b.value,E=!1;const N=h;if(f3(N)){const P=(s=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;P!==void 0&&y.push(P)}yield yield Bt(N)}}catch(N){c={error:N}}finally{try{!E&&!l&&(d=T.return)&&(yield Bt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,y)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...fb(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m3(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function g3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function y3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],uR(n)),e}function v3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function _3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],uR(n)),e}function E3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function T3(t){const e={},n=p(t,["config"]);return n!=null&&E3(n,e),e}function S3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A3 extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T3(e);return a=ye("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=S3(d),y=new IU;return Object.assign(y,h),y})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=m3(e);return a=ye("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=g3(d),y=new xU;return Object.assign(y,h),y})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=y3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=v3(d),y=new RU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fh(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function w3(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>B3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function b3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function C3(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function x3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const b=p(t,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const N=p(t,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const P=p(t,["responseSchema"]);P!=null&&g(e,["responseSchema"],P);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const z=p(t,["seed"]);z!=null&&g(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],yR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const K=p(t,["temperature"]);K!=null&&g(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function R3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function N3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function M3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],A0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],w3(ei(N)));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>z3(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],q3(L));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function D3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],x3(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],yR(A0(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],ei(N));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>H3(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],L);const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function k3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],M3(s,n)),n}function P3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],D3(s,n)),n}function V3(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function L3(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["weightedPrompts"],i)}return e}function O3(t){const e={},n=p(t,["media"]);if(n!=null){let h=rR(n);Array.isArray(h)&&(h=h.map(y=>fh(y))),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],fh(oR(i)));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],fh(sR(a)));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function U3(t){const e={},n=p(t,["media"]);if(n!=null){let h=rR(n);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],oR(i));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],sR(a));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function F3(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&g(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],G3(l));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&g(e,["sessionResumptionUpdate"],d),e}function B3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],b3(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],C3(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],fh(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function q3(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function z3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],R3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],N3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function H3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>I3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function G3(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&g(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(N=>N)),g(e,["promptTokensDetails"],b)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(N=>N)),g(e,["cacheTokensDetails"],b)}const y=p(t,["candidatesTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(N=>N)),g(e,["responseTokensDetails"],b)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(N=>N)),g(e,["toolUsePromptTokensDetails"],b)}const T=p(t,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $3(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function j3(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],K3(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(b=>b)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function K3(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function J3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let a=lr(s);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["contents"],a)}return n}function Y3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["tokensInfo"],s)}return e}function W3(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],Q3(i)),e}function Q3(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Ip(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>oF(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function X3(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function Z3(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function e5(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],ei(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>SR(c))),g(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],$5(a)),n}function t5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>Ip(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&Z3(a),n}function n5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&e5(a,n),n}function i5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&g(e,["cachedContentTokenCount"],s),e}function r5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function s5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function o5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function a5(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function l5(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function u5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const b=p(t,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const N=p(t,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const P=p(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&g(e,["parameters","outputOptions","compressionQuality"],P);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const z=p(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const F=p(t,["editMode"]);e!==void 0&&F!=null&&g(e,["parameters","editMode"],F);const B=p(t,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),n}function c5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>dF(d))),g(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&u5(l,n),n}function f5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>xp(a))),g(e,["generatedImages"],s)}return e}function d5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function h5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function p5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=E0(t,s);Array.isArray(c)&&(c=c.map(d=>d)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&d5(a,n);const l=p(e,["model"]);return l!==void 0&&g(n,["requests[]","model"],gt(t,l)),n}function m5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=E0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&h5(a,n),n}function g5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function y5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>W3(l))),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function v5(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function _5(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function E5(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function T5(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S5(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function A5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],Ip(ei(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&g(i,["seed"],P);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],T0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(U=>hF(U))),g(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Ql(K);Array.isArray(O)&&(O=O.map(U=>EF(Wl(U)))),g(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],_F(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],bs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],S0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const D=p(e,["imageConfig"]);return D!=null&&g(i,["imageConfig"],W5(D)),i}function w5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],ei(s));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const b=p(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&g(i,["seed"],P);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],T0(z));const F=p(e,["responseJsonSchema"]);F!=null&&g(i,["responseJsonSchema"],F);const B=p(e,["routingConfig"]);B!=null&&g(i,["routingConfig"],B);const K=p(e,["modelSelectionConfig"]);K!=null&&g(i,["modelConfig"],K);const X=p(e,["safetySettings"]);if(n!==void 0&&X!=null){let ee=X;Array.isArray(ee)&&(ee=ee.map(ce=>ce)),g(n,["safetySettings"],ee)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let ee=Ql(G);Array.isArray(ee)&&(ee=ee.map(ce=>SR(Wl(ce)))),g(n,["tools"],ee)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&g(n,["toolConfig"],I);const x=p(e,["labels"]);n!==void 0&&x!=null&&g(n,["labels"],x);const R=p(e,["cachedContent"]);n!==void 0&&R!=null&&g(n,["cachedContent"],bs(t,R));const V=p(e,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const D=p(e,["mediaResolution"]);D!=null&&g(i,["mediaResolution"],D);const O=p(e,["speechConfig"]);O!=null&&g(i,["speechConfig"],TR(S0(O)));const U=p(e,["audioTimestamp"]);U!=null&&g(i,["audioTimestamp"],U);const be=p(e,["thinkingConfig"]);be!=null&&g(i,["thinkingConfig"],be);const ve=p(e,["imageConfig"]);return ve!=null&&g(i,["imageConfig"],Q5(ve)),i}function db(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>Ip(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],A5(t,a,n)),n}function hb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],w5(t,a,n)),n}function pb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>j3(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function mb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function b5(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&g(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(t,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=p(t,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function C5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const b=p(t,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const N=p(t,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const P=p(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&g(e,["parameters","outputOptions","compressionQuality"],P);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const z=p(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&g(e,["parameters","sampleImageSize"],F);const B=p(t,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),n}function I5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&b5(a,n),n}function x5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&C5(a,n),n}function R5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>q5(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],_R(s)),e}function N5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>xp(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],ER(s)),e}function M5(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&g(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&g(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(t,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Rp(y));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(b=>kF(b))),g(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function D5(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const b=p(t,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const N=p(t,["generateAudio"]);e!==void 0&&N!=null&&g(e,["parameters","generateAudio"],N);const P=p(t,["lastFrame"]);e!==void 0&&P!=null&&g(e,["instances[0]","lastFrame"],Cr(P));const L=p(t,["referenceImages"]);if(e!==void 0&&L!=null){let B=L;Array.isArray(B)&&(B=B.map(K=>PF(K))),g(e,["instances[0]","referenceImages"],B)}const z=p(t,["mask"]);e!==void 0&&z!=null&&g(e,["instances[0]","mask"],DF(z));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&g(e,["parameters","compressionQuality"],F),n}function k5(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],O5(l)),e}function P5(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],U5(l)),e}function V5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Rp(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],AR(l));const c=p(e,["source"]);c!=null&&F5(c,n);const d=p(e,["config"]);return d!=null&&M5(d,n),n}function L5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Cr(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],wR(l));const c=p(e,["source"]);c!=null&&B5(c,n);const d=p(e,["config"]);return d!=null&&D5(d,n),n}function O5(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>H5(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function U5(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>G5(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function F5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Rp(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],AR(a)),n}function B5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Cr(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],wR(a)),n}function q5(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],X5(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&g(e,["safetyAttributes"],_R(s)),e}function xp(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],vR(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&g(e,["safetyAttributes"],ER(s));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function z5(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],vR(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["labels"],s)}return e}function H5(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],NF(n)),e}function G5(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],MF(n)),e}function $5(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const b=p(t,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const N=p(t,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const P=p(t,["responseSchema"]);P!=null&&g(e,["responseSchema"],P);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const z=p(t,["seed"]);z!=null&&g(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],TR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const K=p(t,["temperature"]);K!=null&&g(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function K5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function J5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function Y5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function W5(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Q5(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const s=p(t,["outputMimeType"]);s!=null&&g(e,["imageOutputOptions","mimeType"],s);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function X5(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Vo(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vR(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Vo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Rp(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Vo(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Cr(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Vo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Z5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],cR(t,c)),i}function eF(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],cR(t,c)),i}function tF(t,e){const n={},i=p(e,["config"]);return i!=null&&Z5(t,i,n),n}function nF(t,e){const n={},i=p(e,["config"]);return i!=null&&eF(t,i,n),n}function iF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=fR(s);Array.isArray(a)&&(a=a.map(l=>$y(l))),g(e,["models"],a)}return e}function rF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=fR(s);Array.isArray(a)&&(a=a.map(l=>jy(l))),g(e,["models"],a)}return e}function sF(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&g(e,["dilation"],s),e}function $y(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const l=p(t,["_self"]);l!=null&&g(e,["tunedModelInfo"],TF(l));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&g(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&g(e,["supportedActions"],h);const y=p(t,["temperature"]);y!=null&&g(e,["temperature"],y);const E=p(t,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const T=p(t,["topP"]);T!=null&&g(e,["topP"],T);const b=p(t,["topK"]);b!=null&&g(e,["topK"],b);const N=p(t,["thinking"]);return N!=null&&g(e,["thinking"],N),e}function jy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>v5(T))),g(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const d=p(t,["_self"]);d!=null&&g(e,["tunedModelInfo"],SF(d));const h=p(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(t,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(T=>T)),g(e,["checkpoints"],E)}return e}function oF(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],_5(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],E5(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],$3(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function aF(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],Cr(n)),e}function lF(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&g(e,["parameters","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const b=p(t,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),n}function uF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&fF(s,n);const a=p(e,["config"]);return a!=null&&lF(a,n),n}function cF(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>xp(s))),g(e,["generatedImages"],i)}return e}function fF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&g(e,["instances[0]","personImage","image"],Cr(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>aF(c))),g(e,["instances[0]","productImages"],l)}return n}function dF(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],Cr(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&g(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],sF(a));const l=p(t,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],X3(l));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&g(e,["subjectImageConfig"],d),e}function _R(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function ER(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function hF(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function pF(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],Cr(n)),e}function mF(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&g(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&g(e,["labels"],d),n}function gF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&vF(s,n);const a=p(e,["config"]);return a!=null&&mF(a,n),n}function yF(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>z5(s))),g(e,["generatedMasks"],i)}return e}function vF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Cr(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],pF(a)),n}function TR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function _F(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],T5(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function EF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],J5(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],Y5(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function SR(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>S5(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function TF(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function SF(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function AF(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function wF(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function bF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],gt(t,i));const s=p(e,["config"]);return s!=null&&AF(s,n),n}function CF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&wF(s,n),n}function IF(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&g(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const b=p(t,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),n}function xF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["image"]);s!=null&&g(n,["instances[0]","image"],Cr(s));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&IF(l,n),n}function RF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>xp(a))),g(e,["generatedImages"],s)}return e}function NF(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Vo(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function MF(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Vo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function DF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],Cr(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function kF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Rp(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function PF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Cr(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function AR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Vo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["encoding"],s),e}function wR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Vo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VF="Content-Type",LF="X-Server-Timeout",OF="User-Agent",Ky="x-goog-api-client",UF="1.30.0",FF=`google-genai-sdk/${UF}`,BF="v1beta1",qF="v1beta",gb=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class zF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:BF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qF,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&HF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await yb(s),new zy(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await yb(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Rl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Bt(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),b=T.status,N=T.code,P=`got status: ${b}. ${JSON.stringify(E)}`;if(N>=400&&N<600)throw new Cp({message:P,status:N})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let y=l.match(gb);for(;y;){const E=y[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Bt(new zy(T)),l=l.slice(y[0].length),y=l.match(gb)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=FF+" "+this.clientOptions.userAgentExtra;return e[OF]=n,e[Ky]=n,e[VF]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(LF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),y=ye("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function yb(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Cp({message:s,status:n}):new Error(s)}}function HF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],y=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[d]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GF="mcp_used/unknown";let $F=!1;function bR(t){for(const e of t)if(jF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $F}function CR(t){var e;const n=(e=t[Ky])!==null&&e!==void 0?e:"";t[Ky]=(n+` ${GF}`).trimStart()}function jF(t){return t!==null&&typeof t=="object"&&t instanceof w0}function KF(t,e=100){return Rl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield Bt(t.listTools({cursor:i}));for(const l of a.tools)yield yield Bt(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class w0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new w0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var c=!0,d=(n=void 0,Ec(KF(y))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),FU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JF(t,e,n){const i=new MU;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class YF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=XF(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(B=>{h=B}),E=e.callbacks,T=function(){h({})},b=this.apiClient,N={onopen:T,onmessage:B=>{JF(b,E.onmessage,B)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(B){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(B){}},P=this.webSocketFactory.create(d,QF(l),N);P.connect(),await y;const F={setup:{model:gt(this.apiClient,e.model)}};return P.send(JSON.stringify(F)),new WF(P,this.apiClient)}}class WF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=L3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=V3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Tl.PLAY)}pause(){this.sendPlaybackControl(Tl.PAUSE)}stop(){this.sendPlaybackControl(Tl.STOP)}resetContext(){this.sendPlaybackControl(Tl.RESET_CONTEXT)}close(){this.conn.close()}}function QF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function XF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e9(t,e,n){const i=new NU;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=F3(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class t9{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new YF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&bR(e.config.tools)&&CR(E);const T=s9(E);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const R=this.apiClient.getApiKey();let V="BidiGenerateContent",D="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",D="access_token"),y=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${D}=${R}`}let b=()=>{};const N=new Promise(R=>{b=R}),P=e.callbacks,L=function(){var R;(R=P==null?void 0:P.onopen)===null||R===void 0||R.call(P),b({})},z=this.apiClient,F={onopen:L,onmessage:R=>{e9(z,P.onmessage,R)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(R){}},B=this.webSocketFactory.create(y,r9(T),F);B.connect(),await N;let K=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const R=this.apiClient.getProject(),V=this.apiClient.getLocation();K=`projects/${R}/locations/${V}/`+K}let X={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fh.AUDIO]}:e.config.responseModalities=[Fh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const R of G)if(this.isCallableTool(R)){const V=R;I.push(await V.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const x={model:K,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=P3(this.apiClient,x):X=k3(this.apiClient,x),delete X.config,B.send(JSON.stringify(X)),new i9(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n9={turnComplete:!0};class i9{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=lr(n.turns),e.isVertexAI()||(i=i.map(s=>Ip(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(ZF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},n9),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:U3(e)}:n={realtimeInput:O3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function r9(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function s9(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vb=10;function _b(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Nl(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Nl(t){return"callTool"in t&&typeof t.callTool=="function"}function o9(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Nl(s)))!==null&&i!==void 0?i:!1}function Eb(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Nl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function Tb(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a9 extends ws{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!o9(n)||_b(n.config))return await this.generateContentInternal(d);const h=Eb(n);if(h.length>0){const P=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let y,E;const T=lr(d.contents),b=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:vb;let N=0;for(;N<b&&(y=await this.generateContentInternal(d),!(!y.functionCalls||y.functionCalls.length===0));){const P=y.candidates[0].content,L=[];for(const z of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Nl(z)){const B=await z.callTool(y.functionCalls);L.push(...B)}N++,E={role:"user",parts:L},d.contents=lr(d.contents),d.contents.push(P),d.contents.push(E),Tb(d.config)&&(T.push(P),T.push(E))}return Tb(d.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async n=>{var i,s,a,l,c;if(this.maybeMoveToResponseJsonSchem(n),_b(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const d=Eb(n);if(d.length>0){const E=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ia(Ss.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>Nl(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&bR(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),CR(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Nl(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:vb;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,y,E){var T,b;return Rl(this,arguments,function*(){for(var N,P,L,z;c<a;){l&&(c++,l=!1);const X=yield Bt(h.processParamsMaybeAddMcpUsage(E)),G=yield Bt(h.generateContentStreamInternal(X)),I=[],x=[];try{for(var F=!0,B=(P=void 0,Ec(G)),K;K=yield Bt(B.next()),N=K.done,!N;F=!0){z=K.value,F=!1;const R=z;if(yield yield Bt(R),R.candidates&&(!((T=R.candidates[0])===null||T===void 0)&&T.content)){x.push(R.candidates[0].content);for(const V of(b=R.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(V.functionCall.name)){const D=yield Bt(y.get(V.functionCall.name).callTool([V.functionCall]));I.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(R){P={error:R}}finally{try{!F&&!N&&(L=B.return)&&(yield Bt(L.call(B)))}finally{if(P)throw P.error}}if(I.length>0){l=!0;const R=new Wu;R.candidates=[{content:{role:"user",parts:I}}],yield yield Bt(R);const V=[];V.push(...x),V.push({role:"user",parts:I});const D=lr(E.contents).concat(V);E.contents=D}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=hb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=mb(y),T=new Wu;return Object.assign(T,E),T})}else{const h=db(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=pb(y),T=new Wu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=hb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,b,N,P;try{for(var L=!0,z=Ec(E),F;F=yield Bt(z.next()),T=F.done,!T;L=!0){P=F.value,L=!1;const B=P,K=mb(yield Bt(B.json()));K.sdkHttpResponse={headers:B.headers};const X=new Wu;Object.assign(X,K),yield yield Bt(X)}}catch(B){b={error:B}}finally{try{!L&&!T&&(N=z.return)&&(yield Bt(N.call(z)))}finally{if(b)throw b.error}}})})}else{const h=db(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,b,N,P;try{for(var L=!0,z=Ec(E),F;F=yield Bt(z.next()),T=F.done,!T;L=!0){P=F.value,L=!1;const B=P,K=pb(yield Bt(B.json()));K.sdkHttpResponse={headers:B.headers};const X=new Wu;Object.assign(X,K),yield yield Bt(X)}}catch(B){b={error:B}}finally{try{!L&&!T&&(N=z.return)&&(yield Bt(N.call(z)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=m5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=y5(y),T=new Ww;return Object.assign(T,E),T})}else{const h=p5(this.apiClient,e);return c=ye("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=g5(y),T=new Ww;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=x5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=N5(y),T=new Qw;return Object.assign(T,E),T})}else{const h=I5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=R5(y),T=new Qw;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=c5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=f5(d),y=new _U;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=xF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=RF(d),y=new EU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=uF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=cF(d),y=new TU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=gF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=yF(d),y=new SU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=K5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>jy(y))}else{const h=j5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>$y(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=nF(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=rF(y),T=new Xw;return Object.assign(T,E),T})}else{const h=tF(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=iF(y),T=new Xw;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=CF(this.apiClient,e);return c=ye("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>jy(y))}else{const h=bF(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>$y(y))}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=o5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=l5(y),T=new Zw;return Object.assign(T,E),T})}else{const h=s5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=a5(y),T=new Zw;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=n5(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=r5(y),T=new eb;return Object.assign(T,E),T})}else{const h=t5(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=i5(y),T=new eb;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=J3(this.apiClient,e);return a=ye("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=Y3(d),y=new AU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=L5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const E=P5(y),T=new Bh;return Object.assign(T,E),T})}else{const h=V5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const E=k5(y),T=new Bh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l9 extends ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=hU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const h=dU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=sU(e);return a=ye("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u9(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function c9(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>_9(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function f9(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&g(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&g(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],v9(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&g(n,["fieldMask"],d),i}function d9(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],f9(t,i,n)),n}function h9(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function p9(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m9(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function g9(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function y9(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],A0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const b=p(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],c9(ei(N)));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>T9(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],E9(L));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function v9(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],y9(s,n)),n}function _9(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],h9(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],p9(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],u9(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function E9(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function T9(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],m9(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],g9(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function A9(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=S9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class w9 extends ws{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=d9(this.apiClient,e);a=ye("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=A9(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b9(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function C9(t){const e={},n=p(t,["config"]);return n!=null&&b9(n,e),e}function I9(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function x9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&I9(i,e),e}function R9(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function N9(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&g(e,["chunkingConfig"],s),n}function M9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],k9(l)),e}function D9(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&N9(s,e),e}function k9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function P9(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function V9(t){const e={},n=p(t,["config"]);return n!=null&&P9(n,e),e}function L9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function O9(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),g(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),n}function U9(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&O9(i,e),e}function F9(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B9(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function q9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&B9(i,e),e}function z9(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function H9(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function G9(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&H9(i,e),e}function $9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j9 extends ws{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ia(Ss.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=z9(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=q9(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=G9(e);return a=ye("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=$9(d),y=new wU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K9 extends ws{constructor(e,n=new j9(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ia(Ss.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C9(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=R9(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=x9(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V9(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=L9(d),y=new bU;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U9(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=F9(d),y=new CU;return Object.assign(y,h),y})}}async importFile(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=D9(e);return a=ye("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=M9(d),y=new v0;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J9(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function Y9(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function W9(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Q9(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const b=p(t,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],Sb(b))}else if(s==="PREFERENCE_TUNING"){const b=p(t,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],Sb(b))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=p(t,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=p(t,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=p(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=p(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const b=p(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(h==="PREFERENCE_TUNING"){const b=p(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let y=p(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const b=p(t,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(y==="PREFERENCE_TUNING"){const b=p(t,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function X9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&uB(a);const l=p(t,["config"]);return l!=null&&W9(l,n),n}function Z9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&cB(a,n,e);const l=p(t,["config"]);return l!=null&&Q9(l,n,e),n}function eB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function tB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function nB(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function iB(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function rB(t,e){const n={},i=p(t,["config"]);return i!=null&&nB(i,n),n}function sB(t,e){const n={},i=p(t,["config"]);return i!=null&&iB(i,n),n}function oB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>IR(c))),g(n,["tuningJobs"],l)}return n}function aB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Jy(c))),g(n,["tuningJobs"],l)}return n}function lB(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const s=p(t,["name"]);return s!=null&&g(n,["endpoint"],s),n}function uB(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(n,["examples","examples"],s)}return n}function cB(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function IR(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],lR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const E=p(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&g(n,["tunedModel"],lB(T)),n}function Jy(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],lR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["error"]);y!=null&&g(n,["error"],y);const E=p(t,["description"]);E!=null&&g(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&g(n,["baseModel"],T);const b=p(t,["tunedModel"]);b!=null&&g(n,["tunedModel"],b);const N=p(t,["preTunedModel"]);N!=null&&g(n,["preTunedModel"],N);const P=p(t,["supervisedTuningSpec"]);P!=null&&g(n,["supervisedTuningSpec"],P);const L=p(t,["preferenceOptimizationSpec"]);L!=null&&g(n,["preferenceOptimizationSpec"],L);const z=p(t,["tuningDataStats"]);z!=null&&g(n,["tuningDataStats"],z);const F=p(t,["encryptionSpec"]);F!=null&&g(n,["encryptionSpec"],F);const B=p(t,["partnerModelTuningSpec"]);B!=null&&g(n,["partnerModelTuningSpec"],B);const K=p(t,["customBaseModel"]);K!=null&&g(n,["customBaseModel"],K);const X=p(t,["experiment"]);X!=null&&g(n,["experiment"],X);const G=p(t,["labels"]);G!=null&&g(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&g(n,["outputUri"],I);const x=p(t,["pipelineJob"]);x!=null&&g(n,["pipelineJob"],x);const R=p(t,["serviceAccount"]);R!=null&&g(n,["serviceAccount"],R);const V=p(t,["tunedModelDisplayName"]);V!=null&&g(n,["tunedModelDisplayName"],V);const D=p(t,["veoTuningSpec"]);return D!=null&&g(n,["veoTuningSpec"],D),n}function fB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(t,["done"]);l!=null&&g(n,["done"],l);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function Sb(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&g(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dB extends ws{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:qy.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=tB(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>Jy(y))}else{const h=eB(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>IR(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=sB(e);return c=ye("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=aB(y),T=new tb;return Object.assign(T,E),T})}else{const h=rB(e);return c=ye("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=oB(y),T=new tb;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=Y9(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=J9(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Z9(e,e);return a=ye("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>Jy(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=X9(e);return a=ye("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>fB(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pB=1024*1024*8,mB=3,gB=1e3,yB=2,zh="x-goog-upload-status";async function vB(t,e,n){var i;const s=await xR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function _B(t,e,n){var i;const s=await xR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=nR(a),c=new _0;return Object.assign(c,l),c}async function xR(t,e,n){var i,s;let a=0,l=0,c=new zy(new Response),d="upload";for(a=t.size;l<a;){const h=Math.min(pB,a-l),y=t.slice(l,l+h);l+h>=a&&(d+=", finalize");let E=0,T=gB;for(;E<mB&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[zh]));)E++,await TB(T),T=T*yB;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[zh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function EB(t){return{size:t.size,type:t.type}}function TB(t){return new Promise(e=>setTimeout(e,t))}class SB{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vB(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _B(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AB{create(e,n,i){return new wB(e,n,i)}}class wB{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ab="x-goog-api-key";class bB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ab)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ab,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CB="gl-node/";class IB{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=iU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new bB(this.apiKey);this.apiClient=new zF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:CB+"web",uploader:new SB,downloader:new hB}),this.models=new a9(this.apiClient),this.live=new t9(this.apiClient,s,new AB),this.batches=new D6(this.apiClient),this.chats=new h3(this.models,this.apiClient),this.caches=new c3(this.apiClient),this.files=new A3(this.apiClient),this.operations=new l9(this.apiClient),this.authTokens=new w9(this.apiClient),this.tunings=new dB(this.apiClient),this.fileSearchStores=new K9(this.apiClient)}}const Hh={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539",huggingFaceApiKey:"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"},Np=new IB({apiKey:Hh.geminiApiKey});async function xB(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await Np.models.generateContent({model:"gemini-2.0-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{items:{type:Be.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Be.OBJECT,properties:{analysis:{type:Be.STRING},category:{type:Be.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Be.STRING},material:{type:Be.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=JSON.parse(i.text()||"{}"),a=["Hauts","Bas","Chaussures","Accessoires"];return s.items?(s.items.forEach(l=>{a.includes(l.category)||(l.category="Accessoires")}),s.items):[]}catch(s){throw console.error("Erreur parsing Gemini:",s),new Error("L'IA a renvoy une rponse malforme.")}}async function RB(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",y=`
    Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
    Vtements disponibles :
    ${d}
    ${h}

    Rgles :
    1. Utilise UNIQUEMENT les articles lists.
    2. Chaque tenue doit tre complte (Haut + Bas + Chaussures si dispo).
    3. IMPORTANT : Renvoie l'ID EXACT et la description EXACTE pour chaque article.

    Rponds en JSON avec une liste "tenues".
  `,E=await Np.models.generateContent({model:"gemini-2.0-flash",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{tenues:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{titre:{type:Be.STRING},description:{type:Be.STRING},vetements:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},description:{type:Be.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text()||"{}").tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function NB(t,e){const n=t.map(a=>`${a.category}: ${a.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques.
  
  Garde-robe :
  ${n}
  
  Renvoie un rsum, les points forts, les manques, et des suggestions avec priorit et prix estim.`,s=await Np.models.generateContent({model:"gemini-2.0-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{summary:{type:Be.STRING},strengths:{type:Be.ARRAY,items:{type:Be.STRING}},gaps:{type:Be.ARRAY,items:{type:Be.STRING}},suggestions:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{category:{type:Be.STRING},description:{type:Be.STRING},reason:{type:Be.STRING},priority:{type:Be.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Be.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});return JSON.parse(s.text()||"{}")}async function MB(t,e,n,i){const s=new Set((e||[]).flatMap(E=>E.itemIds)),l=t.filter(E=>!s.has(E.id)).map(E=>`- ${E.analysis} (ID: ${E.id})`).join(`
`),c=e.map(E=>`- ${E.name} (Ensemble, ID: ${E.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=`Cre une valise optimise pour ${n} jours. Contexte : ${i}.
    Utilise ces vtements :
    ${d}
    
    Renvoie un titre, un rsum et la liste des articles (id et description).`,y=await Np.models.generateContent({model:"gemini-2.0-flash",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{titre:{type:Be.STRING},resume:{type:Be.STRING},valise:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},description:{type:Be.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}});return JSON.parse(y.text()||"{}")}async function DB(t,e){console.log(" Cl API Hugging Face dtecte (longueur: "+Hh.huggingFaceApiKey.length+")");const n=t.map(a=>a.analysis).join(", "),i="runwayml/stable-diffusion-v1-5",s=`Fashion photo of a person wearing: ${n}. Context: ${e}. Photorealistic, 8k.`;console.log(`Gnration visuelle via Hugging Face (${i})...`);try{const a=await fetch(`https://api-inference.huggingface.co/models/${i}`,{headers:{Authorization:`Bearer ${Hh.huggingFaceApiKey}`,"Content-Type":"application/json","x-use-cache":"false"},method:"POST",body:JSON.stringify({inputs:s,options:{wait_for_model:!0,use_cache:!1}})});if(!a.ok){const c=await a.text();throw console.error(" Erreur API Hugging Face:",c),a.status===403||a.status===401?new Error("Erreur d'authentification HF. Vrifiez votre token."):c.includes("estimated_time")?new Error("Le modle dmarre, ressayez dans 30 secondes."):new Error(`Erreur HF (${a.status})`)}const l=await a.blob();return new Promise((c,d)=>{const h=new FileReader;h.onloadend=()=>c(h.result),h.onerror=d,h.readAsDataURL(l)})}catch(a){throw console.error("Erreur lors de la gnration visuelle:",a),a}}const kB=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),PB=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),wb=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),RR=({className:t="h-8 w-8 text-gold"})=>A.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),C0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),bb=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),NR=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),VB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),LB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),OB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),UB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),FB=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),I0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Mp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),x0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),BB=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),qB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),R0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Dp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),zB=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),HB=({theme:t,toggleTheme:e,children:n})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[n,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?A.jsx(PB,{}):A.jsx(kB,{})})]})]})}),Cb=({user:t})=>{var b,N,P;const[e,n]=j.useState(""),[i,s]=j.useState(""),[a,l]=j.useState(!1),[c,d]=j.useState(!1),h=j.useRef(null);j.useEffect(()=>{const L=z=>{h.current&&!h.current.contains(z.target)&&d(!1)};return c&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[c]);const y=async()=>{try{await _k(lc,X4)}catch(L){console.error("Erreur de connexion Google:",L)}},E=async L=>{L.preventDefault();try{a?await JD(lc,e,i):await YD(lc,e,i)}catch(z){console.error("Erreur d'authentification:",z)}},T=async()=>{try{await ZD(lc)}catch(L){console.error("Erreur de dconnexion:",L)}};return t?A.jsxs("div",{className:"relative",ref:h,children:[A.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((b=t.displayName)==null?void 0:b[0])||((N=t.email)==null?void 0:N[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((P=t.email)==null?void 0:P.split("@")[0])})]}),c&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),A.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:y,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:E,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:L=>n(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:L=>s(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>l(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},GB=({onAnalyze:t,isAnalyzing:e})=>{const n=j.useRef(null),[i,s]=j.useState([]),[a,l]=j.useState(!1),[c,d]=j.useState(!1);j.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),j.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const B=F.map(K=>({id:`${K.name}-${K.lastModified}-${Math.random()}`,file:K,preview:URL.createObjectURL(K)}));s(K=>[...K,...B])},y=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!0))},b=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1))},N=F=>{c||(F.preventDefault(),F.stopPropagation())},P=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},L=F=>{const B=i.find(K=>K.id===F);B&&URL.revokeObjectURL(B.preview),s(K=>K.filter(X=>X.id!==F))},z=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:N,onDrop:P,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:n,onChange:y,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(RR,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(wb,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(wb,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>L(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(C0,{})})]},F.id))}),A.jsxs("button",{onClick:z,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(b0,{}),"Analyser les ",i.length," article(s)"]})]})]})},$B=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a,isFavorite:l})=>A.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(x0,{})}):l?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:A.jsx(Dp,{})}):a?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(Mp,{})}):null,A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(C0,{})})]}),jB={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},KB=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,l]=j.useState("Hauts"),[c,d]=j.useState(jB),[h,y]=j.useState(!1),[E,T]=j.useState(new Set),b=j.useMemo(()=>e||[],[e]),N=j.useMemo(()=>new Set(b.flatMap(D=>D.itemIds||[])),[b]),P=t.length,L=[{name:"Hauts",icon:VB},{name:"Bas",icon:LB},{name:"Chaussures",icon:OB},{name:"Accessoires",icon:UB}],z=D=>{h?T(O=>{const U=new Set(O);return U.has(D.id)?U.delete(D.id):U.add(D.id),U}):n(D)},F=(D,O)=>{D.stopPropagation(),E.has(O)&&T(U=>{const be=new Set(U);return be.delete(O),be}),i(O)},B=j.useMemo(()=>t.filter(D=>{if(!(D.category===a))return!1;const U=a?c[a]:{color:"Toutes",material:"Toutes"},be=U.color==="Toutes"||D.color===U.color,ve=U.material==="Toutes"||D.material===U.material;return be&&ve}),[t,a,c]),K=j.useMemo(()=>{if(!a)return[];const D=t.filter(O=>O.category===a).map(O=>O.color);return["Toutes",...Array.from(new Set(D))]},[t,a]),X=j.useMemo(()=>{if(!a)return[];const D=t.filter(O=>O.category===a).map(O=>O.material);return["Toutes",...Array.from(new Set(D))]},[t,a]),G=D=>{a&&d(O=>({...O,[a]:{...O[a],color:D}}))},I=D=>{a&&d(O=>({...O,[a]:{...O[a],material:D}}))},x=D=>{l(a===D?null:D)},R=()=>{y(!h),T(new Set)},V=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const D=window.prompt("Donnez un nom  cet ensemble :");D&&(s(D,Array.from(E)),R())};return P===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(bb,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(bb,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[P," vtement",P>1?"s":""]})]})]}),h?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:R,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:V,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):A.jsxs("button",{onClick:R,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(Mp,{}),"Crer un ensemble"]})]}),h&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:L.map(({name:D,icon:O})=>{const U=t.filter(ve=>ve.category===D),be=a===D;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>x(D),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(O,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:D}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",U.length,")"]})]}),A.jsx(FB,{className:`w-5 h-5 transition-transform ${be?"rotate-180":""}`})]}),be&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:c[D].color,onChange:ve=>G(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:K.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:c[D].material,onChange:ve=>I(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:X.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]})]}),B.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:B.map(ve=>A.jsx($B,{imageSrc:ve.imageSrc,analysis:ve.analysis,onClick:()=>z(ve),onRemove:ee=>F(ee,ve.id),isSelected:E.has(ve.id),isSet:N.has(ve.id),isFavorite:ve.isFavorite},ve.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},D)})})]})},MR=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[l,c]=wn.useState(""),d=y=>{y.preventDefault(),n(l||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:d,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(y=>A.jsx("button",{type:"button",onClick:()=>c(y),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===y?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:y},y))}),A.jsx("input",{id:"occasion",type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),A.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(b0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},Gh=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:s,onGenerateVisual:a,generatingVisualFor:l})=>{const[c,d]=j.useState(null);j.useEffect(()=>{if(!c)return;const y=E=>{E.key==="Escape"&&d(null)};return window.addEventListener("keydown",y),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",y),document.body.style.overflow="auto"}},[c]);const h=y=>{const{id:E,description:T}=y;let b=e.find(P=>P.id===E);if(b)return b;let N=n.find(P=>P.id===E);if(N)return N;if(b=e.find(P=>P.analysis===E),b||(b=e.find(P=>P.analysis===T),b))return b};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:t.map((y,E)=>{const T=i.some(N=>N.titre===y.titre&&N.description===y.description),b=l===y.titre;return A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:y.titre}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>a(y),disabled:b,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:b?A.jsx(RR,{className:"h-5 w-5"}):A.jsx(zB,{})}),A.jsx("button",{onClick:()=>s(y),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?A.jsx(Dp,{className:"w-6 h-6 text-gold"}):A.jsx(R0,{className:"w-6 h-6"})})]})]})," ",A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:y.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:y.vetements.map((N,P)=>{const L=h(N),z=L?L.imageSrc:null;return A.jsx("button",{onClick:()=>z&&d(z),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!z,"aria-label":`Agrandir l'image de : ${N.description}`,children:z?A.jsx("img",{src:z,alt:N.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(NR,{})})},P)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:y.vetements.map((N,P)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:N.description},P))})]},E)})}),c&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>d(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:y=>y.stopPropagation(),children:[A.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>d(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(I0,{})})]})})]})},JB=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a,onDelete:l})=>{const[c,d]=j.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[h,y]=j.useState(!1),E=e.find(L=>L.itemIds.includes(t.id));j.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),j.useEffect(()=>{const L=z=>{z.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",L),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",L)}},[n]);const T=L=>{const{name:z,value:F}=L.target;d(B=>({...B,[z]:F}))},b=L=>{L.preventDefault(),i({...t,...c}),y(!0),setTimeout(()=>{y(!1)},2e3)},N=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},P=L=>{L.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:P,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?A.jsx(Dp,{className:"w-6 h-6 text-red-500"}):A.jsx(R0,{className:"w-6 h-6"})}),A.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(I0,{})})]}),A.jsxs("form",{onSubmit:b,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(L=>A.jsx("option",{value:L,children:L},L))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),E&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:E.name,children:E.name})]}),A.jsxs("button",{type:"button",onClick:()=>{a(E.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(BB,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[A.jsxs("button",{type:"button",onClick:N,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[A.jsx(C0,{}),"Supprimer"]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(b0,{}),"Crer une tenue"]}),A.jsx("button",{type:"submit",disabled:h,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${h?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:h?A.jsxs(A.Fragment,{children:[A.jsx(x0,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},DR=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=j.useState(3),[l,c]=j.useState(""),d=h=>{h.preventDefault();const y=l||"";y.trim()&&s>0&&n(s,y)};return A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(qB,{}),i?"Prparation...":"Gnrer la valise"]})]})},kR=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const{id:a,description:l}=s;let c=e.find(h=>h.id===a);if(c)return c;let d=n.find(h=>h.id===a);if(d)return d;if(c=e.find(h=>h.analysis===a),c||(c=e.find(h=>h.analysis===l),c))return c};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const l=i(s),c=l?l.imageSrc:null;return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?A.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(NR,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},YB=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=j.useState(!1),a=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),s(!1))};return A.jsxs(A.Fragment,{children:[!n&&A.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},WB=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:s,isAnalyzingWardrobe:a,clothingCount:l,favoriteOutfitCount:c})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&A.jsx("button",{onClick:t,disabled:a,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:a?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),A.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsxs("div",{className:"text-red-500",children:[A.jsx(R0,{})," "]}),A.jsx("p",{className:"text-2xl font-bold",children:c}),A.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),QB=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return A.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),A.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},XB=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:s.description}),A.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var ZB=eq()?j.useLayoutEffect:j.useEffect;function eq(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function tq(){var t=j.useState(Object.create(null)),e=t[1];return j.useCallback(function(){e(Object.create(null))},[])}var nq=gC(),iq=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=j.useRef(null),l=j.useRef(null),c=tq();return ZB(function(){if(a.current){var d=a.current.ownerDocument;return l.current=d==null?void 0:d.createElement(s),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[s,c]),l.current?nq.createPortal(n,l.current):j.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge.apply(this,arguments)};function N0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ot(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Ft(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var Mt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Mt||(Mt={}));var Bl;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Bl||(Bl={}));var Yy=Mt.Start,M0=Mt.Stop,sf=Mt.Raise,kp=Mt.Send,PR=Mt.Cancel,rq=Mt.NullEvent,D0=Mt.Assign;Mt.After;Mt.DoneState;var VR=Mt.Log,sq=Mt.Init,Wy=Mt.Invoke;Mt.ErrorExecution;var Ib=Mt.ErrorPlatform,oq=Mt.ErrorCustom,LR=Mt.Update,aq=Mt.Choose,lq=Mt.Pure,OR=".",xb={},Qy="xstate.guard",uq="",Od;function k0(t,e,n){n===void 0&&(n=OR);var i=Tc(t,n),s=Tc(e,n);return Et(s)?Et(i)?s===i:!1:Et(i)?i in s:Object.keys(i).every(function(a){return a in s?k0(i[a],s[a]):!1})}function UR(t){try{return Et(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Xy(t,e){try{return Zl(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function cq(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Tc(t,e){if(cq(t))return t.value;if(Zl(t))return $h(t);if(typeof t!="string")return t;var n=Xy(t,e);return $h(n)}function $h(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function uc(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function Rb(t,e,n){var i,s,a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}var fq=function(t){return function(e){var n,i,s=e;try{for(var a=ot(t),l=a.next();!l.done;l=a.next()){var c=l.value;s=s[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function dq(t,e){return function(n){var i,s,a=n;try{for(var l=ot(t),c=l.next();!c.done;c=l.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}function dh(t){if(!t)return[[]];if(Et(t))return[[t]];var e=Kt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:dh(t[n]).map(function(s){return[n].concat(s)})}));return e}function Kt(t){var e;return(e=[]).concat.apply(e,Ft([],mt(t),!1))}function FR(t){return Zl(t)?t:[t]}function vr(t){return t===void 0?[]:FR(t)}function jh(t,e,n){var i,s;if(vt(t))return t(e,n.data);var a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];vt(h)?a[d]=h(e,n.data):a[d]=h}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}function hq(t){return/^(done|error)\./.test(t)}function Nb(t){return!!(t instanceof Promise||t!==null&&(vt(t)||typeof t=="object")&&vt(t.then))}function pq(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function mq(t,e){var n,i,s=mt([[],[]],2),a=s[0],l=s[1];try{for(var c=ot(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}function BR(t,e){return uc(t.states,function(n,i){if(n){var s=(Et(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:BR(n,s)}}})}function gq(t,e){return{current:e,states:BR(t,e)}}function Mb(t,e,n,i){var s=t&&n.reduce(function(a,l){var c,d,h=l.assignment,y={state:i,action:l,_event:e},E={};if(vt(h))E=h(a,e.data,y);else try{for(var T=ot(Object.keys(h)),b=T.next();!b.done;b=T.next()){var N=b.value,P=h[N];E[N]=vt(P)?P(a,e.data,y):P}}catch(L){c={error:L}}finally{try{b&&!b.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var yq=function(){};function Zl(t){return Array.isArray(t)}function vt(t){return typeof t=="function"}function Et(t){return typeof t=="string"}function qR(t,e){if(t)return Et(t)?{type:Qy,name:t,predicate:e?e[t]:void 0}:vt(t)?{type:Qy,name:t.name,predicate:t}:t}function vq(t){try{return"subscribe"in t&&vt(t.subscribe)}catch{return!1}}var fo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Od={},Od[fo]=function(){return this},Od[Symbol.observable]=function(){return this};function ql(t){return!!t&&"__xstatenode"in t}function _q(t){return!!t&&typeof t.send=="function"}function Pp(t,e){return Et(t)||typeof t=="number"?ge({type:t},e):t}function zn(t,e){if(!Et(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Pp(t);return ge({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function fl(t,e){var n=FR(e).map(function(i){return typeof i>"u"||typeof i=="string"||ql(i)?{target:i,event:t}:ge(ge({},i),{event:t})});return n}function Eq(t){if(!(t===void 0||t===uq))return vr(t)}function zR(t,e,n,i,s){var a=t.options.guards,l={state:s,cond:e,_event:i};if(e.type===Qy)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,l);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function HR(t){return typeof t=="string"?{type:t}:t}function hh(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function Ud(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Zy(t){return(t.type===sf||t.type===kp&&t.to===Bl.Internal)&&typeof t.delay!="number"}var Ml=zn({type:sq});function ev(t,e){return e&&e[t]||void 0}function Bc(t,e){var n;if(Et(t)||typeof t=="number"){var i=ev(t,e);vt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(vt(t))n={type:t.name||t.toString(),exec:t};else{var i=ev(t.type,e);if(vt(i))n=ge(ge({},t),{exec:i});else if(i){var s=i.type||t.type;n=ge(ge(ge({},i),t),{type:s})}else n=t}return n}var ho=function(t,e){if(!t)return[];var n=Zl(t)?t:[t];return n.map(function(i){return Bc(i,e)})};function P0(t){var e=Bc(t);return ge(ge({id:Et(t)?t:e.id},e),{type:e.type})}function Tq(t,e){return{type:sf,event:typeof t=="function"?t:Pp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function Sq(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;return ge(ge({},t),{type:sf,_event:a,delay:l})}function Aq(t,e){return{to:e?e.to:void 0,type:kp,event:vt(t)?t:Pp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:vt(t)?t.name:UR(t)}}function wq(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;var d=vt(t.to)?t.to(e,n.data,s):t.to;return ge(ge({},t),{to:d,_event:a,event:a.data,delay:l})}var bq=function(t,e,n){return ge(ge({},t),{value:Et(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Cq=function(t){return{type:PR,sendId:t}};function Iq(t){var e=P0(t);return{type:Mt.Start,activity:e,exec:void 0}}function xq(t){var e=vt(t)?t:P0(t);return{type:Mt.Stop,activity:e,exec:void 0}}function Rq(t,e,n){var i=vt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:Mt.Stop,activity:s};return a}var Nq=function(t){return{type:D0,assignment:t}};function Mq(t,e){var n=e?"#".concat(e):"";return"".concat(Mt.After,"(").concat(t,")").concat(n)}function Fd(t,e){var n="".concat(Mt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function ph(t,e){var n="".concat(Mt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function cc(t,e){var n="".concat(Mt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var Dq=function(t){var e,n,i=[];try{for(var s=ot(t),a=s.next();!a.done;a=s.next())for(var l=a.value,c=0;c<l.actions.length;){if(l.actions[c].type===D0){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function Kh(t,e,n,i,s,a,l){l===void 0&&(l=!1);var c=l?[]:Dq(s),d=c.length?Mb(n,i,c,e):n,h=l?[n]:void 0,y=[];function E(N,P){var L;switch(P.type){case sf:{var z=Sq(P,d,i,t.options.delays);return a&&typeof z.delay=="number"&&a(z,d,i),z}case kp:var F=wq(P,d,i,t.options.delays);return a&&F.to!==Bl.Internal&&(N==="entry"?y.push(F):a(F,d,i)),F;case VR:{var B=bq(P,d,i);return a==null||a(B,d,i),B}case aq:{var K=P,X=(L=K.conds.find(function(ee){var ce=qR(ee.cond,t.options.guards);return!ce||zR(t,ce,d,i,a?void 0:e)}))===null||L===void 0?void 0:L.actions;if(!X)return[];var G=mt(Kh(t,e,d,i,[{type:N,actions:ho(vr(X),t.options.actions)}],a,l),2),I=G[0],x=G[1];return d=x,h==null||h.push(d),I}case lq:{var X=P.get(d,i.data);if(!X)return[];var R=mt(Kh(t,e,d,i,[{type:N,actions:ho(vr(X),t.options.actions)}],a,l),2),V=R[0],D=R[1];return d=D,h==null||h.push(d),V}case M0:{var B=Rq(P,d,i);return a==null||a(B,n,i),B}case D0:{d=Mb(d,i,[P],a?void 0:e),h==null||h.push(d);break}default:var O=Bc(P,t.options.actions),U=O.exec;if(a)a(O,d,i);else if(U&&h){var be=h.length-1,ve=ge(ge({},O),{exec:function(ee){for(var ce=[],he=1;he<arguments.length;he++)ce[he-1]=arguments[he];U.apply(void 0,Ft([h[be]],mt(ce),!1))}});O=ve}return O}}function T(N){var P,L,z=[];try{for(var F=ot(N.actions),B=F.next();!B.done;B=F.next()){var K=B.value,X=E(N.type,K);X&&(z=z.concat(X))}}catch(G){P={error:G}}finally{try{B&&!B.done&&(L=F.return)&&L.call(F)}finally{if(P)throw P.error}}return y.forEach(function(G){a(G,d,i)}),y.length=0,z}var b=Kt(s.map(T));return[b,d]}var El=function(t,e){var n=e(t);return n};function GR(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[fo]=function(){return this},e}function kq(t,e,n,i){var s,a=HR(t.src),l=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?jh(t.data,n,i):void 0,d=l?$R(l,t.id,c):GR(t.id);return d.meta=t,d}function $R(t,e,n){var i=GR(e);if(i.deferred=!0,ql(t)){var s=i.state=El(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function Pq(t){try{return typeof t.send=="function"}catch{return!1}}function Vq(t){return Pq(t)&&"id"in t}function Lq(t){var e;return ge((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[fo]=function(){return this},e),t)}var Jh=function(t){return t.type==="atomic"||t.type==="final"};function jR(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function qc(t){return jR(t).filter(function(e){return e.type!=="history"})}function KR(t){var e=[t];return Jh(t)?e:e.concat(Kt(qc(t).map(KR)))}function fc(t,e){var n,i,s,a,l,c,d,h,y=new Set(t),E=tv(y),T=new Set(e);try{for(var b=ot(T),N=b.next();!N.done;N=b.next())for(var P=N.value,L=P.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(R){n={error:R}}finally{try{N&&!N.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var z=tv(T);try{for(var F=ot(T),B=F.next();!B.done;B=F.next()){var P=B.value;if(P.type==="compound"&&(!z.get(P)||!z.get(P).length))E.get(P)?E.get(P).forEach(function(V){return T.add(V)}):P.initialStateNodes.forEach(function(V){return T.add(V)});else if(P.type==="parallel")try{for(var K=(l=void 0,ot(qc(P))),X=K.next();!X.done;X=K.next()){var G=X.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(V){return T.add(V)}):G.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{X&&!X.done&&(c=K.return)&&c.call(K)}finally{if(l)throw l.error}}}}catch(R){s={error:R}}finally{try{B&&!B.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=ot(T),x=I.next();!x.done;x=I.next())for(var P=x.value,L=P.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(R){d={error:R}}finally{try{x&&!x.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function JR(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Jh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=JR(a,e)}),s}function tv(t){var e,n,i=new Map;try{for(var s=ot(t),a=s.next();!a.done;a=s.next()){var l=a.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function Oq(t,e){var n=fc([t],e);return JR(t,tv(n))}function dc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function Uq(t){return Ft([],mt(new Set(Kt(Ft([],mt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function mh(t,e){return e.type==="compound"?qc(e).some(function(n){return n.type==="final"&&dc(t,n)}):e.type==="parallel"?qc(e).every(function(n){return mh(t,n)}):!1}function Fq(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Db(t){return new Set(Kt(t.map(function(e){return e.tags})))}function YR(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Et(t)||Et(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return YR(t[s],e[s])})}function Bq(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function qq(t,e){var n=t.exec,i=ge(ge({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var sr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=xb,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||xb,this.meta=Fq(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return Uq(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Ml;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Ml;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Et(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Ft([],mt(s.map(function(a){return i.toStrings(e[a],n).map(function(l){return a+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=N0(e,["configuration","transitions","tags","machine"]);return ge(ge({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return k0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;yq(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),zq={deferEvents:!1},kb=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ge(ge({},zq),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),ny=new Map,Hq=0,Qu={bookId:function(){return"x:".concat(Hq++)},register:function(t,e){return ny.set(t,e),t},get:function(t){return ny.get(t)},free:function(t){ny.delete(t)}};function V0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Gq(){var t=V0();if(t&&"__xstate__"in t)return t.__xstate__}function $q(t){if(V0()){var e=Gq();e&&e.register(t)}}function jq(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,l=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(y){return y.next(n)})}a=!1}},c=Lq({id:e.id,send:function(h){s.push(h),l()},getSnapshot:function(){return n},subscribe:function(h,y,E){var T=hh(h,y,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var Kq={sync:!1,autoForward:!1},Pn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Pn||(Pn={}));var Jq=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Pn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(y,E){if(Zl(y))return i.batch(y),i.state;var T=zn(Pp(y,E));if(i.status===Pn.Stopped)return i.state;if(i.status!==Pn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(y,E,T){var b=i.parent&&(E===Bl.Parent||i.parent.id===E),N=b?i.parent:Et(E)?E===Bl.Internal?i:i.children.get(E)||Qu.get(E):_q(E)?E:void 0;if(!N){if(!b)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in N){if(i.status!==Pn.Stopped||i.parent!==N||i.state.done){var P=ge(ge({},y),{name:y.name===oq?"".concat(cc(i.id)):y.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([N,P]):N.send(P)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([N,y.data]):N.send(y.data)},this._exec=function(y,E,T,b){b===void 0&&(b=i.machine.options.actions);var N=y.exec||ev(y.type,b),P=vt(N)?N:N?N.exec:y.exec;if(P)try{return P(E,T.data,i.machine.config.predictableActionArguments?{action:y,_event:T}:{action:y,state:i.state,_event:T})}catch(be){throw i.parent&&i.parent.send({type:"xstate.error",data:be}),be}switch(y.type){case sf:{var L=y;i.defer(L);break}case kp:var z=y;if(typeof z.delay=="number"){i.defer(z);return}else z.to?i.sendTo(z._event,z.to,T===Ml):i.send(z._event);break;case PR:i.cancel(y.sendId);break;case Yy:{if(i.status!==Pn.Running)return;var F=y.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===Mt.Invoke){var B=HR(F.src),K=i.machine.options.services?i.machine.options.services[B.type]:void 0,X=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!K)return;var x=G?jh(G,E,T):void 0;if(typeof K=="string")return;var R=vt(K)?K(E,T.data,{data:x,src:B,meta:F.meta}):K;if(!R)return;var V=void 0;ql(R)&&(R=x?R.withContext(x):R,V={autoForward:I}),i.spawn(R,X,V)}else i.spawnActivity(F);break}case M0:{i.stopChild(y.activity.id);break}case VR:var D=y,O=D.label,U=D.value;O?i.logger(O,U):i.logger(U);break}};var s=ge(ge({},t.defaultOptions),n),a=s.clock,l=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=l,this.clock=a,this.parent=c,this.options=s,this.scheduler=new kb({deferEvents:this.options.deferEvents}),this.sessionId=Qu.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:El(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=ot(e.actions),l=a.next();!l.done;l=a.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,l,c,d,h,y,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Ml)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(R){E.state.children[R.id]=R}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ot(this.eventListeners),N=b.next();!N.done;N=b.next()){var P=N.value;P(e.event)}}catch(R){i={error:R}}finally{try{N&&!N.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}try{for(var L=ot(this.listeners),z=L.next();!z.done;z=L.next()){var P=z.value;P(e,e.event)}}catch(R){a={error:R}}finally{try{z&&!z.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.contextListeners),B=F.next();!B.done;B=F.next()){var K=B.value;K(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(R){c={error:R}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var X=e.configuration.find(function(R){return R.type==="final"&&R.parent===E.machine}),G=X&&X.doneData?jh(X.doneData,e.context,n):void 0;this._doneEvent=ph(this.id,G);try{for(var I=ot(this.doneListeners),x=I.next();!x.done;x=I.next()){var P=x.value;P(this._doneEvent)}}catch(R){h={error:R}}finally{try{x&&!x.done&&(y=I.return)&&y.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Qu.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Pn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=hh(e,n,i);this.listeners.add(a.next),this.status!==Pn.NotStarted&&a.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),a.complete()};return this.status===Pn.Stopped?a.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Pn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Pn.Running)return this;this.machine._init(),Qu.register(this.sessionId,this),this.initialized=!0,this.status=Pn.Running;var i=e===void 0?this.initialState:El(this,function(){return Bq(e)?n.machine.resolveState(e):n.machine.resolveState(sr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Ml)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){vt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,l,c,d,h,y;try{for(var E=ot(this.listeners),T=E.next();!T.done;T=E.next()){var b=T.value;this.listeners.delete(b)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var N=ot(this.stopListeners),P=N.next();!P.done;P=N.next()){var b=P.value;b(),this.stopListeners.delete(b)}}catch(I){i={error:I}}finally{try{P&&!P.done&&(s=N.return)&&s.call(N)}finally{if(i)throw i.error}}try{for(var L=ot(this.contextListeners),z=L.next();!z.done;z=L.next()){var b=z.value;this.contextListeners.delete(b)}}catch(I){a={error:I}}finally{try{z&&!z.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.doneListeners),B=F.next();!B.done;B=F.next()){var b=B.value;this.doneListeners.delete(b)}}catch(I){c={error:I}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Pn.Stopped,this._initialState=void 0;try{for(var K=ot(Object.keys(this.delayedEventsMap)),X=K.next();!X.done;X=K.next()){var G=X.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{X&&!X.done&&(y=K.return)&&y.call(K)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new kb({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=zn({type:"xstate.stop"}),a=El(e,function(){var l=Kt(Ft([],mt(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return ho(E.onExit,e.machine.options.actions)})),c=mt(Kh(e.machine,e.state,e.state.context,s,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],y=new sr({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!Zy(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return y.changed=!0,y});e.update(a,s),e._stopChildren(),Qu.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Pn.NotStarted&&this.options.deferEvents)){if(this.status!==Pn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,l=n.state,c=!1,d=[],h=function(b){var N=zn(b);n.forward(N),l=El(n,function(){return n.machine.transition(l,N,void 0,i||void 0)}),d.push.apply(d,Ft([],mt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(P){return qq(P,l)})),!1)),c=c||!!l.changed};try{for(var y=ot(e),E=y.next();!E.done;E=y.next()){var T=E.value;h(T)}}catch(b){s={error:b}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}l.changed=c,l.actions=d,n.update(l,zn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=zn(e);if(s.name.indexOf(Ib)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(Ib)===0}))throw s.data.data;var a=El(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=ot(this.forwardTo),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),vt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Pn.Running)return $R(e,n);if(Nb(e))return this.spawnPromise(Promise.resolve(e),n);if(vt(e))return this.spawnCallback(e,n);if(Vq(e))return this.spawnActor(e,n);if(vq(e))return this.spawnObservable(e,n);if(ql(e))return this.spawnMachine(e,ge(ge({},i),{id:n}));if(pq(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,ge(ge({},this.options),{parent:this,id:n.id||e.id})),a=ge(ge({},Kq),n);a.sync&&s.onTransition(function(c){i.send(LR,{state:c,id:s.id})});var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(zn(c,{origin:s.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=jq(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,l;e.then(function(d){a||(l=d,s.removeChild(n),s.send(zn(ph(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=cc(n,d);try{s.send(zn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,y){var E=hh(d,h,y),T=!1;return e.then(function(b){T||(E.next(b),!T&&E.complete())},function(b){T||E.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[fo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,l=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(b){return b(T)}),!a&&s.send(zn(T,{origin:n}))},y;try{y=e(h,function(T){l.add(T)})}catch(T){this.send(cc(n,T))}if(Nb(y))return this.spawnPromise(y,n);var E=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=hh(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){a=!0,vt(y)&&y()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[fo]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,l=e.subscribe(function(d){a=d,s.send(zn(d,{origin:n}))},function(d){s.removeChild(n),s.send(zn(cc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(zn(ph(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,y){return e.subscribe(d,h,y)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[fo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[fo]=function(){return this},i))},t.prototype.attachDev=function(){var e=V0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ge(ge({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ge({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}$q(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[fo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Pn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=WR,t})();function WR(t,e){var n=new Jq(t,e);return n}function Yq(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Bd(t){return ge(ge({type:Wy},t),{toJSON:function(){t.onDone,t.onError;var e=N0(t,["onDone","onError"]);return ge(ge({},e),{type:Wy,src:Yq(t.src)})}})}var qd="",nv="#",iy="*",dl={},hl=function(t){return t[0]===nv},Wq=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Qq=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Wq(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:OR),this.id=this.config.id||Ft([this.machine.key],mt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?uc(this.config.states,function(h,y){var E,T=new t(h,{},void 0,{parent:a,key:y});return Object.assign(a.idMap,ge((E={},E[T.id]=T,E),T.idMap)),T}):dl;var c=0;function d(h){var y,E;h.order=c++;try{for(var T=ot(jR(h)),b=T.next();!b.done;b=T.next()){var N=b.value;d(N)}}catch(P){y={error:P}}finally{try{b&&!b.done&&(E=T.return)&&E.call(T)}finally{if(y)throw y.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var y=h.event;return y===qd}):qd in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=vr(this.config.entry||this.config.onEntry).map(function(h){return Bc(h)}),this.onExit=vr(this.config.exit||this.config.onExit).map(function(h){return Bc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=vr(this.config.invoke).map(function(h,y){var E,T;if(ql(h)){var b=Ud(a.id,y);return a.machine.options.services=ge((E={},E[b]=h,E),a.machine.options.services),Bd({src:b,id:b})}else if(Et(h.src)){var b=h.id||Ud(a.id,y);return Bd(ge(ge({},h),{id:b,src:h.src}))}else if(ql(h.src)||vt(h.src)){var b=h.id||Ud(a.id,y);return a.machine.options.services=ge((T={},T[b]=h.src,T),a.machine.options.services),Bd(ge(ge({id:b},h),{src:b}))}else{var N=h.src;return Bd(ge(ge({id:Ud(a.id,y)},h),{src:N}))}}),this.activities=vr(this.config.activities).concat(this.invoke).map(function(h){return P0(h)}),this.transition=this.transition.bind(this),this.tags=vr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||KR(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ge(ge({},s),e.actions),activities:ge(ge({},a),e.activities),guards:ge(ge({},l),e.guards),services:ge(ge({},c),e.services),delays:ge(ge({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return vt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:uc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===qd,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===iy});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,l){var c=vt(a)?"".concat(e.id,":delay[").concat(l,"]"):a,d=Mq(c,e.id);return e.onEntry.push(Aq(d,{delay:a})),e.onExit.push(Cq(d)),d},s=Zl(n)?n.map(function(a,l){var c=i(a.delay,l);return ge(ge({},a),{event:c})}):Kt(Object.keys(n).map(function(a,l){var c=n[a],d=Et(c)?{target:c}:c,h=isNaN(+a)?a:+a,y=i(h,l);return vr(d).map(function(E){return ge(ge({},E),{event:y,delay:h})})}));return s.map(function(a){var l=a.delay;return ge(ge({},e.formatTransition(a)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof sr?e.value:Tc(e,this.delimiter);if(Et(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var l=Object.keys(s),c=[this];return c.push.apply(c,Ft([],mt(Kt(l.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=UR(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof sr?e:sr.create(e),i=Array.from(fc([],this.getStateNodes(n.value)));return new sr(ge(ge({},n),{value:this.resolve(n.value),configuration:i,done:mh(i,this),tags:Db(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),l=a._transition(e[s[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var s,a,l={};try{for(var c=ot(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,y=e[h];if(y){var E=this.getStateNode(h),T=E._transition(y,n,i);T&&(l[h]=T)}}}catch(z){s={error:z}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var b=Object.keys(l).map(function(z){return l[z]}),N=Kt(b.map(function(z){return z.transitions})),P=b.some(function(z){return z.transitions.length>0});if(!P)return this.next(n,i);var L=Kt(Object.keys(l).map(function(z){return l[z].configuration}));return{transitions:N,exitSet:Kt(b.map(function(z){return z.exitSet})),configuration:L,source:n,actions:Kt(Object.keys(l).map(function(z){return l[z].actions}))}},t.prototype._transition=function(e,n,i){return Et(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,zn(n))},t.prototype.next=function(e,n){var i,s,a=this,l=n.name,c=[],d=[],h;try{for(var y=ot(this.getCandidates(l)),E=y.next();!E.done;E=y.next()){var T=E.value,b=T.cond,N=T.in,P=e.context,L=N?Et(N)&&hl(N)?e.matches(Tc(this.getStateNodeById(N).path,this.delimiter)):k0(Tc(N,this.delimiter),fq(this.path.slice(0,-2))(e.value)):!0,z=!1;try{z=!b||zR(this.machine,b,P,n,e)}catch(K){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(K.message))}if(z&&L){T.target!==void 0&&(d=T.target),c.push.apply(c,Ft([],mt(T.actions),!1)),h=T;break}}}catch(K){i={error:K}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=Kt(d.map(function(K){return a.getRelativeStateNodes(K,e.historyValue)})),B=!!h.internal;return{transitions:[h],exitSet:B?[]:Kt(d.map(function(K){return a.getPotentiallyReenteringNodes(K)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,l,c){var d,h,y,E,T=this,b=l?fc([],this.getStateNodes(l.value)):[],N=new Set;try{for(var P=ot(Array.from(e).sort(function(D,O){return D.order-O.order})),L=P.next();!L.done;L=P.next()){var z=L.value;(!dc(b,z)||dc(i.exitSet,z)||z.parent&&N.has(z.parent))&&N.add(z)}}catch(D){d={error:D}}finally{try{L&&!L.done&&(h=P.return)&&h.call(P)}finally{if(d)throw d.error}}try{for(var F=ot(b),B=F.next();!B.done;B=F.next()){var z=B.value;(!dc(e,z)||dc(i.exitSet,z.parent))&&i.exitSet.push(z)}}catch(D){y={error:D}}finally{try{B&&!B.done&&(E=F.return)&&E.call(F)}finally{if(y)throw y.error}}i.exitSet.sort(function(D,O){return O.order-D.order});var K=Array.from(N).sort(function(D,O){return D.order-O.order}),X=new Set(i.exitSet),G=Kt(K.map(function(D){var O=[];if(D.type!=="final")return O;var U=D.parent;if(!U.parent)return O;O.push(Fd(D.id,D.doneData),Fd(U.id,D.doneData?jh(D.doneData,s,a):void 0));var be=U.parent;return be.type==="parallel"&&qc(be).every(function(ve){return mh(i.configuration,ve)})&&O.push(Fd(be.id)),O})),I=K.map(function(D){var O=D.onEntry,U=D.activities.map(function(be){return Iq(be)});return{type:"entry",actions:ho(c?Ft(Ft([],mt(O),!1),mt(U),!1):Ft(Ft([],mt(U),!1),mt(O),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(D){return Tq(D)})}),x=Array.from(X).map(function(D){return{type:"exit",actions:ho(Ft(Ft([],mt(D.onExit),!1),mt(D.activities.map(function(O){return xq(O)})),!1),T.machine.options.actions)}}),R=x.concat({type:"transition",actions:ho(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=ho(Kt(Ft([],mt(e),!1).sort(function(D,O){return O.order-D.order}).map(function(D){return D.onExit})),this.machine.options.actions).filter(function(D){return!Zy(D)});return R.concat({type:"stop",actions:V})}return R},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=zn(n),l;if(e instanceof sr)l=i===void 0?e:this.resolveState(sr.from(e,i));else{var c=Et(e)?this.resolve($h(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(sr.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!hq(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(l.value,l,a)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},y=fc([],this.getStateNodes(l.value)),E=h.configuration.length?fc(y,h.configuration):y;return h.configuration=Ft([],mt(E),!1),this.resolveTransition(h,l,l.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,l=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,Ft([],mt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var l,c,d,h,y=this;a===void 0&&(a=Ml);var E=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],N=mh(b,this),P=T?Oq(this.machine,E):void 0,L=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,z=this.getActions(new Set(b),N,e,i,a,n,s),F=n?ge({},n.activities):{};try{for(var B=ot(z),K=B.next();!K.done;K=B.next()){var X=K.value;try{for(var G=(d=void 0,ot(X.actions)),I=G.next();!I.done;I=G.next()){var x=I.value;x.type===Yy?F[x.activity.id||x.activity.type]=x:x.type===M0&&(F[x.activity.id||x.activity.type]=!1)}}catch(pe){d={error:pe}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(pe){l={error:pe}}finally{try{K&&!K.done&&(c=B.return)&&c.call(B)}finally{if(l)throw l.error}}var R=mt(Kh(this,n,i,a,z,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=R[0],D=R[1],O=mt(mq(V,Zy),2),U=O[0],be=O[1],ve=V.filter(function(pe){var we;return pe.type===Yy&&((we=pe.activity)===null||we===void 0?void 0:we.type)===Wy}),ee=ve.reduce(function(pe,we){return pe[we.activity.id]=kq(we.activity,y.machine,D,a),pe},n?ge({},n.children):{}),ce=new sr({value:P||n.value,context:D,_event:a,_sessionid:n?n._sessionid:null,historyValue:P?L?gq(L,P):void 0:n?n.historyValue:void 0,history:!P||e.source?n:void 0,actions:P?be:[],activities:P?F:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:ee,done:N,tags:Db(b),machine:this}),he=i!==D;ce.changed=a.name===LR||he;var Ie=ce.history;Ie&&delete Ie.history;var Me=!N&&(this._transient||E.some(function(pe){return pe._transient}));if(!T&&(!Me||a.name===qd))return ce;var H=ce;if(!N)for(Me&&(H=this.resolveRaisedTransition(H,{type:rq},a,s));U.length;){var te=U.shift();H=this.resolveRaisedTransition(H,te._event,a,s)}var fe=H.changed||(Ie?!!H.actions.length||he||typeof Ie.value!=typeof H.value||!YR(H.value,Ie.value):void 0);return H.changed=fe,H.history=Ie,H},t.prototype.getStateNode=function(e){if(hl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=hl(e)?e.slice(nv.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&hl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Xy(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||dl;switch(this.type){case"parallel":return uc(this.initialStateValue,function(a,l){return a?i.getStateNode(l).resolve(e[l]||a):dl});case"compound":if(Et(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?uc(e,function(a,l){return a?i.getStateNode(l).resolve(a):dl}):this.initialStateValue||{};default:return e||dl}},t.prototype.getResolvedPath=function(e){if(hl(e)){var n=this.machine.idMap[e.slice(nv.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Xy(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Rb(this.states,function(i){return i.initialStateValue||dl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Jh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Et(n.target)?e=hl(n.target)?$h(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Jh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=dh(this.initialStateValue);return Kt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=mt(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Rb(this.states,function(n,i){if(!e)return n.historyValue();var s=Et(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?Kt(dh(s).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var a=dq(i.path,"states")(e).current;return Et(a)?[i.getStateNode(a)]:Kt(dh(a).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Kt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,l=new Set(this.ownEvents);if(a)try{for(var c=ot(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,y=a[h];if(y.states)try{for(var E=(i=void 0,ot(y.events)),T=E.next();!T.done;T=E.next()){var b=T.value;l.add("".concat(b))}}catch(N){i={error:N}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(N){e={error:N}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Et(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(a);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=Eq(e.target),s="internal"in e?e.internal:i?i.some(function(d){return Et(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,l=this.resolveTarget(i),c=ge(ge({},e),{actions:ho(vr(e.actions)),cond:qR(e.cond,a),target:l,source:this,internal:s,eventType:e.event,toJSON:function(){return ge(ge({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,l=iy,c=a[l],d=c===void 0?[]:c,h=N0(a,[typeof l=="symbol"?l:l+""]);s=Kt(Object.keys(h).map(function(F){var B=fl(F,h[F]);return B}).concat(fl(iy,d)))}var y=this.config.always?fl("",this.config.always):[],E=this.config.onDone?fl(String(Fd(this.id)),this.config.onDone):[],T=Kt(this.invoke.map(function(F){var B=[];return F.onDone&&B.push.apply(B,Ft([],mt(fl(String(ph(F.id)),F.onDone)),!1)),F.onError&&B.push.apply(B,Ft([],mt(fl(String(cc(F.id)),F.onError)),!1)),B})),b=this.after,N=Kt(Ft(Ft(Ft(Ft([],mt(E),!1),mt(T),!1),mt(s),!1),mt(y),!1).map(function(F){return vr(F).map(function(B){return i.formatTransition(B)})}));try{for(var P=ot(b),L=P.next();!L.done;L=P.next()){var z=L.value;N.push(z)}}catch(F){e={error:F}}finally{try{L&&!L.done&&(n=P.return)&&n.call(P)}finally{if(e)throw e.error}}return N},t})();function Xq(t,e,n){return n===void 0&&(n=t.context),new Qq(t,e,n)}var Zq=Nq,iv;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(iv||(iv={}));var Sc=j.useLayoutEffect;function Pb(t){var e=j.useRef();return e.current||(e.current={v:t()}),e.current.v}var ez=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},tz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function nz(t,e){var n,i,s=ez([[],[]],2),a=s[0],l=s[1];try{for(var c=tz(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}var Xu=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},Vb=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function Lb(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function iz(t){var e=j.useRef([]),n=j.useRef([]);Sc(function(){var i=t.subscribe(function(s){var a,l;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=Xu(nz(c,function(E){return E.exec.__effect===iv.Effect}),2),h=d[0],y=d[1];(a=e.current).push.apply(a,Vb([],Xu(h.map(function(E){return[E,s]})),!1)),(l=n.current).push.apply(l,Vb([],Xu(y.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),Sc(function(){for(;n.current.length;){var i=Xu(n.current.shift(),2),s=i[0],a=i[1];Lb(s,a)}}),j.useEffect(function(){for(;e.current.length;){var i=Xu(e.current.shift(),2),s=i[0],a=i[1];Lb(s,a)}})}var Ac=function(){return Ac=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ac.apply(this,arguments)},rz=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function sz(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function oz(t,e,n){e===void 0&&(e={});var i=Pb(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,l=e.actions,c=e.activities,d=e.services,h=e.delays,y=e.state,E=rz(e,["context","guards","actions","activities","services","delays","state"]),T=Pb(function(){var b={context:s,guards:a,actions:l,activities:c,services:d,delays:h},N=i.withConfig(b,function(){return Ac(Ac({},i.context),s)});return WR(N,Ac({deferEvents:!0},E))});return Sc(function(){var b;return n&&(b=T.subscribe(sz(n))),function(){b==null||b.unsubscribe()}},[n]),Sc(function(){return T.start(y?sr.create(y):void 0),function(){T.stop()}},[]),Sc(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[l,a,c,d,h]),iz(T),T}var az=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function lz(t,e){e===void 0&&(e={});var n=j.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=oz(t,e,n),s=az(j.useState(function(){var c=i.machine.initialState;return e.state?sr.create(e.state):c}),2),a=s[0],l=s[1];return[a,i.send,i]}function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zt.apply(null,arguments)}function Dl(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Ze={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Ze.str(t)||Ze.num(t))return t===e;if(Ze.obj(t)&&Ze.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Ze.und(n)?t===e:!0}};function uz(t,e){return n=>(Ze.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function cz(){const t=j.useState(!1),e=t[1];return j.useCallback(()=>e(i=>!i),[])}function oa(t,e){return Ze.und(t)||Ze.nul(t)?e:t}function zd(t){return Ze.und(t)?[]:Ze.arr(t)?t:[t]}function Sl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ze.fun(t)?t(...n):t}function fz(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,Dl(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function ry(t){const e=fz(t);if(Ze.und(e))return Zt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Ze.und(e[s])?Zt({},i,{[s]:t[s]}):i,{});return Zt({to:e},n)}function dz(t,e){return e&&(Ze.fun(e)?e(t):Ze.obj(e)&&(e.current=t)),t}class _r{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class rv extends _r{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof _r&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof _r&&e.removeChild(this))}}class QR extends _r{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof _r&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof _r&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof _r)||(n[i]=s instanceof _r?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let L0;function hz(t,e){L0={fn:t,transform:e}}let XR;function pz(t){XR=t}let ZR=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Yh;function mz(t){Yh=t}let e1=()=>Date.now(),gz=t=>t.current,t1;function yz(t){t1=t}class vz extends QR{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Zt({},e,{style:t1(e.style)}):e,this.update=n,this.attach()}}const _z=t=>Ze.fun(t)&&!(t.prototype instanceof wn.Component),Ez=t=>j.forwardRef((n,i)=>{const s=cz(),a=j.useRef(!0),l=j.useRef(null),c=j.useRef(null),d=j.useCallback(T=>{const b=l.current,N=()=>{let P=!1;c.current&&(P=L0.fn(c.current,l.current.getAnimatedValue())),(!c.current||P===!1)&&s()};l.current=new vz(T,N),b&&b.detach()},[]);j.useEffect(()=>()=>{a.current=!1,l.current&&l.current.detach()},[]),j.useImperativeHandle(i,()=>gz(c)),d(n);const h=l.current.getValue();h.scrollTop,h.scrollLeft;const y=Dl(h,["scrollTop","scrollLeft"]),E=_z(t)?void 0:T=>c.current=dz(T,i);return wn.createElement(t,Zt({},y,{ref:E}))});let wc=!1;const pa=new Set,n1=()=>{if(!wc)return!1;let t=e1();for(let e of pa){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,l;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],y=s.toValues[c],E=d.lastPosition,T=y instanceof _r,b=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(y=y.getValue()),s.immediate){d.setValue(y),d.done=!0;continue}if(typeof h=="string"||typeof y=="string"){d.setValue(y),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(y-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(y=E);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>l+64&&(l=t);let N=Math.floor(t-l);for(let F=0;F<N;++F){let B=-s.tension*(E-y),K=-s.friction*b,X=(B+K)/s.mass;b=b+X*1/1e3,E=E+b*1/1e3}let P=s.clamp&&s.tension!==0?h<y?E>y:E<y:!1,L=Math.abs(b)<=s.precision,z=s.tension!==0?Math.abs(y-E)<=s.precision:!0;a=P||L&&z,d.lastVelocity=b,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==y&&(E=y),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(pa.delete(e),e.stop(!0))}return pa.size?ZR(n1):wc=!1,wc},Tz=t=>{pa.has(t)||pa.add(t),wc||(wc=!0,ZR(n1))},Sz=t=>{pa.has(t)&&pa.delete(t)};function Wh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Wh({range:t,output:e,extrapolate:n});if(Yh&&typeof t.output[0]=="string")return Yh(t);const i=t,s=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const y=wz(h,a);return Az(h,a[y],a[y+1],s[y],s[y+1],d,l,c,i.map)}}function Az(t,e,n,i,s,a,l,c,d){let h=d?d(t):t;if(h<e){if(l==="identity")return h;l==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function wz(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class zl extends rv{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof rv&&!(e instanceof zl)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Wh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Wh(e,n,i)}interpolate(e,n,i){return new zl(this,e,n,i)}}const pl=(t,e,n)=>t&&new zl(t,e,n),bz={default:{tension:170,friction:26}};function i1(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>i1(n,e))}class sv extends _r{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&i1(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new zl(this,e,n,i)}}class Cz extends rv{constructor(e){super(),this.payload=e.map(n=>new sv(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new zl(this,e,n)}}let Iz=0,xz=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Iz++}update(e){if(!e)return this;const n=ry(e),i=n.delay,s=i===void 0?0:i,a=n.to,l=Dl(n,["delay","to"]);if(Ze.arr(a)||Ze.fun(a))this.queue.push(Zt({},l,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],y=d[1];const E=Zt({to:{[h]:y},delay:Sl(s,h)},l),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Zt({},c[E.delay],E,{to:Zt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,l=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Ze.obj(l)&&(this.merged=Zt({},l,this.merged)),Ze.obj(d)&&(this.merged=Zt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let l=s.delay,c=Dl(s,["delay"]);const d=y=>{a===i.length-1&&n===this.guid&&y&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Ze.arr(c.to)||Ze.fun(c.to);l?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},l):h?this.runAsync(c,d):this.diff(c).start(d)})}else Ze.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),Tz(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&Sz(this),this}runAsync(e,n){var i=this;e.delay;let s=Dl(e,["delay"]);const a=this.local;let l=Promise.resolve(void 0);if(Ze.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Zt({},s,ry(s.to[d]));Ze.arr(h.config)&&(h.config=h.config[d]),l=l.then(()=>{if(a===this.guid)return new Promise(y=>this.diff(h).start(y))})}else if(Ze.fun(s.to)){let c=0,d;l=l.then(()=>s.to(h=>{const y=Zt({},s,ry(h));if(Ze.arr(y.config)&&(y.config=y.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(y).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}l.then(n)}diff(e){this.props=Zt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,l=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,y=n.attach,E=n.reset,T=n.immediate;if(h){var b=[l,s];s=b[0],l=b[1]}this.merged=Zt({},s,this.merged,l),this.hasChanged=!1;let N=y&&y(this);if(this.animations=Object.entries(this.merged).reduce((P,L)=>{let z=L[0],F=L[1],B=P[z]||{};const K=Ze.num(F),X=Ze.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!XR[F],G=Ze.arr(F),I=!K&&!G&&!X;let x=Ze.und(s[z])?F:s[z],R=K||G||X?F:1,V=Sl(d,z);N&&(R=N.animations[z].parent);let D=B.parent,O=B.interpolation,U=zd(N?R.getPayload():R),be,ve=F;I&&(ve=Yh({range:[0,1],output:[F,F]})(1));let ee=O&&O.getValue();const he=!Ze.und(D)&&B.animatedValues.some(te=>!te.done),Ie=!Ze.equ(ve,ee),Me=!Ze.equ(ve,B.previous),H=!Ze.equ(V,B.config);if(E||Me&&Ie||H){if(K||X)D=O=B.parent||new sv(x);else if(G)D=O=B.parent||new Cz(x);else if(I){let te=B.interpolation&&B.interpolation.calc(B.parent.value);te=te!==void 0&&!E?te:x,B.parent?(D=B.parent,D.setValue(0,!1)):D=new sv(0);const fe={output:[te,F]};B.interpolation?(O=B.interpolation,B.interpolation.updateConfig(fe)):O=D.interpolate(fe)}return U=zd(N?R.getPayload():R),be=zd(D.getPayload()),E&&!I&&D.setValue(x,!1),this.hasChanged=!0,be.forEach(te=>{te.startPosition=te.value,te.lastPosition=te.value,te.lastVelocity=he?te.lastVelocity:void 0,te.lastTime=he?te.lastTime:void 0,te.startTime=e1(),te.done=!1,te.animatedStyles.clear()}),Sl(T,z)&&D.setValue(I?R:F,!1),Zt({},P,{[z]:Zt({},B,{name:z,parent:D,interpolation:O,animatedValues:be,toValues:U,previous:ve,config:V,fromValues:zd(D.getValue()),immediate:Sl(T,z),initialVelocity:oa(V.velocity,0),clamp:oa(V.clamp,!1),precision:oa(V.precision,.01),tension:oa(V.tension,170),friction:oa(V.friction,26),mass:oa(V.mass,1),duration:V.duration,easing:oa(V.easing,te=>te),decay:V.decay})})}else return Ie?P:(I&&(D.setValue(1,!1),O.updateConfig({output:[ve,ve]})),D.done=!0,this.hasChanged=!0,Zt({},P,{[z]:Zt({},P[z],{previous:ve})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let P in this.animations)this.interpolations[P]=this.animations[P].interpolation,this.values[P]=this.animations[P].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const Rz=(t,e)=>{const n=j.useRef(!1),i=j.useRef(),s=Ze.fun(e),a=j.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let y;return[new Array(t).fill().map((E,T)=>{const b=new xz,N=s?Sl(e,T,b):e[T];return T===0&&(y=N.ref),b.update(N),y||b.start(),b}),y]},[t]),l=a[0],c=a[1];i.current=l,j.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(y=>new Promise(E=>y.start(E)))),stop:y=>i.current.forEach(E=>E.stop(y)),get controllers(){return i.current}}));const d=j.useMemo(()=>y=>i.current.map((E,T)=>{E.update(s?Sl(y,T,E):y[T]),c||E.start()}),[t]);j.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(y=>y.start())}),j.useEffect(()=>(n.current=!0,()=>i.current.forEach(y=>y.destroy())),[]);const h=i.current.map(y=>y.getValues());return s?[h,d,y=>i.current.forEach(E=>E.pause(y))]:h},Nz=t=>{const e=Ze.fun(t),n=Rz(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class Mz extends QR{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof _r)&&(e=L0.transform(e)),this.payload=e}}const Qh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Sr="[-+]?\\d*\\.?\\d+",Xh=Sr+"%";function Vp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const Dz=new RegExp("rgb"+Vp(Sr,Sr,Sr)),kz=new RegExp("rgba"+Vp(Sr,Sr,Sr,Sr)),Pz=new RegExp("hsl"+Vp(Sr,Xh,Xh)),Vz=new RegExp("hsla"+Vp(Sr,Xh,Xh,Sr)),Lz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Oz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Uz=/^#([0-9a-fA-F]{6})$/,Fz=/^#([0-9a-fA-F]{8})$/;function Bz(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Uz.exec(t))?parseInt(e[1]+"ff",16)>>>0:Qh.hasOwnProperty(t)?Qh[t]:(e=Dz.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|255)>>>0:(e=kz.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|Fb(e[4]))>>>0:(e=Lz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Fz.exec(t))?parseInt(e[1],16)>>>0:(e=Oz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Pz.exec(t))?(Ob(Ub(e[1]),Hd(e[2]),Hd(e[3]))|255)>>>0:(e=Vz.exec(t))?(Ob(Ub(e[1]),Hd(e[2]),Hd(e[3]))|Fb(e[4]))>>>0:null}function sy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ob(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=sy(s,i,t+1/3),l=sy(s,i,t),c=sy(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function ml(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Ub(t){return(parseFloat(t)%360+360)%360/360}function Fb(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Hd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Bb(t){let e=Bz(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const Gd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,zz=new RegExp(`(${Object.keys(Qh).join("|")})`,"g"),Hz=t=>{const e=t.output.map(s=>s.replace(qz,Bb)).map(s=>s.replace(zz,Bb)),n=e[0].match(Gd).map(()=>[]);e.forEach(s=>{s.match(Gd).forEach((a,l)=>n[l].push(+a))});const i=e[0].match(Gd).map((s,a)=>Wh(Zt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(Gd,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,h,y)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${y})`)}};let bc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Gz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),$z=["Webkit","Ms","Moz","O"];bc=Object.keys(bc).reduce((t,e)=>($z.forEach(n=>t[Gz(n,e)]=t[e]),t),bc);function jz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(bc.hasOwnProperty(t)&&bc[t])?e+"px":(""+e).trim()}const qb={};yz(t=>new Mz(t));mz(Hz);pz(Qh);hz((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,l=e.scrollTop,c=e.scrollLeft,d=Dl(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let y in s)if(s.hasOwnProperty(y)){var n=y.indexOf("--")===0,i=jz(y,s[y],n);y==="float"&&(y="cssFloat"),n?t.style.setProperty(y,i):t.style[y]=i}for(let y in d){const E=h?y:qb[y]||(qb[y]=y.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[y])}return}else return!1},t=>t);const Kz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Jz=uz(Ez),Yz=Jz(Kz);function zb(t,e){return t.map(function(n,i){return n+e[i]})}function r1(t,e){return t.map(function(n,i){return n-e[i]})}function ov(t){return Math.hypot.apply(Math,t)}function Wz(t,e,n){var i=ov(e),s=i===0?0:1/i,a=n===0?0:1/n,l=a*i,c=e.map(function(y){return a*y}),d=e.map(function(y){return s*y}),h=ov(t);return{velocities:c,velocity:l,distance:h,direction:d}}function av(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Qz(t,e,n){return Math.max(e,Math.min(t,n))}function Xz(t,e){return Math.pow(t,e*5)}function Hb(t,e,n){return e===0||Math.abs(e)===1/0?Xz(t,n):t*e*n/(e+n*t)}function Cc(t,e,n,i){return i===void 0&&(i=.15),i===0?Qz(t,e,n):t<e?-Hb(e-t,n-e,i)+e:t>n?+Hb(t-n,n-e,i)+n:t}function Zz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function eH(t,e,n){return e&&Zz(t.prototype,e),t}function pi(){return pi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pi.apply(this,arguments)}function s1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function tH(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function $d(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nH(t,e){if(t){if(typeof t=="string")return Gb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gb(t,e)}}function Gb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=nH(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function o1(){}function a1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?o1:e.length===1?e[0]:function(){for(var i,s=Lp(e),a;!(a=s()).done;){var l=a.value;i=l.apply(this,arguments)||i}return i}}function po(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function jd(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function O0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],l=a[0],c=a[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=O0(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var iH=180,rH=.15,sH=.5,oH=60,aH={threshold:function(e){return e===void 0&&(e=0),po(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return po(rH);case!1:return po(0);default:return po(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:po(e)}},l1=pi({},aH,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return l1.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,l=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,y=h===void 0?1/0:h;return[[s,l],[d,y]]}}),lH=typeof window<"u"&&window.document&&window.document.createElement,uH={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=lH?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,l=a===void 0?!1:a;return{passive:s,capture:l}}},cH=pi({},l1,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,h=d===void 0?void 0:d,y=po(e,a?3:c||h?1:0);return this.filterTaps=a||y[0]+y[1]>0,y},swipeVelocity:function(e){return e===void 0&&(e=sH),po(e)},swipeDistance:function(e){return e===void 0&&(e=oH),po(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return iH;case!1:return 0;default:return e}}});function fH(t){return t===void 0&&(t={}),O0(t,uH)}function dH(t){return t===void 0&&(t={}),O0(t,cH)}function hH(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=tH(t,["domTarget","eventOptions","window","enabled"]),l=fH({domTarget:e,eventOptions:n,window:i,enabled:s});return l.drag=dH(a),l}function Zu(t){return pi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:o1,canceled:!1,memo:void 0,args:void 0},t)}function u1(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Zu({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var la=new Map,pH=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,l){var c;l===void 0&&(l=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),y=2;y<d;y++)h[y-2]=arguments[y];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,l].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var l=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!l,s.state.last=l&&!c,s.controller.state.shared[s.ingKey]=c}var d=pi({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,l=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,y=h._bounds,E=h._initial,T=h._active,b=h._intentional,N=h.lastOffset,P=h.movement,L=this.getInternalMovement(i,this.state),z=b[0]===!1?$b(L[0],d[0]):b[0],F=b[1]===!1?$b(L[1],d[1]):b[1],B=this.checkIntentionality([z,F],L);if(B._blocked)return pi({},B,{_movement:L,delta:[0,0]});var K=B._intentional,X=L,G,I;if(K[0]!==!1&&b[0]===!1&&(I=jd(a,this.state),G=jd(l,this.state),E[0]=I[0],y[0]=G[0]),K[1]!==!1&&b[1]===!1){var x,R;I=(x=I)!=null?x:jd(a,this.state),G=(R=G)!=null?R:jd(l,this.state),E[1]=I[1],y[1]=G[1]}var V=[K[0]!==!1?L[0]-K[0]:E[0],K[1]!==!1?L[1]-K[1]:E[1]],D=zb(V,N),O=T?c:[0,0];return V=jb(y,zb(V,E),O),pi({},B,{intentional:K[0]!==!1||K[1]!==!1,_initial:E,_movement:X,movement:V,values:i,offset:jb(y,D,O),delta:r1(V,P)})},e.clean=function(){this.clearTimeout()},eH(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function $b(t,e){return Math.abs(t)>=e?av(t)*e:!1}function jb(t,e,n){var i=e[0],s=e[1],a=n[0],l=n[1],c=t[0],d=c[0],h=c[1],y=t[1],E=y[0],T=y[1];return[Cc(i,d,h,a),Cc(s,E,T,l)]}function oy(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,l=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:l,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function mH(t,e,n){var i=t.state.offset,s=n.timeStamp;return pi({},u1()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function gH(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,pi({},e,{event:n})].concat(s))}}var yH=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];for(var c=Lp(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var y=0,E=Object.entries(n.nativeRefs);y<E.length;y++){var T=E[y],b=T[0],N=T[1];lv(i,b,gH(N,pi({},n.state.shared,{args:a})))}return n.config.domTarget?TH(n,i):SH(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=f1(n.config),s=n.config.eventOptions;i&&of(i,c1(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),vH(n)},this.state=u1(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function vH(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var l=s[a];of(n,l,i)}t.windowListeners={}}}function _H(t,e){var n=t.config,i=t.windowListeners;n.window&&(of(n.window,i[e],n.eventOptions),delete i[e])}function EH(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(of(i.window,s[e],i.eventOptions),d1(i.window,s[e]=n,i.eventOptions))}function TH(t,e){var n=t.config,i=t.domListeners,s=f1(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;of(s,c1(i),a);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],h=d[0],y=d[1],E=h.slice(2).toLowerCase();i.push([E,a1.apply(void 0,y)])}d1(s,i,a)}function SH(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,l=Object.entries(e);a<l.length;a++){var c=l[a],d=c[0],h=c[1],y=Array.isArray(h)?h:[h],E=d+s;i[E]=a1.apply(void 0,y)}return i}function c1(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function f1(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function lv(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function d1(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Lp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.addEventListener(l,c,n)}}function of(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Lp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.removeEventListener(l,c,n)}}function AH(t,e,n){n===void 0&&(n={});var i=bH(t),s=wn.useMemo(function(){return new yH(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,wn.useEffect(s.effect,[]),s.config.domTarget?wH:s.bind}function wH(){}function bH(t){var e=new Set;return t.drag&&e.add(la.get("drag")),t.wheel&&e.add(la.get("wheel")),t.scroll&&e.add(la.get("scroll")),t.move&&e.add(la.get("move")),t.pinch&&e.add(la.get("pinch")),t.hover&&e.add(la.get("hover")),e}var CH=(function(t){s1(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return r1(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var l=a.map(Math.abs),c=l[0],d=l[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var l=this.getMovement(s);if(!l._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(l,Wz(l.movement,l.delta,c))}return l},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(pH);function h1(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function Kb(t){var e="buttons"in t?t.buttons:0,n=h1(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:l,metaKey:c,ctrlKey:d}}function Jb(t){var e=h1(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var IH=3,xH=220,RH=(function(t){s1(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(EH(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind($d(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=Kb(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var l=Jb(s),c=i.getKinematics(l,s),d=oy($d(i),s),h=i.state._isTap,y=ov(c._movement);h&&y>=IH&&(h=!1),i.updateGestureState(pi({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],h=i.state.movement,y=h[0],E=h[1],T=i.state._intentional,b=T[0],N=T[1],P=i.config.swipeVelocity,L=P[0],z=P[1],F=i.config.swipeDistance,B=F[0],K=F[1],X=pi({},oy($d(i),s),i.getMovement(i.state.values)),G=[0,0];X.elapsedTime<xH&&(b!==!1&&Math.abs(c)>L&&Math.abs(y)>B&&(G[0]=av(c)),N!==!1&&Math.abs(d)>z&&Math.abs(E)>K&&(G[1]=av(d))),i.updateGestureState(pi({},X,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call($d(i)),i.state._delayedEvent=!1,_H(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=Jb(s);this.updateSharedState(Kb(s)),this.updateGestureState(pi({},mH(this,a,s),oy(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(lv(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";lv(s,a,this.onClick)}},e})(CH);function NH(t,e){var n,i=[],s,a=!1;function l(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return l}function gh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!gh(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!gh(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!gh(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function MH(t,e){try{return gh(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function DH(t,e){e===void 0&&(e={}),la.set("drag",RH);var n=j.useRef();return n.current||(n.current=NH(hH,MH)),AH({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var p1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Zh=p1.join(","),m1=typeof Element>"u",Aa=m1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,uv=!m1&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},g1=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Zh));return n&&Aa.call(e,Zh)&&s.unshift(e),s=s.filter(i),s},y1=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:l,candidates:h})}else{var y=Aa.call(l,Zh);y&&i.filter(l)&&(n||!e.includes(l))&&s.push(l);var E=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(E&&T){var b=t(E===!0?l.children:E.children,!0,i);i.flatten?s.push.apply(s,b):s.push({scope:l,candidates:b})}else a.unshift.apply(a,l.children)}}return s},v1=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},kH=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},_1=function(e){return e.tagName==="INPUT"},PH=function(e){return _1(e)&&e.type==="hidden"},VH=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},LH=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},OH=function(e){if(!e.name)return!0;var n=e.form||uv(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=LH(s,e.form);return!a||a===e},UH=function(e){return _1(e)&&e.type==="radio"},FH=function(e){return UH(e)&&!OH(e)},Yb=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},BH=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=Aa.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(Aa.call(l,"details:not([open]) *"))return!0;var c=uv(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var y=e.parentElement,E=uv(e);if(y&&!y.shadowRoot&&s(y)===!0)return Yb(e);e.assignedSlot?e=e.assignedSlot:!y&&E!==e.ownerDocument?e=E.host:e=y}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return Yb(e);return!1},qH=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return Aa.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},ep=function(e,n){return!(n.disabled||PH(n)||BH(n,e)||VH(n)||qH(n))},cv=function(e,n){return!(FH(n)||v1(n)<0||!ep(e,n))},zH=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},HH=function t(e){var n=[],i=[];return e.forEach(function(s,a){var l=!!s.scope,c=l?s.scope:s,d=v1(c,l),h=l?t(s.candidates):c;d===0?l?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:l,content:h})}),i.sort(kH).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},GH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=y1([e],n.includeContainer,{filter:cv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:zH}):i=g1(e,n.includeContainer,cv.bind(null,n)),HH(i)},$H=function(e,n){n=n||{};var i;return n.getShadowRoot?i=y1([e],n.includeContainer,{filter:ep.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=g1(e,n.includeContainer,ep.bind(null,n)),i},Kd=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Aa.call(e,Zh)===!1?!1:cv(n,e)},jH=p1.concat("iframe").join(","),ay=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Aa.call(e,jH)===!1?!1:ep(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Wb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Qb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wb(Object(n),!0).forEach(function(i){KH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function KH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xb=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),JH=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},YH=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},WH=function(e){return e.key==="Tab"||e.keyCode===9},Zb=function(e){return setTimeout(e,0)},eC=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},ec=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},Jd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},QH=function(e,n){var i=(n==null?void 0:n.document)||document,s=Qb({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,x){return G&&G[I]!==void 0?G[I]:s[x||I]},d=function(G){return a.containerGroups.findIndex(function(I){var x=I.container,R=I.tabbableNodes;return x.contains(G)||R.find(function(V){return V===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var x=arguments.length,R=new Array(x>1?x-1:0),V=1;V<x;V++)R[V-1]=arguments[V];I=I.apply(void 0,R)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var D=I;if(typeof I=="string"&&(D=i.querySelector(I),!D))throw new Error("`".concat(G,"` as selector refers to no known node"));return D},y=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],x=I&&I.firstTabbableNode;G=x||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=GH(G,s.tabbableOptions),x=$H(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:x,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=x.findIndex(function(U){return U===V});if(!(O<0))return D?x.slice(O+1).find(function(U){return Kd(U,s.tabbableOptions)}):x.slice(0,O).reverse().find(function(U){return Kd(U,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function X(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){X(y());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,JH(G)&&G.select()}},b=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},N=function(G){var I=Jd(G);if(!(d(I)>=0)){if(ec(s.clickOutsideDeactivates,G)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!ay(I,s.tabbableOptions)});return}ec(s.allowOutsideClick,G)||G.preventDefault()}},P=function(G){var I=Jd(G),x=d(I)>=0;x||I instanceof Document?x&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||y()))},L=function(G){var I=Jd(G);E();var x=null;if(a.tabbableGroups.length>0){var R=d(I),V=R>=0?a.containerGroups[R]:void 0;if(R<0)G.shiftKey?x=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:x=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var D=eC(a.tabbableGroups,function(ce){var he=ce.firstTabbableNode;return I===he});if(D<0&&(V.container===I||ay(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(D=R),D>=0){var O=D===0?a.tabbableGroups.length-1:D-1,U=a.tabbableGroups[O];x=U.lastTabbableNode}}else{var be=eC(a.tabbableGroups,function(ce){var he=ce.lastTabbableNode;return I===he});if(be<0&&(V.container===I||ay(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!V.nextTabbableNode(I))&&(be=R),be>=0){var ve=be===a.tabbableGroups.length-1?0:be+1,ee=a.tabbableGroups[ve];x=ee.firstTabbableNode}}}else x=h("fallbackFocus");x&&(G.preventDefault(),T(x))},z=function(G){if(YH(G)&&ec(s.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(WH(G)){L(G);return}},F=function(G){var I=Jd(G);d(I)>=0||ec(s.clickOutsideDeactivates,G)||ec(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},B=function(){if(a.active)return Xb.activateTrap(l),a.delayInitialFocusTimer=s.delayInitialFocus?Zb(function(){T(y())}):T(y()),i.addEventListener("focusin",P,!0),i.addEventListener("mousedown",N,{capture:!0,passive:!1}),i.addEventListener("touchstart",N,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",z,{capture:!0,passive:!1}),l},K=function(){if(a.active)return i.removeEventListener("focusin",P,!0),i.removeEventListener("mousedown",N,!0),i.removeEventListener("touchstart",N,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",z,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),x=c(G,"onPostActivate"),R=c(G,"checkCanFocusTrap");R||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){R&&E(),B(),x&&x()};return R?(R(a.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(G){if(!a.active)return this;var I=Qb({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,K(),a.active=!1,a.paused=!1,Xb.deactivateTrap(l);var x=c(I,"onDeactivate"),R=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),D=c(I,"returnFocus","returnFocusOnDeactivate");x&&x();var O=function(){Zb(function(){D&&T(b(a.nodeFocusedBeforeActivation)),R&&R()})};return D&&V?(V(b(a.nodeFocusedBeforeActivation)).then(O,O),this):(O(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,K(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),B(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(x){return typeof x=="string"?i.querySelector(x):x}),a.active&&E(),this}},l.updateContainerElements(e),l};function XH(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var U0=!1;if(typeof window<"u"){var tC={get passive(){U0=!0}};window.addEventListener("testPassive",null,tC),window.removeEventListener("testPassive",null,tC)}var E1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),go=[],tp=!1,T1=-1,Ic=void 0,xc=void 0,S1=function(e){return go.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},np=function(e){var n=e||window.event;return S1(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},ZH=function(e){if(xc===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(xc=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Ic===void 0&&(Ic=document.body.style.overflow,document.body.style.overflow="hidden")},e8=function(){xc!==void 0&&(document.body.style.paddingRight=xc,xc=void 0),Ic!==void 0&&(document.body.style.overflow=Ic,Ic=void 0)},t8=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},n8=function(e,n){var i=e.targetTouches[0].clientY-T1;return S1(e.target)?!1:n&&n.scrollTop===0&&i>0||t8(n)&&i<0?np(e):(e.stopPropagation(),!0)},i8=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!go.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};go=[].concat(XH(go),[i]),E1?(e.ontouchstart=function(s){s.targetTouches.length===1&&(T1=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&n8(s,e)},tp||(document.addEventListener("touchmove",np,U0?{passive:!1}:void 0),tp=!0)):ZH(n)}},r8=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}go=go.filter(function(n){return n.targetElement!==e}),E1?(e.ontouchstart=null,e.ontouchmove=null,tp&&go.length===0&&(document.removeEventListener("touchmove",np,U0?{passive:!1}:void 0),tp=!1)):go.length||e8()},ma=[],s8=function(){return ma.some(function(t){return t.activeTargets.length>0})},o8=function(){return ma.some(function(t){return t.skippedTargets.length>0})},nC="ResizeObserver loop completed with undelivered notifications.",a8=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:nC}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=nC),window.dispatchEvent(t)},zc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(zc||(zc={}));var ga=function(t){return Object.freeze(t)},l8=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ga(this)}return t})(),A1=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ga(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,l=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:l,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),F0=function(t){return t instanceof SVGElement&&"getBBox"in t},w1=function(t){if(F0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,l=s.offsetHeight;return!(a||l||t.getClientRects().length)},iC=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},u8=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rc=typeof window<"u"?window:{},Yd=new WeakMap,rC=/auto|scroll/,c8=/^tb|vertical/,f8=/msie|trident/i.test(Rc.navigator&&Rc.navigator.userAgent),Lr=function(t){return parseFloat(t||"0")},kl=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new l8((n?e:t)||0,(n?t:e)||0)},sC=ga({devicePixelContentBoxSize:kl(),borderBoxSize:kl(),contentBoxSize:kl(),contentRect:new A1(0,0,0,0)}),b1=function(t,e){if(e===void 0&&(e=!1),Yd.has(t)&&!e)return Yd.get(t);if(w1(t))return Yd.set(t,sC),sC;var n=getComputedStyle(t),i=F0(t)&&t.ownerSVGElement&&t.getBBox(),s=!f8&&n.boxSizing==="border-box",a=c8.test(n.writingMode||""),l=!i&&rC.test(n.overflowY||""),c=!i&&rC.test(n.overflowX||""),d=i?0:Lr(n.paddingTop),h=i?0:Lr(n.paddingRight),y=i?0:Lr(n.paddingBottom),E=i?0:Lr(n.paddingLeft),T=i?0:Lr(n.borderTopWidth),b=i?0:Lr(n.borderRightWidth),N=i?0:Lr(n.borderBottomWidth),P=i?0:Lr(n.borderLeftWidth),L=E+h,z=d+y,F=P+b,B=T+N,K=c?t.offsetHeight-B-t.clientHeight:0,X=l?t.offsetWidth-F-t.clientWidth:0,G=s?L+F:0,I=s?z+B:0,x=i?i.width:Lr(n.width)-G-X,R=i?i.height:Lr(n.height)-I-K,V=x+L+X+F,D=R+z+K+B,O=ga({devicePixelContentBoxSize:kl(Math.round(x*devicePixelRatio),Math.round(R*devicePixelRatio),a),borderBoxSize:kl(V,D,a),contentBoxSize:kl(x,R,a),contentRect:new A1(E,d,x,R)});return Yd.set(t,O),O},C1=function(t,e,n){var i=b1(t,n),s=i.borderBoxSize,a=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case zc.DEVICE_PIXEL_CONTENT_BOX:return l;case zc.BORDER_BOX:return s;default:return a}},d8=(function(){function t(e){var n=b1(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ga([n.borderBoxSize]),this.contentBoxSize=ga([n.contentBoxSize]),this.devicePixelContentBoxSize=ga([n.devicePixelContentBoxSize])}return t})(),I1=function(t){if(w1(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},h8=function(){var t=1/0,e=[];ma.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(h){var y=new d8(h.target),E=I1(h.target);c.push(y),h.lastReportedSize=C1(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},oC=function(t){ma.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(I1(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},p8=function(){var t=0;for(oC(t);s8();)t=h8(),oC(t);return o8()&&a8(),t>0},ly,x1=[],m8=function(){return x1.splice(0).forEach(function(t){return t()})},g8=function(t){if(!ly){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return m8()}).observe(n,i),ly=function(){n.textContent="".concat(e?e--:e++)}}x1.push(t),ly()},y8=function(t){g8(function(){requestAnimationFrame(t)})},yh=0,v8=function(){return!!yh},_8=250,E8={attributes:!0,characterData:!0,childList:!0,subtree:!0},aC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],lC=function(t){return t===void 0&&(t=0),Date.now()+t},uy=!1,T8=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=_8),!uy){uy=!0;var i=lC(e);y8(function(){var s=!1;try{s=p8()}finally{if(uy=!1,e=i-lC(),!v8())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,E8)};document.body?n():Rc.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),aC.forEach(function(n){return Rc.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),aC.forEach(function(n){return Rc.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),fv=new T8,uC=function(t){!yh&&t>0&&fv.start(),yh+=t,!yh&&fv.stop()},S8=function(t){return!F0(t)&&!u8(t)&&getComputedStyle(t).display==="inline"},A8=(function(){function t(e,n){this.target=e,this.observedBox=n||zc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=C1(this.target,this.observedBox,!0);return S8(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),w8=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Wd=new WeakMap,cC=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Qd=(function(){function t(){}return t.connect=function(e,n){var i=new w8(e,n);Wd.set(e,i)},t.observe=function(e,n,i){var s=Wd.get(e),a=s.observationTargets.length===0;cC(s.observationTargets,n)<0&&(a&&ma.push(s),s.observationTargets.push(new A8(n,i&&i.box)),uC(1),fv.schedule())},t.unobserve=function(e,n){var i=Wd.get(e),s=cC(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&ma.splice(ma.indexOf(i),1),i.observationTargets.splice(s,1),uC(-1))},t.disconnect=function(e){var n=this,i=Wd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),b8=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Qd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!iC(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Qd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!iC(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Qd.unobserve(this,e)},t.prototype.disconnect=function(){Qd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Qn(){return Qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qn.apply(this,arguments)}function vh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var Nc=typeof window<"u"?j.useLayoutEffect:j.useEffect;function tc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Xd(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var C8={box:"border-box"};function cy(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=j.useState(0),l=a[0],c=a[1];j.useDebugValue(n+": "+l);var d=j.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return Nc(function(){if(t.current&&i){var h=new b8(d);return h.observe(t.current,C8),function(){h.disconnect()}}},[t,d,i]),i?l:0}function Wn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var fC={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},dC={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},I8=Xq({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:Qn({},fC,dC)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:Qn({},fC,dC)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:Qn({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[Zq({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),x8=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],R8=["velocity"],N8=["onRest","config"],R1=bz.default,M8=R1.tension,Zd=R1.friction,D8=wn.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,l=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,y=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,N=b===void 0?P8:b,P=t.snapPoints,L=P===void 0?V8:P,z=t.blocking,F=z===void 0||z,B=t.scrollLocking,K=B===void 0||B,X=t.style,G=t.onSpringStart,I=t.onSpringCancel,x=t.onSpringEnd,R=t.reserveScrollBarGap,V=R===void 0?F:R,D=t.expandOnContentDrag,O=D!==void 0&&D,U=vh(t,x8),be=(function(){var oe=j.useState(!1),Te=oe[0],Se=oe[1],$e=j.useState({}),St=$e[0],Ye=$e[1],We=j.useCallback(function(at){return Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!1,ke))}),function(){Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!0,ke))})}},[]);return j.useEffect(function(){var at=Object.values(St);at.length!==0&&at.every(Boolean)&&Se(!0)},[St]),{ready:Te,registerReady:We}})(),ve=be.ready,ee=be.registerReady,ce=j.useRef(!1),he=j.useRef(G),Ie=j.useRef(I),Me=j.useRef(x);j.useEffect(function(){he.current=G,Ie.current=I,Me.current=x},[I,G,x]);var H,te,fe=Nz(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),pe=fe[0],we=fe[1],De=j.useRef(null),Ue=j.useRef(null),jt=j.useRef(null),xe=j.useRef(null),Cn=j.useRef(null),ut=j.useRef(null),_n=j.useRef(0),Ln=j.useRef(),In=j.useRef(!1),En=(H=j.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),te=j.useRef(H==null?void 0:H.matches),j.useDebugValue(te.current?"reduce":"no-preference"),j.useEffect(function(){var oe=function(Te){te.current=Te.matches};return H==null||H.addListener(oe),function(){return H==null?void 0:H.removeListener(oe)}},[H]),te),xn=(function(oe){var Te=oe.targetRef,Se=oe.enabled,$e=oe.reserveScrollBarGap,St=j.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return j.useDebugValue(Se?"Enabled":"Disabled"),j.useEffect(function(){if(!Se)return St.current.deactivate(),void(St.current={activate:function(){},deactivate:function(){}});var Ye=Te.current,We=!1;St.current={activate:function(){We||(We=!0,i8(Ye,{allowTouchMove:function(at){return at.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:$e}))},deactivate:function(){We&&(We=!1,r8(Ye))}}},[Se,Te,$e]),St})({targetRef:Ue,enabled:ve&&K,reserveScrollBarGap:V}),qi=(function(oe){var Te=oe.targetRef,Se=oe.enabled,$e=j.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return j.useDebugValue(Se?"Enabled":"Disabled"),j.useEffect(function(){if(!Se)return $e.current.deactivate(),void($e.current={activate:function(){},deactivate:function(){}});var St=Te.current,Ye=!1,We=[],at=[];$e.current={activate:function(){if(!Ye){Ye=!0;var rt=St.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==rt){var je=ke.getAttribute("aria-hidden");je!==null&&je!=="false"||(We.push(je),at.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Ye&&(Ye=!1,at.forEach(function(rt,ke){var je=We[ke];je===null?rt.removeAttribute("aria-hidden"):rt.setAttribute("aria-hidden",je)}),We=[],at=[])}}},[Te,Se]),$e})({targetRef:De,enabled:ve&&F}),Ci=(function(oe){var Te=oe.targetRef,Se=oe.fallbackRef,$e=oe.initialFocusRef,St=oe.enabled,Ye=j.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return j.useDebugValue(St?"Enabled":"Disabled"),j.useEffect(function(){if(!St)return Ye.current.deactivate(),void(Ye.current={activate:function(){},deactivate:function(){}});var We=Se.current,at=QH(Te.current,{onActivate:void 0,initialFocus:$e?function(){return($e==null?void 0:$e.current)||We}:void 0,fallbackFocus:We,escapeDeactivates:!1,clickOutsideDeactivates:!1}),rt=!1;Ye.current={activate:function(){try{return rt?Promise.resolve():(rt=!0,Promise.resolve(at.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){rt&&(rt=!1,at.deactivate())}}},[St,Se,$e,Te]),Ye})({targetRef:De,fallbackRef:ut,initialFocusRef:y||void 0,enabled:ve&&F&&y!==!1}),mi=(function(oe){var Te=oe.getSnapPoints,Se=oe.heightRef,$e=oe.lastSnapRef,St=oe.ready,Ye=(function(kt){var At=kt.contentRef,ri=kt.controlledMaxHeight,Ht=kt.footerEnabled,jn=kt.footerRef,Gi=kt.headerEnabled,On=kt.headerRef,si=kt.registerReady,jr=kt.resizeSourceRef,Ii=j.useMemo(function(){return si("contentHeight")},[si]),Vt=(function(fr,ji,Ki){var gi=j.useMemo(function(){return ji("maxHeight")},[ji]),Ji=j.useState(function(){return Xd(fr)||typeof window<"u"?window.innerHeight:0}),Ir=Ji[0],oi=Ji[1],Gt=Ir>0,dr=j.useRef(0);return j.useDebugValue(fr?"controlled":"auto"),j.useEffect(function(){Gt&&gi()},[Gt,gi]),Nc(function(){if(fr)return oi(Xd(fr)),void(Ki.current="maxheightprop");var hr=function(){dr.current||(dr.current=requestAnimationFrame(function(){oi(window.innerHeight),Ki.current="window",dr.current=0}))};return window.addEventListener("resize",hr),oi(window.innerHeight),Ki.current="window",gi(),function(){window.removeEventListener("resize",hr),cancelAnimationFrame(dr.current)}},[fr,gi,Ki]),Ir})(ri,si,jr),sn=cy(On,{label:"headerHeight",enabled:Gi,resizeSourceRef:jr}),xi=cy(At,{label:"contentHeight",enabled:!0,resizeSourceRef:jr}),$i=cy(jn,{label:"footerHeight",enabled:Ht,resizeSourceRef:jr}),Ri=Math.min(Vt-sn-$i,xi)+sn+$i;j.useDebugValue("minHeight: "+Ri);var Lo=xi>0;return j.useEffect(function(){Lo&&Ii()},[Lo,Ii]),{maxHeight:Vt,minHeight:Ri,headerHeight:sn,footerHeight:$i}})({contentRef:oe.contentRef,controlledMaxHeight:oe.controlledMaxHeight,footerEnabled:oe.footerEnabled,footerRef:oe.footerRef,headerEnabled:oe.headerEnabled,headerRef:oe.headerRef,registerReady:oe.registerReady,resizeSourceRef:oe.resizeSourceRef}),We=Ye.maxHeight,at=Ye.minHeight,rt=Ye.headerHeight,ke=Ye.footerHeight,je=(function(kt,At){var ri=[].concat(kt).map(Xd).reduce(function(On,si){return On.add(tc(si,0,At)),On},new Set),Ht=Array.from(ri),jn=Math.min.apply(Math,Ht);if(Number.isNaN(jn))throw new TypeError("minSnap is NaN");var Gi=Math.max.apply(Math,Ht);if(Number.isNaN(Gi))throw new TypeError("maxSnap is NaN");return{snapPoints:Ht,minSnap:jn,maxSnap:Gi}})(St?Te({height:Se.current,footerHeight:ke,headerHeight:rt,minHeight:at,maxHeight:We}):[0],We),Sn=je.snapPoints,Hi=je.minSnap,rn=je.maxSnap;return j.useDebugValue("minSnap: "+Hi+", maxSnap:"+rn),{minSnap:Hi,maxSnap:rn,findSnap:function(kt){var At=Xd(typeof kt=="function"?kt({footerHeight:ke,headerHeight:rt,height:Se.current,minHeight:at,maxHeight:We,snapPoints:Sn,lastSnap:$e.current}):kt);return Sn.reduce(function(ri,Ht){return Math.abs(Ht-At)<Math.abs(ri-At)?Ht:ri},Hi)},maxHeight:We}})({contentRef:jt,controlledMaxHeight:T,footerEnabled:!!a,footerRef:Cn,getSnapPoints:L,headerEnabled:l!==!1,headerRef:xe,heightRef:_n,lastSnapRef:h,ready:ve,registerReady:ee,resizeSourceRef:Ln}),ni=mi.minSnap,ii=mi.maxSnap,cr=mi.maxHeight,zi=mi.findSnap,ct=j.useRef(cr),Tn=j.useRef(ni),ze=j.useRef(ii),Ct=j.useRef(zi),Yt=j.useRef(0);Nc(function(){ct.current=cr,ze.current=ii,Tn.current=ni,Ct.current=zi,Yt.current=zi(N)},[zi,N,cr,ii,ni]);var me=j.useCallback(function(oe){var Te=oe.onRest,Se=oe.config,$e=(Se=Se===void 0?{}:Se).velocity,St=$e===void 0?1:$e,Ye=vh(Se,R8),We=vh(oe,N8);return new Promise(function(at){return we(Qn({},We,{config:Qn({velocity:St},Ye,{mass:1,tension:M8,friction:Math.max(Zd,Zd+(Zd-Zd*St))}),onRest:function(){var rt=[].slice.call(arguments);at.apply(void 0,rt),Te==null||Te.apply(void 0,rt)}}))})},[we]),ft=lz(I8,{devTools:!1,actions:{onOpenCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"OPEN"})},[]),onSnapCancel:j.useCallback(function(oe){return Ie.current==null?void 0:Ie.current({type:"SNAP",source:oe.snapSource})},[]),onCloseCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"CLOSE"})},[]),onResizeCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"RESIZE",source:Ln.current})},[]),onOpenEnd:j.useCallback(function(){return Me.current==null?void 0:Me.current({type:"OPEN"})},[]),onSnapEnd:j.useCallback(function(oe,Te){return Me.current==null?void 0:Me.current({type:"SNAP",source:oe.snapSource})},[]),onResizeEnd:j.useCallback(function(){return Me.current==null?void 0:Me.current({type:"RESIZE",source:Ln.current})},[])},context:{initialState:d},services:{onSnapStart:j.useCallback(function(oe,Te){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:Te.payload.source||"custom"}))}catch(Se){return Promise.reject(Se)}},[]),onOpenStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:Ln.current}))}catch(oe){return Promise.reject(oe)}},[]),onSnapEnd:j.useCallback(function(oe,Te){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"SNAP",source:oe.snapSource}))}catch(Se){return Promise.reject(Se)}},[]),onOpenEnd:j.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseEnd:j.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeEnd:j.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"RESIZE",source:Ln.current}))}catch(oe){return Promise.reject(oe)}},[]),renderVisuallyHidden:j.useCallback(function(oe,Te){try{return Promise.resolve(me({y:Yt.current,ready:0,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(Se){return Promise.reject(Se)}},[me]),activate:j.useCallback(function(oe,Te){try{return ce.current=!0,Promise.resolve(Promise.all([xn.current.activate(),Ci.current.activate(),qi.current.activate()])).then(function(){})}catch(Se){return Promise.reject(Se)}},[qi,Ci,xn]),deactivate:j.useCallback(function(){try{return xn.current.deactivate(),Ci.current.deactivate(),qi.current.deactivate(),ce.current=!1,Promise.resolve()}catch(oe){return Promise.reject(oe)}},[qi,Ci,xn]),openImmediately:j.useCallback(function(){try{return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(oe){return Promise.reject(oe)}},[me]),openSmoothly:j.useCallback(function(){try{return Promise.resolve(me({y:0,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:En.current})).then(function(){})})}catch(oe){return Promise.reject(oe)}},[me,En]),snapSmoothly:j.useCallback(function(oe,Te){try{var Se=Ct.current(oe.y);return _n.current=Se,h.current=Se,Promise.resolve(me({y:Se,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:En.current,config:{velocity:oe.velocity}})).then(function(){})}catch($e){return Promise.reject($e)}},[me,h,En]),resizeSmoothly:j.useCallback(function(){try{var oe=Ct.current(_n.current);return _n.current=oe,h.current=oe,Promise.resolve(me({y:oe,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:Ln.current!=="element"||En.current})).then(function(){})}catch(Te){return Promise.reject(Te)}},[me,h,En]),closeSmoothly:j.useCallback(function(oe,Te){try{return me({minSnap:_n.current,immediate:!0}),_n.current=0,Promise.resolve(me({y:0,maxHeight:ct.current,maxSnap:ze.current,immediate:En.current})).then(function(){return Promise.resolve(me({ready:0,immediate:!0})).then(function(){})})}catch(Se){return Promise.reject(Se)}},[me,En])}}),nn=ft[0],It=ft[1];j.useEffect(function(){ve&&It(c?"OPEN":"CLOSE")},[c,It,ve]),Nc(function(){(cr||ii||ni)&&It("RESIZE")},[cr,ii,ni,It]),j.useEffect(function(){return function(){xn.current.deactivate(),Ci.current.deactivate(),qi.current.deactivate()}},[qi,Ci,xn]),j.useImperativeHandle(e,function(){return{snapTo:function(oe,Te){var Se=Te===void 0?{}:Te,$e=Se.velocity,St=$e===void 0?1:$e,Ye=Se.source,We=Ye===void 0?"custom":Ye;It("SNAP",{payload:{y:Ct.current(oe),velocity:St,source:We}})},get height(){return _n.current}}},[It]),j.useEffect(function(){var oe=Ue.current,Te=function($e){In.current&&$e.preventDefault()},Se=function($e){oe.scrollTop<0&&(requestAnimationFrame(function(){oe.style.overflow="hidden",oe.scrollTop=0,oe.style.removeProperty("overflow")}),$e.preventDefault())};return O&&(oe.addEventListener("scroll",Te),oe.addEventListener("touchmove",Te),oe.addEventListener("touchstart",Se)),function(){oe.removeEventListener("scroll",Te),oe.removeEventListener("touchmove",Te),oe.removeEventListener("touchstart",Se)}},[O,Ue]);var Rn=DH(function(oe){var Te=oe.args,Se=(Te=Te===void 0?[]:Te)[0],$e=(Se=Se===void 0?{}:Se).closeOnTap,St=$e!==void 0&&$e,Ye=Se.isContentDragging,We=Ye!==void 0&&Ye,at=oe.cancel,rt=oe.direction[1],ke=oe.down,je=oe.first,Sn=oe.last,Hi=oe.memo,rn=Hi===void 0?pe.y.getValue():Hi,kt=oe.tap,At=oe.velocity,ri=-1*oe.movement[1];if(!ce.current)return at(),rn;if(E&&St&&kt)return at(),setTimeout(function(){return E()},0),rn;if(kt)return rn;var Ht=rn+ri,jn=ri*At,Gi=Math.max(Tn.current,Math.min(ze.current,Ht+2*jn));if(!ke&&E&&rt>0&&Ht+jn<Tn.current/2)return at(),E(),rn;var On=ke?E||Tn.current!==ze.current?Cc(Ht,E?0:Tn.current,ze.current,.55):Ht<Tn.current?Cc(Ht,Tn.current,2*ze.current,.55):Cc(Ht,Tn.current/2,ze.current,.55):Gi;return O&&We?(On>=ze.current&&(On=ze.current),rn===ze.current&&Ue.current.scrollTop>0&&(On=ze.current),In.current=On<ze.current):In.current=!1,je&&It("DRAG"),Sn?(It("SNAP",{payload:{y:On,velocity:At>.05?At:1,source:"dragging"}}),rn):(we({y:On,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:!0,config:{velocity:At}}),rn)},{filterTaps:!0});if(Number.isNaN(ze.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Tn.current))throw new TypeError("minSnapRef is NaN!!");var un=(function(oe){var Te,Se=oe.spring,$e=pl([Se.y,Se.maxHeight],function(ke,je){return Math.round(tc(je-ke,0,16))+"px"}),St=pl([Se.y,Se.minSnap,Se.maxSnap],function(ke,je,Sn){return tc(ke,je,Sn)+"px"}),Ye=pl([Se.y,Se.minSnap,Se.maxSnap],function(ke,je,Sn){return ke<je?je-ke+"px":ke>Sn?Sn-ke+"px":"0px"}),We=pl([Se.y,Se.maxSnap],function(ke,je){return ke>=je?Math.ceil(ke-je):0}),at=pl([Se.y,Se.minSnap],function(ke,je){if(!je)return 0;var Sn=Math.max(je/2-45,0);return tc((ke-Sn)*(1/(Math.min(je/2+45,je)-Sn)+0),0,1)}),rt=pl([Se.y,Se.minSnap],function(ke,je){return je?tc(ke/je,0,1):0});return(Te={})["--rsbs-content-opacity"]=at,Te["--rsbs-backdrop-opacity"]=rt,Te["--rsbs-antigap-scale-y"]=We,Te["--rsbs-overlay-translate-y"]=Ye,Te["--rsbs-overlay-rounded"]=$e,Te["--rsbs-overlay-h"]=St,Te})({spring:pe});return wn.createElement(Yz.div,Qn({},U,{"data-rsbs-root":!0,"data-rsbs-state":k8.find(nn.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!a,className:s,ref:De,style:Qn({},un,X,{opacity:pe.ready})}),i,F&&wn.createElement("div",Qn({key:"backdrop","data-rsbs-backdrop":!0},Rn({closeOnTap:!0}))),wn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:ut,onKeyDown:function(oe){oe.key==="Escape"&&(oe.stopPropagation(),E&&E())}},l!==!1&&wn.createElement("div",Qn({key:"header","data-rsbs-header":!0,ref:xe},Rn()),l),wn.createElement("div",Qn({key:"scroll","data-rsbs-scroll":!0,ref:Ue},O?Rn({isContentDragging:!0}):{}),wn.createElement("div",{"data-rsbs-content":!0,ref:jt},n)),a&&wn.createElement("div",Qn({key:"footer",ref:Cn,"data-rsbs-footer":!0},Rn()),a)))}),k8=["closed","opening","open","closing","dragging","snapping","resizing"];function P8(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function V8(t){return t.minHeight}var L8=["onSpringStart","onSpringEnd","skipInitialTransition"],Op=j.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=vh(t,L8),l=j.useState(!1),c=l[0],d=l[1],h=j.useRef(),y=j.useRef(null),E=j.useRef(s&&a.open?"OPEN":"CLOSED");Nc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=j.useCallback(function(N){return Promise.resolve(n==null?void 0:n(N)).then(function(){N.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),b=j.useCallback(function(N){return Promise.resolve(i==null?void 0:i(N)).then(function(){N.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?wn.createElement(iq,{"data-rsbs-portal":!0},wn.createElement(D8,Qn({},a,{lastSnapRef:y,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:b}))):null});const O8=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:h,onToggleFavorite:y,onGenerateVisual:E,generatingVisualFor:T})=>{const b=document.documentElement.classList.contains("dark"),N=j.useRef(null);return j.useEffect(()=>{!s&&a.length>0&&N.current&&N.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,a.length]),A.jsx(Op,{open:t,onDismiss:l,className:b?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),A.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:P})=>P*.65,snapPoints:({minHeight:P,maxHeight:L})=>[P,L*.65,L*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx(MR,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),A.jsx("div",{ref:N,children:a.length>0&&A.jsx(Gh,{outfits:a,allClothingItems:e,allClothingSets:n,favoriteOutfits:h,onToggleFavorite:y,onGenerateVisual:E,generatingVisualFor:T})})]})})},U8=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return A.jsx(Op,{open:t,onDismiss:c,className:d?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Planificateur de Valise"}),A.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[A.jsx(DR,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&A.jsx(kR,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},F8=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,l]=j.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),h=e.filter(b=>!c.has(b.id)).reduce((b,N)=>(b[N.category]||(b[N.category]=[]),b[N.category].push(N),b),{}),y=b=>{l(N=>{const P=new Set(N);return P.has(b)?P.delete(b):P.add(b),P})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&s(b,Array.from(a))},T=document.documentElement.classList.contains("dark");return A.jsx(Op,{open:t,onDismiss:i,className:T?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crer un ensemble"}),A.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:A.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(Mp,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:A.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(h).map(b=>h[b].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[b].map(N=>{const P=a.has(N.id);return A.jsxs("button",{onClick:()=>y(N.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:P?"#D4AF37":"transparent"},children:[P&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(x0,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:N.imageSrc,alt:N.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:N.analysis})]},N.id)})})]},b))})]})})},B8=(t,e)=>{const n=Yl($r,"users",t,"items"),i=s0(n);return c0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (items listener):",a)})},q8=async(t,e)=>{try{const n=Yl($r,"users",t,"items");return(await u0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},hC=async(t,e,n)=>{try{const i=nf($r,"users",t,"items",e);await CO(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},pC=async(t,e)=>{try{const n=nf($r,"users",t,"items",e);await l0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},z8=(t,e)=>{const n=Yl($r,"users",t,"favoriteOutfits"),i=s0(n);return c0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (favoriteOutfits listener):",a)})},H8=async(t,e)=>{try{const n=Yl($r,"users",t,"favoriteOutfits");return(await u0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},G8=async(t,e)=>{try{const n=nf($r,"users",t,"favoriteOutfits",e);await l0(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},$8=(t,e)=>{const n=Yl($r,"users",t,"sets"),i=s0(n);return c0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (sets listener):",a)})},j8=async(t,e)=>{try{const n=Yl($r,"users",t,"sets");return(await u0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},K8=async(t,e)=>{try{const n=nf($r,"users",t,"sets",e);await l0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},J8=async(t,e,n)=>{try{const i=O4(Z4,`users/${t}/clothing/${n}.jpg`);return await V4(i,e,"data_url"),await L4(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},N1=j.createContext(void 0),Y8=({children:t,user:e})=>{const[n,i]=j.useState([]),[s,a]=j.useState([]),[l,c]=j.useState([]),[d,h]=j.useState(!1);j.useEffect(()=>{if(e){const F=B8(e.uid,X=>{i(X)}),B=$8(e.uid,X=>{a(X)}),K=z8(e.uid,X=>{c(X)});return()=>{F(),B(),K()}}else i([]),a([]),c([])},[e]);const y=j.useCallback(async F=>{if(!(F.length===0||!e)){h(!0);try{const B=F.map(x=>new Promise((R,V)=>{const D=new FileReader;D.onload=()=>R(D.result),D.onerror=V,D.readAsDataURL(x)})),K=await Promise.all(B),X=K.map(x=>x.split(",")[1]),G=await xB(X),I=Math.min(G.length,F.length);for(let x=0;x<I;x++){const R=G[x];let V="";try{V=await q8(e.uid,R);const D=await J8(e.uid,K[x],V);await hC(e.uid,V,{imageSrc:D})}catch(D){if(console.error(`chec de cration/upload pour ${F[x].name}.`,D),V){console.log(`Tentative de suppression de l'article orphelin: ${V}`);try{await pC(e.uid,V),console.log(`Article orphelin ${V} supprim avec succs.`)}catch(O){console.error(`chec de la suppression de l'article orphelin ${V}:`,O)}}}}}catch(B){console.error("Erreur lors de l'analyse par lot:",B)}finally{h(!1)}}},[e]),E=j.useCallback(async F=>{if(e)try{await pC(e.uid,F)}catch(B){console.error("Erreur suppression item:",B)}},[e]),T=j.useCallback(async F=>{if(e)try{await hC(e.uid,F.id,F)}catch(B){console.error("Erreur mise  jour item:",B)}},[e]),b=j.useCallback(async F=>{if(e)try{const{id:B,...K}=F;await H8(e.uid,K)}catch(B){console.error("Erreur ajout favori:",B)}},[e]),N=j.useCallback(async F=>{if(e)try{await G8(e.uid,F)}catch(B){console.error("Erreur suppression favori:",B)}},[e]),P=j.useCallback(async(F,B)=>{var G;if(!e)return;const K=((G=n.find(I=>I.id===B[0]))==null?void 0:G.imageSrc)||"",X={name:F,itemIds:B,imageSrc:K};try{await j8(e.uid,X)}catch(I){console.error("Erreur cration set:",I)}},[e,n]),L=j.useCallback(async F=>{if(e)try{await K8(e.uid,F)}catch(B){console.error("Erreur suppression set:",B)}},[e]),z={clothingItems:n,clothingSets:s,favoriteOutfits:l,isAnalyzing:d,analyzeClothingItems:y,deleteClothingItem:E,updateClothingItem:T,createClothingSet:P,deleteClothingSet:L,addFavoriteOutfit:b,deleteFavoriteOutfit:N};return A.jsx(N1.Provider,{value:z,children:t})},W8=()=>{const t=j.useContext(N1);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},Q8=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c})=>{const d=document.documentElement.classList.contains("dark");return A.jsx(Op,{open:t,onDismiss:e,className:d?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Tenues Favorites"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.9,snapPoints:({minHeight:h,maxHeight:y})=>[h,y*.9,y*.9],children:A.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?A.jsx(Gh,{outfits:s,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c}):A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),A.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},X8=({imageUrl:t,onClose:e})=>(j.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),A.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[A.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),A.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),A.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:A.jsx(I0,{})})]})]})),Z8=()=>{const[t,e]=j.useState(null),[n,i]=j.useState(null),[s,a]=j.useState([]),[l,c]=j.useState(!1),[d,h]=j.useState(null),[y,E]=j.useState(!1),[T,b]=j.useState(null),[N,P]=j.useState(!1),[L,z]=j.useState("home"),[F,B]=j.useState(!1),[K,X]=j.useState(!1),[G,I]=j.useState(!1),[x,R]=j.useState(!1),[V,D]=j.useState(null),[O,U]=j.useState(null),[be,ve]=j.useState(null),[ee,ce]=j.useState(null),{clothingItems:he,clothingSets:Ie,isAnalyzing:Me,analyzeClothingItems:H,deleteClothingItem:te,createClothingSet:fe,updateClothingItem:pe,deleteClothingSet:we,favoriteOutfits:De,addFavoriteOutfit:Ue,deleteFavoriteOutfit:jt}=W8(),xe=wn.useMemo(()=>(he||[]).sort((ft,nn)=>(nn.isFavorite?1:0)-(ft.isFavorite?1:0)),[he]),Cn=j.useCallback(me=>{const ft=De.find(nn=>nn.titre===me.titre&&nn.description===me.description);ft?jt(ft.id):Ue(me)},[De,Ue,jt]),ut=wn.useMemo(()=>Ie||[],[Ie]),_n=wn.useMemo(()=>new Set(ut.flatMap(me=>me.itemIds||[])),[ut]);j.useEffect(()=>{const me=async ft=>{const nn=ft.coords.latitude,It=ft.coords.longitude,Rn=Hh.openWeatherApiKey,un=`https://api.openweathermap.org/data/2.5/weather?lat=${nn}&lon=${It}&appid=${Rn}&units=metric&lang=fr`;try{const oe=await fetch(un);if(!oe.ok)throw new Error("Impossible de rcuprer la mto.");const Te=await oe.json(),Se=`${Math.round(Te.main.temp)}C, ${Te.weather[0].description},  ${Te.name}`;D(Se),U(null)}catch{U("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(me,()=>U("Activez la golocalisation pour la mto.")):U("Golocalisation non supporte.")},[]);const Ln=j.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const nn=V?`Mto actuelle : ${V}. Occasion : ${me}`:`Occasion : ${me}`;try{const It=await RB(xe,ut,nn,ft);a(It)}catch(It){i(It instanceof Error?It.message:"Erreur inconnue")}finally{c(!1)}},[xe,ut,V]),In=j.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const nn=await MB(xe,ut,me,ft);h(nn)}catch(nn){i(nn instanceof Error?nn.message:"Erreur inconnue")}finally{E(!1)}},[xe,ut]),En=j.useCallback(async()=>{if(xe.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}P(!0),i(null);try{const me=await NB(xe,ut);b(me)}catch(me){i(me instanceof Error?me.message:"Erreur inconnue")}finally{P(!1)}},[xe,ut]),xn=j.useCallback(async me=>{ve(me.titre),i(null);try{const ft=me.vetements.map(It=>xe.find(Rn=>Rn.id===It.id||Rn.analysis===It.description)).filter(It=>!!It);if(ft.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const nn=await DB(ft,me.description);ce(nn)}catch(ft){i(ft instanceof Error?ft.message:"Erreur inconnue lors du rendu visuel")}finally{ve(null)}},[xe]),qi=j.useCallback(()=>B(!0),[]),Ci=j.useCallback(()=>X(!0),[]),mi=me=>e(me),ni=()=>e(null),ii=me=>{te(me).catch(i),e(null)},cr=me=>{pe(me).catch(i),e(me)},zi=me=>{const ft=`Focus sur l'article : ${me.analysis}`;Ln(ft,me),e(null),window.innerWidth<768&&B(!0)},ct=j.useCallback((me,ft)=>{fe(me,ft).catch(i)},[fe]),Tn=j.useCallback(me=>{we(me).catch(i)},[we]),ze={hauts:xe.filter(me=>me.category==="Hauts").length,bas:xe.filter(me=>me.category==="Bas").length,chaussures:xe.filter(me=>me.category==="Chaussures").length,accessoires:xe.filter(me=>me.category==="Accessoires").length},Ct=L==="home"?[]:xe.filter(me=>L==="hauts"?me.category==="Hauts":L==="bas"?me.category==="Bas":L==="chaussures"?me.category==="Chaussures":L==="accessoires"?me.category==="Accessoires":!1),Yt=F||K||G||!!t||!!T||!!ee;return A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:n})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[xe.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:En,disabled:N,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:N?"Analyse...":"Analyser ma garde-robe"})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(GB,{onAnalyze:H,isAnalyzing:Me})}),A.jsx("div",{className:"hidden md:block",children:A.jsx(KB,{clothingItems:xe,clothingSets:ut,onItemClick:mi,onDeleteItem:ii,onCreateSet:ct})}),A.jsxs("div",{className:"md:hidden",children:[L==="home"&&A.jsx(WB,{onAnalyzeWardrobe:En,onScrollToOutfits:qi,onScrollToVacation:Ci,onStartSetCreation:()=>I(!0),onShowFavorites:()=>R(!0),isAnalyzingWardrobe:N,clothingCount:xe.length,favoriteOutfitCount:De.length}),L!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:L}),A.jsxs("p",{className:"text-sm text-gray-500",children:[Ct.length," vtement",Ct.length>1?"s":""]})]}),Ct.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Ct.map(me=>A.jsxs("div",{onClick:()=>mi(me),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[me.isFavorite?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:A.jsx(Dp,{})}):_n.has(me.id)?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(Mp,{})}):null,A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:me.imageSrc,alt:me.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:me.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.color})]})]},me.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(MR,{clothingItems:xe,clothingSets:ut,onGenerate:Ln,isGenerating:l,weatherInfo:V,weatherError:O})}),s.length>0&&A.jsx(Gh,{outfits:s,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:De,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be}),De.length>0&&A.jsxs("div",{className:"mt-10",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Mes Tenues Favorites"}),A.jsx(Gh,{outfits:De,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:De,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be})]}),A.jsx("div",{id:"vacation-planner",children:A.jsx(DR,{clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:y})}),d&&A.jsx(kR,{plan:d,allClothingItems:xe,allClothingSets:ut,onCreateSet:ct})]})]}),t&&A.jsx(JB,{item:t,clothingSets:ut,onClose:ni,onUpdate:cr,onGenerateFrom:zi,onRemoveSet:Tn,onDelete:ii}),T&&A.jsx(XB,{analysis:T,onClose:()=>b(null)}),ee&&A.jsx(X8,{imageUrl:ee,onClose:()=>ce(null)}),A.jsx(YB,{onFilesSelected:H,isAnalyzing:Me,isOtherModalOpen:Yt}),A.jsx(QB,{activeTab:L,onTabChange:z,counts:ze}),A.jsx(O8,{open:F,clothingItems:xe,clothingSets:ut,onGenerate:Ln,isGenerating:l,suggestedOutfits:s,onClose:()=>B(!1),weatherInfo:V,weatherError:O,favoriteOutfits:De,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be}),A.jsx(U8,{open:K,clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:y,vacationPlan:d,onCreateSet:ct,onClose:()=>X(!1)}),A.jsx(F8,{open:G,clothingItems:xe,clothingSets:ut,onClose:()=>I(!1),onCreateSet:(me,ft)=>{ct(me,ft),I(!1)}}),A.jsx(Q8,{open:x,onClose:()=>R(!1),allClothingItems:xe,allClothingSets:ut,favoriteOutfits:De,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be})]})},eG=()=>{const[t,e]=j.useState(null),[n,i]=j.useState("dark");j.useEffect(()=>{const a=XD(lc,l=>{e(l)});return()=>a()},[]),j.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?A.jsxs(A.Fragment,{children:[A.jsx(HB,{theme:n,toggleTheme:s,children:A.jsx(Cb,{user:t})}),A.jsx(Y8,{user:t,children:A.jsx(Z8,{})})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(Cb,{user:t})})})},M1=document.getElementById("root");if(!M1)throw new Error("L'lment root est introuvable dans le DOM");const tG=p2.createRoot(M1);tG.render(A.jsx(wn.StrictMode,{children:A.jsx(eG,{})}));
