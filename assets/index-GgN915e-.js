(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function t2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fv={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function iO(){if(e1)return Ec;e1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Ec.Fragment=e,Ec.jsx=n,Ec.jsxs=n,Ec}var t1;function sO(){return t1||(t1=1,Fv.exports=iO()),Fv.exports}var g=sO(),qv={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function aO(){if(n1)return Ge;n1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,M={};function U(B,J,ce){this.props=B,this.context=J,this.refs=M,this.updater=ce||A}U.prototype.isReactComponent={},U.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=U.prototype;function z(B,J,ce){this.props=B,this.context=J,this.refs=M,this.updater=ce||A}var H=z.prototype=new j;H.constructor=z,O(H,U.prototype),H.isPureReactComponent=!0;var G=Array.isArray;function q(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(B,J,ce){var fe=ce.ref;return{$$typeof:t,type:B,key:J,ref:fe!==void 0?fe:null,props:ce}}function L(B,J){return I(B.type,J,B.props)}function P(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function V(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ce){return J[ce]})}var k=/\/+/g;function ve(B,J){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):J.toString(36)}function Oe(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(q,q):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function W(B,J,ce,fe,Ae){var ze=typeof B;(ze==="undefined"||ze==="boolean")&&(B=null);var Be=!1;if(B===null)Be=!0;else switch(ze){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(B.$$typeof){case t:case e:Be=!0;break;case v:return Be=B._init,W(Be(B._payload),J,ce,fe,Ae)}}if(Be)return Ae=Ae(B),Be=fe===""?"."+ve(B,0):fe,G(Ae)?(ce="",Be!=null&&(ce=Be.replace(k,"$&/")+"/"),W(Ae,J,ce,"",function(Sn){return Sn})):Ae!=null&&(P(Ae)&&(Ae=L(Ae,ce+(Ae.key==null||B&&B.key===Ae.key?"":(""+Ae.key).replace(k,"$&/")+"/")+Be)),J.push(Ae)),1;Be=0;var Lt=fe===""?".":fe+":";if(G(B))for(var _t=0;_t<B.length;_t++)fe=B[_t],ze=Lt+ve(fe,_t),Be+=W(fe,J,ce,ze,Ae);else if(_t=E(B),typeof _t=="function")for(B=_t.call(B),_t=0;!(fe=B.next()).done;)fe=fe.value,ze=Lt+ve(fe,_t++),Be+=W(fe,J,ce,ze,Ae);else if(ze==="object"){if(typeof B.then=="function")return W(Oe(B),J,ce,fe,Ae);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Be}function re(B,J,ce){if(B==null)return B;var fe=[],Ae=0;return W(B,fe,"","",function(ze){return J.call(ce,ze,Ae++)}),fe}function ue(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(ce){(B._status===0||B._status===-1)&&(B._status=1,B._result=ce)},function(ce){(B._status===0||B._status===-1)&&(B._status=2,B._result=ce)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var _e=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},we={map:re,forEach:function(B,J,ce){re(B,function(){J.apply(this,arguments)},ce)},count:function(B){var J=0;return re(B,function(){J++}),J},toArray:function(B){return re(B,function(J){return J})||[]},only:function(B){if(!P(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ge.Activity=b,Ge.Children=we,Ge.Component=U,Ge.Fragment=n,Ge.Profiler=s,Ge.PureComponent=z,Ge.StrictMode=r,Ge.Suspense=f,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(B){return C.H.useMemoCache(B)}},Ge.cache=function(B){return function(){return B.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(B,J,ce){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var fe=O({},B.props),Ae=B.key;if(J!=null)for(ze in J.key!==void 0&&(Ae=""+J.key),J)!S.call(J,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&J.ref===void 0||(fe[ze]=J[ze]);var ze=arguments.length-2;if(ze===1)fe.children=ce;else if(1<ze){for(var Be=Array(ze),Lt=0;Lt<ze;Lt++)Be[Lt]=arguments[Lt+2];fe.children=Be}return I(B.type,Ae,fe)},Ge.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Ge.createElement=function(B,J,ce){var fe,Ae={},ze=null;if(J!=null)for(fe in J.key!==void 0&&(ze=""+J.key),J)S.call(J,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ae[fe]=J[fe]);var Be=arguments.length-2;if(Be===1)Ae.children=ce;else if(1<Be){for(var Lt=Array(Be),_t=0;_t<Be;_t++)Lt[_t]=arguments[_t+2];Ae.children=Lt}if(B&&B.defaultProps)for(fe in Be=B.defaultProps,Be)Ae[fe]===void 0&&(Ae[fe]=Be[fe]);return I(B,ze,Ae)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(B){return{$$typeof:d,render:B}},Ge.isValidElement=P,Ge.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:ue}},Ge.memo=function(B,J){return{$$typeof:h,type:B,compare:J===void 0?null:J}},Ge.startTransition=function(B){var J=C.T,ce={};C.T=ce;try{var fe=B(),Ae=C.S;Ae!==null&&Ae(ce,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(q,_e)}catch(ze){_e(ze)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),C.T=J}},Ge.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ge.use=function(B){return C.H.use(B)},Ge.useActionState=function(B,J,ce){return C.H.useActionState(B,J,ce)},Ge.useCallback=function(B,J){return C.H.useCallback(B,J)},Ge.useContext=function(B){return C.H.useContext(B)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(B,J){return C.H.useDeferredValue(B,J)},Ge.useEffect=function(B,J){return C.H.useEffect(B,J)},Ge.useEffectEvent=function(B){return C.H.useEffectEvent(B)},Ge.useId=function(){return C.H.useId()},Ge.useImperativeHandle=function(B,J,ce){return C.H.useImperativeHandle(B,J,ce)},Ge.useInsertionEffect=function(B,J){return C.H.useInsertionEffect(B,J)},Ge.useLayoutEffect=function(B,J){return C.H.useLayoutEffect(B,J)},Ge.useMemo=function(B,J){return C.H.useMemo(B,J)},Ge.useOptimistic=function(B,J){return C.H.useOptimistic(B,J)},Ge.useReducer=function(B,J,ce){return C.H.useReducer(B,J,ce)},Ge.useRef=function(B){return C.H.useRef(B)},Ge.useState=function(B){return C.H.useState(B)},Ge.useSyncExternalStore=function(B,J,ce){return C.H.useSyncExternalStore(B,J,ce)},Ge.useTransition=function(){return C.H.useTransition()},Ge.version="19.2.3",Ge}var r1;function F0(){return r1||(r1=1,qv.exports=aO()),qv.exports}var N=F0();const Ln=t2(N);var Hv={exports:{}},Tc={},Gv={exports:{}},$v={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function oO(){return i1||(i1=1,(function(t){function e(W,re){var ue=W.length;W.push(re);e:for(;0<ue;){var _e=ue-1>>>1,we=W[_e];if(0<s(we,re))W[_e]=re,W[ue]=we,ue=_e;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var re=W[0],ue=W.pop();if(ue!==re){W[0]=ue;e:for(var _e=0,we=W.length,B=we>>>1;_e<B;){var J=2*(_e+1)-1,ce=W[J],fe=J+1,Ae=W[fe];if(0>s(ce,ue))fe<we&&0>s(Ae,ce)?(W[_e]=Ae,W[fe]=ue,_e=fe):(W[_e]=ce,W[J]=ue,_e=J);else if(fe<we&&0>s(Ae,ue))W[_e]=Ae,W[fe]=ue,_e=fe;else break e}}return re}function s(W,re){var ue=W.sortIndex-re.sortIndex;return ue!==0?ue:W.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],h=[],v=1,b=null,x=3,E=!1,A=!1,O=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function H(W){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=W)r(h),re.sortIndex=re.expirationTime,e(f,re);else break;re=n(h)}}function G(W){if(O=!1,H(W),!A)if(n(f)!==null)A=!0,q||(q=!0,V());else{var re=n(h);re!==null&&Oe(G,re.startTime-W)}}var q=!1,C=-1,S=5,I=-1;function L(){return M?!0:!(t.unstable_now()-I<S)}function P(){if(M=!1,q){var W=t.unstable_now();I=W;var re=!0;try{e:{A=!1,O&&(O=!1,j(C),C=-1),E=!0;var ue=x;try{t:{for(H(W),b=n(f);b!==null&&!(b.expirationTime>W&&L());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,x=b.priorityLevel;var we=_e(b.expirationTime<=W);if(W=t.unstable_now(),typeof we=="function"){b.callback=we,H(W),re=!0;break t}b===n(f)&&r(f),H(W)}else r(f);b=n(f)}if(b!==null)re=!0;else{var B=n(h);B!==null&&Oe(G,B.startTime-W),re=!1}}break e}finally{b=null,x=ue,E=!1}re=void 0}}finally{re?V():q=!1}}}var V;if(typeof z=="function")V=function(){z(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ve=k.port2;k.port1.onmessage=P,V=function(){ve.postMessage(null)}}else V=function(){U(P,0)};function Oe(W,re){C=U(function(){W(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(W){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var ue=x;x=re;try{return W()}finally{x=ue}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=x;x=W;try{return re()}finally{x=ue}},t.unstable_scheduleCallback=function(W,re,ue){var _e=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?_e+ue:_e):ue=_e,W){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ue+we,W={id:v++,callback:re,priorityLevel:W,startTime:ue,expirationTime:we,sortIndex:-1},ue>_e?(W.sortIndex=ue,e(h,W),n(f)===null&&W===n(h)&&(O?(j(C),C=-1):O=!0,Oe(G,ue-_e))):(W.sortIndex=we,e(f,W),A||E||(A=!0,q||(q=!0,V()))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var re=x;return function(){var ue=x;x=re;try{return W.apply(this,arguments)}finally{x=ue}}}})($v)),$v}var s1;function lO(){return s1||(s1=1,Gv.exports=oO()),Gv.exports}var Kv={exports:{}},or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function uO(){if(a1)return or;a1=1;var t=F0();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:f,containerInfo:h,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(f,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,v)},or.flushSync=function(f){var h=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=h,r.p=v,r.d.f()}},or.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},or.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},or.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var v=h.as,b=d(v,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:E}):v==="script"&&r.d.X(f,{crossOrigin:b,integrity:x,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},or.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},or.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,b=d(v,h.crossOrigin);r.d.L(f,v,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},or.preloadModule=function(f,h){if(typeof f=="string")if(h){var v=d(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},or.requestFormReset=function(f){r.d.r(f)},or.unstable_batchedUpdates=function(f,h){return f(h)},or.useFormState=function(f,h,v){return u.H.useFormState(f,h,v)},or.useFormStatus=function(){return u.H.useHostTransitionStatus()},or.version="19.2.3",or}var o1;function n2(){if(o1)return Kv.exports;o1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kv.exports=uO(),Kv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function cO(){if(l1)return Tc;l1=1;var t=lO(),e=F0(),n=n2();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return f(p),i;if(y===c)return f(p),a;y=y.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=y;else{for(var w=!1,R=p.child;R;){if(R===l){w=!0,l=p,c=y;break}if(R===c){w=!0,c=p,l=y;break}R=R.sibling}if(!w){for(R=y.child;R;){if(R===l){w=!0,l=y,c=p;break}if(R===c){w=!0,c=y,l=p;break}R=R.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case G:return"Suspense";case q:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case z:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return a=i.displayName||null,a!==null?a:ve(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return ve(i(a))}catch{}}return null}var Oe=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},_e=[],we=-1;function B(i){return{current:i}}function J(i){0>we||(i.current=_e[we],_e[we]=null,we--)}function ce(i,a){we++,_e[we]=i.current,i.current=a}var fe=B(null),Ae=B(null),ze=B(null),Be=B(null);function Lt(i,a){switch(ce(ze,a),ce(Ae,i),ce(fe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?EE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=EE(a),i=TE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(fe),ce(fe,i)}function _t(){J(fe),J(Ae),J(ze)}function Sn(i){i.memoizedState!==null&&ce(Be,i);var a=fe.current,l=TE(a,i.type);a!==l&&(ce(Ae,i),ce(fe,l))}function pe(i){Ae.current===i&&(J(fe),J(Ae)),Be.current===i&&(J(Be),bc._currentValue=ue)}var me,Ke;function Ft(i){if(me===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);me=a&&a[1]||"",Ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+i+Ke}var Ve=!1;function Kt(i,a){if(!i||Ve)return"";Ve=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(ee){var Z=ee}Reflect.construct(i,[],se)}else{try{se.call()}catch(ee){Z=ee}i.call(se.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],R=y[1];if(w&&R){var F=w.split(`
`),X=R.split(`
`);for(p=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(c===F.length||p===X.length)for(c=F.length-1,p=X.length-1;1<=c&&0<=p&&F[c]!==X[p];)p--;for(;1<=c&&0<=p;c--,p--)if(F[c]!==X[p]){if(c!==1||p!==1)do if(c--,p--,0>p||F[c]!==X[p]){var ne=`
`+F[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=p);break}}}finally{Ve=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ft(l):""}function nr(i,a){switch(i.tag){case 26:case 27:case 5:return Ft(i.type);case 16:return Ft("Lazy");case 13:return i.child!==a&&a!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return Kt(i.type,!1);case 11:return Kt(i.type.render,!1);case 1:return Kt(i.type,!0);case 31:return Ft("Activity");default:return""}}function Fr(i){try{var a="",l=null;do a+=nr(i,l),l=i,i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Sr=Object.prototype.hasOwnProperty,zn=t.unstable_scheduleCallback,Ar=t.unstable_cancelCallback,Ei=t.unstable_shouldYield,qr=t.unstable_requestPaint,Ct=t.unstable_now,vn=t.unstable_getCurrentPriorityLevel,qe=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,an=t.unstable_NormalPriority,on=t.unstable_LowPriority,Ti=t.unstable_IdlePriority,Bs=t.log,yn=t.unstable_setDisableYieldValue,rr=null,An=null;function ae(i){if(typeof Bs=="function"&&yn(i),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(rr,i)}catch{}}var Ee=Math.clz32?Math.clz32:gt,xe=Math.log,De=Math.LN2;function gt(i){return i>>>=0,i===0?32:31-(xe(i)/De|0)|0}var Qe=256,Ze=262144,nt=4194304;function rt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ke(i,a,l){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?p=rt(c):(w&=R,w!==0?p=rt(w):l||(l=R&~i,l!==0&&(p=rt(l))))):(R=c&~y,R!==0?p=rt(R):w!==0?p=rt(w):l||(l=c&~i,l!==0&&(p=rt(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Xe(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function qt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bn(){var i=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),i}function Se(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function pt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ot(i,a,l,c,p,y){var w=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,F=i.expirationTimes,X=i.hiddenUpdates;for(l=w&~l;0<l;){var ne=31-Ee(l),se=1<<ne;R[ne]=0,F[ne]=-1;var Z=X[ne];if(Z!==null)for(X[ne]=null,ne=0;ne<Z.length;ne++){var ee=Z[ne];ee!==null&&(ee.lane&=-536870913)}l&=~se}c!==0&&He(i,c,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~a))}function He(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-Ee(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&261930}function Ht(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-Ee(l),p=1<<c;p&a|i[c]&a&&(i[c]|=a),l&=~p}}function ln(i,a){var l=a&-a;return l=(l&42)!==0?1:gr(l),(l&(i.suspendedLanes|a))!==0?0:l}function gr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function en(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function un(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:KE(i.type))}function Si(i,a){var l=re.p;try{return re.p=i,a()}finally{re.p=l}}var ir=Math.random().toString(36).slice(2),kt="__reactFiber$"+ir,Dt="__reactProps$"+ir,vr="__reactContainer$"+ir,Cr="__reactEvents$"+ir,sr="__reactListeners$"+ir,ss="__reactHandles$"+ir,Rr="__reactResources$"+ir,Ir="__reactMarker$"+ir;function Nr(i){delete i[kt],delete i[Dt],delete i[Cr],delete i[sr],delete i[ss]}function Pn(i){var a=i[kt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[vr]||l[kt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=kE(i);i!==null;){if(l=i[kt])return l;i=kE(i)}return a}i=l,l=i.parentNode}return null}function kr(i){if(i=i[kt]||i[vr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ii(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Cn(i){var a=i[Rr];return a||(a=i[Rr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ot(i){i[Ir]=!0}var de=new Set,Ce={};function je(i,a){Ye(i,a),Ye(i+"Capture",a)}function Ye(i,a){for(Ce[i]=a,i=0;i<a.length;i++)de.add(a[i])}var Gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},as={};function Fs(i){return Sr.call(as,i)?!0:Sr.call(Ut,i)?!1:Gt.test(i)?as[i]=!0:(Ut[i]=!0,!1)}function si(i,a,l){if(Fs(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Ai(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function ai(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function yr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Jd(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Hp(i,a,l){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(w){l=""+w,y.call(this,w)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function tl(i){if(!i._valueTracker){var a=Jd(i)?"checked":"value";i._valueTracker=Hp(i,a,""+i[a])}}function Du(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Jd(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function nl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var os=/[\n"\\]/g;function cn(i){return i.replace(os,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qs(i,a,l,c,p,y,w,R){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),a!=null?w==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+yr(a)):i.value!==""+yr(a)&&(i.value=""+yr(a)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),a!=null?rl(i,w,yr(a)):l!=null?rl(i,w,yr(l)):c!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+yr(R):i.removeAttribute("name")}function eo(i,a,l,c,p,y,w,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){tl(i);return}l=l!=null?""+yr(l):"",a=a!=null?""+yr(a):l,R||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),tl(i)}function rl(i,a,l){a==="number"&&nl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function vt(i,a,l,c){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&c&&(i[l].defaultSelected=!0)}else{for(l=""+yr(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function to(i,a,l){if(a!=null&&(a=""+yr(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+yr(l):""}function Hs(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(Oe(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=yr(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c),tl(i)}function oi(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Gp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Gp.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Zd(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&Ou(i,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Ou(i,y,a[y])}function ju(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(i){return Kp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Bn(){}var il=null;function sl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ls=null,Hr=null;function ef(i){var a=kr(i);if(a&&(i=a.stateNode)){var l=i[Dt]||null;e:switch(i=a.stateNode,a.type){case"input":if(qs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+cn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var p=c[Dt]||null;if(!p)throw Error(r(90));qs(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Du(c)}break e;case"textarea":to(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&vt(i,!!l.multiple,a,!1)}}}var Mu=!1;function tf(i,a,l){if(Mu)return i(a,l);Mu=!0;try{var c=i(a);return c}finally{if(Mu=!1,(ls!==null||Hr!==null)&&(Jf(),ls&&(a=ls,i=Hr,Hr=ls=null,ef(a),i)))for(a=0;a<i.length;a++)ef(i[a])}}function Dr(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Dt]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=!1;if(Ci)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Pu=!1}var Gr=null,al=null,qi=null;function Gs(){if(qi)return qi;var i,a=al,l=a.length,c,p="value"in Gr?Gr.value:Gr.textContent,y=p.length;for(i=0;i<l&&a[i]===p[i];i++);var w=l-i;for(c=1;c<=w&&a[l-c]===p[y-c];c++);return qi=p.slice(i,1<c?1-c:void 0)}function no(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $s(){return!0}function Yt(){return!1}function ar(i){function a(l,c,p,y,w){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?$s:Yt,this.isPropagationStopped=Yt,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),a}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=ar(us),Ks=b({},us,{view:0,detail:0}),nf=ar(Ks),Ys,ol,br,io=b({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==br&&(br&&i.type==="mousemove"?(Ys=i.screenX-br.screenX,ol=i.screenY-br.screenY):ol=Ys=0,br=i),Ys)},movementY:function(i){return"movementY"in i?i.movementY:ol}}),rf=ar(io),so=b({},io,{dataTransfer:0}),sf=ar(so),Vu=b({},Ks,{relatedTarget:0}),Ws=ar(Vu),af=b({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),ll=ar(af),Yp=b({},us,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),of=ar(Yp),ao=b({},us,{data:0}),Lu=ar(ao),lf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uf(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=zu[i])?!!a[i]:!1}function Qs(){return uf}var cf=b({},Ks,{key:function(i){if(i.key){var a=lf[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=no(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Uu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(i){return i.type==="keypress"?no(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?no(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),df=ar(cf),cs=b({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=ar(cs),ff=b({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),hf=ar(ff),mf=b({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=ar(mf),xr=b({},io,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pf=ar(xr),gf=b({},us,{newState:0,oldState:0}),Xs=ar(gf),m=[9,13,27,32],_=Ci&&"CompositionEvent"in window,T=null;Ci&&"documentMode"in document&&(T=document.documentMode);var D=Ci&&"TextEvent"in window&&!T,Y=Ci&&(!_||T&&8<T&&11>=T),te=" ",he=!1;function Tt(i,a){switch(i){case"keyup":return m.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var et=!1;function Fn(i,a){switch(i){case"compositionend":return Rn(a);case"keypress":return a.which!==32?null:(he=!0,te);case"textInput":return i=a.data,i===te&&he?null:i;default:return null}}function qn(i,a){if(et)return i==="compositionend"||!_&&Tt(i,a)?(i=Gs(),qi=al=Gr=null,et=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Y&&a.locale!=="ko"?null:a.data;default:return null}}var Js={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Js[i.type]:a==="textarea"}function oo(i,a,l,c){ls?Hr?Hr.push(c):Hr=[c]:ls=c,a=sh(a,"onChange"),0<a.length&&(l=new ro("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var ds=null,Fu=null;function kk(i){vE(i,0)}function vf(i){var a=ii(i);if(Du(a))return i}function Px(i,a){if(i==="change")return a}var Vx=!1;if(Ci){var Wp;if(Ci){var Qp="oninput"in document;if(!Qp){var Lx=document.createElement("div");Lx.setAttribute("oninput","return;"),Qp=typeof Lx.oninput=="function"}Wp=Qp}else Wp=!1;Vx=Wp&&(!document.documentMode||9<document.documentMode)}function Ux(){ds&&(ds.detachEvent("onpropertychange",zx),Fu=ds=null)}function zx(i){if(i.propertyName==="value"&&vf(Fu)){var a=[];oo(a,Fu,i,sl(i)),tf(kk,a)}}function Dk(i,a,l){i==="focusin"?(Ux(),ds=a,Fu=l,ds.attachEvent("onpropertychange",zx)):i==="focusout"&&Ux()}function Ok(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vf(Fu)}function jk(i,a){if(i==="click")return vf(a)}function Mk(i,a){if(i==="input"||i==="change")return vf(a)}function Pk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var $r=typeof Object.is=="function"?Object.is:Pk;function qu(i,a){if($r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!Sr.call(a,p)||!$r(i[p],a[p]))return!1}return!0}function Bx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Fx(i,a){var l=Bx(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bx(l)}}function qx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?qx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Hx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=nl(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=nl(i.document)}return a}function Xp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Vk=Ci&&"documentMode"in document&&11>=document.documentMode,cl=null,Jp=null,Hu=null,Zp=!1;function Gx(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zp||cl==null||cl!==nl(c)||(c=cl,"selectionStart"in c&&Xp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Hu&&qu(Hu,c)||(Hu=c,c=sh(Jp,"onSelect"),0<c.length&&(a=new ro("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=cl)))}function lo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var dl={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},eg={},$x={};Ci&&($x=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function uo(i){if(eg[i])return eg[i];if(!dl[i])return i;var a=dl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in $x)return eg[i]=a[l];return i}var Kx=uo("animationend"),Yx=uo("animationiteration"),Wx=uo("animationstart"),Lk=uo("transitionrun"),Uk=uo("transitionstart"),zk=uo("transitioncancel"),Qx=uo("transitionend"),Xx=new Map,tg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tg.push("scrollEnd");function Ri(i,a){Xx.set(i,a),je(a,[i])}var yf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},li=[],fl=0,ng=0;function bf(){for(var i=fl,a=ng=fl=0;a<i;){var l=li[a];li[a++]=null;var c=li[a];li[a++]=null;var p=li[a];li[a++]=null;var y=li[a];if(li[a++]=null,c!==null&&p!==null){var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}y!==0&&Jx(l,p,y)}}function xf(i,a,l,c){li[fl++]=i,li[fl++]=a,li[fl++]=l,li[fl++]=c,ng|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function rg(i,a,l,c){return xf(i,a,l,c),_f(i)}function co(i,a){return xf(i,null,null,a),_f(i)}function Jx(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=i.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&a!==null&&(p=31-Ee(l),i=y.hiddenUpdates,c=i[p],c===null?i[p]=[a]:c.push(a),a.lane=l|536870912),y):null}function _f(i){if(50<fc)throw fc=0,fv=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var hl={};function Bk(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,a,l,c){return new Bk(i,a,l,c)}function ig(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fs(i,a){var l=i.alternate;return l===null?(l=Kr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Zx(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function wf(i,a,l,c,p,y){var w=0;if(c=i,typeof i=="function")ig(i)&&(w=1);else if(typeof i=="string")w=$D(i,l,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Kr(31,l,a,p),i.elementType=I,i.lanes=y,i;case O:return fo(l.children,p,y,a);case M:w=8,p|=24;break;case U:return i=Kr(12,l,a,p|2),i.elementType=U,i.lanes=y,i;case G:return i=Kr(13,l,a,p),i.elementType=G,i.lanes=y,i;case q:return i=Kr(19,l,a,p),i.elementType=q,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:w=10;break e;case j:w=9;break e;case H:w=11;break e;case C:w=14;break e;case S:w=16,c=null;break e}w=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=Kr(w,l,a,p),a.elementType=i,a.type=c,a.lanes=y,a}function fo(i,a,l,c){return i=Kr(7,i,c,a),i.lanes=l,i}function sg(i,a,l){return i=Kr(6,i,null,a),i.lanes=l,i}function e_(i){var a=Kr(18,null,null,0);return a.stateNode=i,a}function ag(i,a,l){return a=Kr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var t_=new WeakMap;function ui(i,a){if(typeof i=="object"&&i!==null){var l=t_.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Fr(a)},t_.set(i,a),a)}return{value:i,source:a,stack:Fr(a)}}var ml=[],pl=0,Ef=null,Gu=0,ci=[],di=0,Zs=null,Hi=1,Gi="";function hs(i,a){ml[pl++]=Gu,ml[pl++]=Ef,Ef=i,Gu=a}function n_(i,a,l){ci[di++]=Hi,ci[di++]=Gi,ci[di++]=Zs,Zs=i;var c=Hi;i=Gi;var p=32-Ee(c)-1;c&=~(1<<p),l+=1;var y=32-Ee(a)+p;if(30<y){var w=p-p%5;y=(c&(1<<w)-1).toString(32),c>>=w,p-=w,Hi=1<<32-Ee(a)+p|l<<p|c,Gi=y+i}else Hi=1<<y|l<<p|c,Gi=i}function og(i){i.return!==null&&(hs(i,1),n_(i,1,0))}function lg(i){for(;i===Ef;)Ef=ml[--pl],ml[pl]=null,Gu=ml[--pl],ml[pl]=null;for(;i===Zs;)Zs=ci[--di],ci[di]=null,Gi=ci[--di],ci[di]=null,Hi=ci[--di],ci[di]=null}function r_(i,a){ci[di++]=Hi,ci[di++]=Gi,ci[di++]=Zs,Hi=a.id,Gi=a.overflow,Zs=i}var Kn=null,Wt=null,ft=!1,ea=null,fi=!1,ug=Error(r(519));function ta(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $u(ui(a,i)),ug}function i_(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[kt]=i,a[Dt]=c,l){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(l=0;l<mc.length;l++)st(mc[l],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),eo(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),Hs(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||_E(a.textContent,l)?(c.popover!=null&&(st("beforetoggle",a),st("toggle",a)),c.onScroll!=null&&st("scroll",a),c.onScrollEnd!=null&&st("scrollend",a),c.onClick!=null&&(a.onclick=Bn),a=!0):a=!1,a||ta(i,!0)}function s_(i){for(Kn=i.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:Kn=Kn.return}}function gl(i){if(i!==Kn)return!1;if(!ft)return s_(i),ft=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Cv(i.type,i.memoizedProps)),l=!l),l&&Wt&&ta(i),s_(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Wt=NE(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Wt=NE(i)}else a===27?(a=Wt,pa(i.type)?(i=Dv,Dv=null,Wt=i):Wt=a):Wt=Kn?mi(i.stateNode.nextSibling):null;return!0}function ho(){Wt=Kn=null,ft=!1}function cg(){var i=ea;return i!==null&&(Vr===null?Vr=i:Vr.push.apply(Vr,i),ea=null),i}function $u(i){ea===null?ea=[i]:ea.push(i)}var dg=B(null),mo=null,ms=null;function na(i,a,l){ce(dg,a._currentValue),a._currentValue=l}function ps(i){i._currentValue=dg.current,J(dg)}function fg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function hg(i,a,l,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=p;for(var F=0;F<a.length;F++)if(R.context===a[F]){y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),fg(y.return,l,i),c||(w=null);break e}y=R.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=l,y=w.alternate,y!==null&&(y.lanes|=l),fg(w,l,i),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function vl(i,a,l,c){i=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var R=p.type;$r(p.pendingProps.value,w.value)||(i!==null?i.push(R):i=[R])}}else if(p===Be.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(bc):i=[bc])}p=p.return}i!==null&&hg(a,i,l,c),a.flags|=262144}function Tf(i){for(i=i.firstContext;i!==null;){if(!$r(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function po(i){mo=i,ms=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yn(i){return a_(mo,i)}function Sf(i,a){return mo===null&&po(i),a_(i,a)}function a_(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ms===null){if(i===null)throw Error(r(308));ms=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ms=ms.next=a;return l}var Fk=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},qk=t.unstable_scheduleCallback,Hk=t.unstable_NormalPriority,In={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mg(){return{controller:new Fk,data:new Map,refCount:0}}function Ku(i){i.refCount--,i.refCount===0&&qk(Hk,function(){i.controller.abort()})}var Yu=null,pg=0,yl=0,bl=null;function Gk(i,a){if(Yu===null){var l=Yu=[];pg=0,yl=yv(),bl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return pg++,a.then(o_,o_),a}function o_(){if(--pg===0&&Yu!==null){bl!==null&&(bl.status="fulfilled");var i=Yu;Yu=null,yl=0,bl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function $k(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var l_=W.S;W.S=function(i,a){Gw=Ct(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Gk(i,a),l_!==null&&l_(i,a)};var go=B(null);function gg(){var i=go.current;return i!==null?i:zt.pooledCache}function Af(i,a){a===null?ce(go,go.current):ce(go,a.pool)}function u_(){var i=gg();return i===null?null:{parent:In._currentValue,pool:i}}var xl=Error(r(460)),vg=Error(r(474)),Cf=Error(r(542)),Rf={then:function(){}};function c_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function d_(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Bn,Bn),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,h_(i),i;default:if(typeof a.status=="string")a.then(Bn,Bn);else{if(i=zt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,h_(i),i}throw yo=a,xl}}function vo(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(yo=l,xl):l}}var yo=null;function f_(){if(yo===null)throw Error(r(459));var i=yo;return yo=null,i}function h_(i){if(i===xl||i===Cf)throw Error(r(483))}var _l=null,Wu=0;function If(i){var a=Wu;return Wu+=1,_l===null&&(_l=[]),d_(_l,i,a)}function Qu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Nf(i,a){throw a.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function m_(i){function a(K,$){if(i){var Q=K.deletions;Q===null?(K.deletions=[$],K.flags|=16):Q.push($)}}function l(K,$){if(!i)return null;for(;$!==null;)a(K,$),$=$.sibling;return null}function c(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function p(K,$){return K=fs(K,$),K.index=0,K.sibling=null,K}function y(K,$,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<$?(K.flags|=67108866,$):Q):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function R(K,$,Q,ie){return $===null||$.tag!==6?($=sg(Q,K.mode,ie),$.return=K,$):($=p($,Q),$.return=K,$)}function F(K,$,Q,ie){var Ie=Q.type;return Ie===O?ne(K,$,Q.props.children,ie,Q.key):$!==null&&($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&vo(Ie)===$.type)?($=p($,Q.props),Qu($,Q),$.return=K,$):($=wf(Q.type,Q.key,Q.props,null,K.mode,ie),Qu($,Q),$.return=K,$)}function X(K,$,Q,ie){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=ag(Q,K.mode,ie),$.return=K,$):($=p($,Q.children||[]),$.return=K,$)}function ne(K,$,Q,ie,Ie){return $===null||$.tag!==7?($=fo(Q,K.mode,ie,Ie),$.return=K,$):($=p($,Q),$.return=K,$)}function se(K,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=sg(""+$,K.mode,Q),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return Q=wf($.type,$.key,$.props,null,K.mode,Q),Qu(Q,$),Q.return=K,Q;case A:return $=ag($,K.mode,Q),$.return=K,$;case S:return $=vo($),se(K,$,Q)}if(Oe($)||V($))return $=fo($,K.mode,Q,null),$.return=K,$;if(typeof $.then=="function")return se(K,If($),Q);if($.$$typeof===z)return se(K,Sf(K,$),Q);Nf(K,$)}return null}function Z(K,$,Q,ie){var Ie=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ie!==null?null:R(K,$,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case E:return Q.key===Ie?F(K,$,Q,ie):null;case A:return Q.key===Ie?X(K,$,Q,ie):null;case S:return Q=vo(Q),Z(K,$,Q,ie)}if(Oe(Q)||V(Q))return Ie!==null?null:ne(K,$,Q,ie,null);if(typeof Q.then=="function")return Z(K,$,If(Q),ie);if(Q.$$typeof===z)return Z(K,$,Sf(K,Q),ie);Nf(K,Q)}return null}function ee(K,$,Q,ie,Ie){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return K=K.get(Q)||null,R($,K,""+ie,Ie);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return K=K.get(ie.key===null?Q:ie.key)||null,F($,K,ie,Ie);case A:return K=K.get(ie.key===null?Q:ie.key)||null,X($,K,ie,Ie);case S:return ie=vo(ie),ee(K,$,Q,ie,Ie)}if(Oe(ie)||V(ie))return K=K.get(Q)||null,ne($,K,ie,Ie,null);if(typeof ie.then=="function")return ee(K,$,Q,If(ie),Ie);if(ie.$$typeof===z)return ee(K,$,Q,Sf($,ie),Ie);Nf($,ie)}return null}function Te(K,$,Q,ie){for(var Ie=null,yt=null,Re=$,Je=$=0,ut=null;Re!==null&&Je<Q.length;Je++){Re.index>Je?(ut=Re,Re=null):ut=Re.sibling;var bt=Z(K,Re,Q[Je],ie);if(bt===null){Re===null&&(Re=ut);break}i&&Re&&bt.alternate===null&&a(K,Re),$=y(bt,$,Je),yt===null?Ie=bt:yt.sibling=bt,yt=bt,Re=ut}if(Je===Q.length)return l(K,Re),ft&&hs(K,Je),Ie;if(Re===null){for(;Je<Q.length;Je++)Re=se(K,Q[Je],ie),Re!==null&&($=y(Re,$,Je),yt===null?Ie=Re:yt.sibling=Re,yt=Re);return ft&&hs(K,Je),Ie}for(Re=c(Re);Je<Q.length;Je++)ut=ee(Re,K,Je,Q[Je],ie),ut!==null&&(i&&ut.alternate!==null&&Re.delete(ut.key===null?Je:ut.key),$=y(ut,$,Je),yt===null?Ie=ut:yt.sibling=ut,yt=ut);return i&&Re.forEach(function(xa){return a(K,xa)}),ft&&hs(K,Je),Ie}function Me(K,$,Q,ie){if(Q==null)throw Error(r(151));for(var Ie=null,yt=null,Re=$,Je=$=0,ut=null,bt=Q.next();Re!==null&&!bt.done;Je++,bt=Q.next()){Re.index>Je?(ut=Re,Re=null):ut=Re.sibling;var xa=Z(K,Re,bt.value,ie);if(xa===null){Re===null&&(Re=ut);break}i&&Re&&xa.alternate===null&&a(K,Re),$=y(xa,$,Je),yt===null?Ie=xa:yt.sibling=xa,yt=xa,Re=ut}if(bt.done)return l(K,Re),ft&&hs(K,Je),Ie;if(Re===null){for(;!bt.done;Je++,bt=Q.next())bt=se(K,bt.value,ie),bt!==null&&($=y(bt,$,Je),yt===null?Ie=bt:yt.sibling=bt,yt=bt);return ft&&hs(K,Je),Ie}for(Re=c(Re);!bt.done;Je++,bt=Q.next())bt=ee(Re,K,Je,bt.value,ie),bt!==null&&(i&&bt.alternate!==null&&Re.delete(bt.key===null?Je:bt.key),$=y(bt,$,Je),yt===null?Ie=bt:yt.sibling=bt,yt=bt);return i&&Re.forEach(function(rO){return a(K,rO)}),ft&&hs(K,Je),Ie}function Pt(K,$,Q,ie){if(typeof Q=="object"&&Q!==null&&Q.type===O&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case E:e:{for(var Ie=Q.key;$!==null;){if($.key===Ie){if(Ie=Q.type,Ie===O){if($.tag===7){l(K,$.sibling),ie=p($,Q.props.children),ie.return=K,K=ie;break e}}else if($.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&vo(Ie)===$.type){l(K,$.sibling),ie=p($,Q.props),Qu(ie,Q),ie.return=K,K=ie;break e}l(K,$);break}else a(K,$);$=$.sibling}Q.type===O?(ie=fo(Q.props.children,K.mode,ie,Q.key),ie.return=K,K=ie):(ie=wf(Q.type,Q.key,Q.props,null,K.mode,ie),Qu(ie,Q),ie.return=K,K=ie)}return w(K);case A:e:{for(Ie=Q.key;$!==null;){if($.key===Ie)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){l(K,$.sibling),ie=p($,Q.children||[]),ie.return=K,K=ie;break e}else{l(K,$);break}else a(K,$);$=$.sibling}ie=ag(Q,K.mode,ie),ie.return=K,K=ie}return w(K);case S:return Q=vo(Q),Pt(K,$,Q,ie)}if(Oe(Q))return Te(K,$,Q,ie);if(V(Q)){if(Ie=V(Q),typeof Ie!="function")throw Error(r(150));return Q=Ie.call(Q),Me(K,$,Q,ie)}if(typeof Q.then=="function")return Pt(K,$,If(Q),ie);if(Q.$$typeof===z)return Pt(K,$,Sf(K,Q),ie);Nf(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(l(K,$.sibling),ie=p($,Q),ie.return=K,K=ie):(l(K,$),ie=sg(Q,K.mode,ie),ie.return=K,K=ie),w(K)):l(K,$)}return function(K,$,Q,ie){try{Wu=0;var Ie=Pt(K,$,Q,ie);return _l=null,Ie}catch(Re){if(Re===xl||Re===Cf)throw Re;var yt=Kr(29,Re,null,K.mode);return yt.lanes=ie,yt.return=K,yt}finally{}}}var bo=m_(!0),p_=m_(!1),ra=!1;function yg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ia(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function sa(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(wt&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=_f(i),Jx(i,null,l),a}return xf(i,c,a,l),_f(i)}function Xu(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ht(i,l)}}function xg(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var _g=!1;function Ju(){if(_g){var i=bl;if(i!==null)throw i}}function Zu(i,a,l,c){_g=!1;var p=i.updateQueue;ra=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var F=R,X=F.next;F.next=null,w===null?y=X:w.next=X,w=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==w&&(R===null?ne.firstBaseUpdate=X:R.next=X,ne.lastBaseUpdate=F))}if(y!==null){var se=p.baseState;w=0,ne=X=F=null,R=y;do{var Z=R.lane&-536870913,ee=Z!==R.lane;if(ee?(lt&Z)===Z:(c&Z)===Z){Z!==0&&Z===yl&&(_g=!0),ne!==null&&(ne=ne.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Te=i,Me=R;Z=a;var Pt=l;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){se=Te.call(Pt,se,Z);break e}se=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,Z=typeof Te=="function"?Te.call(Pt,se,Z):Te,Z==null)break e;se=b({},se,Z);break e;case 2:ra=!0}}Z=R.callback,Z!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(X=ne=ee,F=se):ne=ne.next=ee,w|=Z;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ee=R,R=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ne===null&&(F=se),p.baseState=F,p.firstBaseUpdate=X,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),ca|=w,i.lanes=w,i.memoizedState=se}}function g_(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function v_(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)g_(l[i],a)}var wl=B(null),kf=B(0);function y_(i,a){i=Ts,ce(kf,i),ce(wl,a),Ts=i|a.baseLanes}function wg(){ce(kf,Ts),ce(wl,wl.current)}function Eg(){Ts=kf.current,J(wl),J(kf)}var Yr=B(null),hi=null;function aa(i){var a=i.alternate;ce(xn,xn.current&1),ce(Yr,i),hi===null&&(a===null||wl.current!==null||a.memoizedState!==null)&&(hi=i)}function Tg(i){ce(xn,xn.current),ce(Yr,i),hi===null&&(hi=i)}function b_(i){i.tag===22?(ce(xn,xn.current),ce(Yr,i),hi===null&&(hi=i)):oa()}function oa(){ce(xn,xn.current),ce(Yr,Yr.current)}function Wr(i){J(Yr),hi===i&&(hi=null),J(xn)}var xn=B(0);function Df(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Nv(l)||kv(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var gs=0,We=null,jt=null,Nn=null,Of=!1,El=!1,xo=!1,jf=0,ec=0,Tl=null,Kk=0;function dn(){throw Error(r(321))}function Sg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!$r(i[l],a[l]))return!1;return!0}function Ag(i,a,l,c,p,y){return gs=y,We=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=i===null||i.memoizedState===null?nw:Bg,xo=!1,y=l(c,p),xo=!1,El&&(y=__(a,l,c,p)),x_(i),y}function x_(i){W.H=rc;var a=jt!==null&&jt.next!==null;if(gs=0,Nn=jt=We=null,Of=!1,ec=0,Tl=null,a)throw Error(r(300));i===null||kn||(i=i.dependencies,i!==null&&Tf(i)&&(kn=!0))}function __(i,a,l,c){We=i;var p=0;do{if(El&&(Tl=null),ec=0,El=!1,25<=p)throw Error(r(301));if(p+=1,Nn=jt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}W.H=rw,y=a(l,c)}while(El);return y}function Yk(){var i=W.H,a=i.useState()[0];return a=typeof a.then=="function"?tc(a):a,i=i.useState()[0],(jt!==null?jt.memoizedState:null)!==i&&(We.flags|=1024),a}function Cg(){var i=jf!==0;return jf=0,i}function Rg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Ig(i){if(Of){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Of=!1}gs=0,Nn=jt=We=null,El=!1,ec=jf=0,Tl=null}function _r(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?We.memoizedState=Nn=i:Nn=Nn.next=i,Nn}function _n(){if(jt===null){var i=We.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var a=Nn===null?We.memoizedState:Nn.next;if(a!==null)Nn=a,jt=i;else{if(i===null)throw We.alternate===null?Error(r(467)):Error(r(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Nn===null?We.memoizedState=Nn=i:Nn=Nn.next=i}return Nn}function Mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(i){var a=ec;return ec+=1,Tl===null&&(Tl=[]),i=d_(Tl,i,a),a=We,(Nn===null?a.memoizedState:Nn.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?nw:Bg),i}function Pf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return tc(i);if(i.$$typeof===z)return Yn(i)}throw Error(r(438,String(i)))}function Ng(i){var a=null,l=We.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=We.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Mf(),We.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=L;return a.index++,l}function vs(i,a){return typeof a=="function"?a(i):a}function Vf(i){var a=_n();return kg(a,jt,i)}function kg(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=i.baseQueue,y=c.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}a.baseQueue=p=y,c.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{a=p.next;var R=w=null,F=null,X=a,ne=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(lt&se)===se:(gs&se)===se){var Z=X.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===yl&&(ne=!0);else if((gs&Z)===Z){X=X.next,Z===yl&&(ne=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(R=F=se,w=y):F=F.next=se,We.lanes|=Z,ca|=Z;se=X.action,xo&&l(y,se),y=X.hasEagerState?X.eagerState:l(y,se)}else Z={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(R=F=Z,w=y):F=F.next=Z,We.lanes|=se,ca|=se;X=X.next}while(X!==null&&X!==a);if(F===null?w=y:F.next=R,!$r(y,i.memoizedState)&&(kn=!0,ne&&(l=bl,l!==null)))throw l;i.memoizedState=y,i.baseState=w,i.baseQueue=F,c.lastRenderedState=y}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Dg(i){var a=_n(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);$r(y,a.memoizedState)||(kn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,c]}function w_(i,a,l){var c=We,p=_n(),y=ft;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var w=!$r((jt||p).memoizedState,l);if(w&&(p.memoizedState=l,kn=!0),p=p.queue,Mg(S_.bind(null,c,p,i),[i]),p.getSnapshot!==a||w||Nn!==null&&Nn.memoizedState.tag&1){if(c.flags|=2048,Sl(9,{destroy:void 0},T_.bind(null,c,p,l,a),null),zt===null)throw Error(r(349));y||(gs&127)!==0||E_(c,a,l)}return l}function E_(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=We.updateQueue,a===null?(a=Mf(),We.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function T_(i,a,l,c){a.value=l,a.getSnapshot=c,A_(a)&&C_(i)}function S_(i,a,l){return l(function(){A_(a)&&C_(i)})}function A_(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!$r(i,l)}catch{return!0}}function C_(i){var a=co(i,2);a!==null&&Lr(a,i,2)}function Og(i){var a=_r();if(typeof i=="function"){var l=i;if(i=l(),xo){ae(!0);try{l()}finally{ae(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:i},a}function R_(i,a,l,c){return i.baseState=l,kg(i,jt,typeof c=="function"?c:vs)}function Wk(i,a,l,c,p){if(zf(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};W.T!==null?l(!0):y.isTransition=!1,c(y),l=a.pending,l===null?(y.next=a.pending=y,I_(a,y)):(y.next=l.next,a.pending=l.next=y)}}function I_(i,a){var l=a.action,c=a.payload,p=i.state;if(a.isTransition){var y=W.T,w={};W.T=w;try{var R=l(p,c),F=W.S;F!==null&&F(w,R),N_(i,a,R)}catch(X){jg(i,a,X)}finally{y!==null&&w.types!==null&&(y.types=w.types),W.T=y}}else try{y=l(p,c),N_(i,a,y)}catch(X){jg(i,a,X)}}function N_(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){k_(i,a,c)},function(c){return jg(i,a,c)}):k_(i,a,l)}function k_(i,a,l){a.status="fulfilled",a.value=l,D_(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,I_(i,l)))}function jg(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,D_(a),a=a.next;while(a!==c)}i.action=null}function D_(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function O_(i,a){return a}function j_(i,a){if(ft){var l=zt.formState;if(l!==null){e:{var c=We;if(ft){if(Wt){t:{for(var p=Wt,y=fi;p.nodeType!==8;){if(!y){p=null;break t}if(p=mi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Wt=mi(p.nextSibling),c=p.data==="F!";break e}}ta(c)}c=!1}c&&(a=l[0])}}return l=_r(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O_,lastRenderedState:a},l.queue=c,l=Z_.bind(null,We,c),c.dispatch=l,c=Og(!1),y=zg.bind(null,We,!1,c.queue),c=_r(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,l=Wk.bind(null,We,p,y,l),p.dispatch=l,c.memoizedState=i,[a,l,!1]}function M_(i){var a=_n();return P_(a,jt,i)}function P_(i,a,l){if(a=kg(i,a,O_)[0],i=Vf(vs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=tc(a)}catch(w){throw w===xl?Cf:w}else c=a;a=_n();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(We.flags|=2048,Sl(9,{destroy:void 0},Qk.bind(null,p,l),null)),[c,y,i]}function Qk(i,a){i.action=a}function V_(i){var a=_n(),l=jt;if(l!==null)return P_(a,l,i);_n(),a=a.memoizedState,l=_n();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Sl(i,a,l,c){return i={tag:i,create:l,deps:c,inst:a,next:null},a=We.updateQueue,a===null&&(a=Mf(),We.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function L_(){return _n().memoizedState}function Lf(i,a,l,c){var p=_r();We.flags|=i,p.memoizedState=Sl(1|a,{destroy:void 0},l,c===void 0?null:c)}function Uf(i,a,l,c){var p=_n();c=c===void 0?null:c;var y=p.memoizedState.inst;jt!==null&&c!==null&&Sg(c,jt.memoizedState.deps)?p.memoizedState=Sl(a,y,l,c):(We.flags|=i,p.memoizedState=Sl(1|a,y,l,c))}function U_(i,a){Lf(8390656,8,i,a)}function Mg(i,a){Uf(2048,8,i,a)}function Xk(i){We.flags|=4;var a=We.updateQueue;if(a===null)a=Mf(),We.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function z_(i){var a=_n().memoizedState;return Xk({ref:a,nextImpl:i}),function(){if((wt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function B_(i,a){return Uf(4,2,i,a)}function F_(i,a){return Uf(4,4,i,a)}function q_(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function H_(i,a,l){l=l!=null?l.concat([i]):null,Uf(4,4,q_.bind(null,a,i),l)}function Pg(){}function G_(i,a){var l=_n();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&Sg(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function $_(i,a){var l=_n();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&Sg(a,c[1]))return c[0];if(c=i(),xo){ae(!0);try{i()}finally{ae(!1)}}return l.memoizedState=[c,a],c}function Vg(i,a,l){return l===void 0||(gs&1073741824)!==0&&(lt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=Kw(),We.lanes|=i,ca|=i,l)}function K_(i,a,l,c){return $r(l,a)?l:wl.current!==null?(i=Vg(i,l,c),$r(i,a)||(kn=!0),i):(gs&42)===0||(gs&1073741824)!==0&&(lt&261930)===0?(kn=!0,i.memoizedState=l):(i=Kw(),We.lanes|=i,ca|=i,a)}function Y_(i,a,l,c,p){var y=re.p;re.p=y!==0&&8>y?y:8;var w=W.T,R={};W.T=R,zg(i,!1,a,l);try{var F=p(),X=W.S;if(X!==null&&X(R,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=$k(F,c);nc(i,a,ne,Jr(i))}else nc(i,a,c,Jr(i))}catch(se){nc(i,a,{then:function(){},status:"rejected",reason:se},Jr())}finally{re.p=y,w!==null&&R.types!==null&&(w.types=R.types),W.T=w}}function Jk(){}function Lg(i,a,l,c){if(i.tag!==5)throw Error(r(476));var p=W_(i).queue;Y_(i,p,a,ue,l===null?Jk:function(){return Q_(i),l(c)})}function W_(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:ue},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Q_(i){var a=W_(i);a.next===null&&(a=i.alternate.memoizedState),nc(i,a.next.queue,{},Jr())}function Ug(){return Yn(bc)}function X_(){return _n().memoizedState}function J_(){return _n().memoizedState}function Zk(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Jr();i=ia(l);var c=sa(a,i,l);c!==null&&(Lr(c,a,l),Xu(c,a,l)),a={cache:mg()},i.payload=a;return}a=a.return}}function eD(i,a,l){var c=Jr();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zf(i)?ew(a,l):(l=rg(i,a,l,c),l!==null&&(Lr(l,i,c),tw(l,a,c)))}function Z_(i,a,l){var c=Jr();nc(i,a,l,c)}function nc(i,a,l,c){var p={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(zf(i))ew(a,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var w=a.lastRenderedState,R=y(w,l);if(p.hasEagerState=!0,p.eagerState=R,$r(R,w))return xf(i,a,p,0),zt===null&&bf(),!1}catch{}finally{}if(l=rg(i,a,p,c),l!==null)return Lr(l,i,c),tw(l,a,c),!0}return!1}function zg(i,a,l,c){if(c={lane:2,revertLane:yv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},zf(i)){if(a)throw Error(r(479))}else a=rg(i,l,c,2),a!==null&&Lr(a,i,2)}function zf(i){var a=i.alternate;return i===We||a!==null&&a===We}function ew(i,a){El=Of=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function tw(i,a,l){if((l&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Ht(i,l)}}var rc={readContext:Yn,use:Pf,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};rc.useEffectEvent=dn;var nw={readContext:Yn,use:Pf,useCallback:function(i,a){return _r().memoizedState=[i,a===void 0?null:a],i},useContext:Yn,useEffect:U_,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Lf(4194308,4,q_.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Lf(4194308,4,i,a)},useInsertionEffect:function(i,a){Lf(4,2,i,a)},useMemo:function(i,a){var l=_r();a=a===void 0?null:a;var c=i();if(xo){ae(!0);try{i()}finally{ae(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=_r();if(l!==void 0){var p=l(a);if(xo){ae(!0);try{l(a)}finally{ae(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=eD.bind(null,We,i),[c.memoizedState,i]},useRef:function(i){var a=_r();return i={current:i},a.memoizedState=i},useState:function(i){i=Og(i);var a=i.queue,l=Z_.bind(null,We,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Pg,useDeferredValue:function(i,a){var l=_r();return Vg(l,i,a)},useTransition:function(){var i=Og(!1);return i=Y_.bind(null,We,i.queue,!0,!1),_r().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=We,p=_r();if(ft){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),zt===null)throw Error(r(349));(lt&127)!==0||E_(c,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,U_(S_.bind(null,c,y,i),[i]),c.flags|=2048,Sl(9,{destroy:void 0},T_.bind(null,c,y,l,a),null),l},useId:function(){var i=_r(),a=zt.identifierPrefix;if(ft){var l=Gi,c=Hi;l=(c&~(1<<32-Ee(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=jf++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Kk++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Ug,useFormState:j_,useActionState:j_,useOptimistic:function(i){var a=_r();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=zg.bind(null,We,!0,l),l.dispatch=a,[i,a]},useMemoCache:Ng,useCacheRefresh:function(){return _r().memoizedState=Zk.bind(null,We)},useEffectEvent:function(i){var a=_r(),l={impl:i};return a.memoizedState=l,function(){if((wt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Bg={readContext:Yn,use:Pf,useCallback:G_,useContext:Yn,useEffect:Mg,useImperativeHandle:H_,useInsertionEffect:B_,useLayoutEffect:F_,useMemo:$_,useReducer:Vf,useRef:L_,useState:function(){return Vf(vs)},useDebugValue:Pg,useDeferredValue:function(i,a){var l=_n();return K_(l,jt.memoizedState,i,a)},useTransition:function(){var i=Vf(vs)[0],a=_n().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:w_,useId:X_,useHostTransitionStatus:Ug,useFormState:M_,useActionState:M_,useOptimistic:function(i,a){var l=_n();return R_(l,jt,i,a)},useMemoCache:Ng,useCacheRefresh:J_};Bg.useEffectEvent=z_;var rw={readContext:Yn,use:Pf,useCallback:G_,useContext:Yn,useEffect:Mg,useImperativeHandle:H_,useInsertionEffect:B_,useLayoutEffect:F_,useMemo:$_,useReducer:Dg,useRef:L_,useState:function(){return Dg(vs)},useDebugValue:Pg,useDeferredValue:function(i,a){var l=_n();return jt===null?Vg(l,i,a):K_(l,jt.memoizedState,i,a)},useTransition:function(){var i=Dg(vs)[0],a=_n().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:w_,useId:X_,useHostTransitionStatus:Ug,useFormState:V_,useActionState:V_,useOptimistic:function(i,a){var l=_n();return jt!==null?R_(l,jt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Ng,useCacheRefresh:J_};rw.useEffectEvent=z_;function Fg(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:b({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var qg={enqueueSetState:function(i,a,l){i=i._reactInternals;var c=Jr(),p=ia(c);p.payload=a,l!=null&&(p.callback=l),a=sa(i,p,c),a!==null&&(Lr(a,i,c),Xu(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=Jr(),p=ia(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=sa(i,p,c),a!==null&&(Lr(a,i,c),Xu(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Jr(),c=ia(l);c.tag=2,a!=null&&(c.callback=a),a=sa(i,c,l),a!==null&&(Lr(a,i,l),Xu(a,i,l))}};function iw(i,a,l,c,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,w):a.prototype&&a.prototype.isPureReactComponent?!qu(l,c)||!qu(p,y):!0}function sw(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&qg.enqueueReplaceState(a,a.state,null)}function _o(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=b({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function aw(i){yf(i)}function ow(i){console.error(i)}function lw(i){yf(i)}function Bf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function uw(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Hg(i,a,l){return l=ia(l),l.tag=3,l.payload={element:null},l.callback=function(){Bf(i,a)},l}function cw(i){return i=ia(i),i.tag=3,i}function dw(i,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;i.payload=function(){return p(y)},i.callback=function(){uw(a,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){uw(a,l,c),typeof p!="function"&&(da===null?da=new Set([this]):da.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function tD(i,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&vl(a,l,p,!0),l=Yr.current,l!==null){switch(l.tag){case 31:case 13:return hi===null?Zf():l.alternate===null&&fn===0&&(fn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Rf?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),pv(i,c,p)),!1;case 22:return l.flags|=65536,c===Rf?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),pv(i,c,p)),!1}throw Error(r(435,l.tag))}return pv(i,c,p),Zf(),!1}if(ft)return a=Yr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==ug&&(i=Error(r(422),{cause:c}),$u(ui(i,l)))):(c!==ug&&(a=Error(r(423),{cause:c}),$u(ui(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=ui(c,l),p=Hg(i.stateNode,c,p),xg(i,p),fn!==4&&(fn=2)),!1;var y=Error(r(520),{cause:c});if(y=ui(y,l),dc===null?dc=[y]:dc.push(y),fn!==4&&(fn=2),a===null)return!0;c=ui(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=Hg(l.stateNode,c,i),xg(l,i),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(da===null||!da.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=cw(p),dw(p,i,l,c),xg(l,p),!1}l=l.return}while(l!==null);return!1}var Gg=Error(r(461)),kn=!1;function Wn(i,a,l,c){a.child=i===null?p_(a,null,l,c):bo(a,i.child,l,c)}function fw(i,a,l,c,p){l=l.render;var y=a.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return po(a),c=Ag(i,a,l,w,y,p),R=Cg(),i!==null&&!kn?(Rg(i,a,p),ys(i,a,p)):(ft&&R&&og(a),a.flags|=1,Wn(i,a,c,p),a.child)}function hw(i,a,l,c,p){if(i===null){var y=l.type;return typeof y=="function"&&!ig(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,mw(i,a,y,c,p)):(i=wf(l.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Zg(i,p)){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:qu,l(w,c)&&i.ref===a.ref)return ys(i,a,p)}return a.flags|=1,i=fs(y,c),i.ref=a.ref,i.return=a,a.child=i}function mw(i,a,l,c,p){if(i!==null){var y=i.memoizedProps;if(qu(y,c)&&i.ref===a.ref)if(kn=!1,a.pendingProps=c=y,Zg(i,p))(i.flags&131072)!==0&&(kn=!0);else return a.lanes=i.lanes,ys(i,a,p)}return $g(i,a,l,c,p)}function pw(i,a,l,c){var p=c.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(c=a.child=i.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return gw(i,a,y,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Af(a,y!==null?y.cachePool:null),y!==null?y_(a,y):wg(),b_(a);else return c=a.lanes=536870912,gw(i,a,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(Af(a,y.cachePool),y_(a,y),oa(),a.memoizedState=null):(i!==null&&Af(a,null),wg(),oa());return Wn(i,a,p,l),a.child}function ic(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function gw(i,a,l,c,p){var y=gg();return y=y===null?null:{parent:In._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},i!==null&&Af(a,null),wg(),b_(a),i!==null&&vl(i,a,c,!0),a.childLanes=p,null}function Ff(i,a){return a=Hf({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function vw(i,a,l){return bo(a,i.child,null,l),i=Ff(a,a.pendingProps),i.flags|=2,Wr(a),a.memoizedState=null,i}function nD(i,a,l){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ft){if(c.mode==="hidden")return i=Ff(a,c),a.lanes=536870912,ic(null,i);if(Tg(a),(i=Wt)?(i=IE(i,fi),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Zs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=e_(i),l.return=a,a.child=l,Kn=a,Wt=null)):i=null,i===null)throw ta(a);return a.lanes=536870912,null}return Ff(a,c)}var y=i.memoizedState;if(y!==null){var w=y.dehydrated;if(Tg(a),p)if(a.flags&256)a.flags&=-257,a=vw(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(kn||vl(i,a,l,!1),p=(l&i.childLanes)!==0,kn||p){if(c=zt,c!==null&&(w=ln(c,l),w!==0&&w!==y.retryLane))throw y.retryLane=w,co(i,w),Lr(c,i,w),Gg;Zf(),a=vw(i,a,l)}else i=y.treeContext,Wt=mi(w.nextSibling),Kn=a,ft=!0,ea=null,fi=!1,i!==null&&r_(a,i),a=Ff(a,c),a.flags|=4096;return a}return i=fs(i.child,{mode:c.mode,children:c.children}),i.ref=a.ref,a.child=i,i.return=a,i}function qf(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function $g(i,a,l,c,p){return po(a),l=Ag(i,a,l,c,void 0,p),c=Cg(),i!==null&&!kn?(Rg(i,a,p),ys(i,a,p)):(ft&&c&&og(a),a.flags|=1,Wn(i,a,l,p),a.child)}function yw(i,a,l,c,p,y){return po(a),a.updateQueue=null,l=__(a,c,l,p),x_(i),c=Cg(),i!==null&&!kn?(Rg(i,a,y),ys(i,a,y)):(ft&&c&&og(a),a.flags|=1,Wn(i,a,l,y),a.child)}function bw(i,a,l,c,p){if(po(a),a.stateNode===null){var y=hl,w=l.contextType;typeof w=="object"&&w!==null&&(y=Yn(w)),y=new l(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=qg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},yg(a),w=l.contextType,y.context=typeof w=="object"&&w!==null?Yn(w):hl,y.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Fg(a,l,w,c),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&qg.enqueueReplaceState(y,y.state,null),Zu(a,c,y,p),Ju(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){y=a.stateNode;var R=a.memoizedProps,F=_o(l,R);y.props=F;var X=y.context,ne=l.contextType;w=hl,typeof ne=="object"&&ne!==null&&(w=Yn(ne));var se=l.getDerivedStateFromProps;ne=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||X!==w)&&sw(a,y,c,w),ra=!1;var Z=a.memoizedState;y.state=Z,Zu(a,c,y,p),Ju(),X=a.memoizedState,R||Z!==X||ra?(typeof se=="function"&&(Fg(a,l,se,c),X=a.memoizedState),(F=ra||iw(a,l,F,c,Z,X,w))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=X),y.props=c,y.state=X,y.context=w,c=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,bg(i,a),w=a.memoizedProps,ne=_o(l,w),y.props=ne,se=a.pendingProps,Z=y.context,X=l.contextType,F=hl,typeof X=="object"&&X!==null&&(F=Yn(X)),R=l.getDerivedStateFromProps,(X=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==se||Z!==F)&&sw(a,y,c,F),ra=!1,Z=a.memoizedState,y.state=Z,Zu(a,c,y,p),Ju();var ee=a.memoizedState;w!==se||Z!==ee||ra||i!==null&&i.dependencies!==null&&Tf(i.dependencies)?(typeof R=="function"&&(Fg(a,l,R,c),ee=a.memoizedState),(ne=ra||iw(a,l,ne,c,Z,ee,F)||i!==null&&i.dependencies!==null&&Tf(i.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ee,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ee,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ee),y.props=c,y.state=ee,y.context=F,c=ne):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),c=!1)}return y=c,qf(i,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&c?(a.child=bo(a,i.child,null,p),a.child=bo(a,null,l,p)):Wn(i,a,l,p),a.memoizedState=y.state,i=a.child):i=ys(i,a,p),i}function xw(i,a,l,c){return ho(),a.flags|=256,Wn(i,a,l,c),a.child}var Kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yg(i){return{baseLanes:i,cachePool:u_()}}function Wg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Xr),i}function _w(i,a,l){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(xn.current&2)!==0),w&&(p=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,i===null){if(ft){if(p?aa(a):oa(),(i=Wt)?(i=IE(i,fi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Zs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=e_(i),l.return=a,a.child=l,Kn=a,Wt=null)):i=null,i===null)throw ta(a);return kv(i)?a.lanes=32:a.lanes=536870912,null}var R=c.children;return c=c.fallback,p?(oa(),p=a.mode,R=Hf({mode:"hidden",children:R},p),c=fo(c,p,l,null),R.return=a,c.return=a,R.sibling=c,a.child=R,c=a.child,c.memoizedState=Yg(l),c.childLanes=Wg(i,w,l),a.memoizedState=Kg,ic(null,c)):(aa(a),Qg(a,R))}var F=i.memoizedState;if(F!==null&&(R=F.dehydrated,R!==null)){if(y)a.flags&256?(aa(a),a.flags&=-257,a=Xg(i,a,l)):a.memoizedState!==null?(oa(),a.child=i.child,a.flags|=128,a=null):(oa(),R=c.fallback,p=a.mode,c=Hf({mode:"visible",children:c.children},p),R=fo(R,p,l,null),R.flags|=2,c.return=a,R.return=a,c.sibling=R,a.child=c,bo(a,i.child,null,l),c=a.child,c.memoizedState=Yg(l),c.childLanes=Wg(i,w,l),a.memoizedState=Kg,a=ic(null,c));else if(aa(a),kv(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var X=w.dgst;w=X,c=Error(r(419)),c.stack="",c.digest=w,$u({value:c,source:null,stack:null}),a=Xg(i,a,l)}else if(kn||vl(i,a,l,!1),w=(l&i.childLanes)!==0,kn||w){if(w=zt,w!==null&&(c=ln(w,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,co(i,c),Lr(w,i,c),Gg;Nv(R)||Zf(),a=Xg(i,a,l)}else Nv(R)?(a.flags|=192,a.child=i.child,a=null):(i=F.treeContext,Wt=mi(R.nextSibling),Kn=a,ft=!0,ea=null,fi=!1,i!==null&&r_(a,i),a=Qg(a,c.children),a.flags|=4096);return a}return p?(oa(),R=c.fallback,p=a.mode,F=i.child,X=F.sibling,c=fs(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,X!==null?R=fs(X,R):(R=fo(R,p,l,null),R.flags|=2),R.return=a,c.return=a,c.sibling=R,a.child=c,ic(null,c),c=a.child,R=i.child.memoizedState,R===null?R=Yg(l):(p=R.cachePool,p!==null?(F=In._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=u_(),R={baseLanes:R.baseLanes|l,cachePool:p}),c.memoizedState=R,c.childLanes=Wg(i,w,l),a.memoizedState=Kg,ic(i.child,c)):(aa(a),l=i.child,i=l.sibling,l=fs(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(w=a.deletions,w===null?(a.deletions=[i],a.flags|=16):w.push(i)),a.child=l,a.memoizedState=null,l)}function Qg(i,a){return a=Hf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Hf(i,a){return i=Kr(22,i,null,a),i.lanes=0,i}function Xg(i,a,l){return bo(a,i.child,null,l),i=Qg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function ww(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),fg(i.return,a,l)}function Jg(i,a,l,c,p,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p,treeForkCount:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=p,w.treeForkCount=y)}function Ew(i,a,l){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var w=xn.current,R=(w&2)!==0;if(R?(w=w&1|2,a.flags|=128):w&=1,ce(xn,w),Wn(i,a,c,l),c=ft?Gu:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,l,a);else if(i.tag===19)ww(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Df(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Jg(a,!1,p,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Df(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Jg(a,!0,l,null,y,c);break;case"together":Jg(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function ys(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ca|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(vl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=fs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=fs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Zg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Tf(i)))}function rD(i,a,l){switch(a.tag){case 3:Lt(a,a.stateNode.containerInfo),na(a,In,i.memoizedState.cache),ho();break;case 27:case 5:Sn(a);break;case 4:Lt(a,a.stateNode.containerInfo);break;case 10:na(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Tg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(aa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?_w(i,a,l):(aa(a),i=ys(i,a,l),i!==null?i.sibling:null);aa(a);break;case 19:var p=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(vl(i,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return Ew(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ce(xn,xn.current),c)break;return null;case 22:return a.lanes=0,pw(i,a,l,a.pendingProps);case 24:na(a,In,i.memoizedState.cache)}return ys(i,a,l)}function Tw(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)kn=!0;else{if(!Zg(i,l)&&(a.flags&128)===0)return kn=!1,rD(i,a,l);kn=(i.flags&131072)!==0}else kn=!1,ft&&(a.flags&1048576)!==0&&n_(a,Gu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(i=vo(a.elementType),a.type=i,typeof i=="function")ig(i)?(c=_o(i,c),a.tag=1,a=bw(null,a,i,c,l)):(a.tag=0,a=$g(null,a,i,c,l));else{if(i!=null){var p=i.$$typeof;if(p===H){a.tag=11,a=fw(null,a,i,c,l);break e}else if(p===C){a.tag=14,a=hw(null,a,i,c,l);break e}}throw a=ve(i)||i,Error(r(306,a,""))}}return a;case 0:return $g(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=_o(c,a.pendingProps),bw(i,a,c,p,l);case 3:e:{if(Lt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,bg(i,a),Zu(a,c,null,l);var w=a.memoizedState;if(c=w.cache,na(a,In,c),c!==y.cache&&hg(a,[In],l,!0),Ju(),c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=xw(i,a,c,l);break e}else if(c!==p){p=ui(Error(r(424)),a),$u(p),a=xw(i,a,c,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Wt=mi(i.firstChild),Kn=a,ft=!0,ea=null,fi=!0,l=p_(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ho(),c===p){a=ys(i,a,l);break e}Wn(i,a,c,l)}a=a.child}return a;case 26:return qf(i,a),i===null?(l=ME(a.type,null,a.pendingProps,null))?a.memoizedState=l:ft||(l=a.type,i=a.pendingProps,c=ah(ze.current).createElement(l),c[kt]=a,c[Dt]=i,Qn(c,l,i),Ot(c),a.stateNode=c):a.memoizedState=ME(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Sn(a),i===null&&ft&&(c=a.stateNode=DE(a.type,a.pendingProps,ze.current),Kn=a,fi=!0,p=Wt,pa(a.type)?(Dv=p,Wt=mi(c.firstChild)):Wt=p),Wn(i,a,a.pendingProps.children,l),qf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ft&&((p=c=Wt)&&(c=OD(c,a.type,a.pendingProps,fi),c!==null?(a.stateNode=c,Kn=a,Wt=mi(c.firstChild),fi=!1,p=!0):p=!1),p||ta(a)),Sn(a),p=a.type,y=a.pendingProps,w=i!==null?i.memoizedProps:null,c=y.children,Cv(p,y)?c=null:w!==null&&Cv(p,w)&&(a.flags|=32),a.memoizedState!==null&&(p=Ag(i,a,Yk,null,null,l),bc._currentValue=p),qf(i,a),Wn(i,a,c,l),a.child;case 6:return i===null&&ft&&((i=l=Wt)&&(l=jD(l,a.pendingProps,fi),l!==null?(a.stateNode=l,Kn=a,Wt=null,i=!0):i=!1),i||ta(a)),null;case 13:return _w(i,a,l);case 4:return Lt(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=bo(a,null,c,l):Wn(i,a,c,l),a.child;case 11:return fw(i,a,a.type,a.pendingProps,l);case 7:return Wn(i,a,a.pendingProps,l),a.child;case 8:return Wn(i,a,a.pendingProps.children,l),a.child;case 12:return Wn(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,na(a,a.type,c.value),Wn(i,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,po(a),p=Yn(p),c=c(p),a.flags|=1,Wn(i,a,c,l),a.child;case 14:return hw(i,a,a.type,a.pendingProps,l);case 15:return mw(i,a,a.type,a.pendingProps,l);case 19:return Ew(i,a,l);case 31:return nD(i,a,l);case 22:return pw(i,a,l,a.pendingProps);case 24:return po(a),c=Yn(In),i===null?(p=gg(),p===null&&(p=zt,y=mg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:c,cache:p},yg(a),na(a,In,p)):((i.lanes&l)!==0&&(bg(i,a),Zu(a,null,null,l),Ju()),p=i.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),na(a,In,c)):(c=y.cache,na(a,In,c),c!==p.cache&&hg(a,[In],l,!0))),Wn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function bs(i){i.flags|=4}function ev(i,a,l,c,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Xw())i.flags|=8192;else throw yo=Rf,vg}else i.flags&=-16777217}function Sw(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!zE(a))if(Xw())i.flags|=8192;else throw yo=Rf,vg}function Gf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?bn():536870912,i.lanes|=a,Il|=a)}function sc(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Qt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function iD(i,a,l){var c=a.pendingProps;switch(lg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(a),null;case 1:return Qt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ps(In),_t(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(gl(a)?bs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cg())),Qt(a),null;case 26:var p=a.type,y=a.memoizedState;return i===null?(bs(a),y!==null?(Qt(a),Sw(a,y)):(Qt(a),ev(a,p,null,c,l))):y?y!==i.memoizedState?(bs(a),Qt(a),Sw(a,y)):(Qt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==c&&bs(a),Qt(a),ev(a,p,i,c,l)),null;case 27:if(pe(a),l=ze.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&bs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Qt(a),null}i=fe.current,gl(a)?i_(a):(i=DE(p,c,l),a.stateNode=i,bs(a))}return Qt(a),null;case 5:if(pe(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&bs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Qt(a),null}if(y=fe.current,gl(a))i_(a);else{var w=ah(ze.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?w.createElement(p,{is:c.is}):w.createElement(p)}}y[kt]=a,y[Dt]=c;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=y;e:switch(Qn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&bs(a)}}return Qt(a),ev(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&bs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=ze.current,gl(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,p=Kn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[kt]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||_E(i.nodeValue,l)),i||ta(a,!0)}else i=ah(i).createTextNode(c),i[kt]=a,a.stateNode=i}return Qt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(c=gl(a),l!==null){if(i===null){if(!c)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[kt]=a}else ho(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),i=!1}else l=cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Wr(a),a):(Wr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Qt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=gl(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[kt]=a}else ho(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),p=!1}else p=cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Wr(a),a):(Wr(a),null)}return Wr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,i=i!==null&&i.memoizedState!==null,l&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Gf(a,a.updateQueue),Qt(a),null);case 4:return _t(),i===null&&wv(a.stateNode.containerInfo),Qt(a),null;case 10:return ps(a.type),Qt(a),null;case 19:if(J(xn),c=a.memoizedState,c===null)return Qt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)sc(c,!1);else{if(fn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=Df(i),y!==null){for(a.flags|=128,sc(c,!1),i=y.updateQueue,a.updateQueue=i,Gf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Zx(l,i),l=l.sibling;return ce(xn,xn.current&1|2),ft&&hs(a,c.treeForkCount),a.child}i=i.sibling}c.tail!==null&&Ct()>Qf&&(a.flags|=128,p=!0,sc(c,!1),a.lanes=4194304)}else{if(!p)if(i=Df(y),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Gf(a,i),sc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!ft)return Qt(a),null}else 2*Ct()-c.renderingStartTime>Qf&&l!==536870912&&(a.flags|=128,p=!0,sc(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(i=c.last,i!==null?i.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Ct(),i.sibling=null,l=xn.current,ce(xn,p?l&1|2:l&1),ft&&hs(a,c.treeForkCount),i):(Qt(a),null);case 22:case 23:return Wr(a),Eg(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Qt(a),a.subtreeFlags&6&&(a.flags|=8192)):Qt(a),l=a.updateQueue,l!==null&&Gf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&J(go),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ps(In),Qt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function sD(i,a){switch(lg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ps(In),_t(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return pe(a),null;case 31:if(a.memoizedState!==null){if(Wr(a),a.alternate===null)throw Error(r(340));ho()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Wr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));ho()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return J(xn),null;case 4:return _t(),null;case 10:return ps(a.type),null;case 22:case 23:return Wr(a),Eg(),i!==null&&J(go),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ps(In),null;case 25:return null;default:return null}}function Aw(i,a){switch(lg(a),a.tag){case 3:ps(In),_t();break;case 26:case 27:case 5:pe(a);break;case 4:_t();break;case 31:a.memoizedState!==null&&Wr(a);break;case 13:Wr(a);break;case 19:J(xn);break;case 10:ps(a.type);break;case 22:case 23:Wr(a),Eg(),i!==null&&J(go);break;case 24:ps(In)}}function ac(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&i)===i){c=void 0;var y=l.create,w=l.inst;c=y(),w.destroy=c}l=l.next}while(l!==p)}}catch(R){It(a,a.return,R)}}function la(i,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&i)===i){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,p=a;var F=l,X=R;try{X()}catch(ne){It(p,F,ne)}}}c=c.next}while(c!==y)}}catch(ne){It(a,a.return,ne)}}function Cw(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{v_(a,l)}catch(c){It(i,i.return,c)}}}function Rw(i,a,l){l.props=_o(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){It(i,a,c)}}function oc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(p){It(i,a,p)}}function $i(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){It(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){It(i,a,p)}else l.current=null}function Iw(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){It(i,i.return,p)}}function tv(i,a,l){try{var c=i.stateNode;CD(c,i.type,l,a),c[Dt]=a}catch(p){It(i,i.return,p)}}function Nw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pa(i.type)||i.tag===4}function nv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rv(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Bn));else if(c!==4&&(c===27&&pa(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(rv(i,a,l),i=i.sibling;i!==null;)rv(i,a,l),i=i.sibling}function $f(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&(c===27&&pa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for($f(i,a,l),i=i.sibling;i!==null;)$f(i,a,l),i=i.sibling}function kw(i){var a=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Qn(a,c,l),a[kt]=i,a[Dt]=l}catch(y){It(i,i.return,y)}}var xs=!1,Dn=!1,iv=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function aD(i,a){if(i=i.containerInfo,Sv=hh,i=Hx(i),Xp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,R=-1,F=-1,X=0,ne=0,se=i,Z=null;t:for(;;){for(var ee;se!==l||p!==0&&se.nodeType!==3||(R=w+p),se!==y||c!==0&&se.nodeType!==3||(F=w+c),se.nodeType===3&&(w+=se.nodeValue.length),(ee=se.firstChild)!==null;)Z=se,se=ee;for(;;){if(se===i)break t;if(Z===l&&++X===p&&(R=w),Z===y&&++ne===c&&(F=w),(ee=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=ee}l=R===-1||F===-1?null:{start:R,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Av={focusedElem:i,selectionRange:l},hh=!1,Hn=a;Hn!==null;)if(a=Hn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Hn=i;else for(;Hn!==null;){switch(a=Hn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Te=_o(l.type,p);i=c.getSnapshotBeforeUpdate(Te,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(Me){It(l,l.return,Me)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Iv(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Iv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Hn=i;break}Hn=a.return}}function Ow(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ws(i,l),c&4&&ac(5,l);break;case 1:if(ws(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(w){It(l,l.return,w)}else{var p=_o(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(w){It(l,l.return,w)}}c&64&&Cw(l),c&512&&oc(l,l.return);break;case 3:if(ws(i,l),c&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{v_(i,a)}catch(w){It(l,l.return,w)}}break;case 27:a===null&&c&4&&kw(l);case 26:case 5:ws(i,l),a===null&&c&4&&Iw(l),c&512&&oc(l,l.return);break;case 12:ws(i,l);break;case 31:ws(i,l),c&4&&Pw(i,l);break;case 13:ws(i,l),c&4&&Vw(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=pD.bind(null,l),MD(i,l))));break;case 22:if(c=l.memoizedState!==null||xs,!c){a=a!==null&&a.memoizedState!==null||Dn,p=xs;var y=Dn;xs=c,(Dn=a)&&!y?Es(i,l,(l.subtreeFlags&8772)!==0):ws(i,l),xs=p,Dn=y}break;case 30:break;default:ws(i,l)}}function jw(i){var a=i.alternate;a!==null&&(i.alternate=null,jw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Nr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var tn=null,jr=!1;function _s(i,a,l){for(l=l.child;l!==null;)Mw(i,a,l),l=l.sibling}function Mw(i,a,l){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(rr,l)}catch{}switch(l.tag){case 26:Dn||$i(l,a),_s(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dn||$i(l,a);var c=tn,p=jr;pa(l.type)&&(tn=l.stateNode,jr=!1),_s(i,a,l),gc(l.stateNode),tn=c,jr=p;break;case 5:Dn||$i(l,a);case 6:if(c=tn,p=jr,tn=null,_s(i,a,l),tn=c,jr=p,tn!==null)if(jr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(l.stateNode)}catch(y){It(l,a,y)}else try{tn.removeChild(l.stateNode)}catch(y){It(l,a,y)}break;case 18:tn!==null&&(jr?(i=tn,CE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Vl(i)):CE(tn,l.stateNode));break;case 4:c=tn,p=jr,tn=l.stateNode.containerInfo,jr=!0,_s(i,a,l),tn=c,jr=p;break;case 0:case 11:case 14:case 15:la(2,l,a),Dn||la(4,l,a),_s(i,a,l);break;case 1:Dn||($i(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Rw(l,a,c)),_s(i,a,l);break;case 21:_s(i,a,l);break;case 22:Dn=(c=Dn)||l.memoizedState!==null,_s(i,a,l),Dn=c;break;default:_s(i,a,l)}}function Pw(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vl(i)}catch(l){It(a,a.return,l)}}}function Vw(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vl(i)}catch(l){It(a,a.return,l)}}function oD(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Dw),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Dw),a;default:throw Error(r(435,i.tag))}}function Kf(i,a){var l=oD(i);a.forEach(function(c){if(!l.has(c)){l.add(c);var p=gD.bind(null,i,c);c.then(p,p)}})}function Mr(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=i,w=a,R=w;e:for(;R!==null;){switch(R.tag){case 27:if(pa(R.type)){tn=R.stateNode,jr=!1;break e}break;case 5:tn=R.stateNode,jr=!1;break e;case 3:case 4:tn=R.stateNode.containerInfo,jr=!0;break e}R=R.return}if(tn===null)throw Error(r(160));Mw(y,w,p),tn=null,jr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Lw(a,i),a=a.sibling}var Ii=null;function Lw(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mr(a,i),Pr(i),c&4&&(la(3,i,i.return),ac(3,i),la(5,i,i.return));break;case 1:Mr(a,i),Pr(i),c&512&&(Dn||l===null||$i(l,l.return)),c&64&&xs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Ii;if(Mr(a,i),Pr(i),c&512&&(Dn||l===null||$i(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ir]||y[kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),Qn(y,c,l),y[kt]=i,Ot(y),c=y;break e;case"link":var w=LE("link","href",p).get(c+(l.href||""));if(w){for(var R=0;R<w.length;R++)if(y=w[R],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(R,1);break t}}y=p.createElement(c),Qn(y,c,l),p.head.appendChild(y);break;case"meta":if(w=LE("meta","content",p).get(c+(l.content||""))){for(R=0;R<w.length;R++)if(y=w[R],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(R,1);break t}}y=p.createElement(c),Qn(y,c,l),p.head.appendChild(y);break;default:throw Error(r(468,c))}y[kt]=i,Ot(y),c=y}i.stateNode=c}else UE(p,i.type,i.stateNode);else i.stateNode=VE(p,c,i.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?UE(p,i.type,i.stateNode):VE(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&tv(i,i.memoizedProps,l.memoizedProps)}break;case 27:Mr(a,i),Pr(i),c&512&&(Dn||l===null||$i(l,l.return)),l!==null&&c&4&&tv(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Mr(a,i),Pr(i),c&512&&(Dn||l===null||$i(l,l.return)),i.flags&32){p=i.stateNode;try{oi(p,"")}catch(Te){It(i,i.return,Te)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,tv(i,p,l!==null?l.memoizedProps:p)),c&1024&&(iv=!0);break;case 6:if(Mr(a,i),Pr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Te){It(i,i.return,Te)}}break;case 3:if(uh=null,p=Ii,Ii=oh(a.containerInfo),Mr(a,i),Ii=p,Pr(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Vl(a.containerInfo)}catch(Te){It(i,i.return,Te)}iv&&(iv=!1,Uw(i));break;case 4:c=Ii,Ii=oh(i.stateNode.containerInfo),Mr(a,i),Pr(i),Ii=c;break;case 12:Mr(a,i),Pr(i);break;case 31:Mr(a,i),Pr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Kf(i,c)));break;case 13:Mr(a,i),Pr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wf=Ct()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Kf(i,c)));break;case 22:p=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,X=xs,ne=Dn;if(xs=X||p,Dn=ne||F,Mr(a,i),Dn=ne,xs=X,Pr(i),c&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||F||xs||Dn||wo(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(y=F.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=F.stateNode;var se=F.memoizedProps.style,Z=se!=null&&se.hasOwnProperty("display")?se.display:null;R.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Te){It(F,F.return,Te)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(Te){It(F,F.return,Te)}}}else if(a.tag===18){if(l===null){F=a;try{var ee=F.stateNode;p?RE(ee,!0):RE(F.stateNode,!1)}catch(Te){It(F,F.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Kf(i,l))));break;case 19:Mr(a,i),Pr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Kf(i,c)));break;case 30:break;case 21:break;default:Mr(a,i),Pr(i)}}function Pr(i){var a=i.flags;if(a&2){try{for(var l,c=i.return;c!==null;){if(Nw(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,y=nv(i);$f(i,y,p);break;case 5:var w=l.stateNode;l.flags&32&&(oi(w,""),l.flags&=-33);var R=nv(i);$f(i,R,w);break;case 3:case 4:var F=l.stateNode.containerInfo,X=nv(i);rv(i,X,F);break;default:throw Error(r(161))}}catch(ne){It(i,i.return,ne)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Uw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Uw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ws(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ow(i,a.alternate,a),a=a.sibling}function wo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:la(4,a,a.return),wo(a);break;case 1:$i(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Rw(a,a.return,l),wo(a);break;case 27:gc(a.stateNode);case 26:case 5:$i(a,a.return),wo(a);break;case 22:a.memoizedState===null&&wo(a);break;case 30:wo(a);break;default:wo(a)}i=i.sibling}}function Es(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,y=a,w=y.flags;switch(y.tag){case 0:case 11:case 15:Es(p,y,l),ac(4,y);break;case 1:if(Es(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){It(c,c.return,X)}if(c=y,p=c.updateQueue,p!==null){var R=c.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)g_(F[p],R)}catch(X){It(c,c.return,X)}}l&&w&64&&Cw(y),oc(y,y.return);break;case 27:kw(y);case 26:case 5:Es(p,y,l),l&&c===null&&w&4&&Iw(y),oc(y,y.return);break;case 12:Es(p,y,l);break;case 31:Es(p,y,l),l&&w&4&&Pw(p,y);break;case 13:Es(p,y,l),l&&w&4&&Vw(p,y);break;case 22:y.memoizedState===null&&Es(p,y,l),oc(y,y.return);break;case 30:break;default:Es(p,y,l)}a=a.sibling}}function sv(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Ku(l))}function av(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ku(i))}function Ni(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)zw(i,a,l,c),a=a.sibling}function zw(i,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Ni(i,a,l,c),p&2048&&ac(9,a);break;case 1:Ni(i,a,l,c);break;case 3:Ni(i,a,l,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ku(i)));break;case 12:if(p&2048){Ni(i,a,l,c),i=a.stateNode;try{var y=a.memoizedProps,w=y.id,R=y.onPostCommit;typeof R=="function"&&R(w,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){It(a,a.return,F)}}else Ni(i,a,l,c);break;case 31:Ni(i,a,l,c);break;case 13:Ni(i,a,l,c);break;case 23:break;case 22:y=a.stateNode,w=a.alternate,a.memoizedState!==null?y._visibility&2?Ni(i,a,l,c):lc(i,a):y._visibility&2?Ni(i,a,l,c):(y._visibility|=2,Al(i,a,l,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&sv(w,a);break;case 24:Ni(i,a,l,c),p&2048&&av(a.alternate,a);break;default:Ni(i,a,l,c)}}function Al(i,a,l,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,w=a,R=l,F=c,X=w.flags;switch(w.tag){case 0:case 11:case 15:Al(y,w,R,F,p),ac(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?Al(y,w,R,F,p):lc(y,w):(ne._visibility|=2,Al(y,w,R,F,p)),p&&X&2048&&sv(w.alternate,w);break;case 24:Al(y,w,R,F,p),p&&X&2048&&av(w.alternate,w);break;default:Al(y,w,R,F,p)}a=a.sibling}}function lc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,p=c.flags;switch(c.tag){case 22:lc(l,c),p&2048&&sv(c.alternate,c);break;case 24:lc(l,c),p&2048&&av(c.alternate,c);break;default:lc(l,c)}a=a.sibling}}var uc=8192;function Cl(i,a,l){if(i.subtreeFlags&uc)for(i=i.child;i!==null;)Bw(i,a,l),i=i.sibling}function Bw(i,a,l){switch(i.tag){case 26:Cl(i,a,l),i.flags&uc&&i.memoizedState!==null&&KD(l,Ii,i.memoizedState,i.memoizedProps);break;case 5:Cl(i,a,l);break;case 3:case 4:var c=Ii;Ii=oh(i.stateNode.containerInfo),Cl(i,a,l),Ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=uc,uc=16777216,Cl(i,a,l),uc=c):Cl(i,a,l));break;default:Cl(i,a,l)}}function Fw(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function cc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Hn=c,Hw(c,i)}Fw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qw(i),i=i.sibling}function qw(i){switch(i.tag){case 0:case 11:case 15:cc(i),i.flags&2048&&la(9,i,i.return);break;case 3:cc(i);break;case 12:cc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Yf(i)):cc(i);break;default:cc(i)}}function Yf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Hn=c,Hw(c,i)}Fw(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:la(8,a,a.return),Yf(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Yf(a));break;default:Yf(a)}i=i.sibling}}function Hw(i,a){for(;Hn!==null;){var l=Hn;switch(l.tag){case 0:case 11:case 15:la(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ku(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Hn=c;else e:for(l=i;Hn!==null;){c=Hn;var p=c.sibling,y=c.return;if(jw(c),c===l){Hn=null;break e}if(p!==null){p.return=y,Hn=p;break e}Hn=y}}}var lD={getCacheForType:function(i){var a=Yn(In),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Yn(In).controller.signal}},uD=typeof WeakMap=="function"?WeakMap:Map,wt=0,zt=null,it=null,lt=0,Rt=0,Qr=null,ua=!1,Rl=!1,ov=!1,Ts=0,fn=0,ca=0,Eo=0,lv=0,Xr=0,Il=0,dc=null,Vr=null,uv=!1,Wf=0,Gw=0,Qf=1/0,Xf=null,da=null,Vn=0,fa=null,Nl=null,Ss=0,cv=0,dv=null,$w=null,fc=0,fv=null;function Jr(){return(wt&2)!==0&&lt!==0?lt&-lt:W.T!==null?yv():un()}function Kw(){if(Xr===0)if((lt&536870912)===0||ft){var i=Ze;Ze<<=1,(Ze&3932160)===0&&(Ze=262144),Xr=i}else Xr=536870912;return i=Yr.current,i!==null&&(i.flags|=32),Xr}function Lr(i,a,l){(i===zt&&(Rt===2||Rt===9)||i.cancelPendingCommit!==null)&&(kl(i,0),ha(i,lt,Xr,!1)),pt(i,l),((wt&2)===0||i!==zt)&&(i===zt&&((wt&2)===0&&(Eo|=l),fn===4&&ha(i,lt,Xr,!1)),Ki(i))}function Yw(i,a,l){if((wt&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Xe(i,a),p=c?fD(i,a):mv(i,a,!0),y=c;do{if(p===0){Rl&&!c&&ha(i,a,0,!1);break}else{if(l=i.current.alternate,y&&!cD(l)){p=mv(i,a,!1),y=!1;continue}if(p===2){if(y=a,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var R=i;p=dc;var F=R.current.memoizedState.isDehydrated;if(F&&(kl(R,w).flags|=256),w=mv(R,w,!1),w!==2){if(ov&&!F){R.errorRecoveryDisabledLanes|=y,Eo|=y,p=4;break e}y=Vr,Vr=p,y!==null&&(Vr===null?Vr=y:Vr.push.apply(Vr,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){kl(i,0),ha(i,a,0,!0);break}e:{switch(c=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ha(c,a,Xr,!ua);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Wf+300-Ct(),10<p)){if(ha(c,a,Xr,!ua),ke(c,0,!0)!==0)break e;Ss=a,c.timeoutHandle=SE(Ww.bind(null,c,l,Vr,Xf,uv,a,Xr,Eo,Il,ua,y,"Throttled",-0,0),p);break e}Ww(c,l,Vr,Xf,uv,a,Xr,Eo,Il,ua,y,null,-0,0)}}break}while(!0);Ki(i)}function Ww(i,a,l,c,p,y,w,R,F,X,ne,se,Z,ee){if(i.timeoutHandle=-1,se=a.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},Bw(a,y,se);var Te=(y&62914560)===y?Wf-Ct():(y&4194048)===y?Gw-Ct():0;if(Te=YD(se,Te),Te!==null){Ss=y,i.cancelPendingCommit=Te(rE.bind(null,i,a,y,l,c,p,w,R,F,ne,se,null,Z,ee)),ha(i,y,w,!X);return}}rE(i,a,y,l,c,p,w,R,F)}function cD(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!$r(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ha(i,a,l,c){a&=~lv,a&=~Eo,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var y=31-Ee(p),w=1<<y;c[y]=-1,p&=~w}l!==0&&He(i,l,a)}function Jf(){return(wt&6)===0?(hc(0),!1):!0}function hv(){if(it!==null){if(Rt===0)var i=it.return;else i=it,ms=mo=null,Ig(i),_l=null,Wu=0,i=it;for(;i!==null;)Aw(i.alternate,i),i=i.return;it=null}}function kl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,ND(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ss=0,hv(),zt=i,it=l=fs(i.current,null),lt=a,Rt=0,Qr=null,ua=!1,Rl=Xe(i,a),ov=!1,Il=Xr=lv=Eo=ca=fn=0,Vr=dc=null,uv=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-Ee(c),y=1<<p;a|=i[p],c&=~y}return Ts=a,bf(),l}function Qw(i,a){We=null,W.H=rc,a===xl||a===Cf?(a=f_(),Rt=3):a===vg?(a=f_(),Rt=4):Rt=a===Gg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qr=a,it===null&&(fn=1,Bf(i,ui(a,i.current)))}function Xw(){var i=Yr.current;return i===null?!0:(lt&4194048)===lt?hi===null:(lt&62914560)===lt||(lt&536870912)!==0?i===hi:!1}function Jw(){var i=W.H;return W.H=rc,i===null?rc:i}function Zw(){var i=W.A;return W.A=lD,i}function Zf(){fn=4,ua||(lt&4194048)!==lt&&Yr.current!==null||(Rl=!0),(ca&134217727)===0&&(Eo&134217727)===0||zt===null||ha(zt,lt,Xr,!1)}function mv(i,a,l){var c=wt;wt|=2;var p=Jw(),y=Zw();(zt!==i||lt!==a)&&(Xf=null,kl(i,a)),a=!1;var w=fn;e:do try{if(Rt!==0&&it!==null){var R=it,F=Qr;switch(Rt){case 8:hv(),w=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(a=!0);var X=Rt;if(Rt=0,Qr=null,Dl(i,R,F,X),l&&Rl){w=0;break e}break;default:X=Rt,Rt=0,Qr=null,Dl(i,R,F,X)}}dD(),w=fn;break}catch(ne){Qw(i,ne)}while(!0);return a&&i.shellSuspendCounter++,ms=mo=null,wt=c,W.H=p,W.A=y,it===null&&(zt=null,lt=0,bf()),w}function dD(){for(;it!==null;)eE(it)}function fD(i,a){var l=wt;wt|=2;var c=Jw(),p=Zw();zt!==i||lt!==a?(Xf=null,Qf=Ct()+500,kl(i,a)):Rl=Xe(i,a);e:do try{if(Rt!==0&&it!==null){a=it;var y=Qr;t:switch(Rt){case 1:Rt=0,Qr=null,Dl(i,a,y,1);break;case 2:case 9:if(c_(y)){Rt=0,Qr=null,tE(a);break}a=function(){Rt!==2&&Rt!==9||zt!==i||(Rt=7),Ki(i)},y.then(a,a);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:c_(y)?(Rt=0,Qr=null,tE(a)):(Rt=0,Qr=null,Dl(i,a,y,7));break;case 5:var w=null;switch(it.tag){case 26:w=it.memoizedState;case 5:case 27:var R=it;if(w?zE(w):R.stateNode.complete){Rt=0,Qr=null;var F=R.sibling;if(F!==null)it=F;else{var X=R.return;X!==null?(it=X,eh(X)):it=null}break t}}Rt=0,Qr=null,Dl(i,a,y,5);break;case 6:Rt=0,Qr=null,Dl(i,a,y,6);break;case 8:hv(),fn=6;break e;default:throw Error(r(462))}}hD();break}catch(ne){Qw(i,ne)}while(!0);return ms=mo=null,W.H=c,W.A=p,wt=l,it!==null?0:(zt=null,lt=0,bf(),fn)}function hD(){for(;it!==null&&!Ei();)eE(it)}function eE(i){var a=Tw(i.alternate,i,Ts);i.memoizedProps=i.pendingProps,a===null?eh(i):it=a}function tE(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=yw(l,a,a.pendingProps,a.type,void 0,lt);break;case 11:a=yw(l,a,a.pendingProps,a.type.render,a.ref,lt);break;case 5:Ig(a);default:Aw(l,a),a=it=Zx(a,Ts),a=Tw(l,a,Ts)}i.memoizedProps=i.pendingProps,a===null?eh(i):it=a}function Dl(i,a,l,c){ms=mo=null,Ig(a),_l=null,Wu=0;var p=a.return;try{if(tD(i,p,a,l,lt)){fn=1,Bf(i,ui(l,i.current)),it=null;return}}catch(y){if(p!==null)throw it=p,y;fn=1,Bf(i,ui(l,i.current)),it=null;return}a.flags&32768?(ft||c===1?i=!0:Rl||(lt&536870912)!==0?i=!1:(ua=i=!0,(c===2||c===9||c===3||c===6)&&(c=Yr.current,c!==null&&c.tag===13&&(c.flags|=16384))),nE(a,i)):eh(a)}function eh(i){var a=i;do{if((a.flags&32768)!==0){nE(a,ua);return}i=a.return;var l=iD(a.alternate,a,Ts);if(l!==null){it=l;return}if(a=a.sibling,a!==null){it=a;return}it=a=i}while(a!==null);fn===0&&(fn=5)}function nE(i,a){do{var l=sD(i.alternate,i);if(l!==null){l.flags&=32767,it=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){it=i;return}it=i=l}while(i!==null);fn=6,it=null}function rE(i,a,l,c,p,y,w,R,F){i.cancelPendingCommit=null;do th();while(Vn!==0);if((wt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=ng,ot(i,l,y,w,R,F),i===zt&&(it=zt=null,lt=0),Nl=a,fa=i,Ss=l,cv=y,dv=p,$w=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,vD(an,function(){return lE(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,p=re.p,re.p=2,w=wt,wt|=4;try{aD(i,a,l)}finally{wt=w,re.p=p,W.T=c}}Vn=1,iE(),sE(),aE()}}function iE(){if(Vn===1){Vn=0;var i=fa,a=Nl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var c=re.p;re.p=2;var p=wt;wt|=4;try{Lw(a,i);var y=Av,w=Hx(i.containerInfo),R=y.focusedElem,F=y.selectionRange;if(w!==R&&R&&R.ownerDocument&&qx(R.ownerDocument.documentElement,R)){if(F!==null&&Xp(R)){var X=F.start,ne=F.end;if(ne===void 0&&(ne=X),"selectionStart"in R)R.selectionStart=X,R.selectionEnd=Math.min(ne,R.value.length);else{var se=R.ownerDocument||document,Z=se&&se.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),Te=R.textContent.length,Me=Math.min(F.start,Te),Pt=F.end===void 0?Me:Math.min(F.end,Te);!ee.extend&&Me>Pt&&(w=Pt,Pt=Me,Me=w);var K=Fx(R,Me),$=Fx(R,Pt);if(K&&$&&(ee.rangeCount!==1||ee.anchorNode!==K.node||ee.anchorOffset!==K.offset||ee.focusNode!==$.node||ee.focusOffset!==$.offset)){var Q=se.createRange();Q.setStart(K.node,K.offset),ee.removeAllRanges(),Me>Pt?(ee.addRange(Q),ee.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ee.addRange(Q))}}}}for(se=[],ee=R;ee=ee.parentNode;)ee.nodeType===1&&se.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<se.length;R++){var ie=se[R];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}hh=!!Sv,Av=Sv=null}finally{wt=p,re.p=c,W.T=l}}i.current=a,Vn=2}}function sE(){if(Vn===2){Vn=0;var i=fa,a=Nl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var c=re.p;re.p=2;var p=wt;wt|=4;try{Ow(i,a.alternate,a)}finally{wt=p,re.p=c,W.T=l}}Vn=3}}function aE(){if(Vn===4||Vn===3){Vn=0,qr();var i=fa,a=Nl,l=Ss,c=$w;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Vn=5:(Vn=0,Nl=fa=null,oE(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(da=null),en(l),a=a.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(rr,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=W.T,p=re.p,re.p=2,W.T=null;try{for(var y=i.onRecoverableError,w=0;w<c.length;w++){var R=c[w];y(R.value,{componentStack:R.stack})}}finally{W.T=a,re.p=p}}(Ss&3)!==0&&th(),Ki(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===fv?fc++:(fc=0,fv=i):fc=0,hc(0)}}function oE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ku(a)))}function th(){return iE(),sE(),aE(),lE()}function lE(){if(Vn!==5)return!1;var i=fa,a=cv;cv=0;var l=en(Ss),c=W.T,p=re.p;try{re.p=32>l?32:l,W.T=null,l=dv,dv=null;var y=fa,w=Ss;if(Vn=0,Nl=fa=null,Ss=0,(wt&6)!==0)throw Error(r(331));var R=wt;if(wt|=4,qw(y.current),zw(y,y.current,w,l),wt=R,hc(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(rr,y)}catch{}return!0}finally{re.p=p,W.T=c,oE(i,a)}}function uE(i,a,l){a=ui(l,a),a=Hg(i.stateNode,a,2),i=sa(i,a,2),i!==null&&(pt(i,2),Ki(i))}function It(i,a,l){if(i.tag===3)uE(i,i,l);else for(;a!==null;){if(a.tag===3){uE(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(da===null||!da.has(c))){i=ui(l,i),l=cw(2),c=sa(a,l,2),c!==null&&(dw(l,c,a,i),pt(c,2),Ki(c));break}}a=a.return}}function pv(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new uD;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(ov=!0,p.add(l),i=mD.bind(null,i,a,l),a.then(i,i))}function mD(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,zt===i&&(lt&l)===l&&(fn===4||fn===3&&(lt&62914560)===lt&&300>Ct()-Wf?(wt&2)===0&&kl(i,0):lv|=l,Il===lt&&(Il=0)),Ki(i)}function cE(i,a){a===0&&(a=bn()),i=co(i,a),i!==null&&(pt(i,a),Ki(i))}function pD(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),cE(i,l)}function gD(i,a){var l=0;switch(i.tag){case 31:case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),cE(i,l)}function vD(i,a){return zn(i,a)}var nh=null,Ol=null,gv=!1,rh=!1,vv=!1,ma=0;function Ki(i){i!==Ol&&i.next===null&&(Ol===null?nh=Ol=i:Ol=Ol.next=i),rh=!0,gv||(gv=!0,bD())}function hc(i,a){if(!vv&&rh){vv=!0;do for(var l=!1,c=nh;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var w=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-Ee(42|i)+1)-1,y&=p&~(w&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,mE(c,y))}else y=lt,y=ke(c,c===zt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Xe(c,y)||(l=!0,mE(c,y));c=c.next}while(l);vv=!1}}function yD(){dE()}function dE(){rh=gv=!1;var i=0;ma!==0&&ID()&&(i=ma);for(var a=Ct(),l=null,c=nh;c!==null;){var p=c.next,y=fE(c,a);y===0?(c.next=null,l===null?nh=p:l.next=p,p===null&&(Ol=l)):(l=c,(i!==0||(y&3)!==0)&&(rh=!0)),c=p}Vn!==0&&Vn!==5||hc(i),ma!==0&&(ma=0)}function fE(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-Ee(y),R=1<<w,F=p[w];F===-1?((R&l)===0||(R&c)!==0)&&(p[w]=qt(R,a)):F<=a&&(i.expiredLanes|=R),y&=~R}if(a=zt,l=lt,l=ke(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===a&&(Rt===2||Rt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ar(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Xe(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Ar(c),en(l)){case 2:case 8:l=Nt;break;case 32:l=an;break;case 268435456:l=Ti;break;default:l=an}return c=hE.bind(null,i),l=zn(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Ar(c),i.callbackPriority=2,i.callbackNode=null,2}function hE(i,a){if(Vn!==0&&Vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(th()&&i.callbackNode!==l)return null;var c=lt;return c=ke(i,i===zt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Yw(i,c,a),fE(i,Ct()),i.callbackNode!=null&&i.callbackNode===l?hE.bind(null,i):null)}function mE(i,a){if(th())return null;Yw(i,a,!0)}function bD(){kD(function(){(wt&6)!==0?zn(qe,yD):dE()})}function yv(){if(ma===0){var i=yl;i===0&&(i=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),ma=i}return ma}function pE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bi(""+i)}function gE(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function xD(i,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var y=pE((p[Dt]||null).action),w=c.submitter;w&&(a=(a=w[Dt]||null)?pE(a.formAction):w.getAttribute("formAction"),a!==null&&(y=a,w=null));var R=new ro("action","action",null,c,p);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ma!==0){var F=w?gE(p,w):new FormData(p);Lg(l,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(R.preventDefault(),F=w?gE(p,w):new FormData(p),Lg(l,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var bv=0;bv<tg.length;bv++){var xv=tg[bv],_D=xv.toLowerCase(),wD=xv[0].toUpperCase()+xv.slice(1);Ri(_D,"on"+wD)}Ri(Kx,"onAnimationEnd"),Ri(Yx,"onAnimationIteration"),Ri(Wx,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Lk,"onTransitionRun"),Ri(Uk,"onTransitionStart"),Ri(zk,"onTransitionCancel"),Ri(Qx,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),je("onBeforeInput",["compositionend","keypress","textInput","paste"]),je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ED=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function vE(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var w=c.length-1;0<=w;w--){var R=c[w],F=R.instance,X=R.currentTarget;if(R=R.listener,F!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(ne){yf(ne)}p.currentTarget=null,y=F}else for(w=0;w<c.length;w++){if(R=c[w],F=R.instance,X=R.currentTarget,R=R.listener,F!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(ne){yf(ne)}p.currentTarget=null,y=F}}}}function st(i,a){var l=a[Cr];l===void 0&&(l=a[Cr]=new Set);var c=i+"__bubble";l.has(c)||(yE(a,i,2,!1),l.add(c))}function _v(i,a,l){var c=0;a&&(c|=4),yE(l,i,c,a)}var ih="_reactListening"+Math.random().toString(36).slice(2);function wv(i){if(!i[ih]){i[ih]=!0,de.forEach(function(l){l!=="selectionchange"&&(ED.has(l)||_v(l,!1,i),_v(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ih]||(a[ih]=!0,_v("selectionchange",!1,a))}}function yE(i,a,l,c){switch(KE(a)){case 2:var p=XD;break;case 8:p=JD;break;default:p=Vv}l=p.bind(null,a,l,i),p=void 0,!Pu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Ev(i,a,l,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===p)break;if(w===4)for(w=c.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;R!==null;){if(w=Pn(R),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){c=y=w;continue e}R=R.parentNode}}c=c.return}tf(function(){var X=y,ne=sl(l),se=[];e:{var Z=Xx.get(i);if(Z!==void 0){var ee=ro,Te=i;switch(i){case"keypress":if(no(l)===0)break e;case"keydown":case"keyup":ee=df;break;case"focusin":Te="focus",ee=Ws;break;case"focusout":Te="blur",ee=Ws;break;case"beforeblur":case"afterblur":ee=Ws;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=hf;break;case Kx:case Yx:case Wx:ee=ll;break;case Qx:ee=ul;break;case"scroll":case"scrollend":ee=nf;break;case"wheel":ee=pf;break;case"copy":case"cut":case"paste":ee=of;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Bu;break;case"toggle":case"beforetoggle":ee=Xs}var Me=(a&4)!==0,Pt=!Me&&(i==="scroll"||i==="scrollend"),K=Me?Z!==null?Z+"Capture":null:Z;Me=[];for(var $=X,Q;$!==null;){var ie=$;if(Q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Q===null||K===null||(ie=Dr($,K),ie!=null&&Me.push(pc($,ie,Q))),Pt)break;$=$.return}0<Me.length&&(Z=new ee(Z,Te,null,l,ne),se.push({event:Z,listeners:Me}))}}if((a&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",Z&&l!==il&&(Te=l.relatedTarget||l.fromElement)&&(Pn(Te)||Te[vr]))break e;if((ee||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(Te=l.relatedTarget||l.toElement,ee=X,Te=Te?Pn(Te):null,Te!==null&&(Pt=o(Te),Me=Te.tag,Te!==Pt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(ee=null,Te=X),ee!==Te)){if(Me=rf,ie="onMouseLeave",K="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Bu,ie="onPointerLeave",K="onPointerEnter",$="pointer"),Pt=ee==null?Z:ii(ee),Q=Te==null?Z:ii(Te),Z=new Me(ie,$+"leave",ee,l,ne),Z.target=Pt,Z.relatedTarget=Q,ie=null,Pn(ne)===X&&(Me=new Me(K,$+"enter",Te,l,ne),Me.target=Q,Me.relatedTarget=Pt,ie=Me),Pt=ie,ee&&Te)t:{for(Me=TD,K=ee,$=Te,Q=0,ie=K;ie;ie=Me(ie))Q++;ie=0;for(var Ie=$;Ie;Ie=Me(Ie))ie++;for(;0<Q-ie;)K=Me(K),Q--;for(;0<ie-Q;)$=Me($),ie--;for(;Q--;){if(K===$||$!==null&&K===$.alternate){Me=K;break t}K=Me(K),$=Me($)}Me=null}else Me=null;ee!==null&&bE(se,Z,ee,Me,!1),Te!==null&&Pt!==null&&bE(se,Pt,Te,Me,!0)}}e:{if(Z=X?ii(X):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var yt=Px;else if(Or(Z))if(Vx)yt=Mk;else{yt=Ok;var Re=Dk}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&ju(X.elementType)&&(yt=Px):yt=jk;if(yt&&(yt=yt(i,X))){oo(se,yt,l,ne);break e}Re&&Re(i,Z,X),i==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&rl(Z,"number",Z.value)}switch(Re=X?ii(X):window,i){case"focusin":(Or(Re)||Re.contentEditable==="true")&&(cl=Re,Jp=X,Hu=null);break;case"focusout":Hu=Jp=cl=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,Gx(se,l,ne);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":Gx(se,l,ne)}var Je;if(_)e:{switch(i){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else et?Tt(i,l)&&(ut="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ut="onCompositionStart");ut&&(Y&&l.locale!=="ko"&&(et||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&et&&(Je=Gs()):(Gr=ne,al="value"in Gr?Gr.value:Gr.textContent,et=!0)),Re=sh(X,ut),0<Re.length&&(ut=new Lu(ut,i,null,l,ne),se.push({event:ut,listeners:Re}),Je?ut.data=Je:(Je=Rn(l),Je!==null&&(ut.data=Je)))),(Je=D?Fn(i,l):qn(i,l))&&(ut=sh(X,"onBeforeInput"),0<ut.length&&(Re=new Lu("onBeforeInput","beforeinput",null,l,ne),se.push({event:Re,listeners:ut}),Re.data=Je)),xD(se,i,X,l,ne)}vE(se,a)})}function pc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function sh(i,a){for(var l=a+"Capture",c=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Dr(i,l),p!=null&&c.unshift(pc(i,p,y)),p=Dr(i,a),p!=null&&c.push(pc(i,p,y))),i.tag===3)return c;i=i.return}return[]}function TD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function bE(i,a,l,c,p){for(var y=a._reactName,w=[];l!==null&&l!==c;){var R=l,F=R.alternate,X=R.stateNode;if(R=R.tag,F!==null&&F===c)break;R!==5&&R!==26&&R!==27||X===null||(F=X,p?(X=Dr(l,y),X!=null&&w.unshift(pc(l,X,F))):p||(X=Dr(l,y),X!=null&&w.push(pc(l,X,F)))),l=l.return}w.length!==0&&i.push({event:a,listeners:w})}var SD=/\r\n?/g,AD=/\u0000|\uFFFD/g;function xE(i){return(typeof i=="string"?i:""+i).replace(SD,`
`).replace(AD,"")}function _E(i,a){return a=xE(a),xE(i)===a}function Mt(i,a,l,c,p,y){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||oi(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&oi(i,""+c);break;case"className":Ai(i,"class",c);break;case"tabIndex":Ai(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(i,l,c);break;case"style":Zd(i,c,y);break;case"data":if(a!=="object"){Ai(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Bi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&Mt(i,a,"name",p.name,p,null),Mt(i,a,"formEncType",p.formEncType,p,null),Mt(i,a,"formMethod",p.formMethod,p,null),Mt(i,a,"formTarget",p.formTarget,p,null)):(Mt(i,a,"encType",p.encType,p,null),Mt(i,a,"method",p.method,p,null),Mt(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Bi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Bn);break;case"onScroll":c!=null&&st("scroll",i);break;case"onScrollEnd":c!=null&&st("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Bi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":st("beforetoggle",i),st("toggle",i),si(i,"popover",c);break;case"xlinkActuate":ai(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ai(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ai(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ai(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ai(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ai(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ai(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ai(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ai(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":si(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$p.get(l)||l,si(i,l,c))}}function Tv(i,a,l,c,p,y){switch(l){case"style":Zd(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?oi(i,c):(typeof c=="number"||typeof c=="bigint")&&oi(i,""+c);break;case"onScroll":c!=null&&st("scroll",i);break;case"onScrollEnd":c!=null&&st("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ce.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=i[Dt]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,p);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):si(i,l,c)}}}function Qn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",i),st("load",i);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var w=l[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Mt(i,a,y,w,l,null)}}p&&Mt(i,a,"srcSet",l.srcSet,l,null),c&&Mt(i,a,"src",l.src,l,null);return;case"input":st("invalid",i);var R=y=w=p=null,F=null,X=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":p=ne;break;case"type":w=ne;break;case"checked":F=ne;break;case"defaultChecked":X=ne;break;case"value":y=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:Mt(i,a,c,ne,l,null)}}eo(i,y,R,F,X,w,p,!1);return;case"select":st("invalid",i),c=w=y=null;for(p in l)if(l.hasOwnProperty(p)&&(R=l[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:Mt(i,a,p,R,l,null)}a=y,l=w,i.multiple=!!c,a!=null?vt(i,!!c,a,!1):l!=null&&vt(i,!!c,l,!0);return;case"textarea":st("invalid",i),y=p=c=null;for(w in l)if(l.hasOwnProperty(w)&&(R=l[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Mt(i,a,w,R,l,null)}Hs(i,c,p,y);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Mt(i,a,F,c,l,null)}return;case"dialog":st("beforetoggle",i),st("toggle",i),st("cancel",i),st("close",i);break;case"iframe":case"object":st("load",i);break;case"video":case"audio":for(c=0;c<mc.length;c++)st(mc[c],i);break;case"image":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"embed":case"source":case"link":st("error",i),st("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(c=l[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Mt(i,a,X,c,l,null)}return;default:if(ju(a)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&Tv(i,a,ne,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&Mt(i,a,R,c,l,null))}function CD(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,R=null,F=null,X=null,ne=null;for(ee in l){var se=l[ee];if(l.hasOwnProperty(ee)&&se!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=se;default:c.hasOwnProperty(ee)||Mt(i,a,ee,null,c,se)}}for(var Z in c){var ee=c[Z];if(se=l[Z],c.hasOwnProperty(Z)&&(ee!=null||se!=null))switch(Z){case"type":y=ee;break;case"name":p=ee;break;case"checked":X=ee;break;case"defaultChecked":ne=ee;break;case"value":w=ee;break;case"defaultValue":R=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:ee!==se&&Mt(i,a,Z,ee,c,se)}}qs(i,w,R,F,X,ne,y,p);return;case"select":ee=w=R=Z=null;for(y in l)if(F=l[y],l.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ee=F;default:c.hasOwnProperty(y)||Mt(i,a,y,null,c,F)}for(p in c)if(y=c[p],F=l[p],c.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":Z=y;break;case"defaultValue":R=y;break;case"multiple":w=y;default:y!==F&&Mt(i,a,p,y,c,F)}a=R,l=w,c=ee,Z!=null?vt(i,!!l,Z,!1):!!c!=!!l&&(a!=null?vt(i,!!l,a,!0):vt(i,!!l,l?[]:"",!1));return;case"textarea":ee=Z=null;for(R in l)if(p=l[R],l.hasOwnProperty(R)&&p!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Mt(i,a,R,null,c,p)}for(w in c)if(p=c[w],y=l[w],c.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":Z=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Mt(i,a,w,p,c,y)}to(i,Z,ee);return;case"option":for(var Te in l)if(Z=l[Te],l.hasOwnProperty(Te)&&Z!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:Mt(i,a,Te,null,c,Z)}for(F in c)if(Z=c[F],ee=l[F],c.hasOwnProperty(F)&&Z!==ee&&(Z!=null||ee!=null))switch(F){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Mt(i,a,F,Z,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)Z=l[Me],l.hasOwnProperty(Me)&&Z!=null&&!c.hasOwnProperty(Me)&&Mt(i,a,Me,null,c,Z);for(X in c)if(Z=c[X],ee=l[X],c.hasOwnProperty(X)&&Z!==ee&&(Z!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Mt(i,a,X,Z,c,ee)}return;default:if(ju(a)){for(var Pt in l)Z=l[Pt],l.hasOwnProperty(Pt)&&Z!==void 0&&!c.hasOwnProperty(Pt)&&Tv(i,a,Pt,void 0,c,Z);for(ne in c)Z=c[ne],ee=l[ne],!c.hasOwnProperty(ne)||Z===ee||Z===void 0&&ee===void 0||Tv(i,a,ne,Z,c,ee);return}}for(var K in l)Z=l[K],l.hasOwnProperty(K)&&Z!=null&&!c.hasOwnProperty(K)&&Mt(i,a,K,null,c,Z);for(se in c)Z=c[se],ee=l[se],!c.hasOwnProperty(se)||Z===ee||Z==null&&ee==null||Mt(i,a,se,Z,c,ee)}function wE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var p=l[c],y=p.transferSize,w=p.initiatorType,R=p.duration;if(y&&R&&wE(w)){for(w=0,R=p.responseEnd,c+=1;c<l.length;c++){var F=l[c],X=F.startTime;if(X>R)break;var ne=F.transferSize,se=F.initiatorType;ne&&wE(se)&&(F=F.responseEnd,w+=ne*(F<R?1:(R-X)/(F-X)))}if(--c,a+=8*(y+w)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sv=null,Av=null;function ah(i){return i.nodeType===9?i:i.ownerDocument}function EE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Cv(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rv=null;function ID(){var i=window.event;return i&&i.type==="popstate"?i===Rv?!1:(Rv=i,!0):(Rv=null,!1)}var SE=typeof setTimeout=="function"?setTimeout:void 0,ND=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,kD=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(i){return AE.resolve(null).then(i).catch(DD)}:SE;function DD(i){setTimeout(function(){throw i})}function pa(i){return i==="head"}function CE(i,a){var l=a,c=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(c===0){i.removeChild(p),Vl(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")gc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,gc(l);for(var y=l.firstChild;y;){var w=y.nextSibling,R=y.nodeName;y[Ir]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=w}}else l==="body"&&gc(i.ownerDocument.body);l=p}while(l);Vl(a)}function RE(i,a){var l=i;i=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=c}while(l)}function Iv(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Iv(l),Nr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function OD(i,a,l,c){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ir])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=mi(i.nextSibling),i===null)break}return null}function jD(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=mi(i.nextSibling),i===null))return null;return i}function IE(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=mi(i.nextSibling),i===null))return null;return i}function Nv(i){return i.data==="$?"||i.data==="$~"}function kv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MD(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function mi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Dv=null;function NE(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return mi(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function kE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function DE(i,a,l){switch(a=ah(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Nr(i)}var pi=new Map,OE=new Set;function oh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var As=re.d;re.d={f:PD,r:VD,D:LD,C:UD,L:zD,m:BD,X:qD,S:FD,M:HD};function PD(){var i=As.f(),a=Jf();return i||a}function VD(i){var a=kr(i);a!==null&&a.tag===5&&a.type==="form"?Q_(a):As.r(i)}var jl=typeof document>"u"?null:document;function jE(i,a,l){var c=jl;if(c&&typeof a=="string"&&a){var p=cn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),OE.has(p)||(OE.add(p),i={rel:i,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),Qn(a,"link",i),Ot(a),c.head.appendChild(a)))}}function LD(i){As.D(i),jE("dns-prefetch",i,null)}function UD(i,a){As.C(i,a),jE("preconnect",i,a)}function zD(i,a,l){As.L(i,a,l);var c=jl;if(c&&i&&a){var p='link[rel="preload"][as="'+cn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+cn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+cn(l.imageSizes)+'"]')):p+='[href="'+cn(i)+'"]';var y=p;switch(a){case"style":y=Ml(i);break;case"script":y=Pl(i)}pi.has(y)||(i=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),pi.set(y,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(vc(y))||a==="script"&&c.querySelector(yc(y))||(a=c.createElement("link"),Qn(a,"link",i),Ot(a),c.head.appendChild(a)))}}function BD(i,a){As.m(i,a);var l=jl;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(i)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Pl(i)}if(!pi.has(y)&&(i=b({rel:"modulepreload",href:i},a),pi.set(y,i),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(yc(y)))return}c=l.createElement("link"),Qn(c,"link",i),Ot(c),l.head.appendChild(c)}}}function FD(i,a,l){As.S(i,a,l);var c=jl;if(c&&i){var p=Cn(c).hoistableStyles,y=Ml(i);a=a||"default";var w=p.get(y);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(vc(y)))R.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":a},l),(l=pi.get(y))&&Ov(i,l);var F=w=c.createElement("link");Ot(F),Qn(F,"link",i),F._p=new Promise(function(X,ne){F.onload=X,F.onerror=ne}),F.addEventListener("load",function(){R.loading|=1}),F.addEventListener("error",function(){R.loading|=2}),R.loading|=4,lh(w,a,c)}w={type:"stylesheet",instance:w,count:1,state:R},p.set(y,w)}}}function qD(i,a){As.X(i,a);var l=jl;if(l&&i){var c=Cn(l).hoistableScripts,p=Pl(i),y=c.get(p);y||(y=l.querySelector(yc(p)),y||(i=b({src:i,async:!0},a),(a=pi.get(p))&&jv(i,a),y=l.createElement("script"),Ot(y),Qn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function HD(i,a){As.M(i,a);var l=jl;if(l&&i){var c=Cn(l).hoistableScripts,p=Pl(i),y=c.get(p);y||(y=l.querySelector(yc(p)),y||(i=b({src:i,async:!0,type:"module"},a),(a=pi.get(p))&&jv(i,a),y=l.createElement("script"),Ot(y),Qn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function ME(i,a,l,c){var p=(p=ze.current)?oh(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ml(l.href),l=Cn(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ml(l.href);var y=Cn(p).hoistableStyles,w=y.get(i);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=p.querySelector(vc(i)))&&!y._p&&(w.instance=y,w.state.loading=5),pi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pi.set(i,l),y||GD(p,i,l,w.state))),a&&c===null)throw Error(r(528,""));return w}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pl(l),l=Cn(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ml(i){return'href="'+cn(i)+'"'}function vc(i){return'link[rel="stylesheet"]['+i+"]"}function PE(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function GD(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Qn(a,"link",l),Ot(a),i.head.appendChild(a))}function Pl(i){return'[src="'+cn(i)+'"]'}function yc(i){return"script[async]"+i}function VE(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+cn(l.href)+'"]');if(c)return a.instance=c,Ot(c),c;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ot(c),Qn(c,"style",p),lh(c,l.precedence,i),a.instance=c;case"stylesheet":p=Ml(l.href);var y=i.querySelector(vc(p));if(y)return a.state.loading|=4,a.instance=y,Ot(y),y;c=PE(l),(p=pi.get(p))&&Ov(c,p),y=(i.ownerDocument||i).createElement("link"),Ot(y);var w=y;return w._p=new Promise(function(R,F){w.onload=R,w.onerror=F}),Qn(y,"link",c),a.state.loading|=4,lh(y,l.precedence,i),a.instance=y;case"script":return y=Pl(l.src),(p=i.querySelector(yc(y)))?(a.instance=p,Ot(p),p):(c=l,(p=pi.get(y))&&(c=b({},l),jv(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ot(p),Qn(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,lh(c,l.precedence,i));return a.instance}function lh(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===a)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Ov(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function jv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var uh=null;function LE(i,a,l){if(uh===null){var c=new Map,p=uh=new Map;p.set(l,c)}else p=uh,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var y=l[p];if(!(y[Ir]||y[kt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(a)||"";w=i+w;var R=c.get(w);R?R.push(y):c.set(w,[y])}}return c}function UE(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function $D(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KD(i,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ml(c.href),y=a.querySelector(vc(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=ch.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=y,Ot(y);return}y=a.ownerDocument||a,c=PE(c),(p=pi.get(p))&&Ov(c,p),y=y.createElement("link"),Ot(y);var w=y;w._p=new Promise(function(R,F){w.onload=R,w.onerror=F}),Qn(y,"link",c),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=ch.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var Mv=0;function YD(i,a){return i.stylesheets&&i.count===0&&fh(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var c=setTimeout(function(){if(i.stylesheets&&fh(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Mv===0&&(Mv=62500*RD());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&fh(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Mv?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var dh=null;function fh(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,dh=new Map,a.forEach(WD,i),dh=null,ch.call(i))}function WD(i,a){if(!(a.state.loading&4)){var l=dh.get(i);if(l)var c=l.get(null);else{l=new Map,dh.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}p=a.instance,w=p.getAttribute("data-precedence"),y=l.get(w)||c,y===c&&l.set(null,p),l.set(w,p),this.count++,c=ch.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var bc={$$typeof:z,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function QD(i,a,l,c,p,y,w,R,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function BE(i,a,l,c,p,y,w,R,F,X,ne,se){return i=new QD(i,a,l,w,F,X,ne,se,R),a=1,y===!0&&(a|=24),y=Kr(3,null,null,a),i.current=y,y.stateNode=i,a=mg(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:a},yg(y),i}function FE(i){return i?(i=hl,i):hl}function qE(i,a,l,c,p,y){p=FE(p),c.context===null?c.context=p:c.pendingContext=p,c=ia(a),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=sa(i,c,a),l!==null&&(Lr(l,i,a),Xu(l,i,a))}function HE(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Pv(i,a){HE(i,a),(i=i.alternate)&&HE(i,a)}function GE(i){if(i.tag===13||i.tag===31){var a=co(i,67108864);a!==null&&Lr(a,i,67108864),Pv(i,67108864)}}function $E(i){if(i.tag===13||i.tag===31){var a=Jr();a=gr(a);var l=co(i,a);l!==null&&Lr(l,i,a),Pv(i,a)}}var hh=!0;function XD(i,a,l,c){var p=W.T;W.T=null;var y=re.p;try{re.p=2,Vv(i,a,l,c)}finally{re.p=y,W.T=p}}function JD(i,a,l,c){var p=W.T;W.T=null;var y=re.p;try{re.p=8,Vv(i,a,l,c)}finally{re.p=y,W.T=p}}function Vv(i,a,l,c){if(hh){var p=Lv(c);if(p===null)Ev(i,a,c,mh,l),YE(i,c);else if(eO(p,i,a,l,c))c.stopPropagation();else if(YE(i,c),a&4&&-1<ZD.indexOf(i)){for(;p!==null;){var y=kr(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=rt(y.pendingLanes);if(w!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var F=1<<31-Ee(w);R.entanglements[1]|=F,w&=~F}Ki(y),(wt&6)===0&&(Qf=Ct()+500,hc(0))}}break;case 31:case 13:R=co(y,2),R!==null&&Lr(R,y,2),Jf(),Pv(y,2)}if(y=Lv(c),y===null&&Ev(i,a,c,mh,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else Ev(i,a,c,null,l)}}function Lv(i){return i=sl(i),Uv(i)}var mh=null;function Uv(i){if(mh=null,i=Pn(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=d(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return mh=i,null}function KE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case qe:return 2;case Nt:return 8;case an:case on:return 32;case Ti:return 268435456;default:return 32}default:return 32}}var zv=!1,ga=null,va=null,ya=null,xc=new Map,_c=new Map,ba=[],ZD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YE(i,a){switch(i){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":xc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(a.pointerId)}}function wc(i,a,l,c,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=kr(a),a!==null&&GE(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function eO(i,a,l,c,p){switch(a){case"focusin":return ga=wc(ga,i,a,l,c,p),!0;case"dragenter":return va=wc(va,i,a,l,c,p),!0;case"mouseover":return ya=wc(ya,i,a,l,c,p),!0;case"pointerover":var y=p.pointerId;return xc.set(y,wc(xc.get(y)||null,i,a,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,_c.set(y,wc(_c.get(y)||null,i,a,l,c,p)),!0}return!1}function WE(i){var a=Pn(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,Si(i.priority,function(){$E(l)});return}}else if(a===31){if(a=d(l),a!==null){i.blockedOn=a,Si(i.priority,function(){$E(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ph(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Lv(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);il=c,l.target.dispatchEvent(c),il=null}else return a=kr(l),a!==null&&GE(a),i.blockedOn=l,!1;a.shift()}return!0}function QE(i,a,l){ph(i)&&l.delete(a)}function tO(){zv=!1,ga!==null&&ph(ga)&&(ga=null),va!==null&&ph(va)&&(va=null),ya!==null&&ph(ya)&&(ya=null),xc.forEach(QE),_c.forEach(QE)}function gh(i,a){i.blockedOn===a&&(i.blockedOn=null,zv||(zv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tO)))}var vh=null;function XE(i){vh!==i&&(vh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vh===i&&(vh=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(Uv(c||l)===null)continue;break}var y=kr(l);y!==null&&(i.splice(a,3),a-=3,Lg(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Vl(i){function a(F){return gh(F,i)}ga!==null&&gh(ga,i),va!==null&&gh(va,i),ya!==null&&gh(ya,i),xc.forEach(a),_c.forEach(a);for(var l=0;l<ba.length;l++){var c=ba[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ba.length&&(l=ba[0],l.blockedOn===null);)WE(l),l.blockedOn===null&&ba.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],w=p[Dt]||null;if(typeof y=="function")w||XE(l);else if(w){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[Dt]||null)R=w.formAction;else if(Uv(p)!==null)continue}else R=w.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),XE(l)}}}function JE(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Bv(i){this._internalRoot=i}yh.prototype.render=Bv.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Jr();qE(l,c,i,a,null,null)},yh.prototype.unmount=Bv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;qE(i.current,2,null,i,null,null),Jf(),a[vr]=null}};function yh(i){this._internalRoot=i}yh.prototype.unstable_scheduleHydration=function(i){if(i){var a=un();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ba.length&&a!==0&&a<ba[l].priority;l++);ba.splice(l,0,i),l===0&&WE(i)}};var ZE=e.version;if(ZE!=="19.2.3")throw Error(r(527,ZE,"19.2.3"));re.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var nO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{rr=bh.inject(nO),An=bh}catch{}}return Tc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",p=aw,y=ow,w=lw;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=BE(i,1,!1,null,null,l,c,null,p,y,w,JE),i[vr]=a.current,wv(i),new Bv(a)},Tc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,p="",y=aw,w=ow,R=lw,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=BE(i,1,!0,a,l??null,c,p,F,y,w,R,JE),a.context=FE(null),l=a.current,c=Jr(),c=gr(c),p=ia(c),p.callback=null,sa(l,p,c),l=c,a.current.lanes=l,pt(a,l),Ki(a),i[vr]=a.current,wv(i),new yh(a)},Tc.version="19.2.3",Tc}var u1;function dO(){if(u1)return Hv.exports;u1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hv.exports=cO(),Hv.exports}var fO=dO();const hO=t2(fO),Sc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],mO=({onComplete:t})=>{const[e,n]=N.useState(0),r=()=>{e<Sc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},s=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Sc[e];return g.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[g.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:g.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Sc.length*100}%`}})}),g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),g.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),g.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Sc.map((u,d)=>g.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${d===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},d))}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),g.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Sc.length-1?"Suivant":"Commencer"})]})]})]})})},pO=()=>{};var c1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],d=t[n++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},i2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,d=u?t[s+1]:0,f=s+2<t.length,h=f?t[s+2]:0,v=o>>2,b=(o&3)<<4|d>>4;let x=(d&15)<<2|h>>6,E=h&63;f||(E=64,u||(x=64)),r.push(n[v],n[b],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const b=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||d==null||h==null||b==null)throw new vO;const x=o<<2|d>>4;if(r.push(x),h!==64){const E=d<<4&240|h>>2;if(r.push(E),b!==64){const A=h<<6&192|b;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yO=function(t){const e=r2(t);return i2.encodeByteArray(e,!0)},gm=function(t){return yO(t).replace(/\./g,"")},s2=function(t){try{return i2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=()=>bO().__FIREBASE_DEFAULTS__,_O=()=>{if(typeof process>"u"||typeof c1>"u")return;const t=c1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s2(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return pO()||xO()||_O()||wO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a2=t=>{var e,n;return(n=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},q0=t=>{const e=a2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o2=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config},l2=t=>{var e;return(e=sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ap(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gm(JSON.stringify(n)),gm(JSON.stringify(u)),""].join(".")}const $c={};function TO(){const t={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?t.emulator.push(e):t.prod.push(e);return t}function SO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let d1=!1;function op(t,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||$c[t]===e||$c[t]||d1)return;$c[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=TO().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,E){x.setAttribute("width","24"),x.setAttribute("id",E),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{d1=!0,u()},x}function v(x,E){x.setAttribute("id",E),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=SO(r),E=n("text"),A=document.getElementById(E)||document.createElement("span"),O=n("learnmore"),M=document.getElementById(O)||document.createElement("a"),U=n("preprendIcon"),j=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const z=x.element;d(z),v(M,O);const H=h();f(j,U),z.append(j,A,M,H),document.body.appendChild(z)}o?(A.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function CO(){var t;const e=(t=sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kO(){const t=pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DO(){return!CO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OO(){try{return typeof indexedDB=="object"}catch{return!1}}function jO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MO,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dd.prototype.create)}}class Dd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?PO(o,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new zi(s,d,r)}}function PO(t,e){return t.replace(VO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const VO=/\{\$([^}]+)}/g;function LO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(f1(o)&&f1(u)){if(!zo(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function f1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UO(t,e){const n=new zO(t,e);return n.subscribe.bind(n)}class zO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Yv),s.error===void 0&&(s.error=Yv),s.complete===void 0&&(s.complete=Yv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HO(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qO(t){return t===Ao?void 0:t}function HO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const $O={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},KO=ct.INFO,YO={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},WO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=WO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$O[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const QO=(t,e)=>e.some(n=>t instanceof n);let h1,m1;function XO(){return h1||(h1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JO(){return m1||(m1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c2=new WeakMap,ky=new WeakMap,d2=new WeakMap,Wv=new WeakMap,G0=new WeakMap;function ZO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Da(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&c2.set(n,t)}).catch(()=>{}),G0.set(e,t),e}function e4(t){if(ky.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});ky.set(t,e)}let Dy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ky.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Da(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t4(t){Dy=t(Dy)}function n4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qv(this),e,...n);return d2.set(r,e.sort?e.sort():[e]),Da(r)}:JO().includes(t)?function(...e){return t.apply(Qv(this),e),Da(c2.get(this))}:function(...e){return Da(t.apply(Qv(this),e))}}function r4(t){return typeof t=="function"?n4(t):(t instanceof IDBTransaction&&e4(t),QO(t,XO())?new Proxy(t,Dy):t)}function Da(t){if(t instanceof IDBRequest)return ZO(t);if(Wv.has(t))return Wv.get(t);const e=r4(t);return e!==t&&(Wv.set(t,e),G0.set(e,t)),e}const Qv=t=>G0.get(t);function i4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),d=Da(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Da(u.result),f.oldVersion,f.newVersion,Da(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const s4=["get","getKey","getAll","getAllKeys","count"],a4=["put","add","delete","clear"],Xv=new Map;function p1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xv.get(e))return Xv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=a4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||s4.includes(n)))return;const o=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),s&&f.done]))[0]};return Xv.set(e,o),o}t4(t=>({...t,get:(e,n,r)=>p1(e,n)||t.get(e,n,r),has:(e,n)=>!!p1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oy="@firebase/app",g1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new H0("@firebase/app"),u4="@firebase/app-compat",c4="@firebase/analytics-compat",d4="@firebase/analytics",f4="@firebase/app-check-compat",h4="@firebase/app-check",m4="@firebase/auth",p4="@firebase/auth-compat",g4="@firebase/database",v4="@firebase/data-connect",y4="@firebase/database-compat",b4="@firebase/functions",x4="@firebase/functions-compat",_4="@firebase/installations",w4="@firebase/installations-compat",E4="@firebase/messaging",T4="@firebase/messaging-compat",S4="@firebase/performance",A4="@firebase/performance-compat",C4="@firebase/remote-config",R4="@firebase/remote-config-compat",I4="@firebase/storage",N4="@firebase/storage-compat",k4="@firebase/firestore",D4="@firebase/ai",O4="@firebase/firestore-compat",j4="firebase",M4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",P4={[Oy]:"fire-core",[u4]:"fire-core-compat",[d4]:"fire-analytics",[c4]:"fire-analytics-compat",[h4]:"fire-app-check",[f4]:"fire-app-check-compat",[m4]:"fire-auth",[p4]:"fire-auth-compat",[g4]:"fire-rtdb",[v4]:"fire-data-connect",[y4]:"fire-rtdb-compat",[b4]:"fire-fn",[x4]:"fire-fn-compat",[_4]:"fire-iid",[w4]:"fire-iid-compat",[E4]:"fire-fcm",[T4]:"fire-fcm-compat",[S4]:"fire-perf",[A4]:"fire-perf-compat",[C4]:"fire-rc",[R4]:"fire-rc-compat",[I4]:"fire-gcs",[N4]:"fire-gcs-compat",[k4]:"fire-fst",[O4]:"fire-fst-compat",[D4]:"fire-vertex","fire-js":"fire-js",[j4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,V4=new Map,My=new Map;function v1(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Va(t){const e=t.name;if(My.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;My.set(e,t);for(const n of vm.values())v1(n,t);for(const n of V4.values())v1(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Er(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oa=new Dd("app","Firebase",L4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=M4;function f2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Oa.create("bad-app-name",{appName:String(s)});if(n||(n=o2()),!n)throw Oa.create("no-options");const o=vm.get(s);if(o){if(zo(n,o.options)&&zo(r,o.config))return o;throw Oa.create("duplicate-app",{appName:s})}const u=new GO(s);for(const f of My.values())u.addComponent(f);const d=new U4(n,r,u);return vm.set(s,d),d}function lp(t=jy){const e=vm.get(t);if(!e&&t===jy&&o2())return f2();if(!e)throw Oa.create("no-app",{appName:t});return e}function _i(t,e,n){var r;let s=(r=P4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(d.join(" "));return}Va(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="firebase-heartbeat-database",B4=1,md="firebase-heartbeat-store";let Jv=null;function h2(){return Jv||(Jv=i4(z4,B4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(md)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oa.create("idb-open",{originalErrorMessage:t.message})})),Jv}async function F4(t){try{const n=(await h2()).transaction(md),r=await n.objectStore(md).get(m2(t));return await n.done,r}catch(e){if(e instanceof zi)Ms.warn(e.message);else{const n=Oa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function y1(t,e){try{const r=(await h2()).transaction(md,"readwrite");await r.objectStore(md).put(e,m2(t)),await r.done}catch(n){if(n instanceof zi)Ms.warn(n.message);else{const r=Oa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(r.message)}}}function m2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=1024,H4=30;class G4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=b1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>H4){const u=Y4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b1(),{heartbeatsToSend:r,unsentEntries:s}=$4(this._heartbeatsCache.heartbeats),o=gm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ms.warn(n),""}}}function b1(){return new Date().toISOString().substring(0,10)}function $4(t,e=q4){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),x1(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),x1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OO()?jO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await F4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x1(t){return gm(JSON.stringify({version:2,heartbeats:t})).length}function Y4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){Va(new js("platform-logger",e=>new o4(e),"PRIVATE")),Va(new js("heartbeat",e=>new G4(e),"PRIVATE")),_i(Oy,g1,t),_i(Oy,g1,"esm2017"),_i("fire-js","")}W4("");function $0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function p2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q4=p2,g2=new Dd("auth","Firebase",p2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new H0("@firebase/auth");function X4(t,...e){ym.logLevel<=ct.WARN&&ym.warn(`Auth (${Yo}): ${t}`,...e)}function Qh(t,...e){ym.logLevel<=ct.ERROR&&ym.error(`Auth (${Yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,...e){throw Y0(t,...e)}function Vi(t,...e){return Y0(t,...e)}function K0(t,e,n){const r=Object.assign(Object.assign({},Q4()),{[e]:n});return new Dd("auth","Firebase",r).create(e,{appName:t.name})}function ks(t){return K0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wi(t,"argument-error"),K0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return g2.create(t,...e)}function Le(t,e,...n){if(!t)throw Y0(e,...n)}function Is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qh(e),new Error(e)}function Ps(t,e){t||Is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Z4(){return _1()==="http:"||_1()==="https:"}function _1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z4()||IO()||"connection"in navigator)?navigator.onLine:!0}function tj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ps(n>e,"Short delay should be less than long delay!"),this.isMobile=AO()||NO()}get(){return ej()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e){Ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ij=new Md(3e4,6e4);function Ka(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ya(t,e,n,r,s={}){return y2(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=Od(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},o);return RO()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&zs(t.emulatorConfig.host)&&(h.credentials="include"),v2.fetch()(await b2(t,t.config.apiHost,n,d),h)})}async function y2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nj),e);try{const s=new aj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw xh(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw xh(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw xh(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw xh(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw K0(t,v,h);wi(t,v)}}catch(s){if(s instanceof zi)throw s;wi(t,"network-request-failed",{message:String(s)})}}async function Pd(t,e,n,r,s={}){const o=await Ya(t,e,n,r,s);return"mfaPendingCredential"in o&&wi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function b2(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?W0(t.config,s):`${t.config.apiScheme}://${s}`;return rj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function sj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),ij.get())})}}function xh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vi(t,e,r);return s.customData._tokenResponse=n,s}function w1(t){return t!==void 0&&t.enterprise!==void 0}class oj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lj(t,e){return Ya(t,"GET","/v2/recaptchaConfig",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function bm(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cj(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),s=Q0(r);Le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Kc(Zv(s.auth_time)),issuedAtTime:Kc(Zv(s.iat)),expirationTime:Kc(Zv(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Zv(t){return Number(t)*1e3}function Q0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const s=s2(n);return s?JSON.parse(s):(Qh("Failed to decode base64 JWT payload"),null)}catch(s){return Qh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E1(t){const e=Q0(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zi&&dj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pd(t,bm(n,{idToken:r}));Le(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?x2(o.providerUserInfo):[],d=mj(t.providerData,u),f=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),v=f?h:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Vy(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,b)}async function hj(t){const e=Bt(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function x2(t){return t.map(e=>{var{providerId:n}=e,r=$0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){const n=await y2(t,{},async()=>{const r=Od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await b2(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return t.emulatorConfig&&zs(t.emulatorConfig.host)&&(f.credentials="include"),v2.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gj(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=E1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await pj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new eu;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Le(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eu,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ji{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=$0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await pd(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cj(this,e)}reload(){return hj(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await pd(this,uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,d,f,h,v;const b=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(u=n.photoURL)!==null&&u!==void 0?u:void 0,O=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,U=(h=n.createdAt)!==null&&h!==void 0?h:void 0,j=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:z,emailVerified:H,isAnonymous:G,providerData:q,stsTokenManager:C}=n;Le(z&&C,e,"internal-error");const S=eu.fromJSON(this.name,C);Le(typeof z=="string",e,"internal-error"),_a(b,e.name),_a(x,e.name),Le(typeof H=="boolean",e,"internal-error"),Le(typeof G=="boolean",e,"internal-error"),_a(E,e.name),_a(A,e.name),_a(O,e.name),_a(M,e.name),_a(U,e.name),_a(j,e.name);const I=new ji({uid:z,auth:e,email:x,emailVerified:H,displayName:b,isAnonymous:G,photoURL:A,phoneNumber:E,tenantId:O,stsTokenManager:S,createdAt:U,lastLoginAt:j});return q&&Array.isArray(q)&&(I.providerData=q.map(L=>Object.assign({},L))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new eu;s.updateFromServerResponse(n);const o=new ji({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Le(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?x2(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new eu;d.updateFromIdToken(r);const f=new ji({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Vy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Map;function Ns(t){Ps(t instanceof Function,"Expected a class definition");let e=T1.get(t);return e?(Ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_2.type="NONE";const S1=_2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e,n){return`firebase:${t}:${e}:${n}`}class tu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Xh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Xh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bm(this.auth,{idToken:e}).catch(()=>{});return n?ji._fromGetAccountInfoResponse(this.auth,n,e):null}return ji._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tu(Ns(S1),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Ns(S1);const u=Xh(r,e.config.apiKey,e.name);let d=null;for(const h of n)try{const v=await h._get(u);if(v){let b;if(typeof v=="string"){const x=await bm(e,{idToken:v}).catch(()=>{});if(!x)break;b=await ji._fromGetAccountInfoResponse(e,x,v)}else b=ji._fromJSON(e,v);h!==o&&(d=b),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new tu(o,e,r):(o=f[0],d&&await o._set(u,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(u)}catch{}})),new tu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C2(e))return"Blackberry";if(R2(e))return"Webos";if(E2(e))return"Safari";if((e.includes("chrome/")||T2(e))&&!e.includes("edge/"))return"Chrome";if(A2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function w2(t=pr()){return/firefox\//i.test(t)}function E2(t=pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T2(t=pr()){return/crios\//i.test(t)}function S2(t=pr()){return/iemobile/i.test(t)}function A2(t=pr()){return/android/i.test(t)}function C2(t=pr()){return/blackberry/i.test(t)}function R2(t=pr()){return/webos/i.test(t)}function X0(t=pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vj(t=pr()){var e;return X0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yj(){return kO()&&document.documentMode===10}function I2(t=pr()){return X0(t)||A2(t)||R2(t)||C2(t)||/windows phone/i.test(t)||S2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e=[]){let n;switch(t){case"Browser":n=A1(pr());break;case"Worker":n=`${A1(pr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,d)=>{try{const f=e(o);u(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",Ka(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=6;class wj{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:_j,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C1(this),this.idTokenSubscription=new C1(this),this.beforeStateQueue=new bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await tu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bm(this,{idToken:e}),r=await ji._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Er(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(ks(this));const n=e?Bt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xj(this),n=new wj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await tu.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&X4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wa(t){return Bt(t)}class C1{constructor(e){this.auth=e,this.observer=null,this.addObserver=UO(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tj(t){up=t}function k2(t){return up.loadJS(t)}function Sj(){return up.recaptchaEnterpriseScript}function Aj(){return up.gapiScript}function Cj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Rj{constructor(){this.enterprise=new Ij}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ij{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Nj="recaptcha-enterprise",D2="NO_RECAPTCHA";class kj{constructor(e){this.type=Nj,this.auth=Wa(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{lj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new oj(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,u(h.siteKey)}}).catch(f=>{d(f)})})}function s(o,u,d){const f=window.grecaptcha;w1(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{u(h)}).catch(()=>{u(D2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rj().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!n&&w1(window.grecaptcha))s(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Sj();f.length!==0&&(f+=d),k2(f).then(()=>{s(d,o,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function R1(t,e,n,r=!1,s=!1){const o=new kj(t);let u;if(s)u=D2;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ly(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await R1(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await R1(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e){const n=jd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(zo(o,e??{}))return s;wi(s,"already-initialized")}return n.initialize({options:e})}function Oj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jj(t,e,n){const r=Wa(t);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=O2(e),{host:u,port:d}=Mj(e),f=d===null?"":`:${d}`,h={url:`${o}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(zo(h,r.config.emulator)&&zo(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,zs(u)?(ap(`${o}//${u}${f}`),op("Auth",!0)):Pj()}function O2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Mj(t){const e=O2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:I1(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:I1(u)}}}function I1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Pj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,n){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function Vj(t,e){return Ya(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return Pd(t,"POST","/v1/accounts:signInWithPassword",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,e))}async function zj(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends J0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ly(e,n,"signInWithPassword",Lj);case"emailLink":return Uj(e,{email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ly(e,r,"signUpPassword",Vj);case"emailLink":return zj(e,{idToken:n,email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e){return Pd(t,"POST","/v1/accounts:signInWithIdp",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="http://localhost";class Bo extends J0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=$0(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Bo(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return nu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nu(e,n)}buildRequest(){const e={requestUri:Bj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Od(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qj(t){const e=Oc(jc(t)).link,n=e?Oc(jc(e)).deep_link_id:null,r=Oc(jc(t)).deep_link_id;return(r?Oc(jc(r)).link:null)||r||n||e||t}class Z0{constructor(e){var n,r,s,o,u,d;const f=Oc(jc(e)),h=(n=f.apiKey)!==null&&n!==void 0?n:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,b=Fj((s=f.mode)!==null&&s!==void 0?s:null);Le(h&&v&&b,"argument-error"),this.apiKey=h,this.operation=b,this.code=v,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=qj(e);try{return new Z0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.providerId=wu.PROVIDER_ID}static credential(e,n){return gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Z0.parseLink(n);return Le(r,"argument-error"),gd._fromEmailAndCode(e,r.code,r.tenantId)}}wu.PROVIDER_ID="password";wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends eb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Vd{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Vd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bo._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Vd{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.GITHUB_SIGN_IN_METHOD="github.com";Ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Vd{constructor(){super("twitter.com")}static credential(e,n){return Bo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sa.credential(n,r)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e){return Pd(t,"POST","/v1/accounts:signUp",Ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ji._fromIdTokenResponse(e,r,s),u=N1(r);return new Fo({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N1(r);return new Fo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends zi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_m.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new _m(e,n,r,s)}}function j2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_m._fromErrorAndOperation(t,o,e,r):o})}async function Gj(t,e,n=!1){const r=await pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e,n=!1){const{auth:r}=t;if(Er(r.app))return Promise.reject(ks(r));const s="reauthenticate";try{const o=await pd(t,j2(r,s,e,t),n);Le(o.idToken,r,"internal-error");const u=Q0(o.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(t.uid===d,r,"user-mismatch"),Fo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e,n=!1){if(Er(t.app))return Promise.reject(ks(t));const r="signIn",s=await j2(t,r,e),o=await Fo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function Kj(t,e){return M2(Wa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t){const e=Wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yj(t,e,n){if(Er(t.app))return Promise.reject(ks(t));const r=Wa(t),u=await Ly(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hj).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&P2(t),f}),d=await Fo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function Wj(t,e,n){return Er(t.app)?Promise.reject(ks(t)):Kj(Bt(t),wu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P2(t),r})}function Qj(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function Xj(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function Jj(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}function ey(t){return Bt(t).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1e3,eM=10;class L2 extends V2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);yj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eM):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}L2.type="LOCAL";const tM=L2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2 extends V2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}U2.type="SESSION";const z2=U2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async h=>h(n.origin,o)),f=await nM(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((d,f)=>{const h=tb("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(b){const x=b;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(x.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function iM(t){Qi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function sM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oM(){return B2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firebaseLocalStorageDb",lM=1,Em="firebaseLocalStorage",q2="fbase_key";class Ld{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dp(t,e){return t.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function uM(){const t=indexedDB.deleteDatabase(F2);return new Ld(t).toPromise()}function Uy(){const t=indexedDB.open(F2,lM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Em,{keyPath:q2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Em)?e(r):(r.close(),await uM(),e(await Uy()))})})}async function k1(t,e,n){const r=dp(t,!0).put({[q2]:e,value:n});return new Ld(r).toPromise()}async function cM(t,e){const n=dp(t,!1).get(e),r=await new Ld(n).toPromise();return r===void 0?null:r.value}function D1(t,e){const n=dp(t,!0).delete(e);return new Ld(n).toPromise()}const dM=800,fM=3;class H2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cp._getInstance(oM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sM(),!this.activeServiceWorker)return;this.sender=new rM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uy();return await k1(e,wm,"1"),await D1(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>k1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=dp(s,!1).getAll();return new Ld(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H2.type="LOCAL";const hM=H2;new Md(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t,e){return e?Ns(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends J0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mM(t){return M2(t.auth,new nb(t),t.bypassAuthState)}function pM(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),$j(n,new nb(t),t.bypassAuthState)}async function gM(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),Gj(n,new nb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mM;case"linkViaPopup":case"linkViaRedirect":return gM;case"reauthViaPopup":case"reauthViaRedirect":return pM;default:wi(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new Md(2e3,1e4);async function yM(t,e,n){if(Er(t.app))return Promise.reject(Vi(t,"operation-not-supported-in-this-environment"));const r=Wa(t);J4(t,e,eb);const s=G2(r,n);return new ko(r,"signInViaPopup",e,s).executeNotNull()}class ko extends $2{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=tb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vM.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="pendingRedirect",Jh=new Map;class xM extends $2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const r=await _M(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _M(t,e){const n=TM(e),r=EM(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function wM(t,e){Jh.set(t._key(),e)}function EM(t){return Ns(t._redirectPersistence)}function TM(t){return Xh(bM,t.config.apiKey,t.name)}async function SM(t,e,n=!1){if(Er(t.app))return Promise.reject(ks(t));const r=Wa(t),s=G2(r,e),u=await new xM(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=600*1e3;class CM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!K2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AM&&this.cachedEventUids.clear(),this.cachedEventUids.has(O1(e))}saveEventToCache(e){this.cachedEventUids.add(O1(e)),this.lastProcessedEventTime=Date.now()}}function O1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function K2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kM=/^https?/;async function DM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IM(t);for(const n of e)try{if(OM(n))return}catch{}wi(t,"unauthorized-domain")}function OM(t){const e=Py(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!kM.test(n))return!1;if(NM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Md(3e4,6e4);function j1(){const t=Qi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MM(t){return new Promise((e,n)=>{var r,s,o;function u(){j1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j1(),n(Vi(t,"network-request-failed"))},timeout:jM.get()})}if(!((s=(r=Qi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Qi().gapi)===null||o===void 0)&&o.load)u();else{const d=Cj("iframefcb");return Qi()[d]=()=>{gapi.load?u():n(Vi(t,"network-request-failed"))},k2(`${Aj()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function PM(t){return Zh=Zh||MM(t),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Md(5e3,15e3),LM="__/auth/iframe",UM="emulator/auth/iframe",zM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FM(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W0(e,UM):`https://${t.config.authDomain}/${LM}`,r={apiKey:e.apiKey,appName:t.name,v:Yo},s=BM.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Od(r).slice(1)}`}async function qM(t){const e=await PM(t),n=Qi().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:FM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zM,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Vi(t,"network-request-failed"),d=Qi().setTimeout(()=>{o(u)},VM.get());function f(){Qi().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GM=500,$M=600,KM="_blank",YM="http://localhost";class M1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WM(t,e,n,r=GM,s=$M){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},HM),{width:r.toString(),height:s.toString(),top:o,left:u}),h=pr().toLowerCase();n&&(d=T2(h)?KM:n),w2(h)&&(e=e||YM,f.scrollbars="yes");const v=Object.entries(f).reduce((x,[E,A])=>`${x}${E}=${A},`,"");if(vj(h)&&d!=="_self")return QM(e||"",d),new M1(null);const b=window.open(e||"",d,v);Le(b,t,"popup-blocked");try{b.focus()}catch{}return new M1(b)}function QM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="__/auth/handler",JM="emulator/auth/handler",ZM=encodeURIComponent("fac");async function P1(t,e,n,r,s,o){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yo,eventId:s};if(e instanceof eb){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",LO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof Vd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await t._getAppCheckToken(),h=f?`#${ZM}=${encodeURIComponent(f)}`:"";return`${eP(t)}?${Od(d).slice(1)}${h}`}function eP({config:t}){return t.emulator?W0(t,JM):`https://${t.authDomain}/${XM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="webStorageSupport";class tP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z2,this._completeRedirectFn=SM,this._overrideRedirectResult=wM}async _openPopup(e,n,r,s){var o;Ps((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await P1(e,n,r,Py(),s);return WM(e,u,tb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await P1(e,n,r,Py(),s);return iM(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ps(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qM(e),r=new CM(e);return n.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ty,{type:ty},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ty];u!==void 0&&n(!!u),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I2()||E2()||X0()}}const nP=tP;var V1="@firebase/auth",L1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sP(t){Va(new js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N2(t)},h=new Ej(r,s,o,f);return Oj(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Va(new js("auth-internal",e=>{const n=Wa(e.getProvider("auth").getImmediate());return(r=>new rP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(V1,L1,iP(t)),_i(V1,L1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=300,oP=l2("authIdTokenMaxAge")||aP;let U1=null;const lP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oP)return;const s=n==null?void 0:n.token;U1!==s&&(U1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uP(t=lp()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Dj(t,{popupRedirectResolver:nP,persistence:[hM,tM,z2]}),r=l2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=lP(o.toString());Xj(n,u,()=>u(n.currentUser)),Qj(n,d=>u(d))}}const s=a2("auth");return s&&jj(n,`http://${s}`),n}function cP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Tj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Vi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",cP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sP("Browser");var dP="firebase",fP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(dP,fP,"app");var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ja,Y2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function I(){}I.prototype=S.prototype,C.D=S.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(L,P,V){for(var k=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)k[ve-2]=arguments[ve];return S.prototype[P].apply(L,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,I){I||(I=0);var L=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)L[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)L[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=C.g[0],I=C.g[1],P=C.g[2];var V=C.g[3],k=S+(V^I&(P^V))+L[0]+3614090360&4294967295;S=I+(k<<7&4294967295|k>>>25),k=V+(P^S&(I^P))+L[1]+3905402710&4294967295,V=S+(k<<12&4294967295|k>>>20),k=P+(I^V&(S^I))+L[2]+606105819&4294967295,P=V+(k<<17&4294967295|k>>>15),k=I+(S^P&(V^S))+L[3]+3250441966&4294967295,I=P+(k<<22&4294967295|k>>>10),k=S+(V^I&(P^V))+L[4]+4118548399&4294967295,S=I+(k<<7&4294967295|k>>>25),k=V+(P^S&(I^P))+L[5]+1200080426&4294967295,V=S+(k<<12&4294967295|k>>>20),k=P+(I^V&(S^I))+L[6]+2821735955&4294967295,P=V+(k<<17&4294967295|k>>>15),k=I+(S^P&(V^S))+L[7]+4249261313&4294967295,I=P+(k<<22&4294967295|k>>>10),k=S+(V^I&(P^V))+L[8]+1770035416&4294967295,S=I+(k<<7&4294967295|k>>>25),k=V+(P^S&(I^P))+L[9]+2336552879&4294967295,V=S+(k<<12&4294967295|k>>>20),k=P+(I^V&(S^I))+L[10]+4294925233&4294967295,P=V+(k<<17&4294967295|k>>>15),k=I+(S^P&(V^S))+L[11]+2304563134&4294967295,I=P+(k<<22&4294967295|k>>>10),k=S+(V^I&(P^V))+L[12]+1804603682&4294967295,S=I+(k<<7&4294967295|k>>>25),k=V+(P^S&(I^P))+L[13]+4254626195&4294967295,V=S+(k<<12&4294967295|k>>>20),k=P+(I^V&(S^I))+L[14]+2792965006&4294967295,P=V+(k<<17&4294967295|k>>>15),k=I+(S^P&(V^S))+L[15]+1236535329&4294967295,I=P+(k<<22&4294967295|k>>>10),k=S+(P^V&(I^P))+L[1]+4129170786&4294967295,S=I+(k<<5&4294967295|k>>>27),k=V+(I^P&(S^I))+L[6]+3225465664&4294967295,V=S+(k<<9&4294967295|k>>>23),k=P+(S^I&(V^S))+L[11]+643717713&4294967295,P=V+(k<<14&4294967295|k>>>18),k=I+(V^S&(P^V))+L[0]+3921069994&4294967295,I=P+(k<<20&4294967295|k>>>12),k=S+(P^V&(I^P))+L[5]+3593408605&4294967295,S=I+(k<<5&4294967295|k>>>27),k=V+(I^P&(S^I))+L[10]+38016083&4294967295,V=S+(k<<9&4294967295|k>>>23),k=P+(S^I&(V^S))+L[15]+3634488961&4294967295,P=V+(k<<14&4294967295|k>>>18),k=I+(V^S&(P^V))+L[4]+3889429448&4294967295,I=P+(k<<20&4294967295|k>>>12),k=S+(P^V&(I^P))+L[9]+568446438&4294967295,S=I+(k<<5&4294967295|k>>>27),k=V+(I^P&(S^I))+L[14]+3275163606&4294967295,V=S+(k<<9&4294967295|k>>>23),k=P+(S^I&(V^S))+L[3]+4107603335&4294967295,P=V+(k<<14&4294967295|k>>>18),k=I+(V^S&(P^V))+L[8]+1163531501&4294967295,I=P+(k<<20&4294967295|k>>>12),k=S+(P^V&(I^P))+L[13]+2850285829&4294967295,S=I+(k<<5&4294967295|k>>>27),k=V+(I^P&(S^I))+L[2]+4243563512&4294967295,V=S+(k<<9&4294967295|k>>>23),k=P+(S^I&(V^S))+L[7]+1735328473&4294967295,P=V+(k<<14&4294967295|k>>>18),k=I+(V^S&(P^V))+L[12]+2368359562&4294967295,I=P+(k<<20&4294967295|k>>>12),k=S+(I^P^V)+L[5]+4294588738&4294967295,S=I+(k<<4&4294967295|k>>>28),k=V+(S^I^P)+L[8]+2272392833&4294967295,V=S+(k<<11&4294967295|k>>>21),k=P+(V^S^I)+L[11]+1839030562&4294967295,P=V+(k<<16&4294967295|k>>>16),k=I+(P^V^S)+L[14]+4259657740&4294967295,I=P+(k<<23&4294967295|k>>>9),k=S+(I^P^V)+L[1]+2763975236&4294967295,S=I+(k<<4&4294967295|k>>>28),k=V+(S^I^P)+L[4]+1272893353&4294967295,V=S+(k<<11&4294967295|k>>>21),k=P+(V^S^I)+L[7]+4139469664&4294967295,P=V+(k<<16&4294967295|k>>>16),k=I+(P^V^S)+L[10]+3200236656&4294967295,I=P+(k<<23&4294967295|k>>>9),k=S+(I^P^V)+L[13]+681279174&4294967295,S=I+(k<<4&4294967295|k>>>28),k=V+(S^I^P)+L[0]+3936430074&4294967295,V=S+(k<<11&4294967295|k>>>21),k=P+(V^S^I)+L[3]+3572445317&4294967295,P=V+(k<<16&4294967295|k>>>16),k=I+(P^V^S)+L[6]+76029189&4294967295,I=P+(k<<23&4294967295|k>>>9),k=S+(I^P^V)+L[9]+3654602809&4294967295,S=I+(k<<4&4294967295|k>>>28),k=V+(S^I^P)+L[12]+3873151461&4294967295,V=S+(k<<11&4294967295|k>>>21),k=P+(V^S^I)+L[15]+530742520&4294967295,P=V+(k<<16&4294967295|k>>>16),k=I+(P^V^S)+L[2]+3299628645&4294967295,I=P+(k<<23&4294967295|k>>>9),k=S+(P^(I|~V))+L[0]+4096336452&4294967295,S=I+(k<<6&4294967295|k>>>26),k=V+(I^(S|~P))+L[7]+1126891415&4294967295,V=S+(k<<10&4294967295|k>>>22),k=P+(S^(V|~I))+L[14]+2878612391&4294967295,P=V+(k<<15&4294967295|k>>>17),k=I+(V^(P|~S))+L[5]+4237533241&4294967295,I=P+(k<<21&4294967295|k>>>11),k=S+(P^(I|~V))+L[12]+1700485571&4294967295,S=I+(k<<6&4294967295|k>>>26),k=V+(I^(S|~P))+L[3]+2399980690&4294967295,V=S+(k<<10&4294967295|k>>>22),k=P+(S^(V|~I))+L[10]+4293915773&4294967295,P=V+(k<<15&4294967295|k>>>17),k=I+(V^(P|~S))+L[1]+2240044497&4294967295,I=P+(k<<21&4294967295|k>>>11),k=S+(P^(I|~V))+L[8]+1873313359&4294967295,S=I+(k<<6&4294967295|k>>>26),k=V+(I^(S|~P))+L[15]+4264355552&4294967295,V=S+(k<<10&4294967295|k>>>22),k=P+(S^(V|~I))+L[6]+2734768916&4294967295,P=V+(k<<15&4294967295|k>>>17),k=I+(V^(P|~S))+L[13]+1309151649&4294967295,I=P+(k<<21&4294967295|k>>>11),k=S+(P^(I|~V))+L[4]+4149444226&4294967295,S=I+(k<<6&4294967295|k>>>26),k=V+(I^(S|~P))+L[11]+3174756917&4294967295,V=S+(k<<10&4294967295|k>>>22),k=P+(S^(V|~I))+L[2]+718787259&4294967295,P=V+(k<<15&4294967295|k>>>17),k=I+(V^(P|~S))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var I=S-this.blockSize,L=this.B,P=this.h,V=0;V<S;){if(P==0)for(;V<=I;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<S;)if(L[P++]=C.charCodeAt(V++),P==this.blockSize){s(this,L),P=0;break}}else for(;V<S;)if(L[P++]=C[V++],P==this.blockSize){s(this,L),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var I=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=I&255,I/=256;for(this.u(C),C=Array(16),S=I=0;4>S;++S)for(var L=0;32>L;L+=8)C[I++]=this.g[S]>>>L&255;return C};function o(C,S){var I=d;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=S(C)}function u(C,S){this.h=S;for(var I=[],L=!0,P=C.length-1;0<=P;P--){var V=C[P]|0;L&&V==S||(I[P]=V,L=!1)}this.g=I}var d={};function f(C){return-128<=C&&128>C?o(C,function(S){return new u([S|0],0>S?-1:0)}):new u([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return b;if(0>C)return M(h(-C));for(var S=[],I=1,L=0;C>=I;L++)S[L]=C/I|0,I*=4294967296;return new u(S,0)}function v(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return M(v(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(S,8)),L=b,P=0;P<C.length;P+=8){var V=Math.min(8,C.length-P),k=parseInt(C.substring(P,P+V),S);8>V?(V=h(Math.pow(S,V)),L=L.j(V).add(h(k))):(L=L.j(I),L=L.add(h(k)))}return L}var b=f(0),x=f(1),E=f(16777216);t=u.prototype,t.m=function(){if(O(this))return-M(this).m();for(var C=0,S=1,I=0;I<this.g.length;I++){var L=this.i(I);C+=(0<=L?L:4294967296+L)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(O(this))return"-"+M(this).toString(C);for(var S=h(Math.pow(C,6)),I=this,L="";;){var P=H(I,S).g;I=U(I,P.j(S));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=P,A(I))return V+L;for(;6>V.length;)V="0"+V;L=V+L}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function O(C){return C.h==-1}t.l=function(C){return C=U(this,C),O(C)?-1:A(C)?0:1};function M(C){for(var S=C.g.length,I=[],L=0;L<S;L++)I[L]=~C.g[L];return new u(I,~C.h).add(x)}t.abs=function(){return O(this)?M(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0,P=0;P<=S;P++){var V=L+(this.i(P)&65535)+(C.i(P)&65535),k=(V>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);L=k>>>16,V&=65535,k&=65535,I[P]=k<<16|V}return new u(I,I[I.length-1]&-2147483648?-1:0)};function U(C,S){return C.add(M(S))}t.j=function(C){if(A(this)||A(C))return b;if(O(this))return O(C)?M(this).j(M(C)):M(M(this).j(C));if(O(C))return M(this.j(M(C)));if(0>this.l(E)&&0>C.l(E))return h(this.m()*C.m());for(var S=this.g.length+C.g.length,I=[],L=0;L<2*S;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var P=0;P<C.g.length;P++){var V=this.i(L)>>>16,k=this.i(L)&65535,ve=C.i(P)>>>16,Oe=C.i(P)&65535;I[2*L+2*P]+=k*Oe,j(I,2*L+2*P),I[2*L+2*P+1]+=V*Oe,j(I,2*L+2*P+1),I[2*L+2*P+1]+=k*ve,j(I,2*L+2*P+1),I[2*L+2*P+2]+=V*ve,j(I,2*L+2*P+2)}for(L=0;L<S;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=S;L<2*S;L++)I[L]=0;return new u(I,0)};function j(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function z(C,S){this.g=C,this.h=S}function H(C,S){if(A(S))throw Error("division by zero");if(A(C))return new z(b,b);if(O(C))return S=H(M(C),S),new z(M(S.g),M(S.h));if(O(S))return S=H(C,M(S)),new z(M(S.g),S.h);if(30<C.g.length){if(O(C)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var I=x,L=S;0>=L.l(C);)I=G(I),L=G(L);var P=q(I,1),V=q(L,1);for(L=q(L,2),I=q(I,2);!A(L);){var k=V.add(L);0>=k.l(C)&&(P=P.add(I),V=k),L=q(L,1),I=q(I,1)}return S=U(C,P.j(S)),new z(P,S)}for(P=b;0<=C.l(S);){for(I=Math.max(1,Math.floor(C.m()/S.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),V=h(I),k=V.j(S);O(k)||0<k.l(C);)I-=L,V=h(I),k=V.j(S);A(V)&&(V=x),P=P.add(V),C=U(C,k)}return new z(P,C)}t.A=function(C){return H(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)&C.i(L);return new u(I,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)|C.i(L);return new u(I,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)^C.i(L);return new u(I,this.h^C.h)};function G(C){for(var S=C.g.length+1,I=[],L=0;L<S;L++)I[L]=C.i(L)<<1|C.i(L-1)>>>31;return new u(I,C.h)}function q(C,S){var I=S>>5;S%=32;for(var L=C.g.length-I,P=[],V=0;V<L;V++)P[V]=0<S?C.i(V+I)>>>S|C.i(V+I+1)<<32-S:C.i(V+I);return new u(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Y2=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,ja=u}).apply(typeof z1<"u"?z1:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W2,Mc,Q2,em,zy,X2,J2,Z2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,T){return m==Array.prototype||m==Object.prototype||(m[_]=T.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var _=0;_<m.length;++_){var T=m[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(m,_){if(_)e:{var T=r;m=m.split(".");for(var D=0;D<m.length-1;D++){var Y=m[D];if(!(Y in T))break e;T=T[Y]}m=m[m.length-1],D=T[m],_=_(D),_!=D&&_!=null&&e(T,m,{configurable:!0,writable:!0,value:_})}}function o(m,_){m instanceof String&&(m+="");var T=0,D=!1,Y={next:function(){if(!D&&T<m.length){var te=T++;return{value:_(te,m[te]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function h(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function v(m,_,T){return m.call.apply(m.bind,arguments)}function b(m,_,T){if(!m)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,D),m.apply(_,Y)}}return function(){return m.apply(_,arguments)}}function x(m,_,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,x.apply(null,arguments)}function E(m,_){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function A(m,_){function T(){}T.prototype=_.prototype,m.aa=_.prototype,m.prototype=new T,m.prototype.constructor=m,m.Qb=function(D,Y,te){for(var he=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)he[Tt-2]=arguments[Tt];return _.prototype[Y].apply(D,he)}}function O(m){const _=m.length;if(0<_){const T=Array(_);for(let D=0;D<_;D++)T[D]=m[D];return T}return[]}function M(m,_){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(f(D)){const Y=m.length||0,te=D.length||0;m.length=Y+te;for(let he=0;he<te;he++)m[Y+he]=D[he]}else m.push(D)}}class U{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var G=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function q(m,_,T){for(const D in m)_.call(T,m[D],D,m)}function C(m,_){for(const T in m)_.call(void 0,m[T],T,m)}function S(m){const _={};for(const T in m)_[T]=m[T];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(m,_){let T,D;for(let Y=1;Y<arguments.length;Y++){D=arguments[Y];for(T in D)m[T]=D[T];for(let te=0;te<I.length;te++)T=I[te],Object.prototype.hasOwnProperty.call(D,T)&&(m[T]=D[T])}}function P(m){var _=1;m=m.split(":");const T=[];for(;0<_&&m.length;)T.push(m.shift()),_--;return m.length&&T.push(m.join(":")),T}function V(m){d.setTimeout(()=>{throw m},0)}function k(){var m=_e;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class ve{constructor(){this.h=this.g=null}add(_,T){const D=Oe.get();D.set(_,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Oe=new U(()=>new W,m=>m.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ue=!1,_e=new ve,we=()=>{const m=d.Promise.resolve(void 0);re=()=>{m.then(B)}};var B=()=>{for(var m;m=k();){try{m.h.call(m.g)}catch(T){V(T)}var _=Oe;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}ue=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return m})();function Ae(m,_){if(ce.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var T=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(G){e:{try{H(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else T=="mouseover"?_=m.fromElement:T=="mouseout"&&(_=m.toElement);this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ze[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ae.aa.h.call(this)}}A(Ae,ce);var ze={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Lt=0;function _t(m,_,T,D,Y){this.listener=m,this.proxy=null,this.src=_,this.type=T,this.capture=!!D,this.ha=Y,this.key=++Lt,this.da=this.fa=!1}function Sn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,_,T,D,Y){var te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);var he=Ke(m,_,D,Y);return-1<he?(_=m[he],T||(_.fa=!1)):(_=new _t(_,this.src,te,!!D,Y),_.fa=T,m.push(_)),_};function me(m,_){var T=_.type;if(T in m.g){var D=m.g[T],Y=Array.prototype.indexOf.call(D,_,void 0),te;(te=0<=Y)&&Array.prototype.splice.call(D,Y,1),te&&(Sn(_),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Ke(m,_,T,D){for(var Y=0;Y<m.length;++Y){var te=m[Y];if(!te.da&&te.listener==_&&te.capture==!!T&&te.ha==D)return Y}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),Ve={};function Kt(m,_,T,D,Y){if(Array.isArray(_)){for(var te=0;te<_.length;te++)Kt(m,_[te],T,D,Y);return null}return T=vn(T),m&&m[Be]?m.K(_,T,h(D)?!!D.capture:!1,Y):nr(m,_,T,!1,D,Y)}function nr(m,_,T,D,Y,te){if(!_)throw Error("Invalid event type");var he=h(Y)?!!Y.capture:!!Y,Tt=qr(m);if(Tt||(m[Ft]=Tt=new pe(m)),T=Tt.add(_,T,D,he,te),T.proxy)return T;if(D=Fr(),T.proxy=D,D.src=m,D.listener=T,m.addEventListener)fe||(Y=he),Y===void 0&&(Y=!1),m.addEventListener(_.toString(),D,Y);else if(m.attachEvent)m.attachEvent(Ar(_.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Fr(){function m(T){return _.call(m.src,m.listener,T)}const _=Ei;return m}function Sr(m,_,T,D,Y){if(Array.isArray(_))for(var te=0;te<_.length;te++)Sr(m,_[te],T,D,Y);else D=h(D)?!!D.capture:!!D,T=vn(T),m&&m[Be]?(m=m.i,_=String(_).toString(),_ in m.g&&(te=m.g[_],T=Ke(te,T,D,Y),-1<T&&(Sn(te[T]),Array.prototype.splice.call(te,T,1),te.length==0&&(delete m.g[_],m.h--)))):m&&(m=qr(m))&&(_=m.g[_.toString()],m=-1,_&&(m=Ke(_,T,D,Y)),(T=-1<m?_[m]:null)&&zn(T))}function zn(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[Be])me(_.i,m);else{var T=m.type,D=m.proxy;_.removeEventListener?_.removeEventListener(T,D,m.capture):_.detachEvent?_.detachEvent(Ar(T),D):_.addListener&&_.removeListener&&_.removeListener(D),(T=qr(_))?(me(T,m),T.h==0&&(T.src=null,_[Ft]=null)):Sn(m)}}}function Ar(m){return m in Ve?Ve[m]:Ve[m]="on"+m}function Ei(m,_){if(m.da)m=!0;else{_=new Ae(_,this);var T=m.listener,D=m.ha||m.src;m.fa&&zn(m),m=T.call(D,_)}return m}function qr(m){return m=m[Ft],m instanceof pe?m:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(m){return typeof m=="function"?m:(m[Ct]||(m[Ct]=function(_){return m.handleEvent(_)}),m[Ct])}function qe(){J.call(this),this.i=new pe(this),this.M=this,this.F=null}A(qe,J),qe.prototype[Be]=!0,qe.prototype.removeEventListener=function(m,_,T,D){Sr(this,m,_,T,D)};function Nt(m,_){var T,D=m.F;if(D)for(T=[];D;D=D.F)T.push(D);if(m=m.M,D=_.type||_,typeof _=="string")_=new ce(_,m);else if(_ instanceof ce)_.target=_.target||m;else{var Y=_;_=new ce(D,m),L(_,Y)}if(Y=!0,T)for(var te=T.length-1;0<=te;te--){var he=_.g=T[te];Y=an(he,D,!0,_)&&Y}if(he=_.g=m,Y=an(he,D,!0,_)&&Y,Y=an(he,D,!1,_)&&Y,T)for(te=0;te<T.length;te++)he=_.g=T[te],Y=an(he,D,!1,_)&&Y}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var T=m.g[_],D=0;D<T.length;D++)Sn(T[D]);delete m.g[_],m.h--}}this.F=null},qe.prototype.K=function(m,_,T,D){return this.i.add(String(m),_,!1,T,D)},qe.prototype.L=function(m,_,T,D){return this.i.add(String(m),_,!0,T,D)};function an(m,_,T,D){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var Y=!0,te=0;te<_.length;++te){var he=_[te];if(he&&!he.da&&he.capture==T){var Tt=he.listener,Rn=he.ha||he.src;he.fa&&me(m.i,he),Y=Tt.call(Rn,D)!==!1&&Y}}return Y&&!D.defaultPrevented}function on(m,_,T){if(typeof m=="function")T&&(m=x(m,T));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(m,_||0)}function Ti(m){m.g=on(()=>{m.g=null,m.i&&(m.i=!1,Ti(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class Bs extends J{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ti(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(m){J.call(this),this.h=m,this.g={}}A(yn,J);var rr=[];function An(m){q(m.g,function(_,T){this.g.hasOwnProperty(T)&&zn(_)},m),m.g={}}yn.prototype.N=function(){yn.aa.N.call(this),An(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=d.JSON.stringify,Ee=d.JSON.parse,xe=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function De(){}De.prototype.h=null;function gt(m){return m.h||(m.h=m.i())}function Qe(){}var Ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){ce.call(this,"d")}A(nt,ce);function rt(){ce.call(this,"c")}A(rt,ce);var ke={},Xe=null;function qt(){return Xe=Xe||new qe}ke.La="serverreachability";function bn(m){ce.call(this,ke.La,m)}A(bn,ce);function Se(m){const _=qt();Nt(_,new bn(_))}ke.STAT_EVENT="statevent";function pt(m,_){ce.call(this,ke.STAT_EVENT,m),this.stat=_}A(pt,ce);function ot(m){const _=qt();Nt(_,new pt(_,m))}ke.Ma="timingevent";function He(m,_){ce.call(this,ke.Ma,m),this.size=_}A(He,ce);function Ht(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},_)}function ln(){this.g=!0}ln.prototype.xa=function(){this.g=!1};function gr(m,_,T,D,Y,te){m.info(function(){if(m.g)if(te)for(var he="",Tt=te.split("&"),Rn=0;Rn<Tt.length;Rn++){var et=Tt[Rn].split("=");if(1<et.length){var Fn=et[0];et=et[1];var qn=Fn.split("_");he=2<=qn.length&&qn[1]=="type"?he+(Fn+"="+et+"&"):he+(Fn+"=redacted&")}}else he=null;else he=te;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+_+`
`+T+`
`+he})}function en(m,_,T,D,Y,te,he){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+_+`
`+T+`
`+te+" "+he})}function un(m,_,T,D){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+ir(m,T)+(D?" "+D:"")})}function Si(m,_){m.info(function(){return"TIMEOUT: "+_})}ln.prototype.info=function(){};function ir(m,_){if(!m.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(m=0;m<T.length;m++)if(Array.isArray(T[m])){var D=T[m];if(!(2>D.length)){var Y=D[1];if(Array.isArray(Y)&&!(1>Y.length)){var te=Y[0];if(te!="noop"&&te!="stop"&&te!="close")for(var he=1;he<Y.length;he++)Y[he]=""}}}}return ae(T)}catch{return _}}var kt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function Cr(){}A(Cr,De),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},vr=new Cr;function sr(m,_,T,D){this.j=m,this.i=_,this.l=T,this.R=D||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ss}function ss(){this.i=null,this.g="",this.h=!1}var Rr={},Ir={};function Nr(m,_,T){m.L=1,m.v=to(cn(_)),m.m=T,m.P=!0,Pn(m,null)}function Pn(m,_){m.F=Date.now(),Cn(m),m.A=cn(m.v);var T=m.A,D=m.R;Array.isArray(D)||(D=[String(D)]),ls(T.i,"t",D),m.C=0,T=m.j.J,m.h=new ss,m.g=hf(m.j,T?_:null,!m.m),0<m.O&&(m.M=new Bs(x(m.Y,m,m.g),m.O)),_=m.U,T=m.g,D=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(rr[0]=Y.toString()),Y=rr);for(var te=0;te<Y.length;te++){var he=Kt(T,Y[te],D||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),Se(),gr(m.i,m.u,m.A,m.l,m.R,m.m)}sr.prototype.ca=function(m){m=m.target;const _=this.M;_&&br(m)==3?_.j():this.Y(m)},sr.prototype.Y=function(m){try{if(m==this.g)e:{const qn=br(this.g);var _=this.g.Ba();const Js=this.g.Z();if(!(3>qn)&&(qn!=3||this.g&&(this.h.h||this.g.oa()||io(this.g)))){this.J||qn!=4||_==7||(_==8||0>=Js?Se(3):Se(2)),de(this);var T=this.g.Z();this.X=T;t:if(kr(this)){var D=io(this.g);m="";var Y=D.length,te=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){je(this),Ce(this);var he="";break t}this.h.i=new d.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,m+=this.h.i.decode(D[_],{stream:!(te&&_==Y-1)});D.length=0,this.h.g+=m,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=T==200,en(this.i,this.u,this.A,this.l,this.R,qn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,Rn=this.g;if((Tt=Rn.g?Rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Tt)){var et=Tt;break t}}et=null}if(T=et)un(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,T);else{this.o=!1,this.s=3,ot(12),je(this),Ce(this);break e}}if(this.P){T=!0;let Or;for(;!this.J&&this.C<he.length;)if(Or=ii(this,he),Or==Ir){qn==4&&(this.s=4,ot(14),T=!1),un(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==Rr){this.s=4,ot(15),un(this.i,this.l,he,"[Invalid Chunk]"),T=!1;break}else un(this.i,this.l,Or,null),Ye(this,Or);if(kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qn!=4||he.length!=0||this.h.h||(this.s=1,ot(16),T=!1),this.o=this.o&&T,!T)un(this.i,this.l,he,"[Invalid Chunked Response]"),je(this),Ce(this);else if(0<he.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),zu(Fn),Fn.M=!0,ot(11))}}else un(this.i,this.l,he,null),Ye(this,he);qn==4&&je(this),this.o&&!this.J&&(qn==4?cf(this.j,this):(this.o=!1,Cn(this)))}else rf(this.g),T==400&&0<he.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),je(this),Ce(this)}}}catch{}finally{}};function kr(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ii(m,_){var T=m.C,D=_.indexOf(`
`,T);return D==-1?Ir:(T=Number(_.substring(T,D)),isNaN(T)?Rr:(D+=1,D+T>_.length?Ir:(_=_.slice(D,D+T),m.C=D+T,_)))}sr.prototype.cancel=function(){this.J=!0,je(this)};function Cn(m){m.S=Date.now()+m.I,Ot(m,m.I)}function Ot(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ht(x(m.ba,m),_)}function de(m){m.B&&(d.clearTimeout(m.B),m.B=null)}sr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Si(this.i,this.A),this.L!=2&&(Se(),ot(17)),je(this),this.s=2,Ce(this)):Ot(this,this.S-m)};function Ce(m){m.j.G==0||m.J||cf(m.j,m)}function je(m){de(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,An(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function Ye(m,_){try{var T=m.j;if(T.G!=0&&(T.g==m||si(T.h,m))){if(!m.K&&si(T.h,m)&&T.G==3){try{var D=T.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Y=D;if(Y[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<m.F)Qs(T),Ws(T);else break e;Uu(T),ot(18)}}else T.za=Y[1],0<T.za-T.T&&37500>Y[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ht(x(T.Za,T),6e3));if(1>=Fs(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else cs(T,11)}else if((m.K||T.g==m)&&Qs(T),!j(_))for(Y=T.Da.g.parse(_),_=0;_<Y.length;_++){let et=Y[_];if(T.T=et[0],et=et[1],T.G==2)if(et[0]=="c"){T.K=et[1],T.ia=et[2];const Fn=et[3];Fn!=null&&(T.la=Fn,T.j.info("VER="+T.la));const qn=et[4];qn!=null&&(T.Aa=qn,T.j.info("SVER="+T.Aa));const Js=et[5];Js!=null&&typeof Js=="number"&&0<Js&&(D=1.5*Js,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Or=m.g;if(Or){const oo=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var te=D.h;te.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ai(te,te.h),te.h=null))}if(D.D){const ds=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(D.ya=ds,vt(D.I,D.D,ds))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-m.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var he=m;if(D.qa=ff(D,D.J?D.ia:null,D.W),he.K){ai(D.h,he);var Tt=he,Rn=D.L;Rn&&(Tt.I=Rn),Tt.B&&(de(Tt),Cn(Tt)),D.g=he}else lf(D);0<T.i.length&&ll(T)}else et[0]!="stop"&&et[0]!="close"||cs(T,7);else T.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?cs(T,7):Vu(T):et[0]!="noop"&&T.l&&T.l.ta(et),T.v=0)}}Se(4)}catch{}}var Gt=class{constructor(m,_){this.g=m,this.map=_}};function Ut(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function as(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Fs(m){return m.h?1:m.g?m.g.size:0}function si(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function Ai(m,_){m.g?m.g.add(_):m.h=_}function ai(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}Ut.prototype.cancel=function(){if(this.i=yr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function yr(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const T of m.g.values())_=_.concat(T.D);return _}return O(m.i)}function Jd(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(f(m)){for(var _=[],T=m.length,D=0;D<T;D++)_.push(m[D]);return _}_=[],T=0;for(D in m)_[T++]=m[D];return _}function Hp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(f(m)||typeof m=="string"){var _=[];m=m.length;for(var T=0;T<m;T++)_.push(T);return _}_=[],T=0;for(const D in m)_[T++]=D;return _}}}function tl(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(f(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var T=Hp(m),D=Jd(m),Y=D.length,te=0;te<Y;te++)_.call(void 0,D[te],T&&T[te],m)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nl(m,_){if(m){m=m.split("&");for(var T=0;T<m.length;T++){var D=m[T].indexOf("="),Y=null;if(0<=D){var te=m[T].substring(0,D);Y=m[T].substring(D+1)}else te=m[T];_(te,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function os(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof os){this.h=m.h,qs(this,m.j),this.o=m.o,this.g=m.g,eo(this,m.s),this.l=m.l;var _=m.i,T=new Bi;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),rl(this,T),this.m=m.m}else m&&(_=String(m).match(Du))?(this.h=!1,qs(this,_[1]||"",!0),this.o=Hs(_[2]||""),this.g=Hs(_[3]||"",!0),eo(this,_[4]),this.l=Hs(_[5]||"",!0),rl(this,_[6]||"",!0),this.m=Hs(_[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}os.prototype.toString=function(){var m=[],_=this.j;_&&m.push(oi(_,Ou,!0),":");var T=this.g;return(T||_=="file")&&(m.push("//"),(_=this.o)&&m.push(oi(_,Ou,!0),"@"),m.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&m.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(oi(T,T.charAt(0)=="/"?ju:Zd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",oi(T,Kp)),m.join("")};function cn(m){return new os(m)}function qs(m,_,T){m.j=T?Hs(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function eo(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function rl(m,_,T){_ instanceof Bi?(m.i=_,ef(m.i,m.h)):(T||(_=oi(_,$p)),m.i=new Bi(_,m.h))}function vt(m,_,T){m.i.set(_,T)}function to(m){return vt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Hs(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function oi(m,_,T){return typeof m=="string"?(m=encodeURI(m).replace(_,Gp),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Gp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ou=/[#\/\?@]/g,Zd=/[#\?:]/g,ju=/[#\?]/g,$p=/[#\?@]/g,Kp=/#/g;function Bi(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function Bn(m){m.g||(m.g=new Map,m.h=0,m.i&&nl(m.i,function(_,T){m.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}t=Bi.prototype,t.add=function(m,_){Bn(this),this.i=null,m=Hr(this,m);var T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(_),this.h+=1,this};function il(m,_){Bn(m),_=Hr(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function sl(m,_){return Bn(m),_=Hr(m,_),m.g.has(_)}t.forEach=function(m,_){Bn(this),this.g.forEach(function(T,D){T.forEach(function(Y){m.call(_,Y,D,this)},this)},this)},t.na=function(){Bn(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let D=0;D<_.length;D++){const Y=m[D];for(let te=0;te<Y.length;te++)T.push(_[D])}return T},t.V=function(m){Bn(this);let _=[];if(typeof m=="string")sl(this,m)&&(_=_.concat(this.g.get(Hr(this,m))));else{m=Array.from(this.g.values());for(let T=0;T<m.length;T++)_=_.concat(m[T])}return _},t.set=function(m,_){return Bn(this),this.i=null,m=Hr(this,m),sl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function ls(m,_,T){il(m,_),0<T.length&&(m.i=null,m.g.set(Hr(m,_),O(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var D=_[T];const te=encodeURIComponent(String(D)),he=this.V(D);for(D=0;D<he.length;D++){var Y=te;he[D]!==""&&(Y+="="+encodeURIComponent(String(he[D]))),m.push(Y)}}return this.i=m.join("&")};function Hr(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function ef(m,_){_&&!m.j&&(Bn(m),m.i=null,m.g.forEach(function(T,D){var Y=D.toLowerCase();D!=Y&&(il(this,D),ls(this,Y,T))},m)),m.j=_}function Mu(m,_){const T=new ln;if(d.Image){const D=new Image;D.onload=E(Dr,T,"TestLoadImage: loaded",!0,_,D),D.onerror=E(Dr,T,"TestLoadImage: error",!1,_,D),D.onabort=E(Dr,T,"TestLoadImage: abort",!1,_,D),D.ontimeout=E(Dr,T,"TestLoadImage: timeout",!1,_,D),d.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else _(!1)}function tf(m,_){const T=new ln,D=new AbortController,Y=setTimeout(()=>{D.abort(),Dr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:D.signal}).then(te=>{clearTimeout(Y),te.ok?Dr(T,"TestPingServer: ok",!0,_):Dr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Dr(T,"TestPingServer: error",!1,_)})}function Dr(m,_,T,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(T)}catch{}}function Ci(){this.g=new xe}function Pu(m,_,T){const D=T||"";try{tl(m,function(Y,te){let he=Y;h(Y)&&(he=ae(Y)),_.push(D+te+"="+encodeURIComponent(he))})}catch(Y){throw _.push(D+"type="+encodeURIComponent("_badmap")),Y}}function Fi(m){this.l=m.Ub||null,this.j=m.eb||!1}A(Fi,De),Fi.prototype.g=function(){return new Gr(this.l,this.j)},Fi.prototype.i=(function(m){return function(){return m}})({});function Gr(m,_){qe.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Gr,qe),t=Gr.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,Gs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?qi(this):Gs(this),this.readyState==3&&al(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,qi(this))},t.Qa=function(m){this.g&&(this.response=m,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Gs(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=_.next();return m.join(`\r
`)};function Gs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function no(m){let _="";return q(m,function(T,D){_+=D,_+=":",_+=T,_+=`\r
`}),_}function $s(m,_,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=no(T),typeof m=="string"?T!=null&&encodeURIComponent(String(T)):vt(m,_,T))}function Yt(m){qe.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Yt,qe);var ar=/^https?$/i,us=["POST","PUT"];t=Yt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?gt(this.o):gt(vr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(te){ro(this,te);return}if(m=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)T.set(Y,D[Y]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())T.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),Y=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(us,_,void 0))||D||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,he]of T)this.g.setRequestHeader(te,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ol(this),this.u=!0,this.g.send(m),this.u=!1}catch(te){ro(this,te)}};function ro(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,Ks(m),Ys(m)}function Ks(m){m.A||(m.A=!0,Nt(m,"complete"),Nt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Nt(this,"complete"),Nt(this,"abort"),Ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nf(this):this.bb())},t.bb=function(){nf(this)};function nf(m){if(m.h&&typeof u<"u"&&(!m.v[1]||br(m)!=4||m.Z()!=2)){if(m.u&&br(m)==4)on(m.Ea,0,m);else if(Nt(m,"readystatechange"),br(m)==4){m.h=!1;try{const he=m.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var D;if(D=he===0){var Y=String(m.D).match(Du)[1]||null;!Y&&d.self&&d.self.location&&(Y=d.self.location.protocol.slice(0,-1)),D=!ar.test(Y?Y.toLowerCase():"")}T=D}if(T)Nt(m,"complete"),Nt(m,"success");else{m.m=6;try{var te=2<br(m)?m.g.statusText:""}catch{te=""}m.l=te+" ["+m.Z()+"]",Ks(m)}}finally{Ys(m)}}}}function Ys(m,_){if(m.g){ol(m);const T=m.g,D=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Nt(m,"ready");try{T.onreadystatechange=D}catch{}}}function ol(m){m.I&&(d.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function br(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),Ee(_)}};function io(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function rf(m){const _={};m=(m.g&&2<=br(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(j(m[D]))continue;var T=P(m[D]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=_[Y]||[];_[Y]=te,te.push(T)}C(_,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(m,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||_}function sf(m){this.Aa=0,this.i=[],this.j=new ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,m),this.cb=so("retryDelaySeedMs",1e4,m),this.Wa=so("forwardChannelMaxRetries",2,m),this.wa=so("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ut(m&&m.concurrentRequestLimit),this.Da=new Ci,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sf.prototype,t.la=8,t.G=1,t.connect=function(m,_,T,D){ot(0),this.W=m,this.H=_||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=ff(this,null,this.W),ll(this)};function Vu(m){if(af(m),m.G==3){var _=m.U++,T=cn(m.I);if(vt(T,"SID",m.K),vt(T,"RID",_),vt(T,"TYPE","terminate"),ao(m,T),_=new sr(m,m.j,_),_.L=2,_.v=to(cn(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=hf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Cn(_)}Bu(m)}function Ws(m){m.g&&(zu(m),m.g.cancel(),m.g=null)}function af(m){Ws(m),m.u&&(d.clearTimeout(m.u),m.u=null),Qs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function ll(m){if(!as(m.h)&&!m.s){m.s=!0;var _=m.Ga;re||we(),ue||(re(),ue=!0),_e.add(_,m),m.B=0}}function Yp(m,_){return Fs(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ht(x(m.Ga,m,_),df(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new sr(this,this.j,m);let te=this.o;if(this.S&&(te?(te=S(te),L(te,this.S)):te=this.S),this.m!==null||this.O||(Y.H=te,te=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Lu(this,Y,_),T=cn(this.I),vt(T,"RID",m),vt(T,"CVER",22),this.D&&vt(T,"X-HTTP-Session-Id",this.D),ao(this,T),te&&(this.O?_="headers="+encodeURIComponent(String(no(te)))+"&"+_:this.m&&$s(T,this.m,te)),Ai(this.h,Y),this.Ua&&vt(T,"TYPE","init"),this.P?(vt(T,"$req",_),vt(T,"SID","null"),Y.T=!0,Nr(Y,T,null)):Nr(Y,T,_),this.G=2}}else this.G==3&&(m?of(this,m):this.i.length==0||as(this.h)||of(this))};function of(m,_){var T;_?T=_.l:T=m.U++;const D=cn(m.I);vt(D,"SID",m.K),vt(D,"RID",T),vt(D,"AID",m.T),ao(m,D),m.m&&m.o&&$s(D,m.m,m.o),T=new sr(m,m.j,T,m.B+1),m.m===null&&(T.H=m.o),_&&(m.i=_.D.concat(m.i)),_=Lu(m,T,1e3),T.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ai(m.h,T),Nr(T,D,_)}function ao(m,_){m.H&&q(m.H,function(T,D){vt(_,D,T)}),m.l&&tl({},function(T,D){vt(_,D,T)})}function Lu(m,_,T){T=Math.min(m.i.length,T);var D=m.l?x(m.l.Na,m.l,m):null;e:{var Y=m.i;let te=-1;for(;;){const he=["count="+T];te==-1?0<T?(te=Y[0].g,he.push("ofs="+te)):te=0:he.push("ofs="+te);let Tt=!0;for(let Rn=0;Rn<T;Rn++){let et=Y[Rn].g;const Fn=Y[Rn].map;if(et-=te,0>et)te=Math.max(0,Y[Rn].g-100),Tt=!1;else try{Pu(Fn,he,"req"+et+"_")}catch{D&&D(Fn)}}if(Tt){D=he.join("&");break e}}}return m=m.i.splice(0,T),_.D=m,D}function lf(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;re||we(),ue||(re(),ue=!0),_e.add(_,m),m.v=0}}function Uu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ht(x(m.Fa,m),df(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,uf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ht(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Ws(this),uf(this))};function zu(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function uf(m){m.g=new sr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=cn(m.qa);vt(_,"RID","rpc"),vt(_,"SID",m.K),vt(_,"AID",m.T),vt(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&vt(_,"TO",m.ja),vt(_,"TYPE","xmlhttp"),ao(m,_),m.m&&m.o&&$s(_,m.m,m.o),m.L&&(m.g.I=m.L);var T=m.g;m=m.ia,T.L=1,T.v=to(cn(_)),T.m=null,T.P=!0,Pn(T,m)}t.Za=function(){this.C!=null&&(this.C=null,Ws(this),Uu(this),ot(19))};function Qs(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function cf(m,_){var T=null;if(m.g==_){Qs(m),zu(m),m.g=null;var D=2}else if(si(m.h,_))T=_.D,ai(m.h,_),D=1;else return;if(m.G!=0){if(_.o)if(D==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var Y=m.B;D=qt(),Nt(D,new He(D,T)),ll(m)}else lf(m);else if(Y=_.s,Y==3||Y==0&&0<_.X||!(D==1&&Yp(m,_)||D==2&&Uu(m)))switch(T&&0<T.length&&(_=m.h,_.i=_.i.concat(T)),Y){case 1:cs(m,5);break;case 4:cs(m,10);break;case 3:cs(m,6);break;default:cs(m,2)}}}function df(m,_){let T=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(T*=2),T*_}function cs(m,_){if(m.j.info("Error code "+_),_==2){var T=x(m.fb,m),D=m.Xa;const Y=!D;D=new os(D||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qs(D,"https"),to(D),Y?Mu(D.toString(),T):tf(D.toString(),T)}else ot(2);m.G=0,m.l&&m.l.sa(_),Bu(m),af(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Bu(m){if(m.G=0,m.ka=[],m.l){const _=yr(m.h);(_.length!=0||m.i.length!=0)&&(M(m.ka,_),M(m.ka,m.i),m.h.i.length=0,O(m.i),m.i.length=0),m.l.ra()}}function ff(m,_,T){var D=T instanceof os?cn(T):new os(T);if(D.g!="")_&&(D.g=_+"."+D.g),eo(D,D.s);else{var Y=d.location;D=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var te=new os(null);D&&qs(te,D),_&&(te.g=_),Y&&eo(te,Y),T&&(te.l=T),D=te}return T=m.D,_=m.ya,T&&_&&vt(D,T,_),vt(D,"VER",m.la),ao(m,D),D}function hf(m,_,T){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new Yt(new Fi({eb:T})):new Yt(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mf(){}t=mf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ul(){}ul.prototype.g=function(m,_){return new xr(m,_)};function xr(m,_){qe.call(this),this.g=new sf(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!j(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new Xs(this)}A(xr,qe),xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Vu(this.g)},xr.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.u&&(T={},T.__data__=ae(m),m=T);_.i.push(new Gt(_.Ya++,m)),_.G==3&&ll(_)},xr.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,xr.aa.N.call(this)};function pf(m){nt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const T in _){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}A(pf,nt);function gf(){rt.call(this),this.status=1}A(gf,rt);function Xs(m){this.g=m}A(Xs,mf),Xs.prototype.ua=function(){Nt(this.g,"a")},Xs.prototype.ta=function(m){Nt(this.g,new pf(m))},Xs.prototype.sa=function(m){Nt(this.g,new gf)},Xs.prototype.ra=function(){Nt(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,Z2=function(){return new ul},J2=function(){return qt()},X2=ke,zy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kt.NO_ERROR=0,kt.TIMEOUT=8,kt.HTTP_ERROR=6,em=kt,Dt.COMPLETE="complete",Q2=Dt,Qe.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Mc=Qe,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,W2=Yt}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const B1="@firebase/firestore",F1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new H0("@firebase/firestore");function ql(){return qo.logLevel}function be(t,...e){if(qo.logLevel<=ct.DEBUG){const n=e.map(rb);qo.debug(`Firestore (${Eu}): ${t}`,...n)}}function Vs(t,...e){if(qo.logLevel<=ct.ERROR){const n=e.map(rb);qo.error(`Firestore (${Eu}): ${t}`,...n)}}function La(t,...e){if(qo.logLevel<=ct.WARN){const n=e.map(rb);qo.warn(`Firestore (${Eu}): ${t}`,...n)}}function rb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eC(t,r,n)}function eC(t,e,n){let r=`FIRESTORE (${Eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vs(r),new Error(r)}function At(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||eC(e,s,r)}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fr.UNAUTHENTICATED)))}shutdown(){}}class mP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pP{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){At(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new Ma;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ma,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ma)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At(typeof r.accessToken=="string",31837,{l:r}),new tC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class gP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){At(this.o===void 0,3512);const r=o=>{o.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(At(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new q1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function By(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return tt(r,s);{const o=nC(),u=xP(o.encode(H1(t,n)),o.encode(H1(e,n)));return u!==0?u:tt(r,s)}}n+=r>65535?2:1}return tt(t.length,e.length)}function H1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return tt(t[n],e[n]);return tt(t.length,e.length)}function uu(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="__name__";class Wi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Wi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return tt(e.length,n.length)}static compareSegments(e,n){const r=Wi.isNumericId(e),s=Wi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Wi.extractNumericId(e).compare(Wi.extractNumericId(n)):By(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ja.fromString(e.substring(4,e.length-2))}}class $t extends Wi{construct(e,n,r){return new $t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new $t(n)}static emptyPath(){return new $t([])}}const _P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Wi{construct(e,n,r){return new er(e,n,r)}static isValidIdentifier(e){return _P.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G1}static keyField(){return new er([G1])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ye(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(o(),s++)}if(o(),u)throw new ye(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne($t.fromString(e))}static fromName(e){return new Ne($t.fromString(e).popFirst(5))}static empty(){return new Ne($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new $t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e,n){if(!n)throw new ye(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wP(t,e,n,r){if(e===!0&&r===!0)throw new ye(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $1(t){if(!Ne.isDocumentKey(t))throw new ye(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K1(t){if(Ne.isDocumentKey(t))throw new ye(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function Xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fp(t);throw new ye(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ud(t,e){if(!iC(t))throw new ye(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(s&&typeof u!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ye(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=-62135596800,W1=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W1);return new Jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Y1)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W1}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ud(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Mn("string",Jt._jsonSchemaVersion),seconds:Mn("number"),nanoseconds:Mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Jt(0,0))}static max(){return new Fe(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function EP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Jt(n+1,0):new Jt(n,r));return new Ua(s,Ne.empty(),e)}function TP(t){return new Ua(t.readTime,t.key,vd)}class Ua{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ua(Fe.min(),Ne.empty(),vd)}static max(){return new Ua(Fe.max(),Ne.empty(),vd)}}function SP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==AP)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,r)=>{n(e)}))}static reject(e){return new le(((n,r)=>{r(e)}))}static waitFor(e){return new le(((n,r)=>{let s=0,o=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++o,u&&o===s&&n()}),(f=>r(f)))})),u=!0,o===s&&n()}))}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next((s=>s?le.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new le(((r,s)=>{const o=e.length,u=new Array(o);let d=0;for(let f=0;f<o;f++){const h=f;n(e[h]).next((v=>{u[h]=v,++d,d===o&&r(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new le(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function RP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Su(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}hp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-1;function mp(t){return t==null}function Tm(t){return t===0&&1/t==-1/0}function IP(t){return typeof t=="number"&&Number.isInteger(t)&&!Tm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="";function NP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Q1(e)),e=kP(t.get(n),e);return Q1(e)}function kP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case sC:n+="";break;default:n+=o}}return n}function Q1(t){return t+sC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.comparator=e,this.root=n||Zn.EMPTY}insert(e,n){return new sn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Zn.RED,this.left=s??Zn.EMPTY,this.right=o??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Zn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Zn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J1(this.data.getIterator())}getIteratorFrom(e){return new J1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class J1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new Un(er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oC("Invalid base64 string: "+o):o}})(e);return new tr(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const DP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(t){if(At(!!t,39018),typeof t=="string"){let e=0;const n=DP.exec(t);if(At(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ba(t){return typeof t=="string"?tr.fromBase64String(t):tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="server_timestamp",uC="__type__",cC="__previous_value__",dC="__local_write_time__";function ab(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[uC])===null||n===void 0?void 0:n.stringValue)===lC}function pp(t){const e=t.mapValue.fields[cC];return ab(e)?pp(e):e}function yd(t){const e=za(t.mapValue.fields[dC].timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,s,o,u,d,f,h,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=v}}const Sm="(default)";class bd{constructor(e,n){this.projectId=e,this.database=n||Sm}static empty(){return new bd("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof bd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="__type__",jP="__max__",Eh={mapValue:{}},hC="__vector__",Am="value";function Fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ab(t)?4:PP(t)?9007199254740991:MP(t)?10:11:Ue(28295,{value:t})}function is(t,e){if(t===e)return!0;const n=Fa(t);if(n!==Fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yd(t).isEqual(yd(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=za(s.timestampValue),d=za(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Ba(s.bytesValue).isEqual(Ba(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return En(s.geoPointValue.latitude)===En(o.geoPointValue.latitude)&&En(s.geoPointValue.longitude)===En(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return En(s.integerValue)===En(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=En(s.doubleValue),d=En(o.doubleValue);return u===d?Tm(u)===Tm(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return uu(t.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},d=o.mapValue.fields||{};if(X1(u)!==X1(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!is(u[f],d[f])))return!1;return!0})(t,e);default:return Ue(52216,{left:t})}}function xd(t,e){return(t.values||[]).find((n=>is(n,e)))!==void 0}function cu(t,e){if(t===e)return 0;const n=Fa(t),r=Fa(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=En(o.integerValue||o.doubleValue),f=En(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(t,e);case 3:return Z1(t.timestampValue,e.timestampValue);case 4:return Z1(yd(t),yd(e));case 5:return By(t.stringValue,e.stringValue);case 6:return(function(o,u){const d=Ba(o),f=Ba(u);return d.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),f=u.split("/");for(let h=0;h<d.length&&h<f.length;h++){const v=tt(d[h],f[h]);if(v!==0)return v}return tt(d.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=tt(En(o.latitude),En(u.latitude));return d!==0?d:tt(En(o.longitude),En(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return eT(t.arrayValue,e.arrayValue);case 10:return(function(o,u){var d,f,h,v;const b=o.fields||{},x=u.fields||{},E=(d=b[Am])===null||d===void 0?void 0:d.arrayValue,A=(f=x[Am])===null||f===void 0?void 0:f.arrayValue,O=tt(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:eT(E,A)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Eh.mapValue&&u===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(u===Eh.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),h=u.fields||{},v=Object.keys(h);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const x=By(f[b],v[b]);if(x!==0)return x;const E=cu(d[f[b]],h[v[b]]);if(E!==0)return E}return tt(f.length,v.length)})(t.mapValue,e.mapValue);default:throw Ue(23264,{le:n})}}function Z1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=za(t),r=za(e),s=tt(n.seconds,r.seconds);return s!==0?s:tt(n.nanos,r.nanos)}function eT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=cu(n[s],r[s]);if(o)return o}return tt(n.length,r.length)}function du(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=za(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ba(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Fy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${Fy(n.fields[u])}`;return s+"}"})(t.mapValue):Ue(61005,{value:t})}function tm(t){switch(Fa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pp(t);return e?16+tm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+tm(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Qa(r.fields,((o,u)=>{s+=o.length+tm(u)})),s})(t.mapValue);default:throw Ue(13486,{value:t})}}function tT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qy(t){return!!t&&"integerValue"in t}function ob(t){return!!t&&"arrayValue"in t}function nT(t){return!!t&&"nullValue"in t}function rT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nm(t){return!!t&&"mapValue"in t}function MP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[fC])===null||n===void 0?void 0:n.stringValue)===hC}function Yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qa(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Yc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=er.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=d.popLast()}u?r[d.lastSegment()]=Yc(u):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());nm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qa(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new zr(Yc(this.value))}}function mC(t){const e=[];return Qa(t.fields,((n,r)=>{const s=new er([n]);if(nm(r)){const o=mC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,o,u,d){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hr(e,0,Fe.min(),Fe.min(),Fe.min(),zr.empty(),0)}static newFoundDocument(e,n,r,s){return new hr(e,1,n,Fe.min(),r,s,0)}static newNoDocument(e,n){return new hr(e,2,n,Fe.min(),Fe.min(),zr.empty(),0)}static newUnknownDocument(e,n){return new hr(e,3,n,Fe.min(),Fe.min(),zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.position=e,this.inclusive=n}}function iT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(u.referenceValue),n.key):r=cu(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n="asc"){this.field=e,this.dir=n}}function VP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{}class jn extends pC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UP(e,n,r):n==="array-contains"?new FP(e,r):n==="in"?new qP(e,r):n==="not-in"?new HP(e,r):n==="array-contains-any"?new GP(e,r):new jn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zP(e,r):new BP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cu(n,this.value)):n!==null&&Fa(this.value)===Fa(n)&&this.matchesComparison(cu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends pC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ui(e,n)}matches(e){return gC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gC(t){return t.op==="and"}function vC(t){return LP(t)&&gC(t)}function LP(t){for(const e of t.filters)if(e instanceof Ui)return!1;return!0}function Hy(t){if(t instanceof jn)return t.field.canonicalString()+t.op.toString()+du(t.value);if(vC(t))return t.filters.map((e=>Hy(e))).join(",");{const e=t.filters.map((n=>Hy(n))).join(",");return`${t.op}(${e})`}}function yC(t,e){return t instanceof jn?(function(r,s){return s instanceof jn&&r.op===s.op&&r.field.isEqual(s.field)&&is(r.value,s.value)})(t,e):t instanceof Ui?(function(r,s){return s instanceof Ui&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,u,d)=>o&&yC(u,s.filters[d])),!0):!1})(t,e):void Ue(19439)}function bC(t){return t instanceof jn?(function(n){return`${n.field.canonicalString()} ${n.op} ${du(n.value)}`})(t):t instanceof Ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(bC).join(" ,")+"}"})(t):"Filter"}class UP extends jn{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class zP extends jn{constructor(e,n){super(e,"in",n),this.keys=xC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BP extends jn{constructor(e,n){super(e,"not-in",n),this.keys=xC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ne.fromName(r.referenceValue)))}class FP extends jn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ob(n)&&xd(n.arrayValue,this.value)}}class qP extends jn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xd(this.value.arrayValue,n)}}class HP extends jn{constructor(e,n){super(e,"not-in",n)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xd(this.value.arrayValue,n)}}class GP extends jn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ob(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n=null,r=[],s=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=d,this.Pe=null}}function aT(t,e=null,n=[],r=[],s=null,o=null,u=null){return new $P(t,e,n,r,s,o,u)}function lb(t){const e=$e(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Hy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),mp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>du(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>du(r))).join(",")),e.Pe=n}return e.Pe}function ub(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sT(t.startAt,e.startAt)&&sT(t.endAt,e.endAt)}function Gy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n=null,r=[],s=[],o=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function KP(t,e,n,r,s,o,u,d){return new zd(t,e,n,r,s,o,u,d)}function gp(t){return new zd(t)}function oT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _C(t){return t.collectionGroup!==null}function Wc(t){const e=$e(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Un(er.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Rm(o,r))})),n.has(er.keyField().canonicalString())||e.Te.push(new Rm(er.keyField(),r))}return e.Te}function Ji(t){const e=$e(t);return e.Ie||(e.Ie=YP(e,Wc(t))),e.Ie}function YP(t,e){if(t.limitType==="F")return aT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Rm(s.field,o)}));const n=t.endAt?new Cm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cm(t.startAt.position,t.startAt.inclusive):null;return aT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $y(t,e){const n=t.filters.concat([e]);return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ky(t,e,n){return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vp(t,e){return ub(Ji(t),Ji(e))&&t.limitType===e.limitType}function wC(t){return`${lb(Ji(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>bC(s))).join(", ")}]`),mp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>du(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>du(s))).join(",")),`Target(${r})`})(Ji(t))}; limitType=${t.limitType})`}function yp(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Wc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const h=iT(u,d,f);return u.inclusive?h<=0:h<0})(r.startAt,Wc(r),s)||r.endAt&&!(function(u,d,f){const h=iT(u,d,f);return u.inclusive?h>=0:h>0})(r.endAt,Wc(r),s))})(t,e)}function WP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EC(t){return(e,n)=>{let r=!1;for(const s of Wc(t)){const o=QP(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(o,u,d){const f=u.data.field(o),h=d.data.field(o);return f!==null&&h!==null?cu(f,h):Ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return aC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new sn(Ne.comparator);function Ls(){return XP}const TC=new sn(Ne.comparator);function Pc(...t){let e=TC;for(const n of t)e=e.insert(n.key,n);return e}function SC(t){let e=TC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Do(){return Qc()}function AC(){return Qc()}function Qc(){return new Wo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const JP=new sn(Ne.comparator),ZP=new Un(Ne.comparator);function dt(...t){let e=ZP;for(const n of t)e=e.add(n);return e}const e3=new Un(tt);function t3(){return e3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tm(e)?"-0":e}}function CC(t){return{integerValue:""+t}}function n3(t,e){return IP(e)?CC(e):cb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this._=void 0}}function r3(t,e,n){return t instanceof Im?(function(s,o){const u={fields:{[uC]:{stringValue:lC},[dC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ab(o)&&(o=pp(o)),o&&(u.fields[cC]=o),{mapValue:u}})(n,e):t instanceof _d?IC(t,e):t instanceof wd?NC(t,e):(function(s,o){const u=RC(s,o),d=lT(u)+lT(s.Ee);return qy(u)&&qy(s.Ee)?CC(d):cb(s.serializer,d)})(t,e)}function i3(t,e,n){return t instanceof _d?IC(t,e):t instanceof wd?NC(t,e):n}function RC(t,e){return t instanceof Nm?(function(r){return qy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Im extends bp{}class _d extends bp{constructor(e){super(),this.elements=e}}function IC(t,e){const n=kC(e);for(const r of t.elements)n.some((s=>is(s,r)))||n.push(r);return{arrayValue:{values:n}}}class wd extends bp{constructor(e){super(),this.elements=e}}function NC(t,e){let n=kC(e);for(const r of t.elements)n=n.filter((s=>!is(s,r)));return{arrayValue:{values:n}}}class Nm extends bp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lT(t){return En(t.integerValue||t.doubleValue)}function kC(t){return ob(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s3(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof _d&&s instanceof _d||r instanceof wd&&s instanceof wd?uu(r.elements,s.elements,is):r instanceof Nm&&s instanceof Nm?is(r.Ee,s.Ee):r instanceof Im&&s instanceof Im})(t.transform,e.transform)}class a3{constructor(e,n){this.version=e,this.transformResults=n}}class Li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xp{}function DC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new db(t.key,Li.none()):new Bd(t.key,t.data,Li.none());{const n=t.data,r=zr.empty();let s=new Un(er.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Xa(t.key,r,new Zr(s.toArray()),Li.none())}}function o3(t,e,n){t instanceof Bd?(function(s,o,u){const d=s.value.clone(),f=cT(s.fieldTransforms,o,u.transformResults);d.setAll(f),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Xa?(function(s,o,u){if(!rm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const d=cT(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(OC(s)),f.setAll(d),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Xc(t,e,n,r){return t instanceof Bd?(function(o,u,d,f){if(!rm(o.precondition,u))return d;const h=o.value.clone(),v=dT(o.fieldTransforms,f,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xa?(function(o,u,d,f){if(!rm(o.precondition,u))return d;const h=dT(o.fieldTransforms,f,u),v=u.data;return v.setAll(OC(o)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(o,u,d){return rm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function l3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=RC(r.transform,s||null);o!=null&&(n===null&&(n=zr.empty()),n.set(r.field,o))}return n||null}function uT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uu(r,s,((o,u)=>s3(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bd extends xp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xa extends xp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function cT(t,e,n){const r=new Map;At(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,d=e.data.field(o.field);r.set(o.field,i3(u,d,n[s]))}return r}function dT(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,r3(o,u,e))}return r}class db extends xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u3 extends xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&o3(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AC();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=n.has(s.key)?null:d;const f=DC(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),dt())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,((n,r)=>uT(n,r)))&&uu(this.baseMutations,e.baseMutations,((n,r)=>uT(n,r)))}}class fb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){At(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return JP})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new fb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var On,mt;function h3(t){switch(t){case oe.OK:return Ue(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function jC(t){if(t===void 0)return Vs("GRPC error has no .code"),oe.UNKNOWN;switch(t){case On.OK:return oe.OK;case On.CANCELLED:return oe.CANCELLED;case On.UNKNOWN:return oe.UNKNOWN;case On.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case On.INTERNAL:return oe.INTERNAL;case On.UNAVAILABLE:return oe.UNAVAILABLE;case On.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case On.NOT_FOUND:return oe.NOT_FOUND;case On.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case On.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case On.ABORTED:return oe.ABORTED;case On.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case On.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case On.DATA_LOSS:return oe.DATA_LOSS;default:return Ue(39323,{code:t})}}(mt=On||(On={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=new ja([4294967295,4294967295],0);function fT(t){const e=nC().encode(t),n=new Y2;return n.update(e),new Uint8Array(n.digest())}function hT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ja([n,r],0),new ja([s,o],0)]}class hb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(r<0)throw new Vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ja.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ja.fromNumber(r)));return s.compare(m3)===1&&(s=new ja([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=fT(e),[r,s]=hT(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);if(!this.ye(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new hb(o,s,n);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const n=fT(e),[r,s]=hT(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);this.we(u)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _p(Fe.min(),s,new sn(tt),Ls(),dt())}}class Fd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fd(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class MC{constructor(e,n){this.targetId=e,this.De=n}}class PC{constructor(e,n,r=tr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mT{constructor(){this.ve=0,this.Ce=pT(),this.Fe=tr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dt(),n=dt(),r=dt();return this.Ce.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue(38017,{changeType:o})}})),new Fd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=pT()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class p3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ls(),this.je=Th(),this.Je=Th(),this.He=new sn(tt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const o=s.target;if(Gy(o))if(r===0){const u=new Ne(o.path);this.Xe(n,u,hr.newNoDocument(u,Fe.min()))}else At(r===1,20013,{expectedCount:r});else{const u=this.ot(n);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,d;try{u=Ba(r).toUint8Array()}catch(f){if(f instanceof oC)return La("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new hb(u,s,o)}catch(f){return La(f instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,o,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((o,u)=>{const d=this.st(u);if(d){if(o.current&&Gy(d.target)){const f=new Ne(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,hr.newNoDocument(f,e))}o.Ne&&(n.set(u,o.Le()),o.ke())}}));let r=dt();this.Je.forEach(((o,u)=>{let d=!0;u.forEachWhile((f=>{const h=this.st(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.ze.forEach(((o,u)=>u.setReadTime(e)));const s=new _p(e,n,this.He,this.ze,r);return this.ze=Ls(),this.je=Th(),this.Je=Th(),this.He=new sn(tt),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mT,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Un(tt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Un(tt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mT),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Th(){return new sn(Ne.comparator)}function pT(){return new sn(Ne.comparator)}const g3={asc:"ASCENDING",desc:"DESCENDING"},v3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y3={and:"AND",or:"OR"};class b3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yy(t,e){return t.useProto3Json||mp(e)?e:{value:e}}function km(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function x3(t,e){return km(t,e.toTimestamp())}function Zi(t){return At(!!t,49232),Fe.fromTimestamp((function(n){const r=za(n);return new Jt(r.seconds,r.nanos)})(t))}function mb(t,e){return Wy(t,e).canonicalString()}function Wy(t,e){const n=(function(s){return new $t(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function LC(t){const e=$t.fromString(t);return At(qC(e),10190,{key:e.toString()}),e}function Qy(t,e){return mb(t.databaseId,e.path)}function ny(t,e){const n=LC(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(zC(n))}function UC(t,e){return mb(t.databaseId,e)}function _3(t){const e=LC(t);return e.length===4?$t.emptyPath():zC(e)}function Xy(t){return new $t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zC(t){return At(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gT(t,e,n){return{name:Qy(t,e),fields:n.value.mapValue.fields}}function w3(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ue(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(h,v){return h.useProto3Json?(At(v===void 0||typeof v=="string",58123),tr.fromBase64String(v||"")):(At(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),tr.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?oe.UNKNOWN:jC(h.code);return new ye(v,h.message||"")})(u);n=new PC(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ny(t,r.document.name),o=Zi(r.document.updateTime),u=r.document.createTime?Zi(r.document.createTime):Fe.min(),d=new zr({mapValue:{fields:r.document.fields}}),f=hr.newFoundDocument(s,o,u,d),h=r.targetIds||[],v=r.removedTargetIds||[];n=new im(h,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ny(t,r.document),o=r.readTime?Zi(r.readTime):Fe.min(),u=hr.newNoDocument(s,o),d=r.removedTargetIds||[];n=new im([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ny(t,r.document),o=r.removedTargetIds||[];n=new im([],o,s,null)}else{if(!("filter"in e))return Ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new f3(s,o),d=r.targetId;n=new MC(d,u)}}return n}function E3(t,e){let n;if(e instanceof Bd)n={update:gT(t,e.key,e.value)};else if(e instanceof db)n={delete:Qy(t,e.key)};else if(e instanceof Xa)n={update:gT(t,e.key,e.data),updateMask:D3(e.fieldMask)};else{if(!(e instanceof u3))return Ue(16599,{Rt:e.type});n={verify:Qy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof Im)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _d)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nm)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ue(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:x3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)})(t,e.precondition)),n}function T3(t,e){return t&&t.length>0?(At(e!==void 0,14353),t.map((n=>(function(s,o){let u=s.updateTime?Zi(s.updateTime):Zi(o);return u.isEqual(Fe.min())&&(u=Zi(o)),new a3(u,s.transformResults||[])})(n,e)))):[]}function S3(t,e){return{documents:[UC(t,e.path)]}}function A3(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UC(t,s);const o=(function(h){if(h.length!==0)return FC(Ui.create(h,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(h){if(h.length!==0)return h.map((v=>(function(x){return{field:Gl(x.field),direction:I3(x.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Yy(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function C3(t){let e=_3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){At(r===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=(function(b){const x=BC(b);return x instanceof Ui&&vC(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(A){return new Rm($l(A.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(x)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let x;return x=typeof b=="object"?b.value:b,mp(x)?null:x})(n.limit));let f=null;n.startAt&&(f=(function(b){const x=!!b.before,E=b.values||[];return new Cm(E,x)})(n.startAt));let h=null;return n.endAt&&(h=(function(b){const x=!b.before,E=b.values||[];return new Cm(E,x)})(n.endAt)),KP(e,s,u,o,d,"F",f,h)}function R3(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$l(n.unaryFilter.field);return jn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$l(n.unaryFilter.field);return jn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$l(n.unaryFilter.field);return jn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$l(n.unaryFilter.field);return jn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return jn.create($l(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ui.create(n.compositeFilter.filters.map((r=>BC(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(n.compositeFilter.op))})(t):Ue(30097,{filter:t})}function I3(t){return g3[t]}function N3(t){return v3[t]}function k3(t){return y3[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function $l(t){return er.fromServerFormat(t.fieldPath)}function FC(t){return t instanceof jn?(function(n){if(n.op==="=="){if(rT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(nT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(nT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:N3(n.op),value:n.value}}})(t):t instanceof Ui?(function(n){const r=n.getFilters().map((s=>FC(s)));return r.length===1?r[0]:{compositeFilter:{op:k3(n.op),filters:r}}})(t):Ue(54877,{filter:t})}function D3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,s,o=Fe.min(),u=Fe.min(),d=tr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.gt=e}}function j3(t){const e=C3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ky(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.Dn=new P3}addToCollectionParentIndex(e,n){return this.Dn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Ua.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class P3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Un($t.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Un($t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HC=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(HC,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fu(0)}static ur(){return new fu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",V3=1048576;function bT([t,e],[n,r]){const s=tt(t,n);return s===0?tt(e,r):s}class L3{constructor(e){this.Tr=e,this.buffer=new Un(bT),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){be(yT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Su(n)?be(yT,"Ignoring IndexedDB error during garbage collection: ",n):await Tu(n)}await this.Rr(3e5)}))}}class z3{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(hp.ue);const r=new L3(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(vT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,o,u,d,f,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,u=Date.now(),this.nthSequenceNumber(e,s)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,n)))).next((b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(h=Date.now(),ql()<=ct.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${b} documents in `+(h-f)+`ms
Total Duration: ${h-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function B3(t,e){return new z3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.changes=new Wo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Xc(r.mutation,s,Zr.empty(),Jt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,dt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=dt()){const s=Do();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let u=Pc();return o.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Do();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,dt())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,r,s){let o=Ls();const u=Qc(),d=(function(){return Qc()})();return n.forEach(((f,h)=>{const v=r.get(h.key);s.has(h.key)&&(v===void 0||v.mutation instanceof Xa)?o=o.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),Xc(v.mutation,h,v.mutation.getFieldMask(),Jt.now())):u.set(h.key,Zr.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((h,v)=>u.set(h,v))),n.forEach(((h,v)=>{var b;return d.set(h,new q3(v,(b=u.get(h))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,n){const r=Qc();let s=new sn(((u,d)=>u-d)),o=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let v=r.get(f)||Zr.empty();v=d.applyToLocalView(h,v),r.set(f,v);const b=(s.get(d.batchId)||dt()).add(f);s=s.insert(d.batchId,b)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,v=f.value,b=AC();v.forEach((x=>{if(!o.has(x)){const E=DC(n.get(x),r.get(x));E!==null&&b.set(x,E),o=o.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,b))}return le.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_C(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):le.resolve(Do());let d=vd,f=o;return u.next((h=>le.forEach(h,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{f=f.insert(v,x)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,f,h,dt()))).next((v=>({batchId:d,changes:SC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((r=>{let s=Pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=Pc();return this.indexManager.getCollectionParents(e,o).next((d=>le.forEach(d,(f=>{const h=(function(b,x){return new zd(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((v=>{v.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((u=>{o.forEach(((f,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,hr.newInvalidDocument(v)))}));let d=Pc();return u.forEach(((f,h)=>{const v=o.get(f);v!==void 0&&Xc(v.mutation,h,Zr.empty(),Jt.now()),yp(n,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return le.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Zi(s.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:j3(s.bundledQuery),readTime:Zi(s.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.overlays=new sn(Ne.comparator),this.kr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Do();return le.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.wt(e,n,o)})),le.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const s=Do(),o=n.length+1,u=new Ne(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return le.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new sn(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let v=o.get(h.largestBatchId);v===null&&(v=Do(),o=o.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=Do(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=s)););return le.resolve(d)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new d3(n,r));let o=this.kr.get(n);o===void 0&&(o=dt(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.qr=new Un($n.Qr),this.$r=new Un($n.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new $n(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new $n(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new Ne(new $t([])),r=new $n(n,e),s=new $n(n,e+1),o=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),o.push(u.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new $t([])),r=new $n(n,e),s=new $n(n,e+1);let o=dt();return this.$r.forEachInRange([r,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new $n(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||tt(e.Hr,n.Hr)}static Ur(e,n){return tt(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Un($n.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new c3(o,n,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new $n(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),o=s<0?0:s;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?sb:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $n(n,0),s=new $n(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);o.push(d)})),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(tt);return n.forEach((s=>{const o=new $n(s,0),u=new $n(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,u],(d=>{r=r.add(d.Hr)}))})),le.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const u=new $n(new Ne(o),0);let d=new Un(tt);return this.Yr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(d=d.add(f.Hr)),!0)}),u),le.resolve(this.ei(d))}ei(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){At(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return le.forEach(n.mutations,(s=>{const o=new $n(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new $n(n,0),s=this.Yr.firstAfterOrEqual(r);return le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.ni=e,this.docs=(function(){return new sn(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():hr.newInvalidDocument(s))})),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ls();const u=n.path,d=new Ne(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:v}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||SP(TP(v),r)<=0||(s.has(v.key)||yp(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ue(9500)}ri(e,n){return le.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Q3(this)}getSize(e){return le.resolve(this.size)}}class Q3 extends F3{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),le.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.persistence=e,this.ii=new Wo((n=>lb(n)),ub),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new pb,this.targetCount=0,this._i=fu.ar()}forEachTarget(e,n){return this.ii.forEach(((r,s)=>n(s))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),le.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new fu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.hr(n),le.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.ii.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),le.waitFor(o).next((()=>s))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),le.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),le.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.ai={},this.overlays={},this.ui=new hp(0),this.ci=!1,this.ci=!0,this.li=new K3,this.referenceDelegate=e(this),this.hi=new X3(this),this.indexManager=new M3,this.remoteDocumentCache=(function(s){return new W3(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new O3(n),this.Ti=new G3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Y3(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const s=new J3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,n){return le.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class J3 extends CP{constructor(e){super(),this.currentSequenceNumber=e}}class gb{constructor(e){this.persistence=e,this.Ai=new pb,this.Ri=null}static Vi(e){return new gb(e)}get mi(){if(this.Ri)return this.Ri;throw Ue(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.mi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,(r=>{const s=Ne.fromPath(r);return this.fi(e,s).next((o=>{o||n.removeEntry(s,Fe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return le.or([()=>le.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Dm{constructor(e,n){this.persistence=e,this.gi=new Wo((r=>NP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=B3(this,n)}static Vi(e,n){return new Dm(e,n)}Ii(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return le.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((o=>o?le.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,n).next((d=>{d||(r++,o.removeEntry(u,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tm(e.data.value)),n}Sr(e,n,r){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return le.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=dt(),s=dt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new vb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return DO()?8:RP(pr())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ps(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ys(e,n,s,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new Z3;return this.ws(e,n,u).next((d=>{if(o.result=d,this.Rs)return this.Ss(e,n,u,d.size)}))})).next((()=>o.result))}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ql()<=ct.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(ql()<=ct.DEBUG&&be("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ql()<=ct.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):le.resolve())}ps(e,n){if(oT(n))return le.resolve(null);let r=Ji(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ky(n,null,"F"),r=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=dt(...o);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.bs(n,d);return this.Ds(n,h,u,f.readTime)?this.ps(e,Ky(n,null,"F")):this.vs(e,h,n,f)}))))})))))}ys(e,n,r,s){return oT(n)||s.isEqual(Fe.min())?le.resolve(null):this.gs.getDocuments(e,r).next((o=>{const u=this.bs(n,o);return this.Ds(n,u,r,s)?le.resolve(null):(ql()<=ct.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hl(n)),this.vs(e,u,n,EP(s,vd)).next((d=>d)))}))}bs(e,n){let r=new Un(EC(e));return n.forEach(((s,o)=>{yp(e,o)&&(r=r.add(o))})),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,r){return ql()<=ct.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.gs.getDocumentsMatchingQuery(e,n,Ua.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="LocalStore",tV=3e8;class nV{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new sn(tt),this.Ms=new Wo((o=>lb(o)),ub),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function rV(t,e,n,r){return new nV(t,e,n,r)}async function $C(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let f=dt();for(const h of s){u.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}for(const h of o){d.push(h.batchId);for(const v of h.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Bs:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function iV(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,v){const b=h.batch,x=b.keys();let E=le.resolve();return x.forEach((A=>{E=E.next((()=>v.getEntry(f,A))).next((O=>{const M=h.docVersions.get(A);At(M!==null,48541),O.version.compareTo(M)<0&&(b.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),v.addEntry(O)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(f,b)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=dt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function KC(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function sV(t,e){const n=$e(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const d=[];e.targetChanges.forEach(((v,b)=>{const x=s.get(b);if(!x)return;d.push(n.hi.removeMatchingKeys(o,v.removedDocuments,b).next((()=>n.hi.addMatchingKeys(o,v.addedDocuments,b))));let E=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(tr.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,r)),s=s.insert(b,E),(function(O,M,U){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=tV?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,E,v)&&d.push(n.hi.updateTargetData(o,E))}));let f=Ls(),h=dt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))})),d.push(aV(o,u,e.documentUpdates).next((v=>{f=v.Ls,h=v.ks}))),!r.isEqual(Fe.min())){const v=n.hi.getLastRemoteSnapshotVersion(o).next((b=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(v)}return le.waitFor(d).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,h))).next((()=>f))})).then((o=>(n.Fs=s,o)))}function aV(t,e,n){let r=dt(),s=dt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=Ls();return n.forEach(((d,f)=>{const h=o.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Fe.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):be(yb,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function oV(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sb),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function lV(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,e).next((o=>o?(s=o,le.resolve(s)):n.hi.allocateTargetId(r).next((u=>(s=new Na(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function Jy(t,e,n){const r=$e(t),s=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Su(u))throw u;be(yb,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function xT(t,e,n){const r=$e(t);let s=Fe.min(),o=dt();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,h,v){const b=$e(f),x=b.Ms.get(v);return x!==void 0?le.resolve(b.Fs.get(x)):b.hi.getTargetData(h,v)})(r,u,Ji(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{o=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,n?s:Fe.min(),n?o:dt()))).next((d=>(uV(r,WP(e),d),{documents:d,qs:o})))))}function uV(t,e,n){let r=t.xs.get(e)||Fe.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.xs.set(e,r)}class _T{constructor(){this.activeTargetIds=t3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cV{constructor(){this.Fo=new _T,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _T,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class ET{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){be(wT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){be(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Zy(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="RestConnection",fV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Sm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,o){const u=Zy(),d=this.Go(e,n.toUriEncodedString());be(ry,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,o);const{host:h}=new URL(d),v=zs(h);return this.jo(e,d,f,r,v).then((b=>(be(ry,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw La(ry,`RPC '${e}' ${u} failed with error: `,b,"url: ",d,"request:",r),b}))}Jo(e,n,r,s,o,u){return this.Wo(e,n,r,s,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Eu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Go(e,n){const r=fV[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="WebChannelConnection";class pV extends hV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,o){const u=Zy();return new Promise(((d,f)=>{const h=new W2;h.setWithCredentials(!0),h.listenOnce(Q2.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case em.NO_ERROR:const b=h.getResponseJson();be(lr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case em.TIMEOUT:be(lr,`RPC '${e}' ${u} timed out`),f(new ye(oe.DEADLINE_EXCEEDED,"Request time out"));break;case em.HTTP_ERROR:const x=h.getStatus();if(be(lr,`RPC '${e}' ${u} failed with status:`,x,"response text:",h.getResponseText()),x>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const O=(function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(j)>=0?j:oe.UNKNOWN})(A.status);f(new ye(O,A.message))}else f(new ye(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ye(oe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{c_:e,streamId:u,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{be(lr,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);be(lr,`RPC '${e}' ${u} sending request:`,s),h.send(n,"POST",v,r,15)}))}P_(e,n,r){const s=Zy(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Z2(),d=J2(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=o.join("");be(lr,`Creating RPC '${e}' stream ${s}: ${v}`,f);const b=u.createWebChannel(v,f);this.T_(b);let x=!1,E=!1;const A=new mV({Ho:M=>{E?be(lr,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(x||(be(lr,`Opening RPC '${e}' stream ${s} transport.`),b.open(),x=!0),be(lr,`RPC '${e}' stream ${s} sending:`,M),b.send(M))},Yo:()=>b.close()}),O=(M,U,j)=>{M.listen(U,(z=>{try{j(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return O(b,Mc.EventType.OPEN,(()=>{E||(be(lr,`RPC '${e}' stream ${s} transport opened.`),A.s_())})),O(b,Mc.EventType.CLOSE,(()=>{E||(E=!0,be(lr,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(b))})),O(b,Mc.EventType.ERROR,(M=>{E||(E=!0,La(lr,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),A.__(new ye(oe.UNAVAILABLE,"The operation could not be completed")))})),O(b,Mc.EventType.MESSAGE,(M=>{var U;if(!E){const j=M.data[0];At(!!j,16349);const z=j,H=(z==null?void 0:z.error)||((U=z[0])===null||U===void 0?void 0:U.error);if(H){be(lr,`RPC '${e}' stream ${s} received error:`,H);const G=H.status;let q=(function(I){const L=On[I];if(L!==void 0)return jC(L)})(G),C=H.message;q===void 0&&(q=oe.INTERNAL,C="Unknown error status: "+G+" with message "+H.message),E=!0,A.__(new ye(q,C)),b.close()}else be(lr,`RPC '${e}' stream ${s} received:`,j),A.a_(j)}})),O(d,X2.STAT_EVENT,(M=>{M.stat===zy.PROXY?be(lr,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===zy.NOPROXY&&be(lr,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.o_()}),0),A}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function iy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t){return new b3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class WC{constructor(e,n,r,s,o,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new YC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Vs(n.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{e((()=>{const s=new ye(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return be(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(be(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gV extends WC{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=w3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Fe.min():u.readTime?Zi(u.readTime):Fe.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Xy(this.serializer),n.addTarget=(function(o,u){let d;const f=u.target;if(d=Gy(f)?{documents:S3(o,f)}:{query:A3(o,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=VC(o,u.resumeToken);const h=Yy(o,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Fe.min())>0){d.readTime=km(o,u.snapshotVersion.toTimestamp());const h=Yy(o,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=R3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Xy(this.serializer),n.removeTarget=e,this.k_(n)}}class vV extends WC{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=T3(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Xy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>E3(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{}class bV extends yV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Wo(e,Wy(n,r),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(oe.UNKNOWN,o.toString())}))}Jo(e,n,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Wy(n,r),s,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(oe.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class xV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vs(n),this._a=!1):be("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class _V{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Qo(this)&&(be(Ho,"Restarting streams for network reachability change."),await(async function(f){const h=$e(f);h.Ia.add(4),await qd(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Ep(h)})(this))}))})),this.Aa=new xV(r,s)}}async function Ep(t){if(Qo(t))for(const e of t.da)await e(!0)}async function qd(t){for(const e of t.da)await e(!1)}function QC(t,e){const n=$e(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),wb(n)?_b(n):Au(n).x_()&&xb(n,e))}function bb(t,e){const n=$e(t),r=Au(n);n.Ta.delete(e),r.x_()&&XC(n,e),n.Ta.size===0&&(r.x_()?r.B_():Qo(n)&&n.Aa.set("Unknown"))}function xb(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Au(t).H_(e)}function XC(t,e){t.Ra.$e(e),Au(t).Y_(e)}function _b(t){t.Ra=new p3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Au(t).start(),t.Aa.aa()}function wb(t){return Qo(t)&&!Au(t).M_()&&t.Ta.size>0}function Qo(t){return $e(t).Ia.size===0}function JC(t){t.Ra=void 0}async function wV(t){t.Aa.set("Online")}async function EV(t){t.Ta.forEach(((e,n)=>{xb(t,e)}))}async function TV(t,e){JC(t),wb(t)?(t.Aa.la(e),_b(t)):t.Aa.set("Unknown")}async function SV(t,e,n){if(t.Aa.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const d of o.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(t,e)}catch(r){be(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Om(t,r)}else if(e instanceof im?t.Ra.Ye(e):e instanceof MC?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Fe.min()))try{const r=await KC(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const d=o.Ra.Pt(u);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.Ta.get(h);v&&o.Ta.set(h,v.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,h)=>{const v=o.Ta.get(f);if(!v)return;o.Ta.set(f,v.withResumeToken(tr.EMPTY_BYTE_STRING,v.snapshotVersion)),XC(o,f);const b=new Na(v.target,f,h,v.sequenceNumber);xb(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){be(Ho,"Failed to raise snapshot:",r),await Om(t,r)}}async function Om(t,e,n){if(!Su(e))throw e;t.Ia.add(1),await qd(t),t.Aa.set("Offline"),n||(n=()=>KC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be(Ho,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ep(t)}))}function ZC(t,e){return e().catch((n=>Om(t,n,e)))}async function Tp(t){const e=$e(t),n=qa(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:sb;for(;AV(e);)try{const s=await oV(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,CV(e,s)}catch(s){await Om(e,s)}eR(e)&&tR(e)}function AV(t){return Qo(t)&&t.Pa.length<10}function CV(t,e){t.Pa.push(e);const n=qa(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function eR(t){return Qo(t)&&!qa(t).M_()&&t.Pa.length>0}function tR(t){qa(t).start()}async function RV(t){qa(t).na()}async function IV(t){const e=qa(t);for(const n of t.Pa)e.X_(n.mutations)}async function NV(t,e,n){const r=t.Pa.shift(),s=fb.from(r,e,n);await ZC(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Tp(t)}async function kV(t,e){e&&qa(t).Z_&&await(async function(r,s){if((function(u){return h3(u)&&u!==oe.ABORTED})(s.code)){const o=r.Pa.shift();qa(r).N_(),await ZC(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Tp(r)}})(t,e),eR(t)&&tR(t)}async function ST(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),be(Ho,"RemoteStore received new credentials");const r=Qo(n);n.Ia.add(3),await qd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ep(n)}async function DV(t,e){const n=$e(t);e?(n.Ia.delete(2),await Ep(n)):e||(n.Ia.add(2),await qd(n),n.Aa.set("Unknown"))}function Au(t){return t.Va||(t.Va=(function(n,r,s){const o=$e(n);return o.ia(),new gV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:wV.bind(null,t),e_:EV.bind(null,t),n_:TV.bind(null,t),J_:SV.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),wb(t)?_b(t):t.Aa.set("Unknown")):(await t.Va.stop(),JC(t))}))),t.Va}function qa(t){return t.ma||(t.ma=(function(n,r,s){const o=$e(n);return o.ia(),new vV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:RV.bind(null,t),n_:kV.bind(null,t),ea:IV.bind(null,t),ta:NV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Tp(t)):(await t.ma.stop(),t.Pa.length>0&&(be(Ho,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,d=new Eb(e,n,u,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tb(t,e){if(Vs("AsyncQueue",`${e}: ${t}`),Su(t))return new ye(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{static emptySet(e){return new ru(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=Pc(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.fa=new sn(Ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class hu{constructor(e,n,r,s,o,u,d,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new hu(e,n,ru.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class jV{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=$e(n),o=s.queries;s.queries=CT(),o.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new ye(oe.ABORTED,"Firestore shutting down"))}}function CT(){return new Wo((t=>wC(t)),vp)}async function nR(t,e){const n=$e(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new OV,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=Tb(u,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Sb(n)}async function rR(t,e){const n=$e(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.wa.indexOf(e);u>=0&&(o.wa.splice(u,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MV(t,e){const n=$e(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&Sb(n)}function PV(t,e,n){const r=$e(t),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(n);r.queries.delete(e)}function Sb(t){t.Da.forEach((e=>{e.next()}))}var e0,RT;(RT=e0||(e0={})).Fa="default",RT.Cache="cache";class iR{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new hu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=hu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==e0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.key=e}}class aR{constructor(e){this.key=e}}class VV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dt(),this.mutatedKeys=dt(),this.Xa=EC(e),this.eu=new ru(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new AT,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,b)=>{const x=s.get(v),E=yp(this.query,b)?b:null,A=!!x&&this.mutatedKeys.has(x.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;x&&E?x.data.isEqual(E.data)?A!==O&&(r.track({type:3,doc:E}),M=!0):this.iu(x,E)||(r.track({type:2,doc:E}),M=!0,(f&&this.Xa(E,f)>0||h&&this.Xa(E,h)<0)&&(d=!0)):!x&&E?(r.track({type:0,doc:E}),M=!0):x&&!E&&(r.track({type:1,doc:x}),M=!0,(f||h)&&(d=!0)),M&&(E?(u=u.add(E),o=O?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:d,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,b)=>(function(E,A){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{At:M})}};return O(E)-O(A)})(v.type,b.type)||this.Xa(v.doc,b.doc))),this.su(r),s=s!=null&&s;const d=n&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,h=f!==this.Ya;return this.Ya=f,u.length!==0||h?{snapshot:new hu(this.query,e.eu,o,u,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new AT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dt(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new aR(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new sR(r))})),n}uu(e){this.Ha=e.qs,this.Za=dt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return hu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ab="SyncEngine";class LV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UV{constructor(e){this.key=e,this.lu=!1}}class zV{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Wo((d=>wC(d)),vp),this.Tu=new Map,this.Iu=new Set,this.du=new sn(Ne.comparator),this.Eu=new Map,this.Au=new pb,this.Ru={},this.Vu=new Map,this.mu=fu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BV(t,e,n=!0){const r=fR(t);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await oR(r,e,n,!0),s}async function FV(t,e){const n=fR(t);await oR(n,e,!0,!1)}async function oR(t,e,n,r){const s=await lV(t.localStore,Ji(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await qV(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&QC(t.remoteStore,s),d}async function qV(t,e,n,r,s){t.gu=(b,x,E)=>(async function(O,M,U,j){let z=M.view.nu(U);z.Ds&&(z=await xT(O.localStore,M.query,!1).then((({documents:C})=>M.view.nu(C,z))));const H=j&&j.targetChanges.get(M.targetId),G=j&&j.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(z,O.isPrimaryClient,H,G);return NT(O,M.targetId,q._u),q.snapshot})(t,b,x,E);const o=await xT(t.localStore,e,!0),u=new VV(e,o.qs),d=u.nu(o.documents),f=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=u.applyChanges(d,t.isPrimaryClient,f);NT(t,n,h._u);const v=new LV(e,n,u);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function HV(t,e,n){const r=$e(t),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter((u=>!vp(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Jy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bb(r.remoteStore,s.targetId),t0(r,s.targetId)})).catch(Tu)):(t0(r,s.targetId),await Jy(r.localStore,s.targetId,!0))}async function GV(t,e){const n=$e(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bb(n.remoteStore,r.targetId))}async function $V(t,e,n){const r=ZV(t);try{const s=await(function(u,d){const f=$e(u),h=Jt.now(),v=d.reduce(((E,A)=>E.add(A.key)),dt());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let A=Ls(),O=dt();return f.Os.getEntries(E,v).next((M=>{A=M,A.forEach(((U,j)=>{j.isValidDocument()||(O=O.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,A))).next((M=>{b=M;const U=[];for(const j of d){const z=l3(j,b.get(j.key).overlayedDocument);z!=null&&U.push(new Xa(j.key,z,mC(z.value.mapValue),Li.exists(!0)))}return f.mutationQueue.addMutationBatch(E,h,U,d)})).next((M=>{x=M;const U=M.applyToLocalDocumentSet(b,O);return f.documentOverlayCache.saveOverlays(E,M.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:SC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let h=u.Ru[u.currentUser.toKey()];h||(h=new sn(tt)),h=h.insert(d,f),u.Ru[u.currentUser.toKey()]=h})(r,s.batchId,n),await Hd(r,s.changes),await Tp(r.remoteStore)}catch(s){const o=Tb(s,"Failed to persist write");n.reject(o)}}async function lR(t,e){const n=$e(t);try{const r=await sV(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=n.Eu.get(o);u&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?At(u.lu,14607):s.removedDocuments.size>0&&(At(u.lu,42227),u.lu=!1))})),await Hd(n,r,e)}catch(r){await Tu(r)}}function IT(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=$e(u);f.onlineState=d;let h=!1;f.queries.forEach(((v,b)=>{for(const x of b.wa)x.va(d)&&(h=!0)})),h&&Sb(f)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KV(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new sn(Ne.comparator);u=u.insert(o,hr.newNoDocument(o,Fe.min()));const d=dt().add(o),f=new _p(Fe.min(),new Map,new sn(tt),u,d);await lR(r,f),r.du=r.du.remove(o),r.Eu.delete(e),Cb(r)}else await Jy(r.localStore,e,!1).then((()=>t0(r,e,n))).catch(Tu)}async function YV(t,e){const n=$e(t),r=e.batch.batchId;try{const s=await iV(n.localStore,e);cR(n,r,null),uR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hd(n,s)}catch(s){await Tu(s)}}async function WV(t,e,n){const r=$e(t);try{const s=await(function(u,d){const f=$e(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return f.mutationQueue.lookupMutationBatch(h,d).next((b=>(At(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(h,b)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>f.localDocuments.getDocuments(h,v)))}))})(r.localStore,e);cR(r,e,n),uR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hd(r,s)}catch(s){await Tu(s)}}function uR(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function cR(t,e,n){const r=$e(t);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function t0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||dR(t,r)}))}function dR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bb(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Cb(t))}function NT(t,e,n){for(const r of n)r instanceof sR?(t.Au.addReference(r.key,e),QV(t,r)):r instanceof aR?(be(Ab,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||dR(t,r.key)):Ue(19791,{yu:r})}function QV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(be(Ab,"New document in limbo: "+n),t.Iu.add(r),Cb(t))}function Cb(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne($t.fromString(e)),r=t.mu.next();t.Eu.set(r,new UV(n)),t.du=t.du.insert(n,r),QC(t.remoteStore,new Na(Ji(gp(n.path)),r,"TargetPurposeLimboResolution",hp.ue))}}async function Hd(t,e,n){const r=$e(t),s=[],o=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,n).then((h=>{var v;if((h||n)&&r.isPrimaryClient){const b=h?!h.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(h){s.push(h);const b=vb.Es(f.targetId,h);o.push(b)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(f,h){const v=$e(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(h,(x=>le.forEach(x.Is,(E=>v.persistence.referenceDelegate.addReference(b,x.targetId,E))).next((()=>le.forEach(x.ds,(E=>v.persistence.referenceDelegate.removeReference(b,x.targetId,E)))))))))}catch(b){if(!Su(b))throw b;be(yb,"Failed to update sequence numbers: "+b)}for(const b of h){const x=b.targetId;if(!b.fromCache){const E=v.Fs.get(x),A=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(A);v.Fs=v.Fs.insert(x,O)}}})(r.localStore,o))}async function XV(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){be(Ab,"User change. New user:",e.toKey());const r=await $C(n.localStore,e);n.currentUser=e,(function(o,u){o.Vu.forEach((d=>{d.forEach((f=>{f.reject(new ye(oe.CANCELLED,u))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hd(n,r.Bs)}}function JV(t,e){const n=$e(t),r=n.Eu.get(e);if(r&&r.lu)return dt().add(r.key);{let s=dt();const o=n.Tu.get(e);if(!o)return s;for(const u of o){const d=n.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function fR(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KV.bind(null,e),e.hu.J_=MV.bind(null,e.eventManager),e.hu.pu=PV.bind(null,e.eventManager),e}function ZV(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WV.bind(null,e),e}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return rV(this.persistence,new eV,e.initialUser,this.serializer)}Du(e){return new GC(gb.Vi,this.serializer)}bu(e){return new cV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class e5 extends jm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){At(this.persistence.referenceDelegate instanceof Dm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new U3(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new GC((r=>Dm.Vi(r,n)),this.serializer)}}class n0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XV.bind(null,this.syncEngine),await DV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jV})()}createDatastore(e){const n=wp(e.databaseInfo.databaseId),r=(function(o){return new pV(o)})(e.databaseInfo);return(function(o,u,d,f){return new bV(o,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,u,d){return new _V(r,s,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>IT(this.syncEngine,n,0)),(function(){return ET.C()?new ET:new dV})())}createSyncEngine(e,n){return(function(s,o,u,d,f,h,v){const b=new zV(s,o,u,d,f,h);return v&&(b.fu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=$e(s);be(Ho,"RemoteStore shutting down."),o.Ia.add(5),await qd(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}n0.provider={build:()=>new n0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="FirestoreClient";class t5{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fr.UNAUTHENTICATED,this.clientId=ib.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{be(Ha,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(be(Ha,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tb(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sy(t,e){t.asyncQueue.verifyOperationInProgress(),be(Ha,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await $C(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{La("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{be("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{La("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function kT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await n5(t);be(Ha,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ST(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ST(e.remoteStore,s))),t._onlineComponents=e}async function n5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(Ha,"Using user provided OfflineComponentProvider");try{await sy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await sy(t,new jm)}}else be(Ha,"Using default OfflineComponentProvider"),await sy(t,new e5(void 0));return t._offlineComponents}async function mR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(Ha,"Using user provided OnlineComponentProvider"),await kT(t,t._uninitializedComponentsProvider._online)):(be(Ha,"Using default OnlineComponentProvider"),await kT(t,new n0))),t._onlineComponents}function r5(t){return mR(t).then((e=>e.syncEngine))}async function r0(t){const e=await mR(t),n=e.eventManager;return n.onListen=BV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GV.bind(null,e.syncEngine),n}function i5(t,e,n={}){const r=new Ma;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,f,h){const v=new hR({next:x=>{v.Ou(),u.enqueueAndForget((()=>rR(o,b)));const E=x.docs.has(d);!E&&x.fromCache?h.reject(new ye(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&f&&f.source==="server"?h.reject(new ye(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),b=new iR(gp(d.path),v,{includeMetadataChanges:!0,ka:!0});return nR(o,b)})(await r0(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="firestore.googleapis.com",OT=!0;class jT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gR,this.ssl=OT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V3)throw new ye(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hP;switch(r.type){case"firstParty":return new vP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=DT.get(n);r&&(be("ComponentProvider","Removing Datastore"),DT.delete(n),r.terminate())})(this),Promise.resolve()}}function s5(t,e,n,r={}){var s;t=Xi(t,Sp);const o=zs(e),u=t._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(ap(`https://${f}`),op("Firestore",!0)),u.host!==gR&&u.host!==f&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},u),{host:f,ssl:o,emulatorOptions:r});if(!zo(h,d)&&(t._setSettings(h),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=fr.MOCK_USER;else{v=u2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ye(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fr(x)}t._authCredentials=new mP(new tC(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cu(this.firestore,e,this._query)}}class Tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ud(n,Tn._jsonSchema))return new Tn(e,r||null,new Ne($t.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Mn("string",Tn._jsonSchemaVersion),referencePath:Mn("string")};class Pa extends Cu{constructor(e,n,r){super(e,n,gp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Ne(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function Ja(t,e,...n){if(t=Bt(t),rC("collection","path",e),t instanceof Sp){const r=$t.fromString(e,...n);return K1(r),new Pa(t,null,r)}{if(!(t instanceof Tn||t instanceof Pa))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($t.fromString(e,...n));return K1(r),new Pa(t.firestore,null,r)}}function Ru(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=ib.newId()),rC("doc","path",e),t instanceof Sp){const r=$t.fromString(e,...n);return $1(r),new Tn(t,null,new Ne(r))}{if(!(t instanceof Tn||t instanceof Pa))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($t.fromString(e,...n));return $1(r),new Tn(t.firestore,t instanceof Pa?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="AsyncQueue";class PT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new YC(this,"async_queue_retry"),this.oc=()=>{const r=iy();r&&be(MT,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=iy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=iy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ma;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Su(e))throw e;be(MT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Vs("INTERNAL UNHANDLED ERROR: ",VT(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Eb.createAndSchedule(this,e,n,r,(o=>this.lc(o)));return this.ec.push(s),s}ac(){this.tc&&Ue(47125,{hc:VT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function VT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Go extends Sp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new PT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PT(e),this._firestoreClient=void 0,await e}}}function a5(t,e){const n=typeof t=="object"?t:lp(),r=typeof t=="string"?t:Sm,s=jd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=q0("firestore");o&&s5(s,...o)}return s}function Rb(t){if(t._terminated)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||o5(t),t._firestoreClient}function o5(t){var e,n,r;const s=t._freezeSettings(),o=(function(d,f,h,v){return new OP(d,f,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,pR(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new t5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(tr.fromBase64String(e))}catch(n){throw new ye(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ud(e,xi._jsonSchema))return xi.fromBase64String(e.bytes)}}xi._jsonSchemaVersion="firestore/bytes/1.0",xi._jsonSchema={type:Mn("string",xi._jsonSchemaVersion),bytes:Mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(Ud(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Mn("string",es._jsonSchemaVersion),latitude:Mn("number"),longitude:Mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ud(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ts(e.vectorValues);throw new ye(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:Mn("string",ts._jsonSchemaVersion),vectorValues:Mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=/^__.*__$/;class u5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bd(e,this.data,n,this.fieldTransforms)}}class vR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ec:t})}}class Nb{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Nb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yR(this.Ec)&&l5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class c5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wp(e)}Dc(e,n,r,s=!1){return new Nb({Ec:e,methodName:n,bc:r,path:er.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kb(t){const e=t._freezeSettings(),n=wp(t._databaseId);return new c5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function d5(t,e,n,r,s,o={}){const u=t.Dc(o.merge||o.mergeFields?2:0,e,n,s);Db("Data must be an object, but it was:",u,r);const d=bR(r,u);let f,h;if(o.merge)f=new Zr(u.fieldMask),h=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const b of o.mergeFields){const x=i0(e,b,n);if(!u.contains(x))throw new ye(oe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_R(v,x)||v.push(x)}f=new Zr(v),h=u.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,h=u.fieldTransforms;return new u5(new zr(d),f,h)}class Cp extends Ib{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cp}}function f5(t,e,n,r){const s=t.Dc(1,e,n);Db("Data must be an object, but it was:",s,r);const o=[],u=zr.empty();Qa(r,((f,h)=>{const v=Ob(e,f,n);h=Bt(h);const b=s.gc(v);if(h instanceof Cp)o.push(v);else{const x=Gd(h,b);x!=null&&(o.push(v),u.set(v,x))}}));const d=new Zr(o);return new vR(u,d,s.fieldTransforms)}function h5(t,e,n,r,s,o){const u=t.Dc(1,e,n),d=[i0(e,r,n)],f=[s];if(o.length%2!=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)d.push(i0(e,o[x])),f.push(o[x+1]);const h=[],v=zr.empty();for(let x=d.length-1;x>=0;--x)if(!_R(h,d[x])){const E=d[x];let A=f[x];A=Bt(A);const O=u.gc(E);if(A instanceof Cp)h.push(E);else{const M=Gd(A,O);M!=null&&(h.push(E),v.set(E,M))}}const b=new Zr(h);return new vR(v,b,u.fieldTransforms)}function m5(t,e,n,r=!1){return Gd(n,t.Dc(r?4:3,e))}function Gd(t,e){if(xR(t=Bt(t)))return Db("Unsupported field value:",e,t),bR(t,e);if(t instanceof Ib)return(function(r,s){if(!yR(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const o=[];let u=0;for(const d of r){let f=Gd(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Jt.fromDate(r);return{timestampValue:km(s.serializer,o)}}if(r instanceof Jt){const o=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:km(s.serializer,o)}}if(r instanceof es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:VC(s.serializer,r._byteString)};if(r instanceof Tn){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ts)return(function(u,d){return{mapValue:{fields:{[fC]:{stringValue:hC},[Am]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.wc("VectorValues must only contain numeric values.");return cb(d.serializer,h)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${fp(r)}`)})(t,e)}function bR(t,e){const n={};return aC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(t,((r,s)=>{const o=Gd(s,e.Vc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function xR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jt||t instanceof es||t instanceof xi||t instanceof Tn||t instanceof Ib||t instanceof ts)}function Db(t,e,n){if(!xR(n)||!iC(n)){const r=fp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function i0(t,e,n){if((e=Bt(e))instanceof Ap)return e._internalPath;if(typeof e=="string")return Ob(t,e);throw Mm("Field path arguments must be of type string or ",t,!1,void 0,n)}const p5=new RegExp("[~\\*/\\[\\]]");function Ob(t,e,n){if(e.search(p5)>=0)throw Mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ap(...e.split("."))._internalPath}catch{throw Mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mm(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new ye(oe.INVALID_ARGUMENT,d+t+f)}function _R(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g5 extends wR{data(){return super.data()}}function jb(t,e){return typeof e=="string"?Ob(t,e):e instanceof Ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mb{}class y5 extends Mb{}function Rp(t,e,...n){let r=[];e instanceof Mb&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((f=>f instanceof Pb)).length,d=o.filter((f=>f instanceof Ip)).length;if(u>1||u>0&&d>0)throw new ye(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Ip extends y5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ip(e,n,r)}_apply(e){const n=this._parse(e);return ER(e._query,n),new Cu(e.firestore,e.converter,$y(e._query,n))}_parse(e){const n=kb(e.firestore);return(function(o,u,d,f,h,v,b){let x;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){zT(b,v);const A=[];for(const O of b)A.push(UT(f,o,O));x={arrayValue:{values:A}}}else x=UT(f,o,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||zT(b,v),x=m5(d,u,b,v==="in"||v==="not-in");return jn.create(h,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function b5(t,e,n){const r=e,s=jb("where",t);return Ip._create(s,r,n)}class Pb extends Mb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pb(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let u=s;const d=o.getFlattenedFilters();for(const f of d)ER(u,f),u=$y(u,f)})(e._query,n),new Cu(e.firestore,e.converter,$y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function UT(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new ye(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&n.indexOf("/")!==-1)throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($t.fromString(n));if(!Ne.isDocumentKey(r))throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tT(t,new Ne(r))}if(n instanceof Tn)return tT(t,n._key);throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fp(n)}.`)}function zT(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ER(t,e){const n=(function(s,o){for(const u of s)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x5{convertValue(e,n="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qa(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Am].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>En(u.doubleValue)));return new ts(o)}convertGeoPoint(e){return new es(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const n=za(e);return new Jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$t.fromString(e);At(qC(r),9688,{name:e});const s=new bd(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(n)||Vs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends wR{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:Mn("string",jo._jsonSchemaVersion),bundleSource:Mn("string","DocumentSnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class sm extends jo{data(e={}){return super.data(e)}}class iu{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new sm(this._firestore,this._userDataWriter,r.key,r,new Lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new sm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Lc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const f=new sm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Lc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:w5(d.type),doc:f,oldIndex:h,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=iu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ib.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){t=Xi(t,Tn);const e=Xi(t.firestore,Go);return i5(Rb(e),t._key).then((n=>SR(e,t,n)))}iu._jsonSchemaVersion="firestore/querySnapshot/1.0",iu._jsonSchema={type:Mn("string",iu._jsonSchemaVersion),bundleSource:Mn("string","QuerySnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class TR extends x5{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function T5(t,e,n,...r){t=Xi(t,Tn);const s=Xi(t.firestore,Go),o=kb(s);let u;return u=typeof(e=Bt(e))=="string"||e instanceof Ap?h5(o,"updateDoc",t._key,e,n,r):f5(o,"updateDoc",t._key,e),Lb(s,[u.toMutation(t._key,Li.exists(!0))])}function Vb(t){return Lb(Xi(t.firestore,Go),[new db(t._key,Li.none())])}function Np(t,e){const n=Xi(t.firestore,Go),r=Ru(t),s=_5(t.converter,e);return Lb(n,[d5(kb(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Li.exists(!1))]).then((()=>r))}function kp(t,...e){var n,r,s;t=Bt(t);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||LT(e[u])||(o=e[u++]);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(LT(e[u])){const b=e[u];e[u]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[u+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[u+2]=(s=b.complete)===null||s===void 0?void 0:s.bind(b)}let f,h,v;if(t instanceof Tn)h=Xi(t.firestore,Go),v=gp(t._key.path),f={next:b=>{e[u]&&e[u](SR(h,t,b))},error:e[u+1],complete:e[u+2]};else{const b=Xi(t,Cu);h=Xi(b.firestore,Go),v=b._query;const x=new TR(h);f={next:E=>{e[u]&&e[u](new iu(h,x,b,E))},error:e[u+1],complete:e[u+2]},v5(t._query)}return(function(x,E,A,O){const M=new hR(O),U=new iR(E,M,A);return x.asyncQueue.enqueueAndForget((async()=>nR(await r0(x),U))),()=>{M.Ou(),x.asyncQueue.enqueueAndForget((async()=>rR(await r0(x),U)))}})(Rb(h),v,d,f)}function Lb(t,e){return(function(r,s){const o=new Ma;return r.asyncQueue.enqueueAndForget((async()=>$V(await r5(r),s,o))),o.promise})(Rb(t),e)}function SR(t,e,n){const r=n.docs.get(e._key),s=new TR(t);return new jo(t,s,e._key,r,new Lc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Eu=s})(Yo),Va(new js("firestore",((r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new Go(new pP(r.getProvider("auth-internal")),new yP(u,r.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ye(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(h.options.projectId,v)})(u,s),u);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),_i(B1,F1,e),_i(B1,F1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebasestorage.googleapis.com",CR="storageBucket",S5=120*1e3,A5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends zi{constructor(e,n,r=0){super(ay(e),`Firebase Storage: ${n} (${ay(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ay(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pn||(pn={}));function ay(t){return"storage/"+t}function Ub(){const t="An unknown error occurred, please check the error payload for server response.";return new gn(pn.UNKNOWN,t)}function C5(t){return new gn(pn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function R5(t){return new gn(pn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function I5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gn(pn.UNAUTHENTICATED,t)}function N5(){return new gn(pn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function k5(t){return new gn(pn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function D5(){return new gn(pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O5(){return new gn(pn.CANCELED,"User canceled the upload/download.")}function j5(t){return new gn(pn.INVALID_URL,"Invalid URL '"+t+"'.")}function M5(t){return new gn(pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function P5(){return new gn(pn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CR+"' property when initializing the app?")}function V5(){return new gn(pn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function L5(){return new gn(pn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function U5(t){return new gn(pn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function s0(t){return new gn(pn.INVALID_ARGUMENT,t)}function RR(){return new gn(pn.APP_DELETED,"The Firebase app was deleted.")}function z5(t){return new gn(pn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jc(t,e){return new gn(pn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ac(t){throw new gn(pn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ei.makeFromUrl(e,n)}catch{return new ei(e,"")}if(r.path==="")return r;throw M5(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function h(H){H.path_=decodeURIComponent(H.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",E=new RegExp(`^https?://${b}/${v}/b/${s}/o${x}`,"i"),A={bucket:1,path:3},O=n===AR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${O}/${s}/${M}`,"i"),z=[{regex:d,indices:f,postModify:o},{regex:E,indices:A,postModify:h},{regex:U,indices:{bucket:1,path:2},postModify:h}];for(let H=0;H<z.length;H++){const G=z[H],q=G.regex.exec(e);if(q){const C=q[G.indices.bucket];let S=q[G.indices.path];S||(S=""),r=new ei(C,S),G.postModify(r);break}}if(r==null)throw j5(e);return r}}class B5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e,n){let r=1,s=null,o=null,u=!1,d=0;function f(){return d===2}let h=!1;function v(...M){h||(h=!0,e.apply(null,M))}function b(M){s=setTimeout(()=>{s=null,t(E,f())},M)}function x(){o&&clearTimeout(o)}function E(M,...U){if(h){x();return}if(M){x(),v.call(null,M,...U);return}if(f()||u){x(),v.call(null,M,...U);return}r<64&&(r*=2);let z;d===1?(d=2,z=0):z=(r+Math.random())*1e3,b(z)}let A=!1;function O(M){A||(A=!0,x(),!h&&(s!==null?(M||(d=2),clearTimeout(s),b(0)):M||(d=1)))}return b(0),o=setTimeout(()=>{u=!0,O(!0)},n),O}function q5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){return t!==void 0}function G5(t){return typeof t=="object"&&!Array.isArray(t)}function zb(t){return typeof t=="string"||t instanceof String}function BT(t){return Bb()&&t instanceof Blob}function Bb(){return typeof Blob<"u"}function FT(t,e,n,r){if(r<e)throw s0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw s0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function IR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Mo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mo||(Mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,r,s,o,u,d,f,h,v,b,x=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=v,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,O)=>{this.resolve_=A,this.reject_=O,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ah(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const f=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===Mo.NO_ERROR,f=o.getStatus();if(!d||$5(f,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===Mo.ABORT;r(!1,new Ah(!1,null,v));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new Ah(h,o))})},n=(r,s)=>{const o=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());H5(f)?o(f):o()}catch(f){u(f)}else if(d!==null){const f=Ub();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?RR():O5();u(f)}else{const f=D5();u(f)}};this.canceled_?n(!1,new Ah(!1,null,!0)):this.backoffId_=F5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Y5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function W5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function X5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function J5(t,e,n,r,s,o,u=!0,d=!1){const f=IR(t.urlParams),h=t.url+f,v=Object.assign({},t.headers);return Q5(v,e),Y5(v,n),W5(v,o),X5(v,r),new K5(h,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eL(...t){const e=Z5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Bb())return new Blob(t);throw new gn(pn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){if(typeof atob>"u")throw U5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oy{constructor(e,n){this.data=e,this.contentType=n||null}}function NR(t,e){switch(t){case Mi.RAW:return new oy(kR(e));case Mi.BASE64:case Mi.BASE64URL:return new oy(DR(t,e));case Mi.DATA_URL:return new oy(iL(e),sL(e))}throw Ub()}function kR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=t.charCodeAt(++n);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function rL(t){let e;try{e=decodeURIComponent(t)}catch{throw Jc(Mi.DATA_URL,"Malformed data URL.")}return kR(e)}function DR(t,e){switch(t){case Mi.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Jc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Jc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=nL(e)}catch(s){throw s.message.includes("polyfill")?s:Jc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class OR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jc(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=aL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iL(t){const e=new OR(t);return e.base64?DR(Mi.BASE64,e.rest):rL(e.rest)}function sL(t){return new OR(t).contentType}function aL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){let r=0,s="";BT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(BT(this.data_)){const r=this.data_,s=tL(r,e,n);return s===null?null:new Aa(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Aa(r,!0)}}static getBlob(...e){if(Bb()){const n=e.map(r=>r instanceof Aa?r.data_:r);return new Aa(eL.apply(null,n))}else{const n=e.map(u=>zb(u)?NR(Mi.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)s[o++]=u[d]}),new Aa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){let e;try{e=JSON.parse(t)}catch{return null}return G5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function MR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e){return e}class wr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uL}}let Ch=null;function cL(t){return!zb(t)||t.length<2?t:MR(t)}function PR(){if(Ch)return Ch;const t=[];t.push(new wr("bucket")),t.push(new wr("generation")),t.push(new wr("metageneration")),t.push(new wr("name","fullPath",!0));function e(o,u){return cL(u)}const n=new wr("name");n.xform=e,t.push(n);function r(o,u){return u!==void 0?Number(u):u}const s=new wr("size");return s.xform=r,t.push(s),t.push(new wr("timeCreated")),t.push(new wr("updated")),t.push(new wr("md5Hash",null,!0)),t.push(new wr("cacheControl",null,!0)),t.push(new wr("contentDisposition",null,!0)),t.push(new wr("contentEncoding",null,!0)),t.push(new wr("contentLanguage",null,!0)),t.push(new wr("contentType",null,!0)),t.push(new wr("metadata","customMetadata",!0)),Ch=t,Ch}function dL(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new ei(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function fL(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const u=n[o];r[u.local]=u.xform(r,e[u.server])}return dL(r,t),r}function VR(t,e,n){const r=jR(e);return r===null?null:fL(t,r,n)}function hL(t,e,n,r){const s=jR(e);if(s===null||!zb(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(h=>{const v=t.bucket,b=t.fullPath,x="/b/"+u(v)+"/o/"+u(b),E=Fb(x,n,r),A=IR({alt:"media",token:h});return E+A})[0]}function mL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class LR{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){if(!t)throw Ub()}function pL(t,e){function n(r,s){const o=VR(t,s,e);return UR(o!==null),o}return n}function gL(t,e){function n(r,s){const o=VR(t,s,e);return UR(o!==null),hL(o,s,t.host,t._protocol)}return n}function zR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=N5():s=I5():n.getStatus()===402?s=R5(t.bucket):n.getStatus()===403?s=k5(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function vL(t){const e=zR(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=C5(t.path)),o.serverResponse=s.serverResponse,o}return n}function yL(t,e,n){const r=e.fullServerUrl(),s=Fb(r,t.host,t._protocol),o="GET",u=t.maxOperationRetryTime,d=new LR(s,o,gL(t,n),u);return d.errorHandler=vL(e),d}function bL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=bL(null,e)),r}function _L(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let z="";for(let H=0;H<2;H++)z=z+Math.random().toString().slice(2);return z}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const h=xL(e,r,s),v=mL(h,n),b="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+f+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+f+"--",E=Aa.getBlob(b,r,x);if(E===null)throw V5();const A={name:h.fullPath},O=Fb(o,t.host,t._protocol),M="POST",U=t.maxUploadRetryTime,j=new LR(O,M,pL(t,n),U);return j.urlParams=A,j.headers=u,j.body=E.uploadData(),j.errorHandler=zR(e),j}class wL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Ac("cannot .send() more than once");if(zs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EL extends wL{initXhr(){this.xhr_.responseType="text"}}function BR(){return new EL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $o(e,n)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MR(this._location.path)}get storage(){return this._service}get parent(){const e=oL(this._location.path);if(e===null)return null;const n=new ei(this._location.bucket,e);return new $o(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw z5(e)}}function FR(t,e,n){t._throwIfRoot("uploadBytes");const r=_L(t.storage,t._location,PR(),new Aa(e,!0),n);return t.storage.makeRequestWithTokens(r,BR).then(s=>({metadata:s,ref:t}))}function TL(t,e,n=Mi.RAW,r){t._throwIfRoot("uploadString");const s=NR(n,e),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),FR(t,s.data,o)}function SL(t){t._throwIfRoot("getDownloadURL");const e=yL(t.storage,t._location,PR());return t.storage.makeRequestWithTokens(e,BR).then(n=>{if(n===null)throw L5();return n})}function AL(t,e){const n=lL(t._location.path,e),r=new ei(t._location.bucket,n);return new $o(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){return/^[A-Za-z]+:\/\//.test(t)}function RL(t,e){return new $o(t,e)}function qR(t,e){if(t instanceof qb){const n=t;if(n._bucket==null)throw P5();const r=new $o(n,n._bucket);return e!=null?qR(r,e):r}else return e!==void 0?AL(t,e):t}function IL(t,e){if(e&&CL(e)){if(t instanceof qb)return RL(t,e);throw s0("To use ref(service, url), the first argument must be a Storage instance.")}else return qR(t,e)}function qT(t,e){const n=e==null?void 0:e[CR];return n==null?null:ei.makeFromBucketSpec(n,t)}function NL(t,e,n,r={}){t.host=`${e}:${n}`;const s=zs(e);s&&(ap(`https://${t.host}/b`),op("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:u2(o,t.app.options.projectId))}class qb{constructor(e,n,r,s,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=AR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S5,this._maxUploadRetryTime=A5,this._requests=new Set,s!=null?this._bucket=ei.makeFromBucketSpec(s,this._host):this._bucket=qT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=qT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $o(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new B5(RR());{const u=J5(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const HT="@firebase/storage",GT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="storage";function kL(t,e,n){return t=Bt(t),FR(t,e,n)}function DL(t,e,n,r){return t=Bt(t),TL(t,e,n,r)}function GR(t){return t=Bt(t),SL(t)}function $R(t,e){return t=Bt(t),IL(t,e)}function OL(t=lp(),e){t=Bt(t);const r=jd(t,HR).getImmediate({identifier:e}),s=q0("storage");return s&&jL(r,...s),r}function jL(t,e,n,r={}){NL(t,e,n,r)}function ML(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new qb(n,r,s,e,Yo)}function PL(){Va(new js(HR,ML,"PUBLIC").setMultipleInstances(!0)),_i(HT,GT,""),_i(HT,GT,"esm2017")}PL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="type.googleapis.com/google.protobuf.Int64Value",LL="type.googleapis.com/google.protobuf.UInt64Value";function KR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Pm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Pm(e));if(typeof t=="function"||typeof t=="object")return KR(t,e=>Pm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case VL:case LL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mu(e)):typeof t=="function"||typeof t=="object"?KR(t,e=>mu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends zi{constructor(e,n,r){super(`${Hb}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Br.prototype)}}function UL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Vm(t,e){let n=UL(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!$T[u])return new Br("internal","internal");n=$T[u],r=u}const d=o.message;typeof d=="string"&&(r=d),s=o.details,s!==void 0&&(s=mu(s))}}catch{}return n==="ok"?null:new Br(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Er(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s==null||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="us-central1",BL=/^data: (.*?)(?:\n|$)/;function FL(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Br("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class qL{constructor(e,n,r,s,o=a0,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new zL(e,n,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=a0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function HL(t,e,n){const r=zs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(ap(t.emulatorOrigin),op("Functions",!0))}function GL(t,e,n){const r=s=>KL(t,e,s,{});return r.stream=(s,o)=>WL(t,e,s,o),r}async function $L(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function YR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function KL(t,e,n,r){const s=t._url(e);return YL(t,s,n,r)}async function YL(t,e,n,r){n=Pm(n);const s={data:n},o=await YR(t,r),u=r.timeout||7e4,d=FL(u),f=await Promise.race([$L(e,s,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new Br("cancelled","Firebase Functions instance was deleted.");const h=Vm(f.status,f.json);if(h)throw h;if(!f.json)throw new Br("internal","Response is not valid JSON object.");let v=f.json.data;if(typeof v>"u"&&(v=f.json.result),typeof v>"u")throw new Br("internal","Response is missing data field.");return{data:mu(v)}}function WL(t,e,n,r){const s=t._url(e);return QL(t,s,n,r||{})}async function QL(t,e,n,r){var s;n=Pm(n);const o={data:n},u=await YR(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r==null?void 0:r.signal})}catch(E){if(E instanceof Error&&E.name==="AbortError"){const O=new Br("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const A=Vm(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let f,h;const v=new Promise((E,A)=>{f=E,h=A});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const E=new Br("cancelled","Request was cancelled.");h(E)});const b=d.body.getReader(),x=XL(b,f,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const E=x.getReader();return{async next(){const{value:A,done:O}=await E.read();return{value:A,done:O}},async return(){return await E.cancel(),{done:!0,value:void 0}}}}},data:v}}function XL(t,e,n,r){const s=(u,d)=>{const f=u.match(BL);if(!f)return;const h=f[1];try{const v=JSON.parse(h);if("result"in v){e(mu(v.result));return}if("message"in v){d.enqueue(mu(v.message));return}if("error"in v){const b=Vm(0,v);d.error(b),n(b);return}}catch(v){if(v instanceof Br){d.error(v),n(v);return}}},o=new TextDecoder;return new ReadableStream({start(u){let d="";return f();async function f(){if(r!=null&&r.aborted){const h=new Br("cancelled","Request was cancelled");return u.error(h),n(h),Promise.resolve()}try{const{value:h,done:v}=await t.read();if(v){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const x=new Br("cancelled","Request was cancelled");u.error(x),n(x),await t.cancel();return}d+=o.decode(h,{stream:!0});const b=d.split(`
`);d=b.pop()||"";for(const x of b)x.trim()&&s(x.trim(),u);return f()}catch(h){const v=h instanceof Br?h:Vm(0,null);u.error(v),n(v)}}},cancel(){return t.cancel()}})}const KT="@firebase/functions",YT="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="auth-internal",ZL="app-check-internal",e6="messaging-internal";function t6(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(JL),u=n.getProvider(e6),d=n.getProvider(ZL);return new qL(s,o,u,d,r)};Va(new js(Hb,e,"PUBLIC").setMultipleInstances(!0)),_i(KT,YT,t),_i(KT,YT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t=lp(),e=a0){const r=jd(Bt(t),Hb).getImmediate({identifier:e}),s=q0("functions");return s&&r6(r,...s),r}function r6(t,e,n){HL(Bt(t),e,n)}function Xo(t,e,n){return GL(Bt(t),e)}t6();const i6={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Dp=f2(i6),Co=uP(Dp),s6=new Rs,ri=a5(Dp),WR=OL(Dp),Jo=n6(Dp,"us-central1"),a6=Xo(Jo,"analyzeClothingImages");async function o6(t){try{return(await a6({base64Images:t})).data.items||[]}catch(e){throw console.error("Erreur lors de l'analyse des vtements:",e),new Error("Erreur lors de l'analyse des vtements.")}}const l6=Xo(Jo,"generateOutfitsFunction"),u6=Xo(Jo,"generateOutfitsFunction"),c6=Xo(Jo,"generateChatResponseFunction");async function d6(t,e,n,r){const s=new Set((e||[]).flatMap(b=>b.itemIds)),u=t.filter(b=>!s.has(b.id)&&!b.isExcluded).map(b=>`- ${b.analysis} (ID: ${b.id}, Cat: ${b.category}, Matire: ${b.material})`).join(`
`),d=e.map(b=>`- ${b.name} (Ensemble, ID: ${b.id})`).join(`
`),f=[u,d].filter(Boolean).join(`
`),h=r?`

 PRIORIT 0 - ARTICLE OBLIGATOIRE (RGLE ABSOLUE)


 **CONTRAINTE NON NGOCIABLE** :
CHACUNE DES 3 TENUES DOIT ABSOLUMENT INCLURE :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})

Cette pice doit apparatre dans TOUTES les tenues gnres sans exception.
Si une tenue n'inclut pas cet article, elle est INVALIDE.


`:"",v=`Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses pour : "${n}".
${h}
Vtements disponibles :
${f}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 looks visuellement diffrents
- vite de rpter le mme pantalon 3 fois si possible


 ACCESSOIRES


**OBLIGATOIRES** :
- Montre : TOUJOURS inclure si disponible dans les accessoires

**OPTIONNELS** :
- Bracelet : Peut tre ajout EN PLUS de la montre si disponible
- Ceinture : Pour pantalon classique
- charpe : Si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Sois cratif dans les limites.${r?`


 RAPPEL FINAL - ARTICLE OBLIGATOIRE

VRIFIE que CHACUNE des 3 tenues inclut bien :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})
`:""}`;try{return(await l6({prompt:v})).data.tenues}catch(b){throw console.error("Erreur gnration tenues:",b),new Error("Erreur lors de la gnration des tenues.")}}async function f6(t,e,n,r,s){const o=new Set((e||[]).flatMap(A=>A.itemIds)),d=t.filter(A=>!o.has(A.id)&&!A.isExcluded).map(A=>`- ${A.analysis} (ID: ${A.id}, Cat: ${A.category}, Matire: ${A.material})`).join(`
`),f=e.map(A=>`- ${A.name} (Ensemble, ID: ${A.id})`).join(`
`),h=[d,f].filter(Boolean).join(`
`),b=r.vetements.filter(A=>A.id!==s.id).map(A=>`   GARDER : "${A.description}" (ID: ${A.id})`).join(`
`),x=`   REMPLACER : "${s.description}" (ID: ${s.id})`,E=`Tu es un styliste expert. L'utilisateur aime cette tenue mais veut remplacer UNE SEULE pice.

**TENUE ACTUELLE** : "${r.titre}"
${r.description}

**INSTRUCTIONS DE MODIFICATION** :
${b}
${x}

 **RGLE ABSOLUE** : Tu DOIS inclure EXACTEMENT les mmes articles marqus " GARDER" avec leurs IDs exacts dans chacune des 3 tenues.
Tu dois UNIQUEMENT remplacer l'article marqu " REMPLACER" par une alternative diffrente parmi les vtements disponibles.

**CONTEXTE** : ${n}

Vtements disponibles :
${h}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 alternatives DIFFRENTES pour remplacer la pice dsigne
- Garde l'harmonie avec les pices conserves


 ACCESSOIRES


**OBLIGATOIRES** :
- Montre : TOUJOURS inclure si disponible dans les accessoires

**OPTIONNELS** :
- Bracelet : Peut tre ajout EN PLUS de la montre si disponible
- Ceinture : Pour pantalon classique
- charpe : Si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Gnre 3 variantes qui respectent TOUTES les rgles ci-dessus.`;try{return(await u6({prompt:E})).data.tenues}catch(A){throw console.error("Erreur gnration variantes:",A),new Error("Erreur lors de la gnration des variantes.")}}async function h6(t,e,n,r,s){const o=new Set((s||[]).flatMap(E=>E.itemIds)),u=r.filter(E=>!o.has(E.id)&&!E.isExcluded),d={Hauts:u.filter(E=>E.category==="Hauts"),Bas:u.filter(E=>E.category==="Bas"),Chaussures:u.filter(E=>E.category==="Chaussures"),Accessoires:u.filter(E=>E.category==="Accessoires")},f=Object.entries(d).map(([E,A])=>{if(A.length===0)return"";const O=A.map(M=>`  - ${M.analysis} (ID: ${M.id}, Matire: ${M.material})`).join(`
`);return`**${E}** (${A.length}) :
${O}`}).filter(Boolean).join(`

`),h=s.length>0?`
**Ensembles** (${s.length}) :
${s.map(E=>`  - ${E.name} (ID: ${E.id})`).join(`
`)}`:"",v=n.map(E=>`${E.role==="user"?"User":"Assistant"}: ${E.content}`).join(`
`),b=t.vetements.map(E=>`  - ${E.description} (ID: ${E.id})`).join(`
`),x=`Tu es un ASSISTANT STYLISTE SPCIALIS pour l'application DressCode.

 **RGLES ABSOLUES** :
1. Tu REFUSES CATGORIQUEMENT toute question hors mode/style/vtements
2. Si demande hors-sujet  Rponds: "Je suis ton styliste IA  Je ne peux parler que de mode, tenues et style. Comment puis-je t'aider avec tes vtements ?"
3. PAS de recettes, code, math, histoire, etc.
4. UNIQUEMENT : conseils de style, tenues, accessoires, couleurs, matires

 **RGLE CRITIQUE - SUGGESTIONS UNIQUEMENT DEPUIS LA GARDE-ROBE** :

 TU DOIS :
- TOUJOURS suggrer des pices qui existent dans sa garde-robe
- Dcrire les items de manire naturelle SANS mentionner leur ID (ex: "Ta veste bomber noire Burberry" au lieu de "ID: 12345")
- Expliquer POURQUOI cette pice spcifique irait mieux
- Si aucune alternative n'existe, le dire clairement

 TU NE DOIS JAMAIS :
- Suggrer d'acheter quoi que ce soit
- Inventer des pices qu'il ne possde pas
- Donner des conseils gnriques sans rfrencer ses items rels
- Afficher les IDs techniques dans tes rponses (ils sont moches et inutiles pour l'utilisateur)



 **TENUE ACTUELLE** : "${t.titre}"
${t.description}

Pices composant cette tenue :
${b}



 **GARDE-ROBE COMPLTE DE L'UTILISATEUR** :

${f}${h}



 **HISTORIQUE DE CONVERSATION** :
${v||"(Pas d'historique)"}



 **NOUVEAU MESSAGE** :
${e}



 **INSTRUCTIONS DE RPONSE** :
- Rponds en franais, de manire concise et amicale (2-4 phrases max)
- Si tu suggres une alternative, dcris-la naturellement (sans ID) et explique pourquoi
- Si l'utilisateur n'a pas d'alternative, sois honnte
- Reste focus sur cette tenue spcifique
- Pas d'actions (gnration) pour le moment, uniquement des conseils

 **FORMAT DE RPONSE JSON** :
{
  "message": "Ta rponse textuelle ici",
  "isRejected": true/false
}

 Mets "isRejected": true UNIQUEMENT si la question est TOTALEMENT hors-sujet mode/style (recette, code, math, histoire, etc.)
 Mets "isRejected": false pour toute question lie  la mode, mme vaguement`;try{const A=(await c6({prompt:x})).data;return{message:A.message,isRejected:A.isRejected}}catch(E){throw console.error("Erreur gnration chat:",E),new Error("Erreur lors de la gnration de la rponse.")}}const m6=Xo(Jo,"analyzeWardrobeGapsFunction");async function p6(t,e){const n={Hauts:t.filter(d=>d.category==="Hauts"),Bas:t.filter(d=>d.category==="Bas"),Chaussures:t.filter(d=>d.category==="Chaussures"),Accessoires:t.filter(d=>d.category==="Accessoires")},r=Object.entries(n).map(([d,f])=>`**${d}** (${f.length}) :
${f.map(h=>`  - ${h.analysis} (${h.color}, ${h.material})`).join(`
`)}`).join(`

`),s=t.length,o=e.length>0,u=`Tu es un expert styliste et conseiller en garde-robe avec 20 ans d'exprience. Ta mission : analyser cette garde-robe et suggrer des achats stratgiques pour maximiser la polyvalence.

 **INVENTAIRE ACTUEL** (${s} pices${o?`, ${e.length} ensembles`:""}) :

${r}

---

 **OBJECTIF DE L'ANALYSE** :
Identifier les **pices manquantes cls** qui permettront de crer le maximum de tenues diffrentes avec l'existant.

 **MTHODOLOGIE** :

1. **ANALYSE STRATGIQUE** :
   - quilibre entre catgories (ratio Hauts/Bas/Chaussures)
   - Diversit des couleurs (neutres vs. vives)
   - Polyvalence des pices existantes
   - Occasions couvertes (casual, formel, sport, etc.)
   - Saisons couvertes

2. **IDENTIFICATION DES GAPS CRITIQUES** :
   - Pices basiques manquantes (ex: chemise blanche, jean brut)
   - Couleurs absentes pour complter les palettes
   - Styles/occasions non couverts
   - Opportunits de layering (superposition)

3. **PRIORISATION** :
   - **HIGH** : Pice essentielle manquante qui dbloque 5+ nouvelles tenues
   - **MEDIUM** : Pice utile qui ajoute de la varit (3-5 tenues)
   - **LOW** : Pice "nice-to-have" pour occasions spcifiques

4. **SUGGESTIONS D'ACHATS** (4-6 pices maximum) :
   - Focus sur la **POLYVALENCE** : chaque suggestion doit se marier avec plusieurs pices existantes
   - Inclure des **pices basiques intemporelles** avant les tendances
   - quilibrer les priorits (au moins 1-2 high priority)
   - Pour chaque suggestion, fournis :
     * Une description prcise (ex: "Chemise oxford bleu clair en coton")
     * La raison stratgique (ex: "Se marie avec vos 3 pantalons et cre une base smart-casual")
     * Un prix estim raliste en 
     * Une requte de recherche optimise (mots-cls pour Zalando/autres boutiques)

---

 **RGLES CRITIQUES** :

- NE suggre PAS de pices similaires  l'existant
- Favorise les neutres (blanc, noir, beige, navy) pour maximiser les combinaisons
- vite les pices trs spcifiques/occasionnelles (sauf si totalement absentes)
- Sois concis mais prcis dans les descriptions
- Le champ \`searchQuery\` doit contenir des mots-cls optimiss pour recherche en ligne (ex: "chemise oxford homme coton bleu clair" ou "pull col V mrinos noir homme")

Retourne ton analyse au format JSON.`;try{return(await m6({prompt:u})).data}catch(d){throw console.error("Erreur analyse garde-robe:",d),new Error("Erreur lors de l'analyse de la garde-robe.")}}const g6=Xo(Jo,"generateVacationPlanFunction");async function v6(t,e,n,r,s){const o=new Set((e||[]).flatMap(x=>x.itemIds)),d=t.filter(x=>!o.has(x.id)&&!x.isExcluded).map(x=>`- ${x.analysis} (ID: ${x.id}, Cat: ${x.category}, Couleur: ${x.color}, Matire: ${x.material})`).join(`
`),f=e.map(x=>`- ${x.name} (Ensemble, ID: ${x.id})`).join(`
`),h=[d,f].filter(Boolean).join(`
`),v=s?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${s} kg. Estime le poids moyen selon ces rfrences ralistes :
- T-shirt : ~150g
- Chemise : ~200g
- Jean/Denim : ~900g
- Pantalon coton/chino : ~500g
- Jogging/Pantalon lger : ~350g
- Pull laine : ~700g
- Sweat : ~400g
- Veste lgre : ~500g
- Manteau/Doudoune : ~1kg
- Chaussures (par paire) : ~1kg
- Baskets (par paire) : ~1kg
- Chaussures de ville cuir : ~1,2kg
- Sous-vtements : ~50g
- Chaussettes : ~50g`:"",b=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${r}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :

   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${v}

**VTEMENTS DISPONIBLES** :
${h}

**SORTIE** :
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`;try{return(await g6({prompt:b})).data}catch(x){throw console.error("Erreur gnration plan vacances:",x),new Error("Erreur lors de la gnration du plan vacances.")}}Xo(Jo,"generateVisualOutfit");const y6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),b6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),o0=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),x6=({className:t="h-8 w-8 text-gold"})=>g.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ed=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),Lm=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),WT=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),QR=()=>g.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),_6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),w6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),E6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),T6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),Zc=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),S6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Op=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),Gb=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),A6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),XR=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),g.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),Um=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),pu=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),l0=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),JR=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ZR=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),C6=({theme:t,toggleTheme:e,children:n,isModalOpen:r=!1})=>g.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${r?"z-10":"z-50"}`,children:g.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[g.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsxs("div",{className:"flex items-center gap-4",children:[n,g.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?g.jsx(b6,{}):g.jsx(y6,{})})]})]})}),R6="DRESSMEUP2025",QT=({user:t})=>{var H,G,q;const[e,n]=N.useState(""),[r,s]=N.useState(""),[o,u]=N.useState(""),[d,f]=N.useState(!1),[h,v]=N.useState(!1),[b,x]=N.useState(null),[E,A]=N.useState(!1),O=N.useRef(null);N.useEffect(()=>{const C=S=>{O.current&&!O.current.contains(S.target)&&v(!1)};return h&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[h]);const M=async C=>{try{return(await E5(Ru(ri,"allowedEmails",C.toLowerCase()))).exists()}catch(S){return console.error("Erreur vrification email:",S),!1}},U=async()=>{A(!0),x(null);try{const S=(await yM(Co,s6)).user.email;if(!S){await ey(Co),x("Impossible de rcuprer l'email du compte Google.");return}if(!await M(S)){await ey(Co),x("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(C){console.error("Erreur de connexion Google:",C),x(C.message||"Erreur de connexion")}finally{A(!1)}},j=async C=>{C.preventDefault(),A(!0),x(null);try{if(d){if(o!==R6){x("Code d'invitation invalide."),A(!1);return}if(!await M(e)){x("Votre email n'est pas dans la liste des beta testeurs."),A(!1);return}await Yj(Co,e,r)}else{if(!await M(e)){x("Votre email n'est pas autoris  accder  la beta."),A(!1);return}await Wj(Co,e,r)}}catch(S){console.error("Erreur d'authentification:",S),S.code==="auth/user-not-found"?x("Aucun compte trouv avec cet email."):S.code==="auth/wrong-password"?x("Mot de passe incorrect."):S.code==="auth/email-already-in-use"?x("Cet email est dj utilis."):S.code==="auth/weak-password"?x("Le mot de passe doit contenir au moins 6 caractres."):x(S.message||"Erreur d'authentification")}finally{A(!1)}},z=async()=>{try{await ey(Co)}catch(C){console.error("Erreur de dconnexion:",C)}};return t?g.jsxs("div",{className:"relative",ref:O,children:[g.jsxs("button",{onClick:()=>v(!h),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((H=t.displayName)==null?void 0:H[0])||((G=t.email)==null?void 0:G[0])||"U").toUpperCase()}),g.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((q=t.email)==null?void 0:q.split("@")[0])})]}),h&&g.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),g.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),g.jsxs("button",{onClick:z,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d?"Rejoindre la beta":"Bienvenue"}),g.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:g.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),b&&g.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:b}),g.jsx("button",{onClick:U,disabled:E,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:E?g.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[g.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),g.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),g.jsxs("form",{onSubmit:j,className:"space-y-4",children:[g.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:C=>n(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),g.jsx("input",{type:"password",placeholder:"Mot de passe",value:r,onChange:C=>s(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),d&&g.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:C=>u(C.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),g.jsx("button",{type:"submit",disabled:E,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:E?g.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Rejoindre la beta":"Se connecter"})]}),g.jsx("button",{onClick:()=>{f(!d),x(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:d?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},$b=N.createContext({});function Kb(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const jp=N.createContext(null),Yb=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class I6 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function N6({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=N.useContext(Yb);return N.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:h}=s.current;if(e||!r.current||!u||!d)return;r.current.dataset.motionPopId=n;const v=document.createElement("style");return o&&(v.nonce=o),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            top: ${f}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[e]),g.jsx(I6,{isPresent:e,childRef:r,sizeRef:s,children:N.cloneElement(t,{ref:r})})}const k6=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:u})=>{const d=Kb(D6),f=N.useId(),h=N.useCallback(b=>{d.set(b,!0);for(const x of d.values())if(!x)return;r&&r()},[d,r]),v=N.useMemo(()=>({id:f,initial:e,isPresent:n,custom:s,onExitComplete:h,register:b=>(d.set(b,!1),()=>d.delete(b))}),o?[Math.random(),h]:[n,h]);return N.useMemo(()=>{d.forEach((b,x)=>d.set(x,!1))},[n]),N.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),u==="popLayout"&&(t=g.jsx(N6,{isPresent:n,children:t})),g.jsx(jp.Provider,{value:v,children:t})};function D6(){return new Map}function eI(t=!0){const e=N.useContext(jp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=N.useId();N.useEffect(()=>{t&&s(o)},[t]);const u=N.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const Rh=t=>t.key||"";function XT(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const Wb=typeof window<"u",tI=Wb?N.useLayoutEffect:N.useEffect,JT=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1})=>{const[d,f]=eI(u),h=N.useMemo(()=>XT(t),[t]),v=u&&!d?[]:h.map(Rh),b=N.useRef(!0),x=N.useRef(h),E=Kb(()=>new Map),[A,O]=N.useState(h),[M,U]=N.useState(h);tI(()=>{b.current=!1,x.current=h;for(let H=0;H<M.length;H++){const G=Rh(M[H]);v.includes(G)?E.delete(G):E.get(G)!==!0&&E.set(G,!1)}},[M,v.length,v.join("-")]);const j=[];if(h!==A){let H=[...h];for(let G=0;G<M.length;G++){const q=M[G],C=Rh(q);v.includes(C)||(H.splice(G,0,q),j.push(q))}o==="wait"&&j.length&&(H=j),U(XT(H)),O(h);return}const{forceRender:z}=N.useContext($b);return g.jsx(g.Fragment,{children:M.map(H=>{const G=Rh(H),q=u&&!d?!1:h===M||v.includes(G),C=()=>{if(E.has(G))E.set(G,!0);else return;let S=!0;E.forEach(I=>{I||(S=!1)}),S&&(z==null||z(),U(x.current),u&&(f==null||f()),r&&r())};return g.jsx(k6,{isPresent:q,initial:!b.current||n?void 0:!1,custom:q?void 0:e,presenceAffectsLayout:s,mode:o,onExitComplete:q?void 0:C,children:H},G)})})},ti=t=>t;let nI=ti;function Qb(t){let e;return()=>(e===void 0&&(e=t()),e)}const gu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ds=t=>t*1e3,Os=t=>t/1e3,O6={useManualTiming:!1};function j6(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(h){o.has(h)&&(f.schedule(h),t()),h(u)}const f={schedule:(h,v=!1,b=!1)=>{const E=b&&r?e:n;return v&&o.add(h),E.has(h)||E.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(u=h,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(d),e.clear(),r=!1,s&&(s=!1,f.process(h))}};return f}const Ih=["read","resolveKeyframes","update","preRender","render","postRender"],M6=40;function rI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Ih.reduce((U,j)=>(U[j]=j6(o),U),{}),{read:d,resolveKeyframes:f,update:h,preRender:v,render:b,postRender:x}=u,E=()=>{const U=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(U-s.timestamp,M6),1),s.timestamp=U,s.isProcessing=!0,d.process(s),f.process(s),h.process(s),v.process(s),b.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(E))},A=()=>{n=!0,r=!0,s.isProcessing||t(E)};return{schedule:Ih.reduce((U,j)=>{const z=u[j];return U[j]=(H,G=!1,q=!1)=>(n||A(),z.schedule(H,G,q)),U},{}),cancel:U=>{for(let j=0;j<Ih.length;j++)u[Ih[j]].cancel(U)},state:s,steps:u}}const{schedule:Zt,cancel:Ga,state:Jn,steps:ly}=rI(typeof requestAnimationFrame<"u"?requestAnimationFrame:ti,!0),iI=N.createContext({strict:!1}),ZT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vu={};for(const t in ZT)vu[t]={isEnabled:e=>ZT[t].some(n=>!!e[n])};function P6(t){for(const e in t)vu[e]={...vu[e],...t[e]}}const V6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||V6.has(t)}let sI=t=>!zm(t);function L6(t){t&&(sI=e=>e.startsWith("on")?!zm(e):t(e))}try{L6(require("@emotion/is-prop-valid").default)}catch{}function U6(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(sI(s)||n===!0&&zm(s)||!e&&!zm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function z6(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Mp=N.createContext({});function Td(t){return typeof t=="string"||Array.isArray(t)}function Pp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jb=["initial",...Xb];function Vp(t){return Pp(t.animate)||Jb.some(e=>Td(t[e]))}function aI(t){return!!(Vp(t)||t.variants)}function B6(t,e){if(Vp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Td(n)?n:void 0,animate:Td(r)?r:void 0}}return t.inherit!==!1?e:{}}function F6(t){const{initial:e,animate:n}=B6(t,N.useContext(Mp));return N.useMemo(()=>({initial:e,animate:n}),[eS(e),eS(n)])}function eS(t){return Array.isArray(t)?t.join(" "):t}const q6=Symbol.for("motionComponentSymbol");function Yl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function H6(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yl(n)&&(n.current=r))},[e])}const Zb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),G6="framerAppearId",oI="data-"+Zb(G6),{schedule:ex}=rI(queueMicrotask,!1),lI=N.createContext({});function $6(t,e,n,r,s){var o,u;const{visualElement:d}=N.useContext(Mp),f=N.useContext(iI),h=N.useContext(jp),v=N.useContext(Yb).reducedMotion,b=N.useRef(null);r=r||f.renderer,!b.current&&r&&(b.current=r(t,{visualState:e,parent:d,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:v}));const x=b.current,E=N.useContext(lI);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&K6(b.current,n,s,E);const A=N.useRef(!1);N.useInsertionEffect(()=>{x&&A.current&&x.update(n,h)});const O=n[oI],M=N.useRef(!!O&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,O))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,O)));return tI(()=>{x&&(A.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),ex.render(x.render),M.current&&x.animationState&&x.animationState.animateChanges())}),N.useEffect(()=>{x&&(!M.current&&x.animationState&&x.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)===null||U===void 0||U.call(window,O)}),M.current=!1))}),x}function K6(t,e,n,r){const{layoutId:s,layout:o,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:uI(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||d&&Yl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:h})}function uI(t){if(t)return t.options.allowProjection!==!1?t.projection:uI(t.parent)}function Y6({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,u;t&&P6(t);function d(h,v){let b;const x={...N.useContext(Yb),...h,layoutId:W6(h)},{isStatic:E}=x,A=F6(h),O=r(h,E);if(!E&&Wb){Q6();const M=X6(x);b=M.MeasureLayout,A.visualElement=$6(s,O,x,e,M.ProjectionNode)}return g.jsxs(Mp.Provider,{value:A,children:[b&&A.visualElement?g.jsx(b,{visualElement:A.visualElement,...x}):null,n(s,h,H6(O,A.visualElement,v),O,E,A.visualElement)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${(u=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&u!==void 0?u:""})`}`;const f=N.forwardRef(d);return f[q6]=s,f}function W6({layoutId:t}){const e=N.useContext($b).id;return e&&t!==void 0?e+"-"+t:t}function Q6(t,e){N.useContext(iI).strict}function X6(t){const{drag:e,layout:n}=vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const J6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tx(t){return typeof t!="string"||t.includes("-")?!1:!!(J6.indexOf(t)>-1||/[A-Z]/u.test(t))}function tS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function nx(t,e,n,r){if(typeof e=="function"){const[s,o]=tS(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=tS(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const u0=t=>Array.isArray(t),Z6=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),eU=t=>u0(t)?t[t.length-1]||0:t,mr=t=>!!(t&&t.getVelocity);function am(t){const e=mr(t)?t.get():t;return Z6(e)?e.toValue():e}function tU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const u={latestValues:nU(r,s,o,t),renderState:e()};return n&&(u.onMount=d=>n({props:r,current:d,...u}),u.onUpdate=d=>n(d)),u}const cI=t=>(e,n)=>{const r=N.useContext(Mp),s=N.useContext(jp),o=()=>tU(t,e,r,s);return n?o():Kb(o)};function nU(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=am(o[x]);let{initial:u,animate:d}=t;const f=Vp(t),h=aI(t);e&&h&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let v=n?n.initial===!1:!1;v=v||u===!1;const b=v?d:u;if(b&&typeof b!="boolean"&&!Pp(b)){const x=Array.isArray(b)?b:[b];for(let E=0;E<x.length;E++){const A=nx(t,x[E]);if(A){const{transitionEnd:O,transition:M,...U}=A;for(const j in U){let z=U[j];if(Array.isArray(z)){const H=v?z.length-1:0;z=z[H]}z!==null&&(s[j]=z)}for(const j in O)s[j]=O[j]}}}return s}const Iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zo=new Set(Iu),dI=t=>e=>typeof e=="string"&&e.startsWith(t),fI=dI("--"),rU=dI("var(--"),rx=t=>rU(t)?iU.test(t.split("/*")[0].trim()):!1,iU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Us=(t,e,n)=>n>e?e:n<t?t:n,Nu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sd={...Nu,transform:t=>Us(0,1,t)},Nh={...Nu,default:1},$d=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wa=$d("deg"),ns=$d("%"),Pe=$d("px"),sU=$d("vh"),aU=$d("vw"),nS={...ns,parse:t=>ns.parse(t)/100,transform:t=>ns.transform(t*100)},oU={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe},lU={rotate:wa,rotateX:wa,rotateY:wa,rotateZ:wa,scale:Nh,scaleX:Nh,scaleY:Nh,scaleZ:Nh,skew:wa,skewX:wa,skewY:wa,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Sd,originX:nS,originY:nS,originZ:Pe},rS={...Nu,transform:Math.round},ix={...oU,...lU,zIndex:rS,size:Pe,fillOpacity:Sd,strokeOpacity:Sd,numOctaves:rS},uU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cU=Iu.length;function dU(t,e,n){let r="",s=!0;for(let o=0;o<cU;o++){const u=Iu[o],d=t[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const h=hI(d,ix[u]);if(!f){s=!1;const v=uU[u]||u;r+=`${v}(${h}) `}n&&(e[u]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function sx(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let u=!1,d=!1;for(const f in e){const h=e[f];if(Zo.has(f)){u=!0;continue}else if(fI(f)){s[f]=h;continue}else{const v=hI(h,ix[f]);f.startsWith("origin")?(d=!0,o[f]=v):r[f]=v}}if(e.transform||(u||n?r.transform=dU(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:f="50%",originY:h="50%",originZ:v=0}=o;r.transformOrigin=`${f} ${h} ${v}`}}const fU={offset:"stroke-dashoffset",array:"stroke-dasharray"},hU={offset:"strokeDashoffset",array:"strokeDasharray"};function mU(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?fU:hU;t[o.offset]=Pe.transform(-r);const u=Pe.transform(e),d=Pe.transform(n);t[o.array]=`${u} ${d}`}function iS(t,e,n){return typeof t=="string"?t:Pe.transform(e+n*t)}function pU(t,e,n){const r=iS(e,t.x,t.width),s=iS(n,t.y,t.height);return`${r} ${s}`}function ax(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...h},v,b){if(sx(t,h,b),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:E,dimensions:A}=t;x.transform&&(A&&(E.transform=x.transform),delete x.transform),A&&(s!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=pU(A,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),u!==void 0&&mU(x,u,d,f,!1)}const ox=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),mI=()=>({...ox(),attrs:{}}),lx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pI(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const gI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vI(t,e,n,r){pI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(gI.has(s)?s:Zb(s),e.attrs[s])}const Bm={};function gU(t){Object.assign(Bm,t)}function yI(t,{layout:e,layoutId:n}){return Zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bm[t]||t==="opacity")}function ux(t,e,n){var r;const{style:s}=t,o={};for(const u in s)(mr(s[u])||e.style&&mr(e.style[u])||yI(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[u]=s[u]);return o}function bI(t,e,n){const r=ux(t,e,n);for(const s in t)if(mr(t[s])||mr(e[s])){const o=Iu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function vU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const sS=["x","y","width","height","cx","cy","r"],yU={useVisualState:cI({scrapeMotionValuesFromProps:bI,createRenderState:mI,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in s)if(Zo.has(d)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let d=0;d<sS.length;d++){const f=sS[d];t[f]!==e[f]&&(u=!0)}u&&Zt.read(()=>{vU(n,r),Zt.render(()=>{ax(r,s,lx(n.tagName),t.transformTemplate),vI(n,r)})})}})},bU={useVisualState:cI({scrapeMotionValuesFromProps:ux,createRenderState:ox})};function xI(t,e,n){for(const r in e)!mr(e[r])&&!yI(r,n)&&(t[r]=e[r])}function xU({transformTemplate:t},e){return N.useMemo(()=>{const n=ox();return sx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _U(t,e){const n=t.style||{},r={};return xI(r,n,t),Object.assign(r,xU(t,e)),r}function wU(t,e){const n={},r=_U(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function EU(t,e,n,r){const s=N.useMemo(()=>{const o=mI();return ax(o,e,lx(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};xI(o,t.style,t),s.style={...o,...s.style}}return s}function TU(t=!1){return(n,r,s,{latestValues:o},u)=>{const f=(tx(n)?EU:wU)(r,o,u,n),h=U6(r,typeof n=="string",t),v=n!==N.Fragment?{...h,...f,ref:s}:{},{children:b}=r,x=N.useMemo(()=>mr(b)?b.get():b,[b]);return N.createElement(n,{...v,children:x})}}function SU(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...tx(r)?yU:bU,preloadedFeatures:t,useRender:TU(s),createVisualElement:e,Component:r};return Y6(u)}}function _I(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Lp(t,e,n){const r=t.getProps();return nx(r,e,n!==void 0?n:r.custom,t)}const AU=Qb(()=>window.ScrollTimeline!==void 0);class CU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(AU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class RU extends CU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function cx(t,e){return t?t[e]||t.default||t:void 0}const c0=2e4;function wI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<c0;)e+=n,r=t.next(e);return e>=c0?1/0:e}function dx(t){return typeof t=="function"}function aS(t,e){t.timeline=e,t.onfinish=null}const fx=t=>Array.isArray(t)&&typeof t[0]=="number",IU={linearEasing:void 0};function NU(t,e){const n=Qb(t);return()=>{var r;return(r=IU[e])!==null&&r!==void 0?r:n()}}const Fm=NU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),EI=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(gu(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function TI(t){return!!(typeof t=="function"&&Fm()||!t||typeof t=="string"&&(t in d0||Fm())||fx(t)||Array.isArray(t)&&t.every(TI))}const Uc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,d0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uc([0,.65,.55,1]),circOut:Uc([.55,0,1,.45]),backIn:Uc([.31,.01,.66,-.59]),backOut:Uc([.33,1.53,.69,.99])};function SI(t,e){if(t)return typeof t=="function"&&Fm()?EI(t,e):fx(t)?Uc(t):Array.isArray(t)?t.map(n=>SI(n,e)||d0.easeOut):d0[t]}const ki={x:!1,y:!1};function AI(){return ki.x||ki.y}function kU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function CI(t,e){const n=kU(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function oS(t){return e=>{e.pointerType==="touch"||AI()||t(e)}}function DU(t,e,n={}){const[r,s,o]=CI(t,n),u=oS(d=>{const{target:f}=d,h=e(d);if(typeof h!="function"||!f)return;const v=oS(b=>{h(b),f.removeEventListener("pointerleave",v)});f.addEventListener("pointerleave",v,s)});return r.forEach(d=>{d.addEventListener("pointerenter",u,s)}),o}const RI=(t,e)=>e?t===e?!0:RI(t,e.parentElement):!1,hx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,OU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jU(t){return OU.has(t.tagName)||t.tabIndex!==-1}const zc=new WeakSet;function lS(t){return e=>{e.key==="Enter"&&t(e)}}function uy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=lS(()=>{if(zc.has(n))return;uy(n,"down");const s=lS(()=>{uy(n,"up")}),o=()=>uy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function uS(t){return hx(t)&&!AI()}function PU(t,e,n={}){const[r,s,o]=CI(t,n),u=d=>{const f=d.currentTarget;if(!uS(d)||zc.has(f))return;zc.add(f);const h=e(d),v=(E,A)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),!(!uS(E)||!zc.has(f))&&(zc.delete(f),typeof h=="function"&&h(E,{success:A}))},b=E=>{v(E,n.useGlobalTarget||RI(f,E.target))},x=E=>{v(E,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",x,s)};return r.forEach(d=>{!jU(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,s),d.addEventListener("focus",h=>MU(h,s),s)}),o}function VU(t){return t==="x"||t==="y"?ki[t]?null:(ki[t]=!0,()=>{ki[t]=!1}):ki.x||ki.y?null:(ki.x=ki.y=!0,()=>{ki.x=ki.y=!1})}const II=new Set(["width","height","top","left","right","bottom",...Iu]);let om;function LU(){om=void 0}const rs={now:()=>(om===void 0&&rs.set(Jn.isProcessing||O6.useManualTiming?Jn.timestamp:performance.now()),om),set:t=>{om=t,queueMicrotask(LU)}};function mx(t,e){t.indexOf(e)===-1&&t.push(e)}function px(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gx{constructor(){this.subscriptions=[]}add(e){return mx(this.subscriptions,e),()=>px(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function NI(t,e){return e?t*(1e3/e):0}const cS=30,UU=t=>!isNaN(parseFloat(t));class zU{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=rs.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=rs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cS);return NI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ad(t,e){return new zU(t,e)}function BU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ad(n))}function FU(t,e){const n=Lp(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const u in o){const d=eU(o[u]);BU(t,u,d)}}function qU(t){return!!(mr(t)&&t.add)}function f0(t,e){const n=t.getValue("willChange");if(qU(n))return n.add(e)}function kI(t){return t.props[oI]}const DI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HU=1e-7,GU=12;function $U(t,e,n,r,s){let o,u,d=0;do u=e+(n-e)/2,o=DI(u,r,s)-t,o>0?n=u:e=u;while(Math.abs(o)>HU&&++d<GU);return u}function Kd(t,e,n,r){if(t===e&&n===r)return ti;const s=o=>$U(o,0,1,t,n);return o=>o===0||o===1?o:DI(s(o),e,r)}const OI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jI=t=>e=>1-t(1-e),MI=Kd(.33,1.53,.69,.99),vx=jI(MI),PI=OI(vx),VI=t=>(t*=2)<1?.5*vx(t):.5*(2-Math.pow(2,-10*(t-1))),yx=t=>1-Math.sin(Math.acos(t)),LI=jI(yx),UI=OI(yx),zI=t=>/^0[^.\s]+$/u.test(t);function KU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zI(t):!0}const ed=t=>Math.round(t*1e5)/1e5,bx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YU(t){return t==null}const WU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xx=(t,e)=>n=>!!(typeof n=="string"&&WU.test(n)&&n.startsWith(t)||e&&!YU(n)&&Object.prototype.hasOwnProperty.call(n,e)),BI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,u,d]=r.match(bx);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},QU=t=>Us(0,255,t),cy={...Nu,transform:t=>Math.round(QU(t))},Oo={test:xx("rgb","red"),parse:BI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cy.transform(t)+", "+cy.transform(e)+", "+cy.transform(n)+", "+ed(Sd.transform(r))+")"};function XU(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const h0={test:xx("#"),parse:XU,transform:Oo.transform},Wl={test:xx("hsl","hue"),parse:BI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ns.transform(ed(e))+", "+ns.transform(ed(n))+", "+ed(Sd.transform(r))+")"},cr={test:t=>Oo.test(t)||h0.test(t)||Wl.test(t),parse:t=>Oo.test(t)?Oo.parse(t):Wl.test(t)?Wl.parse(t):h0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oo.transform(t):Wl.transform(t)},JU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ZU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bx))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JU))===null||n===void 0?void 0:n.length)||0)>0}const FI="number",qI="color",e9="var",t9="var(",dS="${}",n9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(n9,f=>(cr.test(f)?(r.color.push(o),s.push(qI),n.push(cr.parse(f))):f.startsWith(t9)?(r.var.push(o),s.push(e9),n.push(f)):(r.number.push(o),s.push(FI),n.push(parseFloat(f))),++o,dS)).split(dS);return{values:n,split:d,indexes:r,types:s}}function HI(t){return Cd(t).values}function GI(t){const{split:e,types:n}=Cd(t),r=e.length;return s=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],s[u]!==void 0){const d=n[u];d===FI?o+=ed(s[u]):d===qI?o+=cr.transform(s[u]):o+=s[u]}return o}}const r9=t=>typeof t=="number"?0:t;function i9(t){const e=HI(t);return GI(t)(e.map(r9))}const $a={test:ZU,parse:HI,createTransformer:GI,getAnimatableNone:i9},s9=new Set(["brightness","contrast","saturate","opacity"]);function a9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bx)||[];if(!r)return t;const s=n.replace(r,"");let o=s9.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const o9=/\b([a-z-]*)\(.*?\)/gu,m0={...$a,getAnimatableNone:t=>{const e=t.match(o9);return e?e.map(a9).join(" "):t}},l9={...ix,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:m0,WebkitFilter:m0},_x=t=>l9[t];function $I(t,e){let n=_x(t);return n!==m0&&(n=$a),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const u9=new Set(["auto","none","0"]);function c9(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!u9.has(o)&&Cd(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=$I(n,s)}const fS=t=>t===Nu||t===Pe,hS=(t,e)=>parseFloat(t.split(", ")[e]),mS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return hS(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?hS(o[1],t):0}},d9=new Set(["x","y","z"]),f9=Iu.filter(t=>!d9.has(t));function h9(t){const e=[];return f9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:mS(4,13),y:mS(5,14)};yu.translateX=yu.x;yu.translateY=yu.y;const Po=new Set;let p0=!1,g0=!1;function KI(){if(g0){const t=Array.from(Po).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=h9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,u])=>{var d;(d=r.getValue(o))===null||d===void 0||d.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}g0=!1,p0=!1,Po.forEach(t=>t.complete()),Po.clear()}function YI(){Po.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(g0=!0)})}function m9(){YI(),KI()}class wx{constructor(e,n,r,s,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Po.add(this),p0||(p0=!0,Zt.read(YI),Zt.resolveKeyframes(KI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=s==null?void 0:s.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const f=r.readValue(n,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),s&&u===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Po.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Po.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const WI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),p9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g9(t){const e=p9.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function QI(t,e,n=1){const[r,s]=g9(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return WI(u)?parseFloat(u):u}return rx(s)?QI(s,e,n+1):s}const XI=t=>e=>e.test(t),v9={test:t=>t==="auto",parse:t=>t},JI=[Nu,Pe,ns,wa,aU,sU,v9],pS=t=>JI.find(XI(t));class ZI extends wx{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),rx(h))){const v=QI(h,n.current);v!==void 0&&(e[f]=v),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!II.has(r)||e.length!==2)return;const[s,o]=e,u=pS(s),d=pS(o);if(u!==d)if(fS(u)&&fS(d))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)KU(e[s])&&r.push(s);r.length&&c9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const u=s.length-1,d=s[u];s[u]=yu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,h])=>{n.getValue(f).set(h)}),this.resolveNoneKeyframes()}}const gS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($a.test(t)||t==="0")&&!t.startsWith("url("));function y9(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function b9(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=gS(s,e),d=gS(o,e);return!u||!d?!1:y9(t)||(n==="spring"||dx(n))&&r}const x9=t=>t!==null;function Up(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(x9),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const _9=40;class eN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rs.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_9?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&m9(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=rs.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:u,onComplete:d,onUpdate:f,isGenerator:h}=this.options;if(!h&&!b9(e,r,s,o))if(u)this.options.duration=0;else{f&&f(Up(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const v=this.initPlayback(e,n);v!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rn=(t,e,n)=>t+(e-t)*n;function dy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;s=dy(f,d,t+1/3),o=dy(f,d,t),u=dy(f,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function qm(t,e){return n=>n>0?e:t}const fy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},E9=[h0,Oo,Wl],T9=t=>E9.find(e=>e.test(t));function vS(t){const e=T9(t);if(!e)return!1;let n=e.parse(t);return e===Wl&&(n=w9(n)),n}const yS=(t,e)=>{const n=vS(t),r=vS(e);if(!n||!r)return qm(t,e);const s={...n};return o=>(s.red=fy(n.red,r.red,o),s.green=fy(n.green,r.green,o),s.blue=fy(n.blue,r.blue,o),s.alpha=rn(n.alpha,r.alpha,o),Oo.transform(s))},S9=(t,e)=>n=>e(t(n)),Yd=(...t)=>t.reduce(S9),v0=new Set(["none","hidden"]);function A9(t,e){return v0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function C9(t,e){return n=>rn(t,e,n)}function Ex(t){return typeof t=="number"?C9:typeof t=="string"?rx(t)?qm:cr.test(t)?yS:N9:Array.isArray(t)?tN:typeof t=="object"?cr.test(t)?yS:R9:qm}function tN(t,e){const n=[...t],r=n.length,s=t.map((o,u)=>Ex(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=s[u](o);return n}}function R9(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ex(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function I9(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][s[u]],f=(n=t.values[d])!==null&&n!==void 0?n:0;r[o]=f,s[u]++}return r}const N9=(t,e)=>{const n=$a.createTransformer(e),r=Cd(t),s=Cd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?v0.has(t)&&!s.values.length||v0.has(e)&&!r.values.length?A9(t,e):Yd(tN(I9(r,s),s.values),n):qm(t,e)};function nN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rn(t,e,n):Ex(t)(t,e)}const k9=5;function rN(t,e,n){const r=Math.max(e-k9,0);return NI(n-t(r),e-r)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hy=.001;function D9({duration:t=mn.duration,bounce:e=mn.bounce,velocity:n=mn.velocity,mass:r=mn.mass}){let s,o,u=1-e;u=Us(mn.minDamping,mn.maxDamping,u),t=Us(mn.minDuration,mn.maxDuration,Os(t)),u<1?(s=h=>{const v=h*u,b=v*t,x=v-n,E=y0(h,u),A=Math.exp(-b);return hy-x/E*A},o=h=>{const b=h*u*t,x=b*n+n,E=Math.pow(u,2)*Math.pow(h,2)*t,A=Math.exp(-b),O=y0(Math.pow(h,2),u);return(-s(h)+hy>0?-1:1)*((x-E)*A)/O}):(s=h=>{const v=Math.exp(-h*t),b=(h-n)*t+1;return-hy+v*b},o=h=>{const v=Math.exp(-h*t),b=(n-h)*(t*t);return v*b});const d=5/t,f=j9(s,o,d);if(t=Ds(t),isNaN(f))return{stiffness:mn.stiffness,damping:mn.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:u*2*Math.sqrt(r*h),duration:t}}}const O9=12;function j9(t,e,n){let r=n;for(let s=1;s<O9;s++)r=r-t(r)/e(r);return r}function y0(t,e){return t*Math.sqrt(1-e*e)}const M9=["duration","bounce"],P9=["stiffness","damping","mass"];function bS(t,e){return e.some(n=>t[n]!==void 0)}function V9(t){let e={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...t};if(!bS(t,P9)&&bS(t,M9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Us(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:mn.mass,stiffness:s,damping:o}}else{const n=D9(t);e={...e,...n,mass:mn.mass},e.isResolvedFromDuration=!0}return e}function iN(t=mn.visualDuration,e=mn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:f,damping:h,mass:v,duration:b,velocity:x,isResolvedFromDuration:E}=V9({...n,velocity:-Os(n.velocity||0)}),A=x||0,O=h/(2*Math.sqrt(f*v)),M=u-o,U=Os(Math.sqrt(f/v)),j=Math.abs(M)<5;r||(r=j?mn.restSpeed.granular:mn.restSpeed.default),s||(s=j?mn.restDelta.granular:mn.restDelta.default);let z;if(O<1){const G=y0(U,O);z=q=>{const C=Math.exp(-O*U*q);return u-C*((A+O*U*M)/G*Math.sin(G*q)+M*Math.cos(G*q))}}else if(O===1)z=G=>u-Math.exp(-U*G)*(M+(A+U*M)*G);else{const G=U*Math.sqrt(O*O-1);z=q=>{const C=Math.exp(-O*U*q),S=Math.min(G*q,300);return u-C*((A+O*U*M)*Math.sinh(S)+G*M*Math.cosh(S))/G}}const H={calculatedDuration:E&&b||null,next:G=>{const q=z(G);if(E)d.done=G>=b;else{let C=0;O<1&&(C=G===0?Ds(A):rN(z,G,q));const S=Math.abs(C)<=r,I=Math.abs(u-q)<=s;d.done=S&&I}return d.value=d.done?u:q,d},toString:()=>{const G=Math.min(wI(H),c0),q=EI(C=>H.next(G*C).value,G,30);return G+"ms "+q}};return H}function xS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:f,restDelta:h=.5,restSpeed:v}){const b=t[0],x={done:!1,value:b},E=S=>d!==void 0&&S<d||f!==void 0&&S>f,A=S=>d===void 0?f:f===void 0||Math.abs(d-S)<Math.abs(f-S)?d:f;let O=n*e;const M=b+O,U=u===void 0?M:u(M);U!==M&&(O=U-b);const j=S=>-O*Math.exp(-S/r),z=S=>U+j(S),H=S=>{const I=j(S),L=z(S);x.done=Math.abs(I)<=h,x.value=x.done?U:L};let G,q;const C=S=>{E(x.value)&&(G=S,q=iN({keyframes:[x.value,A(x.value)],velocity:rN(z,S,x.value),damping:s,stiffness:o,restDelta:h,restSpeed:v}))};return C(0),{calculatedDuration:null,next:S=>{let I=!1;return!q&&G===void 0&&(I=!0,H(S),C(S)),G!==void 0&&S>=G?q.next(S-G):(!I&&H(S),x)}}}const L9=Kd(.42,0,1,1),U9=Kd(0,0,.58,1),sN=Kd(.42,0,.58,1),z9=t=>Array.isArray(t)&&typeof t[0]!="number",B9={linear:ti,easeIn:L9,easeInOut:sN,easeOut:U9,circIn:yx,circInOut:UI,circOut:LI,backIn:vx,backInOut:PI,backOut:MI,anticipate:VI},_S=t=>{if(fx(t)){nI(t.length===4);const[e,n,r,s]=t;return Kd(e,n,r,s)}else if(typeof t=="string")return B9[t];return t};function F9(t,e,n){const r=[],s=n||nN,o=t.length-1;for(let u=0;u<o;u++){let d=s(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||ti:e;d=Yd(f,d)}r.push(d)}return r}function q9(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(nI(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=F9(e,r,s),f=d.length,h=v=>{if(u&&v<t[0])return e[0];let b=0;if(f>1)for(;b<t.length-2&&!(v<t[b+1]);b++);const x=gu(t[b],t[b+1],v);return d[b](x)};return n?v=>h(Us(t[0],t[o-1],v)):h}function H9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=gu(0,e,r);t.push(rn(n,1,s))}}function G9(t){const e=[0];return H9(e,t.length-1),e}function $9(t,e){return t.map(n=>n*e)}function K9(t,e){return t.map(()=>e||sN).splice(0,t.length-1)}function Hm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=z9(r)?r.map(_S):_S(r),o={done:!1,value:e[0]},u=$9(n&&n.length===e.length?n:G9(e),t),d=q9(u,e,{ease:Array.isArray(s)?s:K9(e,s)});return{calculatedDuration:t,next:f=>(o.value=d(f),o.done=f>=t,o)}}const Y9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Zt.update(e,!0),stop:()=>Ga(e),now:()=>Jn.isProcessing?Jn.timestamp:rs.now()}},W9={decay:xS,inertia:xS,tween:Hm,keyframes:Hm,spring:iN},Q9=t=>t/100;class Tx extends eN{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,u=(s==null?void 0:s.KeyframeResolver)||wx,d=(f,h)=>this.onKeyframesResolved(f,h);this.resolver=new u(o,d,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=this.options,d=dx(n)?n:W9[n]||Hm;let f,h;d!==Hm&&typeof e[0]!="number"&&(f=Yd(Q9,nN(e[0],e[1])),e=[0,100]);const v=d({...this.options,keyframes:e});o==="mirror"&&(h=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=wI(v));const{calculatedDuration:b}=v,x=b+s,E=x*(r+1)-s;return{generator:v,mirroredGenerator:h,mapPercentToKeyframes:f,calculatedDuration:b,resolvedDuration:x,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:h,totalDuration:v,resolvedDuration:b}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:E,repeatType:A,repeatDelay:O,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const U=this.currentTime-x*(this.speed>=0?1:-1),j=this.speed>=0?U<0:U>v;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let z=this.currentTime,H=o;if(E){const S=Math.min(this.currentTime,v)/b;let I=Math.floor(S),L=S%1;!L&&S>=1&&(L=1),L===1&&I--,I=Math.min(I,E+1),!!(I%2)&&(A==="reverse"?(L=1-L,O&&(L-=O/b)):A==="mirror"&&(H=u)),z=Us(0,1,L)*b}const G=j?{done:!1,value:f[0]}:H.next(z);d&&(G.value=d(G.value));let{done:q}=G;!j&&h!==null&&(q=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return C&&s!==void 0&&(G.value=Up(f,this.options,s)),M&&M(G.value),C&&this.finish(),G}get duration(){const{resolved:e}=this;return e?Os(e.calculatedDuration):0}get time(){return Os(this.currentTime)}set time(e){e=Ds(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Os(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Y9,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const X9=new Set(["opacity","clipPath","filter","transform"]);function J9(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:d="easeInOut",times:f}={}){const h={[e]:n};f&&(h.offset=f);const v=SI(d,s);return Array.isArray(v)&&(h.easing=v),t.animate(h,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const Z9=Qb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gm=10,e8=2e4;function t8(t){return dx(t.type)||t.type==="spring"||!TI(t.ease)}function n8(t,e){const n=new Tx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<e8;)r=n.sample(o),s.push(r.value),o+=Gm;return{times:void 0,keyframes:s,duration:o-Gm,ease:"linear"}}const aN={anticipate:VI,backInOut:PI,circInOut:UI};function r8(t){return t in aN}class wS extends eN{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new ZI(o,(u,d)=>this.onKeyframesResolved(u,d),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:u,motionValue:d,name:f,startTime:h}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&Fm()&&r8(o)&&(o=aN[o]),t8(this.options)){const{onComplete:b,onUpdate:x,motionValue:E,element:A,...O}=this.options,M=n8(e,O);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,s=M.times,o=M.ease,u="keyframes"}const v=J9(d.owner.current,f,e,{...this.options,duration:r,times:s,ease:o});return v.startTime=h??this.calcStartTime(),this.pendingTimeline?(aS(v,this.pendingTimeline),this.pendingTimeline=void 0):v.onfinish=()=>{const{onComplete:b}=this.options;d.set(Up(e,this.options,n)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:v,duration:r,times:s,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Os(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Os(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ds(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ti;const{animation:r}=n;aS(r,e)}return ti}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:u,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:v,onComplete:b,element:x,...E}=this.options,A=new Tx({...E,keyframes:r,duration:s,type:o,ease:u,times:d,isGenerator:!0}),O=Ds(this.time);h.setWithVelocity(A.sample(O-Gm).value,A.sample(O).value,Gm)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:u,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=n.owner.getProps();return Z9()&&r&&X9.has(r)&&!f&&!h&&!s&&o!=="mirror"&&u!==0&&d!=="inertia"}}const i8={type:"spring",stiffness:500,damping:25,restSpeed:10},s8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),a8={type:"keyframes",duration:.8},o8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l8=(t,{keyframes:e})=>e.length>2?a8:Zo.has(t)?t.startsWith("scale")?s8(e[1]):i8:o8;function u8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:d,from:f,elapsed:h,...v}){return!!Object.keys(v).length}const Sx=(t,e,n,r={},s,o)=>u=>{const d=cx(r,t)||{},f=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ds(f);let v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};u8(d)||(v={...v,...l8(t,v)}),v.duration&&(v.duration=Ds(v.duration)),v.repeatDelay&&(v.repeatDelay=Ds(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let b=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(b=!0)),b&&!o&&e.get()!==void 0){const x=Up(v.keyframes,d);if(x!==void 0)return Zt.update(()=>{v.onUpdate(x),v.onComplete()}),new RU([])}return!o&&wS.supports(v)?new wS(v):new Tx(v)};function c8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function oN(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:d,...f}=e;r&&(u=r);const h=[],v=s&&t.animationState&&t.animationState.getState()[s];for(const b in f){const x=t.getValue(b,(o=t.latestValues[b])!==null&&o!==void 0?o:null),E=f[b];if(E===void 0||v&&c8(v,b))continue;const A={delay:n,...cx(u||{},b)};let O=!1;if(window.MotionHandoffAnimation){const U=kI(t);if(U){const j=window.MotionHandoffAnimation(U,b,Zt);j!==null&&(A.startTime=j,O=!0)}}f0(t,b),x.start(Sx(b,x,E,t.shouldReduceMotion&&II.has(b)?{type:!1}:A,t,O));const M=x.animation;M&&h.push(M)}return d&&Promise.all(h).then(()=>{Zt.update(()=>{d&&FU(t,d)})}),h}function b0(t,e,n={}){var r;const s=Lp(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const u=s?()=>Promise.all(oN(t,s,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:v=0,staggerChildren:b,staggerDirection:x}=o;return d8(t,e,v+h,b,x,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[h,v]=f==="beforeChildren"?[u,d]:[d,u];return h().then(()=>v())}else return Promise.all([u(),d(n.delay)])}function d8(t,e,n=0,r=0,s=1,o){const u=[],d=(t.variantChildren.size-1)*r,f=s===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(f8).forEach((h,v)=>{h.notify("AnimationStart",e),u.push(b0(h,e,{...o,delay:n+f(v)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(u)}function f8(t,e){return t.sortNodePosition(e)}function h8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>b0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=b0(t,e,n);else{const s=typeof e=="function"?Lp(t,e,n.custom):e;r=Promise.all(oN(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const m8=Jb.length;function lN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<m8;n++){const r=Jb[n],s=t.props[r];(Td(s)||s===!1)&&(e[r]=s)}return e}const p8=[...Xb].reverse(),g8=Xb.length;function v8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>h8(t,n,r)))}function y8(t){let e=v8(t),n=ES(),r=!0;const s=f=>(h,v)=>{var b;const x=Lp(t,v,f==="exit"?(b=t.presenceContext)===null||b===void 0?void 0:b.custom:void 0);if(x){const{transition:E,transitionEnd:A,...O}=x;h={...h,...O,...A}}return h};function o(f){e=f(t)}function u(f){const{props:h}=t,v=lN(t.parent)||{},b=[],x=new Set;let E={},A=1/0;for(let M=0;M<g8;M++){const U=p8[M],j=n[U],z=h[U]!==void 0?h[U]:v[U],H=Td(z),G=U===f?j.isActive:null;G===!1&&(A=M);let q=z===v[U]&&z!==h[U]&&H;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),j.protectedKeys={...E},!j.isActive&&G===null||!z&&!j.prevProp||Pp(z)||typeof z=="boolean")continue;const C=b8(j.prevProp,z);let S=C||U===f&&j.isActive&&!q&&H||M>A&&H,I=!1;const L=Array.isArray(z)?z:[z];let P=L.reduce(s(U),{});G===!1&&(P={});const{prevResolvedValues:V={}}=j,k={...V,...P},ve=re=>{S=!0,x.has(re)&&(I=!0,x.delete(re)),j.needsAnimating[re]=!0;const ue=t.getValue(re);ue&&(ue.liveStyle=!1)};for(const re in k){const ue=P[re],_e=V[re];if(E.hasOwnProperty(re))continue;let we=!1;u0(ue)&&u0(_e)?we=!_I(ue,_e):we=ue!==_e,we?ue!=null?ve(re):x.add(re):ue!==void 0&&x.has(re)?ve(re):j.protectedKeys[re]=!0}j.prevProp=z,j.prevResolvedValues=P,j.isActive&&(E={...E,...P}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(q&&C)||I)&&b.push(...L.map(re=>({animation:re,options:{type:U}})))}if(x.size){const M={};x.forEach(U=>{const j=t.getBaseTarget(U),z=t.getValue(U);z&&(z.liveStyle=!0),M[U]=j??null}),b.push({animation:M})}let O=!!b.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(b):Promise.resolve()}function d(f,h){var v;if(n[f].isActive===h)return Promise.resolve();(v=t.variantChildren)===null||v===void 0||v.forEach(x=>{var E;return(E=x.animationState)===null||E===void 0?void 0:E.setActive(f,h)}),n[f].isActive=h;const b=u(f);for(const x in n)n[x].protectedKeys={};return b}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=ES(),r=!0}}}function b8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_I(e,t):!1}function To(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ES(){return{animate:To(!0),whileInView:To(),whileHover:To(),whileTap:To(),whileDrag:To(),whileFocus:To(),exit:To()}}class Za{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x8 extends Za{constructor(e){super(e),e.animationState||(e.animationState=y8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Pp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _8=0;class w8 extends Za{constructor(){super(...arguments),this.id=_8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const E8={animation:{Feature:x8},exit:{Feature:w8}};function Rd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wd(t){return{point:{x:t.pageX,y:t.pageY}}}const T8=t=>e=>hx(e)&&t(e,Wd(e));function td(t,e,n,r){return Rd(t,e,T8(n),r)}const TS=(t,e)=>Math.abs(t-e);function S8(t,e){const n=TS(t.x,e.x),r=TS(t.y,e.y);return Math.sqrt(n**2+r**2)}class uN{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=py(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=S8(b.offset,{x:0,y:0})>=3;if(!x&&!E)return;const{point:A}=b,{timestamp:O}=Jn;this.history.push({...A,timestamp:O});const{onStart:M,onMove:U}=this.handlers;x||(M&&M(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,b)},this.handlePointerMove=(b,x)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=my(x,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(b,x)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=py(b.type==="pointercancel"?this.lastMoveEventInfo:my(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(b,M),A&&A(b,M)},!hx(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=Wd(e),d=my(u,this.transformPagePoint),{point:f}=d,{timestamp:h}=Jn;this.history=[{...f,timestamp:h}];const{onSessionStart:v}=n;v&&v(e,py(d,this.history)),this.removeListeners=Yd(td(this.contextWindow,"pointermove",this.handlePointerMove),td(this.contextWindow,"pointerup",this.handlePointerUp),td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ga(this.updatePoint)}}function my(t,e){return e?{point:e(t.point)}:t}function SS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function py({point:t},e){return{point:t,delta:SS(t,cN(e)),offset:SS(t,A8(e)),velocity:C8(e,.1)}}function A8(t){return t[0]}function cN(t){return t[t.length-1]}function C8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=cN(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ds(e)));)n--;if(!r)return{x:0,y:0};const o=Os(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const dN=1e-4,R8=1-dN,I8=1+dN,fN=.01,N8=0-fN,k8=0+fN;function ni(t){return t.max-t.min}function D8(t,e,n){return Math.abs(t-e)<=n}function AS(t,e,n,r=.5){t.origin=r,t.originPoint=rn(e.min,e.max,t.origin),t.scale=ni(n)/ni(e),t.translate=rn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=R8&&t.scale<=I8||isNaN(t.scale))&&(t.scale=1),(t.translate>=N8&&t.translate<=k8||isNaN(t.translate))&&(t.translate=0)}function nd(t,e,n,r){AS(t.x,e.x,n.x,r?r.originX:void 0),AS(t.y,e.y,n.y,r?r.originY:void 0)}function CS(t,e,n){t.min=n.min+e.min,t.max=t.min+ni(e)}function O8(t,e,n){CS(t.x,e.x,n.x),CS(t.y,e.y,n.y)}function RS(t,e,n){t.min=e.min-n.min,t.max=t.min+ni(e)}function rd(t,e,n){RS(t.x,e.x,n.x),RS(t.y,e.y,n.y)}function j8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rn(n,t,r.max):Math.min(t,n)),t}function IS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M8(t,{top:e,left:n,bottom:r,right:s}){return{x:IS(t.x,n,s),y:IS(t.y,e,r)}}function NS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function P8(t,e){return{x:NS(t.x,e.x),y:NS(t.y,e.y)}}function V8(t,e){let n=.5;const r=ni(t),s=ni(e);return s>r?n=gu(e.min,e.max-r,t.min):r>s&&(n=gu(t.min,t.max-s,e.min)),Us(0,1,n)}function L8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const x0=.35;function U8(t=x0){return t===!1?t=0:t===!0&&(t=x0),{x:kS(t,"left","right"),y:kS(t,"top","bottom")}}function kS(t,e,n){return{min:DS(t,e),max:DS(t,n)}}function DS(t,e){return typeof t=="number"?t:t[e]||0}const OS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:OS(),y:OS()}),jS=()=>({min:0,max:0}),wn=()=>({x:jS(),y:jS()});function vi(t){return[t("x"),t("y")]}function hN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function z8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function gy(t){return t===void 0||t===1}function _0({scale:t,scaleX:e,scaleY:n}){return!gy(t)||!gy(e)||!gy(n)}function Ro(t){return _0(t)||mN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mN(t){return MS(t.x)||MS(t.y)}function MS(t){return t&&t!=="0%"}function $m(t,e,n){const r=t-n,s=e*r;return n+s}function PS(t,e,n,r,s){return s!==void 0&&(t=$m(t,s,r)),$m(t,n,r)+e}function w0(t,e=0,n=1,r,s){t.min=PS(t.min,e,n,r,s),t.max=PS(t.max,e,n,r,s)}function pN(t,{x:e,y:n}){w0(t.x,e.translate,e.scale,e.originPoint),w0(t.y,n.translate,n.scale,n.originPoint)}const VS=.999999999999,LS=1.0000000000001;function F8(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let d=0;d<s;d++){o=n[d],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Jl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,pN(t,u)),r&&Ro(o.latestValues)&&Jl(t,o.latestValues))}e.x<LS&&e.x>VS&&(e.x=1),e.y<LS&&e.y>VS&&(e.y=1)}function Xl(t,e){t.min=t.min+e,t.max=t.max+e}function US(t,e,n,r,s=.5){const o=rn(t.min,t.max,s);w0(t,e,n,o,r)}function Jl(t,e){US(t.x,e.x,e.scaleX,e.scale,e.originX),US(t.y,e.y,e.scaleY,e.scale,e.originY)}function gN(t,e){return hN(B8(t.getBoundingClientRect(),e))}function q8(t,e,n){const r=gN(t,n),{scroll:s}=e;return s&&(Xl(r.x,s.offset.x),Xl(r.y,s.offset.y)),r}const vN=({current:t})=>t?t.ownerDocument.defaultView:null,H8=new WeakMap;class G8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wd(v).point)},o=(v,b)=>{const{drag:x,dragPropagation:E,onDragStart:A}=this.getProps();if(x&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VU(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(M=>{let U=this.getAxisMotionValue(M).get()||0;if(ns.test(U)){const{projection:j}=this.visualElement;if(j&&j.layout){const z=j.layout.layoutBox[M];z&&(U=ni(z)*(parseFloat(U)/100))}}this.originPoint[M]=U}),A&&Zt.postRender(()=>A(v,b)),f0(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},u=(v,b)=>{const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:A,onDrag:O}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:M}=b;if(E&&this.currentDirection===null){this.currentDirection=$8(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,M),this.updateAxis("y",b.point,M),this.visualElement.render(),O&&O(v,b)},d=(v,b)=>this.stop(v,b),f=()=>vi(v=>{var b;return this.getAnimationState(v)==="paused"&&((b=this.getAxisMotionValue(v).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new uN(e,{onSessionStart:s,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:vN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Zt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!kh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=j8(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Yl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=M8(s.layoutBox,n):this.constraints=!1,this.elastic=U8(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&vi(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=L8(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=q8(r,s.root,this.visualElement.getTransformPagePoint());let u=P8(s.layout.layoutBox,o);if(n){const d=n(z8(u));this.hasMutatedConstraints=!!d,d&&(u=hN(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},h=vi(v=>{if(!kh(v,n,this.currentDirection))return;let b=f&&f[v]||{};u&&(b={min:0,max:0});const x=s?200:1e6,E=s?40:1e7,A={type:"inertia",velocity:r?e[v]:0,bounceStiffness:x,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(v,A)});return Promise.all(h).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return f0(this.visualElement,e),r.start(Sx(e,r,0,n,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vi(n=>{const{drag:r}=this.getProps();if(!kh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:d}=s.layout.layoutBox[n];o.set(e[n]-rn(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vi(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();s[u]=V8({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vi(u=>{if(!kh(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:h}=this.constraints[u];d.set(rn(f,h,s[u]))})}addListeners(){if(!this.visualElement.current)return;H8.set(this.visualElement,this);const e=this.visualElement.current,n=td(e,"pointerdown",f=>{const{drag:h,dragListener:v=!0}=this.getProps();h&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Yl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Zt.read(r);const u=Rd(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(vi(v=>{const b=this.getAxisMotionValue(v);b&&(this.originPoint[v]+=f[v].translate,b.set(b.get()+f[v].translate))}),this.visualElement.render())}));return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=x0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function kh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K8 extends Za{constructor(e){super(e),this.removeGroupControls=ti,this.removeListeners=ti,this.controls=new G8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const zS=t=>(e,n)=>{t&&Zt.postRender(()=>t(e,n))};class Y8 extends Za{constructor(){super(...arguments),this.removePointerDownListener=ti}onPointerDown(e){this.session=new uN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zS(e),onStart:zS(n),onMove:r,onEnd:(o,u)=>{delete this.session,s&&Zt.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=td(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function BS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=BS(t,e.target.x),r=BS(t,e.target.y);return`${n}% ${r}%`}},W8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=$a.parse(t);if(s.length>5)return r;const o=$a.createTransformer(t),u=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;s[0+u]/=d,s[1+u]/=f;const h=rn(d,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=h),typeof s[3+u]=="number"&&(s[3+u]/=h),o(s)}};class Q8 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;gU(X8),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),lm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,s||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Zt.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ex.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yN(t){const[e,n]=eI(),r=N.useContext($b);return g.jsx(Q8,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(lI),isPresent:e,safeToRemove:n})}const X8={borderRadius:{...Cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cc,borderTopRightRadius:Cc,borderBottomLeftRadius:Cc,borderBottomRightRadius:Cc,boxShadow:W8};function J8(t,e,n){const r=mr(t)?t:Ad(t);return r.start(Sx("",r,e,n)),r.animation}function Z8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const ez=(t,e)=>t.depth-e.depth;class tz{constructor(){this.children=[],this.isDirty=!1}add(e){mx(this.children,e),this.isDirty=!0}remove(e){px(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ez),this.isDirty=!1,this.children.forEach(e)}}function nz(t,e){const n=rs.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ga(r),t(o-e))};return Zt.read(r,!0),()=>Ga(r)}const bN=["TopLeft","TopRight","BottomLeft","BottomRight"],rz=bN.length,FS=t=>typeof t=="string"?parseFloat(t):t,qS=t=>typeof t=="number"||Pe.test(t);function iz(t,e,n,r,s,o){s?(t.opacity=rn(0,n.opacity!==void 0?n.opacity:1,sz(r)),t.opacityExit=rn(e.opacity!==void 0?e.opacity:1,0,az(r))):o&&(t.opacity=rn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<rz;u++){const d=`border${bN[u]}Radius`;let f=HS(e,d),h=HS(n,d);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||qS(f)===qS(h)?(t[d]=Math.max(rn(FS(f),FS(h),r),0),(ns.test(h)||ns.test(f))&&(t[d]+="%")):t[d]=h}(e.rotate||n.rotate)&&(t.rotate=rn(e.rotate||0,n.rotate||0,r))}function HS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sz=xN(0,.5,LI),az=xN(.5,.95,ti);function xN(t,e,n){return r=>r<t?0:r>e?1:n(gu(t,e,r))}function GS(t,e){t.min=e.min,t.max=e.max}function gi(t,e){GS(t.x,e.x),GS(t.y,e.y)}function $S(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function KS(t,e,n,r,s){return t-=e,t=$m(t,1/n,r),s!==void 0&&(t=$m(t,1/s,r)),t}function oz(t,e=0,n=1,r=.5,s,o=t,u=t){if(ns.test(e)&&(e=parseFloat(e),e=rn(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=rn(o.min,o.max,r);t===o&&(d-=e),t.min=KS(t.min,e,n,d,s),t.max=KS(t.max,e,n,d,s)}function YS(t,e,[n,r,s],o,u){oz(t,e[n],e[r],e[s],e.scale,o,u)}const lz=["x","scaleX","originX"],uz=["y","scaleY","originY"];function WS(t,e,n,r){YS(t.x,e,lz,n?n.x:void 0,r?r.x:void 0),YS(t.y,e,uz,n?n.y:void 0,r?r.y:void 0)}function QS(t){return t.translate===0&&t.scale===1}function _N(t){return QS(t.x)&&QS(t.y)}function XS(t,e){return t.min===e.min&&t.max===e.max}function cz(t,e){return XS(t.x,e.x)&&XS(t.y,e.y)}function JS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wN(t,e){return JS(t.x,e.x)&&JS(t.y,e.y)}function ZS(t){return ni(t.x)/ni(t.y)}function eA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dz{constructor(){this.members=[]}add(e){mx(this.members,e),e.scheduleRender()}remove(e){if(px(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fz(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(r=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:v,rotateX:b,rotateY:x,skewX:E,skewY:A}=n;h&&(r=`perspective(${h}px) ${r}`),v&&(r+=`rotate(${v}deg) `),b&&(r+=`rotateX(${b}deg) `),x&&(r+=`rotateY(${x}deg) `),E&&(r+=`skewX(${E}deg) `),A&&(r+=`skewY(${A}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(r+=`scale(${d}, ${f})`),r||"none"}const Io={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bc=typeof window<"u"&&window.MotionDebug!==void 0,vy=["","X","Y","Z"],hz={visibility:"hidden"},tA=1e3;let mz=0;function yy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function EN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=kI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Zt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&EN(r)}function TN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},d=e==null?void 0:e()){this.id=mz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bc&&(Io.totalNodes=Io.resolvedTargetDeltas=Io.recalculatedProjection=0),this.nodes.forEach(vz),this.nodes.forEach(wz),this.nodes.forEach(Ez),this.nodes.forEach(yz),Bc&&window.MotionDebug.record(Io)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new tz)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new gx),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z8(u),this.instance=u;const{layoutId:f,layout:h,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(h||f)&&(this.isLayoutDirty=!0),t){let b;const x=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=nz(x,250),lm.hasAnimatedSinceResize&&(lm.hasAnimatedSinceResize=!1,this.nodes.forEach(rA))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&v&&(f||h)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x,hasRelativeTargetChanged:E,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||v.getDefaultTransition()||Rz,{onLayoutAnimationStart:M,onLayoutAnimationComplete:U}=v.getProps(),j=!this.targetLayout||!wN(this.targetLayout,A)||E,z=!x&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||z||x&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,z);const H={...cx(O,"layout"),onPlay:M,onComplete:U};(v.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else x||rA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ga(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tz),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const b=this.path[v];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nA);return}this.isUpdating||this.nodes.forEach(xz),this.isUpdating=!1,this.nodes.forEach(_z),this.nodes.forEach(pz),this.nodes.forEach(gz),this.clearAllSnapshots();const d=rs.now();Jn.delta=Us(0,1e3/60,d-Jn.timestamp),Jn.timestamp=d,Jn.isProcessing=!0,ly.update.process(Jn),ly.preRender.process(Jn),ly.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ex.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bz),this.sharedNodes.forEach(Sz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!_N(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,v=h!==this.prevTransformTemplateValue;u&&(d||Ro(this.latestValues)||v)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),Iz(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return wn();const f=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(Nz))){const{scroll:v}=this.root;v&&(Xl(f.x,v.offset.x),Xl(f.y,v.offset.y))}return f}removeElementScroll(u){var d;const f=wn();if(gi(f,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return f;for(let h=0;h<this.path.length;h++){const v=this.path[h],{scroll:b,options:x}=v;v!==this.root&&b&&x.layoutScroll&&(b.wasRoot&&gi(f,u),Xl(f.x,b.offset.x),Xl(f.y,b.offset.y))}return f}applyTransform(u,d=!1){const f=wn();gi(f,u);for(let h=0;h<this.path.length;h++){const v=this.path[h];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Jl(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Ro(v.latestValues)&&Jl(f,v.latestValues)}return Ro(this.latestValues)&&Jl(f,this.latestValues),f}removeTransform(u){const d=wn();gi(d,u);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!Ro(h.latestValues))continue;_0(h.latestValues)&&h.updateSnapshot();const v=wn(),b=h.measurePageBox();gi(v,b),WS(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,v)}return Ro(this.latestValues)&&WS(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==f;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:x}=this.options;if(!(!this.layout||!(b||x))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),rd(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),O8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),pN(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),rd(this.relativeTargetOrigin,this.target,E.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bc&&Io.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_0(this.parent.latestValues)||mN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(h=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(h=!1),h)return;const{layout:v,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||b))return;gi(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,E=this.treeScale.y;F8(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=wn());const{target:A}=d;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($S(this.prevProjectionDelta.x,this.projectionDelta.x),$S(this.prevProjectionDelta.y,this.projectionDelta.y)),nd(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==E||!eA(this.projectionDelta.x,this.prevProjectionDelta.x)||!eA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Bc&&Io.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(u,d=!1){const f=this.snapshot,h=f?f.latestValues:{},v={...this.latestValues},b=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=wn(),E=f?f.source:void 0,A=this.layout?this.layout.source:void 0,O=E!==A,M=this.getStack(),U=!M||M.members.length<=1,j=!!(O&&!U&&this.options.crossfade===!0&&!this.path.some(Cz));this.animationProgress=0;let z;this.mixTargetDelta=H=>{const G=H/1e3;iA(b.x,u.x,G),iA(b.y,u.y,G),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Az(this.relativeTarget,this.relativeTargetOrigin,x,G),z&&cz(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=wn()),gi(z,this.relativeTarget)),O&&(this.animationValues=v,iz(v,h,this.latestValues,G,j,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ga(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{lm.hasAnimatedSinceResize=!0,this.currentAnimation=J8(0,tA,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:h,latestValues:v}=u;if(!(!d||!f||!h)){if(this!==u&&this.layout&&h&&SN(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||wn();const b=ni(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+b;const x=ni(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+x}gi(d,f),Jl(d,v),nd(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new dz),this.sharedNodes.get(u).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const h={};f.z&&yy("z",u,h,this.animationValues);for(let v=0;v<vy.length;v++)yy(`rotate${vy[v]}`,u,h,this.animationValues),yy(`skew${vy[v]}`,u,h,this.animationValues);u.render();for(const v in h)u.setStaticValue(v,h[v]),this.animationValues&&(this.animationValues[v]=h[v]);u.scheduleRender()}getProjectionStyles(u){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hz;const h={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=am(u==null?void 0:u.pointerEvents)||"",h.transform=v?v(this.latestValues,""):"none",h;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=am(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Ro(this.latestValues)&&(O.transform=v?v({},""):"none",this.hasProjected=!1),O}const x=b.animationValues||b.latestValues;this.applyTransformsToTarget(),h.transform=fz(this.projectionDeltaWithTransform,this.treeScale,x),v&&(h.transform=v(x,h.transform));const{x:E,y:A}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,b.animationValues?h.opacity=b===this?(f=(d=x.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=b===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const O in Bm){if(x[O]===void 0)continue;const{correct:M,applyTo:U}=Bm[O],j=h.transform==="none"?x[O]:M(x[O],b);if(U){const z=U.length;for(let H=0;H<z;H++)h[U[H]]=j}else h[O]=j}return this.options.layoutId&&(h.pointerEvents=b===this?am(u==null?void 0:u.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(nA),this.root.sharedNodes.clear()}}}function pz(t){t.updateLayout()}function gz(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?vi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],E=ni(x);x.min=r[b].min,x.max=x.min+E}):SN(o,n.layoutBox,r)&&vi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],E=ni(r[b]);x.max=x.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+E)});const d=Ql();nd(d,r,n.layoutBox);const f=Ql();u?nd(f,t.applyTransform(s,!0),n.measuredBox):nd(f,r,n.layoutBox);const h=!_N(d);let v=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:x,layout:E}=b;if(x&&E){const A=wn();rd(A,n.layoutBox,x.layoutBox);const O=wn();rd(O,r,E.layoutBox),wN(A,O)||(v=!0),b.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=A,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:d,hasLayoutChanged:h,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vz(t){Bc&&Io.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bz(t){t.clearSnapshot()}function nA(t){t.clearMeasurements()}function xz(t){t.isLayoutDirty=!1}function _z(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wz(t){t.resolveTargetDelta()}function Ez(t){t.calcProjection()}function Tz(t){t.resetSkewAndRotation()}function Sz(t){t.removeLeadSnapshot()}function iA(t,e,n){t.translate=rn(e.translate,0,n),t.scale=rn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sA(t,e,n,r){t.min=rn(e.min,n.min,r),t.max=rn(e.max,n.max,r)}function Az(t,e,n,r){sA(t.x,e.x,n.x,r),sA(t.y,e.y,n.y,r)}function Cz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Rz={duration:.45,ease:[.4,0,.1,1]},aA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),oA=aA("applewebkit/")&&!aA("chrome/")?Math.round:ti;function lA(t){t.min=oA(t.min),t.max=oA(t.max)}function Iz(t){lA(t.x),lA(t.y)}function SN(t,e,n){return t==="position"||t==="preserve-aspect"&&!D8(ZS(e),ZS(n),.2)}function Nz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const kz=TN({attachResizeListener:(t,e)=>Rd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),by={current:void 0},AN=TN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!by.current){const t=new kz({});t.mount(window),t.setOptions({layoutScroll:!0}),by.current=t}return by.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Dz={pan:{Feature:Y8},drag:{Feature:K8,ProjectionNode:AN,MeasureLayout:yN}};function uA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Zt.postRender(()=>o(e,Wd(e)))}class Oz extends Za{mount(){const{current:e}=this.node;e&&(this.unmount=DU(e,n=>(uA(this.node,n,"Start"),r=>uA(this.node,r,"End"))))}unmount(){}}class jz extends Za{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yd(Rd(this.node.current,"focus",()=>this.onFocus()),Rd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cA(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Zt.postRender(()=>o(e,Wd(e)))}class Mz extends Za{mount(){const{current:e}=this.node;e&&(this.unmount=PU(e,n=>(cA(this.node,n,"Start"),(r,{success:s})=>cA(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const E0=new WeakMap,xy=new WeakMap,Pz=t=>{const e=E0.get(t.target);e&&e(t)},Vz=t=>{t.forEach(Pz)};function Lz({root:t,...e}){const n=t||document;xy.has(n)||xy.set(n,{});const r=xy.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Vz,{root:t,...e})),r[s]}function Uz(t,e,n){const r=Lz(e);return E0.set(t,n),r.observe(t),()=>{E0.delete(t),r.unobserve(t)}}const zz={some:0,all:1};class Bz extends Za{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:zz[s]},d=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:v,onViewportLeave:b}=this.node.getProps(),x=h?v:b;x&&x(f)};return Uz(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Fz(e,n))&&this.startObserver()}unmount(){}}function Fz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qz={inView:{Feature:Bz},tap:{Feature:Mz},focus:{Feature:jz},hover:{Feature:Oz}},Hz={layout:{ProjectionNode:AN,MeasureLayout:yN}},T0={current:null},CN={current:!1};function Gz(){if(CN.current=!0,!!Wb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>T0.current=t.matches;t.addListener(e),e()}else T0.current=!1}const $z=[...JI,cr,$a],Kz=t=>$z.find(XI(t)),dA=new WeakMap;function Yz(t,e,n){for(const r in e){const s=e[r],o=n[r];if(mr(s))t.addValue(r,s);else if(mr(o))t.addValue(r,Ad(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,Ad(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Wz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=rs.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Zt.render(this.render,!1,!0))};const{latestValues:f,renderState:h,onUpdate:v}=u;this.onUpdate=v,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Vp(n),this.isVariantNode=aI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:b,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in x){const A=x[E];f[E]!==void 0&&mr(A)&&A.set(f[E],!1)}}mount(e){this.current=e,dA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),CN.current||Gz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dA.delete(this.current),this.projection&&this.projection.unmount(),Ga(this.notifyUpdate),Ga(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zo.has(e),s=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Zt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vu){const n=vu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fA.length;r++){const s=fA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Yz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ad(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(WI(s)||zI(s))?s=parseFloat(s):!Kz(s)&&$a.test(n)&&(s=$I(e,n)),this.setBaseTarget(e,mr(s)?s.get():s)),mr(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=nx(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!mr(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class RN extends Wz{constructor(){super(...arguments),this.KeyframeResolver=ZI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Qz(t){return window.getComputedStyle(t)}class Xz extends RN{constructor(){super(...arguments),this.type="html",this.renderInstance=pI}readValueFromInstance(e,n){if(Zo.has(n)){const r=_x(n);return r&&r.default||0}else{const r=Qz(e),s=(fI(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gN(e,n)}build(e,n,r){sx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ux(e,n,r)}}class Jz extends RN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zo.has(n)){const r=_x(n);return r&&r.default||0}return n=gI.has(n)?n:Zb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return bI(e,n,r)}build(e,n,r){ax(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){vI(e,n,r,s)}mount(e){this.isSVGTag=lx(e.tagName),super.mount(e)}}const Zz=(t,e)=>tx(t)?new Jz(e):new Xz(e,{allowProjection:t!==N.Fragment}),eB=SU({...E8,...qz,...Dz,...Hz},Zz),yi=z6(eB),tB=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),nB=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),rB=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return g.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[g.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[g.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),g.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[g.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),g.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),g.jsxs(yi.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[g.jsxs(yi.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[g.jsx(Ed,{}),g.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),g.jsxs(yi.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",g.jsx("br",{}),g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),g.jsxs(yi.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,g.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),g.jsx(yi.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:g.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",g.jsx(tB,{})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),g.jsx(yi.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),g.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),g.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),g.jsx(yi.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})}),g.jsxs(yi.div,{initial:{opacity:0},animate:{opacity:1,y:[0,10,0]},transition:{opacity:{delay:1.5,duration:.6},y:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})},children:[g.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Dcouvrir"}),g.jsx("div",{className:"text-gold",children:g.jsx(nB,{})})]})]}),g.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),g.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(_y,{icon:g.jsx(o0,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),g.jsx(_y,{icon:g.jsx(Ed,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),g.jsx(_y,{icon:g.jsx(XR,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),g.jsx("section",{className:"py-20 px-4 text-center",children:g.jsxs("div",{className:"max-w-3xl mx-auto",children:[g.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),g.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),g.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},_y=({icon:t,title:e,description:n})=>g.jsxs(yi.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[g.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:g.jsx("div",{className:"w-6 h-6",children:t})}),g.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),iB=({onAnalyze:t,isAnalyzing:e})=>{const n=N.useRef(null),[r,s]=N.useState([]),[o,u]=N.useState(!1),[d,f]=N.useState(!1);N.useEffect(()=>{const j=()=>f(window.innerWidth<1024);return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),N.useEffect(()=>()=>{r.forEach(j=>URL.revokeObjectURL(j.preview))},[r]);const h=j=>{const z=j.map(H=>({id:`${H.name}-${H.lastModified}-${Math.random()}`,file:H,preview:URL.createObjectURL(H)}));s(H=>[...H,...z])},v=j=>{j.target.files&&(h(Array.from(j.target.files)),j.target.value="")},b=()=>{var j;e||(j=n.current)==null||j.click()},x=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!0))},E=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!1))},A=j=>{d||(j.preventDefault(),j.stopPropagation())},O=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!1),j.dataTransfer.files&&j.dataTransfer.files.length>0&&(h(Array.from(j.dataTransfer.files)),j.dataTransfer.clearData()))},M=j=>{const z=r.find(H=>H.id===j);z&&URL.revokeObjectURL(z.preview),s(H=>H.filter(G=>G.id!==j))},U=()=>{r.length>0&&!e&&(t(r.map(j=>j.file)),s([]))};return g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:x,onDragLeave:E,onDragOver:A,onDrop:O,children:[g.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),g.jsxs("div",{onClick:b,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[g.jsx("input",{type:"file",ref:n,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?g.jsxs(g.Fragment,{children:[g.jsx(x6,{}),g.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:g.jsx(o0,{})}),g.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",g.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!d&&g.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[g.jsx("div",{className:"text-black transform-gpu scale-110",children:g.jsx(o0,{})}),g.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),r.length>0&&!e&&g.jsxs("div",{className:"mt-8",children:[g.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:r.map(j=>g.jsxs("div",{className:"relative group aspect-square",children:[g.jsx("img",{src:j.preview,alt:j.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),g.jsx("button",{onClick:()=>M(j.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:g.jsx(Lm,{})})]},j.id))}),g.jsxs("button",{onClick:U,disabled:e||r.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Ed,{}),"Analyser les ",r.length," article(s)"]})]})]})},sB=()=>g.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),aB=({imageSrc:t,analysis:e,onClick:n,onPreview:r,isSelected:s,isSet:o,isFavorite:u,isExcluded:d})=>{const f=N.useRef(null),[h,v]=N.useState(!1),b=()=>{f.current=setTimeout(()=>{v(!0),r&&r(t,e)},500)},x=()=>{f.current&&clearTimeout(f.current),h||n(),v(!1)},E=()=>{r&&window.innerWidth>=1024&&r(t,e)};return g.jsxs("div",{onClick:n,onTouchStart:b,onTouchEnd:x,onMouseEnter:E,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[g.jsx("img",{src:t,alt:e,loading:"lazy",className:`w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 ${d?"opacity-40":""}`}),g.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),d&&g.jsx("div",{className:"absolute inset-0 bg-gray-500/30 backdrop-blur-[1px] flex items-center justify-center z-5",children:g.jsx("div",{className:"bg-gray-800/80 backdrop-blur-sm rounded-full p-3",children:g.jsx(l0,{className:"w-8 h-8 text-gray-300"})})}),s?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:g.jsx(Gb,{})}):u?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(pu,{className:"w-4 h-4"})}):o?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Op,{})}):null,g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:g.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})})]})},oB={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes",subcategory:"Toutes"}},lB=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:r,onDeleteItem:s,onCreateSet:o})=>{var Lt,_t,Sn;const[u,d]=N.useState("Hauts"),[f,h]=N.useState(oB),[v,b]=N.useState(""),[x,E]=N.useState("favorites"),[A,O]=N.useState(!1),[M,U]=N.useState(new Set),[j,z]=N.useState(null),H=N.useRef(null),G=N.useMemo(()=>n||[],[n]),q=N.useMemo(()=>new Set(G.flatMap(pe=>pe.itemIds||[])),[G]),C=t.length,S=[{name:"Hauts",icon:g.jsx(_6,{})},{name:"Bas",icon:g.jsx(w6,{})},{name:"Chaussures",icon:g.jsx(E6,{})},{name:"Accessoires",icon:g.jsx(T6,{})}],I=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],L=pe=>{A?U(me=>{const Ke=new Set(me);return Ke.has(pe.id)?Ke.delete(pe.id):Ke.add(pe.id),Ke}):r(pe)},P=pe=>[...pe].sort((me,Ke)=>{if(u==="Accessoires"){const Ft=me.subcategory||"zzz",Ve=Ke.subcategory||"zzz",Kt=Ft.localeCompare(Ve);if(Kt!==0)return Kt}switch(x){case"favorites":return(Ke.isFavorite?1:0)-(me.isFavorite?1:0);case"newest":return!me.createdAt&&!Ke.createdAt?0:me.createdAt?Ke.createdAt?Ke.createdAt-me.createdAt:-1:1;case"oldest":return!me.createdAt&&!Ke.createdAt?0:me.createdAt?Ke.createdAt?me.createdAt-Ke.createdAt:-1:1;case"color":return me.color.localeCompare(Ke.color);case"category":return me.category.localeCompare(Ke.category);default:return 0}}),V=N.useMemo(()=>{if(!v.trim())return t;const pe=v.toLowerCase();return t.filter(me=>me.analysis.toLowerCase().includes(pe)||me.color.toLowerCase().includes(pe)||me.material.toLowerCase().includes(pe)||me.category.toLowerCase().includes(pe))},[t,v]),k=N.useMemo(()=>{if(!u)return[];const pe=V.filter(Ke=>Ke.category===u),me=f[u];return me?pe.filter(Ke=>{const Ft=me.color==="Toutes"||Ke.color===me.color,Ve=me.material==="Toutes"||Ke.material===me.material,Kt=!me.subcategory||me.subcategory==="Toutes"||Ke.subcategory===me.subcategory;return Ft&&Ve&&Kt}):pe},[V,u,(Lt=f[u])==null?void 0:Lt.color,(_t=f[u])==null?void 0:_t.material,(Sn=f[u])==null?void 0:Sn.subcategory]),ve=N.useMemo(()=>P(k),[k,x,u]),Oe=N.useMemo(()=>S.reduce((pe,{name:me})=>(pe[me]=V.filter(Ke=>Ke.category===me).length,pe),{}),[V]),W=N.useMemo(()=>{if(!u)return[];const pe=V.filter(me=>me.category===u).map(me=>me.color);return["Toutes",...Array.from(new Set(pe))]},[V,u]),re=N.useMemo(()=>{if(!u)return[];const pe=V.filter(me=>me.category===u).map(me=>me.material);return["Toutes",...Array.from(new Set(pe))]},[V,u]),ue=N.useMemo(()=>!u||u!=="Accessoires"?[]:["Toutes","Ceintures","Chapeaux","charpes & Foulards","Lunettes","Montres & Bijoux","Sacs"],[u]),_e=pe=>{u&&h(me=>({...me,[u]:{...me[u],color:pe}}))},we=pe=>{u&&h(me=>({...me,[u]:{...me[u],material:pe}}))},B=pe=>{u&&h(me=>({...me,[u]:{...me[u],subcategory:pe}}))},J=pe=>{d(u===pe?null:pe)},ce=()=>{O(!A),U(new Set)},fe=()=>{if(M.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const pe=window.prompt("Donnez un nom  cet ensemble :");pe&&(o(pe,Array.from(M)),ce())},Ae=()=>{b("")},ze=(pe,me)=>{H.current&&clearTimeout(H.current),window.innerWidth>=1024?H.current=setTimeout(()=>{z({src:pe,description:me})},300):z({src:pe,description:me})},Be=()=>{H.current&&clearTimeout(H.current),z(null)};return N.useEffect(()=>{const pe=me=>{me.key==="Escape"&&j&&Be()};return window.addEventListener("keydown",pe),()=>window.removeEventListener("keydown",pe)},[j]),N.useEffect(()=>()=>{H.current&&clearTimeout(H.current)},[]),e?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),g.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((pe,me)=>g.jsx(sB,{},me))})]}):C===0?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[g.jsx(WT,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),g.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):g.jsxs(g.Fragment,{children:[g.jsx(JT,{children:j&&g.jsx(yi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:Be,onMouseLeave:Be,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm cursor-pointer p-4",children:g.jsxs(yi.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2,type:"spring",bounce:.3},className:"relative max-w-2xl max-h-[80vh] rounded-xl overflow-hidden shadow-2xl",onClick:pe=>pe.stopPropagation(),children:[g.jsx("img",{src:j.src,alt:j.description,className:"w-full h-full object-contain"}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:g.jsx("p",{className:"text-white text-sm font-medium",children:j.description})}),g.jsx("button",{onClick:Be,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 backdrop-blur-sm rounded-full text-white transition-colors","aria-label":"Fermer la preview",children:g.jsx(Lm,{})})]})})}),g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(WT,{className:"w-8 h-8 text-gold"}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[C," vtement",C>1?"s":""]})]})]}),A?g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[g.jsx("button",{onClick:ce,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),g.jsxs("button",{onClick:fe,disabled:M.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",M.size,")"]})]}):g.jsxs("button",{onClick:ce,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[g.jsx(Op,{}),"Crer un ensemble"]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(JR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:v,onChange:pe=>b(pe.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),v&&g.jsx("button",{onClick:Ae,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:g.jsx(Lm,{})})]}),g.jsxs("div",{className:"relative sm:w-48",children:[g.jsx(ZR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsx("select",{value:x,onChange:pe=>E(pe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:I.map(pe=>g.jsx("option",{value:pe.value,children:pe.label},pe.value))}),g.jsx(Zc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),v&&g.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[V.length," rsultat",V.length>1?"s":"",' pour "',v,'"']}),A&&g.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[g.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),g.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),g.jsx("div",{className:"space-y-6",children:S.map(({name:pe,icon:me})=>{const Ke=Oe[pe]||0,Ft=u===pe;return g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>J(pe),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"w-5 h-5 text-gold",children:me}),g.jsx("span",{className:"font-semibold text-lg",children:pe}),g.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Ke,")"]})]}),g.jsx(Zc,{className:`w-5 h-5 transition-transform ${Ft?"rotate-180":""}`})]}),Ft&&g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"flex flex-wrap gap-4",children:[g.jsxs("div",{className:"flex-1 min-w-[150px]",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),g.jsx("select",{value:f[pe].color,onChange:Ve=>_e(Ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:W.map(Ve=>g.jsx("option",{value:Ve,children:Ve},Ve))})]}),g.jsxs("div",{className:"flex-1 min-w-[150px]",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),g.jsx("select",{value:f[pe].material,onChange:Ve=>we(Ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:re.map(Ve=>g.jsx("option",{value:Ve,children:Ve},Ve))})]}),pe==="Accessoires"&&g.jsxs("div",{className:"flex-1 min-w-[150px]",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),g.jsx("select",{value:f[pe].subcategory||"Toutes",onChange:Ve=>B(Ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ue.map(Ve=>g.jsx("option",{value:Ve,children:Ve},Ve))})]})]}),ve.length>0?g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:g.jsx(JT,{mode:"popLayout",children:ve.map((Ve,Kt)=>g.jsx(yi.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Kt*.05,type:"spring",bounce:.3},children:g.jsx(aB,{imageSrc:Ve.imageSrc,analysis:Ve.analysis,onClick:()=>L(Ve),onPreview:ze,isSelected:M.has(Ve.id),isSet:q.has(Ve.id),isFavorite:Ve.isFavorite,isExcluded:Ve.isExcluded})},Ve.id))})}):g.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},pe)})})]})]})},IN=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:r,weatherInfo:s,weatherError:o,anchorItem:u,onClearAnchor:d})=>{const[f,h]=Ln.useState(""),v=u?"name"in u?u.name:u.analysis:null,b=E=>{E.preventDefault(),n(f||"Casual")},x=["Casual","Soire chic","Travail (formel)"];return g.jsxs("div",{children:[v&&g.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-gold/10 border border-gold/30 relative",children:[g.jsxs("p",{className:"text-sm font-semibold text-gold-dark dark:text-gold text-center pr-8",children:[" Crer une tenue avec : ",g.jsx("span",{className:"font-bold",children:v})]}),d&&g.jsx("button",{type:"button",onClick:d,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-gold/20 rounded-full transition-colors","aria-label":"Supprimer l'ancre",title:"Gnrer sans cet article",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&g.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),o&&g.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!s&&!o&&g.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),g.jsx("form",{onSubmit:b,children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),g.jsx("div",{className:"flex justify-center gap-2 mb-4",children:x.map(E=>g.jsx("button",{type:"button",onClick:()=>h(E),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${f===E?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:r,children:E},E))}),g.jsx("input",{id:"occasion",type:"text",value:f,onChange:E=>h(E.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r})]}),g.jsxs("button",{type:"submit",disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Ed,{}),r?"Gnration...":"Gnrer des Tenues"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})})]})},uB=!1,cB=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:r,onToggleFavorite:s,onGenerateVisual:o,generatingVisualFor:u,selectedOutfit:d,onSelectOutfit:f,onGenerateVariants:h,isGenerating:v,onOpenChat:b})=>{const[x,E]=N.useState(null),[A,O]=N.useState(null);N.useEffect(()=>{if(!x)return;const U=j=>{j.key==="Escape"&&E(null)};return window.addEventListener("keydown",U),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",U),document.body.style.overflow="auto"}},[x]);const M=U=>{const{id:j,description:z}=U,H=j?j.trim():"",G=z?z.trim().toLowerCase():"";let q=e.find(S=>S.id===H);if(q)return q;let C=n.find(S=>S.id===H);if(C)return C;if(H&&(q=e.find(S=>S.analysis.toLowerCase().includes(H.toLowerCase())),q)||G&&(q=e.find(S=>{const I=S.analysis.toLowerCase();return I.includes(G)||G.includes(I)}),q))return q};return g.jsxs(g.Fragment,{children:[v&&g.jsxs("div",{className:"mt-10 flex flex-col items-center justify-center py-12 px-6 bg-gradient-to-br from-gold/5 to-gold/10 dark:from-gold/10 dark:to-gold/5 rounded-xl border-2 border-dashed border-gold/30",children:[g.jsxs("svg",{className:"animate-spin h-12 w-12 text-gold mb-4",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"text-lg font-medium text-gold-dark dark:text-gold mb-1",children:"Gnration de variantes..."}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"L'IA cre 3 nouvelles tenues adaptes"})]}),g.jsx("div",{className:"mt-10 space-y-8",children:t.map((U,j)=>{const z=r.some(G=>G.titre===U.titre&&G.description===U.description);U.titre;const H=(d==null?void 0:d.titre)===U.titre&&(d==null?void 0:d.description)===U.description;return g.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${H?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[H&&g.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[g.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:U.titre}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>f(U),className:`p-1.5 transition-colors ${H?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":H?"Dslectionner cette tenue":"Choisir cette tenue",title:H?"Dslectionner cette tenue":"Choisir cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:H?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b&&g.jsx("button",{onClick:()=>b(U),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":"Demander conseil",title:"Demander conseil sur cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),g.jsx("button",{onClick:()=>O(A===j?null:j),disabled:v,className:`p-1.5 transition-colors ${A===j?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":A===j?"Annuler la modification":"Modifier cette tenue",title:A===j?"Annuler la modification":"Modifier cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),uB,g.jsx("button",{onClick:()=>s(U),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":z?"Retirer des favoris":"Ajouter aux favoris",children:z?g.jsx(pu,{className:"w-6 h-6 text-gold"}):g.jsx(Um,{className:"w-6 h-6"})})]})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-3",children:U.description}),A===j&&g.jsx("div",{className:"mb-4 p-3 bg-gold/10 border border-gold/30 rounded-lg",children:g.jsxs("p",{className:"text-sm text-gold-dark dark:text-gold font-medium flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cliquez sur une pice pour la remplacer"]})}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:U.vetements.map((G,q)=>{const C=M(G),S=C?C.imageSrc:null,I=A===j;return g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>S&&!I&&E(S),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!S||I,"aria-label":`Agrandir l'image de : ${G.description}`,title:G.description,children:S?g.jsx("img",{src:S,alt:G.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(QR,{})})}),I&&S&&g.jsx("button",{onClick:()=>{h(U,G),O(null)},disabled:v,className:"absolute inset-0 flex items-center justify-center bg-onyx/80 backdrop-blur-sm rounded-md transition-all hover:bg-gold/90 disabled:opacity-50 disabled:cursor-not-allowed group","aria-label":`Remplacer ${G.description}`,title:`Remplacer ${G.description}`,children:g.jsx("svg",{className:"w-8 h-8 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]},q)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:U.vetements.map((G,q)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:G.description},q))})]},j)})}),x&&g.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>E(null),role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"relative",onClick:U=>U.stopPropagation(),children:[g.jsx("img",{src:x,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),g.jsx("button",{onClick:()=>E(null),className:"absolute top-2 right-2 p-2 bg-raisin-black/90 border-2 border-white/50 rounded-full text-white hover:bg-red-500 hover:border-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold shadow-lg","aria-label":"Fermer",children:g.jsx(S6,{})})]})})]})},su=N.memo(cB);var NN=n2(),dB=fB()?N.useLayoutEffect:N.useEffect;function fB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function hB(){var t=N.useState(Object.create(null)),e=t[1];return N.useCallback(function(){e(Object.create(null))},[])}var mB=function(e){var n=e.children,r=e.type,s=r===void 0?"reach-portal":r,o=N.useRef(null),u=N.useRef(null),d=hB();return dB(function(){if(o.current){var f=o.current.ownerDocument;return u.current=f==null?void 0:f.createElement(s),f.body.appendChild(u.current),d(),function(){u.current&&u.current.ownerDocument&&u.current.ownerDocument.body.removeChild(u.current)}}},[s,d]),u.current?NN.createPortal(n,u.current):N.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ge.apply(this,arguments)};function Ax(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ht(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function Xt(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Vt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Vt||(Vt={}));var bu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(bu||(bu={}));var S0=Vt.Start,Cx=Vt.Stop,Qd=Vt.Raise,zp=Vt.Send,kN=Vt.Cancel,pB=Vt.NullEvent,Rx=Vt.Assign;Vt.After;Vt.DoneState;var DN=Vt.Log,gB=Vt.Init,A0=Vt.Invoke;Vt.ErrorExecution;var hA=Vt.ErrorPlatform,vB=Vt.ErrorCustom,ON=Vt.Update,yB=Vt.Choose,bB=Vt.Pure,jN=".",mA={},C0="xstate.guard",xB="",Dh;function Ix(t,e,n){n===void 0&&(n=jN);var r=id(t,n),s=id(e,n);return St(s)?St(r)?s===r:!1:St(r)?r in s:Object.keys(r).every(function(o){return o in s?Ix(r[o],s[o]):!1})}function MN(t){try{return St(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function R0(t,e){try{return ku(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function _B(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function id(t,e){if(_B(t))return t.value;if(ku(t))return Km(t);if(typeof t!="string")return t;var n=R0(t,e);return Km(n)}function Km(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function Fc(t,e){for(var n={},r=Object.keys(t),s=0;s<r.length;s++){var o=r[s];n[o]=e(t[o],o,t,s)}return n}function pA(t,e,n){var r,s,o={};try{for(var u=ht(Object.keys(t)),d=u.next();!d.done;d=u.next()){var f=d.value,h=t[f];n(h)&&(o[f]=e(h,f,t))}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}var wB=function(t){return function(e){var n,r,s=e;try{for(var o=ht(t),u=o.next();!u.done;u=o.next()){var d=u.value;s=s[d]}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}};function EB(t,e){return function(n){var r,s,o=n;try{for(var u=ht(t),d=u.next();!d.done;d=u.next()){var f=d.value;o=o[e][f]}}catch(h){r={error:h}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}}function um(t){if(!t)return[[]];if(St(t))return[[t]];var e=nn(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:um(t[n]).map(function(s){return[n].concat(s)})}));return e}function nn(t){var e;return(e=[]).concat.apply(e,Xt([],xt(t),!1))}function PN(t){return ku(t)?t:[t]}function Di(t){return t===void 0?[]:PN(t)}function Ym(t,e,n){var r,s;if(Et(t))return t(e,n.data);var o={};try{for(var u=ht(Object.keys(t)),d=u.next();!d.done;d=u.next()){var f=d.value,h=t[f];Et(h)?o[f]=h(e,n.data):o[f]=h}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}function TB(t){return/^(done|error)\./.test(t)}function gA(t){return!!(t instanceof Promise||t!==null&&(Et(t)||typeof t=="object")&&Et(t.then))}function SB(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function AB(t,e){var n,r,s=xt([[],[]],2),o=s[0],u=s[1];try{for(var d=ht(t),f=d.next();!f.done;f=d.next()){var h=f.value;e(h)?o.push(h):u.push(h)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}function VN(t,e){return Fc(t.states,function(n,r){if(n){var s=(St(e)?void 0:e[r])||(n?n.current:void 0);if(s)return{current:s,states:VN(n,s)}}})}function CB(t,e){return{current:e,states:VN(t,e)}}function vA(t,e,n,r){var s=t&&n.reduce(function(o,u){var d,f,h=u.assignment,v={state:r,action:u,_event:e},b={};if(Et(h))b=h(o,e.data,v);else try{for(var x=ht(Object.keys(h)),E=x.next();!E.done;E=x.next()){var A=E.value,O=h[A];b[A]=Et(O)?O(o,e.data,v):O}}catch(M){d={error:M}}finally{try{E&&!E.done&&(f=x.return)&&f.call(x)}finally{if(d)throw d.error}}return Object.assign({},o,b)},t);return s}var RB=function(){};function ku(t){return Array.isArray(t)}function Et(t){return typeof t=="function"}function St(t){return typeof t=="string"}function LN(t,e){if(t)return St(t)?{type:C0,name:t,predicate:e?e[t]:void 0}:Et(t)?{type:C0,name:t.name,predicate:t}:t}function IB(t){try{return"subscribe"in t&&Et(t.subscribe)}catch{return!1}}var Ca=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Dh={},Dh[Ca]=function(){return this},Dh[Symbol.observable]=function(){return this};function xu(t){return!!t&&"__xstatenode"in t}function NB(t){return!!t&&typeof t.send=="function"}function Bp(t,e){return St(t)||typeof t=="number"?ge({type:t},e):t}function Xn(t,e){if(!St(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Bp(t);return ge({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Ll(t,e){var n=PN(e).map(function(r){return typeof r>"u"||typeof r=="string"||xu(r)?{target:r,event:t}:ge(ge({},r),{event:t})});return n}function kB(t){if(!(t===void 0||t===xB))return Di(t)}function UN(t,e,n,r,s){var o=t.options.guards,u={state:s,cond:e,_event:r};if(e.type===C0)return((o==null?void 0:o[e.name])||e.predicate)(n,r.data,u);var d=o==null?void 0:o[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return d(n,r.data,u)}function zN(t){return typeof t=="string"?{type:t}:t}function cm(t,e,n){var r=function(){},s=typeof t=="object",o=s?t:null;return{next:((s?t.next:t)||r).bind(o),error:((s?t.error:e)||r).bind(o),complete:((s?t.complete:n)||r).bind(o)}}function Oh(t,e){return"".concat(t,":invocation[").concat(e,"]")}function I0(t){return(t.type===Qd||t.type===zp&&t.to===bu.Internal)&&typeof t.delay!="number"}var au=Xn({type:gB});function N0(t,e){return e&&e[t]||void 0}function Id(t,e){var n;if(St(t)||typeof t=="number"){var r=N0(t,e);Et(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(Et(t))n={type:t.name||t.toString(),exec:t};else{var r=N0(t.type,e);if(Et(r))n=ge(ge({},t),{exec:r});else if(r){var s=r.type||t.type;n=ge(ge(ge({},r),t),{type:s})}else n=t}return n}var Ra=function(t,e){if(!t)return[];var n=ku(t)?t:[t];return n.map(function(r){return Id(r,e)})};function Nx(t){var e=Id(t);return ge(ge({id:St(t)?t:e.id},e),{type:e.type})}function DB(t,e){return{type:Qd,event:typeof t=="function"?t:Bp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function OB(t,e,n,r){var s={_event:n},o=Xn(Et(t.event)?t.event(e,n.data,s):t.event),u;if(St(t.delay)){var d=r&&r[t.delay];u=Et(d)?d(e,n.data,s):d}else u=Et(t.delay)?t.delay(e,n.data,s):t.delay;return ge(ge({},t),{type:Qd,_event:o,delay:u})}function jB(t,e){return{to:e?e.to:void 0,type:zp,event:Et(t)?t:Bp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:Et(t)?t.name:MN(t)}}function MB(t,e,n,r){var s={_event:n},o=Xn(Et(t.event)?t.event(e,n.data,s):t.event),u;if(St(t.delay)){var d=r&&r[t.delay];u=Et(d)?d(e,n.data,s):d}else u=Et(t.delay)?t.delay(e,n.data,s):t.delay;var f=Et(t.to)?t.to(e,n.data,s):t.to;return ge(ge({},t),{to:f,_event:o,event:o.data,delay:u})}var PB=function(t,e,n){return ge(ge({},t),{value:St(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},VB=function(t){return{type:kN,sendId:t}};function LB(t){var e=Nx(t);return{type:Vt.Start,activity:e,exec:void 0}}function UB(t){var e=Et(t)?t:Nx(t);return{type:Vt.Stop,activity:e,exec:void 0}}function zB(t,e,n){var r=Et(t.activity)?t.activity(e,n.data):t.activity,s=typeof r=="string"?{id:r}:r,o={type:Vt.Stop,activity:s};return o}var BB=function(t){return{type:Rx,assignment:t}};function FB(t,e){var n=e?"#".concat(e):"";return"".concat(Vt.After,"(").concat(t,")").concat(n)}function jh(t,e){var n="".concat(Vt.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function dm(t,e){var n="".concat(Vt.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function qc(t,e){var n="".concat(Vt.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var qB=function(t){var e,n,r=[];try{for(var s=ht(t),o=s.next();!o.done;o=s.next())for(var u=o.value,d=0;d<u.actions.length;){if(u.actions[d].type===Rx){r.push(u.actions[d]),u.actions.splice(d,1);continue}d++}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r};function Wm(t,e,n,r,s,o,u){u===void 0&&(u=!1);var d=u?[]:qB(s),f=d.length?vA(n,r,d,e):n,h=u?[n]:void 0,v=[];function b(A,O){var M;switch(O.type){case Qd:{var U=OB(O,f,r,t.options.delays);return o&&typeof U.delay=="number"&&o(U,f,r),U}case zp:var j=MB(O,f,r,t.options.delays);return o&&j.to!==bu.Internal&&(A==="entry"?v.push(j):o(j,f,r)),j;case DN:{var z=PB(O,f,r);return o==null||o(z,f,r),z}case yB:{var H=O,G=(M=H.conds.find(function(W){var re=LN(W.cond,t.options.guards);return!re||UN(t,re,f,r,o?void 0:e)}))===null||M===void 0?void 0:M.actions;if(!G)return[];var q=xt(Wm(t,e,f,r,[{type:A,actions:Ra(Di(G),t.options.actions)}],o,u),2),C=q[0],S=q[1];return f=S,h==null||h.push(f),C}case bB:{var G=O.get(f,r.data);if(!G)return[];var I=xt(Wm(t,e,f,r,[{type:A,actions:Ra(Di(G),t.options.actions)}],o,u),2),L=I[0],P=I[1];return f=P,h==null||h.push(f),L}case Cx:{var z=zB(O,f,r);return o==null||o(z,n,r),z}case Rx:{f=vA(f,r,[O],o?void 0:e),h==null||h.push(f);break}default:var V=Id(O,t.options.actions),k=V.exec;if(o)o(V,f,r);else if(k&&h){var ve=h.length-1,Oe=ge(ge({},V),{exec:function(W){for(var re=[],ue=1;ue<arguments.length;ue++)re[ue-1]=arguments[ue];k.apply(void 0,Xt([h[ve]],xt(re),!1))}});V=Oe}return V}}function x(A){var O,M,U=[];try{for(var j=ht(A.actions),z=j.next();!z.done;z=j.next()){var H=z.value,G=b(A.type,H);G&&(U=U.concat(G))}}catch(q){O={error:q}}finally{try{z&&!z.done&&(M=j.return)&&M.call(j)}finally{if(O)throw O.error}}return v.forEach(function(q){o(q,f,r)}),v.length=0,U}var E=nn(s.map(x));return[E,f]}var Kl=function(t,e){var n=e(t);return n};function BN(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Ca]=function(){return this},e}function HB(t,e,n,r){var s,o=zN(t.src),u=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[o.type],d=t.data?Ym(t.data,n,r):void 0,f=u?FN(u,t.id,d):BN(t.id);return f.meta=t,f}function FN(t,e,n){var r=BN(e);if(r.deferred=!0,xu(t)){var s=r.state=Kl(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return s}}return r}function GB(t){try{return typeof t.send=="function"}catch{return!1}}function $B(t){return GB(t)&&"id"in t}function KB(t){var e;return ge((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Ca]=function(){return this},e),t)}var Qm=function(t){return t.type==="atomic"||t.type==="final"};function qN(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Nd(t){return qN(t).filter(function(e){return e.type!=="history"})}function HN(t){var e=[t];return Qm(t)?e:e.concat(nn(Nd(t).map(HN)))}function Hc(t,e){var n,r,s,o,u,d,f,h,v=new Set(t),b=k0(v),x=new Set(e);try{for(var E=ht(x),A=E.next();!A.done;A=E.next())for(var O=A.value,M=O.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(I){n={error:I}}finally{try{A&&!A.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}var U=k0(x);try{for(var j=ht(x),z=j.next();!z.done;z=j.next()){var O=z.value;if(O.type==="compound"&&(!U.get(O)||!U.get(O).length))b.get(O)?b.get(O).forEach(function(L){return x.add(L)}):O.initialStateNodes.forEach(function(L){return x.add(L)});else if(O.type==="parallel")try{for(var H=(u=void 0,ht(Nd(O))),G=H.next();!G.done;G=H.next()){var q=G.value;x.has(q)||(x.add(q),b.get(q)?b.get(q).forEach(function(L){return x.add(L)}):q.initialStateNodes.forEach(function(L){return x.add(L)}))}}catch(L){u={error:L}}finally{try{G&&!G.done&&(d=H.return)&&d.call(H)}finally{if(u)throw u.error}}}}catch(I){s={error:I}}finally{try{z&&!z.done&&(o=j.return)&&o.call(j)}finally{if(s)throw s.error}}try{for(var C=ht(x),S=C.next();!S.done;S=C.next())for(var O=S.value,M=O.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(I){f={error:I}}finally{try{S&&!S.done&&(h=C.return)&&h.call(C)}finally{if(f)throw f.error}}return x}function GN(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Qm(r))return r.key}else return{}}var s={};return n.forEach(function(o){s[o.key]=GN(o,e)}),s}function k0(t){var e,n,r=new Map;try{for(var s=ht(t),o=s.next();!o.done;o=s.next()){var u=o.value;r.has(u)||r.set(u,[]),u.parent&&(r.has(u.parent)||r.set(u.parent,[]),r.get(u.parent).push(u))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}function YB(t,e){var n=Hc([t],e);return GN(t,k0(n))}function Gc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function WB(t){return Xt([],xt(new Set(nn(Xt([],xt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function fm(t,e){return e.type==="compound"?Nd(e).some(function(n){return n.type==="final"&&Gc(t,n)}):e.type==="parallel"?Nd(e).every(function(n){return fm(t,n)}):!1}function QB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function yA(t){return new Set(nn(t.map(function(e){return e.tags})))}function $N(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(St(t)||St(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(s){return $N(t[s],e[s])})}function XB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function JB(t,e){var n=t.exec,r=ge(ge({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var bi=(function(){function t(e){var n=this,r;this.actions=[],this.activities=mA,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||mA,this.meta=QB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return WB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var r=au;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=au;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),St(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Xt([],xt(s.map(function(o){return r.toStrings(e[o],n).map(function(u){return o+n+u})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=Ax(e,["configuration","transitions","tags","machine"]);return ge(ge({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return Ix(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;RB(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),ZB={deferEvents:!1},bA=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ge(ge({},ZB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),wy=new Map,e7=0,Rc={bookId:function(){return"x:".concat(e7++)},register:function(t,e){return wy.set(t,e),t},get:function(t){return wy.get(t)},free:function(t){wy.delete(t)}};function kx(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function t7(){var t=kx();if(t&&"__xstate__"in t)return t.__xstate__}function n7(t){if(kx()){var e=t7();e&&e.register(t)}}function r7(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,s=[],o=!1,u=function(){if(!o){for(o=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,f),r.forEach(function(v){return v.next(n)})}o=!1}},d=KB({id:e.id,send:function(h){s.push(h),u()},getSnapshot:function(){return n},subscribe:function(h,v,b){var x=cm(h,v,b);return r.add(x),x.next(n),{unsubscribe:function(){r.delete(x)}}}}),f={parent:e.parent,self:d,id:e.id||"anonymous",observers:r};return n=t.start?t.start(f):n,d}var i7={sync:!1,autoForward:!1},Gn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Gn||(Gn={}));var s7=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Gn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(v,b){if(ku(v))return r.batch(v),r.state;var x=Xn(Bp(v,b));if(r.status===Gn.Stopped)return r.state;if(r.status!==Gn.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(x.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(x.data)));return r.scheduler.schedule(function(){r.forward(x);var E=r._nextState(x);r.update(E,x)}),r._state},this.sendTo=function(v,b,x){var E=r.parent&&(b===bu.Parent||r.parent.id===b),A=E?r.parent:St(b)?b===bu.Internal?r:r.children.get(b)||Rc.get(b):NB(b)?b:void 0;if(!A){if(!E)throw new Error("Unable to send event to child '".concat(b,"' from service '").concat(r.id,"'."));return}if("machine"in A){if(r.status!==Gn.Stopped||r.parent!==A||r.state.done){var O=ge(ge({},v),{name:v.name===vB?"".concat(qc(r.id)):v.name,origin:r.sessionId});!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,O]):A.send(O)}}else!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,v.data]):A.send(v.data)},this._exec=function(v,b,x,E){E===void 0&&(E=r.machine.options.actions);var A=v.exec||N0(v.type,E),O=Et(A)?A:A?A.exec:v.exec;if(O)try{return O(b,x.data,r.machine.config.predictableActionArguments?{action:v,_event:x}:{action:v,state:r.state,_event:x})}catch(ve){throw r.parent&&r.parent.send({type:"xstate.error",data:ve}),ve}switch(v.type){case Qd:{var M=v;r.defer(M);break}case zp:var U=v;if(typeof U.delay=="number"){r.defer(U);return}else U.to?r.sendTo(U._event,U.to,x===au):r.send(U._event);break;case kN:r.cancel(v.sendId);break;case S0:{if(r.status!==Gn.Running)return;var j=v.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[j.id||j.type])break;if(j.type===Vt.Invoke){var z=zN(j.src),H=r.machine.options.services?r.machine.options.services[z.type]:void 0,G=j.id,q=j.data,C="autoForward"in j?j.autoForward:!!j.forward;if(!H)return;var S=q?Ym(q,b,x):void 0;if(typeof H=="string")return;var I=Et(H)?H(b,x.data,{data:S,src:z,meta:j.meta}):H;if(!I)return;var L=void 0;xu(I)&&(I=S?I.withContext(S):I,L={autoForward:C}),r.spawn(I,G,L)}else r.spawnActivity(j);break}case Cx:{r.stopChild(v.activity.id);break}case DN:var P=v,V=P.label,k=P.value;V?r.logger(V,k):r.logger(k);break}};var s=ge(ge({},t.defaultOptions),n),o=s.clock,u=s.logger,d=s.parent,f=s.id,h=f!==void 0?f:e.id;this.id=h,this.logger=u,this.clock=o,this.parent=d,this.options=s,this.scheduler=new bA({deferEvents:this.options.deferEvents}),this.sessionId=Rc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Kl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,s;try{for(var o=ht(e.actions),u=o.next();!u.done;u=o.next()){var d=u.value;this.exec(d,e,n)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,s,o,u,d,f,h,v,b=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===au)&&this.options.execute)this.execute(this.state);else for(var x=void 0;x=this._outgoingQueue.shift();)x[0].send(x[1]);if(this.children.forEach(function(I){b.state.children[I.id]=I}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var E=ht(this.eventListeners),A=E.next();!A.done;A=E.next()){var O=A.value;O(e.event)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(r)throw r.error}}try{for(var M=ht(this.listeners),U=M.next();!U.done;U=M.next()){var O=U.value;O(e,e.event)}}catch(I){o={error:I}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var j=ht(this.contextListeners),z=j.next();!z.done;z=j.next()){var H=z.value;H(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(I){d={error:I}}finally{try{z&&!z.done&&(f=j.return)&&f.call(j)}finally{if(d)throw d.error}}if(this.state.done){var G=e.configuration.find(function(I){return I.type==="final"&&I.parent===b.machine}),q=G&&G.doneData?Ym(G.doneData,e.context,n):void 0;this._doneEvent=dm(this.id,q);try{for(var C=ht(this.doneListeners),S=C.next();!S.done;S=C.next()){var O=S.value;O(this._doneEvent)}}catch(I){h={error:I}}finally{try{S&&!S.done&&(v=C.return)&&v.call(C)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Rc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Gn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var s=this,o=cm(e,n,r);this.listeners.add(o.next),this.status!==Gn.NotStarted&&o.next(this.state);var u=function(){s.doneListeners.delete(u),s.stopListeners.delete(u),o.complete()};return this.status===Gn.Stopped?o.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){s.listeners.delete(o.next),s.doneListeners.delete(u),s.stopListeners.delete(u)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Gn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Gn.Running)return this;this.machine._init(),Rc.register(this.sessionId,this),this.initialized=!0,this.status=Gn.Running;var r=e===void 0?this.initialState:Kl(this,function(){return XB(e)?n.machine.resolveState(e):n.machine.resolveState(bi.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,au)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){Et(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,s,o,u,d,f,h,v;try{for(var b=ht(this.listeners),x=b.next();!x.done;x=b.next()){var E=x.value;this.listeners.delete(E)}}catch(C){e={error:C}}finally{try{x&&!x.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}try{for(var A=ht(this.stopListeners),O=A.next();!O.done;O=A.next()){var E=O.value;E(),this.stopListeners.delete(E)}}catch(C){r={error:C}}finally{try{O&&!O.done&&(s=A.return)&&s.call(A)}finally{if(r)throw r.error}}try{for(var M=ht(this.contextListeners),U=M.next();!U.done;U=M.next()){var E=U.value;this.contextListeners.delete(E)}}catch(C){o={error:C}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var j=ht(this.doneListeners),z=j.next();!z.done;z=j.next()){var E=z.value;this.doneListeners.delete(E)}}catch(C){d={error:C}}finally{try{z&&!z.done&&(f=j.return)&&f.call(j)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Gn.Stopped,this._initialState=void 0;try{for(var H=ht(Object.keys(this.delayedEventsMap)),G=H.next();!G.done;G=H.next()){var q=G.value;this.clock.clearTimeout(this.delayedEventsMap[q])}}catch(C){h={error:C}}finally{try{G&&!G.done&&(v=H.return)&&v.call(H)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new bA({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=e._state)===null||r===void 0)&&r.done)){var s=Xn({type:"xstate.stop"}),o=Kl(e,function(){var u=nn(Xt([],xt(e.state.configuration),!1).sort(function(b,x){return x.order-b.order}).map(function(b){return Ra(b.onExit,e.machine.options.actions)})),d=xt(Wm(e.machine,e.state,e.state.context,s,[{type:"exit",actions:u}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),f=d[0],h=d[1],v=new bi({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:f.filter(function(b){return!I0(b)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return v.changed=!0,v});e.update(o,s),e._stopChildren(),Rc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Gn.NotStarted&&this.options.deferEvents)){if(this.status!==Gn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,o,u=n.state,d=!1,f=[],h=function(E){var A=Xn(E);n.forward(A),u=Kl(n,function(){return n.machine.transition(u,A,void 0,r||void 0)}),f.push.apply(f,Xt([],xt(n.machine.config.predictableActionArguments?u.actions:u.actions.map(function(O){return JB(O,u)})),!1)),d=d||!!u.changed};try{for(var v=ht(e),b=v.next();!b.done;b=v.next()){var x=b.value;h(x)}}catch(E){s={error:E}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}u.changed=d,u.actions=f,n.update(u,Xn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Xn(e);if(s.name.indexOf(hA)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(hA)===0}))throw s.data.data;var o=Kl(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var s=ht(this.forwardTo),o=s.next();!o.done;o=s.next()){var u=o.value,d=this.children.get(u);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));d.send(e)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),Et(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==Gn.Running)return FN(e,n);if(gA(e))return this.spawnPromise(Promise.resolve(e),n);if(Et(e))return this.spawnCallback(e,n);if($B(e))return this.spawnActor(e,n);if(IB(e))return this.spawnObservable(e,n);if(xu(e))return this.spawnMachine(e,ge(ge({},r),{id:n}));if(SB(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var s=new t(e,ge(ge({},this.options),{parent:this,id:n.id||e.id})),o=ge(ge({},i7),n);o.sync&&s.onTransition(function(d){r.send(ON,{state:d,id:s.id})});var u=s;return this.children.set(s.id,u),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(d){r.removeChild(s.id),r.send(Xn(d,{origin:s.id}))}).start(),u},t.prototype.spawnBehavior=function(e,n){var r=r7(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,s=this,o=!1,u;e.then(function(f){o||(u=f,s.removeChild(n),s.send(Xn(dm(n,f),{origin:n})))},function(f){if(!o){s.removeChild(n);var h=qc(n,f);try{s.send(Xn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var d=(r={id:n,send:function(){},subscribe:function(f,h,v){var b=cm(f,h,v),x=!1;return e.then(function(E){x||(b.next(E),!x&&b.complete())},function(E){x||b.error(E)}),{unsubscribe:function(){return x=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},r[Ca]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnCallback=function(e,n){var r,s=this,o=!1,u=new Set,d=new Set,f,h=function(x){f=x,d.forEach(function(E){return E(x)}),!o&&s.send(Xn(x,{origin:n}))},v;try{v=e(h,function(x){u.add(x)})}catch(x){this.send(qc(n,x))}if(gA(v))return this.spawnPromise(v,n);var b=(r={id:n,send:function(x){return u.forEach(function(E){return E(x)})},subscribe:function(x){var E=cm(x);return d.add(E.next),{unsubscribe:function(){d.delete(E.next)}}},stop:function(){o=!0,Et(v)&&v()},toJSON:function(){return{id:n}},getSnapshot:function(){return f}},r[Ca]=function(){return this},r);return this.children.set(n,b),b},t.prototype.spawnObservable=function(e,n){var r,s=this,o,u=e.subscribe(function(f){o=f,s.send(Xn(f,{origin:n}))},function(f){s.removeChild(n),s.send(Xn(qc(n,f),{origin:n}))},function(){s.removeChild(n),s.send(Xn(dm(n),{origin:n}))}),d=(r={id:n,send:function(){},subscribe:function(f,h,v){return e.subscribe(f,h,v)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[Ca]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Ca]=function(){return this},r))},t.prototype.attachDev=function(){var e=kx();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ge(ge({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:ge({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}n7(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Ca]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Gn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=KN,t})();function KN(t,e){var n=new s7(t,e);return n}function a7(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Mh(t){return ge(ge({type:A0},t),{toJSON:function(){t.onDone,t.onError;var e=Ax(t,["onDone","onError"]);return ge(ge({},e),{type:A0,src:a7(t.src)})}})}var Ph="",D0="#",Ey="*",Ul={},zl=function(t){return t[0]===D0},o7=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},l7=(function(){function t(e,n,r,s){r===void 0&&(r="context"in e?e.context:void 0);var o=this,u;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(o7(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:jN),this.id=this.config.id||Xt([this.machine.key],xt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Fc(this.config.states,function(h,v){var b,x=new t(h,{},void 0,{parent:o,key:v});return Object.assign(o.idMap,ge((b={},b[x.id]=x,b),x.idMap)),x}):Ul;var d=0;function f(h){var v,b;h.order=d++;try{for(var x=ht(qN(h)),E=x.next();!E.done;E=x.next()){var A=E.value;f(A)}}catch(O){v={error:O}}finally{try{E&&!E.done&&(b=x.return)&&b.call(x)}finally{if(v)throw v.error}}}f(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var v=h.event;return v===Ph}):Ph in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Di(this.config.entry||this.config.onEntry).map(function(h){return Id(h)}),this.onExit=Di(this.config.exit||this.config.onExit).map(function(h){return Id(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Di(this.config.invoke).map(function(h,v){var b,x;if(xu(h)){var E=Oh(o.id,v);return o.machine.options.services=ge((b={},b[E]=h,b),o.machine.options.services),Mh({src:E,id:E})}else if(St(h.src)){var E=h.id||Oh(o.id,v);return Mh(ge(ge({},h),{id:E,src:h.src}))}else if(xu(h.src)||Et(h.src)){var E=h.id||Oh(o.id,v);return o.machine.options.services=ge((x={},x[E]=h.src,x),o.machine.options.services),Mh(ge(ge({id:E},h),{src:E}))}else{var A=h.src;return Mh(ge(ge({id:Oh(o.id,v)},h),{src:A}))}}),this.activities=Di(this.config.activities).concat(this.invoke).map(function(h){return Nx(h)}),this.transition=this.transition.bind(this),this.tags=Di(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||HN(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,s=r.actions,o=r.activities,u=r.guards,d=r.services,f=r.delays;return new t(this.config,{actions:ge(ge({},s),e.actions),activities:ge(ge({},o),e.activities),guards:ge(ge({},u),e.guards),services:ge(ge({},d),e.services),delays:ge(ge({},f),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return Et(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Fc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Ph,r=this.transitions.filter(function(s){var o=s.eventType===e;return n?o:o||s.eventType===Ey});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(o,u){var d=Et(o)?"".concat(e.id,":delay[").concat(u,"]"):o,f=FB(d,e.id);return e.onEntry.push(jB(f,{delay:o})),e.onExit.push(VB(f)),f},s=ku(n)?n.map(function(o,u){var d=r(o.delay,u);return ge(ge({},o),{event:d})}):nn(Object.keys(n).map(function(o,u){var d=n[o],f=St(d)?{target:d}:d,h=isNaN(+o)?o:+o,v=r(h,u);return Di(f).map(function(b){return ge(ge({},b),{event:v,delay:h})})}));return s.map(function(o){var u=o.delay;return ge(ge({},e.formatTransition(o)),{delay:u})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var s=e instanceof bi?e.value:id(e,this.delimiter);if(St(s)){var o=this.getStateNode(s).initial;return o!==void 0?this.getStateNodes((n={},n[s]=o,n)):[this,this.states[s]]}var u=Object.keys(s),d=[this];return d.push.apply(d,Xt([],xt(nn(u.map(function(f){return r.getStateNode(f).getStateNodes(s[f])}))),!1)),d},t.prototype.handles=function(e){var n=MN(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof bi?e:bi.create(e),r=Array.from(Hc([],this.getStateNodes(n.value)));return new bi(ge(ge({},n),{value:this.resolve(n.value),configuration:r,done:fm(r,this),tags:yA(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var s=this.getStateNode(e),o=s.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionCompoundNode=function(e,n,r){var s=Object.keys(e),o=this.getStateNode(s[0]),u=o._transition(e[s[0]],n,r);return!u||!u.transitions.length?this.next(n,r):u},t.prototype.transitionParallelNode=function(e,n,r){var s,o,u={};try{for(var d=ht(Object.keys(e)),f=d.next();!f.done;f=d.next()){var h=f.value,v=e[h];if(v){var b=this.getStateNode(h),x=b._transition(v,n,r);x&&(u[h]=x)}}}catch(U){s={error:U}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}var E=Object.keys(u).map(function(U){return u[U]}),A=nn(E.map(function(U){return U.transitions})),O=E.some(function(U){return U.transitions.length>0});if(!O)return this.next(n,r);var M=nn(Object.keys(u).map(function(U){return u[U].configuration}));return{transitions:A,exitSet:nn(E.map(function(U){return U.exitSet})),configuration:M,source:n,actions:nn(Object.keys(u).map(function(U){return u[U].actions}))}},t.prototype._transition=function(e,n,r){return St(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Xn(n))},t.prototype.next=function(e,n){var r,s,o=this,u=n.name,d=[],f=[],h;try{for(var v=ht(this.getCandidates(u)),b=v.next();!b.done;b=v.next()){var x=b.value,E=x.cond,A=x.in,O=e.context,M=A?St(A)&&zl(A)?e.matches(id(this.getStateNodeById(A).path,this.delimiter)):Ix(id(A,this.delimiter),wB(this.path.slice(0,-2))(e.value)):!0,U=!1;try{U=!E||UN(this.machine,E,O,n,e)}catch(H){throw new Error("Unable to evaluate guard '".concat(E.name||E.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(H.message))}if(U&&M){x.target!==void 0&&(f=x.target),d.push.apply(d,Xt([],xt(x.actions),!1)),h=x;break}}}catch(H){r={error:H}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}if(h){if(!f.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var j=nn(f.map(function(H){return o.getRelativeStateNodes(H,e.historyValue)})),z=!!h.internal;return{transitions:[h],exitSet:z?[]:nn(f.map(function(H){return o.getPotentiallyReenteringNodes(H)})),configuration:j,source:e,actions:d}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],r=this,s=e;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,r,s,o,u,d){var f,h,v,b,x=this,E=u?Hc([],this.getStateNodes(u.value)):[],A=new Set;try{for(var O=ht(Array.from(e).sort(function(P,V){return P.order-V.order})),M=O.next();!M.done;M=O.next()){var U=M.value;(!Gc(E,U)||Gc(r.exitSet,U)||U.parent&&A.has(U.parent))&&A.add(U)}}catch(P){f={error:P}}finally{try{M&&!M.done&&(h=O.return)&&h.call(O)}finally{if(f)throw f.error}}try{for(var j=ht(E),z=j.next();!z.done;z=j.next()){var U=z.value;(!Gc(e,U)||Gc(r.exitSet,U.parent))&&r.exitSet.push(U)}}catch(P){v={error:P}}finally{try{z&&!z.done&&(b=j.return)&&b.call(j)}finally{if(v)throw v.error}}r.exitSet.sort(function(P,V){return V.order-P.order});var H=Array.from(A).sort(function(P,V){return P.order-V.order}),G=new Set(r.exitSet),q=nn(H.map(function(P){var V=[];if(P.type!=="final")return V;var k=P.parent;if(!k.parent)return V;V.push(jh(P.id,P.doneData),jh(k.id,P.doneData?Ym(P.doneData,s,o):void 0));var ve=k.parent;return ve.type==="parallel"&&Nd(ve).every(function(Oe){return fm(r.configuration,Oe)})&&V.push(jh(ve.id)),V})),C=H.map(function(P){var V=P.onEntry,k=P.activities.map(function(ve){return LB(ve)});return{type:"entry",actions:Ra(d?Xt(Xt([],xt(V),!1),xt(k),!1):Xt(Xt([],xt(k),!1),xt(V),!1),x.machine.options.actions)}}).concat({type:"state_done",actions:q.map(function(P){return DB(P)})}),S=Array.from(G).map(function(P){return{type:"exit",actions:Ra(Xt(Xt([],xt(P.onExit),!1),xt(P.activities.map(function(V){return UB(V)})),!1),x.machine.options.actions)}}),I=S.concat({type:"transition",actions:Ra(r.actions,this.machine.options.actions)}).concat(C);if(n){var L=Ra(nn(Xt([],xt(e),!1).sort(function(P,V){return V.order-P.order}).map(function(P){return P.onExit})),this.machine.options.actions).filter(function(P){return!I0(P)});return I.concat({type:"stop",actions:L})}return I},t.prototype.transition=function(e,n,r,s){e===void 0&&(e=this.initialState);var o=Xn(n),u;if(e instanceof bi)u=r===void 0?e:this.resolveState(bi.from(e,r));else{var d=St(e)?this.resolve(Km(this.getResolvedPath(e))):this.resolve(e),f=r??this.machine.context;u=this.resolveState(bi.from(d,f))}if(this.strict&&!this.events.includes(o.name)&&!TB(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var h=this._transition(u.value,u,o)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},v=Hc([],this.getStateNodes(u.value)),b=h.configuration.length?Hc(v,h.configuration):v;return h.configuration=Xt([],xt(b),!1),this.resolveTransition(h,u,u.context,s,o)},t.prototype.resolveRaisedTransition=function(e,n,r,s){var o,u=e.actions;return e=this.transition(e,n,void 0,s),e._event=r,e.event=r.data,(o=e.actions).unshift.apply(o,Xt([],xt(u),!1)),e},t.prototype.resolveTransition=function(e,n,r,s,o){var u,d,f,h,v=this;o===void 0&&(o=au);var b=e.configuration,x=!n||e.transitions.length>0,E=x?e.configuration:n?n.configuration:[],A=fm(E,this),O=x?YB(this.machine,b):void 0,M=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,U=this.getActions(new Set(E),A,e,r,o,n,s),j=n?ge({},n.activities):{};try{for(var z=ht(U),H=z.next();!H.done;H=z.next()){var G=H.value;try{for(var q=(f=void 0,ht(G.actions)),C=q.next();!C.done;C=q.next()){var S=C.value;S.type===S0?j[S.activity.id||S.activity.type]=S:S.type===Cx&&(j[S.activity.id||S.activity.type]=!1)}}catch(fe){f={error:fe}}finally{try{C&&!C.done&&(h=q.return)&&h.call(q)}finally{if(f)throw f.error}}}}catch(fe){u={error:fe}}finally{try{H&&!H.done&&(d=z.return)&&d.call(z)}finally{if(u)throw u.error}}var I=xt(Wm(this,n,r,o,U,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),L=I[0],P=I[1],V=xt(AB(L,I0),2),k=V[0],ve=V[1],Oe=L.filter(function(fe){var Ae;return fe.type===S0&&((Ae=fe.activity)===null||Ae===void 0?void 0:Ae.type)===A0}),W=Oe.reduce(function(fe,Ae){return fe[Ae.activity.id]=HB(Ae.activity,v.machine,P,o),fe},n?ge({},n.children):{}),re=new bi({value:O||n.value,context:P,_event:o,_sessionid:n?n._sessionid:null,historyValue:O?M?CB(M,O):void 0:n?n.historyValue:void 0,history:!O||e.source?n:void 0,actions:O?ve:[],activities:O?j:n?n.activities:{},events:[],configuration:E,transitions:e.transitions,children:W,done:A,tags:yA(E),machine:this}),ue=r!==P;re.changed=o.name===ON||ue;var _e=re.history;_e&&delete _e.history;var we=!A&&(this._transient||b.some(function(fe){return fe._transient}));if(!x&&(!we||o.name===Ph))return re;var B=re;if(!A)for(we&&(B=this.resolveRaisedTransition(B,{type:pB},o,s));k.length;){var J=k.shift();B=this.resolveRaisedTransition(B,J._event,o,s)}var ce=B.changed||(_e?!!B.actions.length||ue||typeof _e.value!=typeof B.value||!$N(B.value,_e.value):void 0);return B.changed=ce,B.history=_e,B},t.prototype.getStateNode=function(e){if(zl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=zl(e)?e.slice(D0.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&zl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=R0(e,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||Ul;switch(this.type){case"parallel":return Fc(this.initialStateValue,function(o,u){return o?r.getStateNode(u).resolve(e[u]||o):Ul});case"compound":if(St(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?Fc(e,function(o,u){return o?r.getStateNode(u).resolve(o):Ul}):this.initialStateValue||{};default:return e||Ul}},t.prototype.getResolvedPath=function(e){if(zl(e)){var n=this.machine.idMap[e.slice(D0.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return R0(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=pA(this.states,function(r){return r.initialStateValue||Ul},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Qm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;St(n.target)?e=zl(n.target)?Km(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Qm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=um(this.initialStateValue);return nn(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=xt(e),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:pA(this.states,function(n,r){if(!e)return n.historyValue();var s=St(e)?void 0:e[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var s=this.target;return s?nn(um(s).map(function(u){return r.getFromRelativePath(u)})):r.initialStateNodes}var o=EB(r.path,"states")(e).current;return St(o)?[r.getStateNode(o)]:nn(um(o).map(function(u){return n.history==="deep"?r.getFromRelativePath(u):[r.states[u[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=nn(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,s;if(this.__cache.events)return this.__cache.events;var o=this.states,u=new Set(this.ownEvents);if(o)try{for(var d=ht(Object.keys(o)),f=d.next();!f.done;f=d.next()){var h=f.value,v=o[h];if(v.states)try{for(var b=(r=void 0,ht(v.events)),x=b.next();!x.done;x=b.next()){var E=x.value;u.add("".concat(E))}}catch(A){r={error:A}}finally{try{x&&!x.done&&(s=b.return)&&s.call(b)}finally{if(r)throw r.error}}}}catch(A){e={error:A}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!St(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=s?n.key+r:r;if(n.parent)try{var u=n.parent.getStateNodeByPath(o);return u}catch(d){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(d.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,r=kB(e.target),s="internal"in e?e.internal:r?r.some(function(f){return St(f)&&f[0]===n.delimiter}):!0,o=this.machine.options.guards,u=this.resolveTarget(r),d=ge(ge({},e),{actions:Ra(Di(e.actions)),cond:LN(e.cond,o),target:u,source:this,internal:s,eventType:e.event,toJSON:function(){return ge(ge({},d),{target:d.target?d.target.map(function(f){return"#".concat(f.id)}):void 0,source:"#".concat(n.id)})}});return d},t.prototype.formatTransitions=function(){var e,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var o=this.config.on,u=Ey,d=o[u],f=d===void 0?[]:d,h=Ax(o,[typeof u=="symbol"?u:u+""]);s=nn(Object.keys(h).map(function(j){var z=Ll(j,h[j]);return z}).concat(Ll(Ey,f)))}var v=this.config.always?Ll("",this.config.always):[],b=this.config.onDone?Ll(String(jh(this.id)),this.config.onDone):[],x=nn(this.invoke.map(function(j){var z=[];return j.onDone&&z.push.apply(z,Xt([],xt(Ll(String(dm(j.id)),j.onDone)),!1)),j.onError&&z.push.apply(z,Xt([],xt(Ll(String(qc(j.id)),j.onError)),!1)),z})),E=this.after,A=nn(Xt(Xt(Xt(Xt([],xt(b),!1),xt(x),!1),xt(s),!1),xt(v),!1).map(function(j){return Di(j).map(function(z){return r.formatTransition(z)})}));try{for(var O=ht(E),M=O.next();!M.done;M=O.next()){var U=M.value;A.push(U)}}catch(j){e={error:j}}finally{try{M&&!M.done&&(n=O.return)&&n.call(O)}finally{if(e)throw e.error}}return A},t})();function u7(t,e,n){return n===void 0&&(n=t.context),new l7(t,e,n)}var c7=BB,O0;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(O0||(O0={}));var sd=N.useLayoutEffect;function xA(t){var e=N.useRef();return e.current||(e.current={v:t()}),e.current.v}var d7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},f7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function h7(t,e){var n,r,s=d7([[],[]],2),o=s[0],u=s[1];try{for(var d=f7(t),f=d.next();!f.done;f=d.next()){var h=f.value;e(h)?o.push(h):u.push(h)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}var Ic=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},_A=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function wA(t,e){var n=t.exec,r=n(e.context,e._event.data,{action:t,state:e,_event:e._event});r()}function m7(t){var e=N.useRef([]),n=N.useRef([]);sd(function(){var r=t.subscribe(function(s){var o,u;if(s.actions.length){var d=s.actions.filter(function(b){return typeof b.exec=="function"&&"__effect"in b.exec}),f=Ic(h7(d,function(b){return b.exec.__effect===O0.Effect}),2),h=f[0],v=f[1];(o=e.current).push.apply(o,_A([],Ic(h.map(function(b){return[b,s]})),!1)),(u=n.current).push.apply(u,_A([],Ic(v.map(function(b){return[b,s]})),!1))}});return function(){r.unsubscribe()}},[]),sd(function(){for(;n.current.length;){var r=Ic(n.current.shift(),2),s=r[0],o=r[1];wA(s,o)}}),N.useEffect(function(){for(;e.current.length;){var r=Ic(e.current.shift(),2),s=r[0],o=r[1];wA(s,o)}})}var ad=function(){return ad=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ad.apply(this,arguments)},p7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function g7(t,e,n){if(typeof t=="object")return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function v7(t,e,n){e===void 0&&(e={});var r=xA(function(){return typeof t=="function"?t():t}),s=e.context,o=e.guards,u=e.actions,d=e.activities,f=e.services,h=e.delays,v=e.state,b=p7(e,["context","guards","actions","activities","services","delays","state"]),x=xA(function(){var E={context:s,guards:o,actions:u,activities:d,services:f,delays:h},A=r.withConfig(E,function(){return ad(ad({},r.context),s)});return KN(A,ad({deferEvents:!0},b))});return sd(function(){var E;return n&&(E=x.subscribe(g7(n))),function(){E==null||E.unsubscribe()}},[n]),sd(function(){return x.start(v?bi.create(v):void 0),function(){x.stop()}},[]),sd(function(){Object.assign(x.machine.options.actions,u),Object.assign(x.machine.options.guards,o),Object.assign(x.machine.options.activities,d),Object.assign(x.machine.options.services,f),Object.assign(x.machine.options.delays,h)},[u,o,d,f,h]),m7(x),x}var y7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o};function b7(t,e){e===void 0&&(e={});var n=N.useCallback(function(d){var f=d.changed===void 0&&Object.keys(d.children).length;(d.changed||f)&&u(d)},[]),r=v7(t,e,n),s=y7(N.useState(function(){var d=r.machine.initialState;return e.state?bi.create(e.state):d}),2),o=s[0],u=s[1];return[o,r.send,r]}function hn(){return hn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hn.apply(null,arguments)}function ou(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}const at={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(at.str(t)||at.num(t))return t===e;if(at.obj(t)&&at.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return at.und(n)?t===e:!0}};function x7(t,e){return n=>(at.arr(n)?n:Object.keys(n)).reduce((r,s)=>{const o=s;return r[o]=t(o),r},t)}function _7(){const t=N.useState(!1),e=t[1];return N.useCallback(()=>e(r=>!r),[])}function So(t,e){return at.und(t)||at.nul(t)?e:t}function Vh(t){return at.und(t)?[]:at.arr(t)?t:[t]}function Zl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at.fun(t)?t(...n):t}function w7(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,ou(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Ty(t){const e=w7(t);if(at.und(e))return hn({to:e},t);const n=Object.keys(t).reduce((r,s)=>at.und(e[s])?hn({},r,{[s]:t[s]}):r,{});return hn({to:e},n)}function E7(t,e){return e&&(at.fun(e)?e(t):at.obj(e)&&(e.current=t)),t}class Oi{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class j0 extends Oi{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Oi&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Oi&&e.removeChild(this))}}class YN extends Oi{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Oi&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Oi&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const r in this.payload){const s=this.payload[r];e&&!(s instanceof Oi)||(n[r]=s instanceof Oi?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let Dx;function T7(t,e){Dx={fn:t,transform:e}}let WN;function S7(t){WN=t}let QN=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Xm;function A7(t){Xm=t}let XN=()=>Date.now(),C7=t=>t.current,JN;function R7(t){JN=t}class I7 extends YN{constructor(e,n){super(),this.update=void 0,this.payload=e.style?hn({},e,{style:JN(e.style)}):e,this.update=n,this.attach()}}const N7=t=>at.fun(t)&&!(t.prototype instanceof Ln.Component),k7=t=>N.forwardRef((n,r)=>{const s=_7(),o=N.useRef(!0),u=N.useRef(null),d=N.useRef(null),f=N.useCallback(x=>{const E=u.current,A=()=>{let O=!1;d.current&&(O=Dx.fn(d.current,u.current.getAnimatedValue())),(!d.current||O===!1)&&s()};u.current=new I7(x,A),E&&E.detach()},[]);N.useEffect(()=>()=>{o.current=!1,u.current&&u.current.detach()},[]),N.useImperativeHandle(r,()=>C7(d)),f(n);const h=u.current.getValue();h.scrollTop,h.scrollLeft;const v=ou(h,["scrollTop","scrollLeft"]),b=N7(t)?void 0:x=>d.current=E7(x,r);return Ln.createElement(t,hn({},v,{ref:b}))});let od=!1;const Vo=new Set,ZN=()=>{if(!od)return!1;let t=XN();for(let e of Vo){let n=!1;for(let r=0;r<e.configs.length;r++){let s=e.configs[r],o,u;for(let d=0;d<s.animatedValues.length;d++){let f=s.animatedValues[d];if(f.done)continue;let h=s.fromValues[d],v=s.toValues[d],b=f.lastPosition,x=v instanceof Oi,E=Array.isArray(s.initialVelocity)?s.initialVelocity[d]:s.initialVelocity;if(x&&(v=v.getValue()),s.immediate){f.setValue(v),f.done=!0;continue}if(typeof h=="string"||typeof v=="string"){f.setValue(v),f.done=!0;continue}if(s.duration!==void 0)b=h+s.easing((t-f.startTime)/s.duration)*(v-h),o=t>=f.startTime+s.duration;else if(s.decay)b=h+E/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-f.startTime))),o=Math.abs(f.lastPosition-b)<.1,o&&(v=b);else{u=f.lastTime!==void 0?f.lastTime:t,E=f.lastVelocity!==void 0?f.lastVelocity:s.initialVelocity,t>u+64&&(u=t);let A=Math.floor(t-u);for(let j=0;j<A;++j){let z=-s.tension*(b-v),H=-s.friction*E,G=(z+H)/s.mass;E=E+G*1/1e3,b=b+E*1/1e3}let O=s.clamp&&s.tension!==0?h<v?b>v:b<v:!1,M=Math.abs(E)<=s.precision,U=s.tension!==0?Math.abs(v-b)<=s.precision:!0;o=O||M&&U,f.lastVelocity=E,f.lastTime=t}x&&!s.toValues[d].done&&(o=!1),o?(f.value!==v&&(b=v),f.done=!0):n=!0,f.setValue(b),f.lastPosition=b}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Vo.delete(e),e.stop(!0))}return Vo.size?QN(ZN):od=!1,od},D7=t=>{Vo.has(t)||Vo.add(t),od||(od=!0,QN(ZN))},O7=t=>{Vo.has(t)&&Vo.delete(t)};function Jm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Jm({range:t,output:e,extrapolate:n});if(Xm&&typeof t.output[0]=="string")return Xm(t);const r=t,s=r.output,o=r.range||[0,1],u=r.extrapolateLeft||r.extrapolate||"extend",d=r.extrapolateRight||r.extrapolate||"extend",f=r.easing||(h=>h);return h=>{const v=M7(h,o);return j7(h,o[v],o[v+1],s[v],s[v+1],f,u,d,r.map)}}function j7(t,e,n,r,s,o,u,d,f){let h=f?f(t):t;if(h<e){if(u==="identity")return h;u==="clamp"&&(h=e)}if(h>n){if(d==="identity")return h;d==="clamp"&&(h=n)}return r===s?r:e===n?t<=e?r:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=o(h),r===-1/0?h=-h:s===1/0?h=h+r:h=h*(s-r)+r,h)}function M7(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class _u extends j0{constructor(e,n,r,s){super(),this.calc=void 0,this.payload=e instanceof j0&&!(e instanceof _u)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Jm(n,r,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,r){this.calc=Jm(e,n,r)}interpolate(e,n,r){return new _u(this,e,n,r)}}const Bl=(t,e,n)=>t&&new _u(t,e,n),P7={default:{tension:170,friction:26}};function ek(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>ek(n,e))}class M0 extends Oi{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(r,s){s===void 0&&(s=!0),n.value=r,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&ek(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,r){return new _u(this,e,n,r)}}class V7 extends j0{constructor(e){super(),this.payload=e.map(n=>new M0(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((r,s)=>this.payload[s].setValue(r,n)):this.payload.forEach(r=>r.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new _u(this,e,n)}}let L7=0,U7=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=L7++}update(e){if(!e)return this;const n=Ty(e),r=n.delay,s=r===void 0?0:r,o=n.to,u=ou(n,["delay","to"]);if(at.arr(o)||at.fun(o))this.queue.push(hn({},u,{delay:s,to:o}));else if(o){let d={};Object.entries(o).forEach(f=>{let h=f[0],v=f[1];const b=hn({to:{[h]:v},delay:Zl(s,h)},u),x=d[b.delay]&&d[b.delay].to;d[b.delay]=hn({},d[b.delay],b,{to:hn({},x,b.to)})}),this.queue=Object.values(d)}return this.queue=this.queue.sort((d,f)=>d.delay-f.delay),this.diff(u),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let o=s.from,u=o===void 0?{}:o,d=s.to,f=d===void 0?{}:d;at.obj(u)&&(this.merged=hn({},u,this.merged)),at.obj(f)&&(this.merged=hn({},this.merged,f))});const n=this.local=++this.guid,r=this.localQueue=this.queue;this.queue=[],r.forEach((s,o)=>{let u=s.delay,d=ou(s,["delay"]);const f=v=>{o===r.length-1&&n===this.guid&&v&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=at.arr(d.to)||at.fun(d.to);u?setTimeout(()=>{n===this.guid&&(h?this.runAsync(d,f):this.diff(d).start(f))},u):h?this.runAsync(d,f):this.diff(d).start(f)})}else at.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),D7(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&O7(this),this}runAsync(e,n){var r=this;e.delay;let s=ou(e,["delay"]);const o=this.local;let u=Promise.resolve(void 0);if(at.arr(s.to))for(let d=0;d<s.to.length;d++){const f=d,h=hn({},s,Ty(s.to[f]));at.arr(h.config)&&(h.config=h.config[f]),u=u.then(()=>{if(o===this.guid)return new Promise(v=>this.diff(h).start(v))})}else if(at.fun(s.to)){let d=0,f;u=u.then(()=>s.to(h=>{const v=hn({},s,Ty(h));if(at.arr(v.config)&&(v.config=v.config[d]),d++,o===this.guid)return f=new Promise(b=>this.diff(v).start(b))},function(h){return h===void 0&&(h=!0),r.stop(h)}).then(()=>f))}u.then(n)}diff(e){this.props=hn({},this.props,e);let n=this.props,r=n.from,s=r===void 0?{}:r,o=n.to,u=o===void 0?{}:o,d=n.config,f=d===void 0?{}:d,h=n.reverse,v=n.attach,b=n.reset,x=n.immediate;if(h){var E=[u,s];s=E[0],u=E[1]}this.merged=hn({},s,this.merged,u),this.hasChanged=!1;let A=v&&v(this);if(this.animations=Object.entries(this.merged).reduce((O,M)=>{let U=M[0],j=M[1],z=O[U]||{};const H=at.num(j),G=at.str(j)&&!j.startsWith("#")&&!/\d/.test(j)&&!WN[j],q=at.arr(j),C=!H&&!q&&!G;let S=at.und(s[U])?j:s[U],I=H||q||G?j:1,L=Zl(f,U);A&&(I=A.animations[U].parent);let P=z.parent,V=z.interpolation,k=Vh(A?I.getPayload():I),ve,Oe=j;C&&(Oe=Xm({range:[0,1],output:[j,j]})(1));let W=V&&V.getValue();const ue=!at.und(P)&&z.animatedValues.some(J=>!J.done),_e=!at.equ(Oe,W),we=!at.equ(Oe,z.previous),B=!at.equ(L,z.config);if(b||we&&_e||B){if(H||G)P=V=z.parent||new M0(S);else if(q)P=V=z.parent||new V7(S);else if(C){let J=z.interpolation&&z.interpolation.calc(z.parent.value);J=J!==void 0&&!b?J:S,z.parent?(P=z.parent,P.setValue(0,!1)):P=new M0(0);const ce={output:[J,j]};z.interpolation?(V=z.interpolation,z.interpolation.updateConfig(ce)):V=P.interpolate(ce)}return k=Vh(A?I.getPayload():I),ve=Vh(P.getPayload()),b&&!C&&P.setValue(S,!1),this.hasChanged=!0,ve.forEach(J=>{J.startPosition=J.value,J.lastPosition=J.value,J.lastVelocity=ue?J.lastVelocity:void 0,J.lastTime=ue?J.lastTime:void 0,J.startTime=XN(),J.done=!1,J.animatedStyles.clear()}),Zl(x,U)&&P.setValue(C?I:j,!1),hn({},O,{[U]:hn({},z,{name:U,parent:P,interpolation:V,animatedValues:ve,toValues:k,previous:Oe,config:L,fromValues:Vh(P.getValue()),immediate:Zl(x,U),initialVelocity:So(L.velocity,0),clamp:So(L.clamp,!1),precision:So(L.precision,.01),tension:So(L.tension,170),friction:So(L.friction,26),mass:So(L.mass,1),duration:L.duration,easing:So(L.easing,J=>J),decay:L.decay})})}else return _e?O:(C&&(P.setValue(1,!1),V.updateConfig({output:[Oe,Oe]})),P.done=!0,this.hasChanged=!0,hn({},O,{[U]:hn({},O[U],{previous:Oe})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let O in this.animations)this.interpolations[O]=this.animations[O].interpolation,this.values[O]=this.animations[O].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const z7=(t,e)=>{const n=N.useRef(!1),r=N.useRef(),s=at.fun(e),o=N.useMemo(()=>{r.current&&(r.current.map(b=>b.destroy()),r.current=void 0);let v;return[new Array(t).fill().map((b,x)=>{const E=new U7,A=s?Zl(e,x,E):e[x];return x===0&&(v=A.ref),E.update(A),v||E.start(),E}),v]},[t]),u=o[0],d=o[1];r.current=u,N.useImperativeHandle(d,()=>({start:()=>Promise.all(r.current.map(v=>new Promise(b=>v.start(b)))),stop:v=>r.current.forEach(b=>b.stop(v)),get controllers(){return r.current}}));const f=N.useMemo(()=>v=>r.current.map((b,x)=>{b.update(s?Zl(v,x,b):v[x]),d||b.start()}),[t]);N.useEffect(()=>{n.current?s||f(e):d||r.current.forEach(v=>v.start())}),N.useEffect(()=>(n.current=!0,()=>r.current.forEach(v=>v.destroy())),[]);const h=r.current.map(v=>v.getValues());return s?[h,f,v=>r.current.forEach(b=>b.pause(v))]:h},B7=t=>{const e=at.fun(t),n=z7(1,e?t:[t]),r=n[0],s=n[1],o=n[2];return e?[r[0],s,o]:r};class F7 extends YN{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Oi)&&(e=Dx.transform(e)),this.payload=e}}const Zm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Pi="[-+]?\\d*\\.?\\d+",ep=Pi+"%";function Fp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const q7=new RegExp("rgb"+Fp(Pi,Pi,Pi)),H7=new RegExp("rgba"+Fp(Pi,Pi,Pi,Pi)),G7=new RegExp("hsl"+Fp(Pi,ep,ep)),$7=new RegExp("hsla"+Fp(Pi,ep,ep,Pi)),K7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Y7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,W7=/^#([0-9a-fA-F]{6})$/,Q7=/^#([0-9a-fA-F]{8})$/;function X7(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=W7.exec(t))?parseInt(e[1]+"ff",16)>>>0:Zm.hasOwnProperty(t)?Zm[t]:(e=q7.exec(t))?(Fl(e[1])<<24|Fl(e[2])<<16|Fl(e[3])<<8|255)>>>0:(e=H7.exec(t))?(Fl(e[1])<<24|Fl(e[2])<<16|Fl(e[3])<<8|SA(e[4]))>>>0:(e=K7.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Q7.exec(t))?parseInt(e[1],16)>>>0:(e=Y7.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=G7.exec(t))?(EA(TA(e[1]),Lh(e[2]),Lh(e[3]))|255)>>>0:(e=$7.exec(t))?(EA(TA(e[1]),Lh(e[2]),Lh(e[3]))|SA(e[4]))>>>0:null}function Sy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function EA(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=Sy(s,r,t+1/3),u=Sy(s,r,t),d=Sy(s,r,t-1/3);return Math.round(o*255)<<24|Math.round(u*255)<<16|Math.round(d*255)<<8}function Fl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function TA(t){return(parseFloat(t)%360+360)%360/360}function SA(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Lh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function AA(t){let e=X7(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,s=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}const Uh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,J7=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Z7=new RegExp(`(${Object.keys(Zm).join("|")})`,"g"),eF=t=>{const e=t.output.map(s=>s.replace(J7,AA)).map(s=>s.replace(Z7,AA)),n=e[0].match(Uh).map(()=>[]);e.forEach(s=>{s.match(Uh).forEach((o,u)=>n[u].push(+o))});const r=e[0].match(Uh).map((s,o)=>Jm(hn({},t,{output:n[o]})));return s=>{let o=0;return e[0].replace(Uh,()=>r[o++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(u,d,f,h,v)=>`rgba(${Math.round(d)}, ${Math.round(f)}, ${Math.round(h)}, ${v})`)}};let ld={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const tF=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),nF=["Webkit","Ms","Moz","O"];ld=Object.keys(ld).reduce((t,e)=>(nF.forEach(n=>t[tF(n,e)]=t[e]),t),ld);function rF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(ld.hasOwnProperty(t)&&ld[t])?e+"px":(""+e).trim()}const CA={};R7(t=>new F7(t));A7(eF);S7(Zm);T7((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,o=e.children,u=e.scrollTop,d=e.scrollLeft,f=ou(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";u!==void 0&&(t.scrollTop=u),d!==void 0&&(t.scrollLeft=d),o!==void 0&&(t.textContent=o);for(let v in s)if(s.hasOwnProperty(v)){var n=v.indexOf("--")===0,r=rF(v,s[v],n);v==="float"&&(v="cssFloat"),n?t.style.setProperty(v,r):t.style[v]=r}for(let v in f){const b=h?v:CA[v]||(CA[v]=v.replace(/([A-Z])/g,x=>"-"+x.toLowerCase()));typeof t.getAttribute(b)<"u"&&t.setAttribute(b,f[v])}return}else return!1},t=>t);const iF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sF=x7(k7),aF=sF(iF);function RA(t,e){return t.map(function(n,r){return n+e[r]})}function tk(t,e){return t.map(function(n,r){return n-e[r]})}function P0(t){return Math.hypot.apply(Math,t)}function oF(t,e,n){var r=P0(e),s=r===0?0:1/r,o=n===0?0:1/n,u=o*r,d=e.map(function(v){return o*v}),f=e.map(function(v){return s*v}),h=P0(t);return{velocities:d,velocity:u,distance:h,direction:f}}function V0(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function lF(t,e,n){return Math.max(e,Math.min(t,n))}function uF(t,e){return Math.pow(t,e*5)}function IA(t,e,n){return e===0||Math.abs(e)===1/0?uF(t,n):t*e*n/(e+n*t)}function ud(t,e,n,r){return r===void 0&&(r=.15),r===0?lF(t,e,n):t<e?-IA(e-t,n-e,r)+e:t>n?+IA(t-n,n-e,r)+n:t}function cF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dF(t,e,n){return e&&cF(t.prototype,e),t}function Tr(){return Tr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tr.apply(this,arguments)}function nk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function fF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hF(t,e){if(t){if(typeof t=="string")return NA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NA(t,e)}}function NA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=hF(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function rk(){}function ik(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?rk:e.length===1?e[0]:function(){for(var r,s=qp(e),o;!(o=s()).done;){var u=o.value;r=u.apply(this,arguments)||r}return r}}function Ia(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Bh(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}else return t}function Ox(t,e){t===void 0&&(t={});for(var n={},r=0,s=Object.entries(e);r<s.length;r++){var o=s[r],u=o[0],d=o[1];switch(typeof d){case"function":n[u]=d.call(n,t[u],u,t);break;case"object":n[u]=Ox(t[u],d);break;case"boolean":d&&(n[u]=t[u]);break}}return n}var mF=180,pF=.15,gF=.5,vF=60,yF={threshold:function(e){return e===void 0&&(e=0),Ia(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Ia(pF);case!1:return Ia(0);default:return Ia(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Ia(e)}},sk=Tr({},yF,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(b){return sk.bounds(e(b))};var n=e,r=n.left,s=r===void 0?-1/0:r,o=n.right,u=o===void 0?1/0:o,d=n.top,f=d===void 0?-1/0:d,h=n.bottom,v=h===void 0?1/0:h;return[[s,u],[f,v]]}}),bF=typeof window<"u"&&window.document&&window.document.createElement,xF={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=bF?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,r=n.passive,s=r===void 0?!0:r,o=n.capture,u=o===void 0?!1:o;return{passive:s,capture:u}}},_F=Tr({},sk,{threshold:function(e,n,r){var s=r.filterTaps,o=s===void 0?!1:s,u=r.lockDirection,d=u===void 0?!1:u,f=r.axis,h=f===void 0?void 0:f,v=Ia(e,o?3:d||h?1:0);return this.filterTaps=o||v[0]+v[1]>0,v},swipeVelocity:function(e){return e===void 0&&(e=gF),Ia(e)},swipeDistance:function(e){return e===void 0&&(e=vF),Ia(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return mF;case!1:return 0;default:return e}}});function wF(t){return t===void 0&&(t={}),Ox(t,xF)}function EF(t){return t===void 0&&(t={}),Ox(t,_F)}function TF(t){var e=t.domTarget,n=t.eventOptions,r=t.window,s=t.enabled,o=fF(t,["domTarget","eventOptions","window","enabled"]),u=wF({domTarget:e,eventOptions:n,window:r,enabled:s});return u.drag=EF(o),u}function Nc(t){return Tr({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:rk,canceled:!1,memo:void 0,args:void 0},t)}function ak(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Nc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),r=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:r,move:s,scroll:o}}var No=new Map,SF=(function(){function t(n,r){var s=this;r===void 0&&(r=[]),this.controller=n,this.args=r,this.debounced=!0,this.setTimeout=function(o,u){var d;u===void 0&&(u=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var f=arguments.length,h=new Array(f>2?f-2:0),v=2;v<f;v++)h[v-2]=arguments[v];s.controller.timeouts[s.stateKey]=(d=window).setTimeout.apply(d,[o,u].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!o&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var u=s.state.active,d=s.state._active;s.state.active=d,s.state.first=d&&!u,s.state.last=u&&!d,s.controller.state.shared[s.ingKey]=d}var f=Tr({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(f);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),f}}var e=t.prototype;return e.updateSharedState=function(r){Object.assign(this.controller.state.shared,r)},e.updateGestureState=function(r){Object.assign(this.state,r)},e.checkIntentionality=function(r,s){return{_intentional:r,_blocked:!1}},e.getMovement=function(r){var s=this.config,o=s.initial,u=s.bounds,d=s.rubberband,f=s.threshold,h=this.state,v=h._bounds,b=h._initial,x=h._active,E=h._intentional,A=h.lastOffset,O=h.movement,M=this.getInternalMovement(r,this.state),U=E[0]===!1?kA(M[0],f[0]):E[0],j=E[1]===!1?kA(M[1],f[1]):E[1],z=this.checkIntentionality([U,j],M);if(z._blocked)return Tr({},z,{_movement:M,delta:[0,0]});var H=z._intentional,G=M,q,C;if(H[0]!==!1&&E[0]===!1&&(C=Bh(o,this.state),q=Bh(u,this.state),b[0]=C[0],v[0]=q[0]),H[1]!==!1&&E[1]===!1){var S,I;C=(S=C)!=null?S:Bh(o,this.state),q=(I=q)!=null?I:Bh(u,this.state),b[1]=C[1],v[1]=q[1]}var L=[H[0]!==!1?M[0]-H[0]:b[0],H[1]!==!1?M[1]-H[1]:b[1]],P=RA(L,A),V=x?d:[0,0];return L=DA(v,RA(L,b),V),Tr({},z,{intentional:H[0]!==!1||H[1]!==!1,_initial:b,_movement:G,movement:L,values:r,offset:DA(v,P,V),delta:tk(L,O)})},e.clean=function(){this.clearTimeout()},dF(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function kA(t,e){return Math.abs(t)>=e?V0(t)*e:!1}function DA(t,e,n){var r=e[0],s=e[1],o=n[0],u=n[1],d=t[0],f=d[0],h=d[1],v=t[1],b=v[0],x=v[1];return[ud(r,f,h,o),ud(s,b,x,u)]}function Ay(t,e,n){var r=t.state,s=t.args,o=e.timeStamp,u=e.type,d=r.values,f=n?0:o-r.startTime;return{_lastEventType:u,event:e,timeStamp:o,elapsedTime:f,args:s,previous:d}}function AF(t,e,n){var r=t.state.offset,s=n.timeStamp;return Tr({},ak()[t.stateKey],{_active:!0,values:e,initial:e,offset:r,lastOffset:r,startTime:s})}function CF(t,e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return t.call.apply(t,[this,Tr({},e,{event:n})].concat(s))}}var RF=function(e){var n=this;this.classes=e,this.bind=function(){for(var r={},s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];for(var d=qp(n.classes),f;!(f=d()).done;){var h=f.value;new h(n,o).addBindings(r)}for(var v=0,b=Object.entries(n.nativeRefs);v<b.length;v++){var x=b[v],E=x[0],A=x[1];L0(r,E,CF(A,Tr({},n.state.shared,{args:o})))}return n.config.domTarget?DF(n,r):OF(n,r)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var r=lk(n.config),s=n.config.eventOptions;r&&Xd(r,ok(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),IF(n)},this.state=ak(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function IF(t){var e=t.config,n=e.window,r=e.eventOptions,s=t.windowListeners;if(n){for(var o in s){var u=s[o];Xd(n,u,r)}t.windowListeners={}}}function NF(t,e){var n=t.config,r=t.windowListeners;n.window&&(Xd(n.window,r[e],n.eventOptions),delete r[e])}function kF(t,e,n){var r=t.config,s=t.windowListeners;n===void 0&&(n=[]),r.window&&(Xd(r.window,s[e],r.eventOptions),uk(r.window,s[e]=n,r.eventOptions))}function DF(t,e){var n=t.config,r=t.domListeners,s=lk(n);if(!s)throw new Error("domTarget must be defined");var o=n.eventOptions;Xd(s,ok(r),o);for(var u=0,d=Object.entries(e);u<d.length;u++){var f=d[u],h=f[0],v=f[1],b=h.slice(2).toLowerCase();r.push([b,ik.apply(void 0,v)])}uk(s,r,o)}function OF(t,e){for(var n=t.config,r={},s=n.eventOptions.capture?"Capture":"",o=0,u=Object.entries(e);o<u.length;o++){var d=u[o],f=d[0],h=d[1],v=Array.isArray(h)?h:[h],b=f+s;r[b]=ik.apply(void 0,v)}return r}function ok(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function lk(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function L0(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function uk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=qp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.addEventListener(u,d,n)}}function Xd(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=qp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.removeEventListener(u,d,n)}}function jF(t,e,n){n===void 0&&(n={});var r=PF(t),s=Ln.useMemo(function(){return new RF(r)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,Ln.useEffect(s.effect,[]),s.config.domTarget?MF:s.bind}function MF(){}function PF(t){var e=new Set;return t.drag&&e.add(No.get("drag")),t.wheel&&e.add(No.get("wheel")),t.scroll&&e.add(No.get("scroll")),t.move&&e.add(No.get("move")),t.pinch&&e.add(No.get("pinch")),t.hover&&e.add(No.get("hover")),e}var VF=(function(t){nk(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,o){return tk(s,o.initial)},n.checkIntentionality=function(s,o){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var u=o.map(Math.abs),d=u[0],f=u[1],h=this.state.axis||(d>f?"x":d<f?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,o){var u=this.getMovement(s);if(!u._blocked){var d=o.timeStamp-this.state.timeStamp;Object.assign(u,oF(u.movement,u.delta,d))}return u},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(SF);function ck(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function OA(t){var e="buttons"in t?t.buttons:0,n=ck(t),r=n&&n.length||0,s=r>0||e>0,o=t.shiftKey,u=t.altKey,d=t.metaKey,f=t.ctrlKey;return{touches:r,down:s,buttons:e,shiftKey:o,altKey:u,metaKey:d,ctrlKey:f}}function jA(t){var e=ck(t),n=e?e[0]:t,r=n.clientX,s=n.clientY;return[r,s]}var LF=3,UF=220,zF=(function(t){nk(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="dragging",r.stateKey="drag",r.onDragStart=function(s){!r.enabled||r.state._active||(kF(r.controller,r.stateKey,[["pointermove",r.onDragChange],["pointerup",r.onDragEnd],["pointercancel",r.onDragEnd]]),r.updateGestureState({_pointerId:s.pointerId}),r.config.delay>0?(r.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),r.setTimeout(r.startDrag.bind(zh(r)),r.config.delay,s)):r.startDrag(s))},r.onDragChange=function(s){if(!r.state.canceled&&s.pointerId===r.state._pointerId){if(!r.state._active){r.state._delayedEvent&&(r.clearTimeout(),r.startDrag(s));return}var o=OA(s);if(!o.down){r.onDragEnd(s);return}r.updateSharedState(o);var u=jA(s),d=r.getKinematics(u,s),f=Ay(zh(r),s),h=r.state._isTap,v=P0(d._movement);h&&v>=LF&&(h=!1),r.updateGestureState(Tr({},f,d,{_isTap:h})),r.fireGestureHandler()}},r.onDragEnd=function(s){if(s.pointerId===r.state._pointerId){r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0});var o=r.state._isTap,u=r.state.velocities,d=u[0],f=u[1],h=r.state.movement,v=h[0],b=h[1],x=r.state._intentional,E=x[0],A=x[1],O=r.config.swipeVelocity,M=O[0],U=O[1],j=r.config.swipeDistance,z=j[0],H=j[1],G=Tr({},Ay(zh(r),s),r.getMovement(r.state.values)),q=[0,0];G.elapsedTime<UF&&(E!==!1&&Math.abs(d)>M&&Math.abs(v)>z&&(q[0]=V0(d)),A!==!1&&Math.abs(f)>U&&Math.abs(b)>H&&(q[1]=V0(f))),r.updateGestureState(Tr({},G,{tap:o,swipe:q})),r.fireGestureHandler(o===!0)}},r.clean=function(){t.prototype.clean.call(zh(r)),r.state._delayedEvent=!1,NF(r.controller,r.stateKey)},r.onCancel=function(){r.state.canceled||(r.updateGestureState({canceled:!0}),r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return r.fireGestureHandler()}))},r.onClick=function(s){r.state._isTap||s.stopPropagation()},r}var n=e.prototype;return n.startDrag=function(s){var o=jA(s);this.updateSharedState(OA(s)),this.updateGestureState(Tr({},AF(this,o,s),Ay(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(s){if(L0(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";L0(s,o,this.onClick)}},e})(VF);function BF(t,e){var n,r=[],s,o=!1;function u(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return o&&n===this&&e(f,r)||(s=t.apply(this,f),o=!0,n=this,r=f),s}return u}function hm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hm(t[r],e[r]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!hm(r.value[1],e.get(r.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!(s[r]==="_owner"&&t.$$typeof)&&!hm(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}function FF(t,e){try{return hm(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function qF(t,e){e===void 0&&(e={}),No.set("drag",zF);var n=N.useRef();return n.current||(n.current=BF(TF,FF)),jF({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var dk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],tp=dk.join(","),fk=typeof Element>"u",Ko=fk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,U0=!fk&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},hk=function(e,n,r){var s=Array.prototype.slice.apply(e.querySelectorAll(tp));return n&&Ko.call(e,tp)&&s.unshift(e),s=s.filter(r),s},mk=function t(e,n,r){for(var s=[],o=Array.from(e);o.length;){var u=o.shift();if(u.tagName==="SLOT"){var d=u.assignedElements(),f=d.length?d:u.children,h=t(f,!0,r);r.flatten?s.push.apply(s,h):s.push({scope:u,candidates:h})}else{var v=Ko.call(u,tp);v&&r.filter(u)&&(n||!e.includes(u))&&s.push(u);var b=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),x=!r.shadowRootFilter||r.shadowRootFilter(u);if(b&&x){var E=t(b===!0?u.children:b.children,!0,r);r.flatten?s.push.apply(s,E):s.push({scope:u,candidates:E})}else o.unshift.apply(o,u.children)}}return s},pk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},HF=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},gk=function(e){return e.tagName==="INPUT"},GF=function(e){return gk(e)&&e.type==="hidden"},$F=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},KF=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},YF=function(e){if(!e.name)return!0;var n=e.form||U0(e),r=function(d){return n.querySelectorAll('input[type="radio"][name="'+d+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var o=KF(s,e.form);return!o||o===e},WF=function(e){return gk(e)&&e.type==="radio"},QF=function(e){return WF(e)&&!YF(e)},MA=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},XF=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Ko.call(e,"details>summary:first-of-type"),u=o?e.parentElement:e;if(Ko.call(u,"details:not([open]) *"))return!0;var d=U0(e).host,f=(d==null?void 0:d.ownerDocument.contains(d))||e.ownerDocument.contains(e);if(!r||r==="full"){if(typeof s=="function"){for(var h=e;e;){var v=e.parentElement,b=U0(e);if(v&&!v.shadowRoot&&s(v)===!0)return MA(e);e.assignedSlot?e=e.assignedSlot:!v&&b!==e.ownerDocument?e=b.host:e=v}e=h}if(f)return!e.getClientRects().length}else if(r==="non-zero-area")return MA(e);return!1},JF=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Ko.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},np=function(e,n){return!(n.disabled||GF(n)||XF(n,e)||$F(n)||JF(n))},z0=function(e,n){return!(QF(n)||pk(n)<0||!np(e,n))},ZF=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},eq=function t(e){var n=[],r=[];return e.forEach(function(s,o){var u=!!s.scope,d=u?s.scope:s,f=pk(d,u),h=u?t(s.candidates):d;f===0?u?n.push.apply(n,h):n.push(d):r.push({documentOrder:o,tabIndex:f,item:s,isScope:u,content:h})}),r.sort(HF).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},tq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=mk([e],n.includeContainer,{filter:z0.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ZF}):r=hk(e,n.includeContainer,z0.bind(null,n)),eq(r)},nq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=mk([e],n.includeContainer,{filter:np.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=hk(e,n.includeContainer,np.bind(null,n)),r},Fh=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ko.call(e,tp)===!1?!1:z0(n,e)},rq=dk.concat("iframe").join(","),Cy=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ko.call(e,rq)===!1?!1:np(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function PA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(n),!0).forEach(function(r){iq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var LA=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var r=t[t.length-1];r!==n&&r.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var r=t.indexOf(n);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}}})(),sq=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},aq=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},oq=function(e){return e.key==="Tab"||e.keyCode===9},UA=function(e){return setTimeout(e,0)},zA=function(e,n){var r=-1;return e.every(function(s,o){return n(s)?(r=o,!1):!0}),r},kc=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},qh=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},lq=function(e,n){var r=(n==null?void 0:n.document)||document,s=VA({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,d=function(q,C,S){return q&&q[C]!==void 0?q[C]:s[S||C]},f=function(q){return o.containerGroups.findIndex(function(C){var S=C.container,I=C.tabbableNodes;return S.contains(q)||I.find(function(L){return L===q})})},h=function(q){var C=s[q];if(typeof C=="function"){for(var S=arguments.length,I=new Array(S>1?S-1:0),L=1;L<S;L++)I[L-1]=arguments[L];C=C.apply(void 0,I)}if(C===!0&&(C=void 0),!C){if(C===void 0||C===!1)return C;throw new Error("`".concat(q,"` was specified but was not a node, or did not return a node"))}var P=C;if(typeof C=="string"&&(P=r.querySelector(C),!P))throw new Error("`".concat(q,"` as selector refers to no known node"));return P},v=function(){var q=h("initialFocus");if(q===!1)return!1;if(q===void 0)if(f(r.activeElement)>=0)q=r.activeElement;else{var C=o.tabbableGroups[0],S=C&&C.firstTabbableNode;q=S||h("fallbackFocus")}if(!q)throw new Error("Your focus-trap needs to have at least one focusable element");return q},b=function(){if(o.containerGroups=o.containers.map(function(q){var C=tq(q,s.tabbableOptions),S=nq(q,s.tabbableOptions);return{container:q,tabbableNodes:C,focusableNodes:S,firstTabbableNode:C.length>0?C[0]:null,lastTabbableNode:C.length>0?C[C.length-1]:null,nextTabbableNode:function(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,V=S.findIndex(function(k){return k===L});if(!(V<0))return P?S.slice(V+1).find(function(k){return Fh(k,s.tabbableOptions)}):S.slice(0,V).reverse().find(function(k){return Fh(k,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(q){return q.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},x=function G(q){if(q!==!1&&q!==r.activeElement){if(!q||!q.focus){G(v());return}q.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=q,sq(q)&&q.select()}},E=function(q){var C=h("setReturnFocus",q);return C||(C===!1?!1:q)},A=function(q){var C=qh(q);if(!(f(C)>=0)){if(kc(s.clickOutsideDeactivates,q)){u.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Cy(C,s.tabbableOptions)});return}kc(s.allowOutsideClick,q)||q.preventDefault()}},O=function(q){var C=qh(q),S=f(C)>=0;S||C instanceof Document?S&&(o.mostRecentlyFocusedNode=C):(q.stopImmediatePropagation(),x(o.mostRecentlyFocusedNode||v()))},M=function(q){var C=qh(q);b();var S=null;if(o.tabbableGroups.length>0){var I=f(C),L=I>=0?o.containerGroups[I]:void 0;if(I<0)q.shiftKey?S=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:S=o.tabbableGroups[0].firstTabbableNode;else if(q.shiftKey){var P=zA(o.tabbableGroups,function(re){var ue=re.firstTabbableNode;return C===ue});if(P<0&&(L.container===C||Cy(C,s.tabbableOptions)&&!Fh(C,s.tabbableOptions)&&!L.nextTabbableNode(C,!1))&&(P=I),P>=0){var V=P===0?o.tabbableGroups.length-1:P-1,k=o.tabbableGroups[V];S=k.lastTabbableNode}}else{var ve=zA(o.tabbableGroups,function(re){var ue=re.lastTabbableNode;return C===ue});if(ve<0&&(L.container===C||Cy(C,s.tabbableOptions)&&!Fh(C,s.tabbableOptions)&&!L.nextTabbableNode(C))&&(ve=I),ve>=0){var Oe=ve===o.tabbableGroups.length-1?0:ve+1,W=o.tabbableGroups[Oe];S=W.firstTabbableNode}}}else S=h("fallbackFocus");S&&(q.preventDefault(),x(S))},U=function(q){if(aq(q)&&kc(s.escapeDeactivates,q)!==!1){q.preventDefault(),u.deactivate();return}if(oq(q)){M(q);return}},j=function(q){var C=qh(q);f(C)>=0||kc(s.clickOutsideDeactivates,q)||kc(s.allowOutsideClick,q)||(q.preventDefault(),q.stopImmediatePropagation())},z=function(){if(o.active)return LA.activateTrap(u),o.delayInitialFocusTimer=s.delayInitialFocus?UA(function(){x(v())}):x(v()),r.addEventListener("focusin",O,!0),r.addEventListener("mousedown",A,{capture:!0,passive:!1}),r.addEventListener("touchstart",A,{capture:!0,passive:!1}),r.addEventListener("click",j,{capture:!0,passive:!1}),r.addEventListener("keydown",U,{capture:!0,passive:!1}),u},H=function(){if(o.active)return r.removeEventListener("focusin",O,!0),r.removeEventListener("mousedown",A,!0),r.removeEventListener("touchstart",A,!0),r.removeEventListener("click",j,!0),r.removeEventListener("keydown",U,!0),u};return u={get active(){return o.active},get paused(){return o.paused},activate:function(q){if(o.active)return this;var C=d(q,"onActivate"),S=d(q,"onPostActivate"),I=d(q,"checkCanFocusTrap");I||b(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,C&&C();var L=function(){I&&b(),z(),S&&S()};return I?(I(o.containers.concat()).then(L,L),this):(L(),this)},deactivate:function(q){if(!o.active)return this;var C=VA({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},q);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,H(),o.active=!1,o.paused=!1,LA.deactivateTrap(u);var S=d(C,"onDeactivate"),I=d(C,"onPostDeactivate"),L=d(C,"checkCanReturnFocus"),P=d(C,"returnFocus","returnFocusOnDeactivate");S&&S();var V=function(){UA(function(){P&&x(E(o.nodeFocusedBeforeActivation)),I&&I()})};return P&&L?(L(E(o.nodeFocusedBeforeActivation)).then(V,V),this):(V(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,H(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,b(),z(),this)},updateContainerElements:function(q){var C=[].concat(q).filter(Boolean);return o.containers=C.map(function(S){return typeof S=="string"?r.querySelector(S):S}),o.active&&b(),this}},u.updateContainerElements(e),u};function uq(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var jx=!1;if(typeof window<"u"){var BA={get passive(){jx=!0}};window.addEventListener("testPassive",null,BA),window.removeEventListener("testPassive",null,BA)}var vk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),ka=[],rp=!1,yk=-1,cd=void 0,dd=void 0,bk=function(e){return ka.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},ip=function(e){var n=e||window.event;return bk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},cq=function(e){if(dd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,r=window.innerWidth-document.documentElement.clientWidth;n&&r>0&&(dd=document.body.style.paddingRight,document.body.style.paddingRight=r+"px")}cd===void 0&&(cd=document.body.style.overflow,document.body.style.overflow="hidden")},dq=function(){dd!==void 0&&(document.body.style.paddingRight=dd,dd=void 0),cd!==void 0&&(document.body.style.overflow=cd,cd=void 0)},fq=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},hq=function(e,n){var r=e.targetTouches[0].clientY-yk;return bk(e.target)?!1:n&&n.scrollTop===0&&r>0||fq(n)&&r<0?ip(e):(e.stopPropagation(),!0)},mq=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!ka.some(function(s){return s.targetElement===e})){var r={targetElement:e,options:n||{}};ka=[].concat(uq(ka),[r]),vk?(e.ontouchstart=function(s){s.targetTouches.length===1&&(yk=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&hq(s,e)},rp||(document.addEventListener("touchmove",ip,jx?{passive:!1}:void 0),rp=!0)):cq(n)}},pq=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}ka=ka.filter(function(n){return n.targetElement!==e}),vk?(e.ontouchstart=null,e.ontouchmove=null,rp&&ka.length===0&&(document.removeEventListener("touchmove",ip,jx?{passive:!1}:void 0),rp=!1)):ka.length||dq()},Lo=[],gq=function(){return Lo.some(function(t){return t.activeTargets.length>0})},vq=function(){return Lo.some(function(t){return t.skippedTargets.length>0})},FA="ResizeObserver loop completed with undelivered notifications.",yq=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:FA}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=FA),window.dispatchEvent(t)},kd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(kd||(kd={}));var Uo=function(t){return Object.freeze(t)},bq=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Uo(this)}return t})(),xk=(function(){function t(e,n,r,s){return this.x=e,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Uo(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,s=e.top,o=e.right,u=e.bottom,d=e.left,f=e.width,h=e.height;return{x:n,y:r,top:s,right:o,bottom:u,left:d,width:f,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),Mx=function(t){return t instanceof SVGElement&&"getBBox"in t},_k=function(t){if(Mx(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var s=t,o=s.offsetWidth,u=s.offsetHeight;return!(o||u||t.getClientRects().length)},qA=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},xq=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},fd=typeof window<"u"?window:{},Hh=new WeakMap,HA=/auto|scroll/,_q=/^tb|vertical/,wq=/msie|trident/i.test(fd.navigator&&fd.navigator.userAgent),Yi=function(t){return parseFloat(t||"0")},lu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new bq((n?e:t)||0,(n?t:e)||0)},GA=Uo({devicePixelContentBoxSize:lu(),borderBoxSize:lu(),contentBoxSize:lu(),contentRect:new xk(0,0,0,0)}),wk=function(t,e){if(e===void 0&&(e=!1),Hh.has(t)&&!e)return Hh.get(t);if(_k(t))return Hh.set(t,GA),GA;var n=getComputedStyle(t),r=Mx(t)&&t.ownerSVGElement&&t.getBBox(),s=!wq&&n.boxSizing==="border-box",o=_q.test(n.writingMode||""),u=!r&&HA.test(n.overflowY||""),d=!r&&HA.test(n.overflowX||""),f=r?0:Yi(n.paddingTop),h=r?0:Yi(n.paddingRight),v=r?0:Yi(n.paddingBottom),b=r?0:Yi(n.paddingLeft),x=r?0:Yi(n.borderTopWidth),E=r?0:Yi(n.borderRightWidth),A=r?0:Yi(n.borderBottomWidth),O=r?0:Yi(n.borderLeftWidth),M=b+h,U=f+v,j=O+E,z=x+A,H=d?t.offsetHeight-z-t.clientHeight:0,G=u?t.offsetWidth-j-t.clientWidth:0,q=s?M+j:0,C=s?U+z:0,S=r?r.width:Yi(n.width)-q-G,I=r?r.height:Yi(n.height)-C-H,L=S+M+G+j,P=I+U+H+z,V=Uo({devicePixelContentBoxSize:lu(Math.round(S*devicePixelRatio),Math.round(I*devicePixelRatio),o),borderBoxSize:lu(L,P,o),contentBoxSize:lu(S,I,o),contentRect:new xk(b,f,S,I)});return Hh.set(t,V),V},Ek=function(t,e,n){var r=wk(t,n),s=r.borderBoxSize,o=r.contentBoxSize,u=r.devicePixelContentBoxSize;switch(e){case kd.DEVICE_PIXEL_CONTENT_BOX:return u;case kd.BORDER_BOX:return s;default:return o}},Eq=(function(){function t(e){var n=wk(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Uo([n.borderBoxSize]),this.contentBoxSize=Uo([n.contentBoxSize]),this.devicePixelContentBoxSize=Uo([n.devicePixelContentBoxSize])}return t})(),Tk=function(t){if(_k(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Tq=function(){var t=1/0,e=[];Lo.forEach(function(u){if(u.activeTargets.length!==0){var d=[];u.activeTargets.forEach(function(h){var v=new Eq(h.target),b=Tk(h.target);d.push(v),h.lastReportedSize=Ek(h.target,h.observedBox),b<t&&(t=b)}),e.push(function(){u.callback.call(u.observer,d,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var s=r[n];s()}return t},$A=function(t){Lo.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(Tk(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},Sq=function(){var t=0;for($A(t);gq();)t=Tq(),$A(t);return vq()&&yq(),t>0},Ry,Sk=[],Aq=function(){return Sk.splice(0).forEach(function(t){return t()})},Cq=function(t){if(!Ry){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Aq()}).observe(n,r),Ry=function(){n.textContent="".concat(e?e--:e++)}}Sk.push(t),Ry()},Rq=function(t){Cq(function(){requestAnimationFrame(t)})},mm=0,Iq=function(){return!!mm},Nq=250,kq={attributes:!0,characterData:!0,childList:!0,subtree:!0},KA=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],YA=function(t){return t===void 0&&(t=0),Date.now()+t},Iy=!1,Dq=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=Nq),!Iy){Iy=!0;var r=YA(e);Rq(function(){var s=!1;try{s=Sq()}finally{if(Iy=!1,e=r-YA(),!Iq())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,kq)};document.body?n():fd.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),KA.forEach(function(n){return fd.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),KA.forEach(function(n){return fd.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),B0=new Dq,WA=function(t){!mm&&t>0&&B0.start(),mm+=t,!mm&&B0.stop()},Oq=function(t){return!Mx(t)&&!xq(t)&&getComputedStyle(t).display==="inline"},jq=(function(){function t(e,n){this.target=e,this.observedBox=n||kd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Ek(this.target,this.observedBox,!0);return Oq(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),Mq=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Gh=new WeakMap,QA=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},$h=(function(){function t(){}return t.connect=function(e,n){var r=new Mq(e,n);Gh.set(e,r)},t.observe=function(e,n,r){var s=Gh.get(e),o=s.observationTargets.length===0;QA(s.observationTargets,n)<0&&(o&&Lo.push(s),s.observationTargets.push(new jq(n,r&&r.box)),WA(1),B0.schedule())},t.unobserve=function(e,n){var r=Gh.get(e),s=QA(r.observationTargets,n),o=r.observationTargets.length===1;s>=0&&(o&&Lo.splice(Lo.indexOf(r),1),r.observationTargets.splice(s,1),WA(-1))},t.disconnect=function(e){var n=this,r=Gh.get(e);r.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t})(),Pq=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");$h.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qA(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");$h.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qA(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");$h.unobserve(this,e)},t.prototype.disconnect=function(){$h.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function dr(){return dr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(this,arguments)}function pm(t,e){if(t==null)return{};var n,r,s={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(s[n]=t[n]);return s}var hd=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Dc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Kh(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var Vq={box:"border-box"};function Ny(t,e){var n=e.label,r=e.enabled,s=e.resizeSourceRef,o=N.useState(0),u=o[0],d=o[1];N.useDebugValue(n+": "+u);var f=N.useCallback(function(h){d(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return hd(function(){if(t.current&&r){var h=new Pq(f);return h.observe(t.current,Vq),function(){h.disconnect()}}},[t,f,r]),r?u:0}function ur(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var XA={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},JA={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},Lq=u7({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:dr({},XA,JA)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:dr({},XA,JA)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:dr({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[c7({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ur()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ur()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),Uq=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],zq=["velocity"],Bq=["onRest","config"],Ak=P7.default,Fq=Ak.tension,Yh=Ak.friction,qq=Ln.forwardRef(function(t,e){var n=t.children,r=t.sibling,s=t.className,o=t.footer,u=t.header,d=t.open,f=t.initialState,h=t.lastSnapRef,v=t.initialFocusRef,b=t.onDismiss,x=t.maxHeight,E=t.defaultSnap,A=E===void 0?Gq:E,O=t.snapPoints,M=O===void 0?$q:O,U=t.blocking,j=U===void 0||U,z=t.scrollLocking,H=z===void 0||z,G=t.style,q=t.onSpringStart,C=t.onSpringCancel,S=t.onSpringEnd,I=t.reserveScrollBarGap,L=I===void 0?j:I,P=t.expandOnContentDrag,V=P!==void 0&&P,k=pm(t,Uq),ve=(function(){var ae=N.useState(!1),Ee=ae[0],xe=ae[1],De=N.useState({}),gt=De[0],Qe=De[1],Ze=N.useCallback(function(nt){return Qe(function(rt){var ke;return dr({},rt,((ke={})[nt]=!1,ke))}),function(){Qe(function(rt){var ke;return dr({},rt,((ke={})[nt]=!0,ke))})}},[]);return N.useEffect(function(){var nt=Object.values(gt);nt.length!==0&&nt.every(Boolean)&&xe(!0)},[gt]),{ready:Ee,registerReady:Ze}})(),Oe=ve.ready,W=ve.registerReady,re=N.useRef(!1),ue=N.useRef(q),_e=N.useRef(C),we=N.useRef(S);N.useEffect(function(){ue.current=q,_e.current=C,we.current=S},[C,q,S]);var B,J,ce=B7(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),fe=ce[0],Ae=ce[1],ze=N.useRef(null),Be=N.useRef(null),Lt=N.useRef(null),_t=N.useRef(null),Sn=N.useRef(null),pe=N.useRef(null),me=N.useRef(0),Ke=N.useRef(),Ft=N.useRef(!1),Ve=(B=N.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),J=N.useRef(B==null?void 0:B.matches),N.useDebugValue(J.current?"reduce":"no-preference"),N.useEffect(function(){var ae=function(Ee){J.current=Ee.matches};return B==null||B.addListener(ae),function(){return B==null?void 0:B.removeListener(ae)}},[B]),J),Kt=(function(ae){var Ee=ae.targetRef,xe=ae.enabled,De=ae.reserveScrollBarGap,gt=N.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return N.useDebugValue(xe?"Enabled":"Disabled"),N.useEffect(function(){if(!xe)return gt.current.deactivate(),void(gt.current={activate:function(){},deactivate:function(){}});var Qe=Ee.current,Ze=!1;gt.current={activate:function(){Ze||(Ze=!0,mq(Qe,{allowTouchMove:function(nt){return nt.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:De}))},deactivate:function(){Ze&&(Ze=!1,pq(Qe))}}},[xe,Ee,De]),gt})({targetRef:Be,enabled:Oe&&H,reserveScrollBarGap:L}),nr=(function(ae){var Ee=ae.targetRef,xe=ae.enabled,De=N.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return N.useDebugValue(xe?"Enabled":"Disabled"),N.useEffect(function(){if(!xe)return De.current.deactivate(),void(De.current={activate:function(){},deactivate:function(){}});var gt=Ee.current,Qe=!1,Ze=[],nt=[];De.current={activate:function(){if(!Qe){Qe=!0;var rt=gt.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==rt){var Xe=ke.getAttribute("aria-hidden");Xe!==null&&Xe!=="false"||(Ze.push(Xe),nt.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Qe&&(Qe=!1,nt.forEach(function(rt,ke){var Xe=Ze[ke];Xe===null?rt.removeAttribute("aria-hidden"):rt.setAttribute("aria-hidden",Xe)}),Ze=[],nt=[])}}},[Ee,xe]),De})({targetRef:ze,enabled:Oe&&j}),Fr=(function(ae){var Ee=ae.targetRef,xe=ae.fallbackRef,De=ae.initialFocusRef,gt=ae.enabled,Qe=N.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return N.useDebugValue(gt?"Enabled":"Disabled"),N.useEffect(function(){if(!gt)return Qe.current.deactivate(),void(Qe.current={activate:function(){},deactivate:function(){}});var Ze=xe.current,nt=lq(Ee.current,{onActivate:void 0,initialFocus:De?function(){return(De==null?void 0:De.current)||Ze}:void 0,fallbackFocus:Ze,escapeDeactivates:!1,clickOutsideDeactivates:!1}),rt=!1;Qe.current={activate:function(){try{return rt?Promise.resolve():(rt=!0,Promise.resolve(nt.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){rt&&(rt=!1,nt.deactivate())}}},[gt,xe,De,Ee]),Qe})({targetRef:ze,fallbackRef:pe,initialFocusRef:v||void 0,enabled:Oe&&j&&v!==!1}),Sr=(function(ae){var Ee=ae.getSnapPoints,xe=ae.heightRef,De=ae.lastSnapRef,gt=ae.ready,Qe=(function(pt){var ot=pt.contentRef,He=pt.controlledMaxHeight,Ht=pt.footerEnabled,ln=pt.footerRef,gr=pt.headerEnabled,en=pt.headerRef,un=pt.registerReady,Si=pt.resizeSourceRef,ir=N.useMemo(function(){return un("contentHeight")},[un]),kt=(function(Rr,Ir,Nr){var Pn=N.useMemo(function(){return Ir("maxHeight")},[Ir]),kr=N.useState(function(){return Kh(Rr)||typeof window<"u"?window.innerHeight:0}),ii=kr[0],Cn=kr[1],Ot=ii>0,de=N.useRef(0);return N.useDebugValue(Rr?"controlled":"auto"),N.useEffect(function(){Ot&&Pn()},[Ot,Pn]),hd(function(){if(Rr)return Cn(Kh(Rr)),void(Nr.current="maxheightprop");var Ce=function(){de.current||(de.current=requestAnimationFrame(function(){Cn(window.innerHeight),Nr.current="window",de.current=0}))};return window.addEventListener("resize",Ce),Cn(window.innerHeight),Nr.current="window",Pn(),function(){window.removeEventListener("resize",Ce),cancelAnimationFrame(de.current)}},[Rr,Pn,Nr]),ii})(He,un,Si),Dt=Ny(en,{label:"headerHeight",enabled:gr,resizeSourceRef:Si}),vr=Ny(ot,{label:"contentHeight",enabled:!0,resizeSourceRef:Si}),Cr=Ny(ln,{label:"footerHeight",enabled:Ht,resizeSourceRef:Si}),sr=Math.min(kt-Dt-Cr,vr)+Dt+Cr;N.useDebugValue("minHeight: "+sr);var ss=vr>0;return N.useEffect(function(){ss&&ir()},[ss,ir]),{maxHeight:kt,minHeight:sr,headerHeight:Dt,footerHeight:Cr}})({contentRef:ae.contentRef,controlledMaxHeight:ae.controlledMaxHeight,footerEnabled:ae.footerEnabled,footerRef:ae.footerRef,headerEnabled:ae.headerEnabled,headerRef:ae.headerRef,registerReady:ae.registerReady,resizeSourceRef:ae.resizeSourceRef}),Ze=Qe.maxHeight,nt=Qe.minHeight,rt=Qe.headerHeight,ke=Qe.footerHeight,Xe=(function(pt,ot){var He=[].concat(pt).map(Kh).reduce(function(en,un){return en.add(Dc(un,0,ot)),en},new Set),Ht=Array.from(He),ln=Math.min.apply(Math,Ht);if(Number.isNaN(ln))throw new TypeError("minSnap is NaN");var gr=Math.max.apply(Math,Ht);if(Number.isNaN(gr))throw new TypeError("maxSnap is NaN");return{snapPoints:Ht,minSnap:ln,maxSnap:gr}})(gt?Ee({height:xe.current,footerHeight:ke,headerHeight:rt,minHeight:nt,maxHeight:Ze}):[0],Ze),qt=Xe.snapPoints,bn=Xe.minSnap,Se=Xe.maxSnap;return N.useDebugValue("minSnap: "+bn+", maxSnap:"+Se),{minSnap:bn,maxSnap:Se,findSnap:function(pt){var ot=Kh(typeof pt=="function"?pt({footerHeight:ke,headerHeight:rt,height:xe.current,minHeight:nt,maxHeight:Ze,snapPoints:qt,lastSnap:De.current}):pt);return qt.reduce(function(He,Ht){return Math.abs(Ht-ot)<Math.abs(He-ot)?Ht:He},bn)},maxHeight:Ze}})({contentRef:Lt,controlledMaxHeight:x,footerEnabled:!!o,footerRef:Sn,getSnapPoints:M,headerEnabled:u!==!1,headerRef:_t,heightRef:me,lastSnapRef:h,ready:Oe,registerReady:W,resizeSourceRef:Ke}),zn=Sr.minSnap,Ar=Sr.maxSnap,Ei=Sr.maxHeight,qr=Sr.findSnap,Ct=N.useRef(Ei),vn=N.useRef(zn),qe=N.useRef(Ar),Nt=N.useRef(qr),an=N.useRef(0);hd(function(){Ct.current=Ei,qe.current=Ar,vn.current=zn,Nt.current=qr,an.current=qr(A)},[qr,A,Ei,Ar,zn]);var on=N.useCallback(function(ae){var Ee=ae.onRest,xe=ae.config,De=(xe=xe===void 0?{}:xe).velocity,gt=De===void 0?1:De,Qe=pm(xe,zq),Ze=pm(ae,Bq);return new Promise(function(nt){return Ae(dr({},Ze,{config:dr({velocity:gt},Qe,{mass:1,tension:Fq,friction:Math.max(Yh,Yh+(Yh-Yh*gt))}),onRest:function(){var rt=[].slice.call(arguments);nt.apply(void 0,rt),Ee==null||Ee.apply(void 0,rt)}}))})},[Ae]),Ti=b7(Lq,{devTools:!1,actions:{onOpenCancel:N.useCallback(function(){return _e.current==null?void 0:_e.current({type:"OPEN"})},[]),onSnapCancel:N.useCallback(function(ae){return _e.current==null?void 0:_e.current({type:"SNAP",source:ae.snapSource})},[]),onCloseCancel:N.useCallback(function(){return _e.current==null?void 0:_e.current({type:"CLOSE"})},[]),onResizeCancel:N.useCallback(function(){return _e.current==null?void 0:_e.current({type:"RESIZE",source:Ke.current})},[]),onOpenEnd:N.useCallback(function(){return we.current==null?void 0:we.current({type:"OPEN"})},[]),onSnapEnd:N.useCallback(function(ae,Ee){return we.current==null?void 0:we.current({type:"SNAP",source:ae.snapSource})},[]),onResizeEnd:N.useCallback(function(){return we.current==null?void 0:we.current({type:"RESIZE",source:Ke.current})},[])},context:{initialState:f},services:{onSnapStart:N.useCallback(function(ae,Ee){try{return Promise.resolve(ue.current==null?void 0:ue.current({type:"SNAP",source:Ee.payload.source||"custom"}))}catch(xe){return Promise.reject(xe)}},[]),onOpenStart:N.useCallback(function(){try{return Promise.resolve(ue.current==null?void 0:ue.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseStart:N.useCallback(function(){try{return Promise.resolve(ue.current==null?void 0:ue.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeStart:N.useCallback(function(){try{return Promise.resolve(ue.current==null?void 0:ue.current({type:"RESIZE",source:Ke.current}))}catch(ae){return Promise.reject(ae)}},[]),onSnapEnd:N.useCallback(function(ae,Ee){try{return Promise.resolve(we.current==null?void 0:we.current({type:"SNAP",source:ae.snapSource}))}catch(xe){return Promise.reject(xe)}},[]),onOpenEnd:N.useCallback(function(){try{return Promise.resolve(we.current==null?void 0:we.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseEnd:N.useCallback(function(){try{return Promise.resolve(we.current==null?void 0:we.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeEnd:N.useCallback(function(){try{return Promise.resolve(we.current==null?void 0:we.current({type:"RESIZE",source:Ke.current}))}catch(ae){return Promise.reject(ae)}},[]),renderVisuallyHidden:N.useCallback(function(ae,Ee){try{return Promise.resolve(on({y:an.current,ready:0,maxHeight:Ct.current,maxSnap:qe.current,minSnap:an.current,immediate:!0})).then(function(){})}catch(xe){return Promise.reject(xe)}},[on]),activate:N.useCallback(function(ae,Ee){try{return re.current=!0,Promise.resolve(Promise.all([Kt.current.activate(),Fr.current.activate(),nr.current.activate()])).then(function(){})}catch(xe){return Promise.reject(xe)}},[nr,Fr,Kt]),deactivate:N.useCallback(function(){try{return Kt.current.deactivate(),Fr.current.deactivate(),nr.current.deactivate(),re.current=!1,Promise.resolve()}catch(ae){return Promise.reject(ae)}},[nr,Fr,Kt]),openImmediately:N.useCallback(function(){try{return me.current=an.current,Promise.resolve(on({y:an.current,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:an.current,immediate:!0})).then(function(){})}catch(ae){return Promise.reject(ae)}},[on]),openSmoothly:N.useCallback(function(){try{return Promise.resolve(on({y:0,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:an.current,immediate:!0})).then(function(){return me.current=an.current,Promise.resolve(on({y:an.current,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:an.current,immediate:Ve.current})).then(function(){})})}catch(ae){return Promise.reject(ae)}},[on,Ve]),snapSmoothly:N.useCallback(function(ae,Ee){try{var xe=Nt.current(ae.y);return me.current=xe,h.current=xe,Promise.resolve(on({y:xe,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:vn.current,immediate:Ve.current,config:{velocity:ae.velocity}})).then(function(){})}catch(De){return Promise.reject(De)}},[on,h,Ve]),resizeSmoothly:N.useCallback(function(){try{var ae=Nt.current(me.current);return me.current=ae,h.current=ae,Promise.resolve(on({y:ae,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:vn.current,immediate:Ke.current!=="element"||Ve.current})).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[on,h,Ve]),closeSmoothly:N.useCallback(function(ae,Ee){try{return on({minSnap:me.current,immediate:!0}),me.current=0,Promise.resolve(on({y:0,maxHeight:Ct.current,maxSnap:qe.current,immediate:Ve.current})).then(function(){return Promise.resolve(on({ready:0,immediate:!0})).then(function(){})})}catch(xe){return Promise.reject(xe)}},[on,Ve])}}),Bs=Ti[0],yn=Ti[1];N.useEffect(function(){Oe&&yn(d?"OPEN":"CLOSE")},[d,yn,Oe]),hd(function(){(Ei||Ar||zn)&&yn("RESIZE")},[Ei,Ar,zn,yn]),N.useEffect(function(){return function(){Kt.current.deactivate(),Fr.current.deactivate(),nr.current.deactivate()}},[nr,Fr,Kt]),N.useImperativeHandle(e,function(){return{snapTo:function(ae,Ee){var xe=Ee===void 0?{}:Ee,De=xe.velocity,gt=De===void 0?1:De,Qe=xe.source,Ze=Qe===void 0?"custom":Qe;yn("SNAP",{payload:{y:Nt.current(ae),velocity:gt,source:Ze}})},get height(){return me.current}}},[yn]),N.useEffect(function(){var ae=Be.current,Ee=function(De){Ft.current&&De.preventDefault()},xe=function(De){ae.scrollTop<0&&(requestAnimationFrame(function(){ae.style.overflow="hidden",ae.scrollTop=0,ae.style.removeProperty("overflow")}),De.preventDefault())};return V&&(ae.addEventListener("scroll",Ee),ae.addEventListener("touchmove",Ee),ae.addEventListener("touchstart",xe)),function(){ae.removeEventListener("scroll",Ee),ae.removeEventListener("touchmove",Ee),ae.removeEventListener("touchstart",xe)}},[V,Be]);var rr=qF(function(ae){var Ee=ae.args,xe=(Ee=Ee===void 0?[]:Ee)[0],De=(xe=xe===void 0?{}:xe).closeOnTap,gt=De!==void 0&&De,Qe=xe.isContentDragging,Ze=Qe!==void 0&&Qe,nt=ae.cancel,rt=ae.direction[1],ke=ae.down,Xe=ae.first,qt=ae.last,bn=ae.memo,Se=bn===void 0?fe.y.getValue():bn,pt=ae.tap,ot=ae.velocity,He=-1*ae.movement[1];if(!re.current)return nt(),Se;if(b&&gt&&pt)return nt(),setTimeout(function(){return b()},0),Se;if(pt)return Se;var Ht=Se+He,ln=He*ot,gr=Math.max(vn.current,Math.min(qe.current,Ht+2*ln));if(!ke&&b&&rt>0&&Ht+ln<vn.current/2)return nt(),b(),Se;var en=ke?b||vn.current!==qe.current?ud(Ht,b?0:vn.current,qe.current,.55):Ht<vn.current?ud(Ht,vn.current,2*qe.current,.55):ud(Ht,vn.current/2,qe.current,.55):gr;return V&&Ze?(en>=qe.current&&(en=qe.current),Se===qe.current&&Be.current.scrollTop>0&&(en=qe.current),Ft.current=en<qe.current):Ft.current=!1,Xe&&yn("DRAG"),qt?(yn("SNAP",{payload:{y:en,velocity:ot>.05?ot:1,source:"dragging"}}),Se):(Ae({y:en,ready:1,maxHeight:Ct.current,maxSnap:qe.current,minSnap:vn.current,immediate:!0,config:{velocity:ot}}),Se)},{filterTaps:!0});if(Number.isNaN(qe.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(vn.current))throw new TypeError("minSnapRef is NaN!!");var An=(function(ae){var Ee,xe=ae.spring,De=Bl([xe.y,xe.maxHeight],function(ke,Xe){return Math.round(Dc(Xe-ke,0,16))+"px"}),gt=Bl([xe.y,xe.minSnap,xe.maxSnap],function(ke,Xe,qt){return Dc(ke,Xe,qt)+"px"}),Qe=Bl([xe.y,xe.minSnap,xe.maxSnap],function(ke,Xe,qt){return ke<Xe?Xe-ke+"px":ke>qt?qt-ke+"px":"0px"}),Ze=Bl([xe.y,xe.maxSnap],function(ke,Xe){return ke>=Xe?Math.ceil(ke-Xe):0}),nt=Bl([xe.y,xe.minSnap],function(ke,Xe){if(!Xe)return 0;var qt=Math.max(Xe/2-45,0);return Dc((ke-qt)*(1/(Math.min(Xe/2+45,Xe)-qt)+0),0,1)}),rt=Bl([xe.y,xe.minSnap],function(ke,Xe){return Xe?Dc(ke/Xe,0,1):0});return(Ee={})["--rsbs-content-opacity"]=nt,Ee["--rsbs-backdrop-opacity"]=rt,Ee["--rsbs-antigap-scale-y"]=Ze,Ee["--rsbs-overlay-translate-y"]=Qe,Ee["--rsbs-overlay-rounded"]=De,Ee["--rsbs-overlay-h"]=gt,Ee})({spring:fe});return Ln.createElement(aF.div,dr({},k,{"data-rsbs-root":!0,"data-rsbs-state":Hq.find(Bs.matches),"data-rsbs-is-blocking":j,"data-rsbs-is-dismissable":!!b,"data-rsbs-has-header":!!u,"data-rsbs-has-footer":!!o,className:s,ref:ze,style:dr({},An,G,{opacity:fe.ready})}),r,j&&Ln.createElement("div",dr({key:"backdrop","data-rsbs-backdrop":!0},rr({closeOnTap:!0}))),Ln.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:pe,onKeyDown:function(ae){ae.key==="Escape"&&(ae.stopPropagation(),b&&b())}},u!==!1&&Ln.createElement("div",dr({key:"header","data-rsbs-header":!0,ref:_t},rr()),u),Ln.createElement("div",dr({key:"scroll","data-rsbs-scroll":!0,ref:Be},V?rr({isContentDragging:!0}):{}),Ln.createElement("div",{"data-rsbs-content":!0,ref:Lt},n)),o&&Ln.createElement("div",dr({key:"footer",ref:Sn,"data-rsbs-footer":!0},rr()),o)))}),Hq=["closed","opening","open","closing","dragging","snapping","resizing"];function Gq(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function $q(t){return t.minHeight}var Kq=["onSpringStart","onSpringEnd","skipInitialTransition"],el=N.forwardRef(function(t,e){var n=t.onSpringStart,r=t.onSpringEnd,s=t.skipInitialTransition,o=pm(t,Kq),u=N.useState(!1),d=u[0],f=u[1],h=N.useRef(),v=N.useRef(null),b=N.useRef(s&&o.open?"OPEN":"CLOSED");hd(function(){if(o.open)return cancelAnimationFrame(h.current),f(!0),function(){b.current="CLOSED"}},[o.open]);var x=N.useCallback(function(A){return Promise.resolve(n==null?void 0:n(A)).then(function(){A.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),E=N.useCallback(function(A){return Promise.resolve(r==null?void 0:r(A)).then(function(){A.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return f(!1)}))})},[r]);return d?Ln.createElement(mB,{"data-rsbs-portal":!0},Ln.createElement(qq,dr({},o,{lastSnapRef:v,ref:e,initialState:b.current,onSpringStart:x,onSpringEnd:E}))):null});const Yq=({item:t,clothingSets:e,onClose:n,onUpdate:r,onGenerateFrom:s,onRemoveSet:o,onDelete:u,getItemWearCount:d})=>{const[f,h]=N.useState({analysis:t.analysis,category:t.category,subcategory:t.subcategory,color:t.color,material:t.material}),[v,b]=N.useState(!1),[x,E]=N.useState(window.innerWidth<768),[A,O]=N.useState(!1),[M,U]=N.useState(!1),j=document.documentElement.classList.contains("dark"),z=e.find(k=>k.itemIds.includes(t.id));N.useEffect(()=>{h({analysis:t.analysis,category:t.category,subcategory:t.subcategory,color:t.color,material:t.material}),O(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{O(!0)})})},[t]),N.useEffect(()=>{const k=()=>E(window.innerWidth<768);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),N.useEffect(()=>{if(!x){const k=ve=>{ve.key==="Escape"&&n()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)}},[x,n]);const H=k=>{const{name:ve,value:Oe}=k.target;h(W=>({...W,[ve]:Oe}))},G=k=>{k.preventDefault(),r({...t,...f}),b(!0),setTimeout(()=>{b(!1)},2e3)},q=()=>{U(!0)},C=()=>{u(t.id),U(!1),n()},S=()=>{U(!1)},I=k=>{k.stopPropagation(),r({...t,isFavorite:!t.isFavorite})},L=k=>{k.stopPropagation(),r({...t,isExcluded:!t.isExcluded})},P=g.jsxs("div",{className:"bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("div",{className:"relative px-4 pt-2 pb-4",children:g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg"})}),g.jsxs("form",{onSubmit:G,className:"p-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),g.jsx("textarea",{id:"analysis",name:"analysis",value:f.analysis,onChange:H,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),g.jsx("select",{id:"category",name:"category",value:f.category,onChange:H,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(k=>g.jsx("option",{value:k,children:k},k))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),g.jsx("input",{type:"text",id:"color",name:"color",value:f.color,onChange:H,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),g.jsx("input",{type:"text",id:"material",name:"material",value:f.material,onChange:H,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),f.category==="Accessoires"&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"subcategory",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type d'accessoire"}),g.jsxs("select",{id:"subcategory",name:"subcategory",value:f.subcategory||"",onChange:H,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:[g.jsx("option",{value:"",children:"-- Slectionner --"}),g.jsx("option",{value:"Montres & Bijoux",children:"Montres & Bijoux"}),g.jsx("option",{value:"charpes & Foulards",children:"charpes & Foulards"}),g.jsx("option",{value:"Ceintures",children:"Ceintures"}),g.jsx("option",{value:"Lunettes",children:"Lunettes"}),g.jsx("option",{value:"Chapeaux",children:"Chapeaux"}),g.jsx("option",{value:"Sacs",children:"Sacs"})]})]}),g.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),g.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",g.jsx("span",{className:"font-bold text-lg text-gold",children:d(t.id)})," fois ces 30 derniers jours"]})]}),g.jsx("div",{className:"text-3xl",children:""})]})}),z&&g.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),g.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:z.name,children:z.name})]}),g.jsxs("button",{type:"button",onClick:()=>{o(z.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[g.jsx(A6,{}),g.jsx("span",{children:"Dissocier"})]})]})]}),g.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[g.jsxs("button",{type:"button",onClick:q,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[g.jsx(Lm,{}),"Supprimer"]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[g.jsx(Ed,{}),"Crer une tenue"]}),g.jsx("button",{type:"submit",disabled:v,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${v?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:v?g.jsxs(g.Fragment,{children:[g.jsx(Gb,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]}),V=M?NN.createPortal(g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 transition-opacity duration-200",style:{zIndex:999999,pointerEvents:"auto"},onClick:S,children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 scale-100",onClick:k=>k.stopPropagation(),children:[g.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h3",{className:"text-lg font-bold text-raisin-black dark:text-snow mb-1",children:"Supprimer cet article ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.analysis})]})]}),g.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Cette action est irrversible"}),g.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"L'article sera dfinitivement supprim de votre garde-robe et ne pourra pas tre rcupr."})]})]})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:k=>{k.stopPropagation(),S()},className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),g.jsx("button",{onClick:k=>{k.stopPropagation(),C()},className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/30",children:"Supprimer"})]})]})}),document.body):null;return x?g.jsxs(g.Fragment,{children:[g.jsx(el,{open:!!t&&!M,onDismiss:n,className:j?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-2",children:[g.jsx("h2",{className:"text-lg font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:L,className:`p-1.5 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(l0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:I,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(pu,{className:"w-6 h-6 text-red-500"}):g.jsx(Um,{className:"w-6 h-6"})})]})]}),defaultSnap:({maxHeight:k})=>k*.85,snapPoints:({maxHeight:k})=>[k*.5,k*.85,k*.95],children:P}),V]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${A?"opacity-100":"opacity-0"}`,style:M?{pointerEvents:"none"}:void 0,onClick:n,children:g.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-200 ${A?"opacity-100 scale-100":"opacity-0 scale-95"}`,style:M?{pointerEvents:"none"}:void 0,onClick:k=>k.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:L,className:`p-2 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(l0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(pu,{className:"w-6 h-6 text-red-500"}):g.jsx(Um,{className:"w-6 h-6"})}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),P]})}),V]})},Ck=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:r})=>{const[s,o]=N.useState(3),[u,d]=N.useState(""),[f,h]=N.useState(""),v=b=>{b.preventDefault();const x=u||"",E=f?parseFloat(f):void 0;x.trim()&&s>0&&n(s,x,E)};return g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),g.jsx("input",{id:"days",type:"number",value:s,onChange:b=>o(parseInt(b.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r,required:!0})]}),g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"weight",type:"number",value:f,onChange:b=>h(b.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r}),g.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),g.jsxs("div",{className:"sm:col-span-2",children:[g.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),g.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:b=>d(b.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:r,required:!0})]})]}),g.jsxs("button",{type:"submit",disabled:r||!(u||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(XR,{}),r?"Analyse du poids...":"Gnrer la valise"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})},Rk=({plan:t,allClothingItems:e,allClothingSets:n})=>{const r=s=>{const{id:o,description:u}=s;let d=e.find(h=>h.id===o);if(d)return d;let f=n.find(h=>h.id===o);if(f)return f;if(d=e.find(h=>h.analysis===o),d||(d=e.find(h=>h.analysis===u),d))return d};return g.jsx("div",{className:"mt-10",children:g.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,o)=>{const u=r(s),d=u?u.imageSrc:null;return g.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[d?g.jsx("img",{src:d,alt:s.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(QR,{})}),g.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:g.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},o)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,o)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},o))})]})})},Wq=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[r,s]=N.useState(!1),o=N.useRef(null),u=N.useRef(null),d=b=>{const x=Array.from(b.target.files||[]);x.length>0&&(t(x),s(!1)),b.target.value=""},f=()=>{s(!r)},h=()=>{var b;(b=o.current)==null||b.click()},v=()=>{var b;(b=u.current)==null||b.click()};return n?null:g.jsxs(g.Fragment,{children:[g.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:d,className:"hidden"}),g.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden"}),r&&g.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>s(!1)}),g.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[g.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${r?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[g.jsxs("button",{type:"button",onClick:h,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:g.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),g.jsxs("button",{type:"button",onClick:v,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),g.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),g.jsx("button",{onClick:f,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${r?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":r?"Fermer le menu":"Ajouter un vtement",children:e?g.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},Qq=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:r,onShowFavorites:s,onShowWornOutfits:o,isAnalyzingWardrobe:u,clothingCount:d,favoriteOutfitCount:f,wornOutfitCount:h})=>g.jsxs("div",{className:"space-y-4 pb-24",children:[g.jsxs("div",{className:"text-center py-6",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[d," vtement",d>1?"s":""," dans votre collection"]})]}),g.jsxs("div",{className:"space-y-3 px-4",children:[d>=3&&g.jsx("button",{onClick:t,disabled:u,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:u?g.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" ~30 secondes"})]})]})}),g.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})}),g.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})})]}),g.jsx("div",{className:"px-4 pt-6",children:g.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[g.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("button",{onClick:o,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-blue-500",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("p",{className:"text-2xl font-bold",children:h}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Portes (7j)"})]}),g.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-green-500",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),g.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),g.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-red-500",children:g.jsx(Um,{})}),g.jsx("p",{className:"text-2xl font-bold",children:f}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),Xq=({activeTab:t,onTabChange:e,counts:n})=>{const r=[{id:"home",label:"Home",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return g.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:g.jsx("div",{className:"flex justify-around items-center h-16",children:r.map(s=>{const o=t===s.id;return g.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[g.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&g.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),g.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:s.label})]},s.id)})})})},Jq=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},r={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),g.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-green-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),g.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[g.jsx("span",{children:""})," Pices recommandes"]}),g.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,o)=>g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:s.description}),g.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:r[s.priority]})]}),g.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[g.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.estimatedPrice&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]}),g.jsxs("a",{href:`https://www.google.com/search?q=${encodeURIComponent(s.searchQuery+" achat en ligne")}&tbm=shop`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm hover:shadow-md",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher en ligne"]})]})]},o))})]})]})]})})},Zq=({open:t,clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,suggestedOutfits:o,onClose:u,weatherInfo:d,weatherError:f,favoriteOutfits:h,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:E,onSelectOutfit:A,anchorItem:O,onClearAnchor:M,onGenerateVariants:U,onOpenChat:j})=>{const z=document.documentElement.classList.contains("dark"),H=N.useRef(null);return N.useEffect(()=>{!s&&o.length>0&&H.current&&H.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,o.length]),g.jsx(el,{open:t,onDismiss:u,className:z?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),g.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:G})=>G*.75,snapPoints:({minHeight:G,maxHeight:q})=>[G,q*.75,q*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx(IN,{clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,weatherInfo:d,weatherError:f,anchorItem:O,onClearAnchor:M}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),g.jsx("div",{ref:H,children:o.length>0&&g.jsx(su,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:h,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:E,onSelectOutfit:A,onGenerateVariants:U,isGenerating:s,onOpenChat:j})})]})})},eH=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s,vacationPlan:o,onCreateSet:u,onClose:d})=>{const f=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:d,className:f?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),g.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.7,snapPoints:({maxHeight:h})=>[h*.7,h*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[g.jsx(Ck,{clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&g.jsx(Rk,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:u})]})})},tH=({open:t,clothingItems:e,clothingSets:n,onClose:r,onCreateSet:s})=>{const[o,u]=N.useState(new Set),d=new Set(n.flatMap(E=>E.itemIds)),h=e.filter(E=>!d.has(E.id)).reduce((E,A)=>(E[A.category]||(E[A.category]=[]),E[A.category].push(A),E),{}),v=E=>{u(A=>{const O=new Set(A);return O.has(E)?O.delete(E):O.add(E),O})},b=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const E=window.prompt("Donnez un nom  cet ensemble :");E&&s(E,Array.from(o))},x=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:r,className:x?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),g.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:g.jsxs("button",{onClick:b,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[g.jsx(Op,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:E})=>E*.6,snapPoints:({maxHeight:E})=>[E*.6,E*.85],children:g.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),g.jsx("div",{className:"space-y-4",children:Object.keys(h).map(E=>h[E].length>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:E}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[E].map(A=>{const O=o.has(A.id);return g.jsxs("button",{onClick:()=>v(A.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:O?"#D4AF37":"transparent"},children:[O&&g.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:g.jsx(Gb,{})}),g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:A.imageSrc,alt:A.analysis,className:"w-full h-full object-cover"})}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),g.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:A.analysis})]},A.id)})})]},E))})]})})},nH=(t,e)=>{const n=Ja(ri,"users",t,"items"),r=Rp(n);return kp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (items listener):",o)})},rH=async(t,e)=>{try{const n=Ja(ri,"users",t,"items");return(await Np(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},ZA=async(t,e,n)=>{try{const r=Ru(ri,"users",t,"items",e);await T5(r,n)}catch(r){throw console.error("Erreur lors de la mise  jour d'un vtement:",r),r}},e2=async(t,e)=>{try{const n=Ru(ri,"users",t,"items",e);await Vb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},iH=(t,e)=>{const n=Ja(ri,"users",t,"favoriteOutfits"),r=Rp(n);return kp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},sH=async(t,e)=>{try{const n=Ja(ri,"users",t,"favoriteOutfits");return(await Np(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},aH=async(t,e)=>{try{const n=Ru(ri,"users",t,"favoriteOutfits",e);await Vb(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},oH=(t,e)=>{const n=Ja(ri,"users",t,"sets"),r=Rp(n);return kp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (sets listener):",o)})},lH=async(t,e)=>{try{const n=Ja(ri,"users",t,"sets");return(await Np(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},uH=async(t,e)=>{try{const n=Ru(ri,"users",t,"sets",e);await Vb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},cH=async(t,e,n,r)=>{try{const s=Ja(ri,"users",t,"wearHistory");return(await Np(s,{outfitTitle:e,outfitDescription:n,itemIds:r,wornAt:Date.now()})).id}catch(s){throw console.error("Erreur lors de l'ajout de l'historique de port:",s),s}},dH=(t,e)=>{const n=Ja(ri,"users",t,"wearHistory"),r=Date.now()-720*60*60*1e3,s=Rp(n,b5("wornAt",">=",r));return kp(s,u=>{const d=u.docs.map(f=>({id:f.id,...f.data()}));e(d)},u=>{console.error("Erreur (wearHistory listener):",u)})},fH=async(t,e,n)=>{try{const r=$R(WR,`users/${t}/clothing/${n}.jpg`);return await DL(r,e,"data_url"),await GR(r)}catch(r){throw console.error("Erreur upload vtement:",r),r}},hH=async(t,e)=>{try{const n=await mH(e,1024),r=$R(WR,`users/${t}/profile/model_photo.jpg`);return await kL(r,n),await GR(r)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},mH=(t,e)=>new Promise((n,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=o=>{var d;const u=new Image;u.src=(d=o.target)==null?void 0:d.result,u.onload=()=>{const f=e/u.width,h=document.createElement("canvas");h.width=e,h.height=u.height*f;const v=h.getContext("2d");v?(v.drawImage(u,0,0,h.width,h.height),h.toBlob(b=>{b?n(b):r(new Error("Blob creation failed"))},"image/jpeg",.85)):r(new Error("Canvas error"))}},s.onerror=o=>r(o)}),Ik=N.createContext(void 0),pH=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=s=>{var u;const o=new Image;o.src=(u=s.target)==null?void 0:u.result,o.onload=()=>{const d=document.createElement("canvas"),f=800,h=f/o.width;d.width=f,d.height=o.height*h;const v=d.getContext("2d");v?(v.drawImage(o,0,0,d.width,d.height),e(d.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=d=>n(d)},r.onerror=s=>n(s)}),gH=({children:t,user:e})=>{const[n,r]=N.useState([]),[s,o]=N.useState([]),[u,d]=N.useState([]),[f,h]=N.useState([]),[v,b]=N.useState(localStorage.getItem("dressmup_user_model_url")),[x,E]=N.useState(!1),[A,O]=N.useState(!0);N.useEffect(()=>{v&&localStorage.setItem("dressmup_user_model_url",v)},[v]),N.useEffect(()=>{if(e){const V=nH(e.uid,W=>{r(W),O(!1)}),k=oH(e.uid,W=>{o(W)}),ve=iH(e.uid,W=>{d(W)}),Oe=dH(e.uid,W=>{h(W)});return()=>{V(),k(),ve(),Oe()}}else r([]),o([]),d([]),h([]),O(!1)},[e]);const M=N.useCallback(async V=>{if(e)try{const k=await hH(e.uid,V);b(k)}catch(k){throw console.error("Erreur mise  jour photo modle:",k),k}},[e]),U=N.useCallback(async V=>{if(!(V.length===0||!e)){E(!0);try{const k=V.map(ue=>pH(ue)),ve=await Promise.all(k),Oe=ve.map(ue=>ue.split(",")[1]),W=await o6(Oe),re=Math.min(W.length,V.length);for(let ue=0;ue<re;ue++){const _e=W[ue];let we="";try{we=await rH(e.uid,{..._e,createdAt:Date.now()});const B=await fH(e.uid,ve[ue],we);await ZA(e.uid,we,{imageSrc:B})}catch(B){console.error(`chec pour ${V[ue].name}.`,B),we&&await e2(e.uid,we)}}}catch(k){console.error("Erreur lot:",k)}finally{E(!1)}}},[e]),j=N.useCallback(async V=>{e&&await e2(e.uid,V)},[e]),z=N.useCallback(async V=>{e&&await ZA(e.uid,V.id,V)},[e]),H=N.useCallback(async V=>{if(!e)return;const{id:k,...ve}=V;await sH(e.uid,ve)},[e]),G=N.useCallback(async V=>{e&&await aH(e.uid,V)},[e]),q=N.useCallback(async(V,k)=>{var W;if(!e)return;const ve=((W=n.find(re=>re.id===k[0]))==null?void 0:W.imageSrc)||"",Oe={name:V,itemIds:k,imageSrc:ve};await lH(e.uid,Oe)},[e,n]),C=N.useCallback(async V=>{e&&await uH(e.uid,V)},[e]),S=N.useCallback(async(V,k,ve)=>{e&&await cH(e.uid,V,k,ve)},[e]),I=N.useCallback(V=>f.filter(k=>k.itemIds.includes(V)).length,[f]),L=N.useCallback(()=>{const V=Date.now()-6048e5;return f.filter(k=>k.wornAt>=V).sort((k,ve)=>ve.wornAt-k.wornAt)},[f]),P={clothingItems:n,clothingSets:s,favoriteOutfits:u,wearHistory:f,userModelImage:v,setUserModelImage:b,updateUserModelPhoto:M,isAnalyzing:x,analyzeClothingItems:U,deleteClothingItem:j,updateClothingItem:z,createClothingSet:q,deleteClothingSet:C,addFavoriteOutfit:H,deleteFavoriteOutfit:G,recordOutfitWear:S,getItemWearCount:I,getWornOutfitsLast7Days:L,loading:A};return g.jsx(Ik.Provider,{value:P,children:t})},vH=()=>{const t=N.useContext(Ik);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},yH=({open:t,outfit:e,onClose:n,onSendMessage:r,isGenerating:s,messages:o})=>{const[u,d]=N.useState(""),f=N.useRef(null),h=document.documentElement.classList.contains("dark"),v=()=>{var x;(x=f.current)==null||x.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{v()},[o]);const b=async x=>{if(x.preventDefault(),!u.trim()||s)return;const E={role:"user",content:u.trim(),timestamp:Date.now()};d("");try{await r(u.trim(),[...o,E])}catch(A){console.error("Error sending message:",A)}};return e?g.jsx(el,{open:t,onDismiss:n,className:h?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Conseils Styliste"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.titre})]}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:x})=>x*.7,snapPoints:({minHeight:x,maxHeight:E})=>[x,E*.7,E*.95],children:g.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-raisin-black",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.length===0&&g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gold/10 mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),g.jsx("h3",{className:"font-bold text-raisin-black dark:text-snow mb-2",children:"Posez-moi une question"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto",children:"Je peux vous conseiller sur cette tenue, suggrer des alternatives de votre garde-robe, ou rpondre  vos questions de style."})]}),o.map((x,E)=>g.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${x.role==="user"?"bg-gold text-raisin-black":"bg-gray-100 dark:bg-gray-800 text-raisin-black dark:text-snow"}`,children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.content})})},E)),s&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-3",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("div",{className:"flex space-x-1",children:[g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rflexion en cours..."})]})})}),g.jsx("div",{ref:f})]}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:g.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),placeholder:"Posez votre question...",disabled:s,className:"flex-1 px-4 py-2 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-raisin-black dark:text-snow focus:outline-none focus:ring-2 focus:ring-gold disabled:opacity-50"}),g.jsx("button",{type:"submit",disabled:!u.trim()||s,className:"px-6 py-2 bg-gold text-raisin-black rounded-full font-medium hover:bg-gold-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Envoyer"})]})})]})}):null},bH={openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},xH=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:h,onGenerateVariants:v,isGenerating:b,onOpenChat:x})=>{const E=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:e,className:E?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:A})=>A*.65,snapPoints:({maxHeight:A})=>[A*.65,A*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?g.jsx(su,{outfits:s,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:h,onGenerateVariants:v,isGenerating:b,onOpenChat:x}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},_H=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,wornOutfits:s,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:f,selectedOutfit:h,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:E})=>{const A=document.documentElement.classList.contains("dark"),O=U=>{const j=U?U.trim():"";let z=n.find(G=>G.id===j);if(z)return z;let H=r.find(G=>G.id===j);if(H)return H;if(z=n.find(G=>G.id.trim()===j),z)return z;if(H=r.find(G=>G.id.trim()===j),H)return H;for(const G of r)if(G.itemIds&&G.itemIds.includes(j))return G},M=N.useMemo(()=>s.map(U=>{const j=U.itemIds.map(z=>{const H=O(z);return H?{id:H.id,description:"name"in H?H.name:H.analysis}:{id:z,description:"Article supprim"}});return{titre:U.outfitTitle,description:U.outfitDescription,vetements:j}}),[s,n,r]);return g.jsx(el,{open:t,onDismiss:e,className:A?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Portes"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:U})=>U*.65,snapPoints:({maxHeight:U})=>[U*.65,U*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:M.length>0?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Vos tenues portes ces 7 derniers jours"}),g.jsx(su,{outfits:M,allClothingItems:n,allClothingSets:r,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:f,selectedOutfit:h,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:E})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore port de tenue cette semaine."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Slectionnez une tenue en cliquant sur  pour l'ajouter  votre historique"})]})})})},Wh=!1,Cs=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},wH=()=>{const[t,e]=N.useState(null),[n,r]=N.useState(null),[s,o]=N.useState([]),[u,d]=N.useState(null),[f,h]=N.useState(!1),[v,b]=N.useState(null),[x,E]=N.useState(!1),[A,O]=N.useState(null),[M,U]=N.useState(!1),[j,z]=N.useState("home"),[H,G]=N.useState(!1),[q,C]=N.useState(!1),[S,I]=N.useState(!1),[L,P]=N.useState(!1),[V,k]=N.useState(!1),[ve,Oe]=N.useState(!1),[W,re]=N.useState(null),[ue,_e]=N.useState(null),[we,B]=N.useState(!1),[J,ce]=N.useState(0),[fe,Ae]=N.useState(null),[ze,Be]=N.useState(null),[Lt,_t]=N.useState(!1),[Sn,pe]=N.useState(!1),[me,Ke]=N.useState(""),[Ft,Ve]=N.useState("favorites"),[Kt,nr]=N.useState(null),[Fr,Sr]=N.useState(!1),[zn,Ar]=N.useState(null),[Ei,qr]=N.useState(!1),[Ct,vn]=N.useState([]),[qe,Nt]=N.useState(null);N.useEffect(()=>{if(n){const de=n.includes("Accs refus")?1e4:5e3,Ce=setTimeout(()=>r(null),de);return()=>clearTimeout(Ce)}},[n]);const[an,on]=N.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:Ti,clothingSets:Bs,isAnalyzing:yn,analyzeClothingItems:rr,deleteClothingItem:An,createClothingSet:ae,updateClothingItem:Ee,deleteClothingSet:xe,favoriteOutfits:De,addFavoriteOutfit:gt,deleteFavoriteOutfit:Qe,userModelImage:Ze,recordOutfitWear:nt,getItemWearCount:rt,getWornOutfitsLast7Days:ke,loading:Xe}=vH(),[qt,bn]=N.useState(null),Se=Ln.useMemo(()=>(Ti||[]).sort((Ce,je)=>(je.isFavorite?1:0)-(Ce.isFavorite?1:0)),[Ti]),pt=N.useCallback(de=>{const Ce=De.find(je=>je.titre===de.titre&&je.description===de.description);Ce?(Qe(Ce.id),bn("Retir des favoris")):(gt(de),bn("Ajout aux favoris ")),setTimeout(()=>bn(null),2e3)},[De,gt,Qe]),ot=N.useCallback(de=>{if((u==null?void 0:u.titre)===de.titre&&(u==null?void 0:u.description)===de.description)d(null),bn("Slection annule");else{d(de),bn("Tenue choisie ");const je=de.vetements.map(Ye=>Ye.id);nt(de.titre,de.description,je)}setTimeout(()=>bn(null),2e3)},[u,nt]),He=Ln.useMemo(()=>Bs||[],[Bs]),Ht=Ln.useMemo(()=>new Set(He.flatMap(de=>de.itemIds||[])),[He]),ln=N.useMemo(()=>ke(),[ke]);N.useEffect(()=>{const de=async(Ye,Gt)=>{const Ut=bH.openWeatherApiKey,as=`https://api.openweathermap.org/data/2.5/weather?lat=${Ye}&lon=${Gt}&appid=${Ut}&units=metric&lang=fr`;try{const Fs=await fetch(as);if(!Fs.ok)throw new Error("Impossible de rcuprer la mto.");const si=await Fs.json(),Ai=`${Math.round(si.main.temp)}C, ${si.weather[0].description},  ${si.name}`;re(Ai),_e(null),localStorage.setItem("cachedWeather",JSON.stringify({weather:Ai,timestamp:Date.now()}))}catch{_e("Mto indisponible.")}},Ce=localStorage.getItem("cachedWeather");if(Ce)try{const{weather:Ye,timestamp:Gt}=JSON.parse(Ce),Ut=1800*1e3;if(Date.now()-Gt<Ut){re(Ye),_e(null);return}}catch{}const je=localStorage.getItem("cachedPosition");if(je)try{const{lat:Ye,lon:Gt,timestamp:Ut}=JSON.parse(je),as=1800*1e3;if(Date.now()-Ut<as){de(Ye,Gt);return}}catch{}navigator.geolocation?navigator.geolocation.getCurrentPosition(Ye=>{const Gt=Ye.coords.latitude,Ut=Ye.coords.longitude;localStorage.setItem("cachedPosition",JSON.stringify({lat:Gt,lon:Ut,timestamp:Date.now()})),de(Gt,Ut)},()=>_e("Activez la golocalisation pour la mto.")):_e("Golocalisation non supporte.")},[]);const gr=N.useCallback(async(de,Ce)=>{if(Se.length===0){r("Veuillez d'abord ajouter des vtements.");return}h(!0),r(null);const je=Ce||Kt,Ye=W?`Mto actuelle : ${W}. Occasion : ${de}`:`Occasion : ${de}`;try{const Gt=await d6(Se,He,Ye,je||void 0);o(Gt),nr(null)}catch(Gt){r(Cs(Gt))}finally{h(!1)}},[Se,He,W,Kt]),en=N.useCallback(async(de,Ce)=>{if(Se.length===0){r("Veuillez d'abord ajouter des vtements.");return}h(!0),r(null);const je=W?`Mto actuelle : ${W}. Contexte original : ${de.description}`:`Contexte original : ${de.description}`;try{const Ye=await f6(Se,He,je,de,Ce);o(Ye)}catch(Ye){r(Cs(Ye))}finally{h(!1)}},[Se,He,W]),un=N.useCallback(de=>{Ar(de),vn([]),H?Nt("outfit"):L?Nt("favorites"):V&&Nt("worn"),G(!1),P(!1),k(!1),Sr(!0)},[H,L,V]),Si=N.useCallback(async(de,Ce)=>{if(zn){vn(Ce),qr(!0);try{const Ye={role:"assistant",content:(await h6(zn,de,Ce,Se,He)).message,timestamp:Date.now()};vn(Gt=>[...Gt,Ye])}catch(je){r(Cs(je))}finally{qr(!1)}}},[zn,Se,He]),ir=N.useCallback(async(de,Ce,je)=>{if(Se.length===0){r("Veuillez d'abord ajouter des vtements.");return}E(!0),r(null);try{const Ye=await v6(Se,He,de,Ce,je);b(Ye)}catch(Ye){r(Cs(Ye))}finally{E(!1)}},[Se,He]),kt=N.useCallback(async()=>{if(Se.length<3){r("Ajoutez au moins 3 vtements pour une analyse.");return}U(!0),r(null);try{const de=await p6(Se,He);O(de)}catch(de){r(Cs(de))}finally{U(!1)}},[Se,He]),Dt=N.useCallback(async de=>{},[Se,Ze]),vr=N.useCallback(()=>G(!0),[]),Cr=N.useCallback(()=>C(!0),[]),sr=de=>e(de),ss=()=>e(null),Rr=de=>{An(de).catch(Ce=>r(Cs(Ce))),e(null)},Ir=de=>{Ee(de).catch(Ce=>r(Cs(Ce))),e(de)},Nr=de=>{nr(de),e(null),G(!0)},Pn=N.useCallback((de,Ce)=>{ae(de,Ce).catch(je=>r(Cs(je)))},[ae]),kr=N.useCallback(de=>{xe(de).catch(Ce=>r(Cs(Ce)))},[xe]);N.useCallback(async()=>{B(!0),await new Promise(de=>setTimeout(de,1e3)),B(!1)},[]);const ii={hauts:Se.filter(de=>de.category==="Hauts").length,bas:Se.filter(de=>de.category==="Bas").length,chaussures:Se.filter(de=>de.category==="Chaussures").length,accessoires:Se.filter(de=>de.category==="Accessoires").length},Cn=N.useMemo(()=>{if(j==="home")return[];let de=Se.filter(Ce=>j==="hauts"?Ce.category==="Hauts":j==="bas"?Ce.category==="Bas":j==="chaussures"?Ce.category==="Chaussures":j==="accessoires"?Ce.category==="Accessoires":!1);if(me.trim()){const Ce=me.toLowerCase();de=de.filter(je=>je.analysis.toLowerCase().includes(Ce)||je.color.toLowerCase().includes(Ce)||je.material.toLowerCase().includes(Ce))}return[...de].sort((Ce,je)=>{switch(Ft){case"favorites":return(je.isFavorite?1:0)-(Ce.isFavorite?1:0);case"newest":return(je.createdAt||0)-(Ce.createdAt||0);case"oldest":return(Ce.createdAt||0)-(je.createdAt||0);case"color":return Ce.color.localeCompare(je.color);default:return 0}})},[j,Se,me,Ft]),Ot=H||q||S||!!t||!!A||!!ze||ve;return N.useEffect(()=>{const de=document.querySelector("header");de&&(de.style.zIndex=Ot?"10":"50")},[Ot]),N.useEffect(()=>{if(!yn&&Se.length>J&&J>0){const de=Se.length-J;bn(`${de} vtement${de>1?"s":""} ajout${de>1?"s":""} `),setTimeout(()=>bn(null),2e3)}ce(Se.length)},[yn,Se.length]),g.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[Wh,n&&g.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[g.jsxs("div",{className:"flex-1 mr-2",children:[g.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),g.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),g.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Wh,Se.length>=3&&g.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" Analyse : ~30 secondes"})]}),g.jsx("button",{onClick:kt,disabled:M,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:M?"Analyse...":"Analyser ma garde-robe"})]}),g.jsx("div",{className:"hidden md:block",children:g.jsx(iB,{onAnalyze:rr,isAnalyzing:yn})}),g.jsx("div",{className:"hidden md:block",children:g.jsx(lB,{clothingItems:Se,clothingSets:He,onItemClick:sr,onDeleteItem:Rr,onCreateSet:Pn,isLoading:Xe})}),g.jsxs("div",{className:"md:hidden",children:[j==="home"&&g.jsx(Qq,{onAnalyzeWardrobe:kt,onScrollToOutfits:vr,onScrollToVacation:Cr,onStartSetCreation:()=>I(!0),onShowFavorites:()=>P(!0),onShowWornOutfits:()=>k(!0),isAnalyzingWardrobe:M,clothingCount:Se.length,favoriteOutfitCount:De.length,wornOutfitCount:ln.length}),j!=="home"&&g.jsxs("div",{className:"pb-24",children:[we&&g.jsx("div",{className:"flex justify-center py-4",children:g.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),g.jsxs("div",{className:"text-center py-4 px-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:j}),g.jsxs("p",{className:"text-sm text-gray-500",children:[Cn.length," vtement",Cn.length>1?"s":""]})]}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx(JR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:me,onChange:de=>Ke(de.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),me&&g.jsx("button",{onClick:()=>Ke(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:g.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(ZR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsxs("select",{value:Ft,onChange:de=>Ve(de.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[g.jsx("option",{value:"favorites",children:"Favoris d'abord"}),g.jsx("option",{value:"newest",children:"Plus rcents"}),g.jsx("option",{value:"oldest",children:"Plus anciens"}),g.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),g.jsx(Zc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Cn.length>0?g.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Cn.map(de=>g.jsxs("div",{onClick:()=>sr(de),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[de.isFavorite?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(pu,{className:"w-4 h-4"})}):Ht.has(de.id)?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Op,{})}):null,g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:de.imageSrc,alt:de.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-3",children:[g.jsx("p",{className:"text-sm font-medium line-clamp-2",children:de.analysis}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:de.color})]})]},de.id))}):g.jsx("div",{className:"text-center py-12 px-4",children:me?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',me,'"']}),g.jsx("button",{onClick:()=>Ke(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),g.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[g.jsx("div",{id:"outfit-generator",children:g.jsx(IN,{clothingItems:Se,clothingSets:He,onGenerate:gr,isGenerating:f,weatherInfo:W,weatherError:ue,anchorItem:Kt,onClearAnchor:()=>nr(null)})}),s.length>0&&g.jsx(su,{outfits:s,allClothingItems:Se,allClothingSets:He,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,onGenerateVariants:en,isGenerating:f,onOpenChat:un}),De.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>_t(!Lt),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(pu,{className:"text-gold w-5 h-5"}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",De.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${Lt?"rotate-180":""} text-gray-400`,children:g.jsx(Zc,{})})]}),Lt&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(su,{outfits:De,allClothingItems:Se,allClothingSets:He,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,onGenerateVariants:en,isGenerating:f,onOpenChat:un})})]}),ln.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>pe(!Sn),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Tenues Portes ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(7 derniers jours - ",ln.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${Sn?"rotate-180":""} text-gray-400`,children:g.jsx(Zc,{})})]}),Sn&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(su,{outfits:ln.map(de=>({titre:de.outfitTitle,description:de.outfitDescription,vetements:de.itemIds.map(Ce=>{const je=Ce?Ce.trim():"";let Ye=Se.find(Ut=>Ut.id===je);if(Ye)return{id:Ye.id,description:Ye.analysis};let Gt=He.find(Ut=>Ut.id===je);if(Gt)return{id:Gt.id,description:Gt.name};if(Ye=Se.find(Ut=>Ut.id.trim()===je),Ye)return{id:Ye.id,description:Ye.analysis};if(Gt=He.find(Ut=>Ut.id.trim()===je),Gt)return{id:Gt.id,description:Gt.name};for(const Ut of He)if(Ut.itemIds&&Ut.itemIds.includes(je))return{id:Ut.id,description:Ut.name};return{id:Ce,description:"Article supprim"}})})),allClothingItems:Se,allClothingSets:He,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,onGenerateVariants:en,isGenerating:f,onOpenChat:un})})]}),g.jsx("div",{id:"vacation-planner",children:g.jsx(Ck,{clothingItems:Se,clothingSets:He,onGeneratePlan:ir,isGenerating:x})}),v&&g.jsx(Rk,{plan:v,allClothingItems:Se,allClothingSets:He,onCreateSet:Pn})]})]}),t&&g.jsx(Yq,{item:t,clothingSets:He,onClose:ss,onUpdate:Ir,onGenerateFrom:Nr,onRemoveSet:kr,onDelete:Rr,getItemWearCount:rt}),A&&g.jsx(Jq,{analysis:A,onClose:()=>O(null)}),Wh,g.jsx(Wq,{onFilesSelected:rr,isAnalyzing:yn,isOtherModalOpen:Ot}),g.jsx(Xq,{activeTab:j,onTabChange:z,counts:ii}),g.jsx(Zq,{open:H,clothingItems:Se,clothingSets:He,onGenerate:gr,isGenerating:f,suggestedOutfits:s,onClose:()=>{G(!1),nr(null)},weatherInfo:W,weatherError:ue,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,anchorItem:Kt,onClearAnchor:()=>nr(null),onGenerateVariants:en,onOpenChat:un}),g.jsx(eH,{open:q,clothingItems:Se,clothingSets:He,onGeneratePlan:ir,isGenerating:x,vacationPlan:v,onCreateSet:Pn,onClose:()=>C(!1)}),g.jsx(yH,{open:Fr,outfit:zn,onClose:()=>{Sr(!1),qe==="outfit"?G(!0):qe==="favorites"?P(!0):qe==="worn"&&k(!0),Nt(null)},onSendMessage:async(de,Ce)=>{await Si(de,Ce)},isGenerating:Ei,messages:Ct}),g.jsx(tH,{open:S,clothingItems:Se,clothingSets:He,onClose:()=>I(!1),onCreateSet:(de,Ce)=>{Pn(de,Ce),I(!1)}}),g.jsx(xH,{open:L,onClose:()=>P(!1),allClothingItems:Se,allClothingSets:He,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,onGenerateVariants:en,isGenerating:f,onOpenChat:un}),g.jsx(_H,{open:V,onClose:()=>k(!1),allClothingItems:Se,allClothingSets:He,wornOutfits:ln,favoriteOutfits:De,onToggleFavorite:pt,onGenerateVisual:Dt,generatingVisualFor:fe,selectedOutfit:u,onSelectOutfit:ot,onGenerateVariants:en,isGenerating:f,onOpenChat:un}),Wh,an&&g.jsx(mO,{onComplete:()=>on(!1)}),qt&&g.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:g.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[qt.includes("")&&g.jsx("span",{className:"animate-pulse",children:""}),qt.includes("Retir")&&g.jsx("span",{children:""}),qt.includes("ajout")&&!qt.includes("")&&g.jsx("span",{children:""}),g.jsx("span",{children:qt.replace("","").trim()})]})})]})},EH=()=>{const[t,e]=N.useState(null),[n,r]=N.useState("dark"),[s,o]=N.useState(!1);N.useEffect(()=>{const d=Jj(Co,f=>{e(f),f&&o(!1)});return()=>d()},[]),N.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const u=()=>{r(d=>d==="light"?"dark":"light")};return g.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?g.jsxs(g.Fragment,{children:[g.jsx(C6,{theme:n,toggleTheme:u,children:g.jsx(QT,{user:t})}),g.jsx(gH,{user:t,children:g.jsx(wH,{})})]}):s?g.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),g.jsx(QT,{user:t})]})}):g.jsx(rB,{onGetStarted:()=>o(!0)})})},Nk=document.getElementById("root");if(!Nk)throw new Error("L'lment root est introuvable dans le DOM");const TH=hO.createRoot(Nk);TH.render(g.jsx(Ln.StrictMode,{children:g.jsx(EH,{})}));
