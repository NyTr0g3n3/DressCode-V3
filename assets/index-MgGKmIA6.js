(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function aS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sp={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function aR(){if(Kv)return Gl;Kv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var $v;function lR(){return $v||($v=1,Sp.exports=aR()),Sp.exports}var C=lR(),Ap={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function uR(){if(Qv)return xe;Qv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function j(O,ee,oe){this.props=O,this.context=ee,this.refs=B,this.updater=oe||L}j.prototype.isReactComponent={},j.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function G(){}G.prototype=j.prototype;function $(O,ee,oe){this.props=O,this.context=ee,this.refs=B,this.updater=oe||L}var ne=$.prototype=new G;ne.constructor=$,F(ne,j.prototype),ne.isPureReactComponent=!0;var ae=Array.isArray;function ue(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function N(O,ee,oe){var pe=oe.ref;return{$$typeof:n,type:O,key:ee,ref:pe!==void 0?pe:null,props:oe}}function V(O,ee){return N(O.type,ee,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function U(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return ee[oe]})}var D=/\/+/g;function Ke(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):ee.toString(36)}function Re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function W(O,ee,oe,pe,Ae){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var Le=!1;if(O===null)Le=!0;else switch(ke){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(O.$$typeof){case n:case e:Le=!0;break;case v:return Le=O._init,W(Le(O._payload),ee,oe,pe,Ae)}}if(Le)return Ae=Ae(O),Le=pe===""?"."+Ke(O,0):pe,ae(Ae)?(oe="",Le!=null&&(oe=Le.replace(D,"$&/")+"/"),W(Ae,ee,oe,"",function(qn){return qn})):Ae!=null&&(k(Ae)&&(Ae=V(Ae,oe+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Le)),ee.push(Ae)),1;Le=0;var kt=pe===""?".":pe+":";if(ae(O))for(var at=0;at<O.length;at++)pe=O[at],ke=kt+Ke(pe,at),Le+=W(pe,ee,oe,ke,Ae);else if(at=b(O),typeof at=="function")for(O=at.call(O),at=0;!(pe=O.next()).done;)pe=pe.value,ke=kt+Ke(pe,at++),Le+=W(pe,ee,oe,ke,Ae);else if(ke==="object"){if(typeof O.then=="function")return W(Re(O),ee,oe,pe,Ae);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Le}function le(O,ee,oe){if(O==null)return O;var pe=[],Ae=0;return W(O,pe,"","",function(ke){return ee.call(oe,ke,Ae++)}),pe}function _e(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ve={map:le,forEach:function(O,ee,oe){le(O,function(){ee.apply(this,arguments)},oe)},count:function(O){var ee=0;return le(O,function(){ee++}),ee},toArray:function(O){return le(O,function(ee){return ee})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return xe.Activity=T,xe.Children=ve,xe.Component=j,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=$,xe.StrictMode=i,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},xe.cache=function(O){return function(){return O.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(O,ee,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=F({},O.props),Ae=O.key;if(ee!=null)for(ke in ee.key!==void 0&&(Ae=""+ee.key),ee)!x.call(ee,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ee.ref===void 0||(pe[ke]=ee[ke]);var ke=arguments.length-2;if(ke===1)pe.children=oe;else if(1<ke){for(var Le=Array(ke),kt=0;kt<ke;kt++)Le[kt]=arguments[kt+2];pe.children=Le}return N(O.type,Ae,pe)},xe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},xe.createElement=function(O,ee,oe){var pe,Ae={},ke=null;if(ee!=null)for(pe in ee.key!==void 0&&(ke=""+ee.key),ee)x.call(ee,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=ee[pe]);var Le=arguments.length-2;if(Le===1)Ae.children=oe;else if(1<Le){for(var kt=Array(Le),at=0;at<Le;at++)kt[at]=arguments[at+2];Ae.children=kt}if(O&&O.defaultProps)for(pe in Le=O.defaultProps,Le)Ae[pe]===void 0&&(Ae[pe]=Le[pe]);return N(O,ke,Ae)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:d,render:O}},xe.isValidElement=k,xe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:_e}},xe.memo=function(O,ee){return{$$typeof:m,type:O,compare:ee===void 0?null:ee}},xe.startTransition=function(O){var ee=M.T,oe={};M.T=oe;try{var pe=O(),Ae=M.S;Ae!==null&&Ae(oe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ue,Ge)}catch(ke){Ge(ke)}finally{ee!==null&&oe.types!==null&&(ee.types=oe.types),M.T=ee}},xe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},xe.use=function(O){return M.H.use(O)},xe.useActionState=function(O,ee,oe){return M.H.useActionState(O,ee,oe)},xe.useCallback=function(O,ee){return M.H.useCallback(O,ee)},xe.useContext=function(O){return M.H.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O,ee){return M.H.useDeferredValue(O,ee)},xe.useEffect=function(O,ee){return M.H.useEffect(O,ee)},xe.useEffectEvent=function(O){return M.H.useEffectEvent(O)},xe.useId=function(){return M.H.useId()},xe.useImperativeHandle=function(O,ee,oe){return M.H.useImperativeHandle(O,ee,oe)},xe.useInsertionEffect=function(O,ee){return M.H.useInsertionEffect(O,ee)},xe.useLayoutEffect=function(O,ee){return M.H.useLayoutEffect(O,ee)},xe.useMemo=function(O,ee){return M.H.useMemo(O,ee)},xe.useOptimistic=function(O,ee){return M.H.useOptimistic(O,ee)},xe.useReducer=function(O,ee,oe){return M.H.useReducer(O,ee,oe)},xe.useRef=function(O){return M.H.useRef(O)},xe.useState=function(O){return M.H.useState(O)},xe.useSyncExternalStore=function(O,ee,oe){return M.H.useSyncExternalStore(O,ee,oe)},xe.useTransition=function(){return M.H.useTransition()},xe.version="19.2.0",xe}var Wv;function Sm(){return Wv||(Wv=1,Ap.exports=uR()),Ap.exports}var he=Sm();const eu=aS(he);var Cp={exports:{}},Jl={},Ip={exports:{}},wp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function cR(){return Xv||(Xv=1,(function(n){function e(W,le){var _e=W.length;W.push(le);e:for(;0<_e;){var Ge=_e-1>>>1,ve=W[Ge];if(0<o(ve,le))W[Ge]=le,W[_e]=ve,_e=Ge;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var le=W[0],_e=W.pop();if(_e!==le){W[0]=_e;e:for(var Ge=0,ve=W.length,O=ve>>>1;Ge<O;){var ee=2*(Ge+1)-1,oe=W[ee],pe=ee+1,Ae=W[pe];if(0>o(oe,_e))pe<ve&&0>o(Ae,oe)?(W[Ge]=Ae,W[pe]=_e,Ge=pe):(W[Ge]=oe,W[ee]=_e,Ge=ee);else if(pe<ve&&0>o(Ae,_e))W[Ge]=Ae,W[pe]=_e,Ge=pe;else break e}}return le}function o(W,le){var _e=W.sortIndex-le.sortIndex;return _e!==0?_e:W.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,T=null,S=3,b=!1,L=!1,F=!1,B=!1,j=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ne(W){for(var le=t(m);le!==null;){if(le.callback===null)i(m);else if(le.startTime<=W)i(m),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(m)}}function ae(W){if(F=!1,ne(W),!L)if(t(p)!==null)L=!0,ue||(ue=!0,U());else{var le=t(m);le!==null&&Re(ae,le.startTime-W)}}var ue=!1,M=-1,x=5,N=-1;function V(){return B?!0:!(n.unstable_now()-N<x)}function k(){if(B=!1,ue){var W=n.unstable_now();N=W;var le=!0;try{e:{L=!1,F&&(F=!1,G(M),M=-1),b=!0;var _e=S;try{t:{for(ne(W),T=t(p);T!==null&&!(T.expirationTime>W&&V());){var Ge=T.callback;if(typeof Ge=="function"){T.callback=null,S=T.priorityLevel;var ve=Ge(T.expirationTime<=W);if(W=n.unstable_now(),typeof ve=="function"){T.callback=ve,ne(W),le=!0;break t}T===t(p)&&i(p),ne(W)}else i(p);T=t(p)}if(T!==null)le=!0;else{var O=t(m);O!==null&&Re(ae,O.startTime-W),le=!1}}break e}finally{T=null,S=_e,b=!1}le=void 0}}finally{le?U():ue=!1}}}var U;if(typeof $=="function")U=function(){$(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ke=D.port2;D.port1.onmessage=k,U=function(){Ke.postMessage(null)}}else U=function(){j(k,0)};function Re(W,le){M=j(function(){W(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var _e=S;S=le;try{return W()}finally{S=_e}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=S;S=W;try{return le()}finally{S=_e}},n.unstable_scheduleCallback=function(W,le,_e){var Ge=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ge+_e:Ge):_e=Ge,W){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=_e+ve,W={id:v++,callback:le,priorityLevel:W,startTime:_e,expirationTime:ve,sortIndex:-1},_e>Ge?(W.sortIndex=_e,e(m,W),t(p)===null&&W===t(m)&&(F?(G(M),M=-1):F=!0,Re(ae,_e-Ge))):(W.sortIndex=ve,e(p,W),L||b||(L=!0,ue||(ue=!0,U()))),W},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(W){var le=S;return function(){var _e=S;S=le;try{return W.apply(this,arguments)}finally{S=_e}}}})(wp)),wp}var jv;function dR(){return jv||(jv=1,Ip.exports=cR()),Ip.exports}var Rp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function fR(){if(Zv)return on;Zv=1;var n=Sm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},on.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},on.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:b}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},on.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},on.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},on.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,m){return p(m)},on.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},on.useFormStatus=function(){return u.H.useHostTransitionStatus()},on.version="19.2.0",on}var e0;function hR(){if(e0)return Rp.exports;e0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rp.exports=fR(),Rp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function pR(){if(t0)return Jl;t0=1;var n=dR(),e=Sm(),t=hR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),s;if(_===c)return p(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,w=y.child;w;){if(w===l){A=!0,l=y,c=_;break}if(w===c){A=!0,c=y,l=_;break}w=w.sibling}if(!A){for(w=_.child;w;){if(w===l){A=!0,l=_,c=y;break}if(w===c){A=!0,c=_,l=y;break}w=w.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ke(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case j:return"Profiler";case B:return"StrictMode";case ae:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case $:return s.displayName||"Context";case G:return(s._context.displayName||"Context")+".Consumer";case ne:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Ke(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return Ke(s(r))}catch{}}return null}var Re=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ge=[],ve=-1;function O(s){return{current:s}}function ee(s){0>ve||(s.current=Ge[ve],Ge[ve]=null,ve--)}function oe(s,r){ve++,Ge[ve]=s.current,s.current=r}var pe=O(null),Ae=O(null),ke=O(null),Le=O(null);function kt(s,r){switch(oe(ke,r),oe(Ae,s),oe(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?gv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=gv(r),s=yv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(pe),oe(pe,s)}function at(){ee(pe),ee(Ae),ee(ke)}function qn(s){s.memoizedState!==null&&oe(Le,s);var r=pe.current,l=yv(r,s.type);r!==l&&(oe(Ae,s),oe(pe,l))}function ii(s){Ae.current===s&&(ee(pe),ee(Ae)),Le.current===s&&(ee(Le),Bl._currentValue=_e)}var si,Is;function bn(s){if(si===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);si=r&&r[1]||"",Is=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+si+s+Is}var Ce=!1;function Pt(s,r){if(!s||Ce)return"";Ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var K=Q}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Q){K=Q}s.call(ie.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],w=_[1];if(A&&w){var P=A.split(`
`),Y=w.split(`
`);for(y=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===P.length||y===Y.length)for(c=P.length-1,y=Y.length-1;1<=c&&0<=y&&P[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(P[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||P[c]!==Y[y]){var Z=`
`+P[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Ce=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?bn(l):""}function Bn(s,r){switch(s.tag){case 26:case 27:case 5:return bn(s.type);case 16:return bn("Lazy");case 13:return s.child!==r&&r!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return Pt(s.type,!1);case 11:return Pt(s.type.render,!1);case 1:return Pt(s.type,!0);case 31:return bn("Activity");default:return""}}function ri(s){try{var r="",l=null;do r+=Bn(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ws=Object.prototype.hasOwnProperty,Bi=n.unstable_scheduleCallback,yi=n.unstable_cancelCallback,qr=n.unstable_shouldYield,Br=n.unstable_requestPaint,Yt=n.unstable_now,xu=n.unstable_getCurrentPriorityLevel,Vt=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,Fi=n.unstable_NormalPriority,Nu=n.unstable_LowPriority,Ga=n.unstable_IdlePriority,Ef=n.log,Fr=n.unstable_setDisableYieldValue,Rs=null,sn=null;function Fn(s){if(typeof Ef=="function"&&Fr(s),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Rs,s)}catch{}}var fn=Math.clz32?Math.clz32:Mu,Sf=Math.log,Ja=Math.LN2;function Mu(s){return s>>>=0,s===0?32:31-(Sf(s)/Ja|0)|0}var Hr=256,_i=262144,bs=4194304;function oi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=oi(c):(A&=w,A!==0?y=oi(A):l||(l=w&~s,l!==0&&(y=oi(l))))):(w=c&~_,w!==0?y=oi(w):A!==0?y=oi(A):l||(l=c&~s,l!==0&&(y=oi(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function xs(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Do(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ya(){var s=bs;return bs<<=1,(bs&62914560)===0&&(bs=4194304),s}function Hi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Ns(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Kt(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,P=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var Z=31-fn(l),ie=1<<Z;w[Z]=0,P[Z]=-1;var K=Y[Z];if(K!==null)for(Y[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}l&=~ie}c!==0&&Ka(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function Ka(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-fn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ms(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-fn(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Ds(s,r){var l=r&-r;return l=(l&42)!==0?1:$a(l),(l&(s.suspendedLanes|r))!==0?0:l}function $a(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Qa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zi(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:Bv(s.type))}function Du(s,r){var l=le.p;try{return le.p=s,r()}finally{le.p=l}}var vi=Math.random().toString(36).slice(2),gt="__reactFiber$"+vi,$t="__reactProps$"+vi,Ti="__reactContainer$"+vi,ks="__reactEvents$"+vi,Ei="__reactListeners$"+vi,ku="__reactHandles$"+vi,Wa="__reactResources$"+vi,Gi="__reactMarker$"+vi;function zr(s){delete s[gt],delete s[$t],delete s[ks],delete s[Ei],delete s[ku]}function Ji(s){var r=s[gt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ti]||l[gt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Cv(s);s!==null;){if(l=s[gt])return l;s=Cv(s)}return r}s=l,l=s.parentNode}return null}function Yi(s){if(s=s[gt]||s[Ti]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Gr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ai(s){var r=s[Wa];return r||(r=s[Wa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(s){s[Gi]=!0}var ko=new Set,Ps={};function hn(s,r){Si(s,r),Si(s+"Capture",r)}function Si(s,r){for(Ps[s]=r,s=0;s<r.length;s++)ko.add(r[s])}var Af=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xa={},ja={};function Pu(s){return ws.call(ja,s)?!0:ws.call(Xa,s)?!1:Af.test(s)?ja[s]=!0:(Xa[s]=!0,!1)}function Vs(s,r,l){if(Pu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Us(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function zn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Vu(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Cf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Po(s){if(!s._valueTracker){var r=Vu(s)?"checked":"value";s._valueTracker=Cf(s,r,""+s[r])}}function Za(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Vu(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Vo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ki=/[\n"\\]/g;function yt(s){return s.replace(Ki,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ls(s,r,l,c,y,_,A,w){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+pn(r)):s.value!==""+pn(r)&&(s.value=""+pn(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Uo(s,A,pn(r)):l!=null?Uo(s,A,pn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+pn(w):s.removeAttribute("name")}function Jr(s,r,l,c,y,_,A,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Po(s);return}l=l!=null?""+pn(l):"",r=r!=null?""+pn(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Po(s)}function Uo(s,r,l){r==="number"&&Vo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function $e(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+pn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Yr(s,r,l){if(r!=null&&(r=""+pn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+pn(l):""}function Os(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(Re(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=pn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Po(s)}function Gn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var If=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||If.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Uu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&el(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&el(s,_,r[_])}function tl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(s){return Rf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Bt(){}var Lo=null;function Oo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $i=null,xn=null;function Lu(s){var r=Yi(s);if(r&&(s=r.stateNode)){var l=s[$t]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ls(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[$t]||null;if(!y)throw Error(i(90));Ls(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Za(c)}break e;case"textarea":Yr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&$e(s,!!l.multiple,r,!1)}}}var nl=!1;function Ou(s,r,l){if(nl)return s(r,l);nl=!0;try{var c=s(r);return c}finally{if(nl=!1,($i!==null||xn!==null)&&(Pc(),$i&&(r=$i,s=xn,xn=$i=null,Lu(r),s)))for(r=0;r<s.length;r++)Lu(s[r])}}function vn(s,r){var l=s.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=!1;if(li)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){il=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{il=!1}var Nn=null,qo=null,Ii=null;function qs(){if(Ii)return Ii;var s,r=qo,l=r.length,c,y="value"in Nn?Nn.value:Nn.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return Ii=y.slice(s,1<c?1-c:void 0)}function Kr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Bs(){return!0}function lt(){return!1}function rn(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Bs:lt,this.isPropagationStopped=lt,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),r}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$r=rn(Qi),Fs=T({},Qi,{view:0,detail:0}),qu=rn(Fs),Hs,Bo,mn,Qr=T({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==mn&&(mn&&s.type==="mousemove"?(Hs=s.screenX-mn.screenX,Bo=s.screenY-mn.screenY):Bo=Hs=0,mn=s),Hs)},movementY:function(s){return"movementY"in s?s.movementY:Bo}}),Bu=rn(Qr),Wr=T({},Qr,{dataTransfer:0}),Fu=rn(Wr),sl=T({},Fs,{relatedTarget:0}),zs=rn(sl),Hu=T({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fo=rn(Hu),bf=T({},Qi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zu=rn(bf),Xr=T({},Qi,{data:0}),rl=rn(Xr),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ol={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=al[s])?!!r[s]:!1}function Gs(){return Ju}var Yu=T({},Fs,{key:function(s){if(s.key){var r=Gu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Kr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ol[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(s){return s.type==="keypress"?Kr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Kr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ku=rn(Yu),Wi=T({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=rn(Wi),$u=T({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),Qu=rn($u),Wu=T({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ho=rn(Wu),gn=T({},Qr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=rn(gn),ju=T({},Qi,{newState:0,oldState:0}),Js=rn(ju),h=[9,13,27,32],E=li&&"CompositionEvent"in window,I=null;li&&"documentMode"in document&&(I=document.documentMode);var R=li&&"TextEvent"in window&&!I,z=li&&(!E||I&&8<I&&11>=I),X=" ",ce=!1;function Ze(s,r){switch(s){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ve=!1;function Ft(s,r){switch(s){case"compositionend":return wt(r);case"keypress":return r.which!==32?null:(ce=!0,X);case"textInput":return s=r.data,s===X&&ce?null:s;default:return null}}function Ht(s,r){if(Ve)return s==="compositionend"||!E&&Ze(s,r)?(s=qs(),Ii=qo=Nn=null,Ve=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var Ys={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Ys[s.type]:r==="textarea"}function jr(s,r,l,c){$i?xn?xn.push(c):xn=[c]:$i=c,r=Fc(r,"onChange"),0<r.length&&(l=new $r("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Xi=null,ul=null;function PI(s){cv(s,0)}function Zu(s){var r=Gr(s);if(Za(r))return s}function xg(s,r){if(s==="change")return r}var Ng=!1;if(li){var xf;if(li){var Nf="oninput"in document;if(!Nf){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Nf=typeof Mg.oninput=="function"}xf=Nf}else xf=!1;Ng=xf&&(!document.documentMode||9<document.documentMode)}function Dg(){Xi&&(Xi.detachEvent("onpropertychange",kg),ul=Xi=null)}function kg(s){if(s.propertyName==="value"&&Zu(ul)){var r=[];jr(r,ul,s,Oo(s)),Ou(PI,r)}}function VI(s,r,l){s==="focusin"?(Dg(),Xi=r,ul=l,Xi.attachEvent("onpropertychange",kg)):s==="focusout"&&Dg()}function UI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(ul)}function LI(s,r){if(s==="click")return Zu(r)}function OI(s,r){if(s==="input"||s==="change")return Zu(r)}function qI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Mn=typeof Object.is=="function"?Object.is:qI;function cl(s,r){if(Mn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!ws.call(r,y)||!Mn(s[y],r[y]))return!1}return!0}function Pg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vg(s,r){var l=Pg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Pg(l)}}function Ug(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ug(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Lg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Vo(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Vo(s.document)}return r}function Mf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var BI=li&&"documentMode"in document&&11>=document.documentMode,zo=null,Df=null,dl=null,kf=!1;function Og(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kf||zo==null||zo!==Vo(c)||(c=zo,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dl&&cl(dl,c)||(dl=c,c=Fc(Df,"onSelect"),0<c.length&&(r=new $r("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=zo)))}function Zr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Go={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Pf={},qg={};li&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function eo(s){if(Pf[s])return Pf[s];if(!Go[s])return s;var r=Go[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in qg)return Pf[s]=r[l];return s}var Bg=eo("animationend"),Fg=eo("animationiteration"),Hg=eo("animationstart"),FI=eo("transitionrun"),HI=eo("transitionstart"),zI=eo("transitioncancel"),zg=eo("transitionend"),Gg=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function ui(s,r){Gg.set(s,r),hn(r,[s])}var ec=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Jn=[],Jo=0,Uf=0;function tc(){for(var s=Jo,r=Uf=Jo=0;r<s;){var l=Jn[r];Jn[r++]=null;var c=Jn[r];Jn[r++]=null;var y=Jn[r];Jn[r++]=null;var _=Jn[r];if(Jn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Jg(l,y,_)}}function nc(s,r,l,c){Jn[Jo++]=s,Jn[Jo++]=r,Jn[Jo++]=l,Jn[Jo++]=c,Uf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Lf(s,r,l,c){return nc(s,r,l,c),ic(s)}function to(s,r){return nc(s,null,null,r),ic(s)}function Jg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-fn(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function ic(s){if(50<kl)throw kl=0,Yh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Yo={};function GI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,r,l,c){return new GI(s,r,l,c)}function Of(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ji(s,r){var l=s.alternate;return l===null?(l=Dn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Yg(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function sc(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")Of(s)&&(A=1);else if(typeof s=="string")A=Qw(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Dn(31,l,r,y),s.elementType=N,s.lanes=_,s;case F:return no(l.children,y,_,r);case B:A=8,y|=24;break;case j:return s=Dn(12,l,r,y|2),s.elementType=j,s.lanes=_,s;case ae:return s=Dn(13,l,r,y),s.elementType=ae,s.lanes=_,s;case ue:return s=Dn(19,l,r,y),s.elementType=ue,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:A=10;break e;case G:A=9;break e;case ne:A=11;break e;case M:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Dn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function no(s,r,l,c){return s=Dn(7,s,c,r),s.lanes=l,s}function qf(s,r,l){return s=Dn(6,s,null,r),s.lanes=l,s}function Kg(s){var r=Dn(18,null,null,0);return r.stateNode=s,r}function Bf(s,r,l){return r=Dn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var $g=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var l=$g.get(s);return l!==void 0?l:(r={value:s,source:r,stack:ri(r)},$g.set(s,r),r)}return{value:s,source:r,stack:ri(r)}}var Ko=[],$o=0,rc=null,fl=0,Kn=[],$n=0,Ks=null,wi=1,Ri="";function Zi(s,r){Ko[$o++]=fl,Ko[$o++]=rc,rc=s,fl=r}function Qg(s,r,l){Kn[$n++]=wi,Kn[$n++]=Ri,Kn[$n++]=Ks,Ks=s;var c=wi;s=Ri;var y=32-fn(c)-1;c&=~(1<<y),l+=1;var _=32-fn(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,wi=1<<32-fn(r)+y|l<<y|c,Ri=_+s}else wi=1<<_|l<<y|c,Ri=s}function Ff(s){s.return!==null&&(Zi(s,1),Qg(s,1,0))}function Hf(s){for(;s===rc;)rc=Ko[--$o],Ko[$o]=null,fl=Ko[--$o],Ko[$o]=null;for(;s===Ks;)Ks=Kn[--$n],Kn[$n]=null,Ri=Kn[--$n],Kn[$n]=null,wi=Kn[--$n],Kn[$n]=null}function Wg(s,r){Kn[$n++]=wi,Kn[$n++]=Ri,Kn[$n++]=Ks,wi=r.id,Ri=r.overflow,Ks=s}var Qt=null,ut=null,Je=!1,$s=null,Qn=!1,zf=Error(i(519));function Qs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Yn(r,s)),zf}function Xg(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[gt]=s,r[$t]=c,l){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(l=0;l<Vl.length;l++)qe(Vl[l],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),Jr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),Os(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||pv(r.textContent,l)?(c.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),c.onScroll!=null&&qe("scroll",r),c.onScrollEnd!=null&&qe("scrollend",r),c.onClick!=null&&(r.onclick=Bt),r=!0):r=!1,r||Qs(s,!0)}function jg(s){for(Qt=s.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Qt=Qt.return}}function Qo(s){if(s!==Qt)return!1;if(!Je)return jg(s),Je=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||ap(s.type,s.memoizedProps)),l=!l),l&&ut&&Qs(s),jg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Av(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Av(s)}else r===27?(r=ut,ur(s.type)?(s=fp,fp=null,ut=s):ut=r):ut=Qt?Xn(s.stateNode.nextSibling):null;return!0}function io(){ut=Qt=null,Je=!1}function Gf(){var s=$s;return s!==null&&(Cn===null?Cn=s:Cn.push.apply(Cn,s),$s=null),s}function hl(s){$s===null?$s=[s]:$s.push(s)}var Jf=O(null),so=null,es=null;function Ws(s,r,l){oe(Jf,r._currentValue),r._currentValue=l}function ts(s){s._currentValue=Jf.current,ee(Jf)}function Yf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Kf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var P=0;P<r.length;P++)if(w.context===r[P]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Yf(_.return,l,s),c||(A=null);break e}_=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Yf(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Wo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var w=y.type;Mn(y.pendingProps.value,A.value)||(s!==null?s.push(w):s=[w])}}else if(y===Le.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Bl):s=[Bl])}y=y.return}s!==null&&Kf(r,s,l,c),r.flags|=262144}function oc(s){for(s=s.firstContext;s!==null;){if(!Mn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ro(s){so=s,es=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return Zg(so,s)}function ac(s,r){return so===null&&ro(s),Zg(s,r)}function Zg(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},es===null){if(s===null)throw Error(i(308));es=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else es=es.next=r;return l}var JI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},YI=n.unstable_scheduleCallback,KI=n.unstable_NormalPriority,Rt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new JI,data:new Map,refCount:0}}function pl(s){s.refCount--,s.refCount===0&&YI(KI,function(){s.controller.abort()})}var ml=null,Qf=0,Xo=0,jo=null;function $I(s,r){if(ml===null){var l=ml=[];Qf=0,Xo=jh(),jo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Qf++,r.then(ey,ey),r}function ey(){if(--Qf===0&&ml!==null){jo!==null&&(jo.status="fulfilled");var s=ml;ml=null,Xo=0,jo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function QI(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var ty=W.S;W.S=function(s,r){O_=Yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&$I(s,r),ty!==null&&ty(s,r)};var oo=O(null);function Wf(){var s=oo.current;return s!==null?s:ot.pooledCache}function lc(s,r){r===null?oe(oo,oo.current):oe(oo,r.pool)}function ny(){var s=Wf();return s===null?null:{parent:Rt._currentValue,pool:s}}var Zo=Error(i(460)),Xf=Error(i(474)),uc=Error(i(542)),cc={then:function(){}};function iy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Bt,Bt),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,oy(s),s;default:if(typeof r.status=="string")r.then(Bt,Bt);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,oy(s),s}throw lo=r,Zo}}function ao(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(lo=l,Zo):l}}var lo=null;function ry(){if(lo===null)throw Error(i(459));var s=lo;return lo=null,s}function oy(s){if(s===Zo||s===uc)throw Error(i(483))}var ea=null,gl=0;function dc(s){var r=gl;return gl+=1,ea===null&&(ea=[]),sy(ea,s,r)}function yl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function fc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ay(s){function r(H,q){if(s){var J=H.deletions;J===null?(H.deletions=[q],H.flags|=16):J.push(q)}}function l(H,q){if(!s)return null;for(;q!==null;)r(H,q),q=q.sibling;return null}function c(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function y(H,q){return H=ji(H,q),H.index=0,H.sibling=null,H}function _(H,q,J){return H.index=J,s?(J=H.alternate,J!==null?(J=J.index,J<q?(H.flags|=67108866,q):J):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function w(H,q,J,te){return q===null||q.tag!==6?(q=qf(J,H.mode,te),q.return=H,q):(q=y(q,J),q.return=H,q)}function P(H,q,J,te){var Te=J.type;return Te===F?Z(H,q,J.props.children,te,J.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&ao(Te)===q.type)?(q=y(q,J.props),yl(q,J),q.return=H,q):(q=sc(J.type,J.key,J.props,null,H.mode,te),yl(q,J),q.return=H,q)}function Y(H,q,J,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=Bf(J,H.mode,te),q.return=H,q):(q=y(q,J.children||[]),q.return=H,q)}function Z(H,q,J,te,Te){return q===null||q.tag!==7?(q=no(J,H.mode,te,Te),q.return=H,q):(q=y(q,J),q.return=H,q)}function ie(H,q,J){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=qf(""+q,H.mode,J),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return J=sc(q.type,q.key,q.props,null,H.mode,J),yl(J,q),J.return=H,J;case L:return q=Bf(q,H.mode,J),q.return=H,q;case x:return q=ao(q),ie(H,q,J)}if(Re(q)||U(q))return q=no(q,H.mode,J,null),q.return=H,q;if(typeof q.then=="function")return ie(H,dc(q),J);if(q.$$typeof===$)return ie(H,ac(H,q),J);fc(H,q)}return null}function K(H,q,J,te){var Te=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:w(H,q,""+J,te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===Te?P(H,q,J,te):null;case L:return J.key===Te?Y(H,q,J,te):null;case x:return J=ao(J),K(H,q,J,te)}if(Re(J)||U(J))return Te!==null?null:Z(H,q,J,te,null);if(typeof J.then=="function")return K(H,q,dc(J),te);if(J.$$typeof===$)return K(H,q,ac(H,J),te);fc(H,J)}return null}function Q(H,q,J,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(J)||null,w(q,H,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return H=H.get(te.key===null?J:te.key)||null,P(q,H,te,Te);case L:return H=H.get(te.key===null?J:te.key)||null,Y(q,H,te,Te);case x:return te=ao(te),Q(H,q,J,te,Te)}if(Re(te)||U(te))return H=H.get(J)||null,Z(q,H,te,Te,null);if(typeof te.then=="function")return Q(H,q,J,dc(te),Te);if(te.$$typeof===$)return Q(H,q,J,ac(q,te),Te);fc(q,te)}return null}function me(H,q,J,te){for(var Te=null,Qe=null,ge=q,Pe=q=0,Fe=null;ge!==null&&Pe<J.length;Pe++){ge.index>Pe?(Fe=ge,ge=null):Fe=ge.sibling;var We=K(H,ge,J[Pe],te);if(We===null){ge===null&&(ge=Fe);break}s&&ge&&We.alternate===null&&r(H,ge),q=_(We,q,Pe),Qe===null?Te=We:Qe.sibling=We,Qe=We,ge=Fe}if(Pe===J.length)return l(H,ge),Je&&Zi(H,Pe),Te;if(ge===null){for(;Pe<J.length;Pe++)ge=ie(H,J[Pe],te),ge!==null&&(q=_(ge,q,Pe),Qe===null?Te=ge:Qe.sibling=ge,Qe=ge);return Je&&Zi(H,Pe),Te}for(ge=c(ge);Pe<J.length;Pe++)Fe=Q(ge,H,Pe,J[Pe],te),Fe!==null&&(s&&Fe.alternate!==null&&ge.delete(Fe.key===null?Pe:Fe.key),q=_(Fe,q,Pe),Qe===null?Te=Fe:Qe.sibling=Fe,Qe=Fe);return s&&ge.forEach(function(pr){return r(H,pr)}),Je&&Zi(H,Pe),Te}function Se(H,q,J,te){if(J==null)throw Error(i(151));for(var Te=null,Qe=null,ge=q,Pe=q=0,Fe=null,We=J.next();ge!==null&&!We.done;Pe++,We=J.next()){ge.index>Pe?(Fe=ge,ge=null):Fe=ge.sibling;var pr=K(H,ge,We.value,te);if(pr===null){ge===null&&(ge=Fe);break}s&&ge&&pr.alternate===null&&r(H,ge),q=_(pr,q,Pe),Qe===null?Te=pr:Qe.sibling=pr,Qe=pr,ge=Fe}if(We.done)return l(H,ge),Je&&Zi(H,Pe),Te;if(ge===null){for(;!We.done;Pe++,We=J.next())We=ie(H,We.value,te),We!==null&&(q=_(We,q,Pe),Qe===null?Te=We:Qe.sibling=We,Qe=We);return Je&&Zi(H,Pe),Te}for(ge=c(ge);!We.done;Pe++,We=J.next())We=Q(ge,H,Pe,We.value,te),We!==null&&(s&&We.alternate!==null&&ge.delete(We.key===null?Pe:We.key),q=_(We,q,Pe),Qe===null?Te=We:Qe.sibling=We,Qe=We);return s&&ge.forEach(function(oR){return r(H,oR)}),Je&&Zi(H,Pe),Te}function rt(H,q,J,te){if(typeof J=="object"&&J!==null&&J.type===F&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var Te=J.key;q!==null;){if(q.key===Te){if(Te=J.type,Te===F){if(q.tag===7){l(H,q.sibling),te=y(q,J.props.children),te.return=H,H=te;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===x&&ao(Te)===q.type){l(H,q.sibling),te=y(q,J.props),yl(te,J),te.return=H,H=te;break e}l(H,q);break}else r(H,q);q=q.sibling}J.type===F?(te=no(J.props.children,H.mode,te,J.key),te.return=H,H=te):(te=sc(J.type,J.key,J.props,null,H.mode,te),yl(te,J),te.return=H,H=te)}return A(H);case L:e:{for(Te=J.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){l(H,q.sibling),te=y(q,J.children||[]),te.return=H,H=te;break e}else{l(H,q);break}else r(H,q);q=q.sibling}te=Bf(J,H.mode,te),te.return=H,H=te}return A(H);case x:return J=ao(J),rt(H,q,J,te)}if(Re(J))return me(H,q,J,te);if(U(J)){if(Te=U(J),typeof Te!="function")throw Error(i(150));return J=Te.call(J),Se(H,q,J,te)}if(typeof J.then=="function")return rt(H,q,dc(J),te);if(J.$$typeof===$)return rt(H,q,ac(H,J),te);fc(H,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,q!==null&&q.tag===6?(l(H,q.sibling),te=y(q,J),te.return=H,H=te):(l(H,q),te=qf(J,H.mode,te),te.return=H,H=te),A(H)):l(H,q)}return function(H,q,J,te){try{gl=0;var Te=rt(H,q,J,te);return ea=null,Te}catch(ge){if(ge===Zo||ge===uc)throw ge;var Qe=Dn(29,ge,null,H.mode);return Qe.lanes=te,Qe.return=H,Qe}finally{}}}var uo=ay(!0),ly=ay(!1),Xs=!1;function jf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function js(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=ic(s),Jg(s,null,l),r}return nc(s,c,r,l),ic(s)}function _l(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ms(s,l)}}function eh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var th=!1;function vl(){if(th){var s=jo;if(s!==null)throw s}}function Tl(s,r,l,c){th=!1;var y=s.updateQueue;Xs=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var P=w,Y=P.next;P.next=null,A===null?_=Y:A.next=Y,A=P;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==A&&(w===null?Z.firstBaseUpdate=Y:w.next=Y,Z.lastBaseUpdate=P))}if(_!==null){var ie=y.baseState;A=0,Z=Y=P=null,w=_;do{var K=w.lane&-536870913,Q=K!==w.lane;if(Q?(Be&K)===K:(c&K)===K){K!==0&&K===Xo&&(th=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=s,Se=w;K=r;var rt=l;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ie=me.call(rt,ie,K);break e}ie=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,K=typeof me=="function"?me.call(rt,ie,K):me,K==null)break e;ie=T({},ie,K);break e;case 2:Xs=!0}}K=w.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(Y=Z=Q,P=ie):Z=Z.next=Q,A|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);Z===null&&(P=ie),y.baseState=P,y.firstBaseUpdate=Y,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),sr|=A,s.lanes=A,s.memoizedState=ie}}function uy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function cy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)uy(l[s],r)}var ta=O(null),hc=O(0);function dy(s,r){s=cs,oe(hc,s),oe(ta,r),cs=s|r.baseLanes}function nh(){oe(hc,cs),oe(ta,ta.current)}function ih(){cs=hc.current,ee(ta),ee(hc)}var kn=O(null),Wn=null;function er(s){var r=s.alternate;oe(At,At.current&1),oe(kn,s),Wn===null&&(r===null||ta.current!==null||r.memoizedState!==null)&&(Wn=s)}function sh(s){oe(At,At.current),oe(kn,s),Wn===null&&(Wn=s)}function fy(s){s.tag===22?(oe(At,At.current),oe(kn,s),Wn===null&&(Wn=s)):tr()}function tr(){oe(At,At.current),oe(kn,kn.current)}function Pn(s){ee(kn),Wn===s&&(Wn=null),ee(At)}var At=O(0);function pc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||cp(l)||dp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ns=0,De=null,it=null,bt=null,mc=!1,na=!1,co=!1,gc=0,El=0,ia=null,WI=0;function _t(){throw Error(i(321))}function rh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Mn(s[l],r[l]))return!1;return!0}function oh(s,r,l,c,y,_){return ns=_,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=s===null||s.memoizedState===null?Qy:Eh,co=!1,_=l(c,y),co=!1,na&&(_=py(r,l,c,y)),hy(s),_}function hy(s){W.H=Cl;var r=it!==null&&it.next!==null;if(ns=0,bt=it=De=null,mc=!1,El=0,ia=null,r)throw Error(i(300));s===null||xt||(s=s.dependencies,s!==null&&oc(s)&&(xt=!0))}function py(s,r,l,c){De=s;var y=0;do{if(na&&(ia=null),El=0,na=!1,25<=y)throw Error(i(301));if(y+=1,bt=it=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=Wy,_=r(l,c)}while(na);return _}function XI(){var s=W.H,r=s.useState()[0];return r=typeof r.then=="function"?Sl(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(De.flags|=1024),r}function ah(){var s=gc!==0;return gc=0,s}function lh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function uh(s){if(mc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}mc=!1}ns=0,bt=it=De=null,na=!1,El=gc=0,ia=null}function yn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?De.memoizedState=bt=s:bt=bt.next=s,bt}function Ct(){if(it===null){var s=De.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=bt===null?De.memoizedState:bt.next;if(r!==null)bt=r,it=s;else{if(s===null)throw De.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},bt===null?De.memoizedState=bt=s:bt=bt.next=s}return bt}function yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(s){var r=El;return El+=1,ia===null&&(ia=[]),s=sy(ia,s,r),r=De,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Qy:Eh),s}function _c(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Sl(s);if(s.$$typeof===$)return Wt(s)}throw Error(i(438,String(s)))}function ch(s){var r=null,l=De.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=yc(),De.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=V;return r.index++,l}function is(s,r){return typeof r=="function"?r(s):r}function vc(s){var r=Ct();return dh(r,it,s)}function dh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var w=A=null,P=null,Y=r,Z=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Be&ie)===ie:(ns&ie)===ie){var K=Y.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Xo&&(Z=!0);else if((ns&K)===K){Y=Y.next,K===Xo&&(Z=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=ie,A=_):P=P.next=ie,De.lanes|=K,sr|=K;ie=Y.action,co&&l(_,ie),_=Y.hasEagerState?Y.eagerState:l(_,ie)}else K={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(w=P=K,A=_):P=P.next=K,De.lanes|=ie,sr|=ie;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?A=_:P.next=w,!Mn(_,s.memoizedState)&&(xt=!0,Z&&(l=jo,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=P,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function fh(s){var r=Ct(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Mn(_,r.memoizedState)||(xt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function my(s,r,l){var c=De,y=Ct(),_=Je;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!Mn((it||y).memoizedState,l);if(A&&(y.memoizedState=l,xt=!0),y=y.queue,mh(_y.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,sa(9,{destroy:void 0},yy.bind(null,c,y,l,r),null),ot===null)throw Error(i(349));_||(ns&127)!==0||gy(c,r,l)}return l}function gy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=De.updateQueue,r===null?(r=yc(),De.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function yy(s,r,l,c){r.value=l,r.getSnapshot=c,vy(r)&&Ty(s)}function _y(s,r,l){return l(function(){vy(r)&&Ty(s)})}function vy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Mn(s,l)}catch{return!0}}function Ty(s){var r=to(s,2);r!==null&&In(r,s,2)}function hh(s){var r=yn();if(typeof s=="function"){var l=s;if(s=l(),co){Fn(!0);try{l()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:s},r}function Ey(s,r,l,c){return s.baseState=l,dh(s,it,typeof c=="function"?c:is)}function jI(s,r,l,c,y){if(Sc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};W.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Sy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Sy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=W.T,A={};W.T=A;try{var w=l(y,c),P=W.S;P!==null&&P(A,w),Ay(s,r,w)}catch(Y){ph(s,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),W.T=_}}else try{_=l(y,c),Ay(s,r,_)}catch(Y){ph(s,r,Y)}}function Ay(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Cy(s,r,c)},function(c){return ph(s,r,c)}):Cy(s,r,l)}function Cy(s,r,l){r.status="fulfilled",r.value=l,Iy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Sy(s,l)))}function ph(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Iy(r),r=r.next;while(r!==c)}s.action=null}function Iy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function wy(s,r){return r}function Ry(s,r){if(Je){var l=ot.formState;if(l!==null){e:{var c=De;if(Je){if(ut){t:{for(var y=ut,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ut=Xn(y.nextSibling),c=y.data==="F!";break e}}Qs(c)}c=!1}c&&(r=l[0])}}return l=yn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:r},l.queue=c,l=Yy.bind(null,De,c),c.dispatch=l,c=hh(!1),_=Th.bind(null,De,!1,c.queue),c=yn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=jI.bind(null,De,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function by(s){var r=Ct();return xy(r,it,s)}function xy(s,r,l){if(r=dh(s,r,wy)[0],s=vc(is)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Sl(r)}catch(A){throw A===Zo?uc:A}else c=r;r=Ct();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(De.flags|=2048,sa(9,{destroy:void 0},ZI.bind(null,y,l),null)),[c,_,s]}function ZI(s,r){s.action=r}function Ny(s){var r=Ct(),l=it;if(l!==null)return xy(r,l,s);Ct(),r=r.memoizedState,l=Ct();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function sa(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=De.updateQueue,r===null&&(r=yc(),De.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function My(){return Ct().memoizedState}function Tc(s,r,l,c){var y=yn();De.flags|=s,y.memoizedState=sa(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ec(s,r,l,c){var y=Ct();c=c===void 0?null:c;var _=y.memoizedState.inst;it!==null&&c!==null&&rh(c,it.memoizedState.deps)?y.memoizedState=sa(r,_,l,c):(De.flags|=s,y.memoizedState=sa(1|r,_,l,c))}function Dy(s,r){Tc(8390656,8,s,r)}function mh(s,r){Ec(2048,8,s,r)}function ew(s){De.flags|=4;var r=De.updateQueue;if(r===null)r=yc(),De.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function ky(s){var r=Ct().memoizedState;return ew({ref:r,nextImpl:s}),function(){if((je&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Py(s,r){return Ec(4,2,s,r)}function Vy(s,r){return Ec(4,4,s,r)}function Uy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ly(s,r,l){l=l!=null?l.concat([s]):null,Ec(4,4,Uy.bind(null,r,s),l)}function gh(){}function Oy(s,r){var l=Ct();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&rh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function qy(s,r){var l=Ct();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&rh(r,c[1]))return c[0];if(c=s(),co){Fn(!0);try{s()}finally{Fn(!1)}}return l.memoizedState=[c,r],c}function yh(s,r,l){return l===void 0||(ns&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=B_(),De.lanes|=s,sr|=s,l)}function By(s,r,l,c){return Mn(l,r)?l:ta.current!==null?(s=yh(s,l,c),Mn(s,r)||(xt=!0),s):(ns&42)===0||(ns&1073741824)!==0&&(Be&261930)===0?(xt=!0,s.memoizedState=l):(s=B_(),De.lanes|=s,sr|=s,r)}function Fy(s,r,l,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var A=W.T,w={};W.T=w,Th(s,!1,r,l);try{var P=y(),Y=W.S;if(Y!==null&&Y(w,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Z=QI(P,c);Al(s,r,Z,Ln(s))}else Al(s,r,c,Ln(s))}catch(ie){Al(s,r,{then:function(){},status:"rejected",reason:ie},Ln())}finally{le.p=_,A!==null&&w.types!==null&&(A.types=w.types),W.T=A}}function tw(){}function _h(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=Hy(s).queue;Fy(s,y,r,_e,l===null?tw:function(){return zy(s),l(c)})}function Hy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function zy(s){var r=Hy(s);r.next===null&&(r=s.alternate.memoizedState),Al(s,r.next.queue,{},Ln())}function vh(){return Wt(Bl)}function Gy(){return Ct().memoizedState}function Jy(){return Ct().memoizedState}function nw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ln();s=js(l);var c=Zs(r,s,l);c!==null&&(In(c,r,l),_l(c,r,l)),r={cache:$f()},s.payload=r;return}r=r.return}}function iw(s,r,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sc(s)?Ky(r,l):(l=Lf(s,r,l,c),l!==null&&(In(l,s,c),$y(l,r,c)))}function Yy(s,r,l){var c=Ln();Al(s,r,l,c)}function Al(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sc(s))Ky(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,w=_(A,l);if(y.hasEagerState=!0,y.eagerState=w,Mn(w,A))return nc(s,r,y,0),ot===null&&tc(),!1}catch{}finally{}if(l=Lf(s,r,y,c),l!==null)return In(l,s,c),$y(l,r,c),!0}return!1}function Th(s,r,l,c){if(c={lane:2,revertLane:jh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sc(s)){if(r)throw Error(i(479))}else r=Lf(s,l,c,2),r!==null&&In(r,s,2)}function Sc(s){var r=s.alternate;return s===De||r!==null&&r===De}function Ky(s,r){na=mc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function $y(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Ms(s,l)}}var Cl={readContext:Wt,use:_c,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};Cl.useEffectEvent=_t;var Qy={readContext:Wt,use:_c,useCallback:function(s,r){return yn().memoizedState=[s,r===void 0?null:r],s},useContext:Wt,useEffect:Dy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Tc(4194308,4,Uy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Tc(4194308,4,s,r)},useInsertionEffect:function(s,r){Tc(4,2,s,r)},useMemo:function(s,r){var l=yn();r=r===void 0?null:r;var c=s();if(co){Fn(!0);try{s()}finally{Fn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=yn();if(l!==void 0){var y=l(r);if(co){Fn(!0);try{l(r)}finally{Fn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=iw.bind(null,De,s),[c.memoizedState,s]},useRef:function(s){var r=yn();return s={current:s},r.memoizedState=s},useState:function(s){s=hh(s);var r=s.queue,l=Yy.bind(null,De,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:gh,useDeferredValue:function(s,r){var l=yn();return yh(l,s,r)},useTransition:function(){var s=hh(!1);return s=Fy.bind(null,De,s.queue,!0,!1),yn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=De,y=yn();if(Je){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(Be&127)!==0||gy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Dy(_y.bind(null,c,_,s),[s]),c.flags|=2048,sa(9,{destroy:void 0},yy.bind(null,c,_,l,r),null),l},useId:function(){var s=yn(),r=ot.identifierPrefix;if(Je){var l=Ri,c=wi;l=(c&~(1<<32-fn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=gc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=WI++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:vh,useFormState:Ry,useActionState:Ry,useOptimistic:function(s){var r=yn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Th.bind(null,De,!0,l),l.dispatch=r,[s,r]},useMemoCache:ch,useCacheRefresh:function(){return yn().memoizedState=nw.bind(null,De)},useEffectEvent:function(s){var r=yn(),l={impl:s};return r.memoizedState=l,function(){if((je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Eh={readContext:Wt,use:_c,useCallback:Oy,useContext:Wt,useEffect:mh,useImperativeHandle:Ly,useInsertionEffect:Py,useLayoutEffect:Vy,useMemo:qy,useReducer:vc,useRef:My,useState:function(){return vc(is)},useDebugValue:gh,useDeferredValue:function(s,r){var l=Ct();return By(l,it.memoizedState,s,r)},useTransition:function(){var s=vc(is)[0],r=Ct().memoizedState;return[typeof s=="boolean"?s:Sl(s),r]},useSyncExternalStore:my,useId:Gy,useHostTransitionStatus:vh,useFormState:by,useActionState:by,useOptimistic:function(s,r){var l=Ct();return Ey(l,it,s,r)},useMemoCache:ch,useCacheRefresh:Jy};Eh.useEffectEvent=ky;var Wy={readContext:Wt,use:_c,useCallback:Oy,useContext:Wt,useEffect:mh,useImperativeHandle:Ly,useInsertionEffect:Py,useLayoutEffect:Vy,useMemo:qy,useReducer:fh,useRef:My,useState:function(){return fh(is)},useDebugValue:gh,useDeferredValue:function(s,r){var l=Ct();return it===null?yh(l,s,r):By(l,it.memoizedState,s,r)},useTransition:function(){var s=fh(is)[0],r=Ct().memoizedState;return[typeof s=="boolean"?s:Sl(s),r]},useSyncExternalStore:my,useId:Gy,useHostTransitionStatus:vh,useFormState:Ny,useActionState:Ny,useOptimistic:function(s,r){var l=Ct();return it!==null?Ey(l,it,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ch,useCacheRefresh:Jy};Wy.useEffectEvent=ky;function Sh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ah={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Ln(),y=js(c);y.payload=r,l!=null&&(y.callback=l),r=Zs(s,y,c),r!==null&&(In(r,s,c),_l(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Ln(),y=js(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Zs(s,y,c),r!==null&&(In(r,s,c),_l(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Ln(),c=js(l);c.tag=2,r!=null&&(c.callback=r),r=Zs(s,c,l),r!==null&&(In(r,s,l),_l(r,s,l))}};function Xy(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!cl(l,c)||!cl(y,_):!0}function jy(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Ah.enqueueReplaceState(r,r.state,null)}function fo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Zy(s){ec(s)}function e_(s){console.error(s)}function t_(s){ec(s)}function Ac(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function n_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ch(s,r,l){return l=js(l),l.tag=3,l.payload={element:null},l.callback=function(){Ac(s,r)},l}function i_(s){return s=js(s),s.tag=3,s}function s_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){n_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){n_(r,l,c),typeof y!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function sw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Wo(r,l,y,!0),l=kn.current,l!==null){switch(l.tag){case 31:case 13:return Wn===null?Vc():l.alternate===null&&vt===0&&(vt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===cc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Qh(s,c,y)),!1;case 22:return l.flags|=65536,c===cc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Qh(s,c,y)),!1}throw Error(i(435,l.tag))}return Qh(s,c,y),Vc(),!1}if(Je)return r=kn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==zf&&(s=Error(i(422),{cause:c}),hl(Yn(s,l)))):(c!==zf&&(r=Error(i(423),{cause:c}),hl(Yn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Yn(c,l),y=Ch(s.stateNode,c,y),eh(s,y),vt!==4&&(vt=2)),!1;var _=Error(i(520),{cause:c});if(_=Yn(_,l),Dl===null?Dl=[_]:Dl.push(_),vt!==4&&(vt=2),r===null)return!0;c=Yn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Ch(l.stateNode,c,s),eh(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(rr===null||!rr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=i_(y),s_(y,s,l,c),eh(l,y),!1}l=l.return}while(l!==null);return!1}var Ih=Error(i(461)),xt=!1;function Xt(s,r,l,c){r.child=s===null?ly(r,null,l,c):uo(r,s.child,l,c)}function r_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return ro(r),c=oh(s,r,l,A,_,y),w=ah(),s!==null&&!xt?(lh(s,r,y),ss(s,r,y)):(Je&&w&&Ff(r),r.flags|=1,Xt(s,r,c,y),r.child)}function o_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Of(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,a_(s,r,_,c,y)):(s=sc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!kh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:cl,l(A,c)&&s.ref===r.ref)return ss(s,r,y)}return r.flags|=1,s=ji(_,c),s.ref=r.ref,s.return=r,r.child=s}function a_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(cl(_,c)&&s.ref===r.ref)if(xt=!1,r.pendingProps=c=_,kh(s,y))(s.flags&131072)!==0&&(xt=!0);else return r.lanes=s.lanes,ss(s,r,y)}return wh(s,r,l,c,y)}function l_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return u_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&lc(r,_!==null?_.cachePool:null),_!==null?dy(r,_):nh(),fy(r);else return c=r.lanes=536870912,u_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(lc(r,_.cachePool),dy(r,_),tr(),r.memoizedState=null):(s!==null&&lc(r,null),nh(),tr());return Xt(s,r,y,l),r.child}function Il(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function u_(s,r,l,c,y){var _=Wf();return _=_===null?null:{parent:Rt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&lc(r,null),nh(),fy(r),s!==null&&Wo(s,r,c,!0),r.childLanes=y,null}function Cc(s,r){return r=wc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function c_(s,r,l){return uo(r,s.child,null,l),s=Cc(r,r.pendingProps),s.flags|=2,Pn(r),r.memoizedState=null,s}function rw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Je){if(c.mode==="hidden")return s=Cc(r,c),r.lanes=536870912,Il(null,s);if(sh(r),(s=ut)?(s=Sv(s,Qn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Ks!==null?{id:wi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},l=Kg(s),l.return=r,r.child=l,Qt=r,ut=null)):s=null,s===null)throw Qs(r);return r.lanes=536870912,null}return Cc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(sh(r),y)if(r.flags&256)r.flags&=-257,r=c_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(xt||Wo(s,r,l,!1),y=(l&s.childLanes)!==0,xt||y){if(c=ot,c!==null&&(A=Ds(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,to(s,A),In(c,s,A),Ih;Vc(),r=c_(s,r,l)}else s=_.treeContext,ut=Xn(A.nextSibling),Qt=r,Je=!0,$s=null,Qn=!1,s!==null&&Wg(r,s),r=Cc(r,c),r.flags|=4096;return r}return s=ji(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Ic(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function wh(s,r,l,c,y){return ro(r),l=oh(s,r,l,c,void 0,y),c=ah(),s!==null&&!xt?(lh(s,r,y),ss(s,r,y)):(Je&&c&&Ff(r),r.flags|=1,Xt(s,r,l,y),r.child)}function d_(s,r,l,c,y,_){return ro(r),r.updateQueue=null,l=py(r,c,l,y),hy(s),c=ah(),s!==null&&!xt?(lh(s,r,_),ss(s,r,_)):(Je&&c&&Ff(r),r.flags|=1,Xt(s,r,l,_),r.child)}function f_(s,r,l,c,y){if(ro(r),r.stateNode===null){var _=Yo,A=l.contextType;typeof A=="object"&&A!==null&&(_=Wt(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ah,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},jf(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?Wt(A):Yo,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Sh(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Ah.enqueueReplaceState(_,_.state,null),Tl(r,c,_,y),vl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var w=r.memoizedProps,P=fo(l,w);_.props=P;var Y=_.context,Z=l.contextType;A=Yo,typeof Z=="object"&&Z!==null&&(A=Wt(Z));var ie=l.getDerivedStateFromProps;Z=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||Y!==A)&&jy(r,_,c,A),Xs=!1;var K=r.memoizedState;_.state=K,Tl(r,c,_,y),vl(),Y=r.memoizedState,w||K!==Y||Xs?(typeof ie=="function"&&(Sh(r,l,ie,c),Y=r.memoizedState),(P=Xs||Xy(r,l,P,c,K,Y,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=P):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Zf(s,r),A=r.memoizedProps,Z=fo(l,A),_.props=Z,ie=r.pendingProps,K=_.context,Y=l.contextType,P=Yo,typeof Y=="object"&&Y!==null&&(P=Wt(Y)),w=l.getDerivedStateFromProps,(Y=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ie||K!==P)&&jy(r,_,c,P),Xs=!1,K=r.memoizedState,_.state=K,Tl(r,c,_,y),vl();var Q=r.memoizedState;A!==ie||K!==Q||Xs||s!==null&&s.dependencies!==null&&oc(s.dependencies)?(typeof w=="function"&&(Sh(r,l,w,c),Q=r.memoizedState),(Z=Xs||Xy(r,l,Z,c,K,Q,P)||s!==null&&s.dependencies!==null&&oc(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=P,c=Z):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Ic(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=uo(r,s.child,null,y),r.child=uo(r,null,l,y)):Xt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ss(s,r,y),s}function h_(s,r,l,c){return io(),r.flags|=256,Xt(s,r,l,c),r.child}var Rh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(s){return{baseLanes:s,cachePool:ny()}}function xh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Un),s}function p_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(At.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Je){if(y?er(r):tr(),(s=ut)?(s=Sv(s,Qn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Ks!==null?{id:wi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},l=Kg(s),l.return=r,r.child=l,Qt=r,ut=null)):s=null,s===null)throw Qs(r);return dp(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(tr(),y=r.mode,w=wc({mode:"hidden",children:w},y),c=no(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=bh(l),c.childLanes=xh(s,A,l),r.memoizedState=Rh,Il(null,c)):(er(r),Nh(r,w))}var P=s.memoizedState;if(P!==null&&(w=P.dehydrated,w!==null)){if(_)r.flags&256?(er(r),r.flags&=-257,r=Mh(s,r,l)):r.memoizedState!==null?(tr(),r.child=s.child,r.flags|=128,r=null):(tr(),w=c.fallback,y=r.mode,c=wc({mode:"visible",children:c.children},y),w=no(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,uo(r,s.child,null,l),c=r.child,c.memoizedState=bh(l),c.childLanes=xh(s,A,l),r.memoizedState=Rh,r=Il(null,c));else if(er(r),dp(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,hl({value:c,source:null,stack:null}),r=Mh(s,r,l)}else if(xt||Wo(s,r,l,!1),A=(l&s.childLanes)!==0,xt||A){if(A=ot,A!==null&&(c=Ds(A,l),c!==0&&c!==P.retryLane))throw P.retryLane=c,to(s,c),In(A,s,c),Ih;cp(w)||Vc(),r=Mh(s,r,l)}else cp(w)?(r.flags|=192,r.child=s.child,r=null):(s=P.treeContext,ut=Xn(w.nextSibling),Qt=r,Je=!0,$s=null,Qn=!1,s!==null&&Wg(r,s),r=Nh(r,c.children),r.flags|=4096);return r}return y?(tr(),w=c.fallback,y=r.mode,P=s.child,Y=P.sibling,c=ji(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,Y!==null?w=ji(Y,w):(w=no(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Il(null,c),c=r.child,w=s.child.memoizedState,w===null?w=bh(l):(y=w.cachePool,y!==null?(P=Rt._currentValue,y=y.parent!==P?{parent:P,pool:P}:y):y=ny(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=xh(s,A,l),r.memoizedState=Rh,Il(s.child,c)):(er(r),l=s.child,s=l.sibling,l=ji(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Nh(s,r){return r=wc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function wc(s,r){return s=Dn(22,s,null,r),s.lanes=0,s}function Mh(s,r,l){return uo(r,s.child,null,l),s=Nh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function m_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Yf(s.return,r,l)}function Dh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function g_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=At.current,w=(A&2)!==0;if(w?(A=A&1|2,r.flags|=128):A&=1,oe(At,A),Xt(s,r,c,l),c=Je?fl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&m_(s,l,r);else if(s.tag===19)m_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&pc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Dh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&pc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Dh(r,!0,l,null,_,c);break;case"together":Dh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ss(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),sr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Wo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=ji(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=ji(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function kh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&oc(s)))}function ow(s,r,l){switch(r.tag){case 3:kt(r,r.stateNode.containerInfo),Ws(r,Rt,s.memoizedState.cache),io();break;case 27:case 5:qn(r);break;case 4:kt(r,r.stateNode.containerInfo);break;case 10:Ws(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,sh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(er(r),r.flags|=128,null):(l&r.child.childLanes)!==0?p_(s,r,l):(er(r),s=ss(s,r,l),s!==null?s.sibling:null);er(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Wo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return g_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(At,At.current),c)break;return null;case 22:return r.lanes=0,l_(s,r,l,r.pendingProps);case 24:Ws(r,Rt,s.memoizedState.cache)}return ss(s,r,l)}function y_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)xt=!0;else{if(!kh(s,l)&&(r.flags&128)===0)return xt=!1,ow(s,r,l);xt=(s.flags&131072)!==0}else xt=!1,Je&&(r.flags&1048576)!==0&&Qg(r,fl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=ao(r.elementType),r.type=s,typeof s=="function")Of(s)?(c=fo(s,c),r.tag=1,r=f_(null,r,s,c,l)):(r.tag=0,r=wh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ne){r.tag=11,r=r_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=o_(null,r,s,c,l);break e}}throw r=Ke(s)||s,Error(i(306,r,""))}}return r;case 0:return wh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=fo(c,r.pendingProps),f_(s,r,c,y,l);case 3:e:{if(kt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Zf(s,r),Tl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Ws(r,Rt,c),c!==_.cache&&Kf(r,[Rt],l,!0),vl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=h_(s,r,c,l);break e}else if(c!==y){y=Yn(Error(i(424)),r),hl(y),r=h_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ut=Xn(s.firstChild),Qt=r,Je=!0,$s=null,Qn=!0,l=ly(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(io(),c===y){r=ss(s,r,l);break e}Xt(s,r,c,l)}r=r.child}return r;case 26:return Ic(s,r),s===null?(l=bv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Je||(l=r.type,s=r.pendingProps,c=Hc(ke.current).createElement(l),c[gt]=r,c[$t]=s,jt(c,l,s),St(c),r.stateNode=c):r.memoizedState=bv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return qn(r),s===null&&Je&&(c=r.stateNode=Iv(r.type,r.pendingProps,ke.current),Qt=r,Qn=!0,y=ut,ur(r.type)?(fp=y,ut=Xn(c.firstChild)):ut=y),Xt(s,r,r.pendingProps.children,l),Ic(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Je&&((y=c=ut)&&(c=Uw(c,r.type,r.pendingProps,Qn),c!==null?(r.stateNode=c,Qt=r,ut=Xn(c.firstChild),Qn=!1,y=!0):y=!1),y||Qs(r)),qn(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,ap(y,_)?c=null:A!==null&&ap(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=oh(s,r,XI,null,null,l),Bl._currentValue=y),Ic(s,r),Xt(s,r,c,l),r.child;case 6:return s===null&&Je&&((s=l=ut)&&(l=Lw(l,r.pendingProps,Qn),l!==null?(r.stateNode=l,Qt=r,ut=null,s=!0):s=!1),s||Qs(r)),null;case 13:return p_(s,r,l);case 4:return kt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=uo(r,null,c,l):Xt(s,r,c,l),r.child;case 11:return r_(s,r,r.type,r.pendingProps,l);case 7:return Xt(s,r,r.pendingProps,l),r.child;case 8:return Xt(s,r,r.pendingProps.children,l),r.child;case 12:return Xt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Ws(r,r.type,c.value),Xt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,ro(r),y=Wt(y),c=c(y),r.flags|=1,Xt(s,r,c,l),r.child;case 14:return o_(s,r,r.type,r.pendingProps,l);case 15:return a_(s,r,r.type,r.pendingProps,l);case 19:return g_(s,r,l);case 31:return rw(s,r,l);case 22:return l_(s,r,l,r.pendingProps);case 24:return ro(r),c=Wt(Rt),s===null?(y=Wf(),y===null&&(y=ot,_=$f(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},jf(r),Ws(r,Rt,y)):((s.lanes&l)!==0&&(Zf(s,r),Tl(r,null,null,l),vl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ws(r,Rt,c)):(c=_.cache,Ws(r,Rt,c),c!==y.cache&&Kf(r,[Rt],l,!0))),Xt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function rs(s){s.flags|=4}function Ph(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(G_())s.flags|=8192;else throw lo=cc,Xf}else s.flags&=-16777217}function __(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kv(r))if(G_())s.flags|=8192;else throw lo=cc,Xf}function Rc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Ya():536870912,s.lanes|=r,la|=r)}function wl(s,r){if(!Je)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ct(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function aw(s,r,l){var c=r.pendingProps;switch(Hf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ts(Rt),at(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Qo(r)?rs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gf())),ct(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(rs(r),_!==null?(ct(r),__(r,_)):(ct(r),Ph(r,y,null,c,l))):_?_!==s.memoizedState?(rs(r),ct(r),__(r,_)):(ct(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&rs(r),ct(r),Ph(r,y,s,c,l)),null;case 27:if(ii(r),l=ke.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}s=pe.current,Qo(r)?Xg(r):(s=Iv(y,c,l),r.stateNode=s,rs(r))}return ct(r),null;case 5:if(ii(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(_=pe.current,Qo(r))Xg(r);else{var A=Hc(ke.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[gt]=r,_[$t]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(jt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&rs(r)}}return ct(r),Ph(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&rs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ke.current,Qo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Qt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[gt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||pv(s.nodeValue,l)),s||Qs(r,!0)}else s=Hc(s).createTextNode(c),s[gt]=r,r.stateNode=s}return ct(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Qo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[gt]=r}else io(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),s=!1}else l=Gf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Pn(r),r):(Pn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ct(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Qo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[gt]=r}else io(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=Gf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Pn(r),r):(Pn(r),null)}return Pn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Rc(r,r.updateQueue),ct(r),null);case 4:return at(),s===null&&np(r.stateNode.containerInfo),ct(r),null;case 10:return ts(r.type),ct(r),null;case 19:if(ee(At),c=r.memoizedState,c===null)return ct(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)wl(c,!1);else{if(vt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=pc(s),_!==null){for(r.flags|=128,wl(c,!1),s=_.updateQueue,r.updateQueue=s,Rc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Yg(l,s),l=l.sibling;return oe(At,At.current&1|2),Je&&Zi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Yt()>Dc&&(r.flags|=128,y=!0,wl(c,!1),r.lanes=4194304)}else{if(!y)if(s=pc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Rc(r,s),wl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Je)return ct(r),null}else 2*Yt()-c.renderingStartTime>Dc&&l!==536870912&&(r.flags|=128,y=!0,wl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Yt(),s.sibling=null,l=At.current,oe(At,y?l&1|2:l&1),Je&&Zi(r,c.treeForkCount),s):(ct(r),null);case 22:case 23:return Pn(r),ih(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),l=r.updateQueue,l!==null&&Rc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ee(oo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ts(Rt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function lw(s,r){switch(Hf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ts(Rt),at(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ii(r),null;case 31:if(r.memoizedState!==null){if(Pn(r),r.alternate===null)throw Error(i(340));io()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Pn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));io()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ee(At),null;case 4:return at(),null;case 10:return ts(r.type),null;case 22:case 23:return Pn(r),ih(),s!==null&&ee(oo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ts(Rt),null;case 25:return null;default:return null}}function v_(s,r){switch(Hf(r),r.tag){case 3:ts(Rt),at();break;case 26:case 27:case 5:ii(r);break;case 4:at();break;case 31:r.memoizedState!==null&&Pn(r);break;case 13:Pn(r);break;case 19:ee(At);break;case 10:ts(r.type);break;case 22:case 23:Pn(r),ih(),s!==null&&ee(oo);break;case 24:ts(Rt)}}function Rl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(w){nt(r,r.return,w)}}function nr(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=r;var P=l,Y=w;try{Y()}catch(Z){nt(y,P,Z)}}}c=c.next}while(c!==_)}}catch(Z){nt(r,r.return,Z)}}function T_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{cy(r,l)}catch(c){nt(s,s.return,c)}}}function E_(s,r,l){l.props=fo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function bl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function bi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function S_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function Vh(s,r,l){try{var c=s.stateNode;Nw(c,s.type,l,r),c[$t]=r}catch(y){nt(s,s.return,y)}}function A_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ur(s.type)||s.tag===4}function Uh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ur(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Bt));else if(c!==4&&(c===27&&ur(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Lh(s,r,l),s=s.sibling;s!==null;)Lh(s,r,l),s=s.sibling}function bc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&ur(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(bc(s,r,l),s=s.sibling;s!==null;)bc(s,r,l),s=s.sibling}function C_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jt(r,c,l),r[gt]=s,r[$t]=l}catch(_){nt(s,s.return,_)}}var os=!1,Nt=!1,Oh=!1,I_=typeof WeakSet=="function"?WeakSet:Set,zt=null;function uw(s,r){if(s=s.containerInfo,rp=Qc,s=Lg(s),Mf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,w=-1,P=-1,Y=0,Z=0,ie=s,K=null;t:for(;;){for(var Q;ie!==l||y!==0&&ie.nodeType!==3||(w=A+y),ie!==_||c!==0&&ie.nodeType!==3||(P=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)K=ie,ie=Q;for(;;){if(ie===s)break t;if(K===l&&++Y===y&&(w=A),K===_&&++Z===c&&(P=A),(Q=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Q}l=w===-1||P===-1?null:{start:w,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(op={focusedElem:s,selectionRange:l},Qc=!1,zt=r;zt!==null;)if(r=zt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,zt=s;else for(;zt!==null;){switch(r=zt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var me=fo(l.type,y);s=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){nt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)up(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,zt=s;break}zt=r.return}}function w_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ls(s,l),c&4&&Rl(5,l);break;case 1:if(ls(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){nt(l,l.return,A)}else{var y=fo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(l,l.return,A)}}c&64&&T_(l),c&512&&bl(l,l.return);break;case 3:if(ls(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{cy(s,r)}catch(A){nt(l,l.return,A)}}break;case 27:r===null&&c&4&&C_(l);case 26:case 5:ls(s,l),r===null&&c&4&&S_(l),c&512&&bl(l,l.return);break;case 12:ls(s,l);break;case 31:ls(s,l),c&4&&x_(s,l);break;case 13:ls(s,l),c&4&&N_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=_w.bind(null,l),Ow(s,l))));break;case 22:if(c=l.memoizedState!==null||os,!c){r=r!==null&&r.memoizedState!==null||Nt,y=os;var _=Nt;os=c,(Nt=r)&&!_?us(s,l,(l.subtreeFlags&8772)!==0):ls(s,l),os=y,Nt=_}break;case 30:break;default:ls(s,l)}}function R_(s){var r=s.alternate;r!==null&&(s.alternate=null,R_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&zr(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,En=!1;function as(s,r,l){for(l=l.child;l!==null;)b_(s,r,l),l=l.sibling}function b_(s,r,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Rs,l)}catch{}switch(l.tag){case 26:Nt||bi(l,r),as(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Nt||bi(l,r);var c=pt,y=En;ur(l.type)&&(pt=l.stateNode,En=!1),as(s,r,l),Ll(l.stateNode),pt=c,En=y;break;case 5:Nt||bi(l,r);case 6:if(c=pt,y=En,pt=null,as(s,r,l),pt=c,En=y,pt!==null)if(En)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(_){nt(l,r,_)}else try{pt.removeChild(l.stateNode)}catch(_){nt(l,r,_)}break;case 18:pt!==null&&(En?(s=pt,Tv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ga(s)):Tv(pt,l.stateNode));break;case 4:c=pt,y=En,pt=l.stateNode.containerInfo,En=!0,as(s,r,l),pt=c,En=y;break;case 0:case 11:case 14:case 15:nr(2,l,r),Nt||nr(4,l,r),as(s,r,l);break;case 1:Nt||(bi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&E_(l,r,c)),as(s,r,l);break;case 21:as(s,r,l);break;case 22:Nt=(c=Nt)||l.memoizedState!==null,as(s,r,l),Nt=c;break;default:as(s,r,l)}}function x_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ga(s)}catch(l){nt(r,r.return,l)}}}function N_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ga(s)}catch(l){nt(r,r.return,l)}}function cw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new I_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new I_),r;default:throw Error(i(435,s.tag))}}function xc(s,r){var l=cw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=vw.bind(null,s,c);c.then(y,y)}})}function Sn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(ur(w.type)){pt=w.stateNode,En=!1;break e}break;case 5:pt=w.stateNode,En=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,En=!0;break e}w=w.return}if(pt===null)throw Error(i(160));b_(_,A,y),pt=null,En=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)M_(r,s),r=r.sibling}var ci=null;function M_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Sn(r,s),An(s),c&4&&(nr(3,s,s.return),Rl(3,s),nr(5,s,s.return));break;case 1:Sn(r,s),An(s),c&512&&(Nt||l===null||bi(l,l.return)),c&64&&os&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ci;if(Sn(r,s),An(s),c&512&&(Nt||l===null||bi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Gi]||_[gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),jt(_,c,l),_[gt]=s,St(_),c=_;break e;case"link":var A=Mv("link","href",y).get(c+(l.href||""));if(A){for(var w=0;w<A.length;w++)if(_=A[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(w,1);break t}}_=y.createElement(c),jt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Mv("meta","content",y).get(c+(l.content||""))){for(w=0;w<A.length;w++)if(_=A[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(w,1);break t}}_=y.createElement(c),jt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[gt]=s,St(_),c=_}s.stateNode=c}else Dv(y,s.type,s.stateNode);else s.stateNode=Nv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Dv(y,s.type,s.stateNode):Nv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Vh(s,s.memoizedProps,l.memoizedProps)}break;case 27:Sn(r,s),An(s),c&512&&(Nt||l===null||bi(l,l.return)),l!==null&&c&4&&Vh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Sn(r,s),An(s),c&512&&(Nt||l===null||bi(l,l.return)),s.flags&32){y=s.stateNode;try{Gn(y,"")}catch(me){nt(s,s.return,me)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Vh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Oh=!0);break;case 6:if(Sn(r,s),An(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(me){nt(s,s.return,me)}}break;case 3:if(Jc=null,y=ci,ci=zc(r.containerInfo),Sn(r,s),ci=y,An(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ga(r.containerInfo)}catch(me){nt(s,s.return,me)}Oh&&(Oh=!1,D_(s));break;case 4:c=ci,ci=zc(s.stateNode.containerInfo),Sn(r,s),An(s),ci=c;break;case 12:Sn(r,s),An(s);break;case 31:Sn(r,s),An(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 13:Sn(r,s),An(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Mc=Yt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 22:y=s.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,Y=os,Z=Nt;if(os=Y||y,Nt=Z||P,Sn(r,s),Nt=Z,os=Y,An(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||P||os||Nt||ho(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){P=l=r;try{if(_=P.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=P.stateNode;var ie=P.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(me){nt(P,P.return,me)}}}else if(r.tag===6){if(l===null){P=r;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(me){nt(P,P.return,me)}}}else if(r.tag===18){if(l===null){P=r;try{var Q=P.stateNode;y?Ev(Q,!0):Ev(P.stateNode,!1)}catch(me){nt(P,P.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,xc(s,l))));break;case 19:Sn(r,s),An(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 30:break;case 21:break;default:Sn(r,s),An(s)}}function An(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(A_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Uh(s);bc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(Gn(A,""),l.flags&=-33);var w=Uh(s);bc(s,w,A);break;case 3:case 4:var P=l.stateNode.containerInfo,Y=Uh(s);Lh(s,Y,P);break;default:throw Error(i(161))}}catch(Z){nt(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function D_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;D_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ls(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)w_(s,r.alternate,r),r=r.sibling}function ho(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:nr(4,r,r.return),ho(r);break;case 1:bi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&E_(r,r.return,l),ho(r);break;case 27:Ll(r.stateNode);case 26:case 5:bi(r,r.return),ho(r);break;case 22:r.memoizedState===null&&ho(r);break;case 30:ho(r);break;default:ho(r)}s=s.sibling}}function us(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:us(y,_,l),Rl(4,_);break;case 1:if(us(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){nt(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)uy(P[y],w)}catch(Y){nt(c,c.return,Y)}}l&&A&64&&T_(_),bl(_,_.return);break;case 27:C_(_);case 26:case 5:us(y,_,l),l&&c===null&&A&4&&S_(_),bl(_,_.return);break;case 12:us(y,_,l);break;case 31:us(y,_,l),l&&A&4&&x_(y,_);break;case 13:us(y,_,l),l&&A&4&&N_(y,_);break;case 22:_.memoizedState===null&&us(y,_,l),bl(_,_.return);break;case 30:break;default:us(y,_,l)}r=r.sibling}}function qh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&pl(l))}function Bh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&pl(s))}function di(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)k_(s,r,l,c),r=r.sibling}function k_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:di(s,r,l,c),y&2048&&Rl(9,r);break;case 1:di(s,r,l,c);break;case 3:di(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&pl(s)));break;case 12:if(y&2048){di(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,w=_.onPostCommit;typeof w=="function"&&w(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){nt(r,r.return,P)}}else di(s,r,l,c);break;case 31:di(s,r,l,c);break;case 13:di(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?di(s,r,l,c):xl(s,r):_._visibility&2?di(s,r,l,c):(_._visibility|=2,ra(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&qh(A,r);break;case 24:di(s,r,l,c),y&2048&&Bh(r.alternate,r);break;default:di(s,r,l,c)}}function ra(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,w=l,P=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ra(_,A,w,P,y),Rl(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?ra(_,A,w,P,y):xl(_,A):(Z._visibility|=2,ra(_,A,w,P,y)),y&&Y&2048&&qh(A.alternate,A);break;case 24:ra(_,A,w,P,y),y&&Y&2048&&Bh(A.alternate,A);break;default:ra(_,A,w,P,y)}r=r.sibling}}function xl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:xl(l,c),y&2048&&qh(c.alternate,c);break;case 24:xl(l,c),y&2048&&Bh(c.alternate,c);break;default:xl(l,c)}r=r.sibling}}var Nl=8192;function oa(s,r,l){if(s.subtreeFlags&Nl)for(s=s.child;s!==null;)P_(s,r,l),s=s.sibling}function P_(s,r,l){switch(s.tag){case 26:oa(s,r,l),s.flags&Nl&&s.memoizedState!==null&&Ww(l,ci,s.memoizedState,s.memoizedProps);break;case 5:oa(s,r,l);break;case 3:case 4:var c=ci;ci=zc(s.stateNode.containerInfo),oa(s,r,l),ci=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Nl,Nl=16777216,oa(s,r,l),Nl=c):oa(s,r,l));break;default:oa(s,r,l)}}function V_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ml(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,L_(c,s)}V_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U_(s),s=s.sibling}function U_(s){switch(s.tag){case 0:case 11:case 15:Ml(s),s.flags&2048&&nr(9,s,s.return);break;case 3:Ml(s);break;case 12:Ml(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Nc(s)):Ml(s);break;default:Ml(s)}}function Nc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,L_(c,s)}V_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:nr(8,r,r.return),Nc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Nc(r));break;default:Nc(r)}s=s.sibling}}function L_(s,r){for(;zt!==null;){var l=zt;switch(l.tag){case 0:case 11:case 15:nr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:pl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,zt=c;else e:for(l=s;zt!==null;){c=zt;var y=c.sibling,_=c.return;if(R_(c),c===l){zt=null;break e}if(y!==null){y.return=_,zt=y;break e}zt=_}}}var dw={getCacheForType:function(s){var r=Wt(Rt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Wt(Rt).controller.signal}},fw=typeof WeakMap=="function"?WeakMap:Map,je=0,ot=null,Oe=null,Be=0,tt=0,Vn=null,ir=!1,aa=!1,Fh=!1,cs=0,vt=0,sr=0,po=0,Hh=0,Un=0,la=0,Dl=null,Cn=null,zh=!1,Mc=0,O_=0,Dc=1/0,kc=null,rr=null,Ut=0,or=null,ua=null,ds=0,Gh=0,Jh=null,q_=null,kl=0,Yh=null;function Ln(){return(je&2)!==0&&Be!==0?Be&-Be:W.T!==null?jh():zi()}function B_(){if(Un===0)if((Be&536870912)===0||Je){var s=_i;_i<<=1,(_i&3932160)===0&&(_i=262144),Un=s}else Un=536870912;return s=kn.current,s!==null&&(s.flags|=32),Un}function In(s,r,l){(s===ot&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(ca(s,0),ar(s,Be,Un,!1)),Ns(s,l),((je&2)===0||s!==ot)&&(s===ot&&((je&2)===0&&(po|=l),vt===4&&ar(s,Be,Un,!1)),xi(s))}function F_(s,r,l){if((je&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||xs(s,r),y=c?mw(s,r):$h(s,r,!0),_=c;do{if(y===0){aa&&!c&&ar(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!hw(l)){y=$h(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var w=s;y=Dl;var P=w.current.memoizedState.isDehydrated;if(P&&(ca(w,A).flags|=256),A=$h(w,A,!1),A!==2){if(Fh&&!P){w.errorRecoveryDisabledLanes|=_,po|=_,y=4;break e}_=Cn,Cn=y,_!==null&&(Cn===null?Cn=_:Cn.push.apply(Cn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ca(s,0),ar(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ar(c,r,Un,!ir);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Mc+300-Yt(),10<y)){if(ar(c,r,Un,!ir),Hn(c,0,!0)!==0)break e;ds=r,c.timeoutHandle=_v(H_.bind(null,c,l,Cn,kc,zh,r,Un,po,la,ir,_,"Throttled",-0,0),y);break e}H_(c,l,Cn,kc,zh,r,Un,po,la,ir,_,null,-0,0)}}break}while(!0);xi(s)}function H_(s,r,l,c,y,_,A,w,P,Y,Z,ie,K,Q){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bt},P_(r,_,ie);var me=(_&62914560)===_?Mc-Yt():(_&4194048)===_?O_-Yt():0;if(me=Xw(ie,me),me!==null){ds=_,s.cancelPendingCommit=me(W_.bind(null,s,r,_,l,c,y,A,w,P,Z,ie,null,K,Q)),ar(s,_,A,!Y);return}}W_(s,r,_,l,c,y,A,w,P)}function hw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Mn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ar(s,r,l,c){r&=~Hh,r&=~po,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-fn(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&Ka(s,l,r)}function Pc(){return(je&6)===0?(Pl(0),!1):!0}function Kh(){if(Oe!==null){if(tt===0)var s=Oe.return;else s=Oe,es=so=null,uh(s),ea=null,gl=0,s=Oe;for(;s!==null;)v_(s.alternate,s),s=s.return;Oe=null}}function ca(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,kw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ds=0,Kh(),ot=s,Oe=l=ji(s.current,null),Be=r,tt=0,Vn=null,ir=!1,aa=xs(s,r),Fh=!1,la=Un=Hh=po=sr=vt=0,Cn=Dl=null,zh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-fn(c),_=1<<y;r|=s[y],c&=~_}return cs=r,tc(),l}function z_(s,r){De=null,W.H=Cl,r===Zo||r===uc?(r=ry(),tt=3):r===Xf?(r=ry(),tt=4):tt=r===Ih?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Oe===null&&(vt=1,Ac(s,Yn(r,s.current)))}function G_(){var s=kn.current;return s===null?!0:(Be&4194048)===Be?Wn===null:(Be&62914560)===Be||(Be&536870912)!==0?s===Wn:!1}function J_(){var s=W.H;return W.H=Cl,s===null?Cl:s}function Y_(){var s=W.A;return W.A=dw,s}function Vc(){vt=4,ir||(Be&4194048)!==Be&&kn.current!==null||(aa=!0),(sr&134217727)===0&&(po&134217727)===0||ot===null||ar(ot,Be,Un,!1)}function $h(s,r,l){var c=je;je|=2;var y=J_(),_=Y_();(ot!==s||Be!==r)&&(kc=null,ca(s,r)),r=!1;var A=vt;e:do try{if(tt!==0&&Oe!==null){var w=Oe,P=Vn;switch(tt){case 8:Kh(),A=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(r=!0);var Y=tt;if(tt=0,Vn=null,da(s,w,P,Y),l&&aa){A=0;break e}break;default:Y=tt,tt=0,Vn=null,da(s,w,P,Y)}}pw(),A=vt;break}catch(Z){z_(s,Z)}while(!0);return r&&s.shellSuspendCounter++,es=so=null,je=c,W.H=y,W.A=_,Oe===null&&(ot=null,Be=0,tc()),A}function pw(){for(;Oe!==null;)K_(Oe)}function mw(s,r){var l=je;je|=2;var c=J_(),y=Y_();ot!==s||Be!==r?(kc=null,Dc=Yt()+500,ca(s,r)):aa=xs(s,r);e:do try{if(tt!==0&&Oe!==null){r=Oe;var _=Vn;t:switch(tt){case 1:tt=0,Vn=null,da(s,r,_,1);break;case 2:case 9:if(iy(_)){tt=0,Vn=null,$_(r);break}r=function(){tt!==2&&tt!==9||ot!==s||(tt=7),xi(s)},_.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:iy(_)?(tt=0,Vn=null,$_(r)):(tt=0,Vn=null,da(s,r,_,7));break;case 5:var A=null;switch(Oe.tag){case 26:A=Oe.memoizedState;case 5:case 27:var w=Oe;if(A?kv(A):w.stateNode.complete){tt=0,Vn=null;var P=w.sibling;if(P!==null)Oe=P;else{var Y=w.return;Y!==null?(Oe=Y,Uc(Y)):Oe=null}break t}}tt=0,Vn=null,da(s,r,_,5);break;case 6:tt=0,Vn=null,da(s,r,_,6);break;case 8:Kh(),vt=6;break e;default:throw Error(i(462))}}gw();break}catch(Z){z_(s,Z)}while(!0);return es=so=null,W.H=c,W.A=y,je=l,Oe!==null?0:(ot=null,Be=0,tc(),vt)}function gw(){for(;Oe!==null&&!qr();)K_(Oe)}function K_(s){var r=y_(s.alternate,s,cs);s.memoizedProps=s.pendingProps,r===null?Uc(s):Oe=r}function $_(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=d_(l,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=d_(l,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:uh(r);default:v_(l,r),r=Oe=Yg(r,cs),r=y_(l,r,cs)}s.memoizedProps=s.pendingProps,r===null?Uc(s):Oe=r}function da(s,r,l,c){es=so=null,uh(r),ea=null,gl=0;var y=r.return;try{if(sw(s,y,r,l,Be)){vt=1,Ac(s,Yn(l,s.current)),Oe=null;return}}catch(_){if(y!==null)throw Oe=y,_;vt=1,Ac(s,Yn(l,s.current)),Oe=null;return}r.flags&32768?(Je||c===1?s=!0:aa||(Be&536870912)!==0?s=!1:(ir=s=!0,(c===2||c===9||c===3||c===6)&&(c=kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Q_(r,s)):Uc(r)}function Uc(s){var r=s;do{if((r.flags&32768)!==0){Q_(r,ir);return}s=r.return;var l=aw(r.alternate,r,cs);if(l!==null){Oe=l;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=s}while(r!==null);vt===0&&(vt=5)}function Q_(s,r){do{var l=lw(s.alternate,s);if(l!==null){l.flags&=32767,Oe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Oe=s;return}Oe=s=l}while(s!==null);vt=6,Oe=null}function W_(s,r,l,c,y,_,A,w,P){s.cancelPendingCommit=null;do Lc();while(Ut!==0);if((je&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Uf,Kt(s,l,_,A,w,P),s===ot&&(Oe=ot=null,Be=0),ua=r,or=s,ds=l,Gh=_,Jh=y,q_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Tw(Fi,function(){return tv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=le.p,le.p=2,A=je,je|=4;try{uw(s,r,l)}finally{je=A,le.p=y,W.T=c}}Ut=1,X_(),j_(),Z_()}}function X_(){if(Ut===1){Ut=0;var s=or,r=ua,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var c=le.p;le.p=2;var y=je;je|=4;try{M_(r,s);var _=op,A=Lg(s.containerInfo),w=_.focusedElem,P=_.selectionRange;if(A!==w&&w&&w.ownerDocument&&Ug(w.ownerDocument.documentElement,w)){if(P!==null&&Mf(w)){var Y=P.start,Z=P.end;if(Z===void 0&&(Z=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(Z,w.value.length);else{var ie=w.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Q=K.getSelection(),me=w.textContent.length,Se=Math.min(P.start,me),rt=P.end===void 0?Se:Math.min(P.end,me);!Q.extend&&Se>rt&&(A=rt,rt=Se,Se=A);var H=Vg(w,Se),q=Vg(w,rt);if(H&&q&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var J=ie.createRange();J.setStart(H.node,H.offset),Q.removeAllRanges(),Se>rt?(Q.addRange(J),Q.extend(q.node,q.offset)):(J.setEnd(q.node,q.offset),Q.addRange(J))}}}}for(ie=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var te=ie[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Qc=!!rp,op=rp=null}finally{je=y,le.p=c,W.T=l}}s.current=r,Ut=2}}function j_(){if(Ut===2){Ut=0;var s=or,r=ua,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var c=le.p;le.p=2;var y=je;je|=4;try{w_(s,r.alternate,r)}finally{je=y,le.p=c,W.T=l}}Ut=3}}function Z_(){if(Ut===4||Ut===3){Ut=0,Br();var s=or,r=ua,l=ds,c=q_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,ua=or=null,ev(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(rr=null),Qa(l),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Rs,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=W.T,y=le.p,le.p=2,W.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var w=c[A];_(w.value,{componentStack:w.stack})}}finally{W.T=r,le.p=y}}(ds&3)!==0&&Lc(),xi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Yh?kl++:(kl=0,Yh=s):kl=0,Pl(0)}}function ev(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,pl(r)))}function Lc(){return X_(),j_(),Z_(),tv()}function tv(){if(Ut!==5)return!1;var s=or,r=Gh;Gh=0;var l=Qa(ds),c=W.T,y=le.p;try{le.p=32>l?32:l,W.T=null,l=Jh,Jh=null;var _=or,A=ds;if(Ut=0,ua=or=null,ds=0,(je&6)!==0)throw Error(i(331));var w=je;if(je|=4,U_(_.current),k_(_,_.current,A,l),je=w,Pl(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Rs,_)}catch{}return!0}finally{le.p=y,W.T=c,ev(s,r)}}function nv(s,r,l){r=Yn(l,r),r=Ch(s.stateNode,r,2),s=Zs(s,r,2),s!==null&&(Ns(s,2),xi(s))}function nt(s,r,l){if(s.tag===3)nv(s,s,l);else for(;r!==null;){if(r.tag===3){nv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(rr===null||!rr.has(c))){s=Yn(l,s),l=i_(2),c=Zs(r,l,2),c!==null&&(s_(l,c,r,s),Ns(c,2),xi(c));break}}r=r.return}}function Qh(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new fw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Fh=!0,y.add(l),s=yw.bind(null,s,r,l),r.then(s,s))}function yw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Be&l)===l&&(vt===4||vt===3&&(Be&62914560)===Be&&300>Yt()-Mc?(je&2)===0&&ca(s,0):Hh|=l,la===Be&&(la=0)),xi(s)}function iv(s,r){r===0&&(r=Ya()),s=to(s,r),s!==null&&(Ns(s,r),xi(s))}function _w(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),iv(s,l)}function vw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),iv(s,l)}function Tw(s,r){return Bi(s,r)}var Oc=null,fa=null,Wh=!1,qc=!1,Xh=!1,lr=0;function xi(s){s!==fa&&s.next===null&&(fa===null?Oc=fa=s:fa=fa.next=s),qc=!0,Wh||(Wh=!0,Sw())}function Pl(s,r){if(!Xh&&qc){Xh=!0;do for(var l=!1,c=Oc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-fn(42|s)+1)-1,_&=y&~(A&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,av(c,_))}else _=Be,_=Hn(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||xs(c,_)||(l=!0,av(c,_));c=c.next}while(l);Xh=!1}}function Ew(){sv()}function sv(){qc=Wh=!1;var s=0;lr!==0&&Dw()&&(s=lr);for(var r=Yt(),l=null,c=Oc;c!==null;){var y=c.next,_=rv(c,r);_===0?(c.next=null,l===null?Oc=y:l.next=y,y===null&&(fa=l)):(l=c,(s!==0||(_&3)!==0)&&(qc=!0)),c=y}Ut!==0&&Ut!==5||Pl(s),lr!==0&&(lr=0)}function rv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-fn(_),w=1<<A,P=y[A];P===-1?((w&l)===0||(w&c)!==0)&&(y[A]=Do(w,r)):P<=r&&(s.expiredLanes|=w),_&=~w}if(r=ot,l=Be,l=Hn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&yi(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||xs(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&yi(c),Qa(l)){case 2:case 8:l=qt;break;case 32:l=Fi;break;case 268435456:l=Ga;break;default:l=Fi}return c=ov.bind(null,s),l=Bi(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&yi(c),s.callbackPriority=2,s.callbackNode=null,2}function ov(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Lc()&&s.callbackNode!==l)return null;var c=Be;return c=Hn(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(F_(s,c,r),rv(s,Yt()),s.callbackNode!=null&&s.callbackNode===l?ov.bind(null,s):null)}function av(s,r){if(Lc())return null;F_(s,r,!0)}function Sw(){Pw(function(){(je&6)!==0?Bi(Vt,Ew):sv()})}function jh(){if(lr===0){var s=Xo;s===0&&(s=Hr,Hr<<=1,(Hr&261888)===0&&(Hr=256)),lr=s}return lr}function lv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ai(""+s)}function uv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Aw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=lv((y[$t]||null).action),A=c.submitter;A&&(r=(r=A[$t]||null)?lv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var w=new $r("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(lr!==0){var P=A?uv(y,A):new FormData(y);_h(l,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(w.preventDefault(),P=A?uv(y,A):new FormData(y),_h(l,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var Zh=0;Zh<Vf.length;Zh++){var ep=Vf[Zh],Cw=ep.toLowerCase(),Iw=ep[0].toUpperCase()+ep.slice(1);ui(Cw,"on"+Iw)}ui(Bg,"onAnimationEnd"),ui(Fg,"onAnimationIteration"),ui(Hg,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(FI,"onTransitionRun"),ui(HI,"onTransitionStart"),ui(zI,"onTransitionCancel"),ui(zg,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function cv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var w=c[A],P=w.instance,Y=w.currentTarget;if(w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(Z){ec(Z)}y.currentTarget=null,_=P}else for(A=0;A<c.length;A++){if(w=c[A],P=w.instance,Y=w.currentTarget,w=w.listener,P!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(Z){ec(Z)}y.currentTarget=null,_=P}}}}function qe(s,r){var l=r[ks];l===void 0&&(l=r[ks]=new Set);var c=s+"__bubble";l.has(c)||(dv(r,s,2,!1),l.add(c))}function tp(s,r,l){var c=0;r&&(c|=4),dv(l,s,c,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function np(s){if(!s[Bc]){s[Bc]=!0,ko.forEach(function(l){l!=="selectionchange"&&(ww.has(l)||tp(l,!1,s),tp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,tp("selectionchange",!1,r))}}function dv(s,r,l,c){switch(Bv(r)){case 2:var y=eR;break;case 8:y=tR;break;default:y=yp}l=y.bind(null,r,l,s),y=void 0,!il||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function ip(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var P=A.tag;if((P===3||P===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=Ji(w),A===null)return;if(P=A.tag,P===5||P===6||P===26||P===27){c=_=A;continue e}w=w.parentNode}}c=c.return}Ou(function(){var Y=_,Z=Oo(l),ie=[];e:{var K=Gg.get(s);if(K!==void 0){var Q=$r,me=s;switch(s){case"keypress":if(Kr(l)===0)break e;case"keydown":case"keyup":Q=Ku;break;case"focusin":me="focus",Q=zs;break;case"focusout":me="blur",Q=zs;break;case"beforeblur":case"afterblur":Q=zs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Qu;break;case Bg:case Fg:case Hg:Q=Fo;break;case zg:Q=Ho;break;case"scroll":case"scrollend":Q=qu;break;case"wheel":Q=Xu;break;case"copy":case"cut":case"paste":Q=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ll;break;case"toggle":case"beforetoggle":Q=Js}var Se=(r&4)!==0,rt=!Se&&(s==="scroll"||s==="scrollend"),H=Se?K!==null?K+"Capture":null:K;Se=[];for(var q=Y,J;q!==null;){var te=q;if(J=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||J===null||H===null||(te=vn(q,H),te!=null&&Se.push(Ul(q,te,J))),rt)break;q=q.return}0<Se.length&&(K=new Q(K,me,null,l,Z),ie.push({event:K,listeners:Se}))}}if((r&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&l!==Lo&&(me=l.relatedTarget||l.fromElement)&&(Ji(me)||me[Ti]))break e;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(me=l.relatedTarget||l.toElement,Q=Y,me=me?Ji(me):null,me!==null&&(rt=a(me),Se=me.tag,me!==rt||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Q=null,me=Y),Q!==me)){if(Se=Bu,te="onMouseLeave",H="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Se=ll,te="onPointerLeave",H="onPointerEnter",q="pointer"),rt=Q==null?K:Gr(Q),J=me==null?K:Gr(me),K=new Se(te,q+"leave",Q,l,Z),K.target=rt,K.relatedTarget=J,te=null,Ji(Z)===Y&&(Se=new Se(H,q+"enter",me,l,Z),Se.target=J,Se.relatedTarget=rt,te=Se),rt=te,Q&&me)t:{for(Se=Rw,H=Q,q=me,J=0,te=H;te;te=Se(te))J++;te=0;for(var Te=q;Te;Te=Se(Te))te++;for(;0<J-te;)H=Se(H),J--;for(;0<te-J;)q=Se(q),te--;for(;J--;){if(H===q||q!==null&&H===q.alternate){Se=H;break t}H=Se(H),q=Se(q)}Se=null}else Se=null;Q!==null&&fv(ie,K,Q,Se,!1),me!==null&&rt!==null&&fv(ie,rt,me,Se,!0)}}e:{if(K=Y?Gr(Y):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Qe=xg;else if(Tn(K))if(Ng)Qe=OI;else{Qe=UI;var ge=VI}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&tl(Y.elementType)&&(Qe=xg):Qe=LI;if(Qe&&(Qe=Qe(s,Y))){jr(ie,Qe,l,Z);break e}ge&&ge(s,K,Y),s==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Uo(K,"number",K.value)}switch(ge=Y?Gr(Y):window,s){case"focusin":(Tn(ge)||ge.contentEditable==="true")&&(zo=ge,Df=Y,dl=null);break;case"focusout":dl=Df=zo=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,Og(ie,l,Z);break;case"selectionchange":if(BI)break;case"keydown":case"keyup":Og(ie,l,Z)}var Pe;if(E)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ve?Ze(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(z&&l.locale!=="ko"&&(Ve||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ve&&(Pe=qs()):(Nn=Z,qo="value"in Nn?Nn.value:Nn.textContent,Ve=!0)),ge=Fc(Y,Fe),0<ge.length&&(Fe=new rl(Fe,s,null,l,Z),ie.push({event:Fe,listeners:ge}),Pe?Fe.data=Pe:(Pe=wt(l),Pe!==null&&(Fe.data=Pe)))),(Pe=R?Ft(s,l):Ht(s,l))&&(Fe=Fc(Y,"onBeforeInput"),0<Fe.length&&(ge=new rl("onBeforeInput","beforeinput",null,l,Z),ie.push({event:ge,listeners:Fe}),ge.data=Pe)),Aw(ie,s,Y,l,Z)}cv(ie,r)})}function Ul(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Fc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=vn(s,l),y!=null&&c.unshift(Ul(s,y,_)),y=vn(s,r),y!=null&&c.push(Ul(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Rw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fv(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var w=l,P=w.alternate,Y=w.stateNode;if(w=w.tag,P!==null&&P===c)break;w!==5&&w!==26&&w!==27||Y===null||(P=Y,y?(Y=vn(l,_),Y!=null&&A.unshift(Ul(l,Y,P))):y||(Y=vn(l,_),Y!=null&&A.push(Ul(l,Y,P)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var bw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function hv(s){return(typeof s=="string"?s:""+s).replace(bw,`
`).replace(xw,"")}function pv(s,r){return r=hv(r),hv(s)===r}function st(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Gn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Gn(s,""+c);break;case"className":Us(s,"class",c);break;case"tabIndex":Us(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Us(s,l,c);break;case"style":Uu(s,c,_);break;case"data":if(r!=="object"){Us(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ai(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&st(s,r,"name",y.name,y,null),st(s,r,"formEncType",y.formEncType,y,null),st(s,r,"formMethod",y.formMethod,y,null),st(s,r,"formTarget",y.formTarget,y,null)):(st(s,r,"encType",y.encType,y,null),st(s,r,"method",y.method,y,null),st(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ai(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Bt);break;case"onScroll":c!=null&&qe("scroll",s);break;case"onScrollEnd":c!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ai(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Vs(s,"popover",c);break;case"xlinkActuate":zn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wf.get(l)||l,Vs(s,l,c))}}function sp(s,r,l,c,y,_){switch(l){case"style":Uu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Gn(s,c):(typeof c=="number"||typeof c=="bigint")&&Gn(s,""+c);break;case"onScroll":c!=null&&qe("scroll",s);break;case"onScrollEnd":c!=null&&qe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Bt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[$t]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Vs(s,l,c)}}}function jt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,_,A,l,null)}}y&&st(s,r,"srcSet",l.srcSet,l,null),c&&st(s,r,"src",l.src,l,null);return;case"input":qe("invalid",s);var w=_=A=y=null,P=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var Z=l[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":P=Z;break;case"defaultChecked":Y=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:st(s,r,c,Z,l,null)}}Jr(s,_,w,P,Y,A,y,!1);return;case"select":qe("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:st(s,r,y,w,l,null)}r=_,l=A,s.multiple=!!c,r!=null?$e(s,!!c,r,!1):l!=null&&$e(s,!!c,l,!0);return;case"textarea":qe("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(w=l[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:st(s,r,A,w,l,null)}Os(s,c,y,_);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(c=l[P],c!=null))switch(P){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,P,c,l,null)}return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(c=0;c<Vl.length;c++)qe(Vl[c],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,Y,c,l,null)}return;default:if(tl(r)){for(Z in l)l.hasOwnProperty(Z)&&(c=l[Z],c!==void 0&&sp(s,r,Z,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&st(s,r,w,c,l,null))}function Nw(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,w=null,P=null,Y=null,Z=null;for(Q in l){var ie=l[Q];if(l.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=ie;default:c.hasOwnProperty(Q)||st(s,r,Q,null,c,ie)}}for(var K in c){var Q=c[K];if(ie=l[K],c.hasOwnProperty(K)&&(Q!=null||ie!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":Z=Q;break;case"value":A=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ie&&st(s,r,K,Q,c,ie)}}Ls(s,A,w,P,Y,Z,_,y);return;case"select":Q=A=w=K=null;for(_ in l)if(P=l[_],l.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":Q=P;default:c.hasOwnProperty(_)||st(s,r,_,null,c,P)}for(y in c)if(_=c[y],P=l[y],c.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":A=_;default:_!==P&&st(s,r,y,_,c,P)}r=w,l=A,c=Q,K!=null?$e(s,!!l,K,!1):!!c!=!!l&&(r!=null?$e(s,!!l,r,!0):$e(s,!!l,l?[]:"",!1));return;case"textarea":Q=K=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(s,r,w,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&st(s,r,A,y,c,_)}Yr(s,K,Q);return;case"option":for(var me in l)if(K=l[me],l.hasOwnProperty(me)&&K!=null&&!c.hasOwnProperty(me))switch(me){case"selected":s.selected=!1;break;default:st(s,r,me,null,c,K)}for(P in c)if(K=c[P],Q=l[P],c.hasOwnProperty(P)&&K!==Q&&(K!=null||Q!=null))switch(P){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:st(s,r,P,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)K=l[Se],l.hasOwnProperty(Se)&&K!=null&&!c.hasOwnProperty(Se)&&st(s,r,Se,null,c,K);for(Y in c)if(K=c[Y],Q=l[Y],c.hasOwnProperty(Y)&&K!==Q&&(K!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:st(s,r,Y,K,c,Q)}return;default:if(tl(r)){for(var rt in l)K=l[rt],l.hasOwnProperty(rt)&&K!==void 0&&!c.hasOwnProperty(rt)&&sp(s,r,rt,void 0,c,K);for(Z in c)K=c[Z],Q=l[Z],!c.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||sp(s,r,Z,K,c,Q);return}}for(var H in l)K=l[H],l.hasOwnProperty(H)&&K!=null&&!c.hasOwnProperty(H)&&st(s,r,H,null,c,K);for(ie in c)K=c[ie],Q=l[ie],!c.hasOwnProperty(ie)||K===Q||K==null&&Q==null||st(s,r,ie,K,c,Q)}function mv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,w=y.duration;if(_&&w&&mv(A)){for(A=0,w=y.responseEnd,c+=1;c<l.length;c++){var P=l[c],Y=P.startTime;if(Y>w)break;var Z=P.transferSize,ie=P.initiatorType;Z&&mv(ie)&&(P=P.responseEnd,A+=Z*(P<w?1:(w-Y)/(P-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var rp=null,op=null;function Hc(s){return s.nodeType===9?s:s.ownerDocument}function gv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function ap(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lp=null;function Dw(){var s=window.event;return s&&s.type==="popstate"?s===lp?!1:(lp=s,!0):(lp=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,Pw=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(s){return vv.resolve(null).then(s).catch(Vw)}:_v;function Vw(s){setTimeout(function(){throw s})}function ur(s){return s==="head"}function Tv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),ga(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Ll(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ll(l);for(var _=l.firstChild;_;){var A=_.nextSibling,w=_.nodeName;_[Gi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&Ll(s.ownerDocument.body);l=y}while(l);ga(r)}function Ev(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function up(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":up(l),zr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Uw(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Gi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Xn(s.nextSibling),s===null)break}return null}function Lw(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Xn(s.nextSibling),s===null))return null;return s}function Sv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Xn(s.nextSibling),s===null))return null;return s}function cp(s){return s.data==="$?"||s.data==="$~"}function dp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Ow(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Xn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var fp=null;function Av(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Xn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Cv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Iv(s,r,l){switch(r=Hc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ll(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);zr(s)}var jn=new Map,wv=new Set;function zc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fs=le.d;le.d={f:qw,r:Bw,D:Fw,C:Hw,L:zw,m:Gw,X:Yw,S:Jw,M:Kw};function qw(){var s=fs.f(),r=Pc();return s||r}function Bw(s){var r=Yi(s);r!==null&&r.tag===5&&r.type==="form"?zy(r):fs.r(s)}var ha=typeof document>"u"?null:document;function Rv(s,r,l){var c=ha;if(c&&typeof r=="string"&&r){var y=yt(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),wv.has(y)||(wv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),jt(r,"link",s),St(r),c.head.appendChild(r)))}}function Fw(s){fs.D(s),Rv("dns-prefetch",s,null)}function Hw(s,r){fs.C(s,r),Rv("preconnect",s,r)}function zw(s,r,l){fs.L(s,r,l);var c=ha;if(c&&s&&r){var y='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+yt(l.imageSizes)+'"]')):y+='[href="'+yt(s)+'"]';var _=y;switch(r){case"style":_=pa(s);break;case"script":_=ma(s)}jn.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),jn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ol(_))||r==="script"&&c.querySelector(ql(_))||(r=c.createElement("link"),jt(r,"link",s),St(r),c.head.appendChild(r)))}}function Gw(s,r){fs.m(s,r);var l=ha;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yt(c)+'"][href="'+yt(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ma(s)}if(!jn.has(_)&&(s=T({rel:"modulepreload",href:s},r),jn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ql(_)))return}c=l.createElement("link"),jt(c,"link",s),St(c),l.head.appendChild(c)}}}function Jw(s,r,l){fs.S(s,r,l);var c=ha;if(c&&s){var y=ai(c).hoistableStyles,_=pa(s);r=r||"default";var A=y.get(_);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(Ol(_)))w.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=jn.get(_))&&hp(s,l);var P=A=c.createElement("link");St(P),jt(P,"link",s),P._p=new Promise(function(Y,Z){P.onload=Y,P.onerror=Z}),P.addEventListener("load",function(){w.loading|=1}),P.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(_,A)}}}function Yw(s,r){fs.X(s,r);var l=ha;if(l&&s){var c=ai(l).hoistableScripts,y=ma(s),_=c.get(y);_||(_=l.querySelector(ql(y)),_||(s=T({src:s,async:!0},r),(r=jn.get(y))&&pp(s,r),_=l.createElement("script"),St(_),jt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Kw(s,r){fs.M(s,r);var l=ha;if(l&&s){var c=ai(l).hoistableScripts,y=ma(s),_=c.get(y);_||(_=l.querySelector(ql(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=jn.get(y))&&pp(s,r),_=l.createElement("script"),St(_),jt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function bv(s,r,l,c){var y=(y=ke.current)?zc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=pa(l.href),l=ai(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=pa(l.href);var _=ai(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Ol(s)))&&!_._p&&(A.instance=_,A.state.loading=5),jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},jn.set(s,l),_||$w(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ma(l),l=ai(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function pa(s){return'href="'+yt(s)+'"'}function Ol(s){return'link[rel="stylesheet"]['+s+"]"}function xv(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function $w(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),jt(r,"link",l),St(r),s.head.appendChild(r))}function ma(s){return'[src="'+yt(s)+'"]'}function ql(s){return"script[async]"+s}function Nv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+yt(l.href)+'"]');if(c)return r.instance=c,St(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),St(c),jt(c,"style",y),Gc(c,l.precedence,s),r.instance=c;case"stylesheet":y=pa(l.href);var _=s.querySelector(Ol(y));if(_)return r.state.loading|=4,r.instance=_,St(_),_;c=xv(l),(y=jn.get(y))&&hp(c,y),_=(s.ownerDocument||s).createElement("link"),St(_);var A=_;return A._p=new Promise(function(w,P){A.onload=w,A.onerror=P}),jt(_,"link",c),r.state.loading|=4,Gc(_,l.precedence,s),r.instance=_;case"script":return _=ma(l.src),(y=s.querySelector(ql(_)))?(r.instance=y,St(y),y):(c=l,(y=jn.get(_))&&(c=T({},l),pp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),St(y),jt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Gc(c,l.precedence,s));return r.instance}function Gc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function hp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function pp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Jc=null;function Mv(s,r,l){if(Jc===null){var c=new Map,y=Jc=new Map;y.set(l,c)}else y=Jc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Gi]||_[gt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var w=c.get(A);w?w.push(_):c.set(A,[_])}}return c}function Dv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Qw(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function kv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Ww(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=pa(c.href),_=r.querySelector(Ol(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Yc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,St(_);return}_=r.ownerDocument||r,c=xv(c),(y=jn.get(y))&&hp(c,y),_=_.createElement("link"),St(_);var A=_;A._p=new Promise(function(w,P){A.onload=w,A.onerror=P}),jt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Yc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var mp=0;function Xw(s,r){return s.stylesheets&&s.count===0&&$c(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&$c(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&mp===0&&(mp=62500*Mw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&$c(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>mp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$c(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kc=null;function $c(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kc=new Map,r.forEach(jw,s),Kc=null,Yc.call(s))}function jw(s,r){if(!(r.state.loading&4)){var l=Kc.get(s);if(l)var c=l.get(null);else{l=new Map,Kc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=Yc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Bl={$$typeof:$,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function Zw(s,r,l,c,y,_,A,w,P){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Pv(s,r,l,c,y,_,A,w,P,Y,Z,ie){return s=new Zw(s,r,l,A,P,Y,Z,ie,w),r=1,_===!0&&(r|=24),_=Dn(3,null,null,r),s.current=_,_.stateNode=s,r=$f(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},jf(_),s}function Vv(s){return s?(s=Yo,s):Yo}function Uv(s,r,l,c,y,_){y=Vv(y),c.context===null?c.context=y:c.pendingContext=y,c=js(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Zs(s,c,r),l!==null&&(In(l,s,r),_l(l,s,r))}function Lv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function gp(s,r){Lv(s,r),(s=s.alternate)&&Lv(s,r)}function Ov(s){if(s.tag===13||s.tag===31){var r=to(s,67108864);r!==null&&In(r,s,67108864),gp(s,67108864)}}function qv(s){if(s.tag===13||s.tag===31){var r=Ln();r=$a(r);var l=to(s,r);l!==null&&In(l,s,r),gp(s,r)}}var Qc=!0;function eR(s,r,l,c){var y=W.T;W.T=null;var _=le.p;try{le.p=2,yp(s,r,l,c)}finally{le.p=_,W.T=y}}function tR(s,r,l,c){var y=W.T;W.T=null;var _=le.p;try{le.p=8,yp(s,r,l,c)}finally{le.p=_,W.T=y}}function yp(s,r,l,c){if(Qc){var y=_p(c);if(y===null)ip(s,r,c,Wc,l),Fv(s,c);else if(iR(y,s,r,l,c))c.stopPropagation();else if(Fv(s,c),r&4&&-1<nR.indexOf(s)){for(;y!==null;){var _=Yi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=oi(_.pendingLanes);if(A!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var P=1<<31-fn(A);w.entanglements[1]|=P,A&=~P}xi(_),(je&6)===0&&(Dc=Yt()+500,Pl(0))}}break;case 31:case 13:w=to(_,2),w!==null&&In(w,_,2),Pc(),gp(_,2)}if(_=_p(c),_===null&&ip(s,r,c,Wc,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else ip(s,r,c,null,l)}}function _p(s){return s=Oo(s),vp(s)}var Wc=null;function vp(s){if(Wc=null,s=Ji(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Wc=s,null}function Bv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xu()){case Vt:return 2;case qt:return 8;case Fi:case Nu:return 32;case Ga:return 268435456;default:return 32}default:return 32}}var Tp=!1,cr=null,dr=null,fr=null,Fl=new Map,Hl=new Map,hr=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(s,r){switch(s){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(r.pointerId)}}function zl(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Yi(r),r!==null&&Ov(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function iR(s,r,l,c,y){switch(r){case"focusin":return cr=zl(cr,s,r,l,c,y),!0;case"dragenter":return dr=zl(dr,s,r,l,c,y),!0;case"mouseover":return fr=zl(fr,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Fl.set(_,zl(Fl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Hl.set(_,zl(Hl.get(_)||null,s,r,l,c,y)),!0}return!1}function Hv(s){var r=Ji(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Du(s.priority,function(){qv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Du(s.priority,function(){qv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=_p(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Lo=c,l.target.dispatchEvent(c),Lo=null}else return r=Yi(l),r!==null&&Ov(r),s.blockedOn=l,!1;r.shift()}return!0}function zv(s,r,l){Xc(s)&&l.delete(r)}function sR(){Tp=!1,cr!==null&&Xc(cr)&&(cr=null),dr!==null&&Xc(dr)&&(dr=null),fr!==null&&Xc(fr)&&(fr=null),Fl.forEach(zv),Hl.forEach(zv)}function jc(s,r){s.blockedOn===r&&(s.blockedOn=null,Tp||(Tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,sR)))}var Zc=null;function Gv(s){Zc!==s&&(Zc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zc===s&&(Zc=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(vp(c||l)===null)continue;break}var _=Yi(l);_!==null&&(s.splice(r,3),r-=3,_h(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ga(s){function r(P){return jc(P,s)}cr!==null&&jc(cr,s),dr!==null&&jc(dr,s),fr!==null&&jc(fr,s),Fl.forEach(r),Hl.forEach(r);for(var l=0;l<hr.length;l++){var c=hr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<hr.length&&(l=hr[0],l.blockedOn===null);)Hv(l),l.blockedOn===null&&hr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[$t]||null;if(typeof _=="function")A||Gv(l);else if(A){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[$t]||null)w=A.formAction;else if(vp(y)!==null)continue}else w=A.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),Gv(l)}}}function Jv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Ep(s){this._internalRoot=s}ed.prototype.render=Ep.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Ln();Uv(l,c,s,r,null,null)},ed.prototype.unmount=Ep.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Uv(s.current,2,null,s,null,null),Pc(),r[Ti]=null}};function ed(s){this._internalRoot=s}ed.prototype.unstable_scheduleHydration=function(s){if(s){var r=zi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<hr.length&&r!==0&&r<hr[l].priority;l++);hr.splice(l,0,s),l===0&&Hv(s)}};var Yv=e.version;if(Yv!=="19.2.0")throw Error(i(527,Yv,"19.2.0"));le.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var rR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Rs=td.inject(rR),sn=td}catch{}}return Jl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=Zy,_=e_,A=t_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Pv(s,1,!1,null,null,l,c,null,y,_,A,Jv),s[Ti]=r.current,np(s),new Ep(r)},Jl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=Zy,A=e_,w=t_,P=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),r=Pv(s,1,!0,r,l??null,c,y,P,_,A,w,Jv),r.context=Vv(null),l=r.current,c=Ln(),c=$a(c),y=js(c),y.callback=null,Zs(l,y,c),l=c,r.current.lanes=l,Ns(r,l),xi(r),s[Ti]=r.current,np(s),new ed(r)},Jl.version="19.2.0",Jl}var n0;function mR(){if(n0)return Cp.exports;n0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cp.exports=pR(),Cp.exports}var gR=mR();const yR=aS(gR),_R=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,b=m&63;p||(b=64,u||(S=64)),i.push(t[v],t[T],t[S],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||T==null)throw new TR;const S=a<<2|d>>4;if(i.push(S),m!==64){const b=d<<4&240|m>>2;if(i.push(b),T!==64){const L=m<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ER=function(n){const e=lS(n);return uS.encodeByteArray(e,!0)},Ad=function(n){return ER(n).replace(/\./g,"")},cS=function(n){try{return uS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>SR().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof i0>"u")return;const n=i0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cS(n[1]);return e&&JSON.parse(e)},$d=()=>{try{return _R()||AR()||CR()||IR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dS=n=>{var e,t;return(t=(e=$d())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fS=n=>{const e=dS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},hS=()=>{var n;return(n=$d())===null||n===void 0?void 0:n.config},pS=n=>{var e;return(e=$d())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Am(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ad(JSON.stringify(t)),Ad(JSON.stringify(u)),""].join(".")}const tu={};function RR(){const n={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?n.emulator.push(e):n.prod.push(e);return n}function bR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let s0=!1;function Cm(n,e){if(typeof window>"u"||typeof document>"u"||!Pr(window.location.host)||tu[n]===e||tu[n]||s0)return;tu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=RR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{s0=!0,u()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=bR(i),b=t("text"),L=document.getElementById(b)||document.createElement("span"),F=t("learnmore"),B=document.getElementById(F)||document.createElement("a"),j=t("preprendIcon"),G=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;d($),v(B,F);const ne=m();p(G,j),$.append(G,L,B,ne),document.body.appendChild($)}a?(L.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function NR(){var n;const e=(n=$d())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PR(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VR(){return!NR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UR(){try{return typeof indexedDB=="object"}catch{return!1}}function LR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="FirebaseError";class qi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OR,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?qR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new qi(o,d,i)}}function qR(n,e){return n.replace(BR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const BR=/\{\$([^}]+)}/g;function FR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(r0(a)&&r0(u)){if(!vo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function r0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Ql(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HR(n,e){const t=new zR(n,e);return t.subscribe.bind(t)}class zR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");GR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=bp),o.error===void 0&&(o.error=bp),o.complete===void 0&&(o.complete=bp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n){return n&&n._delegate?n._delegate:n}class wr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new wR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YR(n){return n===mo?void 0:n}function KR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const QR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},WR=He.INFO,XR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},jR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=XR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Im{constructor(e){this.name=e,this._logLevel=WR,this._logHandler=jR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const ZR=(n,e)=>e.some(t=>n instanceof t);let o0,a0;function e1(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t1(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gS=new WeakMap,Fp=new WeakMap,yS=new WeakMap,xp=new WeakMap,wm=new WeakMap;function n1(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Er(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&gS.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function i1(n){if(Fp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Fp.set(n,e)}let Hp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function s1(n){Hp=n(Hp)}function r1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Np(this),e,...t);return yS.set(i,e.sort?e.sort():[e]),Er(i)}:t1().includes(n)?function(...e){return n.apply(Np(this),e),Er(gS.get(this))}:function(...e){return Er(n.apply(Np(this),e))}}function o1(n){return typeof n=="function"?r1(n):(n instanceof IDBTransaction&&i1(n),ZR(n,e1())?new Proxy(n,Hp):n)}function Er(n){if(n instanceof IDBRequest)return n1(n);if(xp.has(n))return xp.get(n);const e=o1(n);return e!==n&&(xp.set(n,e),wm.set(e,n)),e}const Np=n=>wm.get(n);function a1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Er(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Er(u.result),p.oldVersion,p.newVersion,Er(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const l1=["get","getKey","getAll","getAllKeys","count"],u1=["put","add","delete","clear"],Mp=new Map;function l0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mp.get(e))return Mp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=u1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||l1.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Mp.set(e,a),a}s1(n=>({...n,get:(e,t,i)=>l0(e,t)||n.get(e,t,i),has:(e,t)=>!!l0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function d1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zp="@firebase/app",u0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Im("@firebase/app"),f1="@firebase/app-compat",h1="@firebase/analytics-compat",p1="@firebase/analytics",m1="@firebase/app-check-compat",g1="@firebase/app-check",y1="@firebase/auth",_1="@firebase/auth-compat",v1="@firebase/database",T1="@firebase/data-connect",E1="@firebase/database-compat",S1="@firebase/functions",A1="@firebase/functions-compat",C1="@firebase/installations",I1="@firebase/installations-compat",w1="@firebase/messaging",R1="@firebase/messaging-compat",b1="@firebase/performance",x1="@firebase/performance-compat",N1="@firebase/remote-config",M1="@firebase/remote-config-compat",D1="@firebase/storage",k1="@firebase/storage-compat",P1="@firebase/firestore",V1="@firebase/ai",U1="@firebase/firestore-compat",L1="firebase",O1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="[DEFAULT]",q1={[zp]:"fire-core",[f1]:"fire-core-compat",[p1]:"fire-analytics",[h1]:"fire-analytics-compat",[g1]:"fire-app-check",[m1]:"fire-app-check-compat",[y1]:"fire-auth",[_1]:"fire-auth-compat",[v1]:"fire-rtdb",[T1]:"fire-data-connect",[E1]:"fire-rtdb-compat",[S1]:"fire-fn",[A1]:"fire-fn-compat",[C1]:"fire-iid",[I1]:"fire-iid-compat",[w1]:"fire-fcm",[R1]:"fire-fcm-compat",[b1]:"fire-perf",[x1]:"fire-perf-compat",[N1]:"fire-rc",[M1]:"fire-rc-compat",[D1]:"fire-gcs",[k1]:"fire-gcs-compat",[P1]:"fire-fst",[U1]:"fire-fst-compat",[V1]:"fire-vertex","fire-js":"fire-js",[L1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,B1=new Map,Jp=new Map;function c0(n,e){try{n.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){const e=n.name;if(Jp.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Jp.set(e,n);for(const t of Cd.values())c0(t,n);for(const t of B1.values())c0(t,n);return!0}function Qd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new _u("app","Firebase",F1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=O1;function _S(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Sr.create("bad-app-name",{appName:String(o)});if(t||(t=hS()),!t)throw Sr.create("no-options");const a=Cd.get(o);if(a){if(vo(t,a.options)&&vo(i,a.config))return a;throw Sr.create("duplicate-app",{appName:o})}const u=new $R(o);for(const p of Jp.values())u.addComponent(p);const d=new H1(t,i,u);return Cd.set(o,d),d}function Rm(n=Gp){const e=Cd.get(n);if(!e&&n===Gp&&hS())return _S();if(!e)throw Sr.create("no-app",{appName:n});return e}function Mi(n,e,t){var i;let o=(i=q1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(d.join(" "));return}To(new wr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="firebase-heartbeat-database",G1=1,uu="firebase-heartbeat-store";let Dp=null;function vS(){return Dp||(Dp=a1(z1,G1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),Dp}async function J1(n){try{const t=(await vS()).transaction(uu),i=await t.objectStore(uu).get(TS(n));return await t.done,i}catch(e){if(e instanceof qi)_s.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(t.message)}}}async function d0(n,e){try{const i=(await vS()).transaction(uu,"readwrite");await i.objectStore(uu).put(e,TS(n)),await i.done}catch(t){if(t instanceof qi)_s.warn(t.message);else{const i=Sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_s.warn(i.message)}}}function TS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=1024,K1=30;class $1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=f0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>K1){const u=X1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=f0(),{heartbeatsToSend:i,unsentEntries:o}=Q1(this._heartbeatsCache.heartbeats),a=Ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _s.warn(t),""}}}function f0(){return new Date().toISOString().substring(0,10)}function Q1(n,e=Y1){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),h0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),h0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class W1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UR()?LR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await J1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function h0(n){return Ad(JSON.stringify({version:2,heartbeats:n})).length}function X1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(n){To(new wr("platform-logger",e=>new c1(e),"PRIVATE")),To(new wr("heartbeat",e=>new $1(e),"PRIVATE")),Mi(zp,u0,n),Mi(zp,u0,"esm2017"),Mi("fire-js","")}j1("");function bm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function ES(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z1=ES,SS=new _u("auth","Firebase",ES());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Im("@firebase/auth");function eb(n,...e){Id.logLevel<=He.WARN&&Id.warn(`Auth (${wo}): ${n}`,...e)}function dd(n,...e){Id.logLevel<=He.ERROR&&Id.error(`Auth (${wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,...e){throw Nm(n,...e)}function mi(n,...e){return Nm(n,...e)}function xm(n,e,t){const i=Object.assign(Object.assign({},Z1()),{[e]:t});return new _u("auth","Firebase",i).create(e,{appName:n.name})}function gs(n){return xm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tb(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ni(n,"argument-error"),xm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return SS.create(n,...e)}function Ie(n,e,...t){if(!n)throw Nm(e,...t)}function ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function vs(n,e){n||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function nb(){return p0()==="http:"||p0()==="https:"}function p0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nb()||DR()||"connection"in navigator)?navigator.onLine:!0}function sb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=xR()||kR()}get(){return ib()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n,e){vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ab=new Tu(3e4,6e4);function Vr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ur(n,e,t,i,o={}){return CS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=vu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return MR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Pr(n.emulatorConfig.host)&&(m.credentials="include"),AS.fetch()(await IS(n,n.config.apiHost,t,d),m)})}async function CS(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},rb),e);try{const o=new ub(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw nd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw nd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw nd(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xm(n,v,m);ni(n,v)}}catch(o){if(o instanceof qi)throw o;ni(n,"network-request-failed",{message:String(o)})}}async function Eu(n,e,t,i,o={}){const a=await Ur(n,e,t,i,o);return"mfaPendingCredential"in a&&ni(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function IS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Mm(n.config,o):`${n.config.apiScheme}://${o}`;return ob.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function lb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ub{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),ab.get())})}}function nd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=mi(n,e,i);return o.customData._tokenResponse=t,o}function m0(n){return n!==void 0&&n.enterprise!==void 0}class cb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function db(n,e){return Ur(n,"GET","/v2/recaptchaConfig",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(n,e){return Ur(n,"POST","/v1/accounts:delete",e)}async function wd(n,e){return Ur(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hb(n,e=!1){const t=Jt(n),i=await t.getIdToken(e),o=Dm(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:nu(kp(o.auth_time)),issuedAtTime:nu(kp(o.iat)),expirationTime:nu(kp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function kp(n){return Number(n)*1e3}function Dm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const o=cS(t);return o?JSON.parse(o):(dd("Failed to decode base64 JWT payload"),null)}catch(o){return dd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function g0(n){const e=Dm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qi&&pb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function pb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(n){var e;const t=n.auth,i=await n.getIdToken(),o=await cu(n,wd(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?wS(a.providerUserInfo):[],d=yb(n.providerData,u),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Kp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function gb(n){const e=Jt(n);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yb(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function wS(n){return n.map(e=>{var{providerId:t}=e,i=bm(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(n,e){const t=await CS(n,{},async()=>{const i=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await IS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Pr(n.emulatorConfig.host)&&(p.credentials="include"),AS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vb(n,e){return Ur(n,"POST","/v2/accounts:revokeToken",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=g0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await _b(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Sa;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sa,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Kp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await cu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hb(this,e)}reload(){return gb(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Rd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await cu(this,fb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,m,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,B=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,j=(m=t.createdAt)!==null&&m!==void 0?m:void 0,G=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:$,emailVerified:ne,isAnonymous:ae,providerData:ue,stsTokenManager:M}=t;Ie($&&M,e,"internal-error");const x=Sa.fromJSON(this.name,M);Ie(typeof $=="string",e,"internal-error"),mr(T,e.name),mr(S,e.name),Ie(typeof ne=="boolean",e,"internal-error"),Ie(typeof ae=="boolean",e,"internal-error"),mr(b,e.name),mr(L,e.name),mr(F,e.name),mr(B,e.name),mr(j,e.name),mr(G,e.name);const N=new fi({uid:$,auth:e,email:S,emailVerified:ne,displayName:T,isAnonymous:ae,photoURL:L,phoneNumber:b,tenantId:F,stsTokenManager:x,createdAt:j,lastLoginAt:G});return ue&&Array.isArray(ue)&&(N.providerData=ue.map(V=>Object.assign({},V))),B&&(N._redirectEventId=B),N}static async _fromIdTokenResponse(e,t,i=!1){const o=new Sa;o.updateFromServerResponse(t);const a=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Rd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?wS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Sa;d.updateFromIdToken(i);const p=new fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;function ms(n){vs(n instanceof Function,"Expected a class definition");let e=y0.get(n);return e?(vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,y0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RS.type="NONE";const _0=RS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Aa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=fd(this.userKey,o.apiKey,a),this.fullPersistenceKey=fd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wd(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Aa(ms(_0),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||ms(_0);const u=fd(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const S=await wd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await fi._fromGetAccountInfoResponse(e,S,v)}else T=fi._fromJSON(e,v);m!==a&&(d=T),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Aa(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Aa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kS(e))return"Blackberry";if(PS(e))return"Webos";if(xS(e))return"Safari";if((e.includes("chrome/")||NS(e))&&!e.includes("edge/"))return"Chrome";if(DS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function bS(n=dn()){return/firefox\//i.test(n)}function xS(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NS(n=dn()){return/crios\//i.test(n)}function MS(n=dn()){return/iemobile/i.test(n)}function DS(n=dn()){return/android/i.test(n)}function kS(n=dn()){return/blackberry/i.test(n)}function PS(n=dn()){return/webos/i.test(n)}function km(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Tb(n=dn()){var e;return km(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Eb(){return PR()&&document.documentMode===10}function VS(n=dn()){return km(n)||DS(n)||PS(n)||kS(n)||/windows phone/i.test(n)||MS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n,e=[]){let t;switch(n){case"Browser":t=v0(dn());break;case"Worker":t=`${v0(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(n,e={}){return Ur(n,"GET","/v2/passwordPolicy",Vr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=6;class Ib{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Cb,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T0(this),this.idTokenSubscription=new T0(this),this.beforeStateQueue=new Sb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ms(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wd(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(gs(this));const t=e?Jt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ab(this),t=new Ib(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await vb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ms(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=US(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&eb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Lr(n){return Jt(n)}class T0{constructor(e){this.auth=e,this.observer=null,this.addObserver=HR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rb(n){Wd=n}function LS(n){return Wd.loadJS(n)}function bb(){return Wd.recaptchaEnterpriseScript}function xb(){return Wd.gapiScript}function Nb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Mb{constructor(){this.enterprise=new Db}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Db{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kb="recaptcha-enterprise",OS="NO_RECAPTCHA";class Pb{constructor(e){this.type=kb,this.auth=Lr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{db(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new cb(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;m0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(OS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mb().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&m0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=bb();p.length!==0&&(p+=d),LS(p).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function E0(n,e,t,i=!1,o=!1){const a=new Pb(n);let u;if(o)u=OS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function $p(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await E0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await E0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n,e){const t=Qd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(vo(a,e??{}))return o;ni(o,"already-initialized")}return t.initialize({options:e})}function Ub(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ms);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Lb(n,e,t){const i=Lr(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=qS(e),{host:u,port:d}=Ob(e),p=d===null?"":`:${d}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(vo(m,i.config.emulator)&&vo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Pr(u)?(Am(`${a}//${u}${p}`),Cm("Auth",!0)):qb()}function qS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ob(n){const e=qS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:S0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:S0(u)}}}function S0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function Bb(n,e){return Ur(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(n,e){return Eu(n,"POST","/v1/accounts:signInWithPassword",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n,e){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))}async function zb(n,e){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Pm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new du(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new du(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,t,"signInWithPassword",Fb);case"emailLink":return Hb(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,i,"signUpPassword",Bb);case"emailLink":return zb(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n,e){return Eu(n,"POST","/v1/accounts:signInWithIdp",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="http://localhost";class Eo extends Pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=bm(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Eo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ca(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ca(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}buildRequest(){const e={requestUri:Gb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yb(n){const e=$l(Ql(n)).link,t=e?$l(Ql(e)).deep_link_id:null,i=$l(Ql(n)).deep_link_id;return(i?$l(Ql(i)).link:null)||i||t||e||n}class Vm{constructor(e){var t,i,o,a,u,d;const p=$l(Ql(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=Jb((o=p.mode)!==null&&o!==void 0?o:null);Ie(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Yb(e);try{return new Vm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.providerId=Ua.PROVIDER_ID}static credential(e,t){return du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Vm.parseLink(t);return Ie(i,"argument-error"),du._fromEmailAndCode(e,i.code,i.tenantId)}}Ua.PROVIDER_ID="password";Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Um{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Su{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hs.credential(t,i)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Su{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Su{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _r.credential(t,i)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(n,e){return Eu(n,"POST","/v1/accounts:signUp",Vr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await fi._fromIdTokenResponse(e,i,o),u=A0(i);return new So({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=A0(i);return new So({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function A0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends qi{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new bd(e,t,i,o)}}function BS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(n,a,e,i):a})}async function $b(n,e,t=!1){const i=await cu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return So._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(n,e,t=!1){const{auth:i}=n;if(Rn(i.app))return Promise.reject(gs(i));const o="reauthenticate";try{const a=await cu(n,BS(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=Dm(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),So._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ni(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(n,e,t=!1){if(Rn(n.app))return Promise.reject(gs(n));const i="signIn",o=await BS(n,i,e),a=await So._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Wb(n,e){return FS(Lr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n){const e=Lr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Xb(n,e,t){if(Rn(n.app))return Promise.reject(gs(n));const i=Lr(n),u=await $p(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kb).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&HS(n),p}),d=await So._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function jb(n,e,t){return Rn(n.app)?Promise.reject(gs(n)):Wb(Jt(n),Ua.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&HS(n),i})}function Zb(n,e,t,i){return Jt(n).onIdTokenChanged(e,t,i)}function ex(n,e,t){return Jt(n).beforeAuthStateChanged(e,t)}function tx(n,e,t,i){return Jt(n).onAuthStateChanged(e,t,i)}function nx(n){return Jt(n).signOut()}const xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=1e3,sx=10;class GS extends zS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Eb()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},ix)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GS.type="LOCAL";const rx=GS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends zS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JS.type="SESSION";const YS=JS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Xd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),p=await ox(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const m=Lm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function lx(n){Di().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function ux(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cx(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dx(){return KS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebaseLocalStorageDb",fx=1,Nd="firebaseLocalStorage",QS="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function hx(){const n=indexedDB.deleteDatabase($S);return new Au(n).toPromise()}function Qp(){const n=indexedDB.open($S,fx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Nd,{keyPath:QS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Nd)?e(i):(i.close(),await hx(),e(await Qp()))})})}async function C0(n,e,t){const i=jd(n,!0).put({[QS]:e,value:t});return new Au(i).toPromise()}async function px(n,e){const t=jd(n,!1).get(e),i=await new Au(t).toPromise();return i===void 0?null:i.value}function I0(n,e){const t=jd(n,!0).delete(e);return new Au(t).toPromise()}const mx=800,gx=3;class WS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>gx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xd._getInstance(dx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ux(),!this.activeServiceWorker)return;this.sender=new ax(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await C0(e,xd,"1"),await I0(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>C0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>px(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>I0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=jd(o,!1).getAll();return new Au(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WS.type="LOCAL";const yx=WS;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n,e){return e?ms(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ca(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _x(n){return FS(n.auth,new Om(n),n.bypassAuthState)}function vx(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Qb(t,new Om(n),n.bypassAuthState)}async function Tx(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),$b(t,new Om(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _x;case"linkViaPopup":case"linkViaRedirect":return Tx;case"reauthViaPopup":case"reauthViaRedirect":return vx;default:ni(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Tu(2e3,1e4);async function Sx(n,e,t){if(Rn(n.app))return Promise.reject(mi(n,"operation-not-supported-in-this-environment"));const i=Lr(n);tb(n,e,Um);const o=XS(i,t);return new go(i,"signInViaPopup",e,o).executeNotNull()}class go extends jS{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ex.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="pendingRedirect",hd=new Map;class Cx extends jS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const i=await Ix(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ix(n,e){const t=bx(e),i=Rx(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function wx(n,e){hd.set(n._key(),e)}function Rx(n){return ms(n._redirectPersistence)}function bx(n){return fd(Ax,n.config.apiKey,n.name)}async function xx(n,e,t=!1){if(Rn(n.app))return Promise.reject(gs(n));const i=Lr(n),o=XS(i,e),u=await new Cx(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=600*1e3;class Mx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!ZS(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(n,e={}){return Ur(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vx=/^https?/;async function Ux(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kx(n);for(const t of e)try{if(Lx(t))return}catch{}ni(n,"unauthorized-domain")}function Lx(n){const e=Yp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!Vx.test(t))return!1;if(Px.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new Tu(3e4,6e4);function R0(){const n=Di().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qx(n){return new Promise((e,t)=>{var i,o,a;function u(){R0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R0(),t(mi(n,"network-request-failed"))},timeout:Ox.get()})}if(!((o=(i=Di().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Di().gapi)===null||a===void 0)&&a.load)u();else{const d=Nb("iframefcb");return Di()[d]=()=>{gapi.load?u():t(mi(n,"network-request-failed"))},LS(`${xb()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw pd=null,e})}let pd=null;function Bx(n){return pd=pd||qx(n),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Tu(5e3,15e3),Hx="__/auth/iframe",zx="emulator/auth/iframe",Gx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yx(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mm(e,zx):`https://${n.config.authDomain}/${Hx}`,i={apiKey:e.apiKey,appName:n.name,v:wo},o=Jx.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${vu(i).slice(1)}`}async function Kx(n){const e=await Bx(n),t=Di().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:Yx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gx,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=mi(n,"network-request-failed"),d=Di().setTimeout(()=>{a(u)},Fx.get());function p(){Di().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qx=500,Wx=600,Xx="_blank",jx="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zx(n,e,t,i=Qx,o=Wx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},$x),{width:i.toString(),height:o.toString(),top:a,left:u}),m=dn().toLowerCase();t&&(d=NS(m)?Xx:t),bS(m)&&(e=e||jx,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[b,L])=>`${S}${b}=${L},`,"");if(Tb(m)&&d!=="_self")return eN(e||"",d),new b0(null);const T=window.open(e||"",d,v);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new b0(T)}function eN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="__/auth/handler",nN="emulator/auth/handler",iN=encodeURIComponent("fac");async function x0(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:wo,eventId:o};if(e instanceof Um){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",FR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Su){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${iN}=${encodeURIComponent(p)}`:"";return`${sN(n)}?${vu(d).slice(1)}${m}`}function sN({config:n}){return n.emulator?Mm(n,nN):`https://${n.authDomain}/${tN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="webStorageSupport";class rN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YS,this._completeRedirectFn=xx,this._overrideRedirectResult=wx}async _openPopup(e,t,i,o){var a;vs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await x0(e,t,i,Yp(),o);return Zx(e,u,Lm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await x0(e,t,i,Yp(),o);return lx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(vs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Kx(e),i=new Mx(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pp,{type:Pp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Pp];u!==void 0&&t(!!u),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ux(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VS()||xS()||km()}}const oN=rN;var N0="@firebase/auth",M0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uN(n){To(new wr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:US(n)},m=new wb(i,o,a,p);return Ub(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),To(new wr("auth-internal",e=>{const t=Lr(e.getProvider("auth").getImmediate());return(i=>new aN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(N0,M0,lN(n)),Mi(N0,M0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=300,dN=pS("authIdTokenMaxAge")||cN;let D0=null;const fN=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>dN)return;const o=t==null?void 0:t.token;D0!==o&&(D0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hN(n=Rm()){const e=Qd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Vb(n,{popupRedirectResolver:oN,persistence:[yx,rx,YS]}),i=pS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=fN(a.toString());ex(t,u,()=>u(t.currentUser)),Zb(t,d=>u(d))}}const o=dS("auth");return o&&Lb(t,`http://${o}`),t}function pN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Rb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=mi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",pN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uN("Browser");var mN="firebase",gN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(mN,gN,"app");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,eA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function N(){}N.prototype=x.prototype,M.D=x.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(V,k,U){for(var D=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)D[Ke-2]=arguments[Ke];return x.prototype[k].apply(V,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,x,N){N||(N=0);var V=Array(16);if(typeof x=="string")for(var k=0;16>k;++k)V[k]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(k=0;16>k;++k)V[k]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=M.g[0],N=M.g[1],k=M.g[2];var U=M.g[3],D=x+(U^N&(k^U))+V[0]+3614090360&4294967295;x=N+(D<<7&4294967295|D>>>25),D=U+(k^x&(N^k))+V[1]+3905402710&4294967295,U=x+(D<<12&4294967295|D>>>20),D=k+(N^U&(x^N))+V[2]+606105819&4294967295,k=U+(D<<17&4294967295|D>>>15),D=N+(x^k&(U^x))+V[3]+3250441966&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(U^N&(k^U))+V[4]+4118548399&4294967295,x=N+(D<<7&4294967295|D>>>25),D=U+(k^x&(N^k))+V[5]+1200080426&4294967295,U=x+(D<<12&4294967295|D>>>20),D=k+(N^U&(x^N))+V[6]+2821735955&4294967295,k=U+(D<<17&4294967295|D>>>15),D=N+(x^k&(U^x))+V[7]+4249261313&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(U^N&(k^U))+V[8]+1770035416&4294967295,x=N+(D<<7&4294967295|D>>>25),D=U+(k^x&(N^k))+V[9]+2336552879&4294967295,U=x+(D<<12&4294967295|D>>>20),D=k+(N^U&(x^N))+V[10]+4294925233&4294967295,k=U+(D<<17&4294967295|D>>>15),D=N+(x^k&(U^x))+V[11]+2304563134&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(U^N&(k^U))+V[12]+1804603682&4294967295,x=N+(D<<7&4294967295|D>>>25),D=U+(k^x&(N^k))+V[13]+4254626195&4294967295,U=x+(D<<12&4294967295|D>>>20),D=k+(N^U&(x^N))+V[14]+2792965006&4294967295,k=U+(D<<17&4294967295|D>>>15),D=N+(x^k&(U^x))+V[15]+1236535329&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(k^U&(N^k))+V[1]+4129170786&4294967295,x=N+(D<<5&4294967295|D>>>27),D=U+(N^k&(x^N))+V[6]+3225465664&4294967295,U=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(U^x))+V[11]+643717713&4294967295,k=U+(D<<14&4294967295|D>>>18),D=N+(U^x&(k^U))+V[0]+3921069994&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^U&(N^k))+V[5]+3593408605&4294967295,x=N+(D<<5&4294967295|D>>>27),D=U+(N^k&(x^N))+V[10]+38016083&4294967295,U=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(U^x))+V[15]+3634488961&4294967295,k=U+(D<<14&4294967295|D>>>18),D=N+(U^x&(k^U))+V[4]+3889429448&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^U&(N^k))+V[9]+568446438&4294967295,x=N+(D<<5&4294967295|D>>>27),D=U+(N^k&(x^N))+V[14]+3275163606&4294967295,U=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(U^x))+V[3]+4107603335&4294967295,k=U+(D<<14&4294967295|D>>>18),D=N+(U^x&(k^U))+V[8]+1163531501&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^U&(N^k))+V[13]+2850285829&4294967295,x=N+(D<<5&4294967295|D>>>27),D=U+(N^k&(x^N))+V[2]+4243563512&4294967295,U=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(U^x))+V[7]+1735328473&4294967295,k=U+(D<<14&4294967295|D>>>18),D=N+(U^x&(k^U))+V[12]+2368359562&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(N^k^U)+V[5]+4294588738&4294967295,x=N+(D<<4&4294967295|D>>>28),D=U+(x^N^k)+V[8]+2272392833&4294967295,U=x+(D<<11&4294967295|D>>>21),D=k+(U^x^N)+V[11]+1839030562&4294967295,k=U+(D<<16&4294967295|D>>>16),D=N+(k^U^x)+V[14]+4259657740&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^U)+V[1]+2763975236&4294967295,x=N+(D<<4&4294967295|D>>>28),D=U+(x^N^k)+V[4]+1272893353&4294967295,U=x+(D<<11&4294967295|D>>>21),D=k+(U^x^N)+V[7]+4139469664&4294967295,k=U+(D<<16&4294967295|D>>>16),D=N+(k^U^x)+V[10]+3200236656&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^U)+V[13]+681279174&4294967295,x=N+(D<<4&4294967295|D>>>28),D=U+(x^N^k)+V[0]+3936430074&4294967295,U=x+(D<<11&4294967295|D>>>21),D=k+(U^x^N)+V[3]+3572445317&4294967295,k=U+(D<<16&4294967295|D>>>16),D=N+(k^U^x)+V[6]+76029189&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^U)+V[9]+3654602809&4294967295,x=N+(D<<4&4294967295|D>>>28),D=U+(x^N^k)+V[12]+3873151461&4294967295,U=x+(D<<11&4294967295|D>>>21),D=k+(U^x^N)+V[15]+530742520&4294967295,k=U+(D<<16&4294967295|D>>>16),D=N+(k^U^x)+V[2]+3299628645&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(k^(N|~U))+V[0]+4096336452&4294967295,x=N+(D<<6&4294967295|D>>>26),D=U+(N^(x|~k))+V[7]+1126891415&4294967295,U=x+(D<<10&4294967295|D>>>22),D=k+(x^(U|~N))+V[14]+2878612391&4294967295,k=U+(D<<15&4294967295|D>>>17),D=N+(U^(k|~x))+V[5]+4237533241&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~U))+V[12]+1700485571&4294967295,x=N+(D<<6&4294967295|D>>>26),D=U+(N^(x|~k))+V[3]+2399980690&4294967295,U=x+(D<<10&4294967295|D>>>22),D=k+(x^(U|~N))+V[10]+4293915773&4294967295,k=U+(D<<15&4294967295|D>>>17),D=N+(U^(k|~x))+V[1]+2240044497&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~U))+V[8]+1873313359&4294967295,x=N+(D<<6&4294967295|D>>>26),D=U+(N^(x|~k))+V[15]+4264355552&4294967295,U=x+(D<<10&4294967295|D>>>22),D=k+(x^(U|~N))+V[6]+2734768916&4294967295,k=U+(D<<15&4294967295|D>>>17),D=N+(U^(k|~x))+V[13]+1309151649&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~U))+V[4]+4149444226&4294967295,x=N+(D<<6&4294967295|D>>>26),D=U+(N^(x|~k))+V[11]+3174756917&4294967295,U=x+(D<<10&4294967295|D>>>22),D=k+(x^(U|~N))+V[2]+718787259&4294967295,k=U+(D<<15&4294967295|D>>>17),D=N+(U^(k|~x))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+U&4294967295}i.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var N=x-this.blockSize,V=this.B,k=this.h,U=0;U<x;){if(k==0)for(;U<=N;)o(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<x;)if(V[k++]=M.charCodeAt(U++),k==this.blockSize){o(this,V),k=0;break}}else for(;U<x;)if(V[k++]=M[U++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=x},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var N=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=N&255,N/=256;for(this.u(M),M=Array(16),x=N=0;4>x;++x)for(var V=0;32>V;V+=8)M[N++]=this.g[x]>>>V&255;return M};function a(M,x){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=x(M)}function u(M,x){this.h=x;for(var N=[],V=!0,k=M.length-1;0<=k;k--){var U=M[k]|0;V&&U==x||(N[k]=U,V=!1)}this.g=N}var d={};function p(M){return-128<=M&&128>M?a(M,function(x){return new u([x|0],0>x?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return T;if(0>M)return B(m(-M));for(var x=[],N=1,V=0;M>=N;V++)x[V]=M/N|0,N*=4294967296;return new u(x,0)}function v(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return B(v(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(x,8)),V=T,k=0;k<M.length;k+=8){var U=Math.min(8,M.length-k),D=parseInt(M.substring(k,k+U),x);8>U?(U=m(Math.pow(x,U)),V=V.j(U).add(m(D))):(V=V.j(N),V=V.add(m(D)))}return V}var T=p(0),S=p(1),b=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-B(this).m();for(var M=0,x=1,N=0;N<this.g.length;N++){var V=this.i(N);M+=(0<=V?V:4294967296+V)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(L(this))return"0";if(F(this))return"-"+B(this).toString(M);for(var x=m(Math.pow(M,6)),N=this,V="";;){var k=ne(N,x).g;N=j(N,k.j(x));var U=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=k,L(N))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function L(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function F(M){return M.h==-1}n.l=function(M){return M=j(this,M),F(M)?-1:L(M)?0:1};function B(M){for(var x=M.g.length,N=[],V=0;V<x;V++)N[V]=~M.g[V];return new u(N,~M.h).add(S)}n.abs=function(){return F(this)?B(this):this},n.add=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],V=0,k=0;k<=x;k++){var U=V+(this.i(k)&65535)+(M.i(k)&65535),D=(U>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);V=D>>>16,U&=65535,D&=65535,N[k]=D<<16|U}return new u(N,N[N.length-1]&-2147483648?-1:0)};function j(M,x){return M.add(B(x))}n.j=function(M){if(L(this)||L(M))return T;if(F(this))return F(M)?B(this).j(B(M)):B(B(this).j(M));if(F(M))return B(this.j(B(M)));if(0>this.l(b)&&0>M.l(b))return m(this.m()*M.m());for(var x=this.g.length+M.g.length,N=[],V=0;V<2*x;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var k=0;k<M.g.length;k++){var U=this.i(V)>>>16,D=this.i(V)&65535,Ke=M.i(k)>>>16,Re=M.i(k)&65535;N[2*V+2*k]+=D*Re,G(N,2*V+2*k),N[2*V+2*k+1]+=U*Re,G(N,2*V+2*k+1),N[2*V+2*k+1]+=D*Ke,G(N,2*V+2*k+1),N[2*V+2*k+2]+=U*Ke,G(N,2*V+2*k+2)}for(V=0;V<x;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=x;V<2*x;V++)N[V]=0;return new u(N,0)};function G(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function $(M,x){this.g=M,this.h=x}function ne(M,x){if(L(x))throw Error("division by zero");if(L(M))return new $(T,T);if(F(M))return x=ne(B(M),x),new $(B(x.g),B(x.h));if(F(x))return x=ne(M,B(x)),new $(B(x.g),x.h);if(30<M.g.length){if(F(M)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var N=S,V=x;0>=V.l(M);)N=ae(N),V=ae(V);var k=ue(N,1),U=ue(V,1);for(V=ue(V,2),N=ue(N,2);!L(V);){var D=U.add(V);0>=D.l(M)&&(k=k.add(N),U=D),V=ue(V,1),N=ue(N,1)}return x=j(M,k.j(x)),new $(k,x)}for(k=T;0<=M.l(x);){for(N=Math.max(1,Math.floor(M.m()/x.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=m(N),D=U.j(x);F(D)||0<D.l(M);)N-=V,U=m(N),D=U.j(x);L(U)&&(U=S),k=k.add(U),M=j(M,D)}return new $(k,M)}n.A=function(M){return ne(this,M).h},n.and=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)&M.i(V);return new u(N,this.h&M.h)},n.or=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)|M.i(V);return new u(N,this.h|M.h)},n.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)^M.i(V);return new u(N,this.h^M.h)};function ae(M){for(var x=M.g.length+1,N=[],V=0;V<x;V++)N[V]=M.i(V)<<1|M.i(V-1)>>>31;return new u(N,M.h)}function ue(M,x){var N=x>>5;x%=32;for(var V=M.g.length-N,k=[],U=0;U<V;U++)k[U]=0<x?M.i(U+N)>>>x|M.i(U+N+1)<<32-x:M.i(U+N);return new u(k,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,eA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ar=u}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tA,Wl,nA,md,Wp,iA,sA,rA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,I){return h==Array.prototype||h==Object.prototype||(h[E]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var E=0;E<h.length;++E){var I=h[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function o(h,E){if(E)e:{var I=i;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in I))break e;I=I[z]}h=h[h.length-1],R=I[h],E=E(R),E!=R&&E!=null&&e(I,h,{configurable:!0,writable:!0,value:E})}}function a(h,E){h instanceof String&&(h+="");var I=0,R=!1,z={next:function(){if(!R&&I<h.length){var X=I++;return{value:E(X,h[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return a(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function m(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function v(h,E,I){return h.call.apply(h.bind,arguments)}function T(h,E,I){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(E,z)}}return function(){return h.apply(E,arguments)}}function S(h,E,I){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function b(h,E){var I=Array.prototype.slice.call(arguments,1);return function(){var R=I.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function L(h,E){function I(){}I.prototype=E.prototype,h.aa=E.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(R,z,X){for(var ce=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ce[Ze-2]=arguments[Ze];return E.prototype[z].apply(R,ce)}}function F(h){const E=h.length;if(0<E){const I=Array(E);for(let R=0;R<E;R++)I[R]=h[R];return I}return[]}function B(h,E){for(let I=1;I<arguments.length;I++){const R=arguments[I];if(p(R)){const z=h.length||0,X=R.length||0;h.length=z+X;for(let ce=0;ce<X;ce++)h[z+ce]=R[ce]}else h.push(R)}}class j{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function G(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ne(h){return ne[" "](h),h}ne[" "]=function(){};var ae=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ue(h,E,I){for(const R in h)E.call(I,h[R],R,h)}function M(h,E){for(const I in h)E.call(void 0,h[I],I,h)}function x(h){const E={};for(const I in h)E[I]=h[I];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,E){let I,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(I in R)h[I]=R[I];for(let X=0;X<N.length;X++)I=N[X],Object.prototype.hasOwnProperty.call(R,I)&&(h[I]=R[I])}}function k(h){var E=1;h=h.split(":");const I=[];for(;0<E&&h.length;)I.push(h.shift()),E--;return h.length&&I.push(h.join(":")),I}function U(h){d.setTimeout(()=>{throw h},0)}function D(){var h=Ge;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class Ke{constructor(){this.h=this.g=null}add(E,I){const R=Re.get();R.set(E,I),this.h?this.h.next=R:this.g=R,this.h=R}}var Re=new j(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let le,_e=!1,Ge=new Ke,ve=()=>{const h=d.Promise.resolve(void 0);le=()=>{h.then(O)}};var O=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(I){U(I)}var E=Re;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}_e=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};d.addEventListener("test",I,E),d.removeEventListener("test",I,E)}catch{}return h})();function Ae(h,E){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(ae){e:{try{ne(E.nodeName);var z=!0;break e}catch{}z=!1}z||(E=null)}}else I=="mouseover"?E=h.fromElement:I=="mouseout"&&(E=h.toElement);this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ke[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}L(Ae,oe);var ke={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),kt=0;function at(h,E,I,R,z){this.listener=h,this.proxy=null,this.src=E,this.type=I,this.capture=!!R,this.ha=z,this.key=++kt,this.da=this.fa=!1}function qn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ii(h){this.src=h,this.g={},this.h=0}ii.prototype.add=function(h,E,I,R,z){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var ce=Is(h,E,R,z);return-1<ce?(E=h[ce],I||(E.fa=!1)):(E=new at(E,this.src,X,!!R,z),E.fa=I,h.push(E)),E};function si(h,E){var I=E.type;if(I in h.g){var R=h.g[I],z=Array.prototype.indexOf.call(R,E,void 0),X;(X=0<=z)&&Array.prototype.splice.call(R,z,1),X&&(qn(E),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Is(h,E,I,R){for(var z=0;z<h.length;++z){var X=h[z];if(!X.da&&X.listener==E&&X.capture==!!I&&X.ha==R)return z}return-1}var bn="closure_lm_"+(1e6*Math.random()|0),Ce={};function Pt(h,E,I,R,z){if(Array.isArray(E)){for(var X=0;X<E.length;X++)Pt(h,E[X],I,R,z);return null}return I=xu(I),h&&h[Le]?h.K(E,I,m(R)?!!R.capture:!1,z):Bn(h,E,I,!1,R,z)}function Bn(h,E,I,R,z,X){if(!E)throw Error("Invalid event type");var ce=m(z)?!!z.capture:!!z,Ze=Br(h);if(Ze||(h[bn]=Ze=new ii(h)),I=Ze.add(E,I,R,ce,X),I.proxy)return I;if(R=ri(),I.proxy=R,R.src=h,R.listener=I,h.addEventListener)pe||(z=ce),z===void 0&&(z=!1),h.addEventListener(E.toString(),R,z);else if(h.attachEvent)h.attachEvent(yi(E.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ri(){function h(I){return E.call(h.src,h.listener,I)}const E=qr;return h}function ws(h,E,I,R,z){if(Array.isArray(E))for(var X=0;X<E.length;X++)ws(h,E[X],I,R,z);else R=m(R)?!!R.capture:!!R,I=xu(I),h&&h[Le]?(h=h.i,E=String(E).toString(),E in h.g&&(X=h.g[E],I=Is(X,I,R,z),-1<I&&(qn(X[I]),Array.prototype.splice.call(X,I,1),X.length==0&&(delete h.g[E],h.h--)))):h&&(h=Br(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Is(E,I,R,z)),(I=-1<h?E[h]:null)&&Bi(I))}function Bi(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[Le])si(E.i,h);else{var I=h.type,R=h.proxy;E.removeEventListener?E.removeEventListener(I,R,h.capture):E.detachEvent?E.detachEvent(yi(I),R):E.addListener&&E.removeListener&&E.removeListener(R),(I=Br(E))?(si(I,h),I.h==0&&(I.src=null,E[bn]=null)):qn(h)}}}function yi(h){return h in Ce?Ce[h]:Ce[h]="on"+h}function qr(h,E){if(h.da)h=!0;else{E=new Ae(E,this);var I=h.listener,R=h.ha||h.src;h.fa&&Bi(h),h=I.call(R,E)}return h}function Br(h){return h=h[bn],h instanceof ii?h:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(h){return typeof h=="function"?h:(h[Yt]||(h[Yt]=function(E){return h.handleEvent(E)}),h[Yt])}function Vt(){ee.call(this),this.i=new ii(this),this.M=this,this.F=null}L(Vt,ee),Vt.prototype[Le]=!0,Vt.prototype.removeEventListener=function(h,E,I,R){ws(this,h,E,I,R)};function qt(h,E){var I,R=h.F;if(R)for(I=[];R;R=R.F)I.push(R);if(h=h.M,R=E.type||E,typeof E=="string")E=new oe(E,h);else if(E instanceof oe)E.target=E.target||h;else{var z=E;E=new oe(R,h),V(E,z)}if(z=!0,I)for(var X=I.length-1;0<=X;X--){var ce=E.g=I[X];z=Fi(ce,R,!0,E)&&z}if(ce=E.g=h,z=Fi(ce,R,!0,E)&&z,z=Fi(ce,R,!1,E)&&z,I)for(X=0;X<I.length;X++)ce=E.g=I[X],z=Fi(ce,R,!1,E)&&z}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var I=h.g[E],R=0;R<I.length;R++)qn(I[R]);delete h.g[E],h.h--}}this.F=null},Vt.prototype.K=function(h,E,I,R){return this.i.add(String(h),E,!1,I,R)},Vt.prototype.L=function(h,E,I,R){return this.i.add(String(h),E,!0,I,R)};function Fi(h,E,I,R){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var z=!0,X=0;X<E.length;++X){var ce=E[X];if(ce&&!ce.da&&ce.capture==I){var Ze=ce.listener,wt=ce.ha||ce.src;ce.fa&&si(h.i,ce),z=Ze.call(wt,R)!==!1&&z}}return z&&!R.defaultPrevented}function Nu(h,E,I){if(typeof h=="function")I&&(h=S(h,I));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(h,E||0)}function Ga(h){h.g=Nu(()=>{h.g=null,h.i&&(h.i=!1,Ga(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Ef extends ee{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ga(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(h){ee.call(this),this.h=h,this.g={}}L(Fr,ee);var Rs=[];function sn(h){ue(h.g,function(E,I){this.g.hasOwnProperty(I)&&Bi(E)},h),h.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),sn(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=d.JSON.stringify,fn=d.JSON.parse,Sf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ja(){}Ja.prototype.h=null;function Mu(h){return h.h||(h.h=h.i())}function Hr(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bs(){oe.call(this,"d")}L(bs,oe);function oi(){oe.call(this,"c")}L(oi,oe);var Hn={},xs=null;function Do(){return xs=xs||new Vt}Hn.La="serverreachability";function Ya(h){oe.call(this,Hn.La,h)}L(Ya,oe);function Hi(h){const E=Do();qt(E,new Ya(E))}Hn.STAT_EVENT="statevent";function Ns(h,E){oe.call(this,Hn.STAT_EVENT,h),this.stat=E}L(Ns,oe);function Kt(h){const E=Do();qt(E,new Ns(E,h))}Hn.Ma="timingevent";function Ka(h,E){oe.call(this,Hn.Ma,h),this.size=E}L(Ka,oe);function Ms(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},E)}function Ds(){this.g=!0}Ds.prototype.xa=function(){this.g=!1};function $a(h,E,I,R,z,X){h.info(function(){if(h.g)if(X)for(var ce="",Ze=X.split("&"),wt=0;wt<Ze.length;wt++){var Ve=Ze[wt].split("=");if(1<Ve.length){var Ft=Ve[0];Ve=Ve[1];var Ht=Ft.split("_");ce=2<=Ht.length&&Ht[1]=="type"?ce+(Ft+"="+Ve+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+E+`
`+I+`
`+ce})}function Qa(h,E,I,R,z,X,ce){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+E+`
`+I+`
`+X+" "+ce})}function zi(h,E,I,R){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+vi(h,I)+(R?" "+R:"")})}function Du(h,E){h.info(function(){return"TIMEOUT: "+E})}Ds.prototype.info=function(){};function vi(h,E){if(!h.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var R=I[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return Fn(I)}catch{return E}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ti;function ks(){}L(ks,Ja),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Ti=new ks;function Ei(h,E,I,R){this.j=h,this.i=E,this.l=I,this.R=R||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}var Wa={},Gi={};function zr(h,E,I){h.L=1,h.v=Yr(yt(E)),h.m=I,h.P=!0,Ji(h,null)}function Ji(h,E){h.F=Date.now(),ai(h),h.A=yt(h.v);var I=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),$i(I.i,"t",R),h.C=0,I=h.j.J,h.h=new ku,h.g=Qu(h.j,I?E:null,!h.m),0<h.O&&(h.M=new Ef(S(h.Y,h,h.g),h.O)),E=h.U,I=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Rs[0]=z.toString()),z=Rs);for(var X=0;X<z.length;X++){var ce=Pt(I,z[X],R||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),Hi(),$a(h.i,h.u,h.A,h.l,h.R,h.m)}Ei.prototype.ca=function(h){h=h.target;const E=this.M;E&&mn(h)==3?E.j():this.Y(h)},Ei.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=mn(this.g);var E=this.g.Ba();const Ys=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Qr(this.g)))){this.J||Ht!=4||E==7||(E==8||0>=Ys?Hi(3):Hi(2)),ko(this);var I=this.g.Z();this.X=I;t:if(Yi(this)){var R=Qr(this.g);h="";var z=R.length,X=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Ps(this);var ce="";break t}this.h.i=new d.TextDecoder}for(E=0;E<z;E++)this.h.h=!0,h+=this.h.i.decode(R[E],{stream:!(X&&E==z-1)});R.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=I==200,Qa(this.i,this.u,this.A,this.l,this.R,Ht,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,wt=this.g;if((Ze=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ze)){var Ve=Ze;break t}}Ve=null}if(I=Ve)zi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Si(this,I);else{this.o=!1,this.s=3,Kt(12),hn(this),Ps(this);break e}}if(this.P){I=!0;let Tn;for(;!this.J&&this.C<ce.length;)if(Tn=Gr(this,ce),Tn==Gi){Ht==4&&(this.s=4,Kt(14),I=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Wa){this.s=4,Kt(15),zi(this.i,this.l,ce,"[Invalid Chunk]"),I=!1;break}else zi(this.i,this.l,Tn,null),Si(this,Tn);if(Yi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ce.length!=0||this.h.h||(this.s=1,Kt(16),I=!1),this.o=this.o&&I,!I)zi(this.i,this.l,ce,"[Invalid Chunked Response]"),hn(this),Ps(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),al(Ft),Ft.M=!0,Kt(11))}}else zi(this.i,this.l,ce,null),Si(this,ce);Ht==4&&hn(this),this.o&&!this.J&&(Ht==4?Yu(this.j,this):(this.o=!1,ai(this)))}else Bu(this.g),I==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),hn(this),Ps(this)}}}catch{}finally{}};function Yi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Gr(h,E){var I=h.C,R=E.indexOf(`
`,I);return R==-1?Gi:(I=Number(E.substring(I,R)),isNaN(I)?Wa:(R+=1,R+I>E.length?Gi:(E=E.slice(R,R+I),h.C=R+I,E)))}Ei.prototype.cancel=function(){this.J=!0,hn(this)};function ai(h){h.S=Date.now()+h.I,St(h,h.I)}function St(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ms(S(h.ba,h),E)}function ko(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ei.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Du(this.i,this.A),this.L!=2&&(Hi(),Kt(17)),hn(this),this.s=2,Ps(this)):St(this,this.S-h)};function Ps(h){h.j.G==0||h.J||Yu(h.j,h)}function hn(h){ko(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,sn(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Si(h,E){try{var I=h.j;if(I.G!=0&&(I.g==h||Vs(I.h,h))){if(!h.K&&Vs(I.h,h)&&I.G==3){try{var R=I.Da.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Gs(I),zs(I);else break e;ol(I),Kt(18)}}else I.za=z[1],0<I.za-I.T&&37500>z[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ms(S(I.Za,I),6e3));if(1>=Pu(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Wi(I,11)}else if((h.K||I.g==h)&&Gs(I),!G(E))for(z=I.Da.g.parse(E),E=0;E<z.length;E++){let Ve=z[E];if(I.T=Ve[0],Ve=Ve[1],I.G==2)if(Ve[0]=="c"){I.K=Ve[1],I.ia=Ve[2];const Ft=Ve[3];Ft!=null&&(I.la=Ft,I.j.info("VER="+I.la));const Ht=Ve[4];Ht!=null&&(I.Aa=Ht,I.j.info("SVER="+I.Aa));const Ys=Ve[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(R=1.5*Ys,I.L=R,I.j.info("backChannelRequestTimeoutMs_="+R)),R=I;const Tn=h.g;if(Tn){const jr=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var X=R.h;X.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Us(X,X.h),X.h=null))}if(R.D){const Xi=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xi&&(R.ya=Xi,$e(R.I,R.D,Xi))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),R=I;var ce=h;if(R.qa=$u(R,R.J?R.ia:null,R.W),ce.K){zn(R.h,ce);var Ze=ce,wt=R.L;wt&&(Ze.I=wt),Ze.B&&(ko(Ze),ai(Ze)),R.g=ce}else Gu(R);0<I.i.length&&Fo(I)}else Ve[0]!="stop"&&Ve[0]!="close"||Wi(I,7);else I.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Wi(I,7):sl(I):Ve[0]!="noop"&&I.l&&I.l.ta(Ve),I.v=0)}}Hi(4)}catch{}}var Af=class{constructor(h,E){this.g=h,this.map=E}};function Xa(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ja(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pu(h){return h.h?1:h.g?h.g.size:0}function Vs(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Us(h,E){h.g?h.g.add(E):h.h=E}function zn(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Xa.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const I of h.g.values())E=E.concat(I.D);return E}return F(h.i)}function Vu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var E=[],I=h.length,R=0;R<I;R++)E.push(h[R]);return E}E=[],I=0;for(R in h)E[I++]=h[R];return E}function Cf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var E=[];h=h.length;for(var I=0;I<h;I++)E.push(I);return E}E=[],I=0;for(const R in h)E[I++]=R;return E}}}function Po(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var I=Cf(h),R=Vu(h),z=R.length,X=0;X<z;X++)E.call(void 0,R[X],I&&I[X],h)}var Za=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(h,E){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var R=h[I].indexOf("="),z=null;if(0<=R){var X=h[I].substring(0,R);z=h[I].substring(R+1)}else X=h[I];E(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ki(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ki){this.h=h.h,Ls(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var E=h.i,I=new Ai;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),Uo(this,I),this.m=h.m}else h&&(E=String(h).match(Za))?(this.h=!1,Ls(this,E[1]||"",!0),this.o=Os(E[2]||""),this.g=Os(E[3]||"",!0),Jr(this,E[4]),this.l=Os(E[5]||"",!0),Uo(this,E[6]||"",!0),this.m=Os(E[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}Ki.prototype.toString=function(){var h=[],E=this.j;E&&h.push(Gn(E,el,!0),":");var I=this.g;return(I||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Gn(E,el,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Gn(I,I.charAt(0)=="/"?tl:Uu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Gn(I,Rf)),h.join("")};function yt(h){return new Ki(h)}function Ls(h,E,I){h.j=I?Os(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Uo(h,E,I){E instanceof Ai?(h.i=E,Lu(h.i,h.h)):(I||(E=Gn(E,wf)),h.i=new Ai(E,h.h))}function $e(h,E,I){h.i.set(E,I)}function Yr(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Os(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gn(h,E,I){return typeof h=="string"?(h=encodeURI(h).replace(E,If),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function If(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var el=/[#\/\?@]/g,Uu=/[#\?:]/g,tl=/[#\?]/g,wf=/[#\?@]/g,Rf=/#/g;function Ai(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Bt(h){h.g||(h.g=new Map,h.h=0,h.i&&Vo(h.i,function(E,I){h.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=Ai.prototype,n.add=function(h,E){Bt(this),this.i=null,h=xn(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(E),this.h+=1,this};function Lo(h,E){Bt(h),E=xn(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Oo(h,E){return Bt(h),E=xn(h,E),h.g.has(E)}n.forEach=function(h,E){Bt(this),this.g.forEach(function(I,R){I.forEach(function(z){h.call(E,z,R,this)},this)},this)},n.na=function(){Bt(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let R=0;R<E.length;R++){const z=h[R];for(let X=0;X<z.length;X++)I.push(E[R])}return I},n.V=function(h){Bt(this);let E=[];if(typeof h=="string")Oo(this,h)&&(E=E.concat(this.g.get(xn(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)E=E.concat(h[I])}return E},n.set=function(h,E){return Bt(this),this.i=null,h=xn(this,h),Oo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function $i(h,E,I){Lo(h,E),0<I.length&&(h.i=null,h.g.set(xn(h,E),F(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var R=E[I];const X=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var z=X;ce[R]!==""&&(z+="="+encodeURIComponent(String(ce[R]))),h.push(z)}}return this.i=h.join("&")};function xn(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Lu(h,E){E&&!h.j&&(Bt(h),h.i=null,h.g.forEach(function(I,R){var z=R.toLowerCase();R!=z&&(Lo(this,R),$i(this,z,I))},h)),h.j=E}function nl(h,E){const I=new Ds;if(d.Image){const R=new Image;R.onload=b(vn,I,"TestLoadImage: loaded",!0,E,R),R.onerror=b(vn,I,"TestLoadImage: error",!1,E,R),R.onabort=b(vn,I,"TestLoadImage: abort",!1,E,R),R.ontimeout=b(vn,I,"TestLoadImage: timeout",!1,E,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else E(!1)}function Ou(h,E){const I=new Ds,R=new AbortController,z=setTimeout(()=>{R.abort(),vn(I,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(z),X.ok?vn(I,"TestPingServer: ok",!0,E):vn(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(z),vn(I,"TestPingServer: error",!1,E)})}function vn(h,E,I,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(I)}catch{}}function li(){this.g=new Sf}function il(h,E,I){const R=I||"";try{Po(h,function(z,X){let ce=z;m(z)&&(ce=Fn(z)),E.push(R+X+"="+encodeURIComponent(ce))})}catch(z){throw E.push(R+"type="+encodeURIComponent("_badmap")),z}}function Ci(h){this.l=h.Ub||null,this.j=h.eb||!1}L(Ci,Ja),Ci.prototype.g=function(){return new Nn(this.l,this.j)},Ci.prototype.i=(function(h){return function(){return h}})({});function Nn(h,E){Vt.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Nn,Vt),n=Nn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,qs(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Ii(this):qs(this),this.readyState==3&&qo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ii(this))},n.Qa=function(h){this.g&&(this.response=h,Ii(this))},n.ga=function(){this.g&&Ii(this)};function Ii(h){h.readyState=4,h.l=null,h.j=null,h.v=null,qs(h)}n.setRequestHeader=function(h,E){this.u.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=E.next();return h.join(`\r
`)};function qs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kr(h){let E="";return ue(h,function(I,R){E+=R,E+=":",E+=I,E+=`\r
`}),E}function Bs(h,E,I){e:{for(R in I){var R=!1;break e}R=!0}R||(I=Kr(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):$e(h,E,I))}function lt(h){Vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(lt,Vt);var rn=/^https?$/i,Qi=["POST","PUT"];n=lt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,E,I,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ti.g(),this.v=this.o?Mu(this.o):Mu(Ti),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(X){$r(this,X);return}if(h=I||"",I=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)I.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())I.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(I.keys()).find(X=>X.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Qi,E,void 0))||R||z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of I)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bo(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){$r(this,X)}};function $r(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Fs(h),Hs(h)}function Fs(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),Hs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qu(this):this.bb())},n.bb=function(){qu(this)};function qu(h){if(h.h&&typeof u<"u"&&(!h.v[1]||mn(h)!=4||h.Z()!=2)){if(h.u&&mn(h)==4)Nu(h.Ea,0,h);else if(qt(h,"readystatechange"),mn(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var R;if(R=ce===0){var z=String(h.D).match(Za)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),R=!rn.test(z?z.toLowerCase():"")}I=R}if(I)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var X=2<mn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Fs(h)}}finally{Hs(h)}}}}function Hs(h,E){if(h.g){Bo(h);const I=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||qt(h,"ready");try{I.onreadystatechange=R}catch{}}}function Bo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function mn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),fn(E)}};function Qr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bu(h){const E={};h=(h.g&&2<=mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(G(h[R]))continue;var I=k(h[R]);const z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const X=E[z]||[];E[z]=X,X.push(I)}M(E,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(h,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||E}function Fu(h){this.Aa=0,this.i=[],this.j=new Ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,h),this.cb=Wr("retryDelaySeedMs",1e4,h),this.Wa=Wr("forwardChannelMaxRetries",2,h),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Xa(h&&h.concurrentRequestLimit),this.Da=new li,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fu.prototype,n.la=8,n.G=1,n.connect=function(h,E,I,R){Kt(0),this.W=h,this.H=E||{},I&&R!==void 0&&(this.H.OSID=I,this.H.OAID=R),this.F=this.X,this.I=$u(this,null,this.W),Fo(this)};function sl(h){if(Hu(h),h.G==3){var E=h.U++,I=yt(h.I);if($e(I,"SID",h.K),$e(I,"RID",E),$e(I,"TYPE","terminate"),Xr(h,I),E=new Ei(h,h.j,E),E.L=2,E.v=Yr(yt(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=E.v,I=!0),I||(E.g=Qu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ai(E)}ll(h)}function zs(h){h.g&&(al(h),h.g.cancel(),h.g=null)}function Hu(h){zs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Gs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Fo(h){if(!ja(h.h)&&!h.s){h.s=!0;var E=h.Ga;le||ve(),_e||(le(),_e=!0),Ge.add(E,h),h.B=0}}function bf(h,E){return Pu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ms(S(h.Ga,h,E),Ku(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new Ei(this,this.j,h);let X=this.o;if(this.S&&(X?(X=x(X),V(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var R=this.i[I];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=rl(this,z,E),I=yt(this.I),$e(I,"RID",h),$e(I,"CVER",22),this.D&&$e(I,"X-HTTP-Session-Id",this.D),Xr(this,I),X&&(this.O?E="headers="+encodeURIComponent(String(Kr(X)))+"&"+E:this.m&&Bs(I,this.m,X)),Us(this.h,z),this.Ua&&$e(I,"TYPE","init"),this.P?($e(I,"$req",E),$e(I,"SID","null"),z.T=!0,zr(z,I,null)):zr(z,I,E),this.G=2}}else this.G==3&&(h?zu(this,h):this.i.length==0||ja(this.h)||zu(this))};function zu(h,E){var I;E?I=E.l:I=h.U++;const R=yt(h.I);$e(R,"SID",h.K),$e(R,"RID",I),$e(R,"AID",h.T),Xr(h,R),h.m&&h.o&&Bs(R,h.m,h.o),I=new Ei(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),E&&(h.i=E.D.concat(h.i)),E=rl(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Us(h.h,I),zr(I,R,E)}function Xr(h,E){h.H&&ue(h.H,function(I,R){$e(E,R,I)}),h.l&&Po({},function(I,R){$e(E,R,I)})}function rl(h,E,I){I=Math.min(h.i.length,I);var R=h.l?S(h.l.Na,h.l,h):null;e:{var z=h.i;let X=-1;for(;;){const ce=["count="+I];X==-1?0<I?(X=z[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let Ze=!0;for(let wt=0;wt<I;wt++){let Ve=z[wt].g;const Ft=z[wt].map;if(Ve-=X,0>Ve)X=Math.max(0,z[wt].g-100),Ze=!1;else try{il(Ft,ce,"req"+Ve+"_")}catch{R&&R(Ft)}}if(Ze){R=ce.join("&");break e}}}return h=h.i.splice(0,I),E.D=h,R}function Gu(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;le||ve(),_e||(le(),_e=!0),Ge.add(E,h),h.v=0}}function ol(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ms(S(h.Fa,h),Ku(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ms(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),zs(this),Ju(this))};function al(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ju(h){h.g=new Ei(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=yt(h.qa);$e(E,"RID","rpc"),$e(E,"SID",h.K),$e(E,"AID",h.T),$e(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(E,"TO",h.ja),$e(E,"TYPE","xmlhttp"),Xr(h,E),h.m&&h.o&&Bs(E,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Yr(yt(E)),I.m=null,I.P=!0,Ji(I,h)}n.Za=function(){this.C!=null&&(this.C=null,zs(this),ol(this),Kt(19))};function Gs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Yu(h,E){var I=null;if(h.g==E){Gs(h),al(h),h.g=null;var R=2}else if(Vs(h.h,E))I=E.D,zn(h.h,E),R=1;else return;if(h.G!=0){if(E.o)if(R==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var z=h.B;R=Do(),qt(R,new Ka(R,I)),Fo(h)}else Gu(h);else if(z=E.s,z==3||z==0&&0<E.X||!(R==1&&bf(h,E)||R==2&&ol(h)))switch(I&&0<I.length&&(E=h.h,E.i=E.i.concat(I)),z){case 1:Wi(h,5);break;case 4:Wi(h,10);break;case 3:Wi(h,6);break;default:Wi(h,2)}}}function Ku(h,E){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*E}function Wi(h,E){if(h.j.info("Error code "+E),E==2){var I=S(h.fb,h),R=h.Xa;const z=!R;R=new Ki(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ls(R,"https"),Yr(R),z?nl(R.toString(),I):Ou(R.toString(),I)}else Kt(2);h.G=0,h.l&&h.l.sa(E),ll(h),Hu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function ll(h){if(h.G=0,h.ka=[],h.l){const E=pn(h.h);(E.length!=0||h.i.length!=0)&&(B(h.ka,E),B(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function $u(h,E,I){var R=I instanceof Ki?yt(I):new Ki(I);if(R.g!="")E&&(R.g=E+"."+R.g),Jr(R,R.s);else{var z=d.location;R=z.protocol,E=E?E+"."+z.hostname:z.hostname,z=+z.port;var X=new Ki(null);R&&Ls(X,R),E&&(X.g=E),z&&Jr(X,z),I&&(X.l=I),R=X}return I=h.D,E=h.ya,I&&E&&$e(R,I,E),$e(R,"VER",h.la),Xr(h,R),R}function Qu(h,E,I){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new lt(new Ci({eb:I})):new lt(h.pa),E.Ha(h.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wu(){}n=Wu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ho(){}Ho.prototype.g=function(h,E){return new gn(h,E)};function gn(h,E){Vt.call(this),this.g=new Fu(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!G(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!G(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Js(this)}L(gn,Vt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){sl(this.g)},gn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=Fn(h),h=I);E.i.push(new Af(E.Ya++,h)),E.G==3&&Fo(E)},gn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,gn.aa.N.call(this)};function Xu(h){bs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const I in E){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}L(Xu,bs);function ju(){oi.call(this),this.status=1}L(ju,oi);function Js(h){this.g=h}L(Js,Wu),Js.prototype.ua=function(){qt(this.g,"a")},Js.prototype.ta=function(h){qt(this.g,new Xu(h))},Js.prototype.sa=function(h){qt(this.g,new ju)},Js.prototype.ra=function(){qt(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,rA=function(){return new Ho},sA=function(){return Do()},iA=Hn,Wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,md=gt,$t.COMPLETE="complete",nA=$t,Hr.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Wl=Hr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,tA=lt}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore",V0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new Im("@firebase/firestore");function ya(){return Ao.logLevel}function fe(n,...e){if(Ao.logLevel<=He.DEBUG){const t=e.map(qm);Ao.debug(`Firestore (${La}): ${n}`,...t)}}function Ts(n,...e){if(Ao.logLevel<=He.ERROR){const t=e.map(qm);Ao.error(`Firestore (${La}): ${n}`,...t)}}function Rr(n,...e){if(Ao.logLevel<=He.WARN){const t=e.map(qm);Ao.warn(`Firestore (${La}): ${n}`,...t)}}function qm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,oA(n,i,t)}function oA(n,e,t){let i=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ts(i),new Error(i)}function et(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||oA(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class _N{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vN{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new aA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class TN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new TN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=AN(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function Xp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const a=lA(),u=CN(a.encode(L0(n,t)),a.encode(L0(e,t)));return u!==0?u:Ue(i,o)}}t+=i>65535?2:1}return Ue(n.length,e.length)}function L0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function CN(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function Ma(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="__name__";class Ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Ni.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ue(e.length,t.length)}static compareSegments(e,t){const i=Ni.isNumericId(e),o=Ni.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class ft extends Ni{construct(e,t,i){return new ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const IN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ni{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return IN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O0}static keyField(){return new en([O0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ft.fromString(e))}static fromName(e){return new Ee(ft.fromString(e).popFirst(5))}static empty(){return new Ee(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wN(n,e,t,i){if(e===!0&&i===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function q0(n){if(!Ee.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B0(n){if(Ee.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Fm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Md(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Cu(n,e){if(!cA(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=-62135596800,H0=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*H0);return new ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<F0)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-F0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Dt("string",ht._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ht(0,0))}static max(){return new be(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;function RN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new ht(t+1,0):new ht(t,i));return new br(o,Ee.empty(),e)}function bN(n){return new br(n.readTime,n.key,fu)}class br{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new br(be.min(),Ee.empty(),fu)}static max(){return new br(be.max(),Ee.empty(),fu)}}function xN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==NN)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function DN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Zd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=-1;function ef(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function kN(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="";function PN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=z0(e)),e=VN(n.get(t),e);return z0(e)}function VN(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case dA:t+="";break;default:t+=a}}return t}function z0(n){return n+dA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Zt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new hi([])}unionWith(e){let t=new Ot(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hA("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const UN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=UN.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Nr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="server_timestamp",mA="__type__",gA="__previous_value__",yA="__local_write_time__";function zm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mA])===null||t===void 0?void 0:t.stringValue)===pA}function tf(n){const e=n.mapValue.fields[gA];return zm(e)?tf(e):e}function hu(n){const e=xr(n.mapValue.fields[yA].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t,i,o,a,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const kd="(default)";class pu{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="__type__",ON="__max__",rd={mapValue:{}},vA="__vector__",Pd="value";function Mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zm(n)?4:BN(n)?9007199254740991:qN(n)?10:11:we(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=Mr(n);if(t!==Mr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hu(n).isEqual(hu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=xr(o.timestampValue),d=xr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Nr(o.bytesValue).isEqual(Nr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return It(o.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return It(o.integerValue)===It(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=It(o.doubleValue),d=It(a.doubleValue);return u===d?Dd(u)===Dd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ma(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(G0(u)!==G0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Li(u[p],d[p])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function mu(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function Da(n,e){if(n===e)return 0;const t=Mr(n),i=Mr(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=It(a.integerValue||a.doubleValue),p=It(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Y0(n.timestampValue,e.timestampValue);case 4:return Y0(hu(n),hu(e));case 5:return Xp(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Nr(a),p=Nr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ue(d[m],p[m]);if(v!==0)return v}return Ue(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ue(It(a.latitude),It(u.latitude));return d!==0?d:Ue(It(a.longitude),It(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return K0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,v;const T=a.fields||{},S=u.fields||{},b=(d=T[Pd])===null||d===void 0?void 0:d.arrayValue,L=(p=S[Pd])===null||p===void 0?void 0:p.arrayValue,F=Ue(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return F!==0?F:K0(b,L)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===rd.mapValue&&u===rd.mapValue)return 0;if(a===rd.mapValue)return 1;if(u===rd.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Xp(p[T],v[T]);if(S!==0)return S;const b=Da(d[p[T]],m[v[T]]);if(b!==0)return b}return Ue(p.length,v.length)})(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function Y0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=xr(n),i=xr(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function K0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Da(t[o],i[o]);if(a)return a}return Ue(t.length,i.length)}function ka(n){return jp(n)}function jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=xr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Nr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=jp(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${jp(t.fields[u])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function gd(n){switch(Mr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return Nr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+gd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ro(i.fields,((a,u)=>{o+=a.length+gd(u)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function Zp(n){return!!n&&"integerValue"in n}function Gm(n){return!!n&&"arrayValue"in n}function $0(n){return!!n&&"nullValue"in n}function Q0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function qN(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[_A])===null||t===void 0?void 0:t.stringValue)===vA}function iu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ro(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=iu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ON}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=iu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ro(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Zn(iu(this.value))}}function TA(n){const e=[];return Ro(n.fields,((t,i)=>{const o=new en([t]);if(yd(i)){const a=TA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,be.min(),be.min(),be.min(),Zn.empty(),0)}static newFoundDocument(e,t,i,o){return new un(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new un(e,2,t,be.min(),be.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,be.min(),be.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.position=e,this.inclusive=t}}function W0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Da(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function X0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function FN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{}class Lt extends EA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new zN(e,t,i):t==="array-contains"?new YN(e,i):t==="in"?new KN(e,i):t==="not-in"?new $N(e,i):t==="array-contains-any"?new QN(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new GN(e,i):new JN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Da(t,this.value)):t!==null&&Mr(this.value)===Mr(t)&&this.matchesComparison(Da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends EA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Oi(e,t)}matches(e){return SA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function SA(n){return n.op==="and"}function AA(n){return HN(n)&&SA(n)}function HN(n){for(const e of n.filters)if(e instanceof Oi)return!1;return!0}function em(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+ka(n.value);if(AA(n))return n.filters.map((e=>em(e))).join(",");{const e=n.filters.map((t=>em(t))).join(",");return`${n.op}(${e})`}}function CA(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Li(i.value,o.value)})(n,e):n instanceof Oi?(function(i,o){return o instanceof Oi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&CA(u,o.filters[d])),!0):!1})(n,e):void we(19439)}function IA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ka(t.value)}`})(n):n instanceof Oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(IA).join(" ,")+"}"})(n):"Filter"}class zN extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class GN extends Lt{constructor(e,t){super(e,"in",t),this.keys=wA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JN extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=wA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class YN extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gm(t)&&mu(t.arrayValue,this.value)}}class KN extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mu(this.value.arrayValue,t)}}class $N extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mu(this.value.arrayValue,t)}}class QN extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>mu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function j0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new WN(n,e,t,i,o,a,u)}function Jm(n){const e=Ne(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>em(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ka(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ka(i))).join(",")),e.Pe=t}return e.Pe}function Ym(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!X0(n.startAt,e.startAt)&&X0(n.endAt,e.endAt)}function tm(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function XN(n,e,t,i,o,a,u,d){return new nf(n,e,t,i,o,a,u,d)}function RA(n){return new nf(n)}function Z0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jN(n){return n.collectionGroup!==null}function su(n){const e=Ne(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(en.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Ud(a,i))})),t.has(en.keyField().canonicalString())||e.Te.push(new Ud(en.keyField(),i))}return e.Te}function ki(n){const e=Ne(n);return e.Ie||(e.Ie=ZN(e,su(n))),e.Ie}function ZN(n,e){if(n.limitType==="F")return j0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Ud(o.field,a)}));const t=n.endAt?new Vd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vd(n.startAt.position,n.startAt.inclusive):null;return j0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function nm(n,e,t){return new nf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return Ym(ki(n),ki(e))&&n.limitType===e.limitType}function bA(n){return`${Jm(ki(n))}|lt:${n.limitType}`}function _a(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>IA(o))).join(", ")}]`),ef(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>ka(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>ka(o))).join(",")),`Target(${i})`})(ki(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of su(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const m=W0(u,d,p);return u.inclusive?m<=0:m<0})(i.startAt,su(i),o)||i.endAt&&!(function(u,d,p){const m=W0(u,d,p);return u.inclusive?m>=0:m>0})(i.endAt,su(i),o))})(n,e)}function e2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xA(n){return(e,t)=>{let i=!1;for(const o of su(n)){const a=t2(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function t2(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?Da(p,m):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return fA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new mt(Ee.comparator);function Es(){return n2}const NA=new mt(Ee.comparator);function Xl(...n){let e=NA;for(const t of n)e=e.insert(t.key,t);return e}function MA(n){let e=NA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yo(){return ru()}function DA(){return ru()}function ru(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const i2=new mt(Ee.comparator),s2=new Ot(Ee.comparator);function ze(...n){let e=s2;for(const t of n)e=e.add(t);return e}const r2=new Ot(Ue);function o2(){return r2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function kA(n){return{integerValue:""+n}}function a2(n,e){return kN(e)?kA(e):Km(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function l2(n,e,t){return n instanceof Ld?(function(o,a){const u={fields:{[mA]:{stringValue:pA},[yA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&zm(a)&&(a=tf(a)),a&&(u.fields[gA]=a),{mapValue:u}})(t,e):n instanceof gu?VA(n,e):n instanceof yu?UA(n,e):(function(o,a){const u=PA(o,a),d=eT(u)+eT(o.Ee);return Zp(u)&&Zp(o.Ee)?kA(d):Km(o.serializer,d)})(n,e)}function u2(n,e,t){return n instanceof gu?VA(n,e):n instanceof yu?UA(n,e):t}function PA(n,e){return n instanceof Od?(function(i){return Zp(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ld extends of{}class gu extends of{constructor(e){super(),this.elements=e}}function VA(n,e){const t=LA(e);for(const i of n.elements)t.some((o=>Li(o,i)))||t.push(i);return{arrayValue:{values:t}}}class yu extends of{constructor(e){super(),this.elements=e}}function UA(n,e){let t=LA(e);for(const i of n.elements)t=t.filter((o=>!Li(o,i)));return{arrayValue:{values:t}}}class Od extends of{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function eT(n){return It(n.integerValue||n.doubleValue)}function LA(n){return Gm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function c2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof gu&&o instanceof gu||i instanceof yu&&o instanceof yu?Ma(i.elements,o.elements,Li):i instanceof Od&&o instanceof Od?Li(i.Ee,o.Ee):i instanceof Ld&&o instanceof Ld})(n.transform,e.transform)}class d2{constructor(e,t){this.version=e,this.transformResults=t}}class ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class af{}function OA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BA(n.key,ys.none()):new Iu(n.key,n.data,ys.none());{const t=n.data,i=Zn.empty();let o=new Ot(en.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new xo(n.key,i,new hi(o.toArray()),ys.none())}}function f2(n,e,t){n instanceof Iu?(function(o,a,u){const d=o.value.clone(),p=nT(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof xo?(function(o,a,u){if(!_d(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=nT(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(qA(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ou(n,e,t,i){return n instanceof Iu?(function(a,u,d,p){if(!_d(a.precondition,u))return d;const m=a.value.clone(),v=iT(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof xo?(function(a,u,d,p){if(!_d(a.precondition,u))return d;const m=iT(a.fieldTransforms,p,u),v=u.data;return v.setAll(qA(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return _d(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function h2(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=PA(i.transform,o||null);a!=null&&(t===null&&(t=Zn.empty()),t.set(i.field,a))}return t||null}function tT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ma(i,o,((a,u)=>c2(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends af{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xo extends af{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function nT(n,e,t){const i=new Map;et(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,u2(u,d,t[o]))}return i}function iT(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,l2(a,u,e))}return i}class BA extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p2 extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&f2(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ou(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=DA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=OA(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,((t,i)=>tT(t,i)))&&Ma(this.baseMutations,e.baseMutations,((t,i)=>tT(t,i)))}}class $m{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){et(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return i2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new $m(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Ye;function _2(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function FA(n){if(n===void 0)return Ts("GRPC error has no .code"),re.UNKNOWN;switch(n){case Mt.OK:return re.OK;case Mt.CANCELLED:return re.CANCELLED;case Mt.UNKNOWN:return re.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return re.INTERNAL;case Mt.UNAVAILABLE:return re.UNAVAILABLE;case Mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mt.NOT_FOUND:return re.NOT_FOUND;case Mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mt.ABORTED:return re.ABORTED;case Mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Mt||(Mt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Ar([4294967295,4294967295],0);function sT(n){const e=lA().encode(n),t=new eA;return t.update(e),new Uint8Array(t.digest())}function rT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ar([t,i],0),new Ar([o,a],0)]}class Qm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new jl(`Invalid padding: ${t}`);if(i<0)throw new jl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new jl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ar.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ar.fromNumber(i)));return o.compare(v2)===1&&(o=new Ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=sT(e),[i,o]=rT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Qm(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=sT(e),[i,o]=rT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new lf(be.min(),o,new mt(Ue),Es(),ze())}}class wu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wu(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class HA{constructor(e,t){this.targetId=e,this.De=t}}class zA{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class oT{constructor(){this.ve=0,this.Ce=aT(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),i=ze();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:a})}})),new wu(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=aT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class T2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Es(),this.je=od(),this.Je=od(),this.He=new mt(Ue)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(tm(a))if(i===0){const u=new Ee(a.path);this.Xe(t,u,un.newNoDocument(u,be.min()))}else et(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Nr(i).toUint8Array()}catch(p){if(p instanceof hA)return Rr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Qm(u,o,a)}catch(p){return Rr(p instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&tm(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,un.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=ze();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new lf(e,t,this.He,this.ze,i);return this.ze=Es(),this.je=od(),this.Je=od(),this.He=new mt(Ue),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new oT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Ue),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new oT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function od(){return new mt(Ee.comparator)}function aT(){return new mt(Ee.comparator)}const E2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A2={and:"AND",or:"OR"};class C2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function im(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function qd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I2(n,e){return qd(n,e.toTimestamp())}function Pi(n){return et(!!n,49232),be.fromTimestamp((function(t){const i=xr(t);return new ht(i.seconds,i.nanos)})(n))}function Wm(n,e){return sm(n,e).canonicalString()}function sm(n,e){const t=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JA(n){const e=ft.fromString(n);return et(WA(e),10190,{key:e.toString()}),e}function rm(n,e){return Wm(n.databaseId,e.path)}function Vp(n,e){const t=JA(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(KA(t))}function YA(n,e){return Wm(n.databaseId,e)}function w2(n){const e=JA(n);return e.length===4?ft.emptyPath():KA(e)}function om(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KA(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lT(n,e,t){return{name:rm(n,e),fields:t.value.mapValue.fields}}function R2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:we(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(et(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(et(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:FA(m.code);return new ye(v,m.message||"")})(u);t=new zA(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Vp(n,i.document.name),a=Pi(i.document.updateTime),u=i.document.createTime?Pi(i.document.createTime):be.min(),d=new Zn({mapValue:{fields:i.document.fields}}),p=un.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new vd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Vp(n,i.document),a=i.readTime?Pi(i.readTime):be.min(),u=un.newNoDocument(o,a),d=i.removedTargetIds||[];t=new vd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Vp(n,i.document),a=i.removedTargetIds||[];t=new vd([],a,o,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new y2(o,a),d=i.targetId;t=new HA(d,u)}}return t}function b2(n,e){let t;if(e instanceof Iu)t={update:lT(n,e.key,e.value)};else if(e instanceof BA)t={delete:rm(n,e.key)};else if(e instanceof xo)t={update:lT(n,e.key,e.data),updateMask:L2(e.fieldMask)};else{if(!(e instanceof p2))return we(16599,{Rt:e.type});t={verify:rm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Ld)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof gu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof yu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Od)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:I2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)})(n,e.precondition)),t}function x2(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Pi(o.updateTime):Pi(a);return u.isEqual(be.min())&&(u=Pi(a)),new d2(u,o.transformResults||[])})(t,e)))):[]}function N2(n,e){return{documents:[YA(n,e.path)]}}function M2(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=YA(n,o);const a=(function(m){if(m.length!==0)return QA(Oi.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:va(S.field),direction:P2(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=im(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function D2(n){let e=w2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){et(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=$A(T);return S instanceof Oi&&AA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(L){return new Ud(Ta(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,ef(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,b=T.values||[];return new Vd(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,b=T.values||[];return new Vd(b,S)})(t.endAt)),XN(e,o,u,a,d,"F",p,m)}function k2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $A(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ta(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ta(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ta(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ta(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(Ta(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Oi.create(t.compositeFilter.filters.map((i=>$A(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function P2(n){return E2[n]}function V2(n){return S2[n]}function U2(n){return A2[n]}function va(n){return{fieldPath:n.canonicalString()}}function Ta(n){return en.fromServerFormat(n.fieldPath)}function QA(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(Q0(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NAN"}};if($0(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Q0(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NAN"}};if($0(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(t.field),op:V2(t.op),value:t.value}}})(n):n instanceof Oi?(function(t){const i=t.getFilters().map((o=>QA(o)));return i.length===1?i[0]:{compositeFilter:{op:U2(t.op),filters:i}}})(n):we(54877,{filter:n})}function L2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,i,o,a=be.min(),u=be.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.gt=e}}function q2(n){const e=D2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.Dn=new F2}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(br.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(br.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class F2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(ft.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XA=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(XA,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Pa(0)}static ur(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="LruGarbageCollector",H2=1048576;function dT([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class z2{constructor(e){this.Tr=e,this.buffer=new Ot(dT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(cT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qa(t)?fe(cT,"Ignoring IndexedDB error during garbage collection: ",t):await Oa(t)}await this.Rr(3e5)}))}}class J2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Zd.ue);const i=new z2(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(uT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uT):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(m=Date.now(),ya()<=He.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function Y2(n,e){return new J2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ou(i.mutation,o,hi.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const o=yo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=Xl();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=yo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Es();const u=ru(),d=(function(){return ru()})();return t.forEach(((p,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof xo)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),ou(v.mutation,m,v.mutation.getFieldMask(),ht.now())):u.set(m.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var T;return d.set(m,new $2(v,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=ru();let o=new mt(((u,d)=>u-d)),a=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=i.get(p)||hi.empty();v=d.applyToLocalView(m,v),i.set(p,v);const T=(o.get(d.batchId)||ze()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,T=DA();v.forEach((S=>{if(!a.has(S)){const b=OA(t.get(S),i.get(S));b!==null&&T.set(S,b),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(yo());let d=fu,p=a;return u.next((m=>se.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,ze()))).next((v=>({batchId:d,changes:MA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=Xl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=Xl();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const m=(function(T,S){return new nf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,un.newInvalidDocument(v)))}));let d=Xl();return u.forEach(((p,m)=>{const v=a.get(p);v!==void 0&&ou(v.mutation,m,hi.empty(),ht.now()),rf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Pi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:q2(o.bundledQuery),readTime:Pi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.overlays=new mt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yo();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=yo(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=yo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=yo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new g2(t,i));let a=this.kr.get(t);a===void 0&&(a=ze(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.qr=new Ot(Gt.Qr),this.$r=new Ot(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Gt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ee(new ft([])),i=new Gt(t,e),o=new Gt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new ft([])),i=new Gt(t,e),o=new Gt(t,e+1);let a=ze();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Gt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot(Gt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new m2(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Gt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Hm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Ue);return t.forEach((o=>{const a=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new Gt(new Ee(a),0);let d=new Ot(Ue);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,(o=>{const a=new Gt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Gt(t,0),o=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.ni=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=Es();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():un.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Es();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||xN(bN(v),i)<=0||(o.has(v.key)||rf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ri(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new tM(this)}getSize(e){return se.resolve(this.size)}}class tM extends K2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.persistence=e,this.ii=new bo((t=>Jm(t)),Ym),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new Xm,this.targetCount=0,this._i=Pa.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Pa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zd(0),this.ci=!1,this.ci=!0,this.li=new j2,this.referenceDelegate=e(this),this.hi=new nM(this),this.indexManager=new B2,this.remoteDocumentCache=(function(o){return new eM(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new O2(t),this.Ti=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new Z2(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new iM(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class iM extends MN{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Ai=new Xm,this.Ri=null}static Vi(e){return new jm(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(i=>{const o=Ee.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.gi=new bo((i=>PN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=Y2(this,t)}static Vi(e,t){return new Bd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,be.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=ze(),o=ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Zm(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return VR()?8:DN(dn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new sM;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ya()<=He.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",_a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(ya()<=He.DEBUG&&fe("QueryEngine","Query:",_a(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ya()<=He.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",_a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):se.resolve())}ps(e,t){if(Z0(t))return se.resolve(null);let i=ki(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=nm(t,null,"F"),i=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=ze(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,nm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,i,o){return Z0(t)||o.isEqual(be.min())?se.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?se.resolve(null):(ya()<=He.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_a(t)),this.vs(e,u,t,RN(o,fu)).next((d=>d)))}))}bs(e,t){let i=new Ot(xA(e));return t.forEach(((o,a)=>{rf(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return ya()<=He.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",_a(t)),this.gs.getDocumentsMatchingQuery(e,t,br.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="LocalStore",oM=3e8;class aM{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Ue),this.Ms=new bo((a=>Jm(a)),Ym),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function lM(n,e,t,i){return new aM(n,e,t,i)}async function ZA(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=ze();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function uM(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const T=m.batch,S=T.keys();let b=se.resolve();return S.forEach((L=>{b=b.next((()=>v.getEntry(p,L))).next((F=>{const B=m.docVersions.get(L);et(B!==null,48541),F.version.compareTo(B)<0&&(T.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),v.addEntry(F)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function eC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function cM(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,T))));let b=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,i)),o=o.insert(T,b),(function(F,B,j){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=oM?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(S,b,v)&&d.push(t.hi.updateTargetData(a,b))}));let p=Es(),m=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(dM(a,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!i.isEqual(be.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function dM(n,e,t){let i=ze(),o=ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Es();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):fe(eg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function fM(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hM(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new Tr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function am(n,e,t){const i=Ne(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!qa(u))throw u;fe(eg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function fT(n,e,t){const i=Ne(n);let o=be.min(),a=ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const T=Ne(p),S=T.Ms.get(v);return S!==void 0?se.resolve(T.Fs.get(S)):T.hi.getTargetData(m,v)})(i,u,ki(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:ze()))).next((d=>(pM(i,e2(e),d),{documents:d,qs:a})))))}function pM(n,e,t){let i=n.xs.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class hT{constructor(){this.activeTargetIds=o2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mM{constructor(){this.Fo=new hT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new hT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="ConnectivityMonitor";class mT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(pT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(pT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function lm(){return ad===null?ad=(function(){return 268435456+Math.round(2147483648*Math.random())})():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",yM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _M{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===kd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=lm(),d=this.Go(e,t.toUriEncodedString());fe(Up,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),v=Pr(m);return this.jo(e,d,p,i,v).then((T=>(fe(Up,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Rr(Up,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+La})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=yM[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class TM extends _M{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=lm();return new Promise(((d,p)=>{const m=new tA;m.setWithCredentials(!0),m.listenOnce(nA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case md.NO_ERROR:const T=m.getResponseJson();fe(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case md.TIMEOUT:fe(an,`RPC '${e}' ${u} timed out`),p(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const S=m.getStatus();if(fe(an,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const L=b==null?void 0:b.error;if(L&&L.status&&L.message){const F=(function(j){const G=j.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(G)>=0?G:re.UNKNOWN})(L.status);p(new ye(F,L.message))}else p(new ye(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ye(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{fe(an,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);fe(an,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=lm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rA(),d=sA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");fe(an,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=u.createWebChannel(v,p);this.T_(T);let S=!1,b=!1;const L=new vM({Ho:B=>{b?fe(an,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(fe(an,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),fe(an,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Yo:()=>T.close()}),F=(B,j,G)=>{B.listen(j,($=>{try{G($)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return F(T,Wl.EventType.OPEN,(()=>{b||(fe(an,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),F(T,Wl.EventType.CLOSE,(()=>{b||(b=!0,fe(an,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(T))})),F(T,Wl.EventType.ERROR,(B=>{b||(b=!0,Rr(an,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),L.__(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),F(T,Wl.EventType.MESSAGE,(B=>{var j;if(!b){const G=B.data[0];et(!!G,16349);const $=G,ne=($==null?void 0:$.error)||((j=$[0])===null||j===void 0?void 0:j.error);if(ne){fe(an,`RPC '${e}' stream ${o} received error:`,ne);const ae=ne.status;let ue=(function(N){const V=Mt[N];if(V!==void 0)return FA(V)})(ae),M=ne.message;ue===void 0&&(ue=re.INTERNAL,M="Unknown error status: "+ae+" with message "+ne.message),b=!0,L.__(new ye(ue,M)),T.close()}else fe(an,`RPC '${e}' stream ${o} received:`,G),L.a_(G)}})),F(d,iA.STAT_EVENT,(B=>{B.stat===Wp.PROXY?fe(an,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Wp.NOPROXY&&fe(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return new C2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="PersistentStream";class nC{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Ts(t.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ye(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return fe(gT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(fe(gT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EM extends nC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=R2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Pi(u.readTime):be.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=om(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=tm(p)?{documents:N2(a,p)}:{query:M2(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=GA(a,u.resumeToken);const m=im(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=qd(a,u.snapshotVersion.toTimestamp());const m=im(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=k2(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=om(this.serializer),t.removeTarget=e,this.k_(t)}}class SM extends nC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=x2(e.writeResults,e.commitTime),i=Pi(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=om(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>b2(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{}class CM extends AM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,sm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(re.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,sm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class IM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ts(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="RemoteStore";class wM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{No(this)&&(fe(Co,"Restarting streams for network reachability change."),await(async function(p){const m=Ne(p);m.Ia.add(4),await Ru(m),m.Aa.set("Unknown"),m.Ia.delete(4),await cf(m)})(this))}))})),this.Aa=new IM(i,o)}}async function cf(n){if(No(n))for(const e of n.da)await e(!0)}async function Ru(n){for(const e of n.da)await e(!1)}function iC(n,e){const t=Ne(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),sg(t)?ig(t):Ba(t).x_()&&ng(t,e))}function tg(n,e){const t=Ne(n),i=Ba(t);t.Ta.delete(e),i.x_()&&sC(t,e),t.Ta.size===0&&(i.x_()?i.B_():No(t)&&t.Aa.set("Unknown"))}function ng(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ba(n).H_(e)}function sC(n,e){n.Ra.$e(e),Ba(n).Y_(e)}function ig(n){n.Ra=new T2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ba(n).start(),n.Aa.aa()}function sg(n){return No(n)&&!Ba(n).M_()&&n.Ta.size>0}function No(n){return Ne(n).Ia.size===0}function rC(n){n.Ra=void 0}async function RM(n){n.Aa.set("Online")}async function bM(n){n.Ta.forEach(((e,t)=>{ng(n,e)}))}async function xM(n,e){rC(n),sg(n)?(n.Aa.la(e),ig(n)):n.Aa.set("Unknown")}async function NM(n,e,t){if(n.Aa.set("Online"),e instanceof zA&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){fe(Co,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(n,i)}else if(e instanceof vd?n.Ra.Ye(e):e instanceof HA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(be.min()))try{const i=await eC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=a.Ta.get(p);if(!v)return;a.Ta.set(p,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),sC(a,p);const T=new Tr(v.target,p,m,v.sequenceNumber);ng(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){fe(Co,"Failed to raise snapshot:",i),await Fd(n,i)}}async function Fd(n,e,t){if(!qa(e))throw e;n.Ia.add(1),await Ru(n),n.Aa.set("Offline"),t||(t=()=>eC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(Co,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await cf(n)}))}function oC(n,e){return e().catch((t=>Fd(n,t,e)))}async function df(n){const e=Ne(n),t=Dr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hm;for(;MM(e);)try{const o=await fM(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,DM(e,o)}catch(o){await Fd(e,o)}aC(e)&&lC(e)}function MM(n){return No(n)&&n.Pa.length<10}function DM(n,e){n.Pa.push(e);const t=Dr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function aC(n){return No(n)&&!Dr(n).M_()&&n.Pa.length>0}function lC(n){Dr(n).start()}async function kM(n){Dr(n).na()}async function PM(n){const e=Dr(n);for(const t of n.Pa)e.X_(t.mutations)}async function VM(n,e,t){const i=n.Pa.shift(),o=$m.from(i,e,t);await oC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await df(n)}async function UM(n,e){e&&Dr(n).Z_&&await(async function(i,o){if((function(u){return _2(u)&&u!==re.ABORTED})(o.code)){const a=i.Pa.shift();Dr(i).N_(),await oC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await df(i)}})(n,e),aC(n)&&lC(n)}async function yT(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),fe(Co,"RemoteStore received new credentials");const i=No(t);t.Ia.add(3),await Ru(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await cf(t)}async function LM(n,e){const t=Ne(n);e?(t.Ia.delete(2),await cf(t)):e||(t.Ia.add(2),await Ru(t),t.Aa.set("Unknown"))}function Ba(n){return n.Va||(n.Va=(function(t,i,o){const a=Ne(t);return a.ia(),new EM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:RM.bind(null,n),e_:bM.bind(null,n),n_:xM.bind(null,n),J_:NM.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),sg(n)?ig(n):n.Aa.set("Unknown")):(await n.Va.stop(),rC(n))}))),n.Va}function Dr(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.ia(),new SM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:kM.bind(null,n),n_:UM.bind(null,n),ea:PM.bind(null,n),ta:VM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await df(n)):(await n.ma.stop(),n.Pa.length>0&&(fe(Co,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new rg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(n,e){if(Ts("AsyncQueue",`${e}: ${n}`),qa(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{static emptySet(e){return new Ia(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Xl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ia;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.fa=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Va{constructor(e,t,i,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Va(e,t,Ia.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class qM{constructor(){this.queries=vT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=vT(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function vT(){return new bo((n=>bA(n)),sf)}async function BM(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new OM,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=og(u,`Initialization of query '${_a(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&ag(t)}async function FM(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function HM(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&ag(t)}function zM(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function ag(n){n.Da.forEach((e=>{e.next()}))}var um,TT;(TT=um||(um={})).Fa="default",TT.Cache="cache";class GM{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.key=e}}class cC{constructor(e){this.key=e}}class JM{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=xA(e),this.eu=new Ia(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new _T,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),b=rf(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),F=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let B=!1;S&&b?S.data.isEqual(b.data)?L!==F&&(i.track({type:3,doc:b}),B=!0):this.iu(S,b)||(i.track({type:2,doc:b}),B=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(d=!0)):!S&&b?(i.track({type:0,doc:b}),B=!0):S&&!b&&(i.track({type:1,doc:S}),B=!0,(p||m)&&(d=!0)),B&&(b?(u=u.add(b),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,T)=>(function(b,L){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:B})}};return F(b)-F(L)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new Va(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new _T,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new cC(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new uC(i))})),t}uu(e){this.Ha=e.qs,this.Za=ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Va.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const lg="SyncEngine";class YM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KM{constructor(e){this.key=e,this.lu=!1}}class $M{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new bo((d=>bA(d)),sf),this.Tu=new Map,this.Iu=new Set,this.du=new mt(Ee.comparator),this.Eu=new Map,this.Au=new Xm,this.Ru={},this.Vu=new Map,this.mu=Pa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QM(n,e,t=!0){const i=gC(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await dC(i,e,t,!0),o}async function WM(n,e){const t=gC(n);await dC(t,e,!0,!1)}async function dC(n,e,t,i){const o=await hM(n.localStore,ki(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await XM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&iC(n.remoteStore,o),d}async function XM(n,e,t,i,o){n.gu=(T,S,b)=>(async function(F,B,j,G){let $=B.view.nu(j);$.Ds&&($=await fT(F.localStore,B.query,!1).then((({documents:M})=>B.view.nu(M,$))));const ne=G&&G.targetChanges.get(B.targetId),ae=G&&G.targetMismatches.get(B.targetId)!=null,ue=B.view.applyChanges($,F.isPrimaryClient,ne,ae);return ST(F,B.targetId,ue._u),ue.snapshot})(n,T,S,b);const a=await fT(n.localStore,e,!0),u=new JM(e,a.qs),d=u.nu(a.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);ST(n,t,m._u);const v=new YM(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function jM(n,e,t){const i=Ne(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!sf(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await am(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&tg(i.remoteStore,o.targetId),cm(i,o.targetId)})).catch(Oa)):(cm(i,o.targetId),await am(i.localStore,o.targetId,!0))}async function ZM(n,e){const t=Ne(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),tg(t.remoteStore,i.targetId))}async function eD(n,e,t){const i=aD(n);try{const o=await(function(u,d){const p=Ne(u),m=ht.now(),v=d.reduce(((b,L)=>b.add(L.key)),ze());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let L=Es(),F=ze();return p.Os.getEntries(b,v).next((B=>{L=B,L.forEach(((j,G)=>{G.isValidDocument()||(F=F.add(j))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,L))).next((B=>{T=B;const j=[];for(const G of d){const $=h2(G,T.get(G.key).overlayedDocument);$!=null&&j.push(new xo(G.key,$,TA($.value.mapValue),ys.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,j,d)})).next((B=>{S=B;const j=B.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(b,B.batchId,j)}))})).then((()=>({batchId:S.batchId,changes:MA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new mt(Ue)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await bu(i,o.changes),await df(i.remoteStore)}catch(o){const a=og(o,"Failed to persist write");t.reject(a)}}async function fC(n,e){const t=Ne(n);try{const i=await cM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?et(u.lu,14607):o.removedDocuments.size>0&&(et(u.lu,42227),u.lu=!1))})),await bu(t,i,e)}catch(i){await Oa(i)}}function ET(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ne(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.wa)S.va(d)&&(m=!0)})),m&&ag(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tD(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new mt(Ee.comparator);u=u.insert(a,un.newNoDocument(a,be.min()));const d=ze().add(a),p=new lf(be.min(),new Map,new mt(Ue),u,d);await fC(i,p),i.du=i.du.remove(a),i.Eu.delete(e),ug(i)}else await am(i.localStore,e,!1).then((()=>cm(i,e,t))).catch(Oa)}async function nD(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await uM(t.localStore,e);pC(t,i,null),hC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await bu(t,o)}catch(o){await Oa(o)}}async function iD(n,e,t){const i=Ne(n);try{const o=await(function(u,d){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((T=>(et(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);pC(i,e,t),hC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await bu(i,o)}catch(o){await Oa(o)}}function hC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function pC(n,e,t){const i=Ne(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function cm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||mC(n,i)}))}function mC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ug(n))}function ST(n,e,t){for(const i of t)i instanceof uC?(n.Au.addReference(i.key,e),sD(n,i)):i instanceof cC?(fe(lg,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||mC(n,i.key)):we(19791,{yu:i})}function sD(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(fe(lg,"New document in limbo: "+t),n.Iu.add(i),ug(n))}function ug(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(ft.fromString(e)),i=n.mu.next();n.Eu.set(i,new KM(t)),n.du=n.du.insert(t,i),iC(n.remoteStore,new Tr(ki(RA(t.path)),i,"TargetPurposeLimboResolution",Zd.ue))}}async function bu(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){o.push(m);const T=Zm.Es(p.targetId,m);a.push(T)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,m){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Is,(b=>v.persistence.referenceDelegate.addReference(T,S.targetId,b))).next((()=>se.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(T,S.targetId,b)))))))))}catch(T){if(!qa(T))throw T;fe(eg,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const b=v.Fs.get(S),L=b.snapshotVersion,F=b.withLastLimboFreeSnapshotVersion(L);v.Fs=v.Fs.insert(S,F)}}})(i.localStore,a))}async function rD(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){fe(lg,"User change. New user:",e.toKey());const i=await ZA(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new ye(re.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bu(t,i.Bs)}}function oD(n,e){const t=Ne(n),i=t.Eu.get(e);if(i&&i.lu)return ze().add(i.key);{let o=ze();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function gC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tD.bind(null,e),e.hu.J_=HM.bind(null,e.eventManager),e.hu.pu=zM.bind(null,e.eventManager),e}function aD(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iD.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return lM(this.persistence,new rM,e.initialUser,this.serializer)}Du(e){return new jA(jm.Vi,this.serializer)}bu(e){return new mM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class lD extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){et(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new G2(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new jA((i=>Bd.Vi(i,t)),this.serializer)}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ET(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rD.bind(null,this.syncEngine),await LM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qM})()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),i=(function(a){return new TM(a)})(e.databaseInfo);return(function(a,u,d,p){return new CM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new wM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ET(this.syncEngine,t,0)),(function(){return mT.C()?new mT:new gM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,v){const T=new $M(o,a,u,d,p,m);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);fe(Co,"RemoteStore shutting down."),a.Ia.add(5),await Ru(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="FirestoreClient";class cD{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{fe(kr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(fe(kr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=og(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),fe(kr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await ZA(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Rr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Rr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function AT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dD(n);fe(kr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>yT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>yT(e.remoteStore,o))),n._onlineComponents=e}async function dD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(kr,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Rr("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new Hd)}}else fe(kr,"Using default OfflineComponentProvider"),await Op(n,new lD(void 0));return n._offlineComponents}async function yC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(kr,"Using user provided OnlineComponentProvider"),await AT(n,n._uninitializedComponentsProvider._online)):(fe(kr,"Using default OnlineComponentProvider"),await AT(n,new dm))),n._onlineComponents}function fD(n){return yC(n).then((e=>e.syncEngine))}async function hD(n){const e=await yC(n),t=e.eventManager;return t.onListen=QM.bind(null,e.syncEngine),t.onUnlisten=jM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZM.bind(null,e.syncEngine),t}function pD(n,e,t={}){const i=new Cr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new uD({next:S=>{v.Ou(),u.enqueueAndForget((()=>FM(a,T))),S.fromCache&&p.source==="server"?m.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new GM(d,v,{includeMetadataChanges:!0,ka:!0});return BM(a,T)})(await hD(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firestore.googleapis.com",IT=!0;class wT{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vC,this.ssl=IT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:IT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H2)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_C((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new yN;switch(i.type){case"firstParty":return new EN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=CT.get(t);i&&(fe("ComponentProvider","Removing Datastore"),CT.delete(t),i.terminate())})(this),Promise.resolve()}}function mD(n,e,t,i={}){var o;n=Md(n,ff);const a=Pr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Am(`https://${p}`),Cm("Firestore",!0)),u.host!==vC&&u.host!==p&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!vo(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=ln.MOCK_USER;else{v=mS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ln(S)}n._authCredentials=new _N(new aA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hf(this.firestore,e,this._query)}}class tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Cu(t,tn._jsonSchema))return new tn(e,i||null,new Ee(ft.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:Dt("string",tn._jsonSchemaVersion),referencePath:Dt("string")};class Ir extends hf{constructor(e,t,i){super(e,t,RA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new Ee(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function pf(n,e,...t){if(n=Jt(n),uA("collection","path",e),n instanceof ff){const i=ft.fromString(e,...t);return B0(i),new Ir(n,null,i)}{if(!(n instanceof tn||n instanceof Ir))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ft.fromString(e,...t));return B0(i),new Ir(n.firestore,null,i)}}function gD(n,e,...t){if(n=Jt(n),arguments.length===1&&(e=Bm.newId()),uA("doc","path",e),n instanceof ff){const i=ft.fromString(e,...t);return q0(i),new tn(n,null,new Ee(i))}{if(!(n instanceof tn||n instanceof Ir))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ft.fromString(e,...t));return q0(i),new tn(n.firestore,n instanceof Ir?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tC(this,"async_queue_retry"),this.oc=()=>{const i=Lp();i&&fe(RT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Cr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qa(e))throw e;fe(RT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ts("INTERNAL UNHANDLED ERROR: ",xT(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=rg.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&we(47125,{hc:xT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function xT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class cg extends ff{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new bT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function yD(n,e){const t=typeof n=="object"?n:Rm(),i=typeof n=="string"?n:kd,o=Qd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=fS("firestore");a&&mD(o,...a)}return o}function TC(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_D(n),n._firestoreClient}function _D(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,m,v){return new LN(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_C(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new cD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(nn.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Dt("string",ei._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Dt("string",Vi._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ui(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Dt("string",Ui._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=/^__.*__$/;class TD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}function SC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}class fg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(SC(this.Ec)&&vD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ED{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||uf(e)}Dc(e,t,i,o=!1){return new fg({Ec:e,methodName:t,bc:i,path:en.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SD(n){const e=n._freezeSettings(),t=uf(n._databaseId);return new ED(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AD(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);wC("Data must be an object, but it was:",u,i);const d=CC(i,u);let p,m;if(a.merge)p=new hi(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=CD(e,T,t);if(!u.contains(S))throw new ye(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);wD(v,S)||v.push(S)}p=new hi(v),m=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=u.fieldTransforms;return new TD(new Zn(d),p,m)}function AC(n,e){if(IC(n=Jt(n)))return wC("Unsupported field value:",e,n),CC(n,e);if(n instanceof EC)return(function(i,o){if(!SC(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=AC(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return a2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ht.fromDate(i);return{timestampValue:qd(o.serializer,a)}}if(i instanceof ht){const a=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qd(o.serializer,a)}}if(i instanceof Vi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ei)return{bytesValue:GA(o.serializer,i._byteString)};if(i instanceof tn){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ui)return(function(u,d){return{mapValue:{fields:{[_A]:{stringValue:vA},[Pd]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Km(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Fm(i)}`)})(n,e)}function CC(n,e){const t={};return fA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(n,((i,o)=>{const a=AC(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function IC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof Vi||n instanceof ei||n instanceof tn||n instanceof EC||n instanceof Ui)}function wC(n,e,t){if(!IC(t)||!cA(t)){const i=Fm(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function CD(n,e,t){if((e=Jt(e))instanceof dg)return e._internalPath;if(typeof e=="string")return RC(n,e);throw zd("Field path arguments must be of type string or ",n,!1,void 0,t)}const ID=new RegExp("[~\\*/\\[\\]]");function RC(n,e,t){if(e.search(ID)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dg(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ye(re.INVALID_ARGUMENT,d+n+p)}function wD(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RD extends bC{data(){return super.data()}}function xC(n,e){return typeof e=="string"?RC(n,e):e instanceof dg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xD{convertValue(e,t="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ro(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Pd].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>It(u.doubleValue)));return new Ui(a)}convertGeoPoint(e){return new Vi(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=xr(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ft.fromString(e);et(WA(i),9688,{name:e});const o=new pu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||Ts(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class ld{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends bC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Dt("string",wa._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Td extends wa{data(e={}){return super.data(e)}}class Ra{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ld(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Td(this._firestore,this._userDataWriter,i.key,i,new ld(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ld(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ld(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:MD(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:Dt("string",Ra._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class DD extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}function NC(n){n=Md(n,hf);const e=Md(n.firestore,cg),t=TC(e),i=new DD(e);return bD(n._query),pD(t,n._query).then((o=>new Ra(e,i,n,o)))}function MC(n,e){const t=Md(n.firestore,cg),i=gD(n),o=ND(n.converter,e);return kD(t,[AD(SD(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,ys.exists(!1))]).then((()=>i))}function kD(n,e){return(function(i,o){const a=new Cr;return i.asyncQueue.enqueueAndForget((async()=>eD(await fD(i),o,a))),a.promise})(TC(n),e)}(function(e,t=!0){(function(o){La=o})(wo),To(new wr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new cg(new vN(i.getProvider("auth-internal")),new SN(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Mi(P0,V0,e),Mi(P0,V0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebasestorage.googleapis.com",kC="storageBucket",PD=120*1e3,VD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends qi{constructor(e,t,i=0){super(qp(e),`Firebase Storage: ${t} (${qp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function qp(n){return"storage/"+n}function hg(){const n="An unknown error occurred, please check the error payload for server response.";return new Et(Tt.UNKNOWN,n)}function UD(n){return new Et(Tt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function LD(n){return new Et(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function OD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(Tt.UNAUTHENTICATED,n)}function qD(){return new Et(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BD(n){return new Et(Tt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function FD(){return new Et(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HD(){return new Et(Tt.CANCELED,"User canceled the upload/download.")}function zD(n){return new Et(Tt.INVALID_URL,"Invalid URL '"+n+"'.")}function GD(n){return new Et(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function JD(){return new Et(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kC+"' property when initializing the app?")}function YD(){return new Et(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KD(){return new Et(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $D(n){return new Et(Tt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fm(n){return new Et(Tt.INVALID_ARGUMENT,n)}function PC(){return new Et(Tt.APP_DELETED,"The Firebase app was deleted.")}function QD(n){return new Et(Tt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function au(n,e){return new Et(Tt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Yl(n){throw new Et(Tt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=On.makeFromUrl(e,t)}catch{return new On(e,"")}if(i.path==="")return i;throw GD(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(ne){ne.path_=decodeURIComponent(ne.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",b=new RegExp(`^https?://${T}/${v}/b/${o}/o${S}`,"i"),L={bucket:1,path:3},F=t===DC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,B="([^?#]*)",j=new RegExp(`^https?://${F}/${o}/${B}`,"i"),$=[{regex:d,indices:p,postModify:a},{regex:b,indices:L,postModify:m},{regex:j,indices:{bucket:1,path:2},postModify:m}];for(let ne=0;ne<$.length;ne++){const ae=$[ne],ue=ae.regex.exec(e);if(ue){const M=ue[ae.indices.bucket];let x=ue[ae.indices.path];x||(x=""),i=new On(M,x),ae.postModify(i);break}}if(i==null)throw zD(e);return i}}class WD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...B){m||(m=!0,e.apply(null,B))}function T(B){o=setTimeout(()=>{o=null,n(b,p())},B)}function S(){a&&clearTimeout(a)}function b(B,...j){if(m){S();return}if(B){S(),v.call(null,B,...j);return}if(p()||u){S(),v.call(null,B,...j);return}i<64&&(i*=2);let $;d===1?(d=2,$=0):$=(i+Math.random())*1e3,T($)}let L=!1;function F(B){L||(L=!0,S(),!m&&(o!==null?(B||(d=2),clearTimeout(o),T(0)):B||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function jD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n){return n!==void 0}function ek(n){return typeof n=="object"&&!Array.isArray(n)}function pg(n){return typeof n=="string"||n instanceof String}function NT(n){return mg()&&n instanceof Blob}function mg(){return typeof Blob<"u"}function MT(n,e,t,i){if(i<e)throw fm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function VC(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var _o;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(_o||(_o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t,i,o,a,u,d,p,m,v,T,S=!0,b=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,F)=>{this.resolve_=L,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new ud(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===_o.NO_ERROR,p=a.getStatus();if(!d||tk(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===_o.ABORT;i(!1,new ud(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new ud(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());ZD(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=hg();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?PC():HD();u(p)}else{const p=FD();u(p)}};this.canceled_?t(!1,new ud(!1,null,!0)):this.backoffId_=XD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ud{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function ik(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function sk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ok(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function ak(n,e,t,i,o,a,u=!0,d=!1){const p=VC(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return rk(v,e),ik(v,t),sk(v,a),ok(v,i),new nk(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uk(...n){const e=lk();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(mg())return new Blob(n);throw new Et(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ck(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){if(typeof atob>"u")throw $D("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bp{constructor(e,t){this.data=e,this.contentType=t||null}}function UC(n,e){switch(n){case pi.RAW:return new Bp(LC(e));case pi.BASE64:case pi.BASE64URL:return new Bp(OC(n,e));case pi.DATA_URL:return new Bp(hk(e),pk(e))}throw hg()}function LC(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function fk(n){let e;try{e=decodeURIComponent(n)}catch{throw au(pi.DATA_URL,"Malformed data URL.")}return LC(e)}function OC(n,e){switch(n){case pi.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw au(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw au(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=dk(e)}catch(o){throw o.message.includes("polyfill")?o:au(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class qC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw au(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=mk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function hk(n){const e=new qC(n);return e.base64?OC(pi.BASE64,e.rest):fk(e.rest)}function pk(n){return new qC(n).contentType}function mk(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){let i=0,o="";NT(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(NT(this.data_)){const i=this.data_,o=ck(i,e,t);return o===null?null:new vr(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new vr(i,!0)}}static getBlob(...e){if(mg()){const t=e.map(i=>i instanceof vr?i.data_:i);return new vr(uk.apply(null,t))}else{const t=e.map(u=>pg(u)?UC(pi.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new vr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n){let e;try{e=JSON.parse(n)}catch{return null}return ek(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function yk(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function FC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n,e){return e}class _n{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||_k}}let cd=null;function vk(n){return!pg(n)||n.length<2?n:FC(n)}function HC(){if(cd)return cd;const n=[];n.push(new _n("bucket")),n.push(new _n("generation")),n.push(new _n("metageneration")),n.push(new _n("name","fullPath",!0));function e(a,u){return vk(u)}const t=new _n("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new _n("size");return o.xform=i,n.push(o),n.push(new _n("timeCreated")),n.push(new _n("updated")),n.push(new _n("md5Hash",null,!0)),n.push(new _n("cacheControl",null,!0)),n.push(new _n("contentDisposition",null,!0)),n.push(new _n("contentEncoding",null,!0)),n.push(new _n("contentLanguage",null,!0)),n.push(new _n("contentType",null,!0)),n.push(new _n("metadata","customMetadata",!0)),cd=n,cd}function Tk(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new On(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Ek(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return Tk(i,n),i}function zC(n,e,t){const i=BC(e);return i===null?null:Ek(n,i,t)}function Sk(n,e,t,i){const o=BC(e);if(o===null||!pg(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=n.bucket,T=n.fullPath,S="/b/"+u(v)+"/o/"+u(T),b=gg(S,t,i),L=VC({alt:"media",token:m});return b+L})[0]}function Ak(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class GC{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(n){if(!n)throw hg()}function Ck(n,e){function t(i,o){const a=zC(n,o,e);return JC(a!==null),a}return t}function Ik(n,e){function t(i,o){const a=zC(n,o,e);return JC(a!==null),Sk(a,o,n.host,n._protocol)}return t}function YC(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=qD():o=OD():t.getStatus()===402?o=LD(n.bucket):t.getStatus()===403?o=BD(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function wk(n){const e=YC(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=UD(n.path)),a.serverResponse=o.serverResponse,a}return t}function Rk(n,e,t){const i=e.fullServerUrl(),o=gg(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new GC(o,a,Ik(n,t),u);return d.errorHandler=wk(e),d}function bk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function xk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=bk(null,e)),i}function Nk(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let $="";for(let ne=0;ne<2;ne++)$=$+Math.random().toString().slice(2);return $}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=xk(e,i,o),v=Ak(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",b=vr.getBlob(T,i,S);if(b===null)throw YD();const L={name:m.fullPath},F=gg(a,n.host,n._protocol),B="POST",j=n.maxUploadRetryTime,G=new GC(F,B,Ck(n,t),j);return G.urlParams=L,G.headers=u,G.body=b.uploadData(),G.errorHandler=YC(e),G}class Mk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw Yl("cannot .send() more than once");if(Pr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Dk extends Mk{initXhr(){this.xhr_.responseType="text"}}function KC(){return new Dk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this._service=e,t instanceof On?this._location=t:this._location=On.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Io(e,t)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FC(this._location.path)}get storage(){return this._service}get parent(){const e=gk(this._location.path);if(e===null)return null;const t=new On(this._location.bucket,e);return new Io(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw QD(e)}}function kk(n,e,t){n._throwIfRoot("uploadBytes");const i=Nk(n.storage,n._location,HC(),new vr(e,!0),t);return n.storage.makeRequestWithTokens(i,KC).then(o=>({metadata:o,ref:n}))}function Pk(n,e,t=pi.RAW,i){n._throwIfRoot("uploadString");const o=UC(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),kk(n,o.data,a)}function Vk(n){n._throwIfRoot("getDownloadURL");const e=Rk(n.storage,n._location,HC());return n.storage.makeRequestWithTokens(e,KC).then(t=>{if(t===null)throw KD();return t})}function Uk(n,e){const t=yk(n._location.path,e),i=new On(n._location.bucket,t);return new Io(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(n){return/^[A-Za-z]+:\/\//.test(n)}function Ok(n,e){return new Io(n,e)}function $C(n,e){if(n instanceof yg){const t=n;if(t._bucket==null)throw JD();const i=new Io(t,t._bucket);return e!=null?$C(i,e):i}else return e!==void 0?Uk(n,e):n}function qk(n,e){if(e&&Lk(e)){if(n instanceof yg)return Ok(n,e);throw fm("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(n,e)}function DT(n,e){const t=e==null?void 0:e[kC];return t==null?null:On.makeFromBucketSpec(t,n)}function Bk(n,e,t,i={}){n.host=`${e}:${t}`;const o=Pr(e);o&&(Am(`https://${n.host}/b`),Cm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:mS(a,n.app.options.projectId))}class yg{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=DC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PD,this._maxUploadRetryTime=VD,this._requests=new Set,o!=null?this._bucket=On.makeFromBucketSpec(o,this._host):this._bucket=DT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=DT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Io(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new WD(PC());{const u=ak(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const kT="@firebase/storage",PT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="storage";function Fk(n,e,t,i){return n=Jt(n),Pk(n,e,t,i)}function Hk(n){return n=Jt(n),Vk(n)}function zk(n,e){return n=Jt(n),qk(n,e)}function Gk(n=Rm(),e){n=Jt(n);const i=Qd(n,QC).getImmediate({identifier:e}),o=fS("storage");return o&&Jk(i,...o),i}function Jk(n,e,t,i={}){Bk(n,e,t,i)}function Yk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new yg(t,i,o,e,wo)}function Kk(){To(new wr(QC,Yk,"PUBLIC").setMultipleInstances(!0)),Mi(kT,PT,""),Mi(kT,PT,"esm2017")}Kk();const $k={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},_g=_S($k),Zl=hN(_g),Qk=new hs,mf=yD(_g),Wk=Gk(_g);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xk,jk;function Zk(){return{geminiUrl:Xk,vertexUrl:jk}}function eP(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=Zk();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class As{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(a+1),t[m])}else for(const m of p)g(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function tP(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}hm(n,o,a,0,u)}}function hm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])hm(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const T=[];for(const S of t.slice(i))S==="*"?T.push(m):T.push(S);g(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;a in u&&hm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nP(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function iP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],rP(u)),e}function sP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],oP(u)),e}function rP(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>aP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function oP(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>lP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function aP(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],pP(t)),e}function lP(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],mP(t)),e}function uP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function cP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function dP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],fP(u)),e}function fP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function WC(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],hP(u)),e}function hP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function pP(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],vg(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function mP(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],vg(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VT||(VT={}));var UT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(UT||(UT={}));var LT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(LT||(LT={}));var Me;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Me||(Me={}));var OT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(OT||(OT={}));var qT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qT||(qT={}));var BT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(BT||(BT={}));var FT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(FT||(FT={}));var HT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(HT||(HT={}));var zT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(zT||(zT={}));var GT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(GT||(GT={}));var JT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(JT||(JT={}));var YT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(YT||(YT={}));var KT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(KT||(KT={}));var $T;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($T||($T={}));var QT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(QT||(QT={}));var WT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(WT||(WT={}));var XT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(XT||(XT={}));var Gd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Gd||(Gd={}));var jT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jT||(jT={}));var ZT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ZT||(ZT={}));var eE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(eE||(eE={}));var pm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pm||(pm={}));var tE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tE||(tE={}));var nE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(nE||(nE={}));var iE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(iE||(iE={}));var sE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sE||(sE={}));var rE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rE||(rE={}));var oE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(oE||(oE={}));var aE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(aE||(aE={}));var lE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(lE||(lE={}));var uE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(uE||(uE={}));var cE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cE||(cE={}));var dE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dE||(dE={}));var fE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fE||(fE={}));var hE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hE||(hE={}));var pE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(pE||(pE={}));var mE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(mE||(mE={}));var gE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(gE||(gE={}));var yE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(yE||(yE={}));var _E;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_E||(_E={}));var vE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(vE||(vE={}));var TE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(TE||(TE={}));var EE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(EE||(EE={}));var SE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(SE||(SE={}));var AE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(AE||(AE={}));var CE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(CE||(CE={}));var IE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(IE||(IE={}));var wE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(wE||(wE={}));var RE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(RE||(RE={}));var bE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bE||(bE={}));var xE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(xE||(xE={}));var Ea;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ea||(Ea={}));class mm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kl{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,L]of Object.entries(S))b!=="text"&&b!=="thought"&&(L!==null||L!==void 0)&&T.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(T))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class NE{}class ME{}class gP{}class yP{}class _P{}class vP{}class DE{}class kE{}class PE{}class TP{}class Jd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Jd;let o;const a=e;return t?o=sP(a):o=iP(a),Object.assign(i,o),i}}class VE{}class UE{}class LE{}class EP{}class SP{}class AP{}class Tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Tg,a=dP(e);return Object.assign(i,a),i}}class CP{}class IP{}class wP{}class OE{}class RP{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class bP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Eg,a=WC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function XC(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function jC(n){return Array.isArray(n)?n.map(e=>Yd(e)):[Yd(n)]}function Yd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ZC(n){const e=Yd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eI(n){const e=Yd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>qE(e)):[qE(n)]}function gm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function BE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function FE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function cn(n){if(n==null)throw new Error("ContentUnion is required");return gm(n)?n:{role:"user",parts:tI(n)}}function Sg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=cn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=cn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>cn(t)):[cn(e)]}function ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(BE(n)||FE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(n)]}const e=[],t=[],i=gm(n[0]);for(const o of n){const a=gm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(BE(o)||FE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:tI(t)}),e}function xP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Me).includes(t[0].toUpperCase())?t[0].toUpperCase():Me.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Me).includes(i.toUpperCase())?i.toUpperCase():Me.TYPE_UNSPECIFIED})}}function ba(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&xP(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Me).includes(d.toUpperCase())?d.toUpperCase():Me.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ba(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(ba(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=ba(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Ag(n){return ba(n)}function Cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ig(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Fa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ba(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ba(e.response));return n}function Ha(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function NP(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Cs(n,e){if(typeof e!="string")throw new Error("name must be a string");return NP(n,e,"cachedContents")}function nI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Or(n){return vg(n)}function MP(n){return n!=null&&typeof n=="object"&&"name"in n}function DP(n){return n!=null&&typeof n=="object"&&"video"in n}function kP(n){return n!=null&&typeof n=="object"&&"uri"in n}function iI(n){var e;let t;if(MP(n)&&(t=n.name),!(kP(n)&&(t=n.uri,t===void 0))&&!(DP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rI(n){for(const e of["models","tunedModels","publisherModels"])if(PP(n,e))return n[e];return[]}function PP(n,e){return n!==null&&typeof n=="object"&&e in n}function VP(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function UP(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=VP(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function oI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function LP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function aI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function za(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OP(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>mV(u))),g(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function qP(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function BP(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ed(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],lI(o));const a=f(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],OP(aI(m))),e}function ym(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],lI(o));const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&g(e,["src"],FP(T));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],qP(aI(S)));const b=f(n,["completionStats"]);return b!=null&&g(e,["completionStats"],b),e}function FP(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function HP(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pV(n,u))),g(t,["requests","requests"],a)}return t}function zP(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function GP(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function JP(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function YP(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function KP(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],$P(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function $P(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function uI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>SV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function QP(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function WP(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],BP(LP(o))),t}function HE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],HP(n,oI(n,o)));const a=f(e,["config"]);return a!=null&&QP(a,t),t}function XP(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],zP(oI(n,o)));const a=f(e,["config"]);return a!=null&&WP(a,t),t}function jP(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function ZP(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],oV(n,o));const a=f(e,["config"]);return a!=null&&jP(a,t),t}function eV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function tV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function nV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function iV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function sV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Sg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],rV(o,t)),tP(t,{"requests[].*":"requests[].request.*"})),t}function rV(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function oV(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],sV(n,o)),t}function aV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function lV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],uI(cn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const j=f(e,["responseSchema"]);j!=null&&g(i,["responseSchema"],Ag(j));const G=f(e,["responseJsonSchema"]);if(G!=null&&g(i,["responseJsonSchema"],G),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(D=>AV(D))),g(t,["safetySettings"],U)}const ne=f(e,["tools"]);if(t!==void 0&&ne!=null){let U=Ha(ne);Array.isArray(U)&&(U=U.map(D=>CV(Fa(D)))),g(t,["tools"],U)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Cs(n,ue));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const k=f(e,["imageConfig"]);return k!=null&&g(i,["imageConfig"],k),i}function uV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>KP(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function cV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function dV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],za(n,i)),t}function fV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function hV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function pV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(p=>uI(p))),g(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],lV(n,u,f(t,["request"],{}))),t}function mV(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],uV(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function gV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function yV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function _V(n){const e={},t=f(n,["config"]);return t!=null&&gV(t,e),e}function vV(n){const e={},t=f(n,["config"]);return t!=null&&yV(t,e),e}function TV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Ed(u))),g(e,["batchJobs"],a)}return e}function EV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ym(u))),g(e,["batchJobs"],a)}return e}function SV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],aV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],GP(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function AV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function CV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],fV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],hV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ss;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ss||(Ss={}));class Mo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IV extends As{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Mo(Ss.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=HE(this.apiClient,e),i=t._url,o=de("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const b=T.request;b.systemInstruction=S,T.request=b}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=XP(this.apiClient,e);return d=de("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ym(v))}else{const m=HE(this.apiClient,e);return d=de("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Ed(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZP(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Ed(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=dV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ym(v))}else{const m=cV(this.apiClient,e);return d=de("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Ed(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=YP(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=JP(this.apiClient,e);u=de("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=vV(e);return d=de("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=EV(v),S=new OE;return Object.assign(S,T),S})}else{const m=_V(e);return d=de("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=TV(v),S=new OE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=tV(this.apiClient,e);return d=de("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>iV(v))}else{const m=eV(this.apiClient,e);return d=de("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>nV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function zE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>KV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function RV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ti(u);Array.isArray(v)&&(v=v.map(T=>zE(T))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],zE(cn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>$V(T))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function bV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ti(u);Array.isArray(T)&&(T=T.map(S=>S)),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],cn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>QV(S))),g(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function xV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],XC(n,i));const o=f(e,["config"]);return o!=null&&RV(o,t),t}function NV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],XC(n,i));const o=f(e,["config"]);return o!=null&&bV(o,t),t}function MV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Cs(n,i)),t}function DV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Cs(n,i)),t}function kV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function PV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function VV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function UV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function LV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Cs(n,i)),t}function OV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Cs(n,i)),t}function qV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function BV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function FV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function HV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function zV(n){const e={},t=f(n,["config"]);return t!=null&&FV(t,e),e}function GV(n){const e={},t=f(n,["config"]);return t!=null&&HV(t,e),e}function JV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function YV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function KV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],VV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],wV(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function $V(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],qV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],BV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function QV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>UV(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function WV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function XV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function jV(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Cs(n,i));const o=f(e,["config"]);return o!=null&&WV(o,t),t}function ZV(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Cs(n,i));const o=f(e,["config"]);return o!=null&&XV(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e4 extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Ss.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=NV(this.apiClient,e);return d=de("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=xV(this.apiClient,e);return d=de("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=OV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=LV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=DV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=PV(v),S=new UE;return Object.assign(S,T),S})}else{const m=MV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=kV(v),S=new UE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=ZV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=jV(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=GV(e);return d=de("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=YV(v),S=new LE;return Object.assign(S,T),S})}else{const m=zV(e);return d=de("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=JV(v),S=new LE;return Object.assign(S,T),S})}}}function GE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function xa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(L){return Promise.resolve(L).then(b,T)}}function d(b,L){i[b]&&(o[b]=function(F){return new Promise(function(B,j){a.push([b,F,B,j])>1||p(b,F)})},L&&(o[b]=L(o[b])))}function p(b,L){try{m(i[b](L))}catch(F){S(a[0][3],F)}}function m(b){b.value instanceof dt?Promise.resolve(b.value.v).then(v,T):S(a[0][2],b)}function v(b){p("next",b)}function T(b){p("throw",b)}function S(b,L){b(L),a.shift(),a.length&&p(a[0][0],a[0][1])}}function lu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof GE=="function"?GE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:cI(t)}function cI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function n4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!cI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class i4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new s4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class s4{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),n4(a)}async sendMessage(e){var t;await this.sendPromise;const i=cn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=cn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?JE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return xa(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var T=!0,S=lu(e),b;b=yield dt(S.next()),u=b.done,!u;T=!0){m=b.value,T=!1;const L=m;if(t4(L)){const F=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield dt(L)}}catch(L){d={error:L}}finally{try{!T&&!u&&(p=S.return)&&(yield dt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...JE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r4(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function o4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function a4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],iI(t)),e}function l4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function u4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],iI(t)),e}function c4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function d4(n){const e={},t=f(n,["config"]);return t!=null&&c4(t,e),e}function f4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h4 extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Ss.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d4(e);return a=de("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=f4(p),v=new CP;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r4(e);return a=de("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=o4(p),v=new IP;return Object.assign(v,m),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u4(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a4(e);return a=de("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=l4(p),v=new wP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function p4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>x4(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function m4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function g4(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function y4(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const j=f(n,["seed"]);j!=null&&g(e,["seed"],j);const G=f(n,["speechConfig"]);G!=null&&g(e,["speechConfig"],dI(G));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ne=f(n,["temperature"]);ne!=null&&g(e,["temperature"],ne);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function v4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function T4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Ig(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],p4(cn(L)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ue=Ha(F);Array.isArray(ue)&&(ue=ue.map(M=>M4(Fa(M)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],N4(B));const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const G=f(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ne=f(n,["contextWindowCompression"]);e!==void 0&&ne!=null&&g(e,["setup","contextWindowCompression"],ne);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function E4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],y4(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],dI(Ig(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],cn(L));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ue=Ha(F);Array.isArray(ue)&&(ue=ue.map(M=>D4(Fa(M)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],B);const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const G=f(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ne=f(n,["contextWindowCompression"]);e!==void 0&&ne!=null&&g(e,["setup","contextWindowCompression"],ne);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function S4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],T4(o,t)),t}function A4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],E4(o,t)),t}function C4(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function I4(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function w4(n){const e={},t=f(n,["media"]);if(t!=null){let m=jC(t);Array.isArray(m)&&(m=m.map(v=>Sd(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],Sd(eI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],Sd(ZC(a)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function R4(n){const e={},t=f(n,["media"]);if(t!=null){let m=jC(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],eI(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],ZC(a));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function b4(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],k4(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function x4(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],m4(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Sd(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function N4(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function M4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],_4(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],v4(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function D4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>g4(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function k4(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(L=>L)),g(e,["promptTokensDetails"],b)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(L=>L)),g(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(L=>L)),g(e,["responseTokensDetails"],b)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(L=>L)),g(e,["toolUsePromptTokensDetails"],b)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P4(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function V4(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],U4(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function U4(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function L4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let a=ti(o);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function O4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function q4(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],B4(i)),e}function B4(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function yf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>JU(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function F4(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function H4(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function z4(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],cn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>gI(d))),g(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],DU(a)),t}function G4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>yf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&H4(a),t}function J4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&z4(a,t),t}function Y4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function K4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function $4(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function Q4(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function W4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function X4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function j4(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const j=f(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const G=f(n,["editMode"]);e!==void 0&&G!=null&&g(e,["parameters","editMode"],G);const $=f(n,["baseSteps"]);return e!==void 0&&$!=null&&g(e,["parameters","editConfig","baseSteps"],$),t}function Z4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>XU(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&j4(u,t),t}function eU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_f(a))),g(e,["generatedImages"],o)}return e}function tU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function nU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function iU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Sg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&tU(a,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Xe(n,u)),t}function sU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Sg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&nU(a,t),t}function rU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function oU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>q4(u))),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function aU(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function lU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function uU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function cU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],yf(cn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const j=f(e,["responseSchema"]);j!=null&&g(i,["responseSchema"],Ag(j));const G=f(e,["responseJsonSchema"]);if(G!=null&&g(i,["responseJsonSchema"],G),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(D=>jU(D))),g(t,["safetySettings"],U)}const ne=f(e,["tools"]);if(t!==void 0&&ne!=null){let U=Ha(ne);Array.isArray(U)&&(U=U.map(D=>sL(Fa(D)))),g(t,["tools"],U)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&g(t,["toolConfig"],ae),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Cs(n,ue));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const k=f(e,["imageConfig"]);return k!=null&&g(i,["imageConfig"],k),i}function dU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],cn(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const j=f(e,["responseSchema"]);j!=null&&g(i,["responseSchema"],Ag(j));const G=f(e,["responseJsonSchema"]);G!=null&&g(i,["responseJsonSchema"],G);const $=f(e,["routingConfig"]);$!=null&&g(i,["routingConfig"],$);const ne=f(e,["modelSelectionConfig"]);ne!=null&&g(i,["modelConfig"],ne);const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let W=ae;Array.isArray(W)&&(W=W.map(le=>le)),g(t,["safetySettings"],W)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let W=Ha(ue);Array.isArray(W)&&(W=W.map(le=>gI(Fa(le)))),g(t,["tools"],W)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const x=f(e,["labels"]);t!==void 0&&x!=null&&g(t,["labels"],x);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],Cs(n,N));const V=f(e,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const k=f(e,["mediaResolution"]);k!=null&&g(i,["mediaResolution"],k);const U=f(e,["speechConfig"]);U!=null&&g(i,["speechConfig"],mI(Cg(U)));const D=f(e,["audioTimestamp"]);D!=null&&g(i,["audioTimestamp"],D);const Ke=f(e,["thinkingConfig"]);Ke!=null&&g(i,["thinkingConfig"],Ke);const Re=f(e,["imageConfig"]);return Re!=null&&g(i,["imageConfig"],Re),i}function YE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>yf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],cU(n,a,t)),t}function KE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],dU(n,a,t)),t}function $E(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>V4(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function QE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function fU(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function hU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const j=f(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const G=f(n,["imageSize"]);e!==void 0&&G!=null&&g(e,["parameters","sampleImageSize"],G);const $=f(n,["enhancePrompt"]);return e!==void 0&&$!=null&&g(e,["parameters","enhancePrompt"],$),t}function pU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&fU(a,t),t}function mU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&hU(a,t),t}function gU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>bU(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],hI(o)),e}function yU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>_f(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],pI(o)),e}function _U(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],vf(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(b=>yL(b))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function vU(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&g(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&g(e,["parameters","generateAudio"],L);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&g(e,["instances[0]","lastFrame"],gi(F));const B=f(n,["referenceImages"]);if(e!==void 0&&B!=null){let $=B;Array.isArray($)&&($=$.map(ne=>_L(ne))),g(e,["instances[0]","referenceImages"],$)}const j=f(n,["mask"]);e!==void 0&&j!=null&&g(e,["instances[0]","mask"],gL(j));const G=f(n,["compressionQuality"]);return e!==void 0&&G!=null&&g(e,["parameters","compressionQuality"],G),t}function TU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],CU(u)),e}function EU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],IU(u)),e}function SU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],vf(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],yI(u));const d=f(e,["source"]);d!=null&&wU(d,t);const p=f(e,["config"]);return p!=null&&_U(p,t),t}function AU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],gi(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],_I(u));const d=f(e,["source"]);d!=null&&RU(d,t);const p=f(e,["config"]);return p!=null&&vU(p,t),t}function CU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>NU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function IU(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>MU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function wU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],vf(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],yI(a)),t}function RU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],gi(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],_I(a)),t}function bU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],LU(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],hI(o)),e}function _f(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],fI(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],pI(o));const a=f(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function xU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],fI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function NU(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],pL(t)),e}function MU(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],mL(t)),e}function DU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const j=f(n,["seed"]);j!=null&&g(e,["seed"],j);const G=f(n,["speechConfig"]);G!=null&&g(e,["speechConfig"],mI(G));const $=f(n,["stopSequences"]);$!=null&&g(e,["stopSequences"],$);const ne=f(n,["temperature"]);ne!=null&&g(e,["temperature"],ne);const ae=f(n,["thinkingConfig"]);ae!=null&&g(e,["thinkingConfig"],ae);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function PU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function VU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function UU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function LU(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Or(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function fI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Or(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function vf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Or(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function gi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Or(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function OU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],sI(n,d)),i}function qU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],sI(n,d)),i}function BU(n,e){const t={},i=f(e,["config"]);return i!=null&&OU(n,i,t),t}function FU(n,e){const t={},i=f(e,["config"]);return i!=null&&qU(n,i,t),t}function HU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=rI(o);Array.isArray(a)&&(a=a.map(u=>_m(u))),g(e,["models"],a)}return e}function zU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=rI(o);Array.isArray(a)&&(a=a.map(u=>vm(u))),g(e,["models"],a)}return e}function GU(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function _m(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["version"]);a!=null&&g(e,["version"],a);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],rL(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function vm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["versionId"]);a!=null&&g(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>aU(S))),g(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],oL(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["checkpoints"],T)}return e}function JU(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],lU(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],P4(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function YU(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],gi(t)),e}function KU(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=f(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function $U(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&WU(o,t);const a=f(e,["config"]);return a!=null&&KU(a,t),t}function QU(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>_f(o))),g(e,["generatedImages"],i)}return e}function WU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],gi(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>YU(d))),g(e,["instances[0]","productImages"],u)}return t}function XU(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],gi(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],GU(a));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],F4(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function hI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function pI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function jU(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function ZU(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],gi(t)),e}function eL(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function tL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&iL(o,t);const a=f(e,["config"]);return a!=null&&eL(a,t),t}function nL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>xU(o))),g(e,["generatedMasks"],i)}return e}function iL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],gi(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],ZU(a)),t}function mI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function sL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],VU(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],UU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function gI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>uU(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function rL(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function oL(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function aL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function lL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function uL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],Xe(n,i));const o=f(e,["config"]);return o!=null&&aL(o,t),t}function cL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&lL(o,t),t}function dL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=f(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function fL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],gi(o));const a=f(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&dL(u,t),t}function hL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_f(a))),g(e,["generatedImages"],o)}return e}function pL(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Or(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function mL(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Or(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function gL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],gi(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function yL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],vf(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function _L(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],gi(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function yI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Or(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function _I(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Or(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vL="Content-Type",TL="X-Server-Timeout",EL="User-Agent",Tm="x-goog-api-client",SL="1.29.0",AL=`google-genai-sdk/${SL}`,CL="v1beta1",IL="v1beta",WE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wL{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:CL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:IL,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&RL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await XE(o),new mm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await XE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return xa(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield dt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),b=S.status,L=S.code,F=`got status: ${b}. ${JSON.stringify(T)}`;if(L>=400&&L<600)throw new gf({message:F,status:L})}}catch(T){if(T.name==="ApiError")throw T}u+=m;let v=u.match(WE);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dt(new mm(S)),u=u.slice(v[0].length),v=u.match(WE)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=AL+" "+this.clientOptions.userAgentExtra;return e[EL]=t,e[Tm]=t,e[vL]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(TL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},m=this.getFileName(e),v=de("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&i.customMetadata&&(T.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(T.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,p,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function XE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new gf({message:o,status:t}):new Error(o)}}function RL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bL="mcp_used/unknown";let xL=!1;function vI(n){for(const e of n)if(NL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xL}function TI(n){var e;const t=(e=n[Tm])!==null&&e!==void 0?e:"";n[Tm]=(t+` ${bL}`).trimStart()}function NL(n){return n!==null&&typeof n=="object"&&n instanceof wg}function ML(n,e=100){return xa(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield dt(n.listTools({cursor:i}));for(const u of a.tools)yield yield dt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class wg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new wg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,lu(ML(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),UP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function DL(n,e,t){const i=new bP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class kL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=UL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise($=>{m=$}),T=e.callbacks,S=function(){m({})},b=this.apiClient,L={onopen:S,onmessage:$=>{DL(b,T.onmessage,$)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function($){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function($){}},F=this.webSocketFactory.create(p,VL(u),L);F.connect(),await v;const G={setup:{model:Xe(this.apiClient,e.model)}};return F.send(JSON.stringify(G)),new PL(F,this.apiClient)}}class PL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=I4(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=C4(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ea.PLAY)}pause(){this.sendPlaybackControl(Ea.PAUSE)}stop(){this.sendPlaybackControl(Ea.STOP)}resetContext(){this.sendPlaybackControl(Ea.RESET_CONTEXT)}close(){this.conn.close()}}function VL(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function UL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function OL(n,e,t){const i=new RP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=b4(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class qL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new kL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&vI(e.config.tools)&&TI(T);const S=zL(T);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",k="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${k}=${N}`}let b=()=>{};const L=new Promise(N=>{b=N}),F=e.callbacks,B=function(){var N;(N=F==null?void 0:F.onopen)===null||N===void 0||N.call(F),b({})},j=this.apiClient,G={onopen:B,onmessage:N=>{OL(j,F.onmessage,N)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(N){}},$=this.webSocketFactory.create(v,HL(S),G);$.connect(),await L;let ne=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ne.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();ne=`projects/${N}/locations/${V}/`+ne}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Gd.AUDIO]}:e.config.responseModalities=[Gd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of ue)if(this.isCallableTool(N)){const V=N;M.push(await V.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const x={model:ne,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=A4(this.apiClient,x):ae=S4(this.apiClient,x),delete ae.config,$.send(JSON.stringify(ae)),new FL($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const BL={turnComplete:!0};class FL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ti(t.turns),e.isVertexAI()||(i=i.map(o=>yf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(LL)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},BL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:R4(e)}:t={realtimeInput:w4(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function HL(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function zL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jE=10;function ZE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Na(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Na(n){return"callTool"in n&&typeof n.callTool=="function"}function GL(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Na(o)))!==null&&i!==void 0?i:!1}function eS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Na(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function tS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JL extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!GL(t)||ZE(t.config))return await this.generateContentInternal(p);const m=eS(t);if(m.length>0){const F=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,T;const S=ti(p.contents),b=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:jE;let L=0;for(;L<b&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,B=[];for(const j of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Na(j)){const $=await j.callTool(v.functionCalls);B.push(...$)}L++,T={role:"user",parts:B},p.contents=ti(p.contents),p.contents.push(F),p.contents.push(T),tS(p.config)&&(S.push(F),S.push(T))}return tS(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),ZE(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=eS(t);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mo(Ss.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Na(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&vI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),TI(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Na(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:jE;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,T){var S,b;return xa(this,arguments,function*(){for(var L,F,B,j;d<a;){u&&(d++,u=!1);const ae=yield dt(m.processParamsMaybeAddMcpUsage(T)),ue=yield dt(m.generateContentStreamInternal(ae)),M=[],x=[];try{for(var G=!0,$=(F=void 0,lu(ue)),ne;ne=yield dt($.next()),L=ne.done,!L;G=!0){j=ne.value,G=!1;const N=j;if(yield yield dt(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){x.push(N.candidates[0].content);for(const V of(b=N.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const k=yield dt(v.get(V.functionCall.name).callTool([V.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){F={error:N}}finally{try{!G&&!L&&(B=$.return)&&(yield dt(B.call($)))}finally{if(F)throw F.error}}if(M.length>0){u=!0;const N=new Kl;N.candidates=[{content:{role:"user",parts:M}}],yield yield dt(N);const V=[];V.push(...x),V.push({role:"user",parts:M});const k=ti(T.contents).concat(V);T.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=KE(this.apiClient,e);return d=de("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=QE(v),S=new Kl;return Object.assign(S,T),S})}else{const m=YE(this.apiClient,e);return d=de("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=$E(v),S=new Kl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=KE(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return xa(this,arguments,function*(){var S,b,L,F;try{for(var B=!0,j=lu(T),G;G=yield dt(j.next()),S=G.done,!S;B=!0){F=G.value,B=!1;const $=F,ne=QE(yield dt($.json()));ne.sdkHttpResponse={headers:$.headers};const ae=new Kl;Object.assign(ae,ne),yield yield dt(ae)}}catch($){b={error:$}}finally{try{!B&&!S&&(L=j.return)&&(yield dt(L.call(j)))}finally{if(b)throw b.error}}})})}else{const m=YE(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return xa(this,arguments,function*(){var S,b,L,F;try{for(var B=!0,j=lu(T),G;G=yield dt(j.next()),S=G.done,!S;B=!0){F=G.value,B=!1;const $=F,ne=$E(yield dt($.json()));ne.sdkHttpResponse={headers:$.headers};const ae=new Kl;Object.assign(ae,ne),yield yield dt(ae)}}catch($){b={error:$}}finally{try{!B&&!S&&(L=j.return)&&(yield dt(L.call(j)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=sU(this.apiClient,e);return d=de("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=oU(v),S=new NE;return Object.assign(S,T),S})}else{const m=iU(this.apiClient,e);return d=de("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rU(v),S=new NE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=mU(this.apiClient,e);return d=de("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yU(v),S=new ME;return Object.assign(S,T),S})}else{const m=pU(this.apiClient,e);return d=de("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=gU(v),S=new ME;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Z4(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=eU(p),v=new gP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=fL(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=hL(p),v=new yP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=$U(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=QU(p),v=new _P;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=tL(this.apiClient,e);return a=de("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=nL(p),v=new vP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=PU(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>vm(v))}else{const m=kU(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_m(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=FU(this.apiClient,e);return d=de("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=zU(v),S=new DE;return Object.assign(S,T),S})}else{const m=BU(this.apiClient,e);return d=de("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=HU(v),S=new DE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cL(this.apiClient,e);return d=de("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>vm(v))}else{const m=uL(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>_m(v))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Q4(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=X4(v),S=new kE;return Object.assign(S,T),S})}else{const m=$4(this.apiClient,e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=W4(v),S=new kE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=J4(this.apiClient,e);return d=de("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=K4(v),S=new PE;return Object.assign(S,T),S})}else{const m=G4(this.apiClient,e);return d=de("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Y4(v),S=new PE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L4(this.apiClient,e);return a=de("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=O4(p),v=new TP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=AU(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=EU(v),S=new Jd;return Object.assign(S,T),S})}else{const m=SU(this.apiClient,e);return d=de("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=TU(v),S=new Jd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YL extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cP(e);return d=de("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=uP(e);return d=de("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=nP(e);return a=de("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KL(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function $L(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>n3(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function QL(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],t3(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),i}function WL(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],QL(n,i,t)),t}function XL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function jL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ZL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function e3(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Ig(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],$L(cn(L)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ue=Ha(F);Array.isArray(ue)&&(ue=ue.map(M=>s3(Fa(M)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],i3(B));const j=f(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const G=f(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&g(e,["setup","outputAudioTranscription"],G);const $=f(n,["realtimeInputConfig"]);e!==void 0&&$!=null&&g(e,["setup","realtimeInputConfig"],$);const ne=f(n,["contextWindowCompression"]);e!==void 0&&ne!=null&&g(e,["setup","contextWindowCompression"],ne);const ae=f(n,["proactivity"]);return e!==void 0&&ae!=null&&g(e,["setup","proactivity"],ae),t}function t3(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],e3(o,t)),t}function n3(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],XL(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],KL(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function i3(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],jL(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],ZL(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function o3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=r3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class a3 extends As{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=WL(this.apiClient,e);a=de("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=o3(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l3(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function u3(n){const e={},t=f(n,["config"]);return t!=null&&l3(t,e),e}function c3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function d3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&c3(i,e),e}function f3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function h3(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function p3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],g3(u)),e}function m3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&h3(o,e),e}function g3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function y3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function _3(n){const e={},t=f(n,["config"]);return t!=null&&y3(t,e),e}function v3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function T3(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function E3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&T3(i,e),e}function S3(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function C3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&A3(i,e),e}function I3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function w3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function R3(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&w3(i,e),e}function b3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x3 extends As{constructor(e){super(),this.apiClient=e,this.list=async t=>new Mo(Ss.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=I3(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=C3(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R3(e);return a=de("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=b3(p),v=new EP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N3 extends As{constructor(e,t=new x3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Mo(Ss.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u3(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=f3(e);return a=de("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d3(e);o=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_3(e);return a=de("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=v3(p),v=new SP;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E3(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=S3(p),v=new AP;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m3(e);return a=de("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=p3(p),v=new Tg;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function D3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function k3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function P3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],nS(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],nS(b))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function V3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&Y3(a);const u=f(n,["config"]);return u!=null&&k3(u,t),t}function U3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&K3(a,t,e);const u=f(n,["config"]);return u!=null&&P3(u,t,e),t}function L3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function O3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function q3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function B3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function F3(n,e){const t={},i=f(n,["config"]);return i!=null&&q3(i,t),t}function H3(n,e){const t={},i=f(n,["config"]);return i!=null&&B3(i,t),t}function z3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>EI(d))),g(t,["tuningJobs"],u)}return t}function G3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Em(d))),g(t,["tuningJobs"],u)}return t}function J3(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function Y3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(t,["examples","examples"],o)}return t}function K3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function EI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],nI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],J3(S)),t}function Em(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],nI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const T=f(n,["description"]);T!=null&&g(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const b=f(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const L=f(n,["preTunedModel"]);L!=null&&g(t,["preTunedModel"],L);const F=f(n,["supervisedTuningSpec"]);F!=null&&g(t,["supervisedTuningSpec"],F);const B=f(n,["preferenceOptimizationSpec"]);B!=null&&g(t,["preferenceOptimizationSpec"],B);const j=f(n,["tuningDataStats"]);j!=null&&g(t,["tuningDataStats"],j);const G=f(n,["encryptionSpec"]);G!=null&&g(t,["encryptionSpec"],G);const $=f(n,["partnerModelTuningSpec"]);$!=null&&g(t,["partnerModelTuningSpec"],$);const ne=f(n,["customBaseModel"]);ne!=null&&g(t,["customBaseModel"],ne);const ae=f(n,["experiment"]);ae!=null&&g(t,["experiment"],ae);const ue=f(n,["labels"]);ue!=null&&g(t,["labels"],ue);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const x=f(n,["pipelineJob"]);x!=null&&g(t,["pipelineJob"],x);const N=f(n,["serviceAccount"]);N!=null&&g(t,["serviceAccount"],N);const V=f(n,["tunedModelDisplayName"]);V!=null&&g(t,["tunedModelDisplayName"],V);const k=f(n,["veoTuningSpec"]);return k!=null&&g(t,["veoTuningSpec"],k),t}function $3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function nS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q3 extends As{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Mo(Ss.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:pm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=O3(e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Em(v))}else{const m=L3(e);return d=de("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>EI(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=H3(e);return d=de("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=G3(v),S=new VE;return Object.assign(S,T),S})}else{const m=F3(e);return d=de("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=z3(v),S=new VE;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=D3(e);u=de("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=M3(e);u=de("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=U3(e,e);return a=de("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>Em(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=V3(e);return a=de("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>$3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const X3=1024*1024*8,j3=3,Z3=1e3,eO=2,Kd="x-goog-upload-status";async function tO(n,e,t){var i;const o=await SI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function nO(n,e,t){var i;const o=await SI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=WC(a),d=new Eg;return Object.assign(d,u),d}async function SI(n,e,t){var i,o;let a=0,u=0,d=new mm(new Response),p="upload";for(a=n.size;u<a;){const m=Math.min(X3,a-u),v=n.slice(u,u+m);u+m>=a&&(p+=", finalize");let T=0,S=Z3;for(;T<j3&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Kd]));)T++,await sO(S),S=S*eO;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Kd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function iO(n){return{size:n.size,type:n.type}}function sO(n){return new Promise(e=>setTimeout(e,n))}class rO{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tO(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nO(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oO{create(e,t,i){return new aO(e,t,i)}}class aO{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iS="x-goog-api-key";class lO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(iS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(iS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uO="gl-node/";class cO{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=eP(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new lO(this.apiKey);this.apiClient=new wL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:uO+"web",uploader:new rO,downloader:new W3}),this.models=new JL(this.apiClient),this.live=new qL(this.apiClient,o,new oO),this.batches=new IV(this.apiClient),this.chats=new i4(this.models,this.apiClient),this.caches=new e4(this.apiClient),this.files=new h4(this.apiClient),this.operations=new YL(this.apiClient),this.authTokens=new a3(this.apiClient),this.tunings=new Q3(this.apiClient),this.fileSearchStores=new N3(this.apiClient)}}const AI={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},Tf=new cO({apiKey:AI.geminiApiKey});async function dO(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),i=await Tf.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:Me.OBJECT,properties:{items:{type:Me.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Me.OBJECT,properties:{analysis:{type:Me.STRING,description:"La description concise du vtement."},category:{type:Me.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Me.STRING,description:"La couleur principale du vtement."},material:{type:Me.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function fO(n){return n&&n.name&&Array.isArray(n.itemIds)}async function hO(n,e,t,i){const o=new Set((e||[]).flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (ID: ${S.id})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble, ID: ${S.id})`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${fO(i)?i.name:i.analysis} (ID: ${i.id})". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    Vtements et Ensembles disponibles (utilise leur ID) :
    ${p}
    ${m}

    RGLES :
    1. Base-toi **uniquement** sur les vtements et ensembles lists ci-dessus.
    2. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    3. Les articles marqus comme "(Ensemble)" sont insparables.

    Cre 3 tenues distinctes. Pour chaque tenue, fournis :
    1. Un "titre" court et accrocheur.
    2. Une "description" brve du style.
    3. Une liste "vetements" d'objets, o chaque objet contient "id" et "description" de l'article ou de l'ensemble utilis.

    Rponds en franais.
  `,T=await Tf.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Me.OBJECT,properties:{tenues:{type:TypeType.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Me.OBJECT,properties:{titre:{type:Me.STRING,description:"Le nom de la tenue."},description:{type:Me.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Me.ARRAY,description:"La liste des objets vtements composant la tenue.",items:{type:Me.OBJECT,properties:{id:{type:Me.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Me.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(T.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",T.text),new Error("L'IA a renvoy une rponse malforme.")}}async function pO(n,e){const t=n.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await Tf.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Me.OBJECT,properties:{summary:{type:Me.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Me.ARRAY,items:{type:Me.STRING},description:"Liste des points forts"},gaps:{type:Me.ARRAY,items:{type:Me.STRING},description:"Liste des manques"},suggestions:{type:Me.ARRAY,items:{type:Me.OBJECT,properties:{category:{type:Me.STRING},description:{type:Me.STRING},reason:{type:Me.STRING},priority:{type:Me.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Me.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(a){throw console.error("Erreur:",a),a}}async function mO(n,e,t,i){const o=new Set((e||[]).flatMap(T=>T.itemIds)),u=n.filter(T=>!o.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id})`).join(`
`),d=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage. Ta mission est de crer une valise optimise.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles (utilise leur ID) :
    ${p}
    
    RGLES :
    1. Cre une liste "valise" polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    4. Les articles marqus comme "(Ensemble)" sont insparables.

    Rponds avec un "titre", un "resume", et la liste "valise".
    La liste "valise" doit contenir des objets, o chaque objet contient "id" et "description".
    `,v=await Tf.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:Me.OBJECT,properties:{titre:{type:Me.STRING,description:"Le nom du plan de valise."},resume:{type:Me.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Me.ARRAY,description:"La liste des objets vtements  emporter.",items:{type:Me.OBJECT,properties:{id:{type:Me.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Me.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(T){throw console.error("Erreur de parsing JSON:",T),new Error("L'IA a renvoy une rponse malforme.")}}const gO=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),yO=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),sS=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),_O=()=>C.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rg=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),CI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),rS=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),II=()=>C.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),vO=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),TO=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),EO=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),SO=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),AO=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),wI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),bg=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),RI=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CO=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),IO=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),C.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),wO=({theme:n,toggleTheme:e,children:t})=>C.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:C.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[C.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",C.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),C.jsxs("div",{className:"flex items-center gap-4",children:[t,C.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?C.jsx(yO,{}):C.jsx(gO,{})})]})]})}),oS=({user:n})=>{var b,L,F;const[e,t]=he.useState(""),[i,o]=he.useState(""),[a,u]=he.useState(!1),[d,p]=he.useState(!1),m=he.useRef(null);he.useEffect(()=>{const B=j=>{m.current&&!m.current.contains(j.target)&&p(!1)};return d&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[d]);const v=async()=>{try{await Sx(Zl,Qk)}catch(B){console.error("Erreur de connexion Google:",B)}},T=async B=>{B.preventDefault();try{a?await Xb(Zl,e,i):await jb(Zl,e,i)}catch(j){console.error("Erreur d'authentification:",j)}},S=async()=>{try{await nx(Zl)}catch(B){console.error("Erreur de dconnexion:",B)}};return n?C.jsxs("div",{className:"relative",ref:m,children:[C.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[C.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((b=n.displayName)==null?void 0:b[0])||((L=n.email)==null?void 0:L[0])||"U").toUpperCase()}),C.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((F=n.email)==null?void 0:F.split("@")[0])})]}),d&&C.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[C.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[C.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),C.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),C.jsxs("button",{onClick:S,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",C.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),C.jsxs("button",{onClick:v,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[C.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[C.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),C.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),C.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),C.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),C.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),C.jsxs("div",{className:"relative my-6",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),C.jsx("div",{className:"relative flex justify-center text-sm",children:C.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),C.jsxs("form",{onSubmit:T,className:"space-y-4",children:[C.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:B=>t(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),C.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),C.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),C.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},RO=({onAnalyze:n,isAnalyzing:e})=>{const t=he.useRef(null),[i,o]=he.useState([]),[a,u]=he.useState(!1),[d,p]=he.useState(!1);he.useEffect(()=>{const G=()=>p(window.innerWidth<1024);return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),he.useEffect(()=>()=>{i.forEach(G=>URL.revokeObjectURL(G.preview))},[i]);const m=G=>{const $=G.map(ne=>({id:`${ne.name}-${ne.lastModified}-${Math.random()}`,file:ne,preview:URL.createObjectURL(ne)}));o(ne=>[...ne,...$])},v=G=>{G.target.files&&(m(Array.from(G.target.files)),G.target.value="")},T=()=>{var G;e||(G=t.current)==null||G.click()},S=G=>{d||(G.preventDefault(),G.stopPropagation(),u(!0))},b=G=>{d||(G.preventDefault(),G.stopPropagation(),u(!1))},L=G=>{d||(G.preventDefault(),G.stopPropagation())},F=G=>{d||(G.preventDefault(),G.stopPropagation(),u(!1),G.dataTransfer.files&&G.dataTransfer.files.length>0&&(m(Array.from(G.dataTransfer.files)),G.dataTransfer.clearData()))},B=G=>{const $=i.find(ne=>ne.id===G);$&&URL.revokeObjectURL($.preview),o(ne=>ne.filter(ae=>ae.id!==G))},j=()=>{i.length>0&&!e&&(n(i.map(G=>G.file)),o([]))};return C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:b,onDragOver:L,onDrop:F,children:[C.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),C.jsxs("div",{onClick:T,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[C.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),C.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?C.jsxs(C.Fragment,{children:[C.jsx(_O,{}),C.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:C.jsx(sS,{})}),C.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",C.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!d&&C.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[C.jsx("div",{className:"text-black transform-gpu scale-110",children:C.jsx(sS,{})}),C.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&C.jsxs("div",{className:"mt-8",children:[C.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),C.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(G=>C.jsxs("div",{className:"relative group aspect-square",children:[C.jsx("img",{src:G.preview,alt:G.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),C.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),C.jsx("button",{onClick:()=>B(G.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:C.jsx(CI,{})})]},G.id))}),C.jsxs("button",{onClick:j,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[C.jsx(Rg,{}),"Analyser les ",i.length," article(s)"]})]})]})},bO=({imageSrc:n,analysis:e,onClick:t,onRemove:i,isSelected:o,isSet:a})=>C.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[C.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),C.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!o&&C.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:C.jsx(bg,{})}),o&&C.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:C.jsx(RI,{})}),C.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:C.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),C.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:C.jsx(CI,{})})]}),xO={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},NO=({clothingItems:n,clothingSets:e=[],onItemClick:t,onDeleteItem:i,onCreateSet:o})=>{const[a,u]=he.useState("Hauts"),[d,p]=he.useState(xO),[m,v]=he.useState(!1),[T,S]=he.useState(new Set),b=he.useMemo(()=>e||[],[e]),L=he.useMemo(()=>new Set(b.flatMap(k=>k.itemIds||[])),[b]),F=n.length,B=[{name:"Hauts",icon:vO},{name:"Bas",icon:TO},{name:"Chaussures",icon:EO},{name:"Accessoires",icon:SO}],j=k=>{m?S(U=>{const D=new Set(U);return D.has(k.id)?D.delete(k.id):D.add(k.id),D}):t(k)},G=(k,U)=>{k.stopPropagation(),T.has(U)&&S(D=>{const Ke=new Set(D);return Ke.delete(U),Ke}),i(U)},$=he.useMemo(()=>n.filter(k=>{if(!(k.category===a))return!1;const D=a?d[a]:{color:"Toutes",material:"Toutes"},Ke=D.color==="Toutes"||k.color===D.color,Re=D.material==="Toutes"||k.material===D.material;return Ke&&Re}),[n,a,d]),ne=he.useMemo(()=>{if(!a)return[];const k=n.filter(U=>U.category===a).map(U=>U.color);return["Toutes",...Array.from(new Set(k))]},[n,a]),ae=he.useMemo(()=>{if(!a)return[];const k=n.filter(U=>U.category===a).map(U=>U.material);return["Toutes",...Array.from(new Set(k))]},[n,a]),ue=k=>{a&&p(U=>({...U,[a]:{...U[a],color:k}}))},M=k=>{a&&p(U=>({...U,[a]:{...U[a],material:k}}))},x=k=>{u(a===k?null:k)},N=()=>{v(!m),S(new Set)},V=()=>{if(T.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const k=window.prompt("Donnez un nom  cet ensemble :");k&&(o(k,Array.from(T)),N())};return F===0?C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[C.jsx(rS,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),C.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[C.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(rS,{className:"w-8 h-8 text-gold"}),C.jsxs("div",{children:[C.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[C.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[F," vtement",F>1?"s":""]})]})]}),m?C.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[C.jsx("button",{onClick:N,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),C.jsxs("button",{onClick:V,disabled:T.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",T.size,")"]})]}):C.jsxs("button",{onClick:N,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[C.jsx(bg,{}),"Crer un ensemble"]})]}),m&&C.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[C.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),C.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),C.jsx("div",{className:"space-y-6",children:B.map(({name:k,icon:U})=>{const D=n.filter(Re=>Re.category===k),Ke=a===k;return C.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[C.jsxs("button",{onClick:()=>x(k),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(U,{className:"w-5 h-5 text-gold"}),C.jsx("span",{className:"font-semibold text-lg",children:k}),C.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",D.length,")"]})]}),C.jsx(AO,{className:`w-5 h-5 transition-transform ${Ke?"rotate-180":""}`})]}),Ke&&C.jsxs("div",{className:"p-6 space-y-6",children:[C.jsxs("div",{className:"flex flex-wrap gap-4",children:[C.jsxs("div",{className:"flex-1 min-w-[200px]",children:[C.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),C.jsx("select",{value:d[k].color,onChange:Re=>ue(Re.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ne.map(Re=>C.jsx("option",{value:Re,children:Re},Re))})]}),C.jsxs("div",{className:"flex-1 min-w-[200px]",children:[C.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),C.jsx("select",{value:d[k].material,onChange:Re=>M(Re.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ae.map(Re=>C.jsx("option",{value:Re,children:Re},Re))})]})]}),$.length>0?C.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:$.map(Re=>C.jsx(bO,{imageSrc:Re.imageSrc,analysis:Re.analysis,onClick:()=>j(Re),onRemove:W=>G(W,Re.id),isSelected:T.has(Re.id),isSet:L.has(Re.id)&&!T.has(Re.id)},Re.id))}):C.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},k)})})]})},bI=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:o,weatherError:a})=>{const[u,d]=eu.useState(""),p=v=>{v.preventDefault(),t(u||"Casual")},m=["Casual","Soire chic","Travail (formel)"];return C.jsxs("div",{children:[C.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),C.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[o&&C.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",o," "]}),a&&C.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!o&&!a&&C.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),C.jsx("form",{onSubmit:p,children:C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),C.jsx("div",{className:"flex justify-center gap-2 mb-4",children:m.map(v=>C.jsx("button",{type:"button",onClick:()=>d(v),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${u===v?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:v},v))}),C.jsx("input",{id:"occasion",type:"text",value:u,onChange:v=>d(v.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),C.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[C.jsx(Rg,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},xI=({outfits:n,allClothingItems:e,allClothingSets:t})=>{const[i,o]=he.useState(null);he.useEffect(()=>{if(!i)return;const u=d=>{d.key==="Escape"&&o(null)};return window.addEventListener("keydown",u),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",u),document.body.style.overflow="auto"}},[i]);const a=u=>{const d=e.find(m=>m.id===u);return d||t.find(m=>m.id===u)};return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"mt-10 space-y-8",children:n.map((u,d)=>C.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[C.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:u.titre}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:u.description}),C.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:u.vetements.map((p,m)=>{const v=a(p.id),T=v?v.imageSrc:null;return C.jsx("button",{onClick:()=>T&&o(T),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!T,"aria-label":`Agrandir l'image de : ${p.description}`,children:T?C.jsx("img",{src:T,alt:p.description,className:"w-full h-full object-cover"}):C.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:C.jsx(II,{})})},m)})}),C.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:u.vetements.map((p,m)=>C.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:p.description},m))})]},d))}),i&&C.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>o(null),role:"dialog","aria-modal":"true",children:C.jsxs("div",{className:"relative",onClick:u=>u.stopPropagation(),children:[C.jsx("img",{src:i,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),C.jsx("button",{onClick:()=>o(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:C.jsx(wI,{})})]})})]})},MO=({item:n,clothingSets:e,onClose:t,onUpdate:i,onGenerateFrom:o,onRemoveSet:a})=>{const[u,d]=he.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(T=>T.itemIds.includes(n.id));he.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),he.useEffect(()=>{const T=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",T),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",T)}},[t]);const m=T=>{const{name:S,value:b}=T.target;d(L=>({...L,[S]:b}))},v=T=>{T.preventDefault(),i({...n,...u})};return C.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:T=>T.stopPropagation(),children:[C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),C.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:C.jsx(wI,{})})]}),C.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[C.jsxs("div",{className:"space-y-4 flex-grow",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),C.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),C.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(T=>C.jsx("option",{value:T,children:T},T))})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),C.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),C.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&C.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),C.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),C.jsxs("button",{type:"button",onClick:()=>{a(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[C.jsx(CO,{}),C.jsx("span",{children:"Dissocier"})]})]})]}),C.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[C.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[C.jsx(Rg,{}),"Crer une tenue avec cet article"]}),C.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},NI=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i})=>{const[o,a]=he.useState(3),[u,d]=he.useState(""),p=m=>{m.preventDefault();const v=u||"";v.trim()&&o>0&&t(o,v)};return C.jsxs("div",{children:[C.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),C.jsxs("form",{onSubmit:p,className:"space-y-6",children:[C.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[C.jsxs("div",{className:"sm:col-span-1",children:[C.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),C.jsx("input",{id:"days",type:"number",value:o,onChange:m=>a(parseInt(m.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),C.jsxs("div",{className:"sm:col-span-2",children:[C.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),C.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:m=>d(m.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),C.jsxs("button",{type:"submit",disabled:i||!(u||"").trim()||o<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[C.jsx(IO,{}),i?"Prparation...":"Gnrer la valise"]})]})]})},MI=({plan:n,allClothingItems:e,allClothingSets:t})=>{const i=o=>{const a=e.find(d=>d.id===o);return a||t.find(d=>d.id===o)};return C.jsx("div",{className:"mt-10",children:C.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[C.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),C.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((o,a)=>{const u=i(o.id),d=u?u.imageSrc:null;return C.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:o.description,children:[d?C.jsx("img",{src:d,alt:o.description,className:"w-full h-full object-cover"}):C.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:C.jsx(II,{})}),C.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:C.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:o.description})})]},a)})}),C.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((o,a)=>C.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:o.description},a))})]})})},DO=({onFilesSelected:n,isAnalyzing:e})=>{const[t,i]=he.useState(!1),o=a=>{const u=Array.from(a.target.files||[]);u.length>0&&(n(u),i(!1))};return C.jsxs(C.Fragment,{children:[C.jsx("button",{onClick:()=>i(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?C.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):C.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),t&&C.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>i(!1),children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:a=>a.stopPropagation(),children:[C.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),C.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("label",{className:"block",children:[C.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),C.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[C.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:C.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),C.jsxs("label",{className:"block",children:[C.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),C.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[C.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:C.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"font-semibold",children:"Galerie"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),C.jsx("button",{onClick:()=>i(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},kO=({onAnalyzeWardrobe:n,onScrollToOutfits:e,onScrollToVacation:t,onStartSetCreation:i,isAnalyzingWardrobe:o,clothingCount:a})=>C.jsxs("div",{className:"space-y-4 pb-24",children:[C.jsxs("div",{className:"text-center py-6",children:[C.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[C.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),C.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a," vtement",a>1?"s":""," dans votre collection"]})]}),C.jsxs("div",{className:"space-y-3 px-4",children:[a>=3&&C.jsx("button",{onClick:n,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?C.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):C.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),C.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:C.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),C.jsx("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:C.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),C.jsx("div",{className:"px-4 pt-6",children:C.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[C.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[C.jsx("p",{className:"text-2xl font-bold text-gold",children:a}),C.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),C.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[C.jsx("div",{className:"text-green-500",children:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),C.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),PO=({activeTab:n,onTabChange:e,counts:t})=>{const i=[{id:"home",label:"Home",icon:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:t.hauts},{id:"bas",label:"Bas",icon:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:t.bas},{id:"chaussures",label:"Chaussures",icon:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:t.chaussures},{id:"accessoires",label:"Accessoires",icon:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:t.accessoires}];return C.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:C.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(o=>{const a=n===o.id;return C.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[C.jsxs("div",{className:"relative",children:[o.icon,o.count!==null&&o.count>0&&C.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:o.count})]}),C.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:o.label})]},o.id)})})})},VO=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return C.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[C.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),C.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:C.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),C.jsxs("div",{className:"p-6 space-y-6",children:[C.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[C.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),C.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),C.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,a)=>C.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[C.jsx("span",{className:"text-green-500 mt-0.5",children:""}),C.jsx("span",{children:o})]},a))})]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[C.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),C.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,a)=>C.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[C.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),C.jsx("span",{children:o})]},a))})]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[C.jsx("span",{children:""})," Pices recommandes"]}),C.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,a)=>C.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[C.jsxs("div",{className:"flex justify-between items-start mb-3",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-lg",children:o.description}),C.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),C.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:i[o.priority]})]}),C.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[C.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&C.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},a))})]})]})]})})},UO=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,suggestedOutfits:o,onClose:a,weatherInfo:u,weatherError:d})=>C.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:a,children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:p=>p.stopPropagation(),children:[C.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[C.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h2",{className:"text-xl font-bold",children:" Crateur de Tenues"}),C.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),C.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[C.jsx(bI,{clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:u,weatherError:d}),i&&C.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[C.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),o.length>0&&C.jsx(xI,{outfits:o,allClothingItems:n,allClothingSets:e})]})]})}),LO=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i,vacationPlan:o,onCreateSet:a,onClose:u})=>C.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:u,children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:d=>d.stopPropagation(),children:[C.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[C.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h2",{className:"text-xl font-bold",children:" Planificateur de Valise"}),C.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),C.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[C.jsx(NI,{clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i}),i&&C.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[C.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&C.jsx(MI,{plan:o,allClothingItems:n,allClothingSets:e,onCreateSet:a})]})]})}),OO=({clothingItems:n,clothingSets:e,onClose:t,onCreateSet:i})=>{const[o,a]=he.useState(new Set),u=new Set(e.flatMap(T=>T.itemIds)),p=n.filter(T=>!u.has(T.id)).reduce((T,S)=>(T[S.category]||(T[S.category]=[]),T[S.category].push(S),T),{}),m=T=>{a(S=>{const b=new Set(S);return b.has(T)?b.delete(T):b.add(T),b})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const T=window.prompt("Donnez un nom  cet ensemble :");T&&i(T,Array.from(o))};return C.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:t,children:C.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up flex flex-col",onClick:T=>T.stopPropagation(),children:[C.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3 z-10",children:[C.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h2",{className:"text-xl font-bold",children:" Crer un ensemble"}),C.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:C.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),C.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[C.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),C.jsx("div",{className:"space-y-4",children:Object.keys(p).map(T=>p[T].length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-lg mb-2",children:T}),C.jsx("div",{className:"grid grid-cols-3 gap-3",children:p[T].map(S=>{const b=o.has(S.id);return C.jsxs("button",{onClick:()=>m(S.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:b?"#D4AF37":"transparent"},children:[b&&C.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:C.jsx(RI,{})}),C.jsx("div",{className:"aspect-square",children:C.jsx("img",{src:S.imageSrc,alt:S.analysis,className:"w-full h-full object-cover"})}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),C.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:S.analysis})]},S.id)})})]},T))})]}),o.size>0&&C.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10",children:C.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[C.jsx(bg,{}),"Lier ",o.size," article",o.size>1?"s":""]})})]})})},qO=async n=>{try{const e=pf(mf,"users",n,"items");return(await NC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},BO=async(n,e)=>{try{const t=pf(mf,"users",n,"items");return(await MC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un vtement:",t),t}},FO=async n=>{try{const e=pf(mf,"users",n,"sets");return(await NC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},HO=async(n,e)=>{try{const t=pf(mf,"users",n,"sets");return(await MC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un ensemble:",t),t}},zO=async(n,e,t)=>{try{const i=zk(Wk,`users/${n}/clothing/${t}.jpg`);return await Fk(i,e,"data_url"),await Hk(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},DI=he.createContext(void 0),GO=({children:n,user:e})=>{const[t,i]=he.useState([]),[o,a]=he.useState([]),[u,d]=he.useState(!1);he.useEffect(()=>{(async()=>{if(e)try{const F=await qO(e.uid);i(F);const B=await FO(e.uid);a(B)}catch(F){console.error("Erreur lors du chargement des donnes:",F)}else i([]),a([])})()},[e]);const p=he.useCallback(async L=>{if(!(L.length===0||!e)){d(!0);try{const F=L.map(ae=>new Promise((ue,M)=>{const x=new FileReader;x.onload=()=>ue(x.result),x.onerror=M,x.readAsDataURL(ae)})),B=await Promise.all(F),j=B.map(ae=>ae.split(",")[1]),G=await dO(j),$=Math.min(G.length,L.length),ne=[];for(let ae=0;ae<$;ae++){const ue=G[ae];try{const M=await BO(e.uid,ue),x=await zO(e.uid,B[ae],M);await v(e.uid,M,{imageSrc:x}),ne.push({...ue,id:M,imageSrc:x})}catch(M){console.error(`chec de cration/upload pour ${L[ae].name}.`,M)}}i(ae=>[...ae,...ne])}catch(F){console.error("Erreur lors de l'analyse par lot:",F)}finally{d(!1)}}},[e]),m=he.useCallback(async L=>{if(e)try{await m(e.uid,L),i(F=>F.filter(B=>B.id!==L)),a(F=>F.map(B=>({...B,itemIds:B.itemIds.filter(j=>j!==L)})))}catch(F){console.error("Erreur suppression item:",F)}},[e]),v=he.useCallback(async L=>{if(e)try{await v(e.uid,L.id,L),i(F=>F.map(B=>B.id===L.id?L:B))}catch(F){console.error("Erreur mise  jour item:",F)}},[e]),T=he.useCallback(async(L,F)=>{var G;if(!e)return;const B=((G=t.find($=>$.id===F[0]))==null?void 0:G.imageSrc)||"",j={name:L,itemIds:F,imageSrc:B};try{const $=await HO(e.uid,j);a(ne=>[...ne,{...j,id:$}])}catch($){console.error("Erreur cration set:",$)}},[e,t]),S=he.useCallback(async L=>{if(e)try{await S(e.uid,L),a(F=>F.filter(B=>B.id!==L))}catch(F){console.error("Erreur suppression set:",F)}},[e]),b={clothingItems:t,clothingSets:o,isAnalyzing:u,analyzeClothingItems:p,deleteClothingItem:m,updateClothingItem:v,createClothingSet:T,deleteClothingSet:S};return C.jsx(DI.Provider,{value:b,children:n})},JO=()=>{const n=he.useContext(DI);if(n===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return n},YO=()=>{const[n,e]=he.useState(null),[t,i]=he.useState(null),[o,a]=he.useState([]),[u,d]=he.useState(!1),[p,m]=he.useState(null),[v,T]=he.useState(!1),[S,b]=he.useState(null),[L,F]=he.useState(!1),[B,j]=he.useState("home"),[G,$]=he.useState(!1),[ne,ae]=he.useState(!1),[ue,M]=he.useState(!1),[x,N]=he.useState(null),[V,k]=he.useState(null),{clothingItems:U,clothingSets:D,isAnalyzing:Ke,analyzeClothingItems:Re,deleteClothingItem:W,createClothingSet:le,updateClothingItem:_e,deleteClothingSet:Ge}=JO(),ve=eu.useMemo(()=>U||[],[U]),O=eu.useMemo(()=>D||[],[D]);eu.useMemo(()=>new Set(O.flatMap(Ce=>Ce.itemIds||[])),[O]),he.useEffect(()=>{const Ce=async Pt=>{const Bn=Pt.coords.latitude,ri=Pt.coords.longitude,ws=AI.openWeatherApiKey,Bi=`https://api.openweathermap.org/data/2.5/weather?lat=${Bn}&lon=${ri}&appid=${ws}&units=metric&lang=fr`;try{const yi=await fetch(Bi);if(!yi.ok)throw new Error("Impossible de rcuprer la mto.");const qr=await yi.json(),Br=`${Math.round(qr.main.temp)}C, ${qr.weather[0].description},  ${qr.name}`;N(Br),k(null)}catch{k("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(Ce,()=>k("Activez la golocalisation pour la mto.")):k("Golocalisation non supporte.")},[]);const ee=he.useCallback(async(Ce,Pt)=>{if(ve.length===0){i("Veuillez d'abord ajouter des vtements.");return}d(!0),i(null);const Bn=x?`Mto actuelle : ${x}. Occasion : ${Ce}`:`Occasion : ${Ce}`;try{const ri=await hO(ve,O,Bn,Pt);a(ri)}catch(ri){i(ri instanceof Error?ri.message:"Erreur inconnue")}finally{d(!1)}},[ve,O,x]),oe=he.useCallback(async(Ce,Pt)=>{if(ve.length===0){i("Veuillez d'abord ajouter des vtements.");return}T(!0),i(null);try{const Bn=await mO(ve,O,Ce,Pt);m(Bn)}catch(Bn){i(Bn instanceof Error?Bn.message:"Erreur inconnue")}finally{T(!1)}},[ve,O]),pe=he.useCallback(async()=>{if(ve.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}F(!0),i(null);try{const Ce=await pO(ve,O);b(Ce)}catch(Ce){i(Ce instanceof Error?Ce.message:"Erreur inconnue")}finally{F(!1)}},[ve,O]),Ae=he.useCallback(()=>$(!0),[]),ke=he.useCallback(()=>ae(!0),[]),Le=Ce=>e(Ce),kt=()=>e(null),at=Ce=>{W(Ce).catch(i),e(null)},qn=Ce=>{_e(Ce).catch(i),e(Ce)},ii=Ce=>{const Pt=`Focus sur l'article : ${Ce.analysis}`;ee(Pt,Ce),e(null),window.innerWidth<768&&$(!0)},si=he.useCallback((Ce,Pt)=>{le(Ce,Pt).catch(i)},[le]),Is=he.useCallback(Ce=>{Ge(Ce).catch(i)},[Ge]),bn={hauts:ve.filter(Ce=>Ce.category==="Hauts").length,bas:ve.filter(Ce=>Ce.category==="Bas").length,chaussures:ve.filter(Ce=>Ce.category==="Chaussures").length,accessoires:ve.filter(Ce=>Ce.category==="Accessoires").length};return B==="home"||ve.filter(Ce=>B==="hauts"?Ce.category==="Hauts":B==="bas"?Ce.category==="Bas":B==="chaussures"?Ce.category==="Chaussures":B==="accessoires"?Ce.category==="Accessoires":!1),C.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[t&&C.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[C.jsx("strong",{className:"font-bold",children:"Erreur: "}),C.jsx("span",{className:"block sm:inline",children:t})]}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[C.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[ve.length>=3&&C.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),C.jsx("button",{onClick:pe,disabled:L,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:L?"Analyse...":"Analyser ma garde-robe"})]}),C.jsx("div",{className:"hidden md:block",children:C.jsx(RO,{onAnalyze:Re,isAnalyzing:Ke})}),C.jsx("div",{className:"hidden md:block",children:C.jsx(NO,{clothingItems:ve,clothingSets:O,onItemClick:Le,onDeleteItem:at,onCreateSet:si})}),C.jsxs("div",{className:"md:hidden",children:[B==="home"&&C.jsx(kO,{onAnalyzeWardrobe:pe,onScrollToOutfits:Ae,onScrollToVacation:ke,onStartSetCreation:()=>M(!0),isAnalyzingWardrobe:L,clothingCount:ve.length}),B!=="home"&&C.jsx("div",{className:"pb-24"})]})]}),C.jsxs("div",{className:"space-y-10 hidden md:block",children:[C.jsx("div",{id:"outfit-generator",children:C.jsx(bI,{clothingItems:ve,clothingSets:O,onGenerate:ee,isGenerating:u,weatherInfo:x,weatherError:V})}),o.length>0&&C.jsx(xI,{outfits:o,allClothingItems:ve,allClothingSets:O}),C.jsx("div",{id:"vacation-planner",children:C.jsx(NI,{clothingItems:ve,clothingSets:O,onGeneratePlan:oe,isGenerating:v})}),p&&C.jsx(MI,{plan:p,allClothingItems:ve,allClothingSets:O})]})]}),n&&C.jsx(MO,{item:n,clothingSets:O,onClose:kt,onUpdate:qn,onGenerateFrom:ii,onRemoveSet:Is}),S&&C.jsx(VO,{analysis:S,onClose:()=>b(null)}),C.jsx(DO,{onFilesSelected:Re,isAnalyzing:Ke}),C.jsx(PO,{activeTab:B,onTabChange:j,counts:bn}),G&&C.jsx(UO,{clothingItems:ve,clothingSets:O,onGenerate:ee,isGenerating:u,suggestedOutfits:o,onClose:()=>$(!1),weatherInfo:x,weatherError:V}),ne&&C.jsx(LO,{clothingItems:ve,clothingSets:O,onGeneratePlan:oe,isGenerating:v,vacationPlan:p,onCreateSet:si,onClose:()=>ae(!1)}),ue&&C.jsx(OO,{clothingItems:ve,clothingSets:O,onClose:()=>M(!1),onCreateSet:(Ce,Pt)=>{si(Ce,Pt),M(!1)}})]})},KO=()=>{const[n,e]=he.useState(null),[t,i]=he.useState("dark");he.useEffect(()=>{const a=tx(Zl,u=>{e(u)});return()=>a()},[]),he.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const o=()=>{i(a=>a==="light"?"dark":"light")};return C.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:n?C.jsxs(C.Fragment,{children:[C.jsx(wO,{theme:t,toggleTheme:o,children:C.jsx(oS,{user:n})}),C.jsx(GO,{user:n,children:C.jsx(YO,{})})]}):C.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:C.jsx(oS,{user:n})})})},kI=document.getElementById("root");if(!kI)throw new Error("L'lment root est introuvable dans le DOM");const $O=yR.createRoot(kI);$O.render(C.jsx(eu.StrictMode,{children:C.jsx(KO,{})}));
