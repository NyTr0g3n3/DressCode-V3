(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function $1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ny={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function HL(){if(gx)return $c;gx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return $c.Fragment=e,$c.jsx=n,$c.jsxs=n,$c}var vx;function GL(){return vx||(vx=1,Ny.exports=HL()),Ny.exports}var S=GL(),Dy={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function jL(){if(yx)return Ke;yx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,R={};function V(j,ee,ne){this.props=j,this.context=ee,this.refs=R,this.updater=ne||A}V.prototype.isReactComponent={},V.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},V.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=V.prototype;function O(j,ee,ne){this.props=j,this.context=ee,this.refs=R,this.updater=ne||A}var G=O.prototype=new k;G.constructor=O,I(G,V.prototype),G.isPureReactComponent=!0;var K=Array.isArray;function H(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(j,ee,ne){var se=ne.ref;return{$$typeof:t,type:j,key:ee,ref:se!==void 0?se:null,props:ne}}function B(j,ee){return M(j.type,ee,j.props)}function q(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function F(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ne){return ee[ne]})}var U=/\/+/g;function ye(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):ee.toString(36)}function Ne(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(H,H):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,ee,ne,se,ge){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var Ie=!1;if(j===null)Ie=!0;else switch(Oe){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(j.$$typeof){case t:case e:Ie=!0;break;case p:return Ie=j._init,W(Ie(j._payload),ee,ne,se,ge)}}if(Ie)return ge=ge(j),Ie=se===""?"."+ye(j,0):se,K(ge)?(ne="",Ie!=null&&(ne=Ie.replace(U,"$&/")+"/"),W(ge,ee,ne,"",function(qn){return qn})):ge!=null&&(q(ge)&&(ge=B(ge,ne+(ge.key==null||j&&j.key===ge.key?"":(""+ge.key).replace(U,"$&/")+"/")+Ie)),ee.push(ge)),1;Ie=0;var Vt=se===""?".":se+":";if(K(j))for(var Ct=0;Ct<j.length;Ct++)se=j[Ct],Oe=Vt+ye(se,Ct),Ie+=W(se,ee,ne,Oe,ge);else if(Ct=b(j),typeof Ct=="function")for(j=Ct.call(j),Ct=0;!(se=j.next()).done;)se=se.value,Oe=Vt+ye(se,Ct++),Ie+=W(se,ee,ne,Oe,ge);else if(Oe==="object"){if(typeof j.then=="function")return W(Ne(j),ee,ne,se,ge);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function oe(j,ee,ne){if(j==null)return j;var se=[],ge=0;return W(j,se,"","",function(Oe){return ee.call(ne,Oe,ge++)}),se}function he(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ne){(j._status===0||j._status===-1)&&(j._status=1,j._result=ne)},function(ne){(j._status===0||j._status===-1)&&(j._status=2,j._result=ne)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var xe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ae={map:oe,forEach:function(j,ee,ne){oe(j,function(){ee.apply(this,arguments)},ne)},count:function(j){var ee=0;return oe(j,function(){ee++}),ee},toArray:function(j){return oe(j,function(ee){return ee})||[]},only:function(j){if(!q(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ke.Activity=y,Ke.Children=Ae,Ke.Component=V,Ke.Fragment=n,Ke.Profiler=r,Ke.PureComponent=O,Ke.StrictMode=i,Ke.Suspense=d,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},Ke.cache=function(j){return function(){return j.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(j,ee,ne){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var se=I({},j.props),ge=j.key;if(ee!=null)for(Oe in ee.key!==void 0&&(ge=""+ee.key),ee)!N.call(ee,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ee.ref===void 0||(se[Oe]=ee[Oe]);var Oe=arguments.length-2;if(Oe===1)se.children=ne;else if(1<Oe){for(var Ie=Array(Oe),Vt=0;Vt<Oe;Vt++)Ie[Vt]=arguments[Vt+2];se.children=Ie}return M(j.type,ge,se)},Ke.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Ke.createElement=function(j,ee,ne){var se,ge={},Oe=null;if(ee!=null)for(se in ee.key!==void 0&&(Oe=""+ee.key),ee)N.call(ee,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ge[se]=ee[se]);var Ie=arguments.length-2;if(Ie===1)ge.children=ne;else if(1<Ie){for(var Vt=Array(Ie),Ct=0;Ct<Ie;Ct++)Vt[Ct]=arguments[Ct+2];ge.children=Vt}if(j&&j.defaultProps)for(se in Ie=j.defaultProps,Ie)ge[se]===void 0&&(ge[se]=Ie[se]);return M(j,Oe,ge)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(j){return{$$typeof:c,render:j}},Ke.isValidElement=q,Ke.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:he}},Ke.memo=function(j,ee){return{$$typeof:f,type:j,compare:ee===void 0?null:ee}},Ke.startTransition=function(j){var ee=D.T,ne={};D.T=ne;try{var se=j(),ge=D.S;ge!==null&&ge(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(H,xe)}catch(Oe){xe(Oe)}finally{ee!==null&&ne.types!==null&&(ee.types=ne.types),D.T=ee}},Ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ke.use=function(j){return D.H.use(j)},Ke.useActionState=function(j,ee,ne){return D.H.useActionState(j,ee,ne)},Ke.useCallback=function(j,ee){return D.H.useCallback(j,ee)},Ke.useContext=function(j){return D.H.useContext(j)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(j,ee){return D.H.useDeferredValue(j,ee)},Ke.useEffect=function(j,ee){return D.H.useEffect(j,ee)},Ke.useEffectEvent=function(j){return D.H.useEffectEvent(j)},Ke.useId=function(){return D.H.useId()},Ke.useImperativeHandle=function(j,ee,ne){return D.H.useImperativeHandle(j,ee,ne)},Ke.useInsertionEffect=function(j,ee){return D.H.useInsertionEffect(j,ee)},Ke.useLayoutEffect=function(j,ee){return D.H.useLayoutEffect(j,ee)},Ke.useMemo=function(j,ee){return D.H.useMemo(j,ee)},Ke.useOptimistic=function(j,ee){return D.H.useOptimistic(j,ee)},Ke.useReducer=function(j,ee,ne){return D.H.useReducer(j,ee,ne)},Ke.useRef=function(j){return D.H.useRef(j)},Ke.useState=function(j){return D.H.useState(j)},Ke.useSyncExternalStore=function(j,ee,ne){return D.H.useSyncExternalStore(j,ee,ne)},Ke.useTransition=function(){return D.H.useTransition()},Ke.version="19.2.1",Ke}var _x;function j_(){return _x||(_x=1,Dy.exports=jL()),Dy.exports}var z=j_();const Dn=$1(z);var My={exports:{}},Kc={},Py={exports:{}},ky={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function $L(){return Tx||(Tx=1,(function(t){function e(W,oe){var he=W.length;W.push(oe);e:for(;0<he;){var xe=he-1>>>1,Ae=W[xe];if(0<r(Ae,oe))W[xe]=oe,W[he]=Ae,he=xe;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],he=W.pop();if(he!==oe){W[0]=he;e:for(var xe=0,Ae=W.length,j=Ae>>>1;xe<j;){var ee=2*(xe+1)-1,ne=W[ee],se=ee+1,ge=W[se];if(0>r(ne,he))se<Ae&&0>r(ge,ne)?(W[xe]=ge,W[se]=he,xe=se):(W[xe]=ne,W[ee]=he,xe=ee);else if(se<Ae&&0>r(ge,he))W[xe]=ge,W[se]=he,xe=se;else break e}}return oe}function r(W,oe){var he=W.sortIndex-oe.sortIndex;return he!==0?he:W.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,y=null,_=3,b=!1,A=!1,I=!1,R=!1,V=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function G(W){for(var oe=n(f);oe!==null;){if(oe.callback===null)i(f);else if(oe.startTime<=W)i(f),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=n(f)}}function K(W){if(I=!1,G(W),!A)if(n(d)!==null)A=!0,H||(H=!0,F());else{var oe=n(f);oe!==null&&Ne(K,oe.startTime-W)}}var H=!1,D=-1,N=5,M=-1;function B(){return R?!0:!(t.unstable_now()-M<N)}function q(){if(R=!1,H){var W=t.unstable_now();M=W;var oe=!0;try{e:{A=!1,I&&(I=!1,k(D),D=-1),b=!0;var he=_;try{t:{for(G(W),y=n(d);y!==null&&!(y.expirationTime>W&&B());){var xe=y.callback;if(typeof xe=="function"){y.callback=null,_=y.priorityLevel;var Ae=xe(y.expirationTime<=W);if(W=t.unstable_now(),typeof Ae=="function"){y.callback=Ae,G(W),oe=!0;break t}y===n(d)&&i(d),G(W)}else i(d);y=n(d)}if(y!==null)oe=!0;else{var j=n(f);j!==null&&Ne(K,j.startTime-W),oe=!1}}break e}finally{y=null,_=he,b=!1}oe=void 0}}finally{oe?F():H=!1}}}var F;if(typeof O=="function")F=function(){O(q)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ye=U.port2;U.port1.onmessage=q,F=function(){ye.postMessage(null)}}else F=function(){V(q,0)};function Ne(W,oe){D=V(function(){W(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(W){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var he=_;_=oe;try{return W()}finally{_=he}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var he=_;_=W;try{return oe()}finally{_=he}},t.unstable_scheduleCallback=function(W,oe,he){var xe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?xe+he:xe):he=xe,W){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=he+Ae,W={id:p++,callback:oe,priorityLevel:W,startTime:he,expirationTime:Ae,sortIndex:-1},he>xe?(W.sortIndex=he,e(f,W),n(d)===null&&W===n(f)&&(I?(k(D),D=-1):I=!0,Ne(K,he-xe))):(W.sortIndex=Ae,e(d,W),A||b||(A=!0,H||(H=!0,F()))),W},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(W){var oe=_;return function(){var he=_;_=oe;try{return W.apply(this,arguments)}finally{_=he}}}})(ky)),ky}var Ex;function KL(){return Ex||(Ex=1,Py.exports=$L()),Py.exports}var Vy={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function YL(){if(Sx)return ti;Sx=1;var t=j_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ti.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},ti.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},ti.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ti.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ti.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ti.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ti.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ti.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ti.requestFormReset=function(d){i.d.r(d)},ti.unstable_batchedUpdates=function(d,f){return d(f)},ti.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},ti.useFormStatus=function(){return l.H.useHostTransitionStatus()},ti.version="19.2.1",ti}var bx;function K1(){if(bx)return Vy.exports;bx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vy.exports=YL(),Vy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx;function JL(){if(wx)return Kc;wx=1;var t=KL(),e=j_(),n=K1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var T=u.return;if(T===null)break;var E=T.alternate;if(E===null){if(h=T.return,h!==null){u=h;continue}break}if(T.child===E.child){for(E=T.child;E;){if(E===u)return d(T),s;if(E===h)return d(T),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=T,h=E;else{for(var x=!1,P=T.child;P;){if(P===u){x=!0,u=T,h=E;break}if(P===h){x=!0,h=T,u=E;break}P=P.sibling}if(!x){for(P=E.child;P;){if(P===u){x=!0,u=E,h=T;break}if(P===h){x=!0,h=E,u=T;break}P=P.sibling}if(!x)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case V:return"Profiler";case R:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case O:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return a=s.displayName||null,a!==null?a:ye(s.type)||"Memo";case N:a=s._payload,s=s._init;try{return ye(s(a))}catch{}}return null}var Ne=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},xe=[],Ae=-1;function j(s){return{current:s}}function ee(s){0>Ae||(s.current=xe[Ae],xe[Ae]=null,Ae--)}function ne(s,a){Ae++,xe[Ae]=s.current,s.current=a}var se=j(null),ge=j(null),Oe=j(null),Ie=j(null);function Vt(s,a){switch(ne(Oe,a),ne(ge,s),ne(se,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Fw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Fw(a),s=Bw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(se),ne(se,s)}function Ct(){ee(se),ee(ge),ee(Oe)}function qn(s){s.memoizedState!==null&&ne(Ie,s);var a=se.current,u=Bw(a,s.type);a!==u&&(ne(ge,s),ne(se,u))}function Ai(s){ge.current===s&&(ee(se),ee(ge)),Ie.current===s&&(ee(Ie),qc._currentValue=he)}var Ft,Hn;function Cn(s){if(Ft===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ft=a&&a[1]||"",Hn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+s+Hn}var Pn=!1;function di(s,a){if(!s||Pn)return"";Pn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ie){var te=ie}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(ie){te=ie}s.call(ce.prototype)}}else{try{throw Error()}catch(ie){te=ie}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),x=E[0],P=E[1];if(x&&P){var $=x.split(`
`),Z=P.split(`
`);for(T=h=0;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;for(;T<Z.length&&!Z[T].includes("DetermineComponentFrameRoot");)T++;if(h===$.length||T===Z.length)for(h=$.length-1,T=Z.length-1;1<=h&&0<=T&&$[h]!==Z[T];)T--;for(;1<=h&&0<=T;h--,T--)if($[h]!==Z[T]){if(h!==1||T!==1)do if(h--,T--,0>T||$[h]!==Z[T]){var ae=`
`+$[h].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=h&&0<=T);break}}}finally{Pn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Cn(u):""}function or(s,a){switch(s.tag){case 26:case 27:case 5:return Cn(s.type);case 16:return Cn("Lazy");case 13:return s.child!==a&&a!==null?Cn("Suspense Fallback"):Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return di(s.type,!1);case 11:return di(s.type.render,!1);case 1:return di(s.type,!0);case 31:return Cn("Activity");default:return""}}function Ci(s){try{var a="",u=null;do a+=or(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ii=Object.prototype.hasOwnProperty,kn=t.unstable_scheduleCallback,fi=t.unstable_cancelCallback,Ar=t.unstable_shouldYield,Gi=t.unstable_requestPaint,wt=t.unstable_now,vn=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,Xt=t.unstable_NormalPriority,tn=t.unstable_LowPriority,Cr=t.unstable_IdlePriority,fa=t.log,In=t.unstable_setDisableYieldValue,hi=null,Bt=null;function le(s){if(typeof fa=="function"&&In(s),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(hi,s)}catch{}}var pe=Math.clz32?Math.clz32:Ve,Ee=Math.log,qe=Math.LN2;function Ve(s){return s>>>=0,s===0?32:31-(Ee(s)/qe|0)|0}var Qe=256,Je=262144,tt=4194304;function nt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Pe(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var T=0,E=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var P=h&134217727;return P!==0?(h=P&~E,h!==0?T=nt(h):(x&=P,x!==0?T=nt(x):u||(u=P&~s,u!==0&&(T=nt(u))))):(P=h&~E,P!==0?T=nt(P):x!==0?T=nt(x):u||(u=h&~s,u!==0&&(T=nt(u)))),T===0?0:a!==0&&a!==T&&(a&E)===0&&(E=T&-T,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:T}function He(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function cn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ri(){var s=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),s}function Kt(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function It(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ht(s,a,u,h,T,E){var x=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var P=s.entanglements,$=s.expirationTimes,Z=s.hiddenUpdates;for(u=x&~u;0<u;){var ae=31-pe(u),ce=1<<ae;P[ae]=0,$[ae]=-1;var te=Z[ae];if(te!==null)for(Z[ae]=null,ae=0;ae<te.length;ae++){var ie=te[ae];ie!==null&&(ie.lane&=-536870913)}u&=~ce}h!==0&&Gn(s,h,0),E!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=E&~(x&~a))}function Gn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-pe(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Ot(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-pe(u),T=1<<h;T&a|s[h]&a&&(s[h]|=a),u&=~T}}function dn(s,a){var u=a&-a;return u=(u&42)!==0?1:Ni(u),(u&(s.suspendedLanes|a))!==0?0:u}function Ni(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Rn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function yn(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:ux(s.type))}function ji(s,a){var u=oe.p;try{return oe.p=s,a()}finally{oe.p=u}}var me=Math.random().toString(36).slice(2),be="__reactFiber$"+me,ze="__reactProps$"+me,Pt="__reactContainer$"+me,Di="__reactEvents$"+me,pi="__reactListeners$"+me,Ir="__reactHandles$"+me,mi="__reactResources$"+me,Mi="__reactMarker$"+me;function ar(s){delete s[be],delete s[ze],delete s[Di],delete s[pi],delete s[Ir]}function Pi(s){var a=s[be];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Pt]||u[be]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Kw(s);s!==null;){if(u=s[be])return u;s=Kw(s)}return a}s=u,u=s.parentNode}return null}function lr(s){if(s=s[be]||s[Pt]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Kr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function gi(s){var a=s[mi];return a||(a=s[mi]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(s){s[Mi]=!0}var Rr=new Set,Nr={};function vi(s,a){Yr(s,a),Yr(s+"Capture",a)}function Yr(s,a){for(Nr[s]=a,s=0;s<a.length;s++)Rr.add(a[s])}var Dg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zu={},ec={};function bf(s){return Ii.call(ec,s)?!0:Ii.call(Zu,s)?!1:Dg.test(s)?ec[s]=!0:(Zu[s]=!0,!1)}function Ws(s,a,u){if(bf(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Xs(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function ur(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function yi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wf(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var T=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return T.call(this)},set:function(x){u=""+x,E.call(this,x)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function pl(s){if(!s._valueTracker){var a=wf(s)?"checked":"value";s._valueTracker=Mg(s,a,""+s[a])}}function tc(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=wf(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ml(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var gs=/[\n"\\]/g;function nn(s){return s.replace(gs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Qs(s,a,u,h,T,E,x,P){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yi(a)):s.value!==""+yi(a)&&(s.value=""+yi(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?gl(s,x,yi(a)):u!=null?gl(s,x,yi(u)):h!=null&&s.removeAttribute("value"),T==null&&E!=null&&(s.defaultChecked=!!E),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.name=""+yi(P):s.removeAttribute("name")}function ha(s,a,u,h,T,E,x,P){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){pl(s);return}u=u!=null?""+yi(u):"",a=a!=null?""+yi(a):u,P||a===s.value||(s.value=a),s.defaultValue=a}h=h??T,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=P?s.checked:!!h,s.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),pl(s)}function gl(s,a,u){a==="number"&&ml(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function pt(s,a,u,h){if(s=s.options,a){a={};for(var T=0;T<u.length;T++)a["$"+u[T]]=!0;for(u=0;u<s.length;u++)T=a.hasOwnProperty("$"+s[u].value),s[u].selected!==T&&(s[u].selected=T),T&&h&&(s[u].defaultSelected=!0)}else{for(u=""+yi(u),a=null,T=0;T<s.length;T++){if(s[T].value===u){s[T].selected=!0,h&&(s[T].defaultSelected=!0);return}a!==null||s[T].disabled||(a=s[T])}a!==null&&(a.selected=!0)}}function pa(s,a,u){if(a!=null&&(a=""+yi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+yi(u):""}function Zs(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Ne(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=yi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),pl(s)}function cr(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Pg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nc(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||Pg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function xf(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var T in a)h=a[T],a.hasOwnProperty(T)&&u[T]!==h&&nc(s,T,h)}else for(var E in a)a.hasOwnProperty(E)&&nc(s,E,a[E])}function ic(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jr(s){return Vg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vn(){}var vl=null;function yl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vs=null,$i=null;function Af(s){var a=lr(s);if(a&&(s=a.stateNode)){var u=s[ze]||null;e:switch(s=a.stateNode,a.type){case"input":if(Qs(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var T=h[ze]||null;if(!T)throw Error(i(90));Qs(h,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&tc(h)}break e;case"textarea":pa(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&pt(s,!!u.multiple,a,!1)}}}var rc=!1;function Cf(s,a,u){if(rc)return s(a,u);rc=!0;try{var h=s(a);return h}finally{if(rc=!1,(vs!==null||$i!==null)&&(bh(),vs&&(a=vs,s=$i,$i=vs=null,Af(a),s)))for(a=0;a<s.length;a++)Af(s[a])}}function ki(s,a){var u=s.stateNode;if(u===null)return null;var h=u[ze]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(Dr)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{sc=!1}var Ki=null,_l=null,Xr=null;function eo(){if(Xr)return Xr;var s,a=_l,u=a.length,h,T="value"in Ki?Ki.value:Ki.textContent,E=T.length;for(s=0;s<u&&a[s]===T[s];s++);var x=u-s;for(h=1;h<=x&&a[u-h]===T[E-h];h++);return Xr=T.slice(s,1<h?1-h:void 0)}function ma(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function to(){return!0}function zt(){return!1}function ei(s){function a(u,h,T,E,x){this._reactName=u,this._targetInst=T,this.type=h,this.nativeEvent=E,this.target=x,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(u=s[P],this[P]=u?u(E):E[P]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?to:zt,this.isPropagationStopped=zt,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),a}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=ei(ys),no=y({},ys,{view:0,detail:0}),If=ei(no),io,Tl,_i,va=y({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:so,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==_i&&(_i&&s.type==="mousemove"?(io=s.screenX-_i.screenX,Tl=s.screenY-_i.screenY):Tl=io=0,_i=s),io)},movementY:function(s){return"movementY"in s?s.movementY:Tl}}),Rf=ei(va),ya=y({},va,{dataTransfer:0}),Nf=ei(ya),oc=y({},no,{relatedTarget:0}),ro=ei(oc),Df=y({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),El=ei(Df),Lg=y({},ys,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mf=ei(Lg),_a=y({},ys,{data:0}),ac=ei(_a),Pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kf(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uc[s])?!!a[s]:!1}function so(){return kf}var Vf=y({},no,{key:function(s){if(s.key){var a=Pf[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ma(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:so,charCode:function(s){return s.type==="keypress"?ma(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ma(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Lf=ei(Vf),_s=y({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=ei(_s),Of=y({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:so}),Uf=ei(Of),Ff=y({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sl=ei(Ff),Ti=y({},va,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Bf=ei(Ti),zf=y({},ys,{newState:0,oldState:0}),oo=ei(zf),g=[9,13,27,32],w=Dr&&"CompositionEvent"in window,C=null;Dr&&"documentMode"in document&&(C=document.documentMode);var L=Dr&&"TextEvent"in window&&!C,X=Dr&&(!w||C&&8<C&&11>=C),re=" ",ve=!1;function Et(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ze=!1;function Ln(s,a){switch(s){case"compositionend":return _n(a);case"keypress":return a.which!==32?null:(ve=!0,re);case"textInput":return s=a.data,s===re&&ve?null:s;default:return null}}function On(s,a){if(Ze)return s==="compositionend"||!w&&Et(s,a)?(s=eo(),Xr=_l=Ki=null,Ze=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return X&&a.locale!=="ko"?null:a.data;default:return null}}var ao={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ao[s.type]:a==="textarea"}function Ta(s,a,u,h){vs?$i?$i.push(h):$i=[h]:vs=h,a=Nh(a,"onChange"),0<a.length&&(u=new ga("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Ts=null,dc=null;function gV(s){Pw(s,0)}function qf(s){var a=Kr(s);if(tc(a))return s}function QE(s,a){if(s==="change")return a}var ZE=!1;if(Dr){var Og;if(Dr){var Ug="oninput"in document;if(!Ug){var eS=document.createElement("div");eS.setAttribute("oninput","return;"),Ug=typeof eS.oninput=="function"}Og=Ug}else Og=!1;ZE=Og&&(!document.documentMode||9<document.documentMode)}function tS(){Ts&&(Ts.detachEvent("onpropertychange",nS),dc=Ts=null)}function nS(s){if(s.propertyName==="value"&&qf(dc)){var a=[];Ta(a,dc,s,yl(s)),Cf(gV,a)}}function vV(s,a,u){s==="focusin"?(tS(),Ts=a,dc=u,Ts.attachEvent("onpropertychange",nS)):s==="focusout"&&tS()}function yV(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qf(dc)}function _V(s,a){if(s==="click")return qf(a)}function TV(s,a){if(s==="input"||s==="change")return qf(a)}function EV(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Yi=typeof Object.is=="function"?Object.is:EV;function fc(s,a){if(Yi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var T=u[h];if(!Ii.call(a,T)||!Yi(s[T],a[T]))return!1}return!0}function iS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function rS(s,a){var u=iS(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=iS(u)}}function sS(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?sS(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function oS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ml(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ml(s.document)}return a}function Fg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var SV=Dr&&"documentMode"in document&&11>=document.documentMode,bl=null,Bg=null,hc=null,zg=!1;function aS(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;zg||bl==null||bl!==ml(h)||(h=bl,"selectionStart"in h&&Fg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hc&&fc(hc,h)||(hc=h,h=Nh(Bg,"onSelect"),0<h.length&&(a=new ga("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=bl)))}function Ea(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var wl={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},qg={},lS={};Dr&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Sa(s){if(qg[s])return qg[s];if(!wl[s])return s;var a=wl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in lS)return qg[s]=a[u];return s}var uS=Sa("animationend"),cS=Sa("animationiteration"),dS=Sa("animationstart"),bV=Sa("transitionrun"),wV=Sa("transitionstart"),xV=Sa("transitioncancel"),fS=Sa("transitionend"),hS=new Map,Hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hg.push("scrollEnd");function Mr(s,a){hS.set(s,a),vi(a,[s])}var Hf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},dr=[],xl=0,Gg=0;function Gf(){for(var s=xl,a=Gg=xl=0;a<s;){var u=dr[a];dr[a++]=null;var h=dr[a];dr[a++]=null;var T=dr[a];dr[a++]=null;var E=dr[a];if(dr[a++]=null,h!==null&&T!==null){var x=h.pending;x===null?T.next=T:(T.next=x.next,x.next=T),h.pending=T}E!==0&&pS(u,T,E)}}function jf(s,a,u,h){dr[xl++]=s,dr[xl++]=a,dr[xl++]=u,dr[xl++]=h,Gg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function jg(s,a,u,h){return jf(s,a,u,h),$f(s)}function ba(s,a){return jf(s,null,null,a),$f(s)}function pS(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var T=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(T=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,T&&a!==null&&(T=31-pe(u),s=E.hiddenUpdates,h=s[T],h===null?s[T]=[a]:h.push(a),a.lane=u|536870912),E):null}function $f(s){if(50<Vc)throw Vc=0,ey=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Al={};function AV(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(s,a,u,h){return new AV(s,a,u,h)}function $g(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Es(s,a){var u=s.alternate;return u===null?(u=Ji(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function mS(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Kf(s,a,u,h,T,E){var x=0;if(h=s,typeof s=="function")$g(s)&&(x=1);else if(typeof s=="string")x=DL(s,u,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=Ji(31,u,a,T),s.elementType=M,s.lanes=E,s;case I:return wa(u.children,T,E,a);case R:x=8,T|=24;break;case V:return s=Ji(12,u,a,T|2),s.elementType=V,s.lanes=E,s;case K:return s=Ji(13,u,a,T),s.elementType=K,s.lanes=E,s;case H:return s=Ji(19,u,a,T),s.elementType=H,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:x=10;break e;case k:x=9;break e;case G:x=11;break e;case D:x=14;break e;case N:x=16,h=null;break e}x=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ji(x,u,a,T),a.elementType=s,a.type=h,a.lanes=E,a}function wa(s,a,u,h){return s=Ji(7,s,h,a),s.lanes=u,s}function Kg(s,a,u){return s=Ji(6,s,null,a),s.lanes=u,s}function gS(s){var a=Ji(18,null,null,0);return a.stateNode=s,a}function Yg(s,a,u){return a=Ji(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var vS=new WeakMap;function fr(s,a){if(typeof s=="object"&&s!==null){var u=vS.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Ci(a)},vS.set(s,a),a)}return{value:s,source:a,stack:Ci(a)}}var Cl=[],Il=0,Yf=null,pc=0,hr=[],pr=0,lo=null,Qr=1,Zr="";function Ss(s,a){Cl[Il++]=pc,Cl[Il++]=Yf,Yf=s,pc=a}function yS(s,a,u){hr[pr++]=Qr,hr[pr++]=Zr,hr[pr++]=lo,lo=s;var h=Qr;s=Zr;var T=32-pe(h)-1;h&=~(1<<T),u+=1;var E=32-pe(a)+T;if(30<E){var x=T-T%5;E=(h&(1<<x)-1).toString(32),h>>=x,T-=x,Qr=1<<32-pe(a)+T|u<<T|h,Zr=E+s}else Qr=1<<E|u<<T|h,Zr=s}function Jg(s){s.return!==null&&(Ss(s,1),yS(s,1,0))}function Wg(s){for(;s===Yf;)Yf=Cl[--Il],Cl[Il]=null,pc=Cl[--Il],Cl[Il]=null;for(;s===lo;)lo=hr[--pr],hr[pr]=null,Zr=hr[--pr],hr[pr]=null,Qr=hr[--pr],hr[pr]=null}function _S(s,a){hr[pr++]=Qr,hr[pr++]=Zr,hr[pr++]=lo,Qr=a.id,Zr=a.overflow,lo=s}var jn=null,qt=null,ct=!1,uo=null,mr=!1,Xg=Error(i(519));function co(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mc(fr(a,s)),Xg}function TS(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[be]=s,a[ze]=h,u){case"dialog":rt("cancel",a),rt("close",a);break;case"iframe":case"object":case"embed":rt("load",a);break;case"video":case"audio":for(u=0;u<Oc.length;u++)rt(Oc[u],a);break;case"source":rt("error",a);break;case"img":case"image":case"link":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"input":rt("invalid",a),ha(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":rt("invalid",a);break;case"textarea":rt("invalid",a),Zs(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||Ow(a.textContent,u)?(h.popover!=null&&(rt("beforetoggle",a),rt("toggle",a)),h.onScroll!=null&&rt("scroll",a),h.onScrollEnd!=null&&rt("scrollend",a),h.onClick!=null&&(a.onclick=Vn),a=!0):a=!1,a||co(s,!0)}function ES(s){for(jn=s.return;jn;)switch(jn.tag){case 5:case 31:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:jn=jn.return}}function Rl(s){if(s!==jn)return!1;if(!ct)return ES(s),ct=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||my(s.type,s.memoizedProps)),u=!u),u&&qt&&co(s),ES(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));qt=$w(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));qt=$w(s)}else a===27?(a=qt,xo(s.type)?(s=Ty,Ty=null,qt=s):qt=a):qt=jn?vr(s.stateNode.nextSibling):null;return!0}function xa(){qt=jn=null,ct=!1}function Qg(){var s=uo;return s!==null&&(Fi===null?Fi=s:Fi.push.apply(Fi,s),uo=null),s}function mc(s){uo===null?uo=[s]:uo.push(s)}var Zg=j(null),Aa=null,bs=null;function fo(s,a,u){ne(Zg,a._currentValue),a._currentValue=u}function ws(s){s._currentValue=Zg.current,ee(Zg)}function ev(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function tv(s,a,u,h){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var E=T.dependencies;if(E!==null){var x=T.child;E=E.firstContext;e:for(;E!==null;){var P=E;E=T;for(var $=0;$<a.length;$++)if(P.context===a[$]){E.lanes|=u,P=E.alternate,P!==null&&(P.lanes|=u),ev(E.return,u,s),h||(x=null);break e}E=P.next}}else if(T.tag===18){if(x=T.return,x===null)throw Error(i(341));x.lanes|=u,E=x.alternate,E!==null&&(E.lanes|=u),ev(x,u,s),x=null}else x=T.child;if(x!==null)x.return=T;else for(x=T;x!==null;){if(x===s){x=null;break}if(T=x.sibling,T!==null){T.return=x.return,x=T;break}x=x.return}T=x}}function Nl(s,a,u,h){s=null;for(var T=a,E=!1;T!==null;){if(!E){if((T.flags&524288)!==0)E=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var x=T.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var P=T.type;Yi(T.pendingProps.value,x.value)||(s!==null?s.push(P):s=[P])}}else if(T===Ie.current){if(x=T.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(qc):s=[qc])}T=T.return}s!==null&&tv(a,s,u,h),a.flags|=262144}function Jf(s){for(s=s.firstContext;s!==null;){if(!Yi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ca(s){Aa=s,bs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return SS(Aa,s)}function Wf(s,a){return Aa===null&&Ca(s),SS(s,a)}function SS(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},bs===null){if(s===null)throw Error(i(308));bs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else bs=bs.next=a;return u}var CV=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},IV=t.unstable_scheduleCallback,RV=t.unstable_NormalPriority,Tn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nv(){return{controller:new CV,data:new Map,refCount:0}}function gc(s){s.refCount--,s.refCount===0&&IV(RV,function(){s.controller.abort()})}var vc=null,iv=0,Dl=0,Ml=null;function NV(s,a){if(vc===null){var u=vc=[];iv=0,Dl=oy(),Ml={status:"pending",value:void 0,then:function(h){u.push(h)}}}return iv++,a.then(bS,bS),a}function bS(){if(--iv===0&&vc!==null){Ml!==null&&(Ml.status="fulfilled");var s=vc;vc=null,Dl=0,Ml=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function DV(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(T){u.push(T)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var T=0;T<u.length;T++)(0,u[T])(a)},function(T){for(h.status="rejected",h.reason=T,T=0;T<u.length;T++)(0,u[T])(void 0)}),h}var wS=W.S;W.S=function(s,a){aw=wt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&NV(s,a),wS!==null&&wS(s,a)};var Ia=j(null);function rv(){var s=Ia.current;return s!==null?s:kt.pooledCache}function Xf(s,a){a===null?ne(Ia,Ia.current):ne(Ia,a.pool)}function xS(){var s=rv();return s===null?null:{parent:Tn._currentValue,pool:s}}var Pl=Error(i(460)),sv=Error(i(474)),Qf=Error(i(542)),Zf={then:function(){}};function AS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function CS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Vn,Vn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,RS(s),s;default:if(typeof a.status=="string")a.then(Vn,Vn);else{if(s=kt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var T=a;T.status="fulfilled",T.value=h}},function(h){if(a.status==="pending"){var T=a;T.status="rejected",T.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,RS(s),s}throw Na=a,Pl}}function Ra(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Na=u,Pl):u}}var Na=null;function IS(){if(Na===null)throw Error(i(459));var s=Na;return Na=null,s}function RS(s){if(s===Pl||s===Qf)throw Error(i(483))}var kl=null,yc=0;function eh(s){var a=yc;return yc+=1,kl===null&&(kl=[]),CS(kl,s,a)}function _c(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function th(s,a){throw a.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function NS(s){function a(J,Y){if(s){var Q=J.deletions;Q===null?(J.deletions=[Y],J.flags|=16):Q.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function T(J,Y){return J=Es(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,Q){return J.index=Q,s?(Q=J.alternate,Q!==null?(Q=Q.index,Q<Y?(J.flags|=67108866,Y):Q):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function x(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function P(J,Y,Q,ue){return Y===null||Y.tag!==6?(Y=Kg(Q,J.mode,ue),Y.return=J,Y):(Y=T(Y,Q),Y.return=J,Y)}function $(J,Y,Q,ue){var De=Q.type;return De===I?ae(J,Y,Q.props.children,ue,Q.key):Y!==null&&(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&Ra(De)===Y.type)?(Y=T(Y,Q.props),_c(Y,Q),Y.return=J,Y):(Y=Kf(Q.type,Q.key,Q.props,null,J.mode,ue),_c(Y,Q),Y.return=J,Y)}function Z(J,Y,Q,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Q.containerInfo||Y.stateNode.implementation!==Q.implementation?(Y=Yg(Q,J.mode,ue),Y.return=J,Y):(Y=T(Y,Q.children||[]),Y.return=J,Y)}function ae(J,Y,Q,ue,De){return Y===null||Y.tag!==7?(Y=wa(Q,J.mode,ue,De),Y.return=J,Y):(Y=T(Y,Q),Y.return=J,Y)}function ce(J,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Kg(""+Y,J.mode,Q),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return Q=Kf(Y.type,Y.key,Y.props,null,J.mode,Q),_c(Q,Y),Q.return=J,Q;case A:return Y=Yg(Y,J.mode,Q),Y.return=J,Y;case N:return Y=Ra(Y),ce(J,Y,Q)}if(Ne(Y)||F(Y))return Y=wa(Y,J.mode,Q,null),Y.return=J,Y;if(typeof Y.then=="function")return ce(J,eh(Y),Q);if(Y.$$typeof===O)return ce(J,Wf(J,Y),Q);th(J,Y)}return null}function te(J,Y,Q,ue){var De=Y!==null?Y.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return De!==null?null:P(J,Y,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===De?$(J,Y,Q,ue):null;case A:return Q.key===De?Z(J,Y,Q,ue):null;case N:return Q=Ra(Q),te(J,Y,Q,ue)}if(Ne(Q)||F(Q))return De!==null?null:ae(J,Y,Q,ue,null);if(typeof Q.then=="function")return te(J,Y,eh(Q),ue);if(Q.$$typeof===O)return te(J,Y,Wf(J,Q),ue);th(J,Q)}return null}function ie(J,Y,Q,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return J=J.get(Q)||null,P(Y,J,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return J=J.get(ue.key===null?Q:ue.key)||null,$(Y,J,ue,De);case A:return J=J.get(ue.key===null?Q:ue.key)||null,Z(Y,J,ue,De);case N:return ue=Ra(ue),ie(J,Y,Q,ue,De)}if(Ne(ue)||F(ue))return J=J.get(Q)||null,ae(Y,J,ue,De,null);if(typeof ue.then=="function")return ie(J,Y,Q,eh(ue),De);if(ue.$$typeof===O)return ie(J,Y,Q,Wf(Y,ue),De);th(Y,ue)}return null}function Ce(J,Y,Q,ue){for(var De=null,mt=null,Re=Y,Xe=Y=0,at=null;Re!==null&&Xe<Q.length;Xe++){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var gt=te(J,Re,Q[Xe],ue);if(gt===null){Re===null&&(Re=at);break}s&&Re&&gt.alternate===null&&a(J,Re),Y=E(gt,Y,Xe),mt===null?De=gt:mt.sibling=gt,mt=gt,Re=at}if(Xe===Q.length)return u(J,Re),ct&&Ss(J,Xe),De;if(Re===null){for(;Xe<Q.length;Xe++)Re=ce(J,Q[Xe],ue),Re!==null&&(Y=E(Re,Y,Xe),mt===null?De=Re:mt.sibling=Re,mt=Re);return ct&&Ss(J,Xe),De}for(Re=h(Re);Xe<Q.length;Xe++)at=ie(Re,J,Xe,Q[Xe],ue),at!==null&&(s&&at.alternate!==null&&Re.delete(at.key===null?Xe:at.key),Y=E(at,Y,Xe),mt===null?De=at:mt.sibling=at,mt=at);return s&&Re.forEach(function(No){return a(J,No)}),ct&&Ss(J,Xe),De}function Le(J,Y,Q,ue){if(Q==null)throw Error(i(151));for(var De=null,mt=null,Re=Y,Xe=Y=0,at=null,gt=Q.next();Re!==null&&!gt.done;Xe++,gt=Q.next()){Re.index>Xe?(at=Re,Re=null):at=Re.sibling;var No=te(J,Re,gt.value,ue);if(No===null){Re===null&&(Re=at);break}s&&Re&&No.alternate===null&&a(J,Re),Y=E(No,Y,Xe),mt===null?De=No:mt.sibling=No,mt=No,Re=at}if(gt.done)return u(J,Re),ct&&Ss(J,Xe),De;if(Re===null){for(;!gt.done;Xe++,gt=Q.next())gt=ce(J,gt.value,ue),gt!==null&&(Y=E(gt,Y,Xe),mt===null?De=gt:mt.sibling=gt,mt=gt);return ct&&Ss(J,Xe),De}for(Re=h(Re);!gt.done;Xe++,gt=Q.next())gt=ie(Re,J,Xe,gt.value,ue),gt!==null&&(s&&gt.alternate!==null&&Re.delete(gt.key===null?Xe:gt.key),Y=E(gt,Y,Xe),mt===null?De=gt:mt.sibling=gt,mt=gt);return s&&Re.forEach(function(qL){return a(J,qL)}),ct&&Ss(J,Xe),De}function Dt(J,Y,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===I&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var De=Q.key;Y!==null;){if(Y.key===De){if(De=Q.type,De===I){if(Y.tag===7){u(J,Y.sibling),ue=T(Y,Q.props.children),ue.return=J,J=ue;break e}}else if(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&Ra(De)===Y.type){u(J,Y.sibling),ue=T(Y,Q.props),_c(ue,Q),ue.return=J,J=ue;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}Q.type===I?(ue=wa(Q.props.children,J.mode,ue,Q.key),ue.return=J,J=ue):(ue=Kf(Q.type,Q.key,Q.props,null,J.mode,ue),_c(ue,Q),ue.return=J,J=ue)}return x(J);case A:e:{for(De=Q.key;Y!==null;){if(Y.key===De)if(Y.tag===4&&Y.stateNode.containerInfo===Q.containerInfo&&Y.stateNode.implementation===Q.implementation){u(J,Y.sibling),ue=T(Y,Q.children||[]),ue.return=J,J=ue;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}ue=Yg(Q,J.mode,ue),ue.return=J,J=ue}return x(J);case N:return Q=Ra(Q),Dt(J,Y,Q,ue)}if(Ne(Q))return Ce(J,Y,Q,ue);if(F(Q)){if(De=F(Q),typeof De!="function")throw Error(i(150));return Q=De.call(Q),Le(J,Y,Q,ue)}if(typeof Q.then=="function")return Dt(J,Y,eh(Q),ue);if(Q.$$typeof===O)return Dt(J,Y,Wf(J,Q),ue);th(J,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,Y!==null&&Y.tag===6?(u(J,Y.sibling),ue=T(Y,Q),ue.return=J,J=ue):(u(J,Y),ue=Kg(Q,J.mode,ue),ue.return=J,J=ue),x(J)):u(J,Y)}return function(J,Y,Q,ue){try{yc=0;var De=Dt(J,Y,Q,ue);return kl=null,De}catch(Re){if(Re===Pl||Re===Qf)throw Re;var mt=Ji(29,Re,null,J.mode);return mt.lanes=ue,mt.return=J,mt}finally{}}}var Da=NS(!0),DS=NS(!1),ho=!1;function ov(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function av(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function po(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function mo(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(_t&2)!==0){var T=h.pending;return T===null?a.next=a:(a.next=T.next,T.next=a),h.pending=a,a=$f(s),pS(s,null,u),a}return jf(s,h,a,u),$f(s)}function Tc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Ot(s,u)}}function lv(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var T=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?T=E=x:E=E.next=x,u=u.next}while(u!==null);E===null?T=E=a:E=E.next=a}else T=E=a;u={baseState:h.baseState,firstBaseUpdate:T,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var uv=!1;function Ec(){if(uv){var s=Ml;if(s!==null)throw s}}function Sc(s,a,u,h){uv=!1;var T=s.updateQueue;ho=!1;var E=T.firstBaseUpdate,x=T.lastBaseUpdate,P=T.shared.pending;if(P!==null){T.shared.pending=null;var $=P,Z=$.next;$.next=null,x===null?E=Z:x.next=Z,x=$;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,P=ae.lastBaseUpdate,P!==x&&(P===null?ae.firstBaseUpdate=Z:P.next=Z,ae.lastBaseUpdate=$))}if(E!==null){var ce=T.baseState;x=0,ae=Z=$=null,P=E;do{var te=P.lane&-536870913,ie=te!==P.lane;if(ie?(ot&te)===te:(h&te)===te){te!==0&&te===Dl&&(uv=!0),ae!==null&&(ae=ae.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ce=s,Le=P;te=a;var Dt=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){ce=Ce.call(Dt,ce,te);break e}ce=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(Dt,ce,te):Ce,te==null)break e;ce=y({},ce,te);break e;case 2:ho=!0}}te=P.callback,te!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=T.callbacks,ie===null?T.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ae===null?(Z=ae=ie,$=ce):ae=ae.next=ie,x|=te;if(P=P.next,P===null){if(P=T.shared.pending,P===null)break;ie=P,P=ie.next,ie.next=null,T.lastBaseUpdate=ie,T.shared.pending=null}}while(!0);ae===null&&($=ce),T.baseState=$,T.firstBaseUpdate=Z,T.lastBaseUpdate=ae,E===null&&(T.shared.lanes=0),To|=x,s.lanes=x,s.memoizedState=ce}}function MS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function PS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)MS(u[s],a)}var Vl=j(null),nh=j(0);function kS(s,a){s=Ps,ne(nh,s),ne(Vl,a),Ps=s|a.baseLanes}function cv(){ne(nh,Ps),ne(Vl,Vl.current)}function dv(){Ps=nh.current,ee(Vl),ee(nh)}var Wi=j(null),gr=null;function go(s){var a=s.alternate;ne(fn,fn.current&1),ne(Wi,s),gr===null&&(a===null||Vl.current!==null||a.memoizedState!==null)&&(gr=s)}function fv(s){ne(fn,fn.current),ne(Wi,s),gr===null&&(gr=s)}function VS(s){s.tag===22?(ne(fn,fn.current),ne(Wi,s),gr===null&&(gr=s)):vo()}function vo(){ne(fn,fn.current),ne(Wi,Wi.current)}function Xi(s){ee(Wi),gr===s&&(gr=null),ee(fn)}var fn=j(0);function ih(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||yy(u)||_y(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xs=0,We=null,Rt=null,En=null,rh=!1,Ll=!1,Ma=!1,sh=0,bc=0,Ol=null,MV=0;function rn(){throw Error(i(321))}function hv(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Yi(s[u],a[u]))return!1;return!0}function pv(s,a,u,h,T,E){return xs=E,We=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=s===null||s.memoizedState===null?yb:Rv,Ma=!1,E=u(h,T),Ma=!1,Ll&&(E=OS(a,u,h,T)),LS(s),E}function LS(s){W.H=Ac;var a=Rt!==null&&Rt.next!==null;if(xs=0,En=Rt=We=null,rh=!1,bc=0,Ol=null,a)throw Error(i(300));s===null||Sn||(s=s.dependencies,s!==null&&Jf(s)&&(Sn=!0))}function OS(s,a,u,h){We=s;var T=0;do{if(Ll&&(Ol=null),bc=0,Ll=!1,25<=T)throw Error(i(301));if(T+=1,En=Rt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}W.H=_b,E=a(u,h)}while(Ll);return E}function PV(){var s=W.H,a=s.useState()[0];return a=typeof a.then=="function"?wc(a):a,s=s.useState()[0],(Rt!==null?Rt.memoizedState:null)!==s&&(We.flags|=1024),a}function mv(){var s=sh!==0;return sh=0,s}function gv(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function vv(s){if(rh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}rh=!1}xs=0,En=Rt=We=null,Ll=!1,bc=sh=0,Ol=null}function Ei(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?We.memoizedState=En=s:En=En.next=s,En}function hn(){if(Rt===null){var s=We.alternate;s=s!==null?s.memoizedState:null}else s=Rt.next;var a=En===null?We.memoizedState:En.next;if(a!==null)En=a,Rt=s;else{if(s===null)throw We.alternate===null?Error(i(467)):Error(i(310));Rt=s,s={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},En===null?We.memoizedState=En=s:En=En.next=s}return En}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(s){var a=bc;return bc+=1,Ol===null&&(Ol=[]),s=CS(Ol,s,a),a=We,(En===null?a.memoizedState:En.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?yb:Rv),s}function ah(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wc(s);if(s.$$typeof===O)return $n(s)}throw Error(i(438,String(s)))}function yv(s){var a=null,u=We.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=We.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(T){return T.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=oh(),We.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=B;return a.index++,u}function As(s,a){return typeof a=="function"?a(s):a}function lh(s){var a=hn();return _v(a,Rt,s)}function _v(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var T=s.baseQueue,E=h.pending;if(E!==null){if(T!==null){var x=T.next;T.next=E.next,E.next=x}a.baseQueue=T=E,h.pending=null}if(E=s.baseState,T===null)s.memoizedState=E;else{a=T.next;var P=x=null,$=null,Z=a,ae=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(ot&ce)===ce:(xs&ce)===ce){var te=Z.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===Dl&&(ae=!0);else if((xs&te)===te){Z=Z.next,te===Dl&&(ae=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},$===null?(P=$=ce,x=E):$=$.next=ce,We.lanes|=te,To|=te;ce=Z.action,Ma&&u(E,ce),E=Z.hasEagerState?Z.eagerState:u(E,ce)}else te={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},$===null?(P=$=te,x=E):$=$.next=te,We.lanes|=ce,To|=ce;Z=Z.next}while(Z!==null&&Z!==a);if($===null?x=E:$.next=P,!Yi(E,s.memoizedState)&&(Sn=!0,ae&&(u=Ml,u!==null)))throw u;s.memoizedState=E,s.baseState=x,s.baseQueue=$,h.lastRenderedState=E}return T===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Tv(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,T=u.pending,E=a.memoizedState;if(T!==null){u.pending=null;var x=T=T.next;do E=s(E,x.action),x=x.next;while(x!==T);Yi(E,a.memoizedState)||(Sn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function US(s,a,u){var h=We,T=hn(),E=ct;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var x=!Yi((Rt||T).memoizedState,u);if(x&&(T.memoizedState=u,Sn=!0),T=T.queue,bv(zS.bind(null,h,T,s),[s]),T.getSnapshot!==a||x||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,Ul(9,{destroy:void 0},BS.bind(null,h,T,u,a),null),kt===null)throw Error(i(349));E||(xs&127)!==0||FS(h,a,u)}return u}function FS(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=We.updateQueue,a===null?(a=oh(),We.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function BS(s,a,u,h){a.value=u,a.getSnapshot=h,qS(a)&&HS(s)}function zS(s,a,u){return u(function(){qS(a)&&HS(s)})}function qS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Yi(s,u)}catch{return!0}}function HS(s){var a=ba(s,2);a!==null&&Bi(a,s,2)}function Ev(s){var a=Ei();if(typeof s=="function"){var u=s;if(s=u(),Ma){le(!0);try{u()}finally{le(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:s},a}function GS(s,a,u,h){return s.baseState=u,_v(s,Rt,typeof h=="function"?h:As)}function kV(s,a,u,h,T){if(dh(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){E.listeners.push(x)}};W.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,jS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function jS(s,a){var u=a.action,h=a.payload,T=s.state;if(a.isTransition){var E=W.T,x={};W.T=x;try{var P=u(T,h),$=W.S;$!==null&&$(x,P),$S(s,a,P)}catch(Z){Sv(s,a,Z)}finally{E!==null&&x.types!==null&&(E.types=x.types),W.T=E}}else try{E=u(T,h),$S(s,a,E)}catch(Z){Sv(s,a,Z)}}function $S(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){KS(s,a,h)},function(h){return Sv(s,a,h)}):KS(s,a,u)}function KS(s,a,u){a.status="fulfilled",a.value=u,YS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,jS(s,u)))}function Sv(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,YS(a),a=a.next;while(a!==h)}s.action=null}function YS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function JS(s,a){return a}function WS(s,a){if(ct){var u=kt.formState;if(u!==null){e:{var h=We;if(ct){if(qt){t:{for(var T=qt,E=mr;T.nodeType!==8;){if(!E){T=null;break t}if(T=vr(T.nextSibling),T===null){T=null;break t}}E=T.data,T=E==="F!"||E==="F"?T:null}if(T){qt=vr(T.nextSibling),h=T.data==="F!";break e}}co(h)}h=!1}h&&(a=u[0])}}return u=Ei(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JS,lastRenderedState:a},u.queue=h,u=mb.bind(null,We,h),h.dispatch=u,h=Ev(!1),E=Iv.bind(null,We,!1,h.queue),h=Ei(),T={state:a,dispatch:null,action:s,pending:null},h.queue=T,u=kV.bind(null,We,T,E,u),T.dispatch=u,h.memoizedState=s,[a,u,!1]}function XS(s){var a=hn();return QS(a,Rt,s)}function QS(s,a,u){if(a=_v(s,a,JS)[0],s=lh(As)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=wc(a)}catch(x){throw x===Pl?Qf:x}else h=a;a=hn();var T=a.queue,E=T.dispatch;return u!==a.memoizedState&&(We.flags|=2048,Ul(9,{destroy:void 0},VV.bind(null,T,u),null)),[h,E,s]}function VV(s,a){s.action=a}function ZS(s){var a=hn(),u=Rt;if(u!==null)return QS(a,u,s);hn(),a=a.memoizedState,u=hn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Ul(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=We.updateQueue,a===null&&(a=oh(),We.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function eb(){return hn().memoizedState}function uh(s,a,u,h){var T=Ei();We.flags|=s,T.memoizedState=Ul(1|a,{destroy:void 0},u,h===void 0?null:h)}function ch(s,a,u,h){var T=hn();h=h===void 0?null:h;var E=T.memoizedState.inst;Rt!==null&&h!==null&&hv(h,Rt.memoizedState.deps)?T.memoizedState=Ul(a,E,u,h):(We.flags|=s,T.memoizedState=Ul(1|a,E,u,h))}function tb(s,a){uh(8390656,8,s,a)}function bv(s,a){ch(2048,8,s,a)}function LV(s){We.flags|=4;var a=We.updateQueue;if(a===null)a=oh(),We.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function nb(s){var a=hn().memoizedState;return LV({ref:a,nextImpl:s}),function(){if((_t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function ib(s,a){return ch(4,2,s,a)}function rb(s,a){return ch(4,4,s,a)}function sb(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ob(s,a,u){u=u!=null?u.concat([s]):null,ch(4,4,sb.bind(null,a,s),u)}function wv(){}function ab(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&hv(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function lb(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&hv(a,h[1]))return h[0];if(h=s(),Ma){le(!0);try{s()}finally{le(!1)}}return u.memoizedState=[h,a],h}function xv(s,a,u){return u===void 0||(xs&1073741824)!==0&&(ot&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=uw(),We.lanes|=s,To|=s,u)}function ub(s,a,u,h){return Yi(u,a)?u:Vl.current!==null?(s=xv(s,u,h),Yi(s,a)||(Sn=!0),s):(xs&42)===0||(xs&1073741824)!==0&&(ot&261930)===0?(Sn=!0,s.memoizedState=u):(s=uw(),We.lanes|=s,To|=s,a)}function cb(s,a,u,h,T){var E=oe.p;oe.p=E!==0&&8>E?E:8;var x=W.T,P={};W.T=P,Iv(s,!1,a,u);try{var $=T(),Z=W.S;if(Z!==null&&Z(P,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ae=DV($,h);xc(s,a,ae,er(s))}else xc(s,a,h,er(s))}catch(ce){xc(s,a,{then:function(){},status:"rejected",reason:ce},er())}finally{oe.p=E,x!==null&&P.types!==null&&(x.types=P.types),W.T=x}}function OV(){}function Av(s,a,u,h){if(s.tag!==5)throw Error(i(476));var T=db(s).queue;cb(s,T,a,he,u===null?OV:function(){return fb(s),u(h)})}function db(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:he},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function fb(s){var a=db(s);a.next===null&&(a=s.alternate.memoizedState),xc(s,a.next.queue,{},er())}function Cv(){return $n(qc)}function hb(){return hn().memoizedState}function pb(){return hn().memoizedState}function UV(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=er();s=po(u);var h=mo(a,s,u);h!==null&&(Bi(h,a,u),Tc(h,a,u)),a={cache:nv()},s.payload=a;return}a=a.return}}function FV(s,a,u){var h=er();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},dh(s)?gb(a,u):(u=jg(s,a,u,h),u!==null&&(Bi(u,s,h),vb(u,a,h)))}function mb(s,a,u){var h=er();xc(s,a,u,h)}function xc(s,a,u,h){var T={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(dh(s))gb(a,T);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var x=a.lastRenderedState,P=E(x,u);if(T.hasEagerState=!0,T.eagerState=P,Yi(P,x))return jf(s,a,T,0),kt===null&&Gf(),!1}catch{}finally{}if(u=jg(s,a,T,h),u!==null)return Bi(u,s,h),vb(u,a,h),!0}return!1}function Iv(s,a,u,h){if(h={lane:2,revertLane:oy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},dh(s)){if(a)throw Error(i(479))}else a=jg(s,u,h,2),a!==null&&Bi(a,s,2)}function dh(s){var a=s.alternate;return s===We||a!==null&&a===We}function gb(s,a){Ll=rh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function vb(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Ot(s,u)}}var Ac={readContext:$n,use:ah,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Ac.useEffectEvent=rn;var yb={readContext:$n,use:ah,useCallback:function(s,a){return Ei().memoizedState=[s,a===void 0?null:a],s},useContext:$n,useEffect:tb,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,uh(4194308,4,sb.bind(null,a,s),u)},useLayoutEffect:function(s,a){return uh(4194308,4,s,a)},useInsertionEffect:function(s,a){uh(4,2,s,a)},useMemo:function(s,a){var u=Ei();a=a===void 0?null:a;var h=s();if(Ma){le(!0);try{s()}finally{le(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Ei();if(u!==void 0){var T=u(a);if(Ma){le(!0);try{u(a)}finally{le(!1)}}}else T=a;return h.memoizedState=h.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},h.queue=s,s=s.dispatch=FV.bind(null,We,s),[h.memoizedState,s]},useRef:function(s){var a=Ei();return s={current:s},a.memoizedState=s},useState:function(s){s=Ev(s);var a=s.queue,u=mb.bind(null,We,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:wv,useDeferredValue:function(s,a){var u=Ei();return xv(u,s,a)},useTransition:function(){var s=Ev(!1);return s=cb.bind(null,We,s.queue,!0,!1),Ei().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=We,T=Ei();if(ct){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),kt===null)throw Error(i(349));(ot&127)!==0||FS(h,a,u)}T.memoizedState=u;var E={value:u,getSnapshot:a};return T.queue=E,tb(zS.bind(null,h,E,s),[s]),h.flags|=2048,Ul(9,{destroy:void 0},BS.bind(null,h,E,u,a),null),u},useId:function(){var s=Ei(),a=kt.identifierPrefix;if(ct){var u=Zr,h=Qr;u=(h&~(1<<32-pe(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=sh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=MV++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Cv,useFormState:WS,useActionState:WS,useOptimistic:function(s){var a=Ei();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Iv.bind(null,We,!0,u),u.dispatch=a,[s,a]},useMemoCache:yv,useCacheRefresh:function(){return Ei().memoizedState=UV.bind(null,We)},useEffectEvent:function(s){var a=Ei(),u={impl:s};return a.memoizedState=u,function(){if((_t&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Rv={readContext:$n,use:ah,useCallback:ab,useContext:$n,useEffect:bv,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:rb,useMemo:lb,useReducer:lh,useRef:eb,useState:function(){return lh(As)},useDebugValue:wv,useDeferredValue:function(s,a){var u=hn();return ub(u,Rt.memoizedState,s,a)},useTransition:function(){var s=lh(As)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:wc(s),a]},useSyncExternalStore:US,useId:hb,useHostTransitionStatus:Cv,useFormState:XS,useActionState:XS,useOptimistic:function(s,a){var u=hn();return GS(u,Rt,s,a)},useMemoCache:yv,useCacheRefresh:pb};Rv.useEffectEvent=nb;var _b={readContext:$n,use:ah,useCallback:ab,useContext:$n,useEffect:bv,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:rb,useMemo:lb,useReducer:Tv,useRef:eb,useState:function(){return Tv(As)},useDebugValue:wv,useDeferredValue:function(s,a){var u=hn();return Rt===null?xv(u,s,a):ub(u,Rt.memoizedState,s,a)},useTransition:function(){var s=Tv(As)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:wc(s),a]},useSyncExternalStore:US,useId:hb,useHostTransitionStatus:Cv,useFormState:ZS,useActionState:ZS,useOptimistic:function(s,a){var u=hn();return Rt!==null?GS(u,Rt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:yv,useCacheRefresh:pb};_b.useEffectEvent=nb;function Nv(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:y({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Dv={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=er(),T=po(h);T.payload=a,u!=null&&(T.callback=u),a=mo(s,T,h),a!==null&&(Bi(a,s,h),Tc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=er(),T=po(h);T.tag=1,T.payload=a,u!=null&&(T.callback=u),a=mo(s,T,h),a!==null&&(Bi(a,s,h),Tc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=er(),h=po(u);h.tag=2,a!=null&&(h.callback=a),a=mo(s,h,u),a!==null&&(Bi(a,s,u),Tc(a,s,u))}};function Tb(s,a,u,h,T,E,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,x):a.prototype&&a.prototype.isPureReactComponent?!fc(u,h)||!fc(T,E):!0}function Eb(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&Dv.enqueueReplaceState(a,a.state,null)}function Pa(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=y({},u));for(var T in s)u[T]===void 0&&(u[T]=s[T])}return u}function Sb(s){Hf(s)}function bb(s){console.error(s)}function wb(s){Hf(s)}function fh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function xb(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Mv(s,a,u){return u=po(u),u.tag=3,u.payload={element:null},u.callback=function(){fh(s,a)},u}function Ab(s){return s=po(s),s.tag=3,s}function Cb(s,a,u,h){var T=u.type.getDerivedStateFromError;if(typeof T=="function"){var E=h.value;s.payload=function(){return T(E)},s.callback=function(){xb(a,u,h)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){xb(a,u,h),typeof T!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function BV(s,a,u,h,T){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&Nl(a,u,T,!0),u=Wi.current,u!==null){switch(u.tag){case 31:case 13:return gr===null?wh():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=T,h===Zf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),iy(s,h,T)),!1;case 22:return u.flags|=65536,h===Zf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),iy(s,h,T)),!1}throw Error(i(435,u.tag))}return iy(s,h,T),wh(),!1}if(ct)return a=Wi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=T,h!==Xg&&(s=Error(i(422),{cause:h}),mc(fr(s,u)))):(h!==Xg&&(a=Error(i(423),{cause:h}),mc(fr(a,u))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,h=fr(h,u),T=Mv(s.stateNode,h,T),lv(s,T),sn!==4&&(sn=2)),!1;var E=Error(i(520),{cause:h});if(E=fr(E,u),kc===null?kc=[E]:kc.push(E),sn!==4&&(sn=2),a===null)return!0;h=fr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=T&-T,u.lanes|=s,s=Mv(u.stateNode,h,s),lv(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Eo===null||!Eo.has(E))))return u.flags|=65536,T&=-T,u.lanes|=T,T=Ab(T),Cb(T,s,u,h),lv(u,T),!1}u=u.return}while(u!==null);return!1}var Pv=Error(i(461)),Sn=!1;function Kn(s,a,u,h){a.child=s===null?DS(a,null,u,h):Da(a,s.child,u,h)}function Ib(s,a,u,h,T){u=u.render;var E=a.ref;if("ref"in h){var x={};for(var P in h)P!=="ref"&&(x[P]=h[P])}else x=h;return Ca(a),h=pv(s,a,u,x,E,T),P=mv(),s!==null&&!Sn?(gv(s,a,T),Cs(s,a,T)):(ct&&P&&Jg(a),a.flags|=1,Kn(s,a,h,T),a.child)}function Rb(s,a,u,h,T){if(s===null){var E=u.type;return typeof E=="function"&&!$g(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,Nb(s,a,E,h,T)):(s=Kf(u.type,null,h,a,a.mode,T),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!zv(s,T)){var x=E.memoizedProps;if(u=u.compare,u=u!==null?u:fc,u(x,h)&&s.ref===a.ref)return Cs(s,a,T)}return a.flags|=1,s=Es(E,h),s.ref=a.ref,s.return=a,a.child=s}function Nb(s,a,u,h,T){if(s!==null){var E=s.memoizedProps;if(fc(E,h)&&s.ref===a.ref)if(Sn=!1,a.pendingProps=h=E,zv(s,T))(s.flags&131072)!==0&&(Sn=!0);else return a.lanes=s.lanes,Cs(s,a,T)}return kv(s,a,u,h,T)}function Db(s,a,u,h){var T=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,T=0;h!==null;)T=T|h.lanes|h.childLanes,h=h.sibling;h=T&~E}else h=0,a.child=null;return Mb(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xf(a,E!==null?E.cachePool:null),E!==null?kS(a,E):cv(),VS(a);else return h=a.lanes=536870912,Mb(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(Xf(a,E.cachePool),kS(a,E),vo(),a.memoizedState=null):(s!==null&&Xf(a,null),cv(),vo());return Kn(s,a,T,u),a.child}function Cc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Mb(s,a,u,h,T){var E=rv();return E=E===null?null:{parent:Tn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&Xf(a,null),cv(),VS(a),s!==null&&Nl(s,a,h,!0),a.childLanes=T,null}function hh(s,a){return a=mh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Pb(s,a,u){return Da(a,s.child,null,u),s=hh(a,a.pendingProps),s.flags|=2,Xi(a),a.memoizedState=null,s}function zV(s,a,u){var h=a.pendingProps,T=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ct){if(h.mode==="hidden")return s=hh(a,h),a.lanes=536870912,Cc(null,s);if(fv(a),(s=qt)?(s=jw(s,mr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:lo!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=gS(s),u.return=a,a.child=u,jn=a,qt=null)):s=null,s===null)throw co(a);return a.lanes=536870912,null}return hh(a,h)}var E=s.memoizedState;if(E!==null){var x=E.dehydrated;if(fv(a),T)if(a.flags&256)a.flags&=-257,a=Pb(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Sn||Nl(s,a,u,!1),T=(u&s.childLanes)!==0,Sn||T){if(h=kt,h!==null&&(x=dn(h,u),x!==0&&x!==E.retryLane))throw E.retryLane=x,ba(s,x),Bi(h,s,x),Pv;wh(),a=Pb(s,a,u)}else s=E.treeContext,qt=vr(x.nextSibling),jn=a,ct=!0,uo=null,mr=!1,s!==null&&_S(a,s),a=hh(a,h),a.flags|=4096;return a}return s=Es(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function ph(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function kv(s,a,u,h,T){return Ca(a),u=pv(s,a,u,h,void 0,T),h=mv(),s!==null&&!Sn?(gv(s,a,T),Cs(s,a,T)):(ct&&h&&Jg(a),a.flags|=1,Kn(s,a,u,T),a.child)}function kb(s,a,u,h,T,E){return Ca(a),a.updateQueue=null,u=OS(a,h,u,T),LS(s),h=mv(),s!==null&&!Sn?(gv(s,a,E),Cs(s,a,E)):(ct&&h&&Jg(a),a.flags|=1,Kn(s,a,u,E),a.child)}function Vb(s,a,u,h,T){if(Ca(a),a.stateNode===null){var E=Al,x=u.contextType;typeof x=="object"&&x!==null&&(E=$n(x)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Dv,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},ov(a),x=u.contextType,E.context=typeof x=="object"&&x!==null?$n(x):Al,E.state=a.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(Nv(a,u,x,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(x=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),x!==E.state&&Dv.enqueueReplaceState(E,E.state,null),Sc(a,h,E,T),Ec(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var P=a.memoizedProps,$=Pa(u,P);E.props=$;var Z=E.context,ae=u.contextType;x=Al,typeof ae=="object"&&ae!==null&&(x=$n(ae));var ce=u.getDerivedStateFromProps;ae=typeof ce=="function"||typeof E.getSnapshotBeforeUpdate=="function",P=a.pendingProps!==P,ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P||Z!==x)&&Eb(a,E,h,x),ho=!1;var te=a.memoizedState;E.state=te,Sc(a,h,E,T),Ec(),Z=a.memoizedState,P||te!==Z||ho?(typeof ce=="function"&&(Nv(a,u,ce,h),Z=a.memoizedState),($=ho||Tb(a,u,$,h,te,Z,x))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Z),E.props=h,E.state=Z,E.context=x,h=$):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,av(s,a),x=a.memoizedProps,ae=Pa(u,x),E.props=ae,ce=a.pendingProps,te=E.context,Z=u.contextType,$=Al,typeof Z=="object"&&Z!==null&&($=$n(Z)),P=u.getDerivedStateFromProps,(Z=typeof P=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==ce||te!==$)&&Eb(a,E,h,$),ho=!1,te=a.memoizedState,E.state=te,Sc(a,h,E,T),Ec();var ie=a.memoizedState;x!==ce||te!==ie||ho||s!==null&&s.dependencies!==null&&Jf(s.dependencies)?(typeof P=="function"&&(Nv(a,u,P,h),ie=a.memoizedState),(ae=ho||Tb(a,u,ae,h,te,ie,$)||s!==null&&s.dependencies!==null&&Jf(s.dependencies))?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ie,$),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ie,$)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),E.props=h,E.state=ie,E.context=$,h=ae):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,ph(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Da(a,s.child,null,T),a.child=Da(a,null,u,T)):Kn(s,a,u,T),a.memoizedState=E.state,s=a.child):s=Cs(s,a,T),s}function Lb(s,a,u,h){return xa(),a.flags|=256,Kn(s,a,u,h),a.child}var Vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lv(s){return{baseLanes:s,cachePool:xS()}}function Ov(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Zi),s}function Ob(s,a,u){var h=a.pendingProps,T=!1,E=(a.flags&128)!==0,x;if((x=E)||(x=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),x&&(T=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(ct){if(T?go(a):vo(),(s=qt)?(s=jw(s,mr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:lo!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=gS(s),u.return=a,a.child=u,jn=a,qt=null)):s=null,s===null)throw co(a);return _y(s)?a.lanes=32:a.lanes=536870912,null}var P=h.children;return h=h.fallback,T?(vo(),T=a.mode,P=mh({mode:"hidden",children:P},T),h=wa(h,T,u,null),P.return=a,h.return=a,P.sibling=h,a.child=P,h=a.child,h.memoizedState=Lv(u),h.childLanes=Ov(s,x,u),a.memoizedState=Vv,Cc(null,h)):(go(a),Uv(a,P))}var $=s.memoizedState;if($!==null&&(P=$.dehydrated,P!==null)){if(E)a.flags&256?(go(a),a.flags&=-257,a=Fv(s,a,u)):a.memoizedState!==null?(vo(),a.child=s.child,a.flags|=128,a=null):(vo(),P=h.fallback,T=a.mode,h=mh({mode:"visible",children:h.children},T),P=wa(P,T,u,null),P.flags|=2,h.return=a,P.return=a,h.sibling=P,a.child=h,Da(a,s.child,null,u),h=a.child,h.memoizedState=Lv(u),h.childLanes=Ov(s,x,u),a.memoizedState=Vv,a=Cc(null,h));else if(go(a),_y(P)){if(x=P.nextSibling&&P.nextSibling.dataset,x)var Z=x.dgst;x=Z,h=Error(i(419)),h.stack="",h.digest=x,mc({value:h,source:null,stack:null}),a=Fv(s,a,u)}else if(Sn||Nl(s,a,u,!1),x=(u&s.childLanes)!==0,Sn||x){if(x=kt,x!==null&&(h=dn(x,u),h!==0&&h!==$.retryLane))throw $.retryLane=h,ba(s,h),Bi(x,s,h),Pv;yy(P)||wh(),a=Fv(s,a,u)}else yy(P)?(a.flags|=192,a.child=s.child,a=null):(s=$.treeContext,qt=vr(P.nextSibling),jn=a,ct=!0,uo=null,mr=!1,s!==null&&_S(a,s),a=Uv(a,h.children),a.flags|=4096);return a}return T?(vo(),P=h.fallback,T=a.mode,$=s.child,Z=$.sibling,h=Es($,{mode:"hidden",children:h.children}),h.subtreeFlags=$.subtreeFlags&65011712,Z!==null?P=Es(Z,P):(P=wa(P,T,u,null),P.flags|=2),P.return=a,h.return=a,h.sibling=P,a.child=h,Cc(null,h),h=a.child,P=s.child.memoizedState,P===null?P=Lv(u):(T=P.cachePool,T!==null?($=Tn._currentValue,T=T.parent!==$?{parent:$,pool:$}:T):T=xS(),P={baseLanes:P.baseLanes|u,cachePool:T}),h.memoizedState=P,h.childLanes=Ov(s,x,u),a.memoizedState=Vv,Cc(s.child,h)):(go(a),u=s.child,s=u.sibling,u=Es(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=u,a.memoizedState=null,u)}function Uv(s,a){return a=mh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function mh(s,a){return s=Ji(22,s,null,a),s.lanes=0,s}function Fv(s,a,u){return Da(a,s.child,null,u),s=Uv(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Ub(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),ev(s.return,a,u)}function Bv(s,a,u,h,T,E){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:T,treeForkCount:E}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=u,x.tailMode=T,x.treeForkCount=E)}function Fb(s,a,u){var h=a.pendingProps,T=h.revealOrder,E=h.tail;h=h.children;var x=fn.current,P=(x&2)!==0;if(P?(x=x&1|2,a.flags|=128):x&=1,ne(fn,x),Kn(s,a,h,u),h=ct?pc:0,!P&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ub(s,u,a);else if(s.tag===19)Ub(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(T){case"forwards":for(u=a.child,T=null;u!==null;)s=u.alternate,s!==null&&ih(s)===null&&(T=u),u=u.sibling;u=T,u===null?(T=a.child,a.child=null):(T=u.sibling,u.sibling=null),Bv(a,!1,T,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,T=a.child,a.child=null;T!==null;){if(s=T.alternate,s!==null&&ih(s)===null){a.child=T;break}s=T.sibling,T.sibling=u,u=T,T=s}Bv(a,!0,u,null,E,h);break;case"together":Bv(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Cs(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),To|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Nl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=Es(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Es(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function zv(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Jf(s)))}function qV(s,a,u){switch(a.tag){case 3:Vt(a,a.stateNode.containerInfo),fo(a,Tn,s.memoizedState.cache),xa();break;case 27:case 5:qn(a);break;case 4:Vt(a,a.stateNode.containerInfo);break;case 10:fo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,fv(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(go(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Ob(s,a,u):(go(a),s=Cs(s,a,u),s!==null?s.sibling:null);go(a);break;case 19:var T=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(Nl(s,a,u,!1),h=(u&a.childLanes)!==0),T){if(h)return Fb(s,a,u);a.flags|=128}if(T=a.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ne(fn,fn.current),h)break;return null;case 22:return a.lanes=0,Db(s,a,u,a.pendingProps);case 24:fo(a,Tn,s.memoizedState.cache)}return Cs(s,a,u)}function Bb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Sn=!0;else{if(!zv(s,u)&&(a.flags&128)===0)return Sn=!1,qV(s,a,u);Sn=(s.flags&131072)!==0}else Sn=!1,ct&&(a.flags&1048576)!==0&&yS(a,pc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Ra(a.elementType),a.type=s,typeof s=="function")$g(s)?(h=Pa(s,h),a.tag=1,a=Vb(null,a,s,h,u)):(a.tag=0,a=kv(null,a,s,h,u));else{if(s!=null){var T=s.$$typeof;if(T===G){a.tag=11,a=Ib(null,a,s,h,u);break e}else if(T===D){a.tag=14,a=Rb(null,a,s,h,u);break e}}throw a=ye(s)||s,Error(i(306,a,""))}}return a;case 0:return kv(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,T=Pa(h,a.pendingProps),Vb(s,a,h,T,u);case 3:e:{if(Vt(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;T=E.element,av(s,a),Sc(a,h,null,u);var x=a.memoizedState;if(h=x.cache,fo(a,Tn,h),h!==E.cache&&tv(a,[Tn],u,!0),Ec(),h=x.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=Lb(s,a,h,u);break e}else if(h!==T){T=fr(Error(i(424)),a),mc(T),a=Lb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(qt=vr(s.firstChild),jn=a,ct=!0,uo=null,mr=!0,u=DS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(xa(),h===T){a=Cs(s,a,u);break e}Kn(s,a,h,u)}a=a.child}return a;case 26:return ph(s,a),s===null?(u=Xw(a.type,null,a.pendingProps,null))?a.memoizedState=u:ct||(u=a.type,s=a.pendingProps,h=Dh(Oe.current).createElement(u),h[be]=a,h[ze]=s,Yn(h,u,s),Yt(h),a.stateNode=h):a.memoizedState=Xw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return qn(a),s===null&&ct&&(h=a.stateNode=Yw(a.type,a.pendingProps,Oe.current),jn=a,mr=!0,T=qt,xo(a.type)?(Ty=T,qt=vr(h.firstChild)):qt=T),Kn(s,a,a.pendingProps.children,u),ph(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ct&&((T=h=qt)&&(h=yL(h,a.type,a.pendingProps,mr),h!==null?(a.stateNode=h,jn=a,qt=vr(h.firstChild),mr=!1,T=!0):T=!1),T||co(a)),qn(a),T=a.type,E=a.pendingProps,x=s!==null?s.memoizedProps:null,h=E.children,my(T,E)?h=null:x!==null&&my(T,x)&&(a.flags|=32),a.memoizedState!==null&&(T=pv(s,a,PV,null,null,u),qc._currentValue=T),ph(s,a),Kn(s,a,h,u),a.child;case 6:return s===null&&ct&&((s=u=qt)&&(u=_L(u,a.pendingProps,mr),u!==null?(a.stateNode=u,jn=a,qt=null,s=!0):s=!1),s||co(a)),null;case 13:return Ob(s,a,u);case 4:return Vt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Da(a,null,h,u):Kn(s,a,h,u),a.child;case 11:return Ib(s,a,a.type,a.pendingProps,u);case 7:return Kn(s,a,a.pendingProps,u),a.child;case 8:return Kn(s,a,a.pendingProps.children,u),a.child;case 12:return Kn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,fo(a,a.type,h.value),Kn(s,a,h.children,u),a.child;case 9:return T=a.type._context,h=a.pendingProps.children,Ca(a),T=$n(T),h=h(T),a.flags|=1,Kn(s,a,h,u),a.child;case 14:return Rb(s,a,a.type,a.pendingProps,u);case 15:return Nb(s,a,a.type,a.pendingProps,u);case 19:return Fb(s,a,u);case 31:return zV(s,a,u);case 22:return Db(s,a,u,a.pendingProps);case 24:return Ca(a),h=$n(Tn),s===null?(T=rv(),T===null&&(T=kt,E=nv(),T.pooledCache=E,E.refCount++,E!==null&&(T.pooledCacheLanes|=u),T=E),a.memoizedState={parent:h,cache:T},ov(a),fo(a,Tn,T)):((s.lanes&u)!==0&&(av(s,a),Sc(a,null,null,u),Ec()),T=s.memoizedState,E=a.memoizedState,T.parent!==h?(T={parent:h,cache:h},a.memoizedState=T,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=T),fo(a,Tn,h)):(h=E.cache,fo(a,Tn,h),h!==T.cache&&tv(a,[Tn],u,!0))),Kn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Is(s){s.flags|=4}function qv(s,a,u,h,T){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(T&335544128)===T)if(s.stateNode.complete)s.flags|=8192;else if(hw())s.flags|=8192;else throw Na=Zf,sv}else s.flags&=-16777217}function zb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!nx(a))if(hw())s.flags|=8192;else throw Na=Zf,sv}function gh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ri():536870912,s.lanes|=a,ql|=a)}function Ic(s,a){if(!ct)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Ht(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var T=s.child;T!==null;)u|=T.lanes|T.childLanes,h|=T.subtreeFlags&65011712,h|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)u|=T.lanes|T.childLanes,h|=T.subtreeFlags,h|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function HV(s,a,u){var h=a.pendingProps;switch(Wg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(a),null;case 1:return Ht(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ws(Tn),Ct(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Rl(a)?Is(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Qg())),Ht(a),null;case 26:var T=a.type,E=a.memoizedState;return s===null?(Is(a),E!==null?(Ht(a),zb(a,E)):(Ht(a),qv(a,T,null,h,u))):E?E!==s.memoizedState?(Is(a),Ht(a),zb(a,E)):(Ht(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Is(a),Ht(a),qv(a,T,s,h,u)),null;case 27:if(Ai(a),u=Oe.current,T=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Is(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ht(a),null}s=se.current,Rl(a)?TS(a):(s=Yw(T,h,u),a.stateNode=s,Is(a))}return Ht(a),null;case 5:if(Ai(a),T=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Is(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ht(a),null}if(E=se.current,Rl(a))TS(a);else{var x=Dh(Oe.current);switch(E){case 1:E=x.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:E=x.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":E=x.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":E=x.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":E=x.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?x.createElement(T,{is:h.is}):x.createElement(T)}}E[be]=a,E[ze]=h;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)E.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=E;e:switch(Yn(E,T,h),T){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Is(a)}}return Ht(a),qv(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Is(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Oe.current,Rl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,T=jn,T!==null)switch(T.tag){case 27:case 5:h=T.memoizedProps}s[be]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Ow(s.nodeValue,u)),s||co(a,!0)}else s=Dh(s).createTextNode(h),s[be]=a,a.stateNode=s}return Ht(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Rl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[be]=a}else xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),s=!1}else u=Qg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Xi(a),a):(Xi(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Ht(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=Rl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!T)throw Error(i(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));T[be]=a}else xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),T=!1}else T=Qg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return a.flags&256?(Xi(a),a):(Xi(a),null)}return Xi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,T=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(T=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==T&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),gh(a,a.updateQueue),Ht(a),null);case 4:return Ct(),s===null&&cy(a.stateNode.containerInfo),Ht(a),null;case 10:return ws(a.type),Ht(a),null;case 19:if(ee(fn),h=a.memoizedState,h===null)return Ht(a),null;if(T=(a.flags&128)!==0,E=h.rendering,E===null)if(T)Ic(h,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=ih(s),E!==null){for(a.flags|=128,Ic(h,!1),s=E.updateQueue,a.updateQueue=s,gh(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)mS(u,s),u=u.sibling;return ne(fn,fn.current&1|2),ct&&Ss(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&wt()>Eh&&(a.flags|=128,T=!0,Ic(h,!1),a.lanes=4194304)}else{if(!T)if(s=ih(E),s!==null){if(a.flags|=128,T=!0,s=s.updateQueue,a.updateQueue=s,gh(a,s),Ic(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!ct)return Ht(a),null}else 2*wt()-h.renderingStartTime>Eh&&u!==536870912&&(a.flags|=128,T=!0,Ic(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=wt(),s.sibling=null,u=fn.current,ne(fn,T?u&1|2:u&1),ct&&Ss(a,h.treeForkCount),s):(Ht(a),null);case 22:case 23:return Xi(a),dv(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Ht(a),a.subtreeFlags&6&&(a.flags|=8192)):Ht(a),u=a.updateQueue,u!==null&&gh(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&ee(Ia),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ws(Tn),Ht(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function GV(s,a){switch(Wg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ws(Tn),Ct(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ai(a),null;case 31:if(a.memoizedState!==null){if(Xi(a),a.alternate===null)throw Error(i(340));xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Xi(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ee(fn),null;case 4:return Ct(),null;case 10:return ws(a.type),null;case 22:case 23:return Xi(a),dv(),s!==null&&ee(Ia),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ws(Tn),null;case 25:return null;default:return null}}function qb(s,a){switch(Wg(a),a.tag){case 3:ws(Tn),Ct();break;case 26:case 27:case 5:Ai(a);break;case 4:Ct();break;case 31:a.memoizedState!==null&&Xi(a);break;case 13:Xi(a);break;case 19:ee(fn);break;case 10:ws(a.type);break;case 22:case 23:Xi(a),dv(),s!==null&&ee(Ia);break;case 24:ws(Tn)}}function Rc(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var T=h.next;u=T;do{if((u.tag&s)===s){h=void 0;var E=u.create,x=u.inst;h=E(),x.destroy=h}u=u.next}while(u!==T)}}catch(P){At(a,a.return,P)}}function yo(s,a,u){try{var h=a.updateQueue,T=h!==null?h.lastEffect:null;if(T!==null){var E=T.next;h=E;do{if((h.tag&s)===s){var x=h.inst,P=x.destroy;if(P!==void 0){x.destroy=void 0,T=a;var $=u,Z=P;try{Z()}catch(ae){At(T,$,ae)}}}h=h.next}while(h!==E)}}catch(ae){At(a,a.return,ae)}}function Hb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{PS(a,u)}catch(h){At(s,s.return,h)}}}function Gb(s,a,u){u.props=Pa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){At(s,a,h)}}function Nc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(T){At(s,a,T)}}function es(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(T){At(s,a,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(T){At(s,a,T)}else u.current=null}function jb(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(T){At(s,s.return,T)}}function Hv(s,a,u){try{var h=s.stateNode;fL(h,s.type,u,a),h[ze]=a}catch(T){At(s,s.return,T)}}function $b(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&xo(s.type)||s.tag===4}function Gv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$b(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&xo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jv(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Vn));else if(h!==4&&(h===27&&xo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(jv(s,a,u),s=s.sibling;s!==null;)jv(s,a,u),s=s.sibling}function vh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&xo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(vh(s,a,u),s=s.sibling;s!==null;)vh(s,a,u),s=s.sibling}function Kb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,T=a.attributes;T.length;)a.removeAttributeNode(T[0]);Yn(a,h,u),a[be]=s,a[ze]=u}catch(E){At(s,s.return,E)}}var Rs=!1,bn=!1,$v=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,Un=null;function jV(s,a){if(s=s.containerInfo,hy=Uh,s=oS(s),Fg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var T=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var x=0,P=-1,$=-1,Z=0,ae=0,ce=s,te=null;t:for(;;){for(var ie;ce!==u||T!==0&&ce.nodeType!==3||(P=x+T),ce!==E||h!==0&&ce.nodeType!==3||($=x+h),ce.nodeType===3&&(x+=ce.nodeValue.length),(ie=ce.firstChild)!==null;)te=ce,ce=ie;for(;;){if(ce===s)break t;if(te===u&&++Z===T&&(P=x),te===E&&++ae===h&&($=x),(ie=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=ie}u=P===-1||$===-1?null:{start:P,end:$}}else u=null}u=u||{start:0,end:0}}else u=null;for(py={focusedElem:s,selectionRange:u},Uh=!1,Un=a;Un!==null;)if(a=Un,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Un=s;else for(;Un!==null;){switch(a=Un,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)T=s[u],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,T=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ce=Pa(u.type,T);s=h.getSnapshotBeforeUpdate(Ce,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){At(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)vy(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Un=s;break}Un=a.return}}function Jb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Ds(s,u),h&4&&Rc(5,u);break;case 1:if(Ds(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(x){At(u,u.return,x)}else{var T=Pa(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(T,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){At(u,u.return,x)}}h&64&&Hb(u),h&512&&Nc(u,u.return);break;case 3:if(Ds(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{PS(s,a)}catch(x){At(u,u.return,x)}}break;case 27:a===null&&h&4&&Kb(u);case 26:case 5:Ds(s,u),a===null&&h&4&&jb(u),h&512&&Nc(u,u.return);break;case 12:Ds(s,u);break;case 31:Ds(s,u),h&4&&Qb(s,u);break;case 13:Ds(s,u),h&4&&Zb(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=eL.bind(null,u),TL(s,u))));break;case 22:if(h=u.memoizedState!==null||Rs,!h){a=a!==null&&a.memoizedState!==null||bn,T=Rs;var E=bn;Rs=h,(bn=a)&&!E?Ms(s,u,(u.subtreeFlags&8772)!==0):Ds(s,u),Rs=T,bn=E}break;case 30:break;default:Ds(s,u)}}function Wb(s){var a=s.alternate;a!==null&&(s.alternate=null,Wb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ar(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,Li=!1;function Ns(s,a,u){for(u=u.child;u!==null;)Xb(s,a,u),u=u.sibling}function Xb(s,a,u){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(hi,u)}catch{}switch(u.tag){case 26:bn||es(u,a),Ns(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:bn||es(u,a);var h=Jt,T=Li;xo(u.type)&&(Jt=u.stateNode,Li=!1),Ns(s,a,u),Fc(u.stateNode),Jt=h,Li=T;break;case 5:bn||es(u,a);case 6:if(h=Jt,T=Li,Jt=null,Ns(s,a,u),Jt=h,Li=T,Jt!==null)if(Li)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(u.stateNode)}catch(E){At(u,a,E)}else try{Jt.removeChild(u.stateNode)}catch(E){At(u,a,E)}break;case 18:Jt!==null&&(Li?(s=Jt,Hw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Wl(s)):Hw(Jt,u.stateNode));break;case 4:h=Jt,T=Li,Jt=u.stateNode.containerInfo,Li=!0,Ns(s,a,u),Jt=h,Li=T;break;case 0:case 11:case 14:case 15:yo(2,u,a),bn||yo(4,u,a),Ns(s,a,u);break;case 1:bn||(es(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Gb(u,a,h)),Ns(s,a,u);break;case 21:Ns(s,a,u);break;case 22:bn=(h=bn)||u.memoizedState!==null,Ns(s,a,u),bn=h;break;default:Ns(s,a,u)}}function Qb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Wl(s)}catch(u){At(a,a.return,u)}}}function Zb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Wl(s)}catch(u){At(a,a.return,u)}}function $V(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Yb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Yb),a;default:throw Error(i(435,s.tag))}}function yh(s,a){var u=$V(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var T=tL.bind(null,s,h);h.then(T,T)}})}function Oi(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var T=u[h],E=s,x=a,P=x;e:for(;P!==null;){switch(P.tag){case 27:if(xo(P.type)){Jt=P.stateNode,Li=!1;break e}break;case 5:Jt=P.stateNode,Li=!1;break e;case 3:case 4:Jt=P.stateNode.containerInfo,Li=!0;break e}P=P.return}if(Jt===null)throw Error(i(160));Xb(E,x,T),Jt=null,Li=!1,E=T.alternate,E!==null&&(E.return=null),T.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ew(a,s),a=a.sibling}var Pr=null;function ew(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Oi(a,s),Ui(s),h&4&&(yo(3,s,s.return),Rc(3,s),yo(5,s,s.return));break;case 1:Oi(a,s),Ui(s),h&512&&(bn||u===null||es(u,u.return)),h&64&&Rs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var T=Pr;if(Oi(a,s),Ui(s),h&512&&(bn||u===null||es(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,T=T.ownerDocument||T;t:switch(h){case"title":E=T.getElementsByTagName("title")[0],(!E||E[Mi]||E[be]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=T.createElement(h),T.head.insertBefore(E,T.querySelector("head > title"))),Yn(E,h,u),E[be]=s,Yt(E),h=E;break e;case"link":var x=ex("link","href",T).get(h+(u.href||""));if(x){for(var P=0;P<x.length;P++)if(E=x[P],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(P,1);break t}}E=T.createElement(h),Yn(E,h,u),T.head.appendChild(E);break;case"meta":if(x=ex("meta","content",T).get(h+(u.content||""))){for(P=0;P<x.length;P++)if(E=x[P],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(P,1);break t}}E=T.createElement(h),Yn(E,h,u),T.head.appendChild(E);break;default:throw Error(i(468,h))}E[be]=s,Yt(E),h=E}s.stateNode=h}else tx(T,s.type,s.stateNode);else s.stateNode=Zw(T,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?tx(T,s.type,s.stateNode):Zw(T,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Hv(s,s.memoizedProps,u.memoizedProps)}break;case 27:Oi(a,s),Ui(s),h&512&&(bn||u===null||es(u,u.return)),u!==null&&h&4&&Hv(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Oi(a,s),Ui(s),h&512&&(bn||u===null||es(u,u.return)),s.flags&32){T=s.stateNode;try{cr(T,"")}catch(Ce){At(s,s.return,Ce)}}h&4&&s.stateNode!=null&&(T=s.memoizedProps,Hv(s,T,u!==null?u.memoizedProps:T)),h&1024&&($v=!0);break;case 6:if(Oi(a,s),Ui(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ce){At(s,s.return,Ce)}}break;case 3:if(kh=null,T=Pr,Pr=Mh(a.containerInfo),Oi(a,s),Pr=T,Ui(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Wl(a.containerInfo)}catch(Ce){At(s,s.return,Ce)}$v&&($v=!1,tw(s));break;case 4:h=Pr,Pr=Mh(s.stateNode.containerInfo),Oi(a,s),Ui(s),Pr=h;break;case 12:Oi(a,s),Ui(s);break;case 31:Oi(a,s),Ui(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,yh(s,h)));break;case 13:Oi(a,s),Ui(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Th=wt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,yh(s,h)));break;case 22:T=s.memoizedState!==null;var $=u!==null&&u.memoizedState!==null,Z=Rs,ae=bn;if(Rs=Z||T,bn=ae||$,Oi(a,s),bn=ae,Rs=Z,Ui(s),h&8192)e:for(a=s.stateNode,a._visibility=T?a._visibility&-2:a._visibility|1,T&&(u===null||$||Rs||bn||ka(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){$=u=a;try{if(E=$.stateNode,T)x=E.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{P=$.stateNode;var ce=$.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;P.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){At($,$.return,Ce)}}}else if(a.tag===6){if(u===null){$=a;try{$.stateNode.nodeValue=T?"":$.memoizedProps}catch(Ce){At($,$.return,Ce)}}}else if(a.tag===18){if(u===null){$=a;try{var ie=$.stateNode;T?Gw(ie,!0):Gw($.stateNode,!1)}catch(Ce){At($,$.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,yh(s,u))));break;case 19:Oi(a,s),Ui(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,yh(s,h)));break;case 30:break;case 21:break;default:Oi(a,s),Ui(s)}}function Ui(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if($b(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var T=u.stateNode,E=Gv(s);vh(s,E,T);break;case 5:var x=u.stateNode;u.flags&32&&(cr(x,""),u.flags&=-33);var P=Gv(s);vh(s,P,x);break;case 3:case 4:var $=u.stateNode.containerInfo,Z=Gv(s);jv(s,Z,$);break;default:throw Error(i(161))}}catch(ae){At(s,s.return,ae)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function tw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;tw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ds(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Jb(s,a.alternate,a),a=a.sibling}function ka(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:yo(4,a,a.return),ka(a);break;case 1:es(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Gb(a,a.return,u),ka(a);break;case 27:Fc(a.stateNode);case 26:case 5:es(a,a.return),ka(a);break;case 22:a.memoizedState===null&&ka(a);break;case 30:ka(a);break;default:ka(a)}s=s.sibling}}function Ms(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,T=s,E=a,x=E.flags;switch(E.tag){case 0:case 11:case 15:Ms(T,E,u),Rc(4,E);break;case 1:if(Ms(T,E,u),h=E,T=h.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Z){At(h,h.return,Z)}if(h=E,T=h.updateQueue,T!==null){var P=h.stateNode;try{var $=T.shared.hiddenCallbacks;if($!==null)for(T.shared.hiddenCallbacks=null,T=0;T<$.length;T++)MS($[T],P)}catch(Z){At(h,h.return,Z)}}u&&x&64&&Hb(E),Nc(E,E.return);break;case 27:Kb(E);case 26:case 5:Ms(T,E,u),u&&h===null&&x&4&&jb(E),Nc(E,E.return);break;case 12:Ms(T,E,u);break;case 31:Ms(T,E,u),u&&x&4&&Qb(T,E);break;case 13:Ms(T,E,u),u&&x&4&&Zb(T,E);break;case 22:E.memoizedState===null&&Ms(T,E,u),Nc(E,E.return);break;case 30:break;default:Ms(T,E,u)}a=a.sibling}}function Kv(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&gc(u))}function Yv(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&gc(s))}function kr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)nw(s,a,u,h),a=a.sibling}function nw(s,a,u,h){var T=a.flags;switch(a.tag){case 0:case 11:case 15:kr(s,a,u,h),T&2048&&Rc(9,a);break;case 1:kr(s,a,u,h);break;case 3:kr(s,a,u,h),T&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&gc(s)));break;case 12:if(T&2048){kr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,x=E.id,P=E.onPostCommit;typeof P=="function"&&P(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch($){At(a,a.return,$)}}else kr(s,a,u,h);break;case 31:kr(s,a,u,h);break;case 13:kr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,x=a.alternate,a.memoizedState!==null?E._visibility&2?kr(s,a,u,h):Dc(s,a):E._visibility&2?kr(s,a,u,h):(E._visibility|=2,Fl(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),T&2048&&Kv(x,a);break;case 24:kr(s,a,u,h),T&2048&&Yv(a.alternate,a);break;default:kr(s,a,u,h)}}function Fl(s,a,u,h,T){for(T=T&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,x=a,P=u,$=h,Z=x.flags;switch(x.tag){case 0:case 11:case 15:Fl(E,x,P,$,T),Rc(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?Fl(E,x,P,$,T):Dc(E,x):(ae._visibility|=2,Fl(E,x,P,$,T)),T&&Z&2048&&Kv(x.alternate,x);break;case 24:Fl(E,x,P,$,T),T&&Z&2048&&Yv(x.alternate,x);break;default:Fl(E,x,P,$,T)}a=a.sibling}}function Dc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,T=h.flags;switch(h.tag){case 22:Dc(u,h),T&2048&&Kv(h.alternate,h);break;case 24:Dc(u,h),T&2048&&Yv(h.alternate,h);break;default:Dc(u,h)}a=a.sibling}}var Mc=8192;function Bl(s,a,u){if(s.subtreeFlags&Mc)for(s=s.child;s!==null;)iw(s,a,u),s=s.sibling}function iw(s,a,u){switch(s.tag){case 26:Bl(s,a,u),s.flags&Mc&&s.memoizedState!==null&&ML(u,Pr,s.memoizedState,s.memoizedProps);break;case 5:Bl(s,a,u);break;case 3:case 4:var h=Pr;Pr=Mh(s.stateNode.containerInfo),Bl(s,a,u),Pr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Mc,Mc=16777216,Bl(s,a,u),Mc=h):Bl(s,a,u));break;default:Bl(s,a,u)}}function rw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Pc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Un=h,ow(h,s)}rw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sw(s),s=s.sibling}function sw(s){switch(s.tag){case 0:case 11:case 15:Pc(s),s.flags&2048&&yo(9,s,s.return);break;case 3:Pc(s);break;case 12:Pc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,_h(s)):Pc(s);break;default:Pc(s)}}function _h(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Un=h,ow(h,s)}rw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:yo(8,a,a.return),_h(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,_h(a));break;default:_h(a)}s=s.sibling}}function ow(s,a){for(;Un!==null;){var u=Un;switch(u.tag){case 0:case 11:case 15:yo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Un=h;else e:for(u=s;Un!==null;){h=Un;var T=h.sibling,E=h.return;if(Wb(h),h===u){Un=null;break e}if(T!==null){T.return=E,Un=T;break e}Un=E}}}var KV={getCacheForType:function(s){var a=$n(Tn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return $n(Tn).controller.signal}},YV=typeof WeakMap=="function"?WeakMap:Map,_t=0,kt=null,it=null,ot=0,xt=0,Qi=null,_o=!1,zl=!1,Jv=!1,Ps=0,sn=0,To=0,Va=0,Wv=0,Zi=0,ql=0,kc=null,Fi=null,Xv=!1,Th=0,aw=0,Eh=1/0,Sh=null,Eo=null,Nn=0,So=null,Hl=null,ks=0,Qv=0,Zv=null,lw=null,Vc=0,ey=null;function er(){return(_t&2)!==0&&ot!==0?ot&-ot:W.T!==null?oy():yn()}function uw(){if(Zi===0)if((ot&536870912)===0||ct){var s=Je;Je<<=1,(Je&3932160)===0&&(Je=262144),Zi=s}else Zi=536870912;return s=Wi.current,s!==null&&(s.flags|=32),Zi}function Bi(s,a,u){(s===kt&&(xt===2||xt===9)||s.cancelPendingCommit!==null)&&(Gl(s,0),bo(s,ot,Zi,!1)),It(s,u),((_t&2)===0||s!==kt)&&(s===kt&&((_t&2)===0&&(Va|=u),sn===4&&bo(s,ot,Zi,!1)),ts(s))}function cw(s,a,u){if((_t&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||He(s,a),T=h?XV(s,a):ny(s,a,!0),E=h;do{if(T===0){zl&&!h&&bo(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!JV(u)){T=ny(s,a,!1),E=!1;continue}if(T===2){if(E=a,s.errorRecoveryDisabledLanes&E)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var P=s;T=kc;var $=P.current.memoizedState.isDehydrated;if($&&(Gl(P,x).flags|=256),x=ny(P,x,!1),x!==2){if(Jv&&!$){P.errorRecoveryDisabledLanes|=E,Va|=E,T=4;break e}E=Fi,Fi=T,E!==null&&(Fi===null?Fi=E:Fi.push.apply(Fi,E))}T=x}if(E=!1,T!==2)continue}}if(T===1){Gl(s,0),bo(s,a,0,!0);break}e:{switch(h=s,E=T,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:bo(h,a,Zi,!_o);break e;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(T=Th+300-wt(),10<T)){if(bo(h,a,Zi,!_o),Pe(h,0,!0)!==0)break e;ks=a,h.timeoutHandle=zw(dw.bind(null,h,u,Fi,Sh,Xv,a,Zi,Va,ql,_o,E,"Throttled",-0,0),T);break e}dw(h,u,Fi,Sh,Xv,a,Zi,Va,ql,_o,E,null,-0,0)}}break}while(!0);ts(s)}function dw(s,a,u,h,T,E,x,P,$,Z,ae,ce,te,ie){if(s.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},iw(a,E,ce);var Ce=(E&62914560)===E?Th-wt():(E&4194048)===E?aw-wt():0;if(Ce=PL(ce,Ce),Ce!==null){ks=E,s.cancelPendingCommit=Ce(_w.bind(null,s,a,E,u,h,T,x,P,$,ae,ce,null,te,ie)),bo(s,E,x,!Z);return}}_w(s,a,E,u,h,T,x,P,$)}function JV(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var T=u[h],E=T.getSnapshot;T=T.value;try{if(!Yi(E(),T))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function bo(s,a,u,h){a&=~Wv,a&=~Va,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var T=a;0<T;){var E=31-pe(T),x=1<<E;h[E]=-1,T&=~x}u!==0&&Gn(s,u,a)}function bh(){return(_t&6)===0?(Lc(0),!1):!0}function ty(){if(it!==null){if(xt===0)var s=it.return;else s=it,bs=Aa=null,vv(s),kl=null,yc=0,s=it;for(;s!==null;)qb(s.alternate,s),s=s.return;it=null}}function Gl(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,mL(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),ks=0,ty(),kt=s,it=u=Es(s.current,null),ot=a,xt=0,Qi=null,_o=!1,zl=He(s,a),Jv=!1,ql=Zi=Wv=Va=To=sn=0,Fi=kc=null,Xv=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var T=31-pe(h),E=1<<T;a|=s[T],h&=~E}return Ps=a,Gf(),u}function fw(s,a){We=null,W.H=Ac,a===Pl||a===Qf?(a=IS(),xt=3):a===sv?(a=IS(),xt=4):xt=a===Pv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qi=a,it===null&&(sn=1,fh(s,fr(a,s.current)))}function hw(){var s=Wi.current;return s===null?!0:(ot&4194048)===ot?gr===null:(ot&62914560)===ot||(ot&536870912)!==0?s===gr:!1}function pw(){var s=W.H;return W.H=Ac,s===null?Ac:s}function mw(){var s=W.A;return W.A=KV,s}function wh(){sn=4,_o||(ot&4194048)!==ot&&Wi.current!==null||(zl=!0),(To&134217727)===0&&(Va&134217727)===0||kt===null||bo(kt,ot,Zi,!1)}function ny(s,a,u){var h=_t;_t|=2;var T=pw(),E=mw();(kt!==s||ot!==a)&&(Sh=null,Gl(s,a)),a=!1;var x=sn;e:do try{if(xt!==0&&it!==null){var P=it,$=Qi;switch(xt){case 8:ty(),x=6;break e;case 3:case 2:case 9:case 6:Wi.current===null&&(a=!0);var Z=xt;if(xt=0,Qi=null,jl(s,P,$,Z),u&&zl){x=0;break e}break;default:Z=xt,xt=0,Qi=null,jl(s,P,$,Z)}}WV(),x=sn;break}catch(ae){fw(s,ae)}while(!0);return a&&s.shellSuspendCounter++,bs=Aa=null,_t=h,W.H=T,W.A=E,it===null&&(kt=null,ot=0,Gf()),x}function WV(){for(;it!==null;)gw(it)}function XV(s,a){var u=_t;_t|=2;var h=pw(),T=mw();kt!==s||ot!==a?(Sh=null,Eh=wt()+500,Gl(s,a)):zl=He(s,a);e:do try{if(xt!==0&&it!==null){a=it;var E=Qi;t:switch(xt){case 1:xt=0,Qi=null,jl(s,a,E,1);break;case 2:case 9:if(AS(E)){xt=0,Qi=null,vw(a);break}a=function(){xt!==2&&xt!==9||kt!==s||(xt=7),ts(s)},E.then(a,a);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:AS(E)?(xt=0,Qi=null,vw(a)):(xt=0,Qi=null,jl(s,a,E,7));break;case 5:var x=null;switch(it.tag){case 26:x=it.memoizedState;case 5:case 27:var P=it;if(x?nx(x):P.stateNode.complete){xt=0,Qi=null;var $=P.sibling;if($!==null)it=$;else{var Z=P.return;Z!==null?(it=Z,xh(Z)):it=null}break t}}xt=0,Qi=null,jl(s,a,E,5);break;case 6:xt=0,Qi=null,jl(s,a,E,6);break;case 8:ty(),sn=6;break e;default:throw Error(i(462))}}QV();break}catch(ae){fw(s,ae)}while(!0);return bs=Aa=null,W.H=h,W.A=T,_t=u,it!==null?0:(kt=null,ot=0,Gf(),sn)}function QV(){for(;it!==null&&!Ar();)gw(it)}function gw(s){var a=Bb(s.alternate,s,Ps);s.memoizedProps=s.pendingProps,a===null?xh(s):it=a}function vw(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=kb(u,a,a.pendingProps,a.type,void 0,ot);break;case 11:a=kb(u,a,a.pendingProps,a.type.render,a.ref,ot);break;case 5:vv(a);default:qb(u,a),a=it=mS(a,Ps),a=Bb(u,a,Ps)}s.memoizedProps=s.pendingProps,a===null?xh(s):it=a}function jl(s,a,u,h){bs=Aa=null,vv(a),kl=null,yc=0;var T=a.return;try{if(BV(s,T,a,u,ot)){sn=1,fh(s,fr(u,s.current)),it=null;return}}catch(E){if(T!==null)throw it=T,E;sn=1,fh(s,fr(u,s.current)),it=null;return}a.flags&32768?(ct||h===1?s=!0:zl||(ot&536870912)!==0?s=!1:(_o=s=!0,(h===2||h===9||h===3||h===6)&&(h=Wi.current,h!==null&&h.tag===13&&(h.flags|=16384))),yw(a,s)):xh(a)}function xh(s){var a=s;do{if((a.flags&32768)!==0){yw(a,_o);return}s=a.return;var u=HV(a.alternate,a,Ps);if(u!==null){it=u;return}if(a=a.sibling,a!==null){it=a;return}it=a=s}while(a!==null);sn===0&&(sn=5)}function yw(s,a){do{var u=GV(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);sn=6,it=null}function _w(s,a,u,h,T,E,x,P,$){s.cancelPendingCommit=null;do Ah();while(Nn!==0);if((_t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Gg,ht(s,u,E,x,P,$),s===kt&&(it=kt=null,ot=0),Hl=a,So=s,ks=u,Qv=E,Zv=T,lw=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,nL(Xt,function(){return ww(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=W.T,W.T=null,T=oe.p,oe.p=2,x=_t,_t|=4;try{jV(s,a,u)}finally{_t=x,oe.p=T,W.T=h}}Nn=1,Tw(),Ew(),Sw()}}function Tw(){if(Nn===1){Nn=0;var s=So,a=Hl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=W.T,W.T=null;var h=oe.p;oe.p=2;var T=_t;_t|=4;try{ew(a,s);var E=py,x=oS(s.containerInfo),P=E.focusedElem,$=E.selectionRange;if(x!==P&&P&&P.ownerDocument&&sS(P.ownerDocument.documentElement,P)){if($!==null&&Fg(P)){var Z=$.start,ae=$.end;if(ae===void 0&&(ae=Z),"selectionStart"in P)P.selectionStart=Z,P.selectionEnd=Math.min(ae,P.value.length);else{var ce=P.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ce=P.textContent.length,Le=Math.min($.start,Ce),Dt=$.end===void 0?Le:Math.min($.end,Ce);!ie.extend&&Le>Dt&&(x=Dt,Dt=Le,Le=x);var J=rS(P,Le),Y=rS(P,Dt);if(J&&Y&&(ie.rangeCount!==1||ie.anchorNode!==J.node||ie.anchorOffset!==J.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var Q=ce.createRange();Q.setStart(J.node,J.offset),ie.removeAllRanges(),Le>Dt?(ie.addRange(Q),ie.extend(Y.node,Y.offset)):(Q.setEnd(Y.node,Y.offset),ie.addRange(Q))}}}}for(ce=[],ie=P;ie=ie.parentNode;)ie.nodeType===1&&ce.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ce.length;P++){var ue=ce[P];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Uh=!!hy,py=hy=null}finally{_t=T,oe.p=h,W.T=u}}s.current=a,Nn=2}}function Ew(){if(Nn===2){Nn=0;var s=So,a=Hl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=W.T,W.T=null;var h=oe.p;oe.p=2;var T=_t;_t|=4;try{Jb(s,a.alternate,a)}finally{_t=T,oe.p=h,W.T=u}}Nn=3}}function Sw(){if(Nn===4||Nn===3){Nn=0,Gi();var s=So,a=Hl,u=ks,h=lw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nn=5:(Nn=0,Hl=So=null,bw(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(Eo=null),Rn(u),a=a.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(hi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=W.T,T=oe.p,oe.p=2,W.T=null;try{for(var E=s.onRecoverableError,x=0;x<h.length;x++){var P=h[x];E(P.value,{componentStack:P.stack})}}finally{W.T=a,oe.p=T}}(ks&3)!==0&&Ah(),ts(s),T=s.pendingLanes,(u&261930)!==0&&(T&42)!==0?s===ey?Vc++:(Vc=0,ey=s):Vc=0,Lc(0)}}function bw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,gc(a)))}function Ah(){return Tw(),Ew(),Sw(),ww()}function ww(){if(Nn!==5)return!1;var s=So,a=Qv;Qv=0;var u=Rn(ks),h=W.T,T=oe.p;try{oe.p=32>u?32:u,W.T=null,u=Zv,Zv=null;var E=So,x=ks;if(Nn=0,Hl=So=null,ks=0,(_t&6)!==0)throw Error(i(331));var P=_t;if(_t|=4,sw(E.current),nw(E,E.current,x,u),_t=P,Lc(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(hi,E)}catch{}return!0}finally{oe.p=T,W.T=h,bw(s,a)}}function xw(s,a,u){a=fr(u,a),a=Mv(s.stateNode,a,2),s=mo(s,a,2),s!==null&&(It(s,2),ts(s))}function At(s,a,u){if(s.tag===3)xw(s,s,u);else for(;a!==null;){if(a.tag===3){xw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Eo===null||!Eo.has(h))){s=fr(u,s),u=Ab(2),h=mo(a,u,2),h!==null&&(Cb(u,h,a,s),It(h,2),ts(h));break}}a=a.return}}function iy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new YV;var T=new Set;h.set(a,T)}else T=h.get(a),T===void 0&&(T=new Set,h.set(a,T));T.has(u)||(Jv=!0,T.add(u),s=ZV.bind(null,s,a,u),a.then(s,s))}function ZV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,kt===s&&(ot&u)===u&&(sn===4||sn===3&&(ot&62914560)===ot&&300>wt()-Th?(_t&2)===0&&Gl(s,0):Wv|=u,ql===ot&&(ql=0)),ts(s)}function Aw(s,a){a===0&&(a=Ri()),s=ba(s,a),s!==null&&(It(s,a),ts(s))}function eL(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Aw(s,u)}function tL(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,T=s.memoizedState;T!==null&&(u=T.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),Aw(s,u)}function nL(s,a){return kn(s,a)}var Ch=null,$l=null,ry=!1,Ih=!1,sy=!1,wo=0;function ts(s){s!==$l&&s.next===null&&($l===null?Ch=$l=s:$l=$l.next=s),Ih=!0,ry||(ry=!0,rL())}function Lc(s,a){if(!sy&&Ih){sy=!0;do for(var u=!1,h=Ch;h!==null;){if(s!==0){var T=h.pendingLanes;if(T===0)var E=0;else{var x=h.suspendedLanes,P=h.pingedLanes;E=(1<<31-pe(42|s)+1)-1,E&=T&~(x&~P),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,Nw(h,E))}else E=ot,E=Pe(h,h===kt?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||He(h,E)||(u=!0,Nw(h,E));h=h.next}while(u);sy=!1}}function iL(){Cw()}function Cw(){Ih=ry=!1;var s=0;wo!==0&&pL()&&(s=wo);for(var a=wt(),u=null,h=Ch;h!==null;){var T=h.next,E=Iw(h,a);E===0?(h.next=null,u===null?Ch=T:u.next=T,T===null&&($l=u)):(u=h,(s!==0||(E&3)!==0)&&(Ih=!0)),h=T}Nn!==0&&Nn!==5||Lc(s),wo!==0&&(wo=0)}function Iw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,T=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var x=31-pe(E),P=1<<x,$=T[x];$===-1?((P&u)===0||(P&h)!==0)&&(T[x]=cn(P,a)):$<=a&&(s.expiredLanes|=P),E&=~P}if(a=kt,u=ot,u=Pe(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(xt===2||xt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&fi(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||He(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&fi(h),Rn(u)){case 2:case 8:u=Lt;break;case 32:u=Xt;break;case 268435456:u=Cr;break;default:u=Xt}return h=Rw.bind(null,s),u=kn(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&fi(h),s.callbackPriority=2,s.callbackNode=null,2}function Rw(s,a){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Ah()&&s.callbackNode!==u)return null;var h=ot;return h=Pe(s,s===kt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(cw(s,h,a),Iw(s,wt()),s.callbackNode!=null&&s.callbackNode===u?Rw.bind(null,s):null)}function Nw(s,a){if(Ah())return null;cw(s,a,!0)}function rL(){gL(function(){(_t&6)!==0?kn(ke,iL):Cw()})}function oy(){if(wo===0){var s=Dl;s===0&&(s=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),wo=s}return wo}function Dw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Jr(""+s)}function Mw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function sL(s,a,u,h,T){if(a==="submit"&&u&&u.stateNode===T){var E=Dw((T[ze]||null).action),x=h.submitter;x&&(a=(a=x[ze]||null)?Dw(a.formAction):x.getAttribute("formAction"),a!==null&&(E=a,x=null));var P=new ga("action","action",null,h,T);s.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(wo!==0){var $=x?Mw(T,x):new FormData(T);Av(u,{pending:!0,data:$,method:T.method,action:E},null,$)}}else typeof E=="function"&&(P.preventDefault(),$=x?Mw(T,x):new FormData(T),Av(u,{pending:!0,data:$,method:T.method,action:E},E,$))},currentTarget:T}]})}}for(var ay=0;ay<Hg.length;ay++){var ly=Hg[ay],oL=ly.toLowerCase(),aL=ly[0].toUpperCase()+ly.slice(1);Mr(oL,"on"+aL)}Mr(uS,"onAnimationEnd"),Mr(cS,"onAnimationIteration"),Mr(dS,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(bV,"onTransitionRun"),Mr(wV,"onTransitionStart"),Mr(xV,"onTransitionCancel"),Mr(fS,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Pw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],T=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var x=h.length-1;0<=x;x--){var P=h[x],$=P.instance,Z=P.currentTarget;if(P=P.listener,$!==E&&T.isPropagationStopped())break e;E=P,T.currentTarget=Z;try{E(T)}catch(ae){Hf(ae)}T.currentTarget=null,E=$}else for(x=0;x<h.length;x++){if(P=h[x],$=P.instance,Z=P.currentTarget,P=P.listener,$!==E&&T.isPropagationStopped())break e;E=P,T.currentTarget=Z;try{E(T)}catch(ae){Hf(ae)}T.currentTarget=null,E=$}}}}function rt(s,a){var u=a[Di];u===void 0&&(u=a[Di]=new Set);var h=s+"__bubble";u.has(h)||(kw(a,s,2,!1),u.add(h))}function uy(s,a,u){var h=0;a&&(h|=4),kw(u,s,h,a)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function cy(s){if(!s[Rh]){s[Rh]=!0,Rr.forEach(function(u){u!=="selectionchange"&&(lL.has(u)||uy(u,!1,s),uy(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Rh]||(a[Rh]=!0,uy("selectionchange",!1,a))}}function kw(s,a,u,h){switch(ux(a)){case 2:var T=LL;break;case 8:T=OL;break;default:T=xy}u=T.bind(null,a,u,s),T=void 0,!sc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(T=!0),h?T!==void 0?s.addEventListener(a,u,{capture:!0,passive:T}):s.addEventListener(a,u,!0):T!==void 0?s.addEventListener(a,u,{passive:T}):s.addEventListener(a,u,!1)}function dy(s,a,u,h,T){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var P=h.stateNode.containerInfo;if(P===T)break;if(x===4)for(x=h.return;x!==null;){var $=x.tag;if(($===3||$===4)&&x.stateNode.containerInfo===T)return;x=x.return}for(;P!==null;){if(x=Pi(P),x===null)return;if($=x.tag,$===5||$===6||$===26||$===27){h=E=x;continue e}P=P.parentNode}}h=h.return}Cf(function(){var Z=E,ae=yl(u),ce=[];e:{var te=hS.get(s);if(te!==void 0){var ie=ga,Ce=s;switch(s){case"keypress":if(ma(u)===0)break e;case"keydown":case"keyup":ie=Lf;break;case"focusin":Ce="focus",ie=ro;break;case"focusout":Ce="blur",ie=ro;break;case"beforeblur":case"afterblur":ie=ro;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Uf;break;case uS:case cS:case dS:ie=El;break;case fS:ie=Sl;break;case"scroll":case"scrollend":ie=If;break;case"wheel":ie=Bf;break;case"copy":case"cut":case"paste":ie=Mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=cc;break;case"toggle":case"beforetoggle":ie=oo}var Le=(a&4)!==0,Dt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Z,Q;Y!==null;){var ue=Y;if(Q=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Q===null||J===null||(ue=ki(Y,J),ue!=null&&Le.push(Uc(Y,ue,Q))),Dt)break;Y=Y.return}0<Le.length&&(te=new ie(te,Ce,null,u,ae),ce.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",te&&u!==vl&&(Ce=u.relatedTarget||u.fromElement)&&(Pi(Ce)||Ce[Pt]))break e;if((ie||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ce=u.relatedTarget||u.toElement,ie=Z,Ce=Ce?Pi(Ce):null,Ce!==null&&(Dt=o(Ce),Le=Ce.tag,Ce!==Dt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ie=null,Ce=Z),ie!==Ce)){if(Le=Rf,ue="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=cc,ue="onPointerLeave",J="onPointerEnter",Y="pointer"),Dt=ie==null?te:Kr(ie),Q=Ce==null?te:Kr(Ce),te=new Le(ue,Y+"leave",ie,u,ae),te.target=Dt,te.relatedTarget=Q,ue=null,Pi(ae)===Z&&(Le=new Le(J,Y+"enter",Ce,u,ae),Le.target=Q,Le.relatedTarget=Dt,ue=Le),Dt=ue,ie&&Ce)t:{for(Le=uL,J=ie,Y=Ce,Q=0,ue=J;ue;ue=Le(ue))Q++;ue=0;for(var De=Y;De;De=Le(De))ue++;for(;0<Q-ue;)J=Le(J),Q--;for(;0<ue-Q;)Y=Le(Y),ue--;for(;Q--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ie!==null&&Vw(ce,te,ie,Le,!1),Ce!==null&&Dt!==null&&Vw(ce,Dt,Ce,Le,!0)}}e:{if(te=Z?Kr(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var mt=QE;else if(Vi(te))if(ZE)mt=TV;else{mt=yV;var Re=vV}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&ic(Z.elementType)&&(mt=QE):mt=_V;if(mt&&(mt=mt(s,Z))){Ta(ce,mt,u,ae);break e}Re&&Re(s,te,Z),s==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&gl(te,"number",te.value)}switch(Re=Z?Kr(Z):window,s){case"focusin":(Vi(Re)||Re.contentEditable==="true")&&(bl=Re,Bg=Z,hc=null);break;case"focusout":hc=Bg=bl=null;break;case"mousedown":zg=!0;break;case"contextmenu":case"mouseup":case"dragend":zg=!1,aS(ce,u,ae);break;case"selectionchange":if(SV)break;case"keydown":case"keyup":aS(ce,u,ae)}var Xe;if(w)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ze?Et(s,u)&&(at="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(at="onCompositionStart");at&&(X&&u.locale!=="ko"&&(Ze||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ze&&(Xe=eo()):(Ki=ae,_l="value"in Ki?Ki.value:Ki.textContent,Ze=!0)),Re=Nh(Z,at),0<Re.length&&(at=new ac(at,s,null,u,ae),ce.push({event:at,listeners:Re}),Xe?at.data=Xe:(Xe=_n(u),Xe!==null&&(at.data=Xe)))),(Xe=L?Ln(s,u):On(s,u))&&(at=Nh(Z,"onBeforeInput"),0<at.length&&(Re=new ac("onBeforeInput","beforeinput",null,u,ae),ce.push({event:Re,listeners:at}),Re.data=Xe)),sL(ce,s,Z,u,ae)}Pw(ce,a)})}function Uc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Nh(s,a){for(var u=a+"Capture",h=[];s!==null;){var T=s,E=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||E===null||(T=ki(s,u),T!=null&&h.unshift(Uc(s,T,E)),T=ki(s,a),T!=null&&h.push(Uc(s,T,E))),s.tag===3)return h;s=s.return}return[]}function uL(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Vw(s,a,u,h,T){for(var E=a._reactName,x=[];u!==null&&u!==h;){var P=u,$=P.alternate,Z=P.stateNode;if(P=P.tag,$!==null&&$===h)break;P!==5&&P!==26&&P!==27||Z===null||($=Z,T?(Z=ki(u,E),Z!=null&&x.unshift(Uc(u,Z,$))):T||(Z=ki(u,E),Z!=null&&x.push(Uc(u,Z,$)))),u=u.return}x.length!==0&&s.push({event:a,listeners:x})}var cL=/\r\n?/g,dL=/\u0000|\uFFFD/g;function Lw(s){return(typeof s=="string"?s:""+s).replace(cL,`
`).replace(dL,"")}function Ow(s,a){return a=Lw(a),Lw(s)===a}function Nt(s,a,u,h,T,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||cr(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&cr(s,""+h);break;case"className":Xs(s,"class",h);break;case"tabIndex":Xs(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Xs(s,u,h);break;case"style":xf(s,h,E);break;case"data":if(a!=="object"){Xs(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Jr(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&Nt(s,a,"name",T.name,T,null),Nt(s,a,"formEncType",T.formEncType,T,null),Nt(s,a,"formMethod",T.formMethod,T,null),Nt(s,a,"formTarget",T.formTarget,T,null)):(Nt(s,a,"encType",T.encType,T,null),Nt(s,a,"method",T.method,T,null),Nt(s,a,"target",T.target,T,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Jr(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Vn);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(T.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Jr(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),Ws(s,"popover",h);break;case"xlinkActuate":ur(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ur(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ur(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ur(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ur(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ur(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ur(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ur(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ur(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ws(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=kg.get(u)||u,Ws(s,u,h))}}function fy(s,a,u,h,T,E){switch(u){case"style":xf(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(T.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?cr(s,h):(typeof h=="number"||typeof h=="bigint")&&cr(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(T=u.endsWith("Capture"),a=u.slice(2,T?u.length-7:void 0),E=s[ze]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,T),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,T);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ws(s,u,h)}}}function Yn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,T=!1,E;for(E in u)if(u.hasOwnProperty(E)){var x=u[E];if(x!=null)switch(E){case"src":h=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Nt(s,a,E,x,u,null)}}T&&Nt(s,a,"srcSet",u.srcSet,u,null),h&&Nt(s,a,"src",u.src,u,null);return;case"input":rt("invalid",s);var P=E=x=T=null,$=null,Z=null;for(h in u)if(u.hasOwnProperty(h)){var ae=u[h];if(ae!=null)switch(h){case"name":T=ae;break;case"type":x=ae;break;case"checked":$=ae;break;case"defaultChecked":Z=ae;break;case"value":E=ae;break;case"defaultValue":P=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:Nt(s,a,h,ae,u,null)}}ha(s,E,P,$,Z,x,T,!1);return;case"select":rt("invalid",s),h=x=E=null;for(T in u)if(u.hasOwnProperty(T)&&(P=u[T],P!=null))switch(T){case"value":E=P;break;case"defaultValue":x=P;break;case"multiple":h=P;default:Nt(s,a,T,P,u,null)}a=E,u=x,s.multiple=!!h,a!=null?pt(s,!!h,a,!1):u!=null&&pt(s,!!h,u,!0);return;case"textarea":rt("invalid",s),E=T=h=null;for(x in u)if(u.hasOwnProperty(x)&&(P=u[x],P!=null))switch(x){case"value":h=P;break;case"defaultValue":T=P;break;case"children":E=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Nt(s,a,x,P,u,null)}Zs(s,h,T,E);return;case"option":for($ in u)if(u.hasOwnProperty($)&&(h=u[$],h!=null))switch($){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Nt(s,a,$,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<Oc.length;h++)rt(Oc[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in u)if(u.hasOwnProperty(Z)&&(h=u[Z],h!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Nt(s,a,Z,h,u,null)}return;default:if(ic(a)){for(ae in u)u.hasOwnProperty(ae)&&(h=u[ae],h!==void 0&&fy(s,a,ae,h,u,void 0));return}}for(P in u)u.hasOwnProperty(P)&&(h=u[P],h!=null&&Nt(s,a,P,h,u,null))}function fL(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,E=null,x=null,P=null,$=null,Z=null,ae=null;for(ie in u){var ce=u[ie];if(u.hasOwnProperty(ie)&&ce!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":$=ce;default:h.hasOwnProperty(ie)||Nt(s,a,ie,null,h,ce)}}for(var te in h){var ie=h[te];if(ce=u[te],h.hasOwnProperty(te)&&(ie!=null||ce!=null))switch(te){case"type":E=ie;break;case"name":T=ie;break;case"checked":Z=ie;break;case"defaultChecked":ae=ie;break;case"value":x=ie;break;case"defaultValue":P=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==ce&&Nt(s,a,te,ie,h,ce)}}Qs(s,x,P,$,Z,ae,E,T);return;case"select":ie=x=P=te=null;for(E in u)if($=u[E],u.hasOwnProperty(E)&&$!=null)switch(E){case"value":break;case"multiple":ie=$;default:h.hasOwnProperty(E)||Nt(s,a,E,null,h,$)}for(T in h)if(E=h[T],$=u[T],h.hasOwnProperty(T)&&(E!=null||$!=null))switch(T){case"value":te=E;break;case"defaultValue":P=E;break;case"multiple":x=E;default:E!==$&&Nt(s,a,T,E,h,$)}a=P,u=x,h=ie,te!=null?pt(s,!!u,te,!1):!!h!=!!u&&(a!=null?pt(s,!!u,a,!0):pt(s,!!u,u?[]:"",!1));return;case"textarea":ie=te=null;for(P in u)if(T=u[P],u.hasOwnProperty(P)&&T!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Nt(s,a,P,null,h,T)}for(x in h)if(T=h[x],E=u[x],h.hasOwnProperty(x)&&(T!=null||E!=null))switch(x){case"value":te=T;break;case"defaultValue":ie=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:T!==E&&Nt(s,a,x,T,h,E)}pa(s,te,ie);return;case"option":for(var Ce in u)if(te=u[Ce],u.hasOwnProperty(Ce)&&te!=null&&!h.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:Nt(s,a,Ce,null,h,te)}for($ in h)if(te=h[$],ie=u[$],h.hasOwnProperty($)&&te!==ie&&(te!=null||ie!=null))switch($){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Nt(s,a,$,te,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&Nt(s,a,Le,null,h,te);for(Z in h)if(te=h[Z],ie=u[Z],h.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Nt(s,a,Z,te,h,ie)}return;default:if(ic(a)){for(var Dt in u)te=u[Dt],u.hasOwnProperty(Dt)&&te!==void 0&&!h.hasOwnProperty(Dt)&&fy(s,a,Dt,void 0,h,te);for(ae in h)te=h[ae],ie=u[ae],!h.hasOwnProperty(ae)||te===ie||te===void 0&&ie===void 0||fy(s,a,ae,te,h,ie);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&Nt(s,a,J,null,h,te);for(ce in h)te=h[ce],ie=u[ce],!h.hasOwnProperty(ce)||te===ie||te==null&&ie==null||Nt(s,a,ce,te,h,ie)}function Uw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hL(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var T=u[h],E=T.transferSize,x=T.initiatorType,P=T.duration;if(E&&P&&Uw(x)){for(x=0,P=T.responseEnd,h+=1;h<u.length;h++){var $=u[h],Z=$.startTime;if(Z>P)break;var ae=$.transferSize,ce=$.initiatorType;ae&&Uw(ce)&&($=$.responseEnd,x+=ae*($<P?1:(P-Z)/($-Z)))}if(--h,a+=8*(E+x)/(T.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var hy=null,py=null;function Dh(s){return s.nodeType===9?s:s.ownerDocument}function Fw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function my(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gy=null;function pL(){var s=window.event;return s&&s.type==="popstate"?s===gy?!1:(gy=s,!0):(gy=null,!1)}var zw=typeof setTimeout=="function"?setTimeout:void 0,mL=typeof clearTimeout=="function"?clearTimeout:void 0,qw=typeof Promise=="function"?Promise:void 0,gL=typeof queueMicrotask=="function"?queueMicrotask:typeof qw<"u"?function(s){return qw.resolve(null).then(s).catch(vL)}:zw;function vL(s){setTimeout(function(){throw s})}function xo(s){return s==="head"}function Hw(s,a){var u=a,h=0;do{var T=u.nextSibling;if(s.removeChild(u),T&&T.nodeType===8)if(u=T.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(T),Wl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Fc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Fc(u);for(var E=u.firstChild;E;){var x=E.nextSibling,P=E.nodeName;E[Mi]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=x}}else u==="body"&&Fc(s.ownerDocument.body);u=T}while(u);Wl(a)}function Gw(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function vy(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":vy(u),ar(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function yL(s,a,u,h){for(;s.nodeType===1;){var T=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Mi])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=vr(s.nextSibling),s===null)break}return null}function _L(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=vr(s.nextSibling),s===null))return null;return s}function jw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=vr(s.nextSibling),s===null))return null;return s}function yy(s){return s.data==="$?"||s.data==="$~"}function _y(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function TL(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function vr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Ty=null;function $w(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return vr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Kw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function Yw(s,a,u){switch(a=Dh(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Fc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ar(s)}var yr=new Map,Jw=new Set;function Mh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Vs=oe.d;oe.d={f:EL,r:SL,D:bL,C:wL,L:xL,m:AL,X:IL,S:CL,M:RL};function EL(){var s=Vs.f(),a=bh();return s||a}function SL(s){var a=lr(s);a!==null&&a.tag===5&&a.type==="form"?fb(a):Vs.r(s)}var Kl=typeof document>"u"?null:document;function Ww(s,a,u){var h=Kl;if(h&&typeof a=="string"&&a){var T=nn(a);T='link[rel="'+s+'"][href="'+T+'"]',typeof u=="string"&&(T+='[crossorigin="'+u+'"]'),Jw.has(T)||(Jw.add(T),s={rel:s,crossOrigin:u,href:a},h.querySelector(T)===null&&(a=h.createElement("link"),Yn(a,"link",s),Yt(a),h.head.appendChild(a)))}}function bL(s){Vs.D(s),Ww("dns-prefetch",s,null)}function wL(s,a){Vs.C(s,a),Ww("preconnect",s,a)}function xL(s,a,u){Vs.L(s,a,u);var h=Kl;if(h&&s&&a){var T='link[rel="preload"][as="'+nn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(T+='[imagesrcset="'+nn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(T+='[imagesizes="'+nn(u.imageSizes)+'"]')):T+='[href="'+nn(s)+'"]';var E=T;switch(a){case"style":E=Yl(s);break;case"script":E=Jl(s)}yr.has(E)||(s=y({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),yr.set(E,s),h.querySelector(T)!==null||a==="style"&&h.querySelector(Bc(E))||a==="script"&&h.querySelector(zc(E))||(a=h.createElement("link"),Yn(a,"link",s),Yt(a),h.head.appendChild(a)))}}function AL(s,a){Vs.m(s,a);var u=Kl;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",T='link[rel="modulepreload"][as="'+nn(h)+'"][href="'+nn(s)+'"]',E=T;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Jl(s)}if(!yr.has(E)&&(s=y({rel:"modulepreload",href:s},a),yr.set(E,s),u.querySelector(T)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zc(E)))return}h=u.createElement("link"),Yn(h,"link",s),Yt(h),u.head.appendChild(h)}}}function CL(s,a,u){Vs.S(s,a,u);var h=Kl;if(h&&s){var T=gi(h).hoistableStyles,E=Yl(s);a=a||"default";var x=T.get(E);if(!x){var P={loading:0,preload:null};if(x=h.querySelector(Bc(E)))P.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},u),(u=yr.get(E))&&Ey(s,u);var $=x=h.createElement("link");Yt($),Yn($,"link",s),$._p=new Promise(function(Z,ae){$.onload=Z,$.onerror=ae}),$.addEventListener("load",function(){P.loading|=1}),$.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Ph(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:P},T.set(E,x)}}}function IL(s,a){Vs.X(s,a);var u=Kl;if(u&&s){var h=gi(u).hoistableScripts,T=Jl(s),E=h.get(T);E||(E=u.querySelector(zc(T)),E||(s=y({src:s,async:!0},a),(a=yr.get(T))&&Sy(s,a),E=u.createElement("script"),Yt(E),Yn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(T,E))}}function RL(s,a){Vs.M(s,a);var u=Kl;if(u&&s){var h=gi(u).hoistableScripts,T=Jl(s),E=h.get(T);E||(E=u.querySelector(zc(T)),E||(s=y({src:s,async:!0,type:"module"},a),(a=yr.get(T))&&Sy(s,a),E=u.createElement("script"),Yt(E),Yn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(T,E))}}function Xw(s,a,u,h){var T=(T=Oe.current)?Mh(T):null;if(!T)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Yl(u.href),u=gi(T).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Yl(u.href);var E=gi(T).hoistableStyles,x=E.get(s);if(x||(T=T.ownerDocument||T,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,x),(E=T.querySelector(Bc(s)))&&!E._p&&(x.instance=E,x.state.loading=5),yr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},yr.set(s,u),E||NL(T,s,u,x.state))),a&&h===null)throw Error(i(528,""));return x}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Jl(u),u=gi(T).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Yl(s){return'href="'+nn(s)+'"'}function Bc(s){return'link[rel="stylesheet"]['+s+"]"}function Qw(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function NL(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Yn(a,"link",u),Yt(a),s.head.appendChild(a))}function Jl(s){return'[src="'+nn(s)+'"]'}function zc(s){return"script[async]"+s}function Zw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+nn(u.href)+'"]');if(h)return a.instance=h,Yt(h),h;var T=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Yt(h),Yn(h,"style",T),Ph(h,u.precedence,s),a.instance=h;case"stylesheet":T=Yl(u.href);var E=s.querySelector(Bc(T));if(E)return a.state.loading|=4,a.instance=E,Yt(E),E;h=Qw(u),(T=yr.get(T))&&Ey(h,T),E=(s.ownerDocument||s).createElement("link"),Yt(E);var x=E;return x._p=new Promise(function(P,$){x.onload=P,x.onerror=$}),Yn(E,"link",h),a.state.loading|=4,Ph(E,u.precedence,s),a.instance=E;case"script":return E=Jl(u.src),(T=s.querySelector(zc(E)))?(a.instance=T,Yt(T),T):(h=u,(T=yr.get(E))&&(h=y({},u),Sy(h,T)),s=s.ownerDocument||s,T=s.createElement("script"),Yt(T),Yn(T,"link",h),s.head.appendChild(T),a.instance=T);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Ph(h,u.precedence,s));return a.instance}function Ph(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=h.length?h[h.length-1]:null,E=T,x=0;x<h.length;x++){var P=h[x];if(P.dataset.precedence===a)E=P;else if(E!==T)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function Ey(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Sy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var kh=null;function ex(s,a,u){if(kh===null){var h=new Map,T=kh=new Map;T.set(u,h)}else T=kh,h=T.get(u),h||(h=new Map,T.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),T=0;T<u.length;T++){var E=u[T];if(!(E[Mi]||E[be]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var x=E.getAttribute(a)||"";x=s+x;var P=h.get(x);P?P.push(E):h.set(x,[E])}}return h}function tx(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function DL(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function nx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ML(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=Yl(h.href),E=a.querySelector(Bc(T));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Vh.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Yt(E);return}E=a.ownerDocument||a,h=Qw(h),(T=yr.get(T))&&Ey(h,T),E=E.createElement("link"),Yt(E);var x=E;x._p=new Promise(function(P,$){x.onload=P,x.onerror=$}),Yn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Vh.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var by=0;function PL(s,a){return s.stylesheets&&s.count===0&&Oh(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Oh(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&by===0&&(by=62500*hL());var T=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Oh(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>by?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(T)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Lh=null;function Oh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Lh=new Map,a.forEach(kL,s),Lh=null,Vh.call(s))}function kL(s,a){if(!(a.state.loading&4)){var u=Lh.get(s);if(u)var h=u.get(null);else{u=new Map,Lh.set(s,u);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<T.length;E++){var x=T[E];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),h=x)}h&&u.set(null,h)}T=a.instance,x=T.getAttribute("data-precedence"),E=u.get(x)||h,E===h&&u.set(null,T),u.set(x,T),this.count++,h=Vh.bind(this),T.addEventListener("load",h),T.addEventListener("error",h),E?E.parentNode.insertBefore(T,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),a.state.loading|=4}}var qc={$$typeof:O,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function VL(s,a,u,h,T,E,x,P,$){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=h,this.onUncaughtError=T,this.onCaughtError=E,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function ix(s,a,u,h,T,E,x,P,$,Z,ae,ce){return s=new VL(s,a,u,x,$,Z,ae,ce,P),a=1,E===!0&&(a|=24),E=Ji(3,null,null,a),s.current=E,E.stateNode=s,a=nv(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},ov(E),s}function rx(s){return s?(s=Al,s):Al}function sx(s,a,u,h,T,E){T=rx(T),h.context===null?h.context=T:h.pendingContext=T,h=po(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=mo(s,h,a),u!==null&&(Bi(u,s,a),Tc(u,s,a))}function ox(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function wy(s,a){ox(s,a),(s=s.alternate)&&ox(s,a)}function ax(s){if(s.tag===13||s.tag===31){var a=ba(s,67108864);a!==null&&Bi(a,s,67108864),wy(s,67108864)}}function lx(s){if(s.tag===13||s.tag===31){var a=er();a=Ni(a);var u=ba(s,a);u!==null&&Bi(u,s,a),wy(s,a)}}var Uh=!0;function LL(s,a,u,h){var T=W.T;W.T=null;var E=oe.p;try{oe.p=2,xy(s,a,u,h)}finally{oe.p=E,W.T=T}}function OL(s,a,u,h){var T=W.T;W.T=null;var E=oe.p;try{oe.p=8,xy(s,a,u,h)}finally{oe.p=E,W.T=T}}function xy(s,a,u,h){if(Uh){var T=Ay(h);if(T===null)dy(s,a,h,Fh,u),cx(s,h);else if(FL(T,s,a,u,h))h.stopPropagation();else if(cx(s,h),a&4&&-1<UL.indexOf(s)){for(;T!==null;){var E=lr(T);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var x=nt(E.pendingLanes);if(x!==0){var P=E;for(P.pendingLanes|=2,P.entangledLanes|=2;x;){var $=1<<31-pe(x);P.entanglements[1]|=$,x&=~$}ts(E),(_t&6)===0&&(Eh=wt()+500,Lc(0))}}break;case 31:case 13:P=ba(E,2),P!==null&&Bi(P,E,2),bh(),wy(E,2)}if(E=Ay(h),E===null&&dy(s,a,h,Fh,u),E===T)break;T=E}T!==null&&h.stopPropagation()}else dy(s,a,h,null,u)}}function Ay(s){return s=yl(s),Cy(s)}var Fh=null;function Cy(s){if(Fh=null,s=Pi(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Fh=s,null}function ux(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case ke:return 2;case Lt:return 8;case Xt:case tn:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Iy=!1,Ao=null,Co=null,Io=null,Hc=new Map,Gc=new Map,Ro=[],UL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cx(s,a){switch(s){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":Hc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(a.pointerId)}}function jc(s,a,u,h,T,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[T]},a!==null&&(a=lr(a),a!==null&&ax(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,T!==null&&a.indexOf(T)===-1&&a.push(T),s)}function FL(s,a,u,h,T){switch(a){case"focusin":return Ao=jc(Ao,s,a,u,h,T),!0;case"dragenter":return Co=jc(Co,s,a,u,h,T),!0;case"mouseover":return Io=jc(Io,s,a,u,h,T),!0;case"pointerover":var E=T.pointerId;return Hc.set(E,jc(Hc.get(E)||null,s,a,u,h,T)),!0;case"gotpointercapture":return E=T.pointerId,Gc.set(E,jc(Gc.get(E)||null,s,a,u,h,T)),!0}return!1}function dx(s){var a=Pi(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,ji(s.priority,function(){lx(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,ji(s.priority,function(){lx(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Ay(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);vl=h,u.target.dispatchEvent(h),vl=null}else return a=lr(u),a!==null&&ax(a),s.blockedOn=u,!1;a.shift()}return!0}function fx(s,a,u){Bh(s)&&u.delete(a)}function BL(){Iy=!1,Ao!==null&&Bh(Ao)&&(Ao=null),Co!==null&&Bh(Co)&&(Co=null),Io!==null&&Bh(Io)&&(Io=null),Hc.forEach(fx),Gc.forEach(fx)}function zh(s,a){s.blockedOn===a&&(s.blockedOn=null,Iy||(Iy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BL)))}var qh=null;function hx(s){qh!==s&&(qh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qh===s&&(qh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],T=s[a+2];if(typeof h!="function"){if(Cy(h||u)===null)continue;break}var E=lr(u);E!==null&&(s.splice(a,3),a-=3,Av(E,{pending:!0,data:T,method:u.method,action:h},h,T))}}))}function Wl(s){function a($){return zh($,s)}Ao!==null&&zh(Ao,s),Co!==null&&zh(Co,s),Io!==null&&zh(Io,s),Hc.forEach(a),Gc.forEach(a);for(var u=0;u<Ro.length;u++){var h=Ro[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ro.length&&(u=Ro[0],u.blockedOn===null);)dx(u),u.blockedOn===null&&Ro.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var T=u[h],E=u[h+1],x=T[ze]||null;if(typeof E=="function")x||hx(u);else if(x){var P=null;if(E&&E.hasAttribute("formAction")){if(T=E,x=E[ze]||null)P=x.formAction;else if(Cy(T)!==null)continue}else P=x.action;typeof P=="function"?u[h+1]=P:(u.splice(h,3),h-=3),hx(u)}}}function px(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(x){return T=x})},focusReset:"manual",scroll:"manual"})}function a(){T!==null&&(T(),T=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,T=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),T!==null&&(T(),T=null)}}}function Ry(s){this._internalRoot=s}Hh.prototype.render=Ry.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=er();sx(u,h,s,a,null,null)},Hh.prototype.unmount=Ry.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;sx(s.current,2,null,s,null,null),bh(),a[Pt]=null}};function Hh(s){this._internalRoot=s}Hh.prototype.unstable_scheduleHydration=function(s){if(s){var a=yn();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Ro.length&&a!==0&&a<Ro[u].priority;u++);Ro.splice(u,0,s),u===0&&dx(s)}};var mx=e.version;if(mx!=="19.2.1")throw Error(i(527,mx,"19.2.1"));oe.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var zL={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{hi=Gh.inject(zL),Bt=Gh}catch{}}return Kc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",T=Sb,E=bb,x=wb;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(T=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=ix(s,1,!1,null,null,u,h,null,T,E,x,px),s[Pt]=a.current,cy(s),new Ry(a)},Kc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,T="",E=Sb,x=bb,P=wb,$=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError),u.formState!==void 0&&($=u.formState)),a=ix(s,1,!0,a,u??null,h,T,$,E,x,P,px),a.context=rx(null),u=a.current,h=er(),h=Ni(h),T=po(h),T.callback=null,mo(u,T,h),u=h,a.current.lanes=u,It(a,u),ts(a),s[Pt]=a.current,cy(s),new Hh(a)},Kc.version="19.2.1",Kc}var xx;function WL(){if(xx)return My.exports;xx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),My.exports=JL(),My.exports}var XL=WL();const QL=$1(XL),Yc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],ZL=({onComplete:t})=>{const[e,n]=z.useState(0),i=()=>{e<Yc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Yc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Yc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Yc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Yc.length-1?"Suivant":"Commencer"})]})]})]})})},eO=()=>{};var Ax={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},tO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},J1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let _=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(_=64)),i.push(n[p],n[y],n[_],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||y==null)throw new nO;const _=o<<2|c>>4;if(i.push(_),f!==64){const b=c<<4&240|f>>2;if(i.push(b),y!==64){const A=f<<6&192|y;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iO=function(t){const e=Y1(t);return J1.encodeByteArray(e,!0)},Yp=function(t){return iO(t).replace(/\./g,"")},W1=function(t){try{return J1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=()=>rO().__FIREBASE_DEFAULTS__,oO=()=>{if(typeof process>"u"||typeof Ax>"u")return;const t=Ax.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W1(t[1]);return e&&JSON.parse(e)},Bm=()=>{try{return eO()||sO()||oO()||aO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X1=t=>{var e,n;return(n=(e=Bm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q1=t=>{const e=X1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Z1=()=>{var t;return(t=Bm())===null||t===void 0?void 0:t.config},eN=t=>{var e;return(e=Bm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yp(JSON.stringify(n)),Yp(JSON.stringify(l)),""].join(".")}const vd={};function uO(){const t={prod:[],emulator:[]};for(const e of Object.keys(vd))vd[e]?t.emulator.push(e):t.prod.push(e);return t}function cO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cx=!1;function K_(t,e){if(typeof window>"u"||typeof document>"u"||!ia(window.location.host)||vd[t]===e||vd[t]||Cx)return;vd[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=uO().prod.length>0;function l(){const _=document.getElementById(i);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Cx=!0,l()},_}function p(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=cO(i),b=n("text"),A=document.getElementById(b)||document.createElement("span"),I=n("learnmore"),R=document.getElementById(I)||document.createElement("a"),V=n("preprendIcon"),k=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;c(O),p(R,I);const G=f();d(k,V),O.append(k,A,R,G),document.body.appendChild(O)}o?(A.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function fO(){var t;const e=(t=Bm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gO(){const t=ci();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vO(){return!fO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yO(){try{return typeof indexedDB=="object"}catch{return!1}}function _O(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="FirebaseError";class ms extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=TO,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rf.prototype.create)}}class rf{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?EO(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new ms(r,c,i)}}function EO(t,e){return t.replace(SO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const SO=/\{\$([^}]+)}/g;function bO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function el(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Ix(o)&&Ix(l)){if(!el(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ix(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function id(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function rd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wO(t,e){const n=new xO(t,e);return n.subscribe.bind(n)}class xO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");AO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ly),r.error===void 0&&(r.error=Ly),r.complete===void 0&&(r.complete=Ly);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ly(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new lO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RO(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fa){return this.instances.has(e)}getOptions(e=Fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:IO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fa){return this.component?this.component.multipleInstances?e:Fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IO(t){return t===Fa?void 0:t}function RO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const DO={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},MO=lt.INFO,PO={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},kO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=PO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y_{constructor(e){this.name=e,this._logLevel=MO,this._logHandler=kO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const VO=(t,e)=>e.some(n=>t instanceof n);let Rx,Nx;function LO(){return Rx||(Rx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OO(){return Nx||(Nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nN=new WeakMap,S0=new WeakMap,iN=new WeakMap,Oy=new WeakMap,J_=new WeakMap;function UO(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(qo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&nN.set(n,t)}).catch(()=>{}),J_.set(e,t),e}function FO(t){if(S0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});S0.set(t,e)}let b0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return S0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BO(t){b0=t(b0)}function zO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Uy(this),e,...n);return iN.set(i,e.sort?e.sort():[e]),qo(i)}:OO().includes(t)?function(...e){return t.apply(Uy(this),e),qo(nN.get(this))}:function(...e){return qo(t.apply(Uy(this),e))}}function qO(t){return typeof t=="function"?zO(t):(t instanceof IDBTransaction&&FO(t),VO(t,LO())?new Proxy(t,b0):t)}function qo(t){if(t instanceof IDBRequest)return UO(t);if(Oy.has(t))return Oy.get(t);const e=qO(t);return e!==t&&(Oy.set(t,e),J_.set(e,t)),e}const Uy=t=>J_.get(t);function HO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=qo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(qo(l.result),d.oldVersion,d.newVersion,qo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const GO=["get","getKey","getAll","getAllKeys","count"],jO=["put","add","delete","clear"],Fy=new Map;function Dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=jO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||GO.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&d.done]))[0]};return Fy.set(e,o),o}BO(t=>({...t,get:(e,n,i)=>Dx(e,n)||t.get(e,n,i),has:(e,n)=>!!Dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function KO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const w0="@firebase/app",Mx="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Y_("@firebase/app"),YO="@firebase/app-compat",JO="@firebase/analytics-compat",WO="@firebase/analytics",XO="@firebase/app-check-compat",QO="@firebase/app-check",ZO="@firebase/auth",e4="@firebase/auth-compat",t4="@firebase/database",n4="@firebase/data-connect",i4="@firebase/database-compat",r4="@firebase/functions",s4="@firebase/functions-compat",o4="@firebase/installations",a4="@firebase/installations-compat",l4="@firebase/messaging",u4="@firebase/messaging-compat",c4="@firebase/performance",d4="@firebase/performance-compat",f4="@firebase/remote-config",h4="@firebase/remote-config-compat",p4="@firebase/storage",m4="@firebase/storage-compat",g4="@firebase/firestore",v4="@firebase/ai",y4="@firebase/firestore-compat",_4="firebase",T4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="[DEFAULT]",E4={[w0]:"fire-core",[YO]:"fire-core-compat",[WO]:"fire-analytics",[JO]:"fire-analytics-compat",[QO]:"fire-app-check",[XO]:"fire-app-check-compat",[ZO]:"fire-auth",[e4]:"fire-auth-compat",[t4]:"fire-rtdb",[n4]:"fire-data-connect",[i4]:"fire-rtdb-compat",[r4]:"fire-fn",[s4]:"fire-fn-compat",[o4]:"fire-iid",[a4]:"fire-iid-compat",[l4]:"fire-fcm",[u4]:"fire-fcm-compat",[c4]:"fire-perf",[d4]:"fire-perf-compat",[f4]:"fire-rc",[h4]:"fire-rc-compat",[p4]:"fire-gcs",[m4]:"fire-gcs-compat",[g4]:"fire-fst",[y4]:"fire-fst-compat",[v4]:"fire-vertex","fire-js":"fire-js",[_4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Map,S4=new Map,A0=new Map;function Px(t,e){try{t.container.addComponent(e)}catch(n){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tl(t){const e=t.name;if(A0.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;A0.set(e,t);for(const n of Jp.values())Px(n,t);for(const n of S4.values())Px(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new rf("app","Firebase",b4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=T4;function rN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:x0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Ho.create("bad-app-name",{appName:String(r)});if(n||(n=Z1()),!n)throw Ho.create("no-options");const o=Jp.get(r);if(o){if(el(n,o.options)&&el(i,o.config))return o;throw Ho.create("duplicate-app",{appName:r})}const l=new NO(r);for(const d of A0.values())l.addComponent(d);const c=new w4(n,i,l);return Jp.set(r,c),c}function W_(t=x0){const e=Jp.get(t);if(!e&&t===x0&&Z1())return rN();if(!e)throw Ho.create("no-app",{appName:t});return e}function ss(t,e,n){var i;let r=(i=E4[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(c.join(" "));return}tl(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",A4=1,Fd="firebase-heartbeat-store";let By=null;function sN(){return By||(By=HO(x4,A4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ho.create("idb-open",{originalErrorMessage:t.message})})),By}async function C4(t){try{const n=(await sN()).transaction(Fd),i=await n.objectStore(Fd).get(oN(t));return await n.done,i}catch(e){if(e instanceof ms)qs.warn(e.message);else{const n=Ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qs.warn(n.message)}}}async function kx(t,e){try{const i=(await sN()).transaction(Fd,"readwrite");await i.objectStore(Fd).put(e,oN(t)),await i.done}catch(n){if(n instanceof ms)qs.warn(n.message);else{const i=Ho.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qs.warn(i.message)}}}function oN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=1024,R4=30;class N4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Vx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>R4){const l=P4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vx(),{heartbeatsToSend:i,unsentEntries:r}=D4(this._heartbeatsCache.heartbeats),o=Yp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return qs.warn(n),""}}}function Vx(){return new Date().toISOString().substring(0,10)}function D4(t,e=I4){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),Lx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Lx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class M4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yO()?_O().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lx(t){return Yp(JSON.stringify({version:2,heartbeats:t})).length}function P4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){tl(new Ko("platform-logger",e=>new $O(e),"PRIVATE")),tl(new Ko("heartbeat",e=>new N4(e),"PRIVATE")),ss(w0,Mx,t),ss(w0,Mx,"esm2017"),ss("fire-js","")}k4("");function X_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function aN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V4=aN,lN=new rf("auth","Firebase",aN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new Y_("@firebase/auth");function L4(t,...e){Wp.logLevel<=lt.WARN&&Wp.warn(`Auth (${ul}): ${t}`,...e)}function Ap(t,...e){Wp.logLevel<=lt.ERROR&&Wp.error(`Auth (${ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,...e){throw Z_(t,...e)}function zr(t,...e){return Z_(t,...e)}function Q_(t,e,n){const i=Object.assign(Object.assign({},V4()),{[e]:n});return new rf("auth","Firebase",i).create(e,{appName:t.name})}function Fs(t){return Q_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O4(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&wr(t,"argument-error"),Q_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return lN.create(t,...e)}function Fe(t,e,...n){if(!t)throw Z_(e,...n)}function Os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ap(e),new Error(e)}function Hs(t,e){t||Os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function U4(){return Ox()==="http:"||Ox()==="https:"}function Ox(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U4()||pO()||"connection"in navigator)?navigator.onLine:!0}function B4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hs(n>e,"Short delay should be less than long delay!"),this.isMobile=dO()||mO()}get(){return F4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e){Hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H4=new of(3e4,6e4);function ra(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function sa(t,e,n,i,r={}){return cN(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=sf(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return hO()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ia(t.emulatorConfig.host)&&(f.credentials="include"),uN.fetch()(await dN(t,t.config.apiHost,n,c),f)})}async function cN(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},z4),e);try{const r=new j4(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw jh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw jh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw jh(t,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Q_(t,p,f);wr(t,p)}}catch(r){if(r instanceof ms)throw r;wr(t,"network-request-failed",{message:String(r)})}}async function af(t,e,n,i,r={}){const o=await sa(t,e,n,i,r);return"mfaPendingCredential"in o&&wr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function dN(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?eT(t.config,r):`${t.config.apiScheme}://${r}`;return q4.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function G4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(zr(this.auth,"network-request-failed")),H4.get())})}}function jh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=zr(t,e,i);return r.customData._tokenResponse=n,r}function Ux(t){return t!==void 0&&t.enterprise!==void 0}class $4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return G4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K4(t,e){return sa(t,"GET","/v2/recaptchaConfig",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(t,e){return sa(t,"POST","/v1/accounts:delete",e)}async function Xp(t,e){return sa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J4(t,e=!1){const n=Wt(t),i=await n.getIdToken(e),r=tT(i);Fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:yd(zy(r.auth_time)),issuedAtTime:yd(zy(r.iat)),expirationTime:yd(zy(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function zy(t){return Number(t)*1e3}function tT(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ap("JWT malformed, contained fewer than 3 sections"),null;try{const r=W1(n);return r?JSON.parse(r):(Ap("Failed to decode base64 JWT payload"),null)}catch(r){return Ap("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Fx(t){const e=tT(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ms&&W4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function W4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yd(this.lastLoginAt),this.creationTime=yd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Bd(t,Xp(n,{idToken:i}));Fe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fN(o.providerUserInfo):[],c=Z4(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new I0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function Q4(t){const e=Wt(t);await Qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function fN(t){return t.map(e=>{var{providerId:n}=e,i=X_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e){const n=await cN(t,{},async()=>{const i=sf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await dN(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&ia(t.emulatorConfig.host)&&(d.credentials="include"),uN.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tU(t,e){return sa(t,"POST","/v2/accounts:revokeToken",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Fx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await eU(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new gu;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gu,this.toJSON())}_performRefresh(){return Os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=X_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new I0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bd(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J4(this,e)}reload(){return Q4(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Qp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qi(this.auth.app))return Promise.reject(Fs(this.auth));const e=await this.getIdToken();return await Bd(this,Y4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,d,f,p;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(l=n.photoURL)!==null&&l!==void 0?l:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:G,isAnonymous:K,providerData:H,stsTokenManager:D}=n;Fe(O&&D,e,"internal-error");const N=gu.fromJSON(this.name,D);Fe(typeof O=="string",e,"internal-error"),Do(y,e.name),Do(_,e.name),Fe(typeof G=="boolean",e,"internal-error"),Fe(typeof K=="boolean",e,"internal-error"),Do(b,e.name),Do(A,e.name),Do(I,e.name),Do(R,e.name),Do(V,e.name),Do(k,e.name);const M=new Ur({uid:O,auth:e,email:_,emailVerified:G,displayName:y,isAnonymous:K,photoURL:A,phoneNumber:b,tenantId:I,stsTokenManager:N,createdAt:V,lastLoginAt:k});return H&&Array.isArray(H)&&(M.providerData=H.map(B=>Object.assign({},B))),R&&(M._redirectEventId=R),M}static async _fromIdTokenResponse(e,n,i=!1){const r=new gu;r.updateFromServerResponse(n);const o=new Ur({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Qp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?fN(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new gu;c.updateFromIdToken(i);const d=new Ur({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new I0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new Map;function Us(t){Hs(t instanceof Function,"Expected a class definition");let e=Bx.get(t);return e?(Hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hN.type="NONE";const zx=hN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e,n){return`firebase:${t}:${e}:${n}`}class vu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Cp(this.userKey,r.apiKey,o),this.fullPersistenceKey=Cp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xp(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new vu(Us(zx),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Us(zx);const l=Cp(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const _=await Xp(e,{idToken:p}).catch(()=>{});if(!_)break;y=await Ur._fromGetAccountInfoResponse(e,_,p)}else y=Ur._fromJSON(e,p);f!==o&&(c=y),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new vu(o,e,i):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new vu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_N(e))return"Blackberry";if(TN(e))return"Webos";if(mN(e))return"Safari";if((e.includes("chrome/")||gN(e))&&!e.includes("edge/"))return"Chrome";if(yN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pN(t=ci()){return/firefox\//i.test(t)}function mN(t=ci()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gN(t=ci()){return/crios\//i.test(t)}function vN(t=ci()){return/iemobile/i.test(t)}function yN(t=ci()){return/android/i.test(t)}function _N(t=ci()){return/blackberry/i.test(t)}function TN(t=ci()){return/webos/i.test(t)}function nT(t=ci()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nU(t=ci()){var e;return nT(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iU(){return gO()&&document.documentMode===10}function EN(t=ci()){return nT(t)||yN(t)||TN(t)||_N(t)||/windows phone/i.test(t)||vN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e=[]){let n;switch(t){case"Browser":n=qx(ci());break;case"Worker":n=`${qx(ci())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e={}){return sa(t,"GET","/v2/passwordPolicy",ra(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=6;class aU{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:oU,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hx(this),this.idTokenSubscription=new Hx(this),this.beforeStateQueue=new rU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Us(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await vu.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xp(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qi(this.app))return Promise.reject(Fs(this));const n=e?Wt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qi(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qi(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sU(this),n=new aU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rf("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await tU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Us(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await vu.create(this,[Us(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oa(t){return Wt(t)}class Hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=wO(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uU(t){qm=t}function bN(t){return qm.loadJS(t)}function cU(){return qm.recaptchaEnterpriseScript}function dU(){return qm.gapiScript}function fU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new pU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class pU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mU="recaptcha-enterprise",wN="NO_RECAPTCHA";class gU{constructor(e){this.type=mU,this.auth=oa(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{K4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new $4(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function r(o,l,c){const d=window.grecaptcha;Ux(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(wN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&Ux(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=cU();d.length!==0&&(d+=c),bN(d).then(()=>{r(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function Gx(t,e,n,i=!1,r=!1){const o=new gU(t);let l;if(r)l=wN;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function R0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Gx(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Gx(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t,e){const n=zm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(el(o,e??{}))return r;wr(r,"already-initialized")}return n.initialize({options:e})}function yU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Us);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _U(t,e,n){const i=oa(t);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=xN(e),{host:l,port:c}=TU(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(el(f,i.config.emulator)&&el(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,ia(l)?($_(`${o}//${l}${d}`),K_("Auth",!0)):EU()}function xN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TU(t){const e=xN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:jx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:jx(l)}}}function jx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,n){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function SU(t,e){return sa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e){return af(t,"POST","/v1/accounts:signInWithPassword",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){return af(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}async function xU(t,e){return af(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends iT{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new zd(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new zd(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R0(e,n,"signInWithPassword",bU);case"emailLink":return wU(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R0(e,i,"signUpPassword",SU);case"emailLink":return xU(e,{idToken:n,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e){return af(t,"POST","/v1/accounts:signInWithIdp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="http://localhost";class nl extends iT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=X_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new nl(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return yu(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yu(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yu(e,n)}buildRequest(){const e={requestUri:AU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IU(t){const e=id(rd(t)).link,n=e?id(rd(e)).deep_link_id:null,i=id(rd(t)).deep_link_id;return(i?id(rd(i)).link:null)||i||n||e||t}class rT{constructor(e){var n,i,r,o,l,c;const d=id(rd(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,y=CU((r=d.mode)!==null&&r!==void 0?r:null);Fe(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=IU(e);try{return new rT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.providerId=Fu.PROVIDER_ID}static credential(e,n){return zd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=rT.parseLink(n);return Fe(i,"argument-error"),zd._fromEmailAndCode(e,i.code,i.tenantId)}}Fu.PROVIDER_ID="password";Fu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends sT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends lf{constructor(){super("facebook.com")}static credential(e){return nl._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends lf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nl._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ls.credential(n,i)}catch{return null}}}Ls.GOOGLE_SIGN_IN_METHOD="google.com";Ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends lf{constructor(){super("github.com")}static credential(e){return nl._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.GITHUB_SIGN_IN_METHOD="github.com";ko.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends lf{constructor(){super("twitter.com")}static credential(e,n){return nl._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vo.credential(n,i)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e){return af(t,"POST","/v1/accounts:signUp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Ur._fromIdTokenResponse(e,i,r),l=$x(i);return new il({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=$x(i);return new il({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function $x(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends ms{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Zp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Zp(e,n,i,r)}}function AN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zp._fromErrorAndOperation(t,o,e,i):o})}async function NU(t,e,n=!1){const i=await Bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return il._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e,n=!1){const{auth:i}=t;if(qi(i.app))return Promise.reject(Fs(i));const r="reauthenticate";try{const o=await Bd(t,AN(i,r,e,t),n);Fe(o.idToken,i,"internal-error");const l=tT(o.idToken);Fe(l,i,"internal-error");const{sub:c}=l;return Fe(t.uid===c,i,"user-mismatch"),il._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e,n=!1){if(qi(t.app))return Promise.reject(Fs(t));const i="signIn",r=await AN(t,i,e),o=await il._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function MU(t,e){return CN(oa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t){const e=oa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PU(t,e,n){if(qi(t.app))return Promise.reject(Fs(t));const i=oa(t),l=await R0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&IN(t),d}),c=await il._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function kU(t,e,n){return qi(t.app)?Promise.reject(Fs(t)):MU(Wt(t),Fu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&IN(t),i})}function VU(t,e,n,i){return Wt(t).onIdTokenChanged(e,n,i)}function LU(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}function OU(t,e,n,i){return Wt(t).onAuthStateChanged(e,n,i)}function qy(t){return Wt(t).signOut()}const em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(em,"1"),this.storage.removeItem(em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=1e3,FU=10;class NN extends RN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);iU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,FU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},UU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NN.type="LOCAL";const BU=NN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN extends RN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DN.type="SESSION";const MN=DN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Hm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await zU(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=oT("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(_.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(){return window}function HU(t){os().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof os().WorkerGlobalScope<"u"&&typeof os().importScripts=="function"}async function GU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $U(){return PN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firebaseLocalStorageDb",KU=1,tm="firebaseLocalStorage",VN="fbase_key";class uf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gm(t,e){return t.transaction([tm],e?"readwrite":"readonly").objectStore(tm)}function YU(){const t=indexedDB.deleteDatabase(kN);return new uf(t).toPromise()}function N0(){const t=indexedDB.open(kN,KU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(tm,{keyPath:VN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(tm)?e(i):(i.close(),await YU(),e(await N0()))})})}async function Kx(t,e,n){const i=Gm(t,!0).put({[VN]:e,value:n});return new uf(i).toPromise()}async function JU(t,e){const n=Gm(t,!1).get(e),i=await new uf(n).toPromise();return i===void 0?null:i.value}function Yx(t,e){const n=Gm(t,!0).delete(e);return new uf(n).toPromise()}const WU=800,XU=3;class LN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>XU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hm._getInstance($U()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GU(),!this.activeServiceWorker)return;this.sender=new qU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await Kx(e,em,"1"),await Yx(e,em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Kx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>JU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Gm(r,!1).getAll();return new uf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LN.type="LOCAL";const QU=LN;new of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){return e?Us(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends iT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZU(t){return CN(t.auth,new aT(t),t.bypassAuthState)}function e3(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),DU(n,new aT(t),t.bypassAuthState)}async function t3(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),NU(n,new aT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZU;case"linkViaPopup":case"linkViaRedirect":return t3;case"reauthViaPopup":case"reauthViaRedirect":return e3;default:wr(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new of(2e3,1e4);async function i3(t,e,n){if(qi(t.app))return Promise.reject(zr(t,"operation-not-supported-in-this-environment"));const i=oa(t);O4(t,e,sT);const r=ON(i,n);return new ja(i,"signInViaPopup",e,r).executeNotNull()}class ja extends UN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=oT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n3.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="pendingRedirect",Ip=new Map;class s3 extends UN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ip.get(this.auth._key());if(!e){try{const i=await o3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ip.set(this.auth._key(),e)}return this.bypassAuthState||Ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o3(t,e){const n=u3(e),i=l3(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function a3(t,e){Ip.set(t._key(),e)}function l3(t){return Us(t._redirectPersistence)}function u3(t){return Cp(r3,t.config.apiKey,t.name)}async function c3(t,e,n=!1){if(qi(t.app))return Promise.reject(Fs(t));const i=oa(t),r=ON(i,e),l=await new s3(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=600*1e3;class f3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!FN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(zr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jx(e))}saveEventToCache(e){this.cachedEventUids.add(Jx(e)),this.lastProcessedEventTime=Date.now()}}function Jx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e={}){return sa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g3=/^https?/;async function v3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p3(t);for(const n of e)try{if(y3(n))return}catch{}wr(t,"unauthorized-domain")}function y3(t){const e=C0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!g3.test(n))return!1;if(m3.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new of(3e4,6e4);function Wx(){const t=os().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function T3(t){return new Promise((e,n)=>{var i,r,o;function l(){Wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wx(),n(zr(t,"network-request-failed"))},timeout:_3.get()})}if(!((r=(i=os().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=os().gapi)===null||o===void 0)&&o.load)l();else{const c=fU("iframefcb");return os()[c]=()=>{gapi.load?l():n(zr(t,"network-request-failed"))},bN(`${dU()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Rp=null,e})}let Rp=null;function E3(t){return Rp=Rp||T3(t),Rp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=new of(5e3,15e3),b3="__/auth/iframe",w3="emulator/auth/iframe",x3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C3(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eT(e,w3):`https://${t.config.authDomain}/${b3}`,i={apiKey:e.apiKey,appName:t.name,v:ul},r=A3.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${sf(i).slice(1)}`}async function I3(t){const e=await E3(t),n=os().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:C3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x3,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=zr(t,"network-request-failed"),c=os().setTimeout(()=>{o(l)},S3.get());function d(){os().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N3=500,D3=600,M3="_blank",P3="http://localhost";class Xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function k3(t,e,n,i=N3,r=D3){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},R3),{width:i.toString(),height:r.toString(),top:o,left:l}),f=ci().toLowerCase();n&&(c=gN(f)?M3:n),pN(f)&&(e=e||P3,d.scrollbars="yes");const p=Object.entries(d).reduce((_,[b,A])=>`${_}${b}=${A},`,"");if(nU(f)&&c!=="_self")return V3(e||"",c),new Xx(null);const y=window.open(e||"",c,p);Fe(y,t,"popup-blocked");try{y.focus()}catch{}return new Xx(y)}function V3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="__/auth/handler",O3="emulator/auth/handler",U3=encodeURIComponent("fac");async function Qx(t,e,n,i,r,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ul,eventId:r};if(e instanceof sT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",bO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(e instanceof lf){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${U3}=${encodeURIComponent(d)}`:"";return`${F3(t)}?${sf(c).slice(1)}${f}`}function F3({config:t}){return t.emulator?eT(t,O3):`https://${t.authDomain}/${L3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="webStorageSupport";class B3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MN,this._completeRedirectFn=c3,this._overrideRedirectResult=a3}async _openPopup(e,n,i,r){var o;Hs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Qx(e,n,i,C0(),r);return k3(e,l,oT())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Qx(e,n,i,C0(),r);return HU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Hs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await I3(e),i=new f3(e);return n.register("authEvent",r=>(Fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hy,{type:Hy},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Hy];l!==void 0&&n(!!l),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EN()||mN()||nT()}}const z3=B3;var Zx="@firebase/auth",eA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G3(t){tl(new Ko("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SN(t)},f=new lU(i,r,o,d);return yU(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),tl(new Ko("auth-internal",e=>{const n=oa(e.getProvider("auth").getImmediate());return(i=>new q3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(Zx,eA,H3(t)),ss(Zx,eA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=300,$3=eN("authIdTokenMaxAge")||j3;let tA=null;const K3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>$3)return;const r=n==null?void 0:n.token;tA!==r&&(tA=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Y3(t=W_()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vU(t,{popupRedirectResolver:z3,persistence:[QU,BU,MN]}),i=eN("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=K3(o.toString());LU(n,l,()=>l(n.currentUser)),VU(n,c=>l(c))}}const r=X1("auth");return r&&_U(n,`http://${r}`),n}function J3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=zr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",J3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G3("Browser");var W3="firebase",X3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(W3,X3,"app");var nA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Go,BN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.D=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(B,q,F){for(var U=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)U[ye-2]=arguments[ye];return N.prototype[q].apply(B,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,M){M||(M=0);var B=Array(16);if(typeof N=="string")for(var q=0;16>q;++q)B[q]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(q=0;16>q;++q)B[q]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],q=D.g[2];var F=D.g[3],U=N+(F^M&(q^F))+B[0]+3614090360&4294967295;N=M+(U<<7&4294967295|U>>>25),U=F+(q^N&(M^q))+B[1]+3905402710&4294967295,F=N+(U<<12&4294967295|U>>>20),U=q+(M^F&(N^M))+B[2]+606105819&4294967295,q=F+(U<<17&4294967295|U>>>15),U=M+(N^q&(F^N))+B[3]+3250441966&4294967295,M=q+(U<<22&4294967295|U>>>10),U=N+(F^M&(q^F))+B[4]+4118548399&4294967295,N=M+(U<<7&4294967295|U>>>25),U=F+(q^N&(M^q))+B[5]+1200080426&4294967295,F=N+(U<<12&4294967295|U>>>20),U=q+(M^F&(N^M))+B[6]+2821735955&4294967295,q=F+(U<<17&4294967295|U>>>15),U=M+(N^q&(F^N))+B[7]+4249261313&4294967295,M=q+(U<<22&4294967295|U>>>10),U=N+(F^M&(q^F))+B[8]+1770035416&4294967295,N=M+(U<<7&4294967295|U>>>25),U=F+(q^N&(M^q))+B[9]+2336552879&4294967295,F=N+(U<<12&4294967295|U>>>20),U=q+(M^F&(N^M))+B[10]+4294925233&4294967295,q=F+(U<<17&4294967295|U>>>15),U=M+(N^q&(F^N))+B[11]+2304563134&4294967295,M=q+(U<<22&4294967295|U>>>10),U=N+(F^M&(q^F))+B[12]+1804603682&4294967295,N=M+(U<<7&4294967295|U>>>25),U=F+(q^N&(M^q))+B[13]+4254626195&4294967295,F=N+(U<<12&4294967295|U>>>20),U=q+(M^F&(N^M))+B[14]+2792965006&4294967295,q=F+(U<<17&4294967295|U>>>15),U=M+(N^q&(F^N))+B[15]+1236535329&4294967295,M=q+(U<<22&4294967295|U>>>10),U=N+(q^F&(M^q))+B[1]+4129170786&4294967295,N=M+(U<<5&4294967295|U>>>27),U=F+(M^q&(N^M))+B[6]+3225465664&4294967295,F=N+(U<<9&4294967295|U>>>23),U=q+(N^M&(F^N))+B[11]+643717713&4294967295,q=F+(U<<14&4294967295|U>>>18),U=M+(F^N&(q^F))+B[0]+3921069994&4294967295,M=q+(U<<20&4294967295|U>>>12),U=N+(q^F&(M^q))+B[5]+3593408605&4294967295,N=M+(U<<5&4294967295|U>>>27),U=F+(M^q&(N^M))+B[10]+38016083&4294967295,F=N+(U<<9&4294967295|U>>>23),U=q+(N^M&(F^N))+B[15]+3634488961&4294967295,q=F+(U<<14&4294967295|U>>>18),U=M+(F^N&(q^F))+B[4]+3889429448&4294967295,M=q+(U<<20&4294967295|U>>>12),U=N+(q^F&(M^q))+B[9]+568446438&4294967295,N=M+(U<<5&4294967295|U>>>27),U=F+(M^q&(N^M))+B[14]+3275163606&4294967295,F=N+(U<<9&4294967295|U>>>23),U=q+(N^M&(F^N))+B[3]+4107603335&4294967295,q=F+(U<<14&4294967295|U>>>18),U=M+(F^N&(q^F))+B[8]+1163531501&4294967295,M=q+(U<<20&4294967295|U>>>12),U=N+(q^F&(M^q))+B[13]+2850285829&4294967295,N=M+(U<<5&4294967295|U>>>27),U=F+(M^q&(N^M))+B[2]+4243563512&4294967295,F=N+(U<<9&4294967295|U>>>23),U=q+(N^M&(F^N))+B[7]+1735328473&4294967295,q=F+(U<<14&4294967295|U>>>18),U=M+(F^N&(q^F))+B[12]+2368359562&4294967295,M=q+(U<<20&4294967295|U>>>12),U=N+(M^q^F)+B[5]+4294588738&4294967295,N=M+(U<<4&4294967295|U>>>28),U=F+(N^M^q)+B[8]+2272392833&4294967295,F=N+(U<<11&4294967295|U>>>21),U=q+(F^N^M)+B[11]+1839030562&4294967295,q=F+(U<<16&4294967295|U>>>16),U=M+(q^F^N)+B[14]+4259657740&4294967295,M=q+(U<<23&4294967295|U>>>9),U=N+(M^q^F)+B[1]+2763975236&4294967295,N=M+(U<<4&4294967295|U>>>28),U=F+(N^M^q)+B[4]+1272893353&4294967295,F=N+(U<<11&4294967295|U>>>21),U=q+(F^N^M)+B[7]+4139469664&4294967295,q=F+(U<<16&4294967295|U>>>16),U=M+(q^F^N)+B[10]+3200236656&4294967295,M=q+(U<<23&4294967295|U>>>9),U=N+(M^q^F)+B[13]+681279174&4294967295,N=M+(U<<4&4294967295|U>>>28),U=F+(N^M^q)+B[0]+3936430074&4294967295,F=N+(U<<11&4294967295|U>>>21),U=q+(F^N^M)+B[3]+3572445317&4294967295,q=F+(U<<16&4294967295|U>>>16),U=M+(q^F^N)+B[6]+76029189&4294967295,M=q+(U<<23&4294967295|U>>>9),U=N+(M^q^F)+B[9]+3654602809&4294967295,N=M+(U<<4&4294967295|U>>>28),U=F+(N^M^q)+B[12]+3873151461&4294967295,F=N+(U<<11&4294967295|U>>>21),U=q+(F^N^M)+B[15]+530742520&4294967295,q=F+(U<<16&4294967295|U>>>16),U=M+(q^F^N)+B[2]+3299628645&4294967295,M=q+(U<<23&4294967295|U>>>9),U=N+(q^(M|~F))+B[0]+4096336452&4294967295,N=M+(U<<6&4294967295|U>>>26),U=F+(M^(N|~q))+B[7]+1126891415&4294967295,F=N+(U<<10&4294967295|U>>>22),U=q+(N^(F|~M))+B[14]+2878612391&4294967295,q=F+(U<<15&4294967295|U>>>17),U=M+(F^(q|~N))+B[5]+4237533241&4294967295,M=q+(U<<21&4294967295|U>>>11),U=N+(q^(M|~F))+B[12]+1700485571&4294967295,N=M+(U<<6&4294967295|U>>>26),U=F+(M^(N|~q))+B[3]+2399980690&4294967295,F=N+(U<<10&4294967295|U>>>22),U=q+(N^(F|~M))+B[10]+4293915773&4294967295,q=F+(U<<15&4294967295|U>>>17),U=M+(F^(q|~N))+B[1]+2240044497&4294967295,M=q+(U<<21&4294967295|U>>>11),U=N+(q^(M|~F))+B[8]+1873313359&4294967295,N=M+(U<<6&4294967295|U>>>26),U=F+(M^(N|~q))+B[15]+4264355552&4294967295,F=N+(U<<10&4294967295|U>>>22),U=q+(N^(F|~M))+B[6]+2734768916&4294967295,q=F+(U<<15&4294967295|U>>>17),U=M+(F^(q|~N))+B[13]+1309151649&4294967295,M=q+(U<<21&4294967295|U>>>11),U=N+(q^(M|~F))+B[4]+4149444226&4294967295,N=M+(U<<6&4294967295|U>>>26),U=F+(M^(N|~q))+B[11]+3174756917&4294967295,F=N+(U<<10&4294967295|U>>>22),U=q+(N^(F|~M))+B[2]+718787259&4294967295,q=F+(U<<15&4294967295|U>>>17),U=M+(F^(q|~N))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(q+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+q&4294967295,D.g[3]=D.g[3]+F&4294967295}i.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var M=N-this.blockSize,B=this.B,q=this.h,F=0;F<N;){if(q==0)for(;F<=M;)r(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<N;)if(B[q++]=D.charCodeAt(F++),q==this.blockSize){r(this,B),q=0;break}}else for(;F<N;)if(B[q++]=D[F++],q==this.blockSize){r(this,B),q=0;break}}this.h=q,this.o+=N},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var M=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.u(D),D=Array(16),N=M=0;4>N;++N)for(var B=0;32>B;B+=8)D[M++]=this.g[N]>>>B&255;return D};function o(D,N){var M=c;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function l(D,N){this.h=N;for(var M=[],B=!0,q=D.length-1;0<=q;q--){var F=D[q]|0;B&&F==N||(M[q]=F,B=!1)}this.g=M}var c={};function d(D){return-128<=D&&128>D?o(D,function(N){return new l([N|0],0>N?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return R(f(-D));for(var N=[],M=1,B=0;D>=M;B++)N[B]=D/M|0,M*=4294967296;return new l(N,0)}function p(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return R(p(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=f(Math.pow(N,8)),B=y,q=0;q<D.length;q+=8){var F=Math.min(8,D.length-q),U=parseInt(D.substring(q,q+F),N);8>F?(F=f(Math.pow(N,F)),B=B.j(F).add(f(U))):(B=B.j(M),B=B.add(f(U)))}return B}var y=d(0),_=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(I(this))return-R(this).m();for(var D=0,N=1,M=0;M<this.g.length;M++){var B=this.i(M);D+=(0<=B?B:4294967296+B)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(I(this))return"-"+R(this).toString(D);for(var N=f(Math.pow(D,6)),M=this,B="";;){var q=G(M,N).g;M=V(M,q.j(N));var F=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=q,A(M))return F+B;for(;6>F.length;)F="0"+F;B=F+B}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function I(D){return D.h==-1}t.l=function(D){return D=V(this,D),I(D)?-1:A(D)?0:1};function R(D){for(var N=D.g.length,M=[],B=0;B<N;B++)M[B]=~D.g[B];return new l(M,~D.h).add(_)}t.abs=function(){return I(this)?R(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],B=0,q=0;q<=N;q++){var F=B+(this.i(q)&65535)+(D.i(q)&65535),U=(F>>>16)+(this.i(q)>>>16)+(D.i(q)>>>16);B=U>>>16,F&=65535,U&=65535,M[q]=U<<16|F}return new l(M,M[M.length-1]&-2147483648?-1:0)};function V(D,N){return D.add(R(N))}t.j=function(D){if(A(this)||A(D))return y;if(I(this))return I(D)?R(this).j(R(D)):R(R(this).j(D));if(I(D))return R(this.j(R(D)));if(0>this.l(b)&&0>D.l(b))return f(this.m()*D.m());for(var N=this.g.length+D.g.length,M=[],B=0;B<2*N;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(var q=0;q<D.g.length;q++){var F=this.i(B)>>>16,U=this.i(B)&65535,ye=D.i(q)>>>16,Ne=D.i(q)&65535;M[2*B+2*q]+=U*Ne,k(M,2*B+2*q),M[2*B+2*q+1]+=F*Ne,k(M,2*B+2*q+1),M[2*B+2*q+1]+=U*ye,k(M,2*B+2*q+1),M[2*B+2*q+2]+=F*ye,k(M,2*B+2*q+2)}for(B=0;B<N;B++)M[B]=M[2*B+1]<<16|M[2*B];for(B=N;B<2*N;B++)M[B]=0;return new l(M,0)};function k(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function O(D,N){this.g=D,this.h=N}function G(D,N){if(A(N))throw Error("division by zero");if(A(D))return new O(y,y);if(I(D))return N=G(R(D),N),new O(R(N.g),R(N.h));if(I(N))return N=G(D,R(N)),new O(R(N.g),N.h);if(30<D.g.length){if(I(D)||I(N))throw Error("slowDivide_ only works with positive integers.");for(var M=_,B=N;0>=B.l(D);)M=K(M),B=K(B);var q=H(M,1),F=H(B,1);for(B=H(B,2),M=H(M,2);!A(B);){var U=F.add(B);0>=U.l(D)&&(q=q.add(M),F=U),B=H(B,1),M=H(M,1)}return N=V(D,q.j(N)),new O(q,N)}for(q=y;0<=D.l(N);){for(M=Math.max(1,Math.floor(D.m()/N.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),F=f(M),U=F.j(N);I(U)||0<U.l(D);)M-=B,F=f(M),U=F.j(N);A(F)&&(F=_),q=q.add(F),D=V(D,U)}return new O(q,D)}t.A=function(D){return G(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],B=0;B<N;B++)M[B]=this.i(B)&D.i(B);return new l(M,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],B=0;B<N;B++)M[B]=this.i(B)|D.i(B);return new l(M,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],B=0;B<N;B++)M[B]=this.i(B)^D.i(B);return new l(M,this.h^D.h)};function K(D){for(var N=D.g.length+1,M=[],B=0;B<N;B++)M[B]=D.i(B)<<1|D.i(B-1)>>>31;return new l(M,D.h)}function H(D,N){var M=N>>5;N%=32;for(var B=D.g.length-M,q=[],F=0;F<B;F++)q[F]=0<N?D.i(F+M)>>>N|D.i(F+M+1)<<32-N:D.i(F+M);return new l(q,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,BN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Go=l}).apply(typeof nA<"u"?nA:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zN,sd,qN,Np,D0,HN,GN,jN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,C){return g==Array.prototype||g==Object.prototype||(g[w]=C.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var w=0;w<g.length;++w){var C=g[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var C=i;g=g.split(".");for(var L=0;L<g.length-1;L++){var X=g[L];if(!(X in C))break e;C=C[X]}g=g[g.length-1],L=C[g],w=w(L),w!=L&&w!=null&&e(C,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var C=0,L=!1,X={next:function(){if(!L&&C<g.length){var re=C++;return{value:w(re,g[re]),done:!1}}return L=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function f(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,C){return g.call.apply(g.bind,arguments)}function y(g,w,C){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,L),g.apply(w,X)}}return function(){return g.apply(w,arguments)}}function _(g,w,C){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,_.apply(null,arguments)}function b(g,w){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function A(g,w){function C(){}C.prototype=w.prototype,g.aa=w.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(L,X,re){for(var ve=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)ve[Et-2]=arguments[Et];return w.prototype[X].apply(L,ve)}}function I(g){const w=g.length;if(0<w){const C=Array(w);for(let L=0;L<w;L++)C[L]=g[L];return C}return[]}function R(g,w){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(d(L)){const X=g.length||0,re=L.length||0;g.length=X+re;for(let ve=0;ve<re;ve++)g[X+ve]=L[ve]}else g.push(L)}}class V{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function O(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function G(g){return G[" "](g),g}G[" "]=function(){};var K=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function H(g,w,C){for(const L in g)w.call(C,g[L],L,g)}function D(g,w){for(const C in g)w.call(void 0,g[C],C,g)}function N(g){const w={};for(const C in g)w[C]=g[C];return w}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(g,w){let C,L;for(let X=1;X<arguments.length;X++){L=arguments[X];for(C in L)g[C]=L[C];for(let re=0;re<M.length;re++)C=M[re],Object.prototype.hasOwnProperty.call(L,C)&&(g[C]=L[C])}}function q(g){var w=1;g=g.split(":");const C=[];for(;0<w&&g.length;)C.push(g.shift()),w--;return g.length&&C.push(g.join(":")),C}function F(g){c.setTimeout(()=>{throw g},0)}function U(){var g=xe;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class ye{constructor(){this.h=this.g=null}add(w,C){const L=Ne.get();L.set(w,C),this.h?this.h.next=L:this.g=L,this.h=L}}var Ne=new V(()=>new W,g=>g.reset());class W{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,he=!1,xe=new ye,Ae=()=>{const g=c.Promise.resolve(void 0);oe=()=>{g.then(j)}};var j=()=>{for(var g;g=U();){try{g.h.call(g.g)}catch(C){F(C)}var w=Ne;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}he=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};c.addEventListener("test",C,w),c.removeEventListener("test",C,w)}catch{}return g})();function ge(g,w){if(ne.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{G(w.nodeName);var X=!0;break e}catch{}X=!1}X||(w=null)}}else C=="mouseover"?w=g.fromElement:C=="mouseout"&&(w=g.toElement);this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Oe[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ge.aa.h.call(this)}}A(ge,ne);var Oe={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Ct(g,w,C,L,X){this.listener=g,this.proxy=null,this.src=w,this.type=C,this.capture=!!L,this.ha=X,this.key=++Vt,this.da=this.fa=!1}function qn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ai(g){this.src=g,this.g={},this.h=0}Ai.prototype.add=function(g,w,C,L,X){var re=g.toString();g=this.g[re],g||(g=this.g[re]=[],this.h++);var ve=Hn(g,w,L,X);return-1<ve?(w=g[ve],C||(w.fa=!1)):(w=new Ct(w,this.src,re,!!L,X),w.fa=C,g.push(w)),w};function Ft(g,w){var C=w.type;if(C in g.g){var L=g.g[C],X=Array.prototype.indexOf.call(L,w,void 0),re;(re=0<=X)&&Array.prototype.splice.call(L,X,1),re&&(qn(w),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Hn(g,w,C,L){for(var X=0;X<g.length;++X){var re=g[X];if(!re.da&&re.listener==w&&re.capture==!!C&&re.ha==L)return X}return-1}var Cn="closure_lm_"+(1e6*Math.random()|0),Pn={};function di(g,w,C,L,X){if(Array.isArray(w)){for(var re=0;re<w.length;re++)di(g,w[re],C,L,X);return null}return C=vn(C),g&&g[Ie]?g.K(w,C,f(L)?!!L.capture:!1,X):or(g,w,C,!1,L,X)}function or(g,w,C,L,X,re){if(!w)throw Error("Invalid event type");var ve=f(X)?!!X.capture:!!X,Et=Gi(g);if(Et||(g[Cn]=Et=new Ai(g)),C=Et.add(w,C,L,ve,re),C.proxy)return C;if(L=Ci(),C.proxy=L,L.src=g,L.listener=C,g.addEventListener)se||(X=ve),X===void 0&&(X=!1),g.addEventListener(w.toString(),L,X);else if(g.attachEvent)g.attachEvent(fi(w.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ci(){function g(C){return w.call(g.src,g.listener,C)}const w=Ar;return g}function Ii(g,w,C,L,X){if(Array.isArray(w))for(var re=0;re<w.length;re++)Ii(g,w[re],C,L,X);else L=f(L)?!!L.capture:!!L,C=vn(C),g&&g[Ie]?(g=g.i,w=String(w).toString(),w in g.g&&(re=g.g[w],C=Hn(re,C,L,X),-1<C&&(qn(re[C]),Array.prototype.splice.call(re,C,1),re.length==0&&(delete g.g[w],g.h--)))):g&&(g=Gi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Hn(w,C,L,X)),(C=-1<g?w[g]:null)&&kn(C))}function kn(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ie])Ft(w.i,g);else{var C=g.type,L=g.proxy;w.removeEventListener?w.removeEventListener(C,L,g.capture):w.detachEvent?w.detachEvent(fi(C),L):w.addListener&&w.removeListener&&w.removeListener(L),(C=Gi(w))?(Ft(C,g),C.h==0&&(C.src=null,w[Cn]=null)):qn(g)}}}function fi(g){return g in Pn?Pn[g]:Pn[g]="on"+g}function Ar(g,w){if(g.da)g=!0;else{w=new ge(w,this);var C=g.listener,L=g.ha||g.src;g.fa&&kn(g),g=C.call(L,w)}return g}function Gi(g){return g=g[Cn],g instanceof Ai?g:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(g){return typeof g=="function"?g:(g[wt]||(g[wt]=function(w){return g.handleEvent(w)}),g[wt])}function ke(){ee.call(this),this.i=new Ai(this),this.M=this,this.F=null}A(ke,ee),ke.prototype[Ie]=!0,ke.prototype.removeEventListener=function(g,w,C,L){Ii(this,g,w,C,L)};function Lt(g,w){var C,L=g.F;if(L)for(C=[];L;L=L.F)C.push(L);if(g=g.M,L=w.type||w,typeof w=="string")w=new ne(w,g);else if(w instanceof ne)w.target=w.target||g;else{var X=w;w=new ne(L,g),B(w,X)}if(X=!0,C)for(var re=C.length-1;0<=re;re--){var ve=w.g=C[re];X=Xt(ve,L,!0,w)&&X}if(ve=w.g=g,X=Xt(ve,L,!0,w)&&X,X=Xt(ve,L,!1,w)&&X,C)for(re=0;re<C.length;re++)ve=w.g=C[re],X=Xt(ve,L,!1,w)&&X}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var C=g.g[w],L=0;L<C.length;L++)qn(C[L]);delete g.g[w],g.h--}}this.F=null},ke.prototype.K=function(g,w,C,L){return this.i.add(String(g),w,!1,C,L)},ke.prototype.L=function(g,w,C,L){return this.i.add(String(g),w,!0,C,L)};function Xt(g,w,C,L){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var X=!0,re=0;re<w.length;++re){var ve=w[re];if(ve&&!ve.da&&ve.capture==C){var Et=ve.listener,_n=ve.ha||ve.src;ve.fa&&Ft(g.i,ve),X=Et.call(_n,L)!==!1&&X}}return X&&!L.defaultPrevented}function tn(g,w,C){if(typeof g=="function")C&&(g=_(g,C));else if(g&&typeof g.handleEvent=="function")g=_(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function Cr(g){g.g=tn(()=>{g.g=null,g.i&&(g.i=!1,Cr(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class fa extends ee{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(g){ee.call(this),this.h=g,this.g={}}A(In,ee);var hi=[];function Bt(g){H(g.g,function(w,C){this.g.hasOwnProperty(C)&&kn(w)},g),g.g={}}In.prototype.N=function(){In.aa.N.call(this),Bt(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=c.JSON.stringify,pe=c.JSON.parse,Ee=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function qe(){}qe.prototype.h=null;function Ve(g){return g.h||(g.h=g.i())}function Qe(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tt(){ne.call(this,"d")}A(tt,ne);function nt(){ne.call(this,"c")}A(nt,ne);var Pe={},He=null;function cn(){return He=He||new ke}Pe.La="serverreachability";function Ri(g){ne.call(this,Pe.La,g)}A(Ri,ne);function Kt(g){const w=cn();Lt(w,new Ri(w))}Pe.STAT_EVENT="statevent";function It(g,w){ne.call(this,Pe.STAT_EVENT,g),this.stat=w}A(It,ne);function ht(g){const w=cn();Lt(w,new It(w,g))}Pe.Ma="timingevent";function Gn(g,w){ne.call(this,Pe.Ma,g),this.size=w}A(Gn,ne);function Ot(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function dn(){this.g=!0}dn.prototype.xa=function(){this.g=!1};function Ni(g,w,C,L,X,re){g.info(function(){if(g.g)if(re)for(var ve="",Et=re.split("&"),_n=0;_n<Et.length;_n++){var Ze=Et[_n].split("=");if(1<Ze.length){var Ln=Ze[0];Ze=Ze[1];var On=Ln.split("_");ve=2<=On.length&&On[1]=="type"?ve+(Ln+"="+Ze+"&"):ve+(Ln+"=redacted&")}}else ve=null;else ve=re;return"XMLHTTP REQ ("+L+") [attempt "+X+"]: "+w+`
`+C+`
`+ve})}function Rn(g,w,C,L,X,re,ve){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+X+"]: "+w+`
`+C+`
`+re+" "+ve})}function yn(g,w,C,L){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+me(g,C)+(L?" "+L:"")})}function ji(g,w){g.info(function(){return"TIMEOUT: "+w})}dn.prototype.info=function(){};function me(g,w){if(!g.g)return w;if(!w)return null;try{var C=JSON.parse(w);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var L=C[g];if(!(2>L.length)){var X=L[1];if(Array.isArray(X)&&!(1>X.length)){var re=X[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ve=1;ve<X.length;ve++)X[ve]=""}}}}return le(C)}catch{return w}}var be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ze={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pt;function Di(){}A(Di,qe),Di.prototype.g=function(){return new XMLHttpRequest},Di.prototype.i=function(){return{}},Pt=new Di;function pi(g,w,C,L){this.j=g,this.i=w,this.l=C,this.R=L||1,this.U=new In(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ir}function Ir(){this.i=null,this.g="",this.h=!1}var mi={},Mi={};function ar(g,w,C){g.L=1,g.v=pa(nn(w)),g.m=C,g.P=!0,Pi(g,null)}function Pi(g,w){g.F=Date.now(),gi(g),g.A=nn(g.v);var C=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),vs(C.i,"t",L),g.C=0,C=g.j.J,g.h=new Ir,g.g=Uf(g.j,C?w:null,!g.m),0<g.O&&(g.M=new fa(_(g.Y,g,g.g),g.O)),w=g.U,C=g.g,L=g.ca;var X="readystatechange";Array.isArray(X)||(X&&(hi[0]=X.toString()),X=hi);for(var re=0;re<X.length;re++){var ve=di(C,X[re],L||w.handleEvent,!1,w.h||w);if(!ve)break;w.g[ve.key]=ve}w=g.H?N(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),Kt(),Ni(g.i,g.u,g.A,g.l,g.R,g.m)}pi.prototype.ca=function(g){g=g.target;const w=this.M;w&&_i(g)==3?w.j():this.Y(g)},pi.prototype.Y=function(g){try{if(g==this.g)e:{const On=_i(this.g);var w=this.g.Ba();const ao=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||On!=4||w==7||(w==8||0>=ao?Kt(3):Kt(2)),Rr(this);var C=this.g.Z();this.X=C;t:if(lr(this)){var L=va(this.g);g="";var X=L.length,re=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Nr(this);var ve="";break t}this.h.i=new c.TextDecoder}for(w=0;w<X;w++)this.h.h=!0,g+=this.h.i.decode(L[w],{stream:!(re&&w==X-1)});L.length=0,this.h.g+=g,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=C==200,Rn(this.i,this.u,this.A,this.l,this.R,On,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,_n=this.g;if((Et=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Et)){var Ze=Et;break t}}Ze=null}if(C=Ze)yn(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,C);else{this.o=!1,this.s=3,ht(12),vi(this),Nr(this);break e}}if(this.P){C=!0;let Vi;for(;!this.J&&this.C<ve.length;)if(Vi=Kr(this,ve),Vi==Mi){On==4&&(this.s=4,ht(14),C=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==mi){this.s=4,ht(15),yn(this.i,this.l,ve,"[Invalid Chunk]"),C=!1;break}else yn(this.i,this.l,Vi,null),Yr(this,Vi);if(lr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||ve.length!=0||this.h.h||(this.s=1,ht(16),C=!1),this.o=this.o&&C,!C)yn(this.i,this.l,ve,"[Invalid Chunked Response]"),vi(this),Nr(this);else if(0<ve.length&&!this.W){this.W=!0;var Ln=this.j;Ln.g==this&&Ln.ba&&!Ln.M&&(Ln.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),uc(Ln),Ln.M=!0,ht(11))}}else yn(this.i,this.l,ve,null),Yr(this,ve);On==4&&vi(this),this.o&&!this.J&&(On==4?Vf(this.j,this):(this.o=!1,gi(this)))}else Rf(this.g),C==400&&0<ve.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),vi(this),Nr(this)}}}catch{}finally{}};function lr(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Kr(g,w){var C=g.C,L=w.indexOf(`
`,C);return L==-1?Mi:(C=Number(w.substring(C,L)),isNaN(C)?mi:(L+=1,L+C>w.length?Mi:(w=w.slice(L,L+C),g.C=L+C,w)))}pi.prototype.cancel=function(){this.J=!0,vi(this)};function gi(g){g.S=Date.now()+g.I,Yt(g,g.I)}function Yt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ot(_(g.ba,g),w)}function Rr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}pi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ji(this.i,this.A),this.L!=2&&(Kt(),ht(17)),vi(this),this.s=2,Nr(this)):Yt(this,this.S-g)};function Nr(g){g.j.G==0||g.J||Vf(g.j,g)}function vi(g){Rr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,Bt(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Yr(g,w){try{var C=g.j;if(C.G!=0&&(C.g==g||Ws(C.h,g))){if(!g.K&&Ws(C.h,g)&&C.G==3){try{var L=C.Da.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var X=L;if(X[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)so(C),ro(C);else break e;lc(C),ht(18)}}else C.za=X[1],0<C.za-C.T&&37500>X[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ot(_(C.Za,C),6e3));if(1>=bf(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else _s(C,11)}else if((g.K||C.g==g)&&so(C),!k(w))for(X=C.Da.g.parse(w),w=0;w<X.length;w++){let Ze=X[w];if(C.T=Ze[0],Ze=Ze[1],C.G==2)if(Ze[0]=="c"){C.K=Ze[1],C.ia=Ze[2];const Ln=Ze[3];Ln!=null&&(C.la=Ln,C.j.info("VER="+C.la));const On=Ze[4];On!=null&&(C.Aa=On,C.j.info("SVER="+C.Aa));const ao=Ze[5];ao!=null&&typeof ao=="number"&&0<ao&&(L=1.5*ao,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const Vi=g.g;if(Vi){const Ta=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var re=L.h;re.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Xs(re,re.h),re.h=null))}if(L.D){const Ts=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ts&&(L.ya=Ts,pt(L.I,L.D,Ts))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var ve=g;if(L.qa=Of(L,L.J?L.ia:null,L.W),ve.K){ur(L.h,ve);var Et=ve,_n=L.L;_n&&(Et.I=_n),Et.B&&(Rr(Et),gi(Et)),L.g=ve}else Pf(L);0<C.i.length&&El(C)}else Ze[0]!="stop"&&Ze[0]!="close"||_s(C,7);else C.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?_s(C,7):oc(C):Ze[0]!="noop"&&C.l&&C.l.ta(Ze),C.v=0)}}Kt(4)}catch{}}var Dg=class{constructor(g,w){this.g=g,this.map=w}};function Zu(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ec(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function bf(g){return g.h?1:g.g?g.g.size:0}function Ws(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Xs(g,w){g.g?g.g.add(w):g.h=w}function ur(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}Zu.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const C of g.g.values())w=w.concat(C.D);return w}return I(g.i)}function wf(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var w=[],C=g.length,L=0;L<C;L++)w.push(g[L]);return w}w=[],C=0;for(L in g)w[C++]=g[L];return w}function Mg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var w=[];g=g.length;for(var C=0;C<g;C++)w.push(C);return w}w=[],C=0;for(const L in g)w[C++]=L;return w}}}function pl(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var C=Mg(g),L=wf(g),X=L.length,re=0;re<X;re++)w.call(void 0,L[re],C&&C[re],g)}var tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(g,w){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var L=g[C].indexOf("="),X=null;if(0<=L){var re=g[C].substring(0,L);X=g[C].substring(L+1)}else re=g[C];w(re,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function gs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof gs){this.h=g.h,Qs(this,g.j),this.o=g.o,this.g=g.g,ha(this,g.s),this.l=g.l;var w=g.i,C=new Jr;C.i=w.i,w.g&&(C.g=new Map(w.g),C.h=w.h),gl(this,C),this.m=g.m}else g&&(w=String(g).match(tc))?(this.h=!1,Qs(this,w[1]||"",!0),this.o=Zs(w[2]||""),this.g=Zs(w[3]||"",!0),ha(this,w[4]),this.l=Zs(w[5]||"",!0),gl(this,w[6]||"",!0),this.m=Zs(w[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}gs.prototype.toString=function(){var g=[],w=this.j;w&&g.push(cr(w,nc,!0),":");var C=this.g;return(C||w=="file")&&(g.push("//"),(w=this.o)&&g.push(cr(w,nc,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(cr(C,C.charAt(0)=="/"?ic:xf,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",cr(C,Vg)),g.join("")};function nn(g){return new gs(g)}function Qs(g,w,C){g.j=C?Zs(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function ha(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function gl(g,w,C){w instanceof Jr?(g.i=w,Af(g.i,g.h)):(C||(w=cr(w,kg)),g.i=new Jr(w,g.h))}function pt(g,w,C){g.i.set(w,C)}function pa(g){return pt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Zs(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function cr(g,w,C){return typeof g=="string"?(g=encodeURI(g).replace(w,Pg),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Pg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var nc=/[#\/\?@]/g,xf=/[#\?:]/g,ic=/[#\?]/g,kg=/[#\?@]/g,Vg=/#/g;function Jr(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Vn(g){g.g||(g.g=new Map,g.h=0,g.i&&ml(g.i,function(w,C){g.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}t=Jr.prototype,t.add=function(g,w){Vn(this),this.i=null,g=$i(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(w),this.h+=1,this};function vl(g,w){Vn(g),w=$i(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function yl(g,w){return Vn(g),w=$i(g,w),g.g.has(w)}t.forEach=function(g,w){Vn(this),this.g.forEach(function(C,L){C.forEach(function(X){g.call(w,X,L,this)},this)},this)},t.na=function(){Vn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),C=[];for(let L=0;L<w.length;L++){const X=g[L];for(let re=0;re<X.length;re++)C.push(w[L])}return C},t.V=function(g){Vn(this);let w=[];if(typeof g=="string")yl(this,g)&&(w=w.concat(this.g.get($i(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)w=w.concat(g[C])}return w},t.set=function(g,w){return Vn(this),this.i=null,g=$i(this,g),yl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function vs(g,w,C){vl(g,w),0<C.length&&(g.i=null,g.g.set($i(g,w),I(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var C=0;C<w.length;C++){var L=w[C];const re=encodeURIComponent(String(L)),ve=this.V(L);for(L=0;L<ve.length;L++){var X=re;ve[L]!==""&&(X+="="+encodeURIComponent(String(ve[L]))),g.push(X)}}return this.i=g.join("&")};function $i(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function Af(g,w){w&&!g.j&&(Vn(g),g.i=null,g.g.forEach(function(C,L){var X=L.toLowerCase();L!=X&&(vl(this,L),vs(this,X,C))},g)),g.j=w}function rc(g,w){const C=new dn;if(c.Image){const L=new Image;L.onload=b(ki,C,"TestLoadImage: loaded",!0,w,L),L.onerror=b(ki,C,"TestLoadImage: error",!1,w,L),L.onabort=b(ki,C,"TestLoadImage: abort",!1,w,L),L.ontimeout=b(ki,C,"TestLoadImage: timeout",!1,w,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else w(!1)}function Cf(g,w){const C=new dn,L=new AbortController,X=setTimeout(()=>{L.abort(),ki(C,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:L.signal}).then(re=>{clearTimeout(X),re.ok?ki(C,"TestPingServer: ok",!0,w):ki(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),ki(C,"TestPingServer: error",!1,w)})}function ki(g,w,C,L,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),L(C)}catch{}}function Dr(){this.g=new Ee}function sc(g,w,C){const L=C||"";try{pl(g,function(X,re){let ve=X;f(X)&&(ve=le(X)),w.push(L+re+"="+encodeURIComponent(ve))})}catch(X){throw w.push(L+"type="+encodeURIComponent("_badmap")),X}}function Wr(g){this.l=g.Ub||null,this.j=g.eb||!1}A(Wr,qe),Wr.prototype.g=function(){return new Ki(this.l,this.j)},Wr.prototype.i=(function(g){return function(){return g}})({});function Ki(g,w){ke.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ki,ke),t=Ki.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,eo(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Xr(this):eo(this),this.readyState==3&&_l(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Xr(this))},t.Qa=function(g){this.g&&(this.response=g,Xr(this))},t.ga=function(){this.g&&Xr(this)};function Xr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,eo(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=w.next();return g.join(`\r
`)};function eo(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ma(g){let w="";return H(g,function(C,L){w+=L,w+=":",w+=C,w+=`\r
`}),w}function to(g,w,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=ma(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):pt(g,w,C))}function zt(g){ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(zt,ke);var ei=/^https?$/i,ys=["POST","PUT"];t=zt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?Ve(this.o):Ve(Pt),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(re){ga(this,re);return}if(g=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var X in L)C.set(X,L[X]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())C.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(re=>re.toLowerCase()=="content-type"),X=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ys,w,void 0))||L||X||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ve]of C)this.g.setRequestHeader(re,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tl(this),this.u=!0,this.g.send(g),this.u=!1}catch(re){ga(this,re)}};function ga(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,no(g),io(g)}function no(g){g.A||(g.A=!0,Lt(g,"complete"),Lt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Lt(this,"complete"),Lt(this,"abort"),io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),io(this,!0)),zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?If(this):this.bb())},t.bb=function(){If(this)};function If(g){if(g.h&&typeof l<"u"&&(!g.v[1]||_i(g)!=4||g.Z()!=2)){if(g.u&&_i(g)==4)tn(g.Ea,0,g);else if(Lt(g,"readystatechange"),_i(g)==4){g.h=!1;try{const ve=g.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var L;if(L=ve===0){var X=String(g.D).match(tc)[1]||null;!X&&c.self&&c.self.location&&(X=c.self.location.protocol.slice(0,-1)),L=!ei.test(X?X.toLowerCase():"")}C=L}if(C)Lt(g,"complete"),Lt(g,"success");else{g.m=6;try{var re=2<_i(g)?g.g.statusText:""}catch{re=""}g.l=re+" ["+g.Z()+"]",no(g)}}finally{io(g)}}}}function io(g,w){if(g.g){Tl(g);const C=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||Lt(g,"ready");try{C.onreadystatechange=L}catch{}}}function Tl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function _i(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),pe(w)}};function va(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Rf(g){const w={};g=(g.g&&2<=_i(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var C=q(g[L]);const X=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const re=w[X]||[];w[X]=re,re.push(C)}D(w,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(g,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||w}function Nf(g){this.Aa=0,this.i=[],this.j=new dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,g),this.cb=ya("retryDelaySeedMs",1e4,g),this.Wa=ya("forwardChannelMaxRetries",2,g),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Zu(g&&g.concurrentRequestLimit),this.Da=new Dr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nf.prototype,t.la=8,t.G=1,t.connect=function(g,w,C,L){ht(0),this.W=g,this.H=w||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=Of(this,null,this.W),El(this)};function oc(g){if(Df(g),g.G==3){var w=g.U++,C=nn(g.I);if(pt(C,"SID",g.K),pt(C,"RID",w),pt(C,"TYPE","terminate"),_a(g,C),w=new pi(g,g.j,w),w.L=2,w.v=pa(nn(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=w.v,C=!0),C||(w.g=Uf(w.j,null),w.g.ea(w.v)),w.F=Date.now(),gi(w)}cc(g)}function ro(g){g.g&&(uc(g),g.g.cancel(),g.g=null)}function Df(g){ro(g),g.u&&(c.clearTimeout(g.u),g.u=null),so(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function El(g){if(!ec(g.h)&&!g.s){g.s=!0;var w=g.Ga;oe||Ae(),he||(oe(),he=!0),xe.add(w,g),g.B=0}}function Lg(g,w){return bf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ot(_(g.Ga,g,w),Lf(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const X=new pi(this,this.j,g);let re=this.o;if(this.S&&(re?(re=N(re),B(re,this.S)):re=this.S),this.m!==null||this.O||(X.H=re,re=null),this.P)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,4096<w){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=ac(this,X,w),C=nn(this.I),pt(C,"RID",g),pt(C,"CVER",22),this.D&&pt(C,"X-HTTP-Session-Id",this.D),_a(this,C),re&&(this.O?w="headers="+encodeURIComponent(String(ma(re)))+"&"+w:this.m&&to(C,this.m,re)),Xs(this.h,X),this.Ua&&pt(C,"TYPE","init"),this.P?(pt(C,"$req",w),pt(C,"SID","null"),X.T=!0,ar(X,C,null)):ar(X,C,w),this.G=2}}else this.G==3&&(g?Mf(this,g):this.i.length==0||ec(this.h)||Mf(this))};function Mf(g,w){var C;w?C=w.l:C=g.U++;const L=nn(g.I);pt(L,"SID",g.K),pt(L,"RID",C),pt(L,"AID",g.T),_a(g,L),g.m&&g.o&&to(L,g.m,g.o),C=new pi(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),w&&(g.i=w.D.concat(g.i)),w=ac(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Xs(g.h,C),ar(C,L,w)}function _a(g,w){g.H&&H(g.H,function(C,L){pt(w,L,C)}),g.l&&pl({},function(C,L){pt(w,L,C)})}function ac(g,w,C){C=Math.min(g.i.length,C);var L=g.l?_(g.l.Na,g.l,g):null;e:{var X=g.i;let re=-1;for(;;){const ve=["count="+C];re==-1?0<C?(re=X[0].g,ve.push("ofs="+re)):re=0:ve.push("ofs="+re);let Et=!0;for(let _n=0;_n<C;_n++){let Ze=X[_n].g;const Ln=X[_n].map;if(Ze-=re,0>Ze)re=Math.max(0,X[_n].g-100),Et=!1;else try{sc(Ln,ve,"req"+Ze+"_")}catch{L&&L(Ln)}}if(Et){L=ve.join("&");break e}}}return g=g.i.splice(0,C),w.D=g,L}function Pf(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;oe||Ae(),he||(oe(),he=!0),xe.add(w,g),g.v=0}}function lc(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ot(_(g.Fa,g),Lf(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,kf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ot(_(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),ro(this),kf(this))};function uc(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function kf(g){g.g=new pi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=nn(g.qa);pt(w,"RID","rpc"),pt(w,"SID",g.K),pt(w,"AID",g.T),pt(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&pt(w,"TO",g.ja),pt(w,"TYPE","xmlhttp"),_a(g,w),g.m&&g.o&&to(w,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=pa(nn(w)),C.m=null,C.P=!0,Pi(C,g)}t.Za=function(){this.C!=null&&(this.C=null,ro(this),lc(this),ht(19))};function so(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Vf(g,w){var C=null;if(g.g==w){so(g),uc(g),g.g=null;var L=2}else if(Ws(g.h,w))C=w.D,ur(g.h,w),L=1;else return;if(g.G!=0){if(w.o)if(L==1){C=w.m?w.m.length:0,w=Date.now()-w.F;var X=g.B;L=cn(),Lt(L,new Gn(L,C)),El(g)}else Pf(g);else if(X=w.s,X==3||X==0&&0<w.X||!(L==1&&Lg(g,w)||L==2&&lc(g)))switch(C&&0<C.length&&(w=g.h,w.i=w.i.concat(C)),X){case 1:_s(g,5);break;case 4:_s(g,10);break;case 3:_s(g,6);break;default:_s(g,2)}}}function Lf(g,w){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*w}function _s(g,w){if(g.j.info("Error code "+w),w==2){var C=_(g.fb,g),L=g.Xa;const X=!L;L=new gs(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qs(L,"https"),pa(L),X?rc(L.toString(),C):Cf(L.toString(),C)}else ht(2);g.G=0,g.l&&g.l.sa(w),cc(g),Df(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function cc(g){if(g.G=0,g.ka=[],g.l){const w=yi(g.h);(w.length!=0||g.i.length!=0)&&(R(g.ka,w),R(g.ka,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.ra()}}function Of(g,w,C){var L=C instanceof gs?nn(C):new gs(C);if(L.g!="")w&&(L.g=w+"."+L.g),ha(L,L.s);else{var X=c.location;L=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;var re=new gs(null);L&&Qs(re,L),w&&(re.g=w),X&&ha(re,X),C&&(re.l=C),L=re}return C=g.D,w=g.ya,C&&w&&pt(L,C,w),pt(L,"VER",g.la),_a(g,L),L}function Uf(g,w,C){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new zt(new Wr({eb:C})):new zt(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ff(){}t=Ff.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(g,w){return new Ti(g,w)};function Ti(g,w){ke.call(this),this.g=new Nf(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new oo(this)}A(Ti,ke),Ti.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ti.prototype.close=function(){oc(this.g)},Ti.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=le(g),g=C);w.i.push(new Dg(w.Ya++,g)),w.G==3&&El(w)},Ti.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Ti.aa.N.call(this)};function Bf(g){tt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const C in w){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}A(Bf,tt);function zf(){nt.call(this),this.status=1}A(zf,nt);function oo(g){this.g=g}A(oo,Ff),oo.prototype.ua=function(){Lt(this.g,"a")},oo.prototype.ta=function(g){Lt(this.g,new Bf(g))},oo.prototype.sa=function(g){Lt(this.g,new zf)},oo.prototype.ra=function(){Lt(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Ti.prototype.send=Ti.prototype.o,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,jN=function(){return new Sl},GN=function(){return cn()},HN=Pe,D0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},be.NO_ERROR=0,be.TIMEOUT=8,be.HTTP_ERROR=6,Np=be,ze.COMPLETE="complete",qN=ze,Qe.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",ke.prototype.listen=ke.prototype.K,sd=Qe,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,zN=zt}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});const iA="@firebase/firestore",rA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Y_("@firebase/firestore");function nu(){return rl.logLevel}function we(t,...e){if(rl.logLevel<=lt.DEBUG){const n=e.map(lT);rl.debug(`Firestore (${Bu}): ${t}`,...n)}}function Gs(t,...e){if(rl.logLevel<=lt.ERROR){const n=e.map(lT);rl.error(`Firestore (${Bu}): ${t}`,...n)}}function Yo(t,...e){if(rl.logLevel<=lt.WARN){const n=e.map(lT);rl.warn(`Firestore (${Bu}): ${t}`,...n)}}function lT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,$N(t,i,n)}function $N(t,e,n){let i=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Gs(i),new Error(i)}function bt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||$N(e,r,i)}function Ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oi.UNAUTHENTICATED)))}shutdown(){}}class Z3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class e6{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new jo,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},c=d=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new jo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new KN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class t6{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new t6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const i=o=>{o.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sA(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=r6(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function et(t,e){return t<e?-1:t>e?1:0}function M0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return et(i,r);{const o=YN(),l=s6(o.encode(oA(t,n)),o.encode(oA(e,n)));return l!==0?l:et(i,r)}}n+=i>65535?2:1}return et(t.length,e.length)}function oA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function s6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return et(t[n],e[n]);return et(t.length,e.length)}function Cu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="__name__";class rs{constructor(e,n,i){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=rs.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return et(e.length,n.length)}static compareSegments(e,n){const i=rs.isNumericId(e),r=rs.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?rs.extractNumericId(e).compare(rs.extractNumericId(n)):M0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Go.fromString(e.substring(4,e.length-2))}}class Ut extends rs{construct(e,n,i){return new Ut(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const o6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends rs{construct(e,n,i){return new Qn(e,n,i)}static isValidIdentifier(e){return o6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aA}static keyField(){return new Qn([aA])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Se(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Se(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new Se(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Ut.fromString(e))}static fromName(e){return new Me(Ut.fromString(e).popFirst(5))}static empty(){return new Me(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t,e,n){if(!n)throw new Se(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a6(t,e,n,i){if(e===!0&&i===!0)throw new Se(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lA(t){if(!Me.isDocumentKey(t))throw new Se(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uA(t){if(Me.isDocumentKey(t))throw new Se(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new Se(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,e){const n={typeString:t};return e&&(n.value=e),n}function cf(t,e){if(!WN(t))throw new Se(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Se(de.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=-62135596800,dA=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*dA);return new jt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cA)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dA}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cf(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:An("string",jt._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new jt(0,0))}static max(){return new $e(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=-1;function l6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=$e.fromTimestamp(i===1e9?new jt(n+1,0):new jt(n,i));return new Jo(r,Me.empty(),e)}function u6(t){return new Jo(t.readTime,t.key,qd)}class Jo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Jo($e.min(),Me.empty(),qd)}static max(){return new Jo($e.max(),Me.empty(),qd)}}function c6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==d6)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,i)=>{n(e)}))}static reject(e){return new fe(((n,i)=>{i(e)}))}static waitFor(e){return new fe(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(d=>i(d)))})),l=!0,o===r&&n()}))}static or(e){let n=fe.resolve(!1);for(const i of e)n=n.next((r=>r?fe.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new fe(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new fe(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function h6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}$m.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=-1;function Km(t){return t==null}function nm(t){return t===0&&1/t==-1/0}function p6(t){return typeof t=="number"&&Number.isInteger(t)&&!nm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="";function m6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fA(e)),e=g6(t.get(n),e);return fA(e)}function g6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case XN:n+="";break;default:n+=o}}return n}function fA(t){return t+XN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kh(this.root,e,this.comparator,!0)}}class Kh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Xn.RED,this.left=r??Xn.EMPTY,this.right=o??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Xn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Xn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pA(this.data.getIterator())}getIteratorFrom(e){return new pA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class pA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new tr([])}unionWith(e){let n=new Mn(Qn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZN("Invalid base64 string: "+o):o}})(e);return new Zn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const v6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=v6.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?Zn.fromBase64String(t):Zn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="server_timestamp",tD="__type__",nD="__previous_value__",iD="__local_write_time__";function dT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[tD])===null||n===void 0?void 0:n.stringValue)===eD}function Ym(t){const e=t.mapValue.fields[nD];return dT(e)?Ym(e):e}function Hd(t){const e=Wo(t.mapValue.fields[iD].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,i,r,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const im="(default)";class Gd{constructor(e,n){this.projectId=e,this.database=n||im}static empty(){return new Gd("","")}get isDefaultDatabase(){return this.database===im}isEqual(e){return e instanceof Gd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="__type__",_6="__max__",Yh={mapValue:{}},sD="__vector__",rm="value";function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dT(t)?4:E6(t)?9007199254740991:T6(t)?10:11:Be(28295,{value:t})}function ps(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hd(t).isEqual(Hd(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Wo(r.timestampValue),c=Wo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Xo(r.bytesValue).isEqual(Xo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return mn(r.geoPointValue.latitude)===mn(o.geoPointValue.latitude)&&mn(r.geoPointValue.longitude)===mn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return mn(r.integerValue)===mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=mn(r.doubleValue),c=mn(o.doubleValue);return l===c?nm(l)===nm(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Cu(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(hA(l)!==hA(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!ps(l[d],c[d])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function jd(t,e){return(t.values||[]).find((n=>ps(n,e)))!==void 0}function Iu(t,e){if(t===e)return 0;const n=Qo(t),i=Qo(e);if(n!==i)return et(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mn(o.integerValue||o.doubleValue),d=mn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return mA(t.timestampValue,e.timestampValue);case 4:return mA(Hd(t),Hd(e));case 5:return M0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Xo(o),d=Xo(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=et(c[f],d[f]);if(p!==0)return p}return et(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=et(mn(o.latitude),mn(l.latitude));return c!==0?c:et(mn(o.longitude),mn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return gA(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,d,f,p;const y=o.fields||{},_=l.fields||{},b=(c=y[rm])===null||c===void 0?void 0:c.arrayValue,A=(d=_[rm])===null||d===void 0?void 0:d.arrayValue,I=et(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return I!==0?I:gA(b,A)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Yh.mapValue&&l===Yh.mapValue)return 0;if(o===Yh.mapValue)return 1;if(l===Yh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const _=M0(d[y],p[y]);if(_!==0)return _;const b=Iu(c[d[y]],f[p[y]]);if(b!==0)return b}return et(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function mA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=Wo(t),i=Wo(e),r=et(n.seconds,i.seconds);return r!==0?r:et(n.nanos,i.nanos)}function gA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Iu(n[r],i[r]);if(o)return o}return et(n.length,i.length)}function Ru(t){return P0(t)}function P0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Wo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=P0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${P0(n.fields[l])}`;return r+"}"})(t.mapValue):Be(61005,{value:t})}function Dp(t){switch(Qo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ym(t);return e?16+Dp(e):16;case 5:return 2*t.stringValue.length;case 6:return Xo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Dp(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return aa(i.fields,((o,l)=>{r+=o.length+Dp(l)})),r})(t.mapValue);default:throw Be(13486,{value:t})}}function vA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k0(t){return!!t&&"integerValue"in t}function fT(t){return!!t&&"arrayValue"in t}function yA(t){return!!t&&"nullValue"in t}function _A(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mp(t){return!!t&&"mapValue"in t}function T6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rD])===null||n===void 0?void 0:n.stringValue)===sD}function _d(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return aa(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=_d(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_d(t.arrayValue.values[n]);return e}return Object.assign({},t)}function E6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_d(n)}setAll(e){let n=Qn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=_d(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Mp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){aa(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Hi(_d(this.value))}}function oD(t){const e=[];return aa(t.fields,((n,i)=>{const r=new Qn([n]);if(Mp(i)){const o=oD(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ai(e,0,$e.min(),$e.min(),$e.min(),Hi.empty(),0)}static newFoundDocument(e,n,i,r){return new ai(e,1,n,$e.min(),i,r,0)}static newNoDocument(e,n){return new ai(e,2,n,$e.min(),$e.min(),Hi.empty(),0)}static newUnknownDocument(e,n){return new ai(e,3,n,$e.min(),$e.min(),Hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.position=e,this.inclusive=n}}function TA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=Me.comparator(Me.fromName(l.referenceValue),n.key):i=Iu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function EA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n="asc"){this.field=e,this.dir=n}}function S6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{}class xn extends aD{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new w6(e,n,i):n==="array-contains"?new C6(e,i):n==="in"?new I6(e,i):n==="not-in"?new R6(e,i):n==="array-contains-any"?new N6(e,i):new xn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new x6(e,i):new A6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Iu(n,this.value)):n!==null&&Qo(this.value)===Qo(n)&&this.matchesComparison(Iu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends aD{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new jr(e,n)}matches(e){return lD(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lD(t){return t.op==="and"}function uD(t){return b6(t)&&lD(t)}function b6(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function V0(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+Ru(t.value);if(uD(t))return t.filters.map((e=>V0(e))).join(",");{const e=t.filters.map((n=>V0(n))).join(",");return`${t.op}(${e})`}}function cD(t,e){return t instanceof xn?(function(i,r){return r instanceof xn&&i.op===r.op&&i.field.isEqual(r.field)&&ps(i.value,r.value)})(t,e):t instanceof jr?(function(i,r){return r instanceof jr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&cD(l,r.filters[c])),!0):!1})(t,e):void Be(19439)}function dD(t){return t instanceof xn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ru(n.value)}`})(t):t instanceof jr?(function(n){return n.op.toString()+" {"+n.getFilters().map(dD).join(" ,")+"}"})(t):"Filter"}class w6 extends xn{constructor(e,n,i){super(e,n,i),this.key=Me.fromName(i.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class x6 extends xn{constructor(e,n){super(e,"in",n),this.keys=fD("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class A6 extends xn{constructor(e,n){super(e,"not-in",n),this.keys=fD("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function fD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Me.fromName(i.referenceValue)))}class C6 extends xn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fT(n)&&jd(n.arrayValue,this.value)}}class I6 extends xn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jd(this.value.arrayValue,n)}}class R6 extends xn{constructor(e,n){super(e,"not-in",n)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jd(this.value.arrayValue,n)}}class N6 extends xn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fT(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>jd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function SA(t,e=null,n=[],i=[],r=null,o=null,l=null){return new D6(t,e,n,i,r,o,l)}function hT(t){const e=Ye(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>V0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ru(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ru(i))).join(",")),e.Pe=n}return e.Pe}function pT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EA(t.startAt,e.startAt)&&EA(t.endAt,e.endAt)}function L0(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M6(t,e,n,i,r,o,l,c){return new df(t,e,n,i,r,o,l,c)}function Jm(t){return new df(t)}function bA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hD(t){return t.collectionGroup!==null}function Td(t){const e=Ye(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Mn(Qn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new om(o,i))})),n.has(Qn.keyField().canonicalString())||e.Te.push(new om(Qn.keyField(),i))}return e.Te}function ls(t){const e=Ye(t);return e.Ie||(e.Ie=P6(e,Td(t))),e.Ie}function P6(t,e){if(t.limitType==="F")return SA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new om(r.field,o)}));const n=t.endAt?new sm(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new sm(t.startAt.position,t.startAt.inclusive):null;return SA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function O0(t,e){const n=t.filters.concat([e]);return new df(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function U0(t,e,n){return new df(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wm(t,e){return pT(ls(t),ls(e))&&t.limitType===e.limitType}function pD(t){return`${hT(ls(t))}|lt:${t.limitType}`}function iu(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>dD(r))).join(", ")}]`),Km(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Ru(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Ru(r))).join(",")),`Target(${i})`})(ls(t))}; limitType=${t.limitType})`}function Xm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of Td(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,d){const f=TA(l,c,d);return l.inclusive?f<=0:f<0})(i.startAt,Td(i),r)||i.endAt&&!(function(l,c,d){const f=TA(l,c,d);return l.inclusive?f>=0:f>0})(i.endAt,Td(i),r))})(t,e)}function k6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mD(t){return(e,n)=>{let i=!1;for(const r of Td(t)){const o=V6(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function V6(t,e,n){const i=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Iu(d,f):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return QN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=new en(Me.comparator);function js(){return L6}const gD=new en(Me.comparator);function od(...t){let e=gD;for(const n of t)e=e.insert(n.key,n);return e}function vD(t){let e=gD;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function $a(){return Ed()}function yD(){return Ed()}function Ed(){return new cl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const O6=new en(Me.comparator),U6=new Mn(Me.comparator);function ut(...t){let e=U6;for(const n of t)e=e.add(n);return e}const F6=new Mn(et);function B6(){return F6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(e)?"-0":e}}function _D(t){return{integerValue:""+t}}function z6(t,e){return p6(e)?_D(e):mT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this._=void 0}}function q6(t,e,n){return t instanceof am?(function(r,o){const l={fields:{[tD]:{stringValue:eD},[iD]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&dT(o)&&(o=Ym(o)),o&&(l.fields[nD]=o),{mapValue:l}})(n,e):t instanceof $d?ED(t,e):t instanceof Kd?SD(t,e):(function(r,o){const l=TD(r,o),c=wA(l)+wA(r.Ee);return k0(l)&&k0(r.Ee)?_D(c):mT(r.serializer,c)})(t,e)}function H6(t,e,n){return t instanceof $d?ED(t,e):t instanceof Kd?SD(t,e):n}function TD(t,e){return t instanceof lm?(function(i){return k0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class am extends Qm{}class $d extends Qm{constructor(e){super(),this.elements=e}}function ED(t,e){const n=bD(e);for(const i of t.elements)n.some((r=>ps(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Kd extends Qm{constructor(e){super(),this.elements=e}}function SD(t,e){let n=bD(e);for(const i of t.elements)n=n.filter((r=>!ps(r,i)));return{arrayValue:{values:n}}}class lm extends Qm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function wA(t){return mn(t.integerValue||t.doubleValue)}function bD(t){return fT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function G6(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof $d&&r instanceof $d||i instanceof Kd&&r instanceof Kd?Cu(i.elements,r.elements,ps):i instanceof lm&&r instanceof lm?ps(i.Ee,r.Ee):i instanceof am&&r instanceof am})(t.transform,e.transform)}class j6{constructor(e,n){this.version=e,this.transformResults=n}}class qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zm{}function wD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gT(t.key,qr.none()):new ff(t.key,t.data,qr.none());{const n=t.data,i=Hi.empty();let r=new Mn(Qn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new la(t.key,i,new tr(r.toArray()),qr.none())}}function $6(t,e,n){t instanceof ff?(function(r,o,l){const c=r.value.clone(),d=AA(r.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof la?(function(r,o,l){if(!Pp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=AA(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(xD(r)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Sd(t,e,n,i){return t instanceof ff?(function(o,l,c,d){if(!Pp(o.precondition,l))return c;const f=o.value.clone(),p=CA(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof la?(function(o,l,c,d){if(!Pp(o.precondition,l))return c;const f=CA(o.fieldTransforms,d,l),p=l.data;return p.setAll(xD(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(t,e,n,i):(function(o,l,c){return Pp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function K6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=TD(i.transform,r||null);o!=null&&(n===null&&(n=Hi.empty()),n.set(i.field,o))}return n||null}function xA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Cu(i,r,((o,l)=>G6(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ff extends Zm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class la extends Zm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function xD(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function AA(t,e,n){const i=new Map;bt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,H6(l,c,n[r]))}return i}function CA(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,q6(o,l,e))}return i}class gT extends Zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y6 extends Zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&$6(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Sd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Sd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yD();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const d=wD(l,c);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument($e.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Cu(this.mutations,e.mutations,((n,i)=>xA(n,i)))&&Cu(this.baseMutations,e.baseMutations,((n,i)=>xA(n,i)))}}class vT{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){bt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return O6})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new vT(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,ft;function Q6(t){switch(t){case de.OK:return Be(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function AD(t){if(t===void 0)return Gs("GRPC error has no .code"),de.UNKNOWN;switch(t){case wn.OK:return de.OK;case wn.CANCELLED:return de.CANCELLED;case wn.UNKNOWN:return de.UNKNOWN;case wn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case wn.INTERNAL:return de.INTERNAL;case wn.UNAVAILABLE:return de.UNAVAILABLE;case wn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case wn.NOT_FOUND:return de.NOT_FOUND;case wn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case wn.ABORTED:return de.ABORTED;case wn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case wn.DATA_LOSS:return de.DATA_LOSS;default:return Be(39323,{code:t})}}(ft=wn||(wn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=new Go([4294967295,4294967295],0);function IA(t){const e=YN().encode(t),n=new BN;return n.update(e),new Uint8Array(n.digest())}function RA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Go([n,i],0),new Go([r,o],0)]}class yT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ad(`Invalid padding: ${n}`);if(i<0)throw new ad(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ad(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ad(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Go.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Go.fromNumber(i)));return r.compare(Z6)===1&&(r=new Go([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=IA(e),[i,r]=RA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new yT(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=IA(e),[i,r]=RA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new eg($e.min(),r,new en(et),js(),ut())}}class hf{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new hf(i,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class CD{constructor(e,n){this.targetId=e,this.De=n}}class ID{constructor(e,n,i=Zn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class NA{constructor(){this.ve=0,this.Ce=DA(),this.Fe=Zn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ut(),n=ut(),i=ut();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Be(38017,{changeType:o})}})),new hf(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=DA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class e5{constructor(e){this.We=e,this.Ge=new Map,this.ze=js(),this.je=Jh(),this.Je=Jh(),this.He=new en(et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(L0(o))if(i===0){const l=new Me(o.path);this.Xe(n,l,ai.newNoDocument(l,$e.min()))}else bt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Xo(i).toUint8Array()}catch(d){if(d instanceof ZN)return Yo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new yT(l,r,o)}catch(d){return Yo(d instanceof ad?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&L0(c.target)){const d=new Me(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,ai.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=ut();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new eg(e,n,this.He,this.ze,i);return this.ze=js(),this.je=Jh(),this.Je=Jh(),this.He=new en(et),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new NA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Mn(et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Mn(et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new NA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Jh(){return new en(Me.comparator)}function DA(){return new en(Me.comparator)}const t5={asc:"ASCENDING",desc:"DESCENDING"},n5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i5={and:"AND",or:"OR"};class r5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function F0(t,e){return t.useProto3Json||Km(e)?e:{value:e}}function um(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s5(t,e){return um(t,e.toTimestamp())}function us(t){return bt(!!t,49232),$e.fromTimestamp((function(n){const i=Wo(n);return new jt(i.seconds,i.nanos)})(t))}function _T(t,e){return B0(t,e).canonicalString()}function B0(t,e){const n=(function(r){return new Ut(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function ND(t){const e=Ut.fromString(t);return bt(VD(e),10190,{key:e.toString()}),e}function z0(t,e){return _T(t.databaseId,e.path)}function Gy(t,e){const n=ND(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(MD(n))}function DD(t,e){return _T(t.databaseId,e)}function o5(t){const e=ND(t);return e.length===4?Ut.emptyPath():MD(e)}function q0(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MD(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function MA(t,e,n){return{name:z0(t,e),fields:n.value.mapValue.fields}}function a5(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Be(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(bt(p===void 0||typeof p=="string",58123),Zn.fromBase64String(p||"")):(bt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Zn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?de.UNKNOWN:AD(f.code);return new Se(p,f.message||"")})(l);n=new ID(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Gy(t,i.document.name),o=us(i.document.updateTime),l=i.document.createTime?us(i.document.createTime):$e.min(),c=new Hi({mapValue:{fields:i.document.fields}}),d=ai.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new kp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Gy(t,i.document),o=i.readTime?us(i.readTime):$e.min(),l=ai.newNoDocument(r,o),c=i.removedTargetIds||[];n=new kp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Gy(t,i.document),o=i.removedTargetIds||[];n=new kp([],o,r,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new X6(r,o),c=i.targetId;n=new CD(c,l)}}return n}function l5(t,e){let n;if(e instanceof ff)n={update:MA(t,e.key,e.value)};else if(e instanceof gT)n={delete:z0(t,e.key)};else if(e instanceof la)n={update:MA(t,e.key,e.data),updateMask:v5(e.fieldMask)};else{if(!(e instanceof Y6))return Be(16599,{Rt:e.type});n={verify:z0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof am)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $d)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof lm)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Be(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:s5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)})(t,e.precondition)),n}function u5(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?us(r.updateTime):us(o);return l.isEqual($e.min())&&(l=us(o)),new j6(l,r.transformResults||[])})(n,e)))):[]}function c5(t,e){return{documents:[DD(t,e.path)]}}function d5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=DD(t,r);const o=(function(f){if(f.length!==0)return kD(jr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(_){return{field:ru(_.field),direction:p5(_.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=F0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:r}}function f5(t){let e=o5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){bt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(y){const _=PD(y);return _ instanceof jr&&uD(_)?_.getFilters():[_]})(n.where));let l=[];n.orderBy&&(l=(function(y){return y.map((_=>(function(A){return new om(su(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(n.orderBy));let c=null;n.limit&&(c=(function(y){let _;return _=typeof y=="object"?y.value:y,Km(_)?null:_})(n.limit));let d=null;n.startAt&&(d=(function(y){const _=!!y.before,b=y.values||[];return new sm(b,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){const _=!y.before,b=y.values||[];return new sm(b,_)})(n.endAt)),M6(e,r,l,o,c,"F",d,f)}function h5(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PD(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=su(n.unaryFilter.field);return xn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=su(n.unaryFilter.field);return xn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=su(n.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=su(n.unaryFilter.field);return xn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return xn.create(su(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return jr.create(n.compositeFilter.filters.map((i=>PD(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function p5(t){return t5[t]}function m5(t){return n5[t]}function g5(t){return i5[t]}function ru(t){return{fieldPath:t.canonicalString()}}function su(t){return Qn.fromServerFormat(t.fieldPath)}function kD(t){return t instanceof xn?(function(n){if(n.op==="=="){if(_A(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NAN"}};if(yA(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_A(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NAN"}};if(yA(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(n.field),op:m5(n.op),value:n.value}}})(t):t instanceof jr?(function(n){const i=n.getFilters().map((r=>kD(r)));return i.length===1?i[0]:{compositeFilter:{op:g5(n.op),filters:i}}})(t):Be(54877,{filter:t})}function v5(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function VD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,i,r,o=$e.min(),l=$e.min(),c=Zn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.gt=e}}function _5(t){const e=f5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?U0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.Dn=new E5}addToCollectionParentIndex(e,n){return this.Dn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Jo.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Jo.min())}updateCollectionGroup(e,n,i){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class E5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Mn(Ut.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Mn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LD=41943040;class zi{static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(LD,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Nu(0)}static ur(){return new Nu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="LruGarbageCollector",S5=1048576;function VA([t,e],[n,i]){const r=et(t,n);return r===0?et(e,i):r}class b5{constructor(e){this.Tr=e,this.buffer=new Mn(VA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();VA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class w5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(kA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qu(n)?we(kA,"Ignoring IndexedDB error during garbage collection: ",n):await zu(n)}await this.Rr(3e5)}))}}class x5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve($m.ue);const i=new b5(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(PA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,l=Date.now(),this.nthSequenceNumber(e,r)))).next((y=>(i=y,c=Date.now(),this.removeTargets(e,i,n)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(f=Date.now(),nu()<=lt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y}))))}}function A5(t,e){return new x5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.changes=new cl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&Sd(i.mutation,r,tr.empty(),jt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ut()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ut()){const r=$a();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=od();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=$a();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ut())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=js();const l=Ed(),c=(function(){return Ed()})();return n.forEach(((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof la)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Sd(p.mutation,f,p.mutation.getFieldMask(),jt.now())):l.set(f.key,tr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>{var y;return c.set(f,new I5(p,(y=l.get(f))!==null&&y!==void 0?y:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=Ed();let r=new en(((l,c)=>l-c)),o=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||tr.empty();p=c.applyToLocalView(f,p),i.set(d,p);const y=(r.get(c.batchId)||ut()).add(d);r=r.insert(c.batchId,y)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,y=yD();p.forEach((_=>{if(!o.has(_)){const b=wD(n.get(_),i.get(_));b!==null&&y.set(_,b),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return fe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return Me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):fe.resolve($a());let c=qd,d=o;return l.next((f=>fe.forEach(f,((p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{d=d.insert(p,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ut()))).next((p=>({batchId:c,changes:vD(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((i=>{let r=od();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=od();return this.indexManager.getCollectionParents(e,o).next((c=>fe.forEach(c,(d=>{const f=(function(y,_){return new df(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((y,_)=>{l=l.insert(y,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,ai.newInvalidDocument(p)))}));let c=od();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&Sd(p.mutation,f,tr.empty(),jt.now()),Xm(n,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:us(r.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:_5(r.bundledQuery),readTime:us(r.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.overlays=new en(Me.comparator),this.kr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$a();return fe.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),fe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),fe.resolve()}getOverlaysForCollection(e,n,i){const r=$a(),o=n.length+1,l=new Me(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new en(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=$a(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=$a(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return fe.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new W6(n,i));let o=this.kr.get(n);o===void 0&&(o=ut(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.qr=new Mn(Bn.Qr),this.$r=new Mn(Bn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Bn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Bn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Me(new Ut([])),i=new Bn(n,e),r=new Bn(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new Ut([])),i=new Bn(n,e),r=new Bn(n,e+1);let o=ut();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new Bn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||et(e.Hr,n.Hr)}static Ur(e,n){return et(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Mn(Bn.Qr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new J6(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new Bn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?cT:this.er-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bn(n,0),r=new Bn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Mn(et);return n.forEach((r=>{const o=new Bn(r,0),l=new Bn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),fe.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;Me.isDocumentKey(o)||(o=o.child(""));const l=new Bn(new Me(o),0);let c=new Mn(et);return this.Yr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Hr)),!0)}),l),fe.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){bt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return fe.forEach(n.mutations,(r=>{const o=new Bn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Bn(n,0),r=this.Yr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.ni=e,this.docs=(function(){return new en(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(e,n){let i=js();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ai.newInvalidDocument(r))})),fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=js();const l=n.path,c=new Me(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||c6(u6(p),i)<=0||(r.has(p.key)||Xm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Be(9500)}ri(e,n){return fe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new V5(this)}getSize(e){return fe.resolve(this.size)}}class V5 extends C5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),fe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.persistence=e,this.ii=new cl((n=>hT(n)),pT),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.si=0,this.oi=new TT,this.targetCount=0,this._i=Nu.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),fe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Nu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.hr(n),fe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),fe.waitFor(o).next((()=>r))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return fe.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),fe.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return fe.resolve(i)}containsKey(e,n){return fe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.ai={},this.overlays={},this.ui=new $m(0),this.ci=!1,this.ci=!0,this.li=new M5,this.referenceDelegate=e(this),this.hi=new L5(this),this.indexManager=new T5,this.remoteDocumentCache=(function(r){return new k5(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new y5(n),this.Ti=new N5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new P5(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const r=new O5(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return fe.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class O5 extends f6{constructor(e){super(),this.currentSequenceNumber=e}}class ET{constructor(e){this.persistence=e,this.Ai=new TT,this.Ri=null}static Vi(e){return new ET(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),fe.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.mi,(i=>{const r=Me.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,$e.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return fe.or([()=>fe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class cm{constructor(e,n){this.persistence=e,this.gi=new cl((i=>m6(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=A5(this,n)}static Vi(e,n){return new cm(e,n)}Ii(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return fe.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?fe.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,$e.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dp(e.data.value)),n}Sr(e,n,i){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return fe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ut(),r=ut();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ST(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return vO()?8:h6(ci())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new U5;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(nu()<=lt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",iu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(nu()<=lt.DEBUG&&we("QueryEngine","Query:",iu(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(nu()<=lt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",iu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(n))):fe.resolve())}ps(e,n){if(bA(n))return fe.resolve(null);let i=ls(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=U0(n,null,"F"),i=ls(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ut(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.bs(n,c);return this.Ds(n,f,l,d.readTime)?this.ps(e,U0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ys(e,n,i,r){return bA(n)||r.isEqual($e.min())?fe.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?fe.resolve(null):(nu()<=lt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iu(n)),this.vs(e,l,n,l6(r,qd)).next((c=>c)))}))}bs(e,n){let i=new Mn(mD(e));return n.forEach(((r,o)=>{Xm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return nu()<=lt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",iu(n)),this.gs.getDocumentsMatchingQuery(e,n,Jo.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="LocalStore",B5=3e8;class z5{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new en(et),this.Ms=new cl((o=>hT(o)),pT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function q5(t,e,n,i){return new z5(t,e,n,i)}async function UD(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let d=ut();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function H5(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,p){const y=f.batch,_=y.keys();let b=fe.resolve();return _.forEach((A=>{b=b.next((()=>p.getEntry(d,A))).next((I=>{const R=f.docVersions.get(A);bt(R!==null,48541),I.version.compareTo(R)<0&&(y.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),p.addEntry(I)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,y)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=ut();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function FD(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function G5(t,e){const n=Ye(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,y)=>{const _=r.get(y);if(!_)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,y).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,y))));let b=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Zn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(y,b),(function(I,R,V){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=B5?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(_,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let d=js(),f=ut();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(j5(o,l,e.documentUpdates).next((p=>{d=p.Ls,f=p.ks}))),!i.isEqual($e.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return fe.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Fs=r,o)))}function j5(t,e,n){let i=ut(),r=ut();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=js();return n.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual($e.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):we(bT,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ls:l,ks:r}}))}function $5(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=cT),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function K5(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,fe.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Bo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function H0(t,e,n){const i=Ye(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!qu(l))throw l;we(bT,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function LA(t,e,n){const i=Ye(t);let r=$e.min(),o=ut();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const y=Ye(d),_=y.Ms.get(p);return _!==void 0?fe.resolve(y.Fs.get(_)):y.hi.getTargetData(f,p)})(i,l,ls(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:$e.min(),n?o:ut()))).next((c=>(Y5(i,k6(e),c),{documents:c,qs:o})))))}function Y5(t,e,n){let i=t.xs.get(e)||$e.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class OA{constructor(){this.activeTargetIds=B6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J5{constructor(){this.Fo=new OA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new OA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="ConnectivityMonitor";class FA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(UA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(UA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function G0(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="RestConnection",X5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===im?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=G0(),c=this.Go(e,n.toUriEncodedString());we(jy,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:f}=new URL(c),p=ia(f);return this.jo(e,c,d,i,p).then((y=>(we(jy,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Yo(jy,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",i),y}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=X5[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class eF extends Q5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=G0();return new Promise(((c,d)=>{const f=new zN;f.setWithCredentials(!0),f.listenOnce(qN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Np.NO_ERROR:const y=f.getResponseJson();we(ni,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Np.TIMEOUT:we(ni,`RPC '${e}' ${l} timed out`),d(new Se(de.DEADLINE_EXCEEDED,"Request time out"));break;case Np.HTTP_ERROR:const _=f.getStatus();if(we(ni,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const A=b==null?void 0:b.error;if(A&&A.status&&A.message){const I=(function(V){const k=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(k)>=0?k:de.UNKNOWN})(A.status);d(new Se(I,A.message))}else d(new Se(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Se(de.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{we(ni,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);we(ni,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=G0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=jN(),c=GN(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");we(ni,`Creating RPC '${e}' stream ${r}: ${p}`,d);const y=l.createWebChannel(p,d);this.T_(y);let _=!1,b=!1;const A=new Z5({Ho:R=>{b?we(ni,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(_||(we(ni,`Opening RPC '${e}' stream ${r} transport.`),y.open(),_=!0),we(ni,`RPC '${e}' stream ${r} sending:`,R),y.send(R))},Yo:()=>y.close()}),I=(R,V,k)=>{R.listen(V,(O=>{try{k(O)}catch(G){setTimeout((()=>{throw G}),0)}}))};return I(y,sd.EventType.OPEN,(()=>{b||(we(ni,`RPC '${e}' stream ${r} transport opened.`),A.s_())})),I(y,sd.EventType.CLOSE,(()=>{b||(b=!0,we(ni,`RPC '${e}' stream ${r} transport closed`),A.__(),this.I_(y))})),I(y,sd.EventType.ERROR,(R=>{b||(b=!0,Yo(ni,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),A.__(new Se(de.UNAVAILABLE,"The operation could not be completed")))})),I(y,sd.EventType.MESSAGE,(R=>{var V;if(!b){const k=R.data[0];bt(!!k,16349);const O=k,G=(O==null?void 0:O.error)||((V=O[0])===null||V===void 0?void 0:V.error);if(G){we(ni,`RPC '${e}' stream ${r} received error:`,G);const K=G.status;let H=(function(M){const B=wn[M];if(B!==void 0)return AD(B)})(K),D=G.message;H===void 0&&(H=de.INTERNAL,D="Unknown error status: "+K+" with message "+G.message),b=!0,A.__(new Se(H,D)),y.close()}else we(ni,`RPC '${e}' stream ${r} received:`,k),A.a_(k)}})),I(c,HN.STAT_EVENT,(R=>{R.stat===D0.PROXY?we(ni,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===D0.NOPROXY&&we(ni,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{A.o_()}),0),A}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function $y(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){return new r5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&we("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="PersistentStream";class zD{constructor(e,n,i,r,o,l,c,d){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BD(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Gs(n.toString()),Gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new Se(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return we(BA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(we(BA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tF extends zD{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=a5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return $e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?$e.min():l.readTime?us(l.readTime):$e.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=q0(this.serializer),n.addTarget=(function(o,l){let c;const d=l.target;if(c=L0(d)?{documents:c5(o,d)}:{query:d5(o,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=RD(o,l.resumeToken);const f=F0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo($e.min())>0){c.readTime=um(o,l.snapshotVersion.toTimestamp());const f=F0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=h5(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=q0(this.serializer),n.removeTarget=e,this.k_(n)}}class nF extends zD{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=u5(e.writeResults,e.commitTime),i=us(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=q0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>l5(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{}class rF extends iF{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,B0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(de.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,B0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(de.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class sF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Gs(n),this._a=!1):we("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class oF{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{dl(this)&&(we(sl,"Restarting streams for network reachability change."),await(async function(d){const f=Ye(d);f.Ia.add(4),await pf(f),f.Aa.set("Unknown"),f.Ia.delete(4),await ng(f)})(this))}))})),this.Aa=new sF(i,r)}}async function ng(t){if(dl(t))for(const e of t.da)await e(!0)}async function pf(t){for(const e of t.da)await e(!1)}function qD(t,e){const n=Ye(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),CT(n)?AT(n):Hu(n).x_()&&xT(n,e))}function wT(t,e){const n=Ye(t),i=Hu(n);n.Ta.delete(e),i.x_()&&HD(n,e),n.Ta.size===0&&(i.x_()?i.B_():dl(n)&&n.Aa.set("Unknown"))}function xT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).H_(e)}function HD(t,e){t.Ra.$e(e),Hu(t).Y_(e)}function AT(t){t.Ra=new e5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.Aa.aa()}function CT(t){return dl(t)&&!Hu(t).M_()&&t.Ta.size>0}function dl(t){return Ye(t).Ia.size===0}function GD(t){t.Ra=void 0}async function aF(t){t.Aa.set("Online")}async function lF(t){t.Ta.forEach(((e,n)=>{xT(t,e)}))}async function uF(t,e){GD(t),CT(t)?(t.Aa.la(e),AT(t)):t.Aa.set("Unknown")}async function cF(t,e,n){if(t.Aa.set("Online"),e instanceof ID&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){we(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dm(t,i)}else if(e instanceof kp?t.Ra.Ye(e):e instanceof CD?t.Ra.it(e):t.Ra.et(e),!n.isEqual($e.min()))try{const i=await FD(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ta.get(f);p&&o.Ta.set(f,p.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(Zn.EMPTY_BYTE_STRING,p.snapshotVersion)),HD(o,d);const y=new Bo(p.target,d,f,p.sequenceNumber);xT(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){we(sl,"Failed to raise snapshot:",i),await dm(t,i)}}async function dm(t,e,n){if(!qu(e))throw e;t.Ia.add(1),await pf(t),t.Aa.set("Offline"),n||(n=()=>FD(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we(sl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await ng(t)}))}function jD(t,e){return e().catch((n=>dm(t,n,e)))}async function ig(t){const e=Ye(t),n=Zo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cT;for(;dF(e);)try{const r=await $5(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,fF(e,r)}catch(r){await dm(e,r)}$D(e)&&KD(e)}function dF(t){return dl(t)&&t.Pa.length<10}function fF(t,e){t.Pa.push(e);const n=Zo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $D(t){return dl(t)&&!Zo(t).M_()&&t.Pa.length>0}function KD(t){Zo(t).start()}async function hF(t){Zo(t).na()}async function pF(t){const e=Zo(t);for(const n of t.Pa)e.X_(n.mutations)}async function mF(t,e,n){const i=t.Pa.shift(),r=vT.from(i,e,n);await jD(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await ig(t)}async function gF(t,e){e&&Zo(t).Z_&&await(async function(i,r){if((function(l){return Q6(l)&&l!==de.ABORTED})(r.code)){const o=i.Pa.shift();Zo(i).N_(),await jD(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await ig(i)}})(t,e),$D(t)&&KD(t)}async function zA(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),we(sl,"RemoteStore received new credentials");const i=dl(n);n.Ia.add(3),await pf(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await ng(n)}async function vF(t,e){const n=Ye(t);e?(n.Ia.delete(2),await ng(n)):e||(n.Ia.add(2),await pf(n),n.Aa.set("Unknown"))}function Hu(t){return t.Va||(t.Va=(function(n,i,r){const o=Ye(n);return o.ia(),new tF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:aF.bind(null,t),e_:lF.bind(null,t),n_:uF.bind(null,t),J_:cF.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),CT(t)?AT(t):t.Aa.set("Unknown")):(await t.Va.stop(),GD(t))}))),t.Va}function Zo(t){return t.ma||(t.ma=(function(n,i,r){const o=Ye(n);return o.ia(),new nF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:hF.bind(null,t),n_:gF.bind(null,t),ea:pF.bind(null,t),ta:mF.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await ig(t)):(await t.ma.stop(),t.Pa.length>0&&(we(sl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new IT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RT(t,e){if(Gs("AsyncQueue",`${e}: ${t}`),qu(t))return new Se(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{static emptySet(e){return new _u(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Me.comparator(n.key,i.key):(n,i)=>Me.comparator(n.key,i.key),this.keyedMap=od(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _u)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new _u;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.fa=new en(Me.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Du{constructor(e,n,i,r,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Du(e,n,_u.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class _F{constructor(){this.queries=HA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=Ye(n),o=r.queries;r.queries=HA(),o.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Se(de.ABORTED,"Firestore shutting down"))}}function HA(){return new cl((t=>pD(t)),Wm)}async function YD(t,e){const n=Ye(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new yF,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=RT(l,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&NT(n)}async function JD(t,e){const n=Ye(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function TF(t,e){const n=Ye(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&NT(n)}function EF(t,e,n){const i=Ye(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function NT(t){t.Da.forEach((e=>{e.next()}))}var j0,GA;(GA=j0||(j0={})).Fa="default",GA.Cache="cache";class WD{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Du(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==j0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.key=e}}class QD{constructor(e){this.key=e}}class SF{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ut(),this.mutatedKeys=ut(),this.Xa=mD(e),this.eu=new _u(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new qA,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,y)=>{const _=r.get(p),b=Xm(this.query,y)?y:null,A=!!_&&this.mutatedKeys.has(_.key),I=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let R=!1;_&&b?_.data.isEqual(b.data)?A!==I&&(i.track({type:3,doc:b}),R=!0):this.iu(_,b)||(i.track({type:2,doc:b}),R=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(c=!0)):!_&&b?(i.track({type:0,doc:b}),R=!0):_&&!b&&(i.track({type:1,doc:_}),R=!0,(d||f)&&(c=!0)),R&&(b?(l=l.add(b),o=I?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,y)=>(function(b,A){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:R})}};return I(b)-I(A)})(p.type,y.type)||this.Xa(p.doc,y.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,f=d!==this.Ya;return this.Ya=d,l.length!==0||f?{snapshot:new Du(this.query,e.eu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ut(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new QD(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new XD(i))})),n}uu(e){this.Ha=e.qs,this.Za=ut();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Du.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const DT="SyncEngine";class bF{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class wF{constructor(e){this.key=e,this.lu=!1}}class xF{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new cl((c=>pD(c)),Wm),this.Tu=new Map,this.Iu=new Set,this.du=new en(Me.comparator),this.Eu=new Map,this.Au=new TT,this.Ru={},this.Vu=new Map,this.mu=Nu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function AF(t,e,n=!0){const i=rM(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await ZD(i,e,n,!0),r}async function CF(t,e){const n=rM(t);await ZD(n,e,!0,!1)}async function ZD(t,e,n,i){const r=await K5(t.localStore,ls(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await IF(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&qD(t.remoteStore,r),c}async function IF(t,e,n,i,r){t.gu=(y,_,b)=>(async function(I,R,V,k){let O=R.view.nu(V);O.Ds&&(O=await LA(I.localStore,R.query,!1).then((({documents:D})=>R.view.nu(D,O))));const G=k&&k.targetChanges.get(R.targetId),K=k&&k.targetMismatches.get(R.targetId)!=null,H=R.view.applyChanges(O,I.isPrimaryClient,G,K);return $A(I,R.targetId,H._u),H.snapshot})(t,y,_,b);const o=await LA(t.localStore,e,!0),l=new SF(e,o.qs),c=l.nu(o.documents),d=hf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,d);$A(t,n,f._u);const p=new bF(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function RF(t,e,n){const i=Ye(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!Wm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await H0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&wT(i.remoteStore,r.targetId),$0(i,r.targetId)})).catch(zu)):($0(i,r.targetId),await H0(i.localStore,r.targetId,!0))}async function NF(t,e){const n=Ye(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),wT(n.remoteStore,i.targetId))}async function DF(t,e,n){const i=UF(t);try{const r=await(function(l,c){const d=Ye(l),f=jt.now(),p=c.reduce(((b,A)=>b.add(A.key)),ut());let y,_;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let A=js(),I=ut();return d.Os.getEntries(b,p).next((R=>{A=R,A.forEach(((V,k)=>{k.isValidDocument()||(I=I.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,A))).next((R=>{y=R;const V=[];for(const k of c){const O=K6(k,y.get(k.key).overlayedDocument);O!=null&&V.push(new la(k.key,O,oD(O.value.mapValue),qr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,V,c)})).next((R=>{_=R;const V=R.applyToLocalDocumentSet(y,I);return d.documentOverlayCache.saveOverlays(b,R.batchId,V)}))})).then((()=>({batchId:_.batchId,changes:vD(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new en(et)),f=f.insert(c,d),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,n),await mf(i,r.changes),await ig(i.remoteStore)}catch(r){const o=RT(r,"Failed to persist write");n.reject(o)}}async function eM(t,e){const n=Ye(t);try{const i=await G5(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?bt(l.lu,14607):r.removedDocuments.size>0&&(bt(l.lu,42227),l.lu=!1))})),await mf(n,i,e)}catch(i){await zu(i)}}function jA(t,e,n){const i=Ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const d=Ye(l);d.onlineState=c;let f=!1;d.queries.forEach(((p,y)=>{for(const _ of y.wa)_.va(c)&&(f=!0)})),f&&NT(d)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MF(t,e,n){const i=Ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new en(Me.comparator);l=l.insert(o,ai.newNoDocument(o,$e.min()));const c=ut().add(o),d=new eg($e.min(),new Map,new en(et),l,c);await eM(i,d),i.du=i.du.remove(o),i.Eu.delete(e),MT(i)}else await H0(i.localStore,e,!1).then((()=>$0(i,e,n))).catch(zu)}async function PF(t,e){const n=Ye(t),i=e.batch.batchId;try{const r=await H5(n.localStore,e);nM(n,i,null),tM(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mf(n,r)}catch(r){await zu(r)}}async function kF(t,e,n){const i=Ye(t);try{const r=await(function(l,c){const d=Ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next((y=>(bt(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);nM(i,e,n),tM(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mf(i,r)}catch(r){await zu(r)}}function tM(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function nM(t,e,n){const i=Ye(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function $0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||iM(t,i)}))}function iM(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(wT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),MT(t))}function $A(t,e,n){for(const i of n)i instanceof XD?(t.Au.addReference(i.key,e),VF(t,i)):i instanceof QD?(we(DT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||iM(t,i.key)):Be(19791,{yu:i})}function VF(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(we(DT,"New document in limbo: "+n),t.Iu.add(i),MT(t))}function MT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Me(Ut.fromString(e)),i=t.mu.next();t.Eu.set(i,new wF(n)),t.du=t.du.insert(n,i),qD(t.remoteStore,new Bo(ls(Jm(n.path)),i,"TargetPurposeLimboResolution",$m.ue))}}async function mf(t,e,n){const i=Ye(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){r.push(f);const y=ST.Es(d.targetId,f);o.push(y)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(d,f){const p=Ye(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>fe.forEach(f,(_=>fe.forEach(_.Is,(b=>p.persistence.referenceDelegate.addReference(y,_.targetId,b))).next((()=>fe.forEach(_.ds,(b=>p.persistence.referenceDelegate.removeReference(y,_.targetId,b)))))))))}catch(y){if(!qu(y))throw y;we(bT,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const b=p.Fs.get(_),A=b.snapshotVersion,I=b.withLastLimboFreeSnapshotVersion(A);p.Fs=p.Fs.insert(_,I)}}})(i.localStore,o))}async function LF(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){we(DT,"User change. New user:",e.toKey());const i=await UD(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Se(de.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mf(n,i.Bs)}}function OF(t,e){const n=Ye(t),i=n.Eu.get(e);if(i&&i.lu)return ut().add(i.key);{let r=ut();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function rM(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MF.bind(null,e),e.hu.J_=TF.bind(null,e.eventManager),e.hu.pu=EF.bind(null,e.eventManager),e}function UF(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kF.bind(null,e),e}class fm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return q5(this.persistence,new F5,e.initialUser,this.serializer)}Du(e){return new OD(ET.Vi,this.serializer)}bu(e){return new J5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fm.provider={build:()=>new fm};class FF extends fm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){bt(this.persistence.referenceDelegate instanceof cm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new w5(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new OD((i=>cm.Vi(i,n)),this.serializer)}}class K0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LF.bind(null,this.syncEngine),await vF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _F})()}createDatastore(e){const n=tg(e.databaseInfo.databaseId),i=(function(o){return new eF(o)})(e.databaseInfo);return(function(o,l,c,d){return new rF(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new oF(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>jA(this.syncEngine,n,0)),(function(){return FA.C()?new FA:new W5})())}createSyncEngine(e,n){return(function(r,o,l,c,d,f,p){const y=new xF(r,o,l,c,d,f);return p&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=Ye(r);we(sl,"RemoteStore shutting down."),o.Ia.add(5),await pf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}K0.provider={build:()=>new K0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Gs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="FirestoreClient";class BF{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=oi.UNAUTHENTICATED,this.clientId=uT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{we(ea,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(we(ea,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=RT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ky(t,e){t.asyncQueue.verifyOperationInProgress(),we(ea,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await UD(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{Yo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{Yo("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function KA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zF(t);we(ea,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>zA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>zA(e.remoteStore,r))),t._onlineComponents=e}async function zF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ea,"Using user provided OfflineComponentProvider");try{await Ky(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await Ky(t,new fm)}}else we(ea,"Using default OfflineComponentProvider"),await Ky(t,new FF(void 0));return t._offlineComponents}async function oM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ea,"Using user provided OnlineComponentProvider"),await KA(t,t._uninitializedComponentsProvider._online)):(we(ea,"Using default OnlineComponentProvider"),await KA(t,new K0))),t._onlineComponents}function qF(t){return oM(t).then((e=>e.syncEngine))}async function Y0(t){const e=await oM(t),n=e.eventManager;return n.onListen=AF.bind(null,e.syncEngine),n.onUnlisten=RF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),n}function HF(t,e,n={}){const i=new jo;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const p=new sM({next:_=>{p.Ou(),l.enqueueAndForget((()=>JD(o,y)));const b=_.docs.has(c);!b&&_.fromCache?f.reject(new Se(de.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&d&&d.source==="server"?f.reject(new Se(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new WD(Jm(c.path),p,{includeMetadataChanges:!0,ka:!0});return YD(o,y)})(await Y0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="firestore.googleapis.com",JA=!0;class WA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lM,this.ssl=JA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:JA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S5)throw new Se(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aM((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rg{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Q3;switch(i.type){case"firstParty":return new n6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=YA.get(n);i&&(we("ComponentProvider","Removing Datastore"),YA.delete(n),i.terminate())})(this),Promise.resolve()}}function GF(t,e,n,i={}){var r;t=as(t,rg);const o=ia(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&($_(`https://${d}`),K_("Firestore",!0)),l.host!==lM&&l.host!==d&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!el(f,c)&&(t._setSettings(f),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=oi.MOCK_USER;else{p=tN(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new Se(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new oi(_)}t._authCredentials=new Z3(new KN(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gu(this.firestore,e,this._query)}}class gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(cf(n,gn._jsonSchema))return new gn(e,i||null,new Me(Ut.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:An("string",gn._jsonSchemaVersion),referencePath:An("string")};class $o extends Gu{constructor(e,n,i){super(e,n,Jm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Me(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function ua(t,e,...n){if(t=Wt(t),JN("collection","path",e),t instanceof rg){const i=Ut.fromString(e,...n);return uA(i),new $o(t,null,i)}{if(!(t instanceof gn||t instanceof $o))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ut.fromString(e,...n));return uA(i),new $o(t.firestore,null,i)}}function ju(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=uT.newId()),JN("doc","path",e),t instanceof rg){const i=Ut.fromString(e,...n);return lA(i),new gn(t,null,new Me(i))}{if(!(t instanceof gn||t instanceof $o))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ut.fromString(e,...n));return lA(i),new gn(t.firestore,t instanceof $o?t.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="AsyncQueue";class QA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BD(this,"async_queue_retry"),this.oc=()=>{const i=$y();i&&we(XA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=$y();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=$y();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new jo;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qu(e))throw e;we(XA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Gs("INTERNAL UNHANDLED ERROR: ",ZA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=IT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Be(47125,{hc:ZA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function ZA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ol extends rg{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new QA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QA(e),this._firestoreClient=void 0,await e}}}function jF(t,e){const n=typeof t=="object"?t:W_(),i=typeof t=="string"?t:im,r=zm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Q1("firestore");o&&GF(r,...o)}return r}function PT(t){if(t._terminated)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$F(t),t._firestoreClient}function $F(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,d,f,p){return new y6(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,aM(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new BF(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(Zn.fromBase64String(e))}catch(n){throw new Se(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sr(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cf(e,Sr._jsonSchema))return Sr.fromBase64String(e.bytes)}}Sr._jsonSchemaVersion="firestore/bytes/1.0",Sr._jsonSchema={type:An("string",Sr._jsonSchemaVersion),bytes:An("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(cf(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:An("string",cs._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ds._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cf(e,ds._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ds(e.vectorValues);throw new Se(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ds._jsonSchemaVersion="firestore/vectorValue/1.0",ds._jsonSchema={type:An("string",ds._jsonSchemaVersion),vectorValues:An("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=/^__.*__$/;class YF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new la(e,this.data,this.fieldMask,n,this.fieldTransforms):new ff(e,this.data,n,this.fieldTransforms)}}class uM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new la(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class VT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new VT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(cM(this.Ec)&&KF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class JF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||tg(e)}Dc(e,n,i,r=!1){return new VT({Ec:e,methodName:n,bc:i,path:Qn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LT(t){const e=t._freezeSettings(),n=tg(t._databaseId);return new JF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WF(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);OT("Data must be an object, but it was:",l,i);const c=dM(i,l);let d,f;if(o.merge)d=new tr(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const _=J0(e,y,n);if(!l.contains(_))throw new Se(de.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);hM(p,_)||p.push(_)}d=new tr(p),f=l.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=l.fieldTransforms;return new YF(new Hi(c),d,f)}class og extends kT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}function XF(t,e,n,i){const r=t.Dc(1,e,n);OT("Data must be an object, but it was:",r,i);const o=[],l=Hi.empty();aa(i,((d,f)=>{const p=UT(e,d,n);f=Wt(f);const y=r.gc(p);if(f instanceof og)o.push(p);else{const _=gf(f,y);_!=null&&(o.push(p),l.set(p,_))}}));const c=new tr(o);return new uM(l,c,r.fieldTransforms)}function QF(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[J0(e,i,n)],d=[r];if(o.length%2!=0)throw new Se(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)c.push(J0(e,o[_])),d.push(o[_+1]);const f=[],p=Hi.empty();for(let _=c.length-1;_>=0;--_)if(!hM(f,c[_])){const b=c[_];let A=d[_];A=Wt(A);const I=l.gc(b);if(A instanceof og)f.push(b);else{const R=gf(A,I);R!=null&&(f.push(b),p.set(b,R))}}const y=new tr(f);return new uM(p,y,l.fieldTransforms)}function ZF(t,e,n,i=!1){return gf(n,t.Dc(i?4:3,e))}function gf(t,e){if(fM(t=Wt(t)))return OT("Unsupported field value:",e,t),dM(t,e);if(t instanceof kT)return(function(i,r){if(!cM(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let d=gf(c,r.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return z6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=jt.fromDate(i);return{timestampValue:um(r.serializer,o)}}if(i instanceof jt){const o=new jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:um(r.serializer,o)}}if(i instanceof cs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sr)return{bytesValue:RD(r.serializer,i._byteString)};if(i instanceof gn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_T(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ds)return(function(l,c){return{mapValue:{fields:{[rD]:{stringValue:sD},[rm]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return mT(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${jm(i)}`)})(t,e)}function dM(t,e){const n={};return QN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(t,((i,r)=>{const o=gf(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function fM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof cs||t instanceof Sr||t instanceof gn||t instanceof kT||t instanceof ds)}function OT(t,e,n){if(!fM(n)||!WN(n)){const i=jm(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function J0(t,e,n){if((e=Wt(e))instanceof sg)return e._internalPath;if(typeof e=="string")return UT(t,e);throw hm("Field path arguments must be of type string or ",t,!1,void 0,n)}const eB=new RegExp("[~\\*/\\[\\]]");function UT(t,e,n){if(e.search(eB)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sg(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hm(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new Se(de.INVALID_ARGUMENT,c+t+d)}function hM(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(FT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tB extends pM{data(){return super.data()}}function FT(t,e){return typeof e=="string"?UT(t,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BT{}class iB extends BT{}function ag(t,e,...n){let i=[];e instanceof BT&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof zT)).length,c=o.filter((d=>d instanceof lg)).length;if(l>1||l>0&&c>0)throw new Se(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class lg extends iB{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new lg(e,n,i)}_apply(e){const n=this._parse(e);return mM(e._query,n),new Gu(e.firestore,e.converter,O0(e._query,n))}_parse(e){const n=LT(e.firestore);return(function(o,l,c,d,f,p,y){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Se(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){nC(y,p);const A=[];for(const I of y)A.push(tC(d,o,I));_={arrayValue:{values:A}}}else _=tC(d,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||nC(y,p),_=ZF(c,l,y,p==="in"||p==="not-in");return xn.create(f,p,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rB(t,e,n){const i=e,r=FT("where",t);return lg._create(r,i,n)}class zT extends BT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zT(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const d of c)mM(l,d),l=O0(l,d)})(e._query,n),new Gu(e.firestore,e.converter,O0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tC(t,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new Se(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hD(e)&&n.indexOf("/")!==-1)throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ut.fromString(n));if(!Me.isDocumentKey(i))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vA(t,new Me(i))}if(n instanceof gn)return vA(t,n._key);throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(n)}.`)}function nC(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sB{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return aa(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[rm].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>mn(l.doubleValue)));return new ds(o)}convertGeoPoint(e){return new cs(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ym(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hd(e));default:return null}}convertTimestamp(e){const n=Wo(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ut.fromString(e);bt(VD(i),9688,{name:e});const r=new Gd(i.get(1),i.get(3)),o=new Me(i.popFirst(5));return r.isEqual(n)||Gs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ld{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends pM{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(FT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ya._jsonSchema={type:An("string",Ya._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class Vp extends Ya{data(e={}){return super.data(e)}}class Tu{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ld(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Vp(this._firestore,this._userDataWriter,i.key,i,new ld(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const d=new Vp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ld(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new Vp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ld(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:aB(c.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){t=as(t,gn);const e=as(t.firestore,ol);return HF(PT(e),t._key).then((n=>vM(e,t,n)))}Tu._jsonSchemaVersion="firestore/querySnapshot/1.0",Tu._jsonSchema={type:An("string",Tu._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};class gM extends sB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function uB(t,e,n,...i){t=as(t,gn);const r=as(t.firestore,ol),o=LT(r);let l;return l=typeof(e=Wt(e))=="string"||e instanceof sg?QF(o,"updateDoc",t._key,e,n,i):XF(o,"updateDoc",t._key,e),HT(r,[l.toMutation(t._key,qr.exists(!0))])}function qT(t){return HT(as(t.firestore,ol),[new gT(t._key,qr.none())])}function ug(t,e){const n=as(t.firestore,ol),i=ju(t),r=oB(t.converter,e);return HT(n,[WF(LT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,qr.exists(!1))]).then((()=>i))}function cg(t,...e){var n,i,r;t=Wt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||eC(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(eC(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let d,f,p;if(t instanceof gn)f=as(t.firestore,ol),p=Jm(t._key.path),d={next:y=>{e[l]&&e[l](vM(f,t,y))},error:e[l+1],complete:e[l+2]};else{const y=as(t,Gu);f=as(y.firestore,ol),p=y._query;const _=new gM(f);d={next:b=>{e[l]&&e[l](new Tu(f,_,y,b))},error:e[l+1],complete:e[l+2]},nB(t._query)}return(function(_,b,A,I){const R=new sM(I),V=new WD(b,R,A);return _.asyncQueue.enqueueAndForget((async()=>YD(await Y0(_),V))),()=>{R.Ou(),_.asyncQueue.enqueueAndForget((async()=>JD(await Y0(_),V)))}})(PT(f),p,c,d)}function HT(t,e){return(function(i,r){const o=new jo;return i.asyncQueue.enqueueAndForget((async()=>DF(await qF(i),r,o))),o.promise})(PT(t),e)}function vM(t,e,n){const i=n.docs.get(e._key),r=new gM(t);return new Ya(t,r,e._key,i,new ld(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Bu=r})(ul),tl(new Ko("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new ol(new e6(i.getProvider("auth-internal")),new i6(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Se(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(f.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),ss(iA,rA,e),ss(iA,rA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="firebasestorage.googleapis.com",_M="storageBucket",cB=120*1e3,dB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends ms{constructor(e,n,i=0){super(Yy(e),`Firebase Storage: ${n} (${Yy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function Yy(t){return"storage/"+t}function GT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(ln.UNKNOWN,t)}function fB(t){return new un(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function hB(t){return new un(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(ln.UNAUTHENTICATED,t)}function mB(){return new un(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gB(t){return new un(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vB(){return new un(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yB(){return new un(ln.CANCELED,"User canceled the upload/download.")}function _B(t){return new un(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function TB(t){return new un(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function EB(){return new un(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_M+"' property when initializing the app?")}function SB(){return new un(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bB(){return new un(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wB(t){return new un(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function W0(t){return new un(ln.INVALID_ARGUMENT,t)}function TM(){return new un(ln.APP_DELETED,"The Firebase app was deleted.")}function xB(t){return new un(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bd(t,e){return new un(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jc(t){throw new un(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=nr.makeFromUrl(e,n)}catch{return new nr(e,"")}if(i.path==="")return i;throw TB(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),d={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${p}/b/${r}/o${_}`,"i"),A={bucket:1,path:3},I=n===yM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",V=new RegExp(`^https?://${I}/${r}/${R}`,"i"),O=[{regex:c,indices:d,postModify:o},{regex:b,indices:A,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<O.length;G++){const K=O[G],H=K.regex.exec(e);if(H){const D=H[K.indices.bucket];let N=H[K.indices.path];N||(N=""),i=new nr(D,N),K.postModify(i);break}}if(i==null)throw _B(e);return i}}class AB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...R){f||(f=!0,e.apply(null,R))}function y(R){r=setTimeout(()=>{r=null,t(b,d())},R)}function _(){o&&clearTimeout(o)}function b(R,...V){if(f){_();return}if(R){_(),p.call(null,R,...V);return}if(d()||l){_(),p.call(null,R,...V);return}i<64&&(i*=2);let O;c===1?(c=2,O=0):O=(i+Math.random())*1e3,y(O)}let A=!1;function I(R){A||(A=!0,_(),!f&&(r!==null?(R||(c=2),clearTimeout(r),y(0)):R||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,I(!0)},n),I}function IB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){return t!==void 0}function NB(t){return typeof t=="object"&&!Array.isArray(t)}function jT(t){return typeof t=="string"||t instanceof String}function iC(t){return $T()&&t instanceof Blob}function $T(){return typeof Blob<"u"}function rC(t,e,n,i){if(i<e)throw W0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw W0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function EM(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ja;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ja||(Ja={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n,i,r,o,l,c,d,f,p,y,_=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=_,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,I)=>{this.resolve_=A,this.reject_=I,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Xh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ja.NO_ERROR,d=o.getStatus();if(!c||DB(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===Ja.ABORT;i(!1,new Xh(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new Xh(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());RB(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=GT();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(r.canceled){const d=this.appDelete_?TM():yB();l(d)}else{const d=vB();l(d)}};this.canceled_?n(!1,new Xh(!1,null,!0)):this.backoffId_=CB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function PB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OB(t,e,n,i,r,o,l=!0,c=!1){const d=EM(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return VB(p,e),PB(p,n),kB(p,o),LB(p,i),new MB(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FB(...t){const e=UB();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if($T())return new Blob(t);throw new un(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BB(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t){if(typeof atob>"u")throw wB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jy{constructor(e,n){this.data=e,this.contentType=n||null}}function SM(t,e){switch(t){case Fr.RAW:return new Jy(bM(e));case Fr.BASE64:case Fr.BASE64URL:return new Jy(wM(t,e));case Fr.DATA_URL:return new Jy(HB(e),GB(e))}throw GT()}function bM(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function qB(t){let e;try{e=decodeURIComponent(t)}catch{throw bd(Fr.DATA_URL,"Malformed data URL.")}return bM(e)}function wM(t,e){switch(t){case Fr.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw bd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Fr.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw bd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zB(e)}catch(r){throw r.message.includes("polyfill")?r:bd(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class xM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bd(Fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=jB(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function HB(t){const e=new xM(t);return e.base64?wM(Fr.BASE64,e.rest):qB(e.rest)}function GB(t){return new xM(t).contentType}function jB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){let i=0,r="";iC(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(iC(this.data_)){const i=this.data_,r=BB(i,e,n);return r===null?null:new Lo(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Lo(i,!0)}}static getBlob(...e){if($T()){const n=e.map(i=>i instanceof Lo?i.data_:i);return new Lo(FB.apply(null,n))}else{const n=e.map(l=>jT(l)?SM(Fr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Lo(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t){let e;try{e=JSON.parse(t)}catch{return null}return NB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KB(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function CM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t,e){return e}class Si{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||YB}}let Qh=null;function JB(t){return!jT(t)||t.length<2?t:CM(t)}function IM(){if(Qh)return Qh;const t=[];t.push(new Si("bucket")),t.push(new Si("generation")),t.push(new Si("metageneration")),t.push(new Si("name","fullPath",!0));function e(o,l){return JB(l)}const n=new Si("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Si("size");return r.xform=i,t.push(r),t.push(new Si("timeCreated")),t.push(new Si("updated")),t.push(new Si("md5Hash",null,!0)),t.push(new Si("cacheControl",null,!0)),t.push(new Si("contentDisposition",null,!0)),t.push(new Si("contentEncoding",null,!0)),t.push(new Si("contentLanguage",null,!0)),t.push(new Si("contentType",null,!0)),t.push(new Si("metadata","customMetadata",!0)),Qh=t,Qh}function WB(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new nr(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function XB(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return WB(i,t),i}function RM(t,e,n){const i=AM(e);return i===null?null:XB(t,i,n)}function QB(t,e,n,i){const r=AM(e);if(r===null||!jT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,y=t.fullPath,_="/b/"+l(p)+"/o/"+l(y),b=KT(_,n,i),A=EM({alt:"media",token:f});return b+A})[0]}function ZB(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class NM{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){if(!t)throw GT()}function e9(t,e){function n(i,r){const o=RM(t,r,e);return DM(o!==null),o}return n}function t9(t,e){function n(i,r){const o=RM(t,r,e);return DM(o!==null),QB(o,r,t.host,t._protocol)}return n}function MM(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=mB():r=pB():n.getStatus()===402?r=hB(t.bucket):n.getStatus()===403?r=gB(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function n9(t){const e=MM(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=fB(t.path)),o.serverResponse=r.serverResponse,o}return n}function i9(t,e,n){const i=e.fullServerUrl(),r=KT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new NM(r,o,t9(t,n),l);return c.errorHandler=n9(e),c}function r9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function s9(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=r9(null,e)),i}function o9(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let G=0;G<2;G++)O=O+Math.random().toString().slice(2);return O}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=s9(e,i,r),p=ZB(f,n),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+d+"--",b=Lo.getBlob(y,i,_);if(b===null)throw SB();const A={name:f.fullPath},I=KT(o,t.host,t._protocol),R="POST",V=t.maxUploadRetryTime,k=new NM(I,R,e9(t,n),V);return k.urlParams=A,k.headers=l,k.body=b.uploadData(),k.errorHandler=MM(e),k}class a9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Jc("cannot .send() more than once");if(ia(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class l9 extends a9{initXhr(){this.xhr_.responseType="text"}}function PM(){return new l9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this._service=e,n instanceof nr?this._location=n:this._location=nr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new al(e,n)}get root(){const e=new nr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CM(this._location.path)}get storage(){return this._service}get parent(){const e=$B(this._location.path);if(e===null)return null;const n=new nr(this._location.bucket,e);return new al(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xB(e)}}function kM(t,e,n){t._throwIfRoot("uploadBytes");const i=o9(t.storage,t._location,IM(),new Lo(e,!0),n);return t.storage.makeRequestWithTokens(i,PM).then(r=>({metadata:r,ref:t}))}function u9(t,e,n=Fr.RAW,i){t._throwIfRoot("uploadString");const r=SM(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),kM(t,r.data,o)}function c9(t){t._throwIfRoot("getDownloadURL");const e=i9(t.storage,t._location,IM());return t.storage.makeRequestWithTokens(e,PM).then(n=>{if(n===null)throw bB();return n})}function d9(t,e){const n=KB(t._location.path,e),i=new nr(t._location.bucket,n);return new al(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){return/^[A-Za-z]+:\/\//.test(t)}function h9(t,e){return new al(t,e)}function VM(t,e){if(t instanceof YT){const n=t;if(n._bucket==null)throw EB();const i=new al(n,n._bucket);return e!=null?VM(i,e):i}else return e!==void 0?d9(t,e):t}function p9(t,e){if(e&&f9(e)){if(t instanceof YT)return h9(t,e);throw W0("To use ref(service, url), the first argument must be a Storage instance.")}else return VM(t,e)}function sC(t,e){const n=e==null?void 0:e[_M];return n==null?null:nr.makeFromBucketSpec(n,t)}function m9(t,e,n,i={}){t.host=`${e}:${n}`;const r=ia(e);r&&($_(`https://${t.host}/b`),K_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:tN(o,t.app.options.projectId))}class YT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=yM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cB,this._maxUploadRetryTime=dB,this._requests=new Set,r!=null?this._bucket=nr.makeFromBucketSpec(r,this._host):this._bucket=sC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nr.makeFromBucketSpec(this._url,e):this._bucket=sC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new al(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new AB(TM());{const l=OB(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const oC="@firebase/storage",aC="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="storage";function g9(t,e,n){return t=Wt(t),kM(t,e,n)}function v9(t,e,n,i){return t=Wt(t),u9(t,e,n,i)}function OM(t){return t=Wt(t),c9(t)}function UM(t,e){return t=Wt(t),p9(t,e)}function y9(t=W_(),e){t=Wt(t);const i=zm(t,LM).getImmediate({identifier:e}),r=Q1("storage");return r&&_9(i,...r),i}function _9(t,e,n,i={}){m9(t,e,n,i)}function T9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new YT(n,i,r,e,ul)}function E9(){tl(new Ko(LM,T9,"PUBLIC").setMultipleInstances(!0)),ss(oC,aC,""),ss(oC,aC,"esm2017")}E9();const S9={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},JT=rN(S9),Ba=Y3(JT),b9=new Ls,sr=jF(JT),FM=y9(JT);var w9={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let x9,A9;function C9(){return{geminiUrl:x9,vertexUrl:A9}}function I9(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=C9();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function v(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];v(p,e.slice(o+1),n[f])}else for(const f of d)v(f,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];v(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function R9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}X0(t,r,o,0,l)}}function X0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])X0(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const y=[];for(const _ of n.slice(i))_==="*"?y.push(f):y.push(_);v(l,y,p)}for(const f of c)delete l[f]}}else{const l=t;o in l&&X0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N9(t){const e={},n=m(t,["operationName"]);n!=null&&v(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&v(e,["_url","resourceName"],i),e}function D9(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&v(e,["response"],P9(l)),e}function M9(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response"]);return l!=null&&v(e,["response"],k9(l)),e}function P9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>V9(l))),v(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function k9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>L9(l))),v(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function V9(t){const e={},n=m(t,["video"]);return n!=null&&v(e,["video"],q9(n)),e}function L9(t){const e={},n=m(t,["_self"]);return n!=null&&v(e,["video"],H9(n)),e}function O9(t){const e={},n=m(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function U9(t){const e={},n=m(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function F9(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response"]);return l!=null&&v(e,["response"],B9(l)),e}function B9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&v(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function BM(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response"]);return l!=null&&v(e,["response"],z9(l)),e}function z9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&v(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function q9(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],WT(i));const r=m(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function H9(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],WT(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lC;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lC||(lC={}));var uC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uC||(uC={}));var cC;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(cC||(cC={}));var je;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(je||(je={}));var dC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dC||(dC={}));var fC;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fC||(fC={}));var hC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(hC||(hC={}));var pC;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(pC||(pC={}));var mC;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(mC||(mC={}));var gC;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(gC||(gC={}));var vC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vC||(vC={}));var yC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(yC||(yC={}));var _C;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(_C||(_C={}));var TC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(TC||(TC={}));var EC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(EC||(EC={}));var SC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(SC||(SC={}));var bC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bC||(bC={}));var wC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(wC||(wC={}));var xC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xC||(xC={}));var pm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(pm||(pm={}));var AC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(AC||(AC={}));var CC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(CC||(CC={}));var IC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(IC||(IC={}));var Q0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Q0||(Q0={}));var RC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(RC||(RC={}));var NC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NC||(NC={}));var DC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(DC||(DC={}));var MC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(MC||(MC={}));var PC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(PC||(PC={}));var kC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kC||(kC={}));var VC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(VC||(VC={}));var LC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(LC||(LC={}));var OC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(OC||(OC={}));var UC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(UC||(UC={}));var FC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(FC||(FC={}));var BC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(BC||(BC={}));var zC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zC||(zC={}));var qC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qC||(qC={}));var HC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(HC||(HC={}));var GC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(GC||(GC={}));var jC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(jC||(jC={}));var $C;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($C||($C={}));var KC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(KC||(KC={}));var YC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(YC||(YC={}));var JC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(JC||(JC={}));var WC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(WC||(WC={}));var XC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(XC||(XC={}));var QC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(QC||(QC={}));var ZC;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ZC||(ZC={}));var eI;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eI||(eI={}));var tI;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tI||(tI={}));var nI;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(nI||(nI={}));var iI;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(iI||(iI={}));var rI;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rI||(rI={}));var sI;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(sI||(sI={}));var lu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(lu||(lu={}));class Z0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wc{get text(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const y=[];for(const _ of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,A]of Object.entries(_))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(A!==null||A!==void 0)&&y.push(b);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;p=!0,f+=_.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const y of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[_,b]of Object.entries(y))_!=="inlineData"&&(b!==null||b!==void 0)&&p.push(_);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class oI{}class aI{}class G9{}class j9{}class $9{}class K9{}class lI{}class uI{}class cI{}class Y9{}class mm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new mm;let r;const o=e;return n?r=M9(o):r=D9(o),Object.assign(i,r),i}}class dI{}class fI{}class hI{}class pI{}class J9{}class W9{}class X9{}class XT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new XT,o=F9(e);return Object.assign(i,o),i}}class Q9{}class Z9{}class ez{}class mI{}class tz{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nz{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class QT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new QT,o=BM(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function zM(t,e){const n=yt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function qM(t){return Array.isArray(t)?t.map(e=>gm(e)):[gm(t)]}function gm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function HM(t){const e=gm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GM(t){const e=gm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function jM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>gI(e)):[gI(t)]}function e_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function vI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function yI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function li(t){if(t==null)throw new Error("ContentUnion is required");return e_(t)?t:{role:"user",parts:jM(t)}}function ZT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=li(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=li(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>li(n)):[li(e)]}function br(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(vI(t)||yI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[li(t)]}const e=[],n=[],i=e_(t[0]);for(const r of t){const o=e_(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(vI(r)||yI(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:jM(n)}),e}function iz(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(je).includes(n[0].toUpperCase())?n[0].toUpperCase():je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(je).includes(i.toUpperCase())?i.toUpperCase():je.TYPE_UNSPECIFIED})}}function Eu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&iz(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(je).includes(c.toUpperCase())?c.toUpperCase():je.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Eu(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}d.push(Eu(f))}e[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=Eu(p);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function eE(t){return Eu(t)}function tE(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function nE(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function $u(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Eu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Eu(e.response));return t}function Ku(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function rz(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Js(t,e){if(typeof e!="string")throw new Error("name must be a string");return rz(t,e,"cachedContents")}function $M(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ca(t){return WT(t)}function sz(t){return t!=null&&typeof t=="object"&&"name"in t}function oz(t){return t!=null&&typeof t=="object"&&"video"in t}function az(t){return t!=null&&typeof t=="object"&&"uri"in t}function KM(t){var e;let n;if(sz(t)&&(n=t.name),!(az(t)&&(n=t.uri,n===void 0))&&!(oz(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function YM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function JM(t){for(const e of["models","tunedModels","publisherModels"])if(lz(t,e))return t[e];return[]}function lz(t,e){return t!==null&&typeof t=="object"&&e in t}function uz(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function cz(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=uz(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function WM(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dz(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function XM(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Yu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function QM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fz(t){const e={},n=m(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$z(l))),v(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["inlinedEmbedContentResponses"],o)}return e}function hz(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&v(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function pz(t){const e={},n=m(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&v(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&v(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Lp(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&v(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&v(e,["state"],QM(r));const o=m(t,["metadata","createTime"]);o!=null&&v(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&v(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&v(e,["updateTime"],c);const d=m(t,["metadata","model"]);d!=null&&v(e,["model"],d);const f=m(t,["metadata","output"]);return f!=null&&v(e,["dest"],fz(XM(f))),e}function t_(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=m(t,["state"]);r!=null&&v(e,["state"],QM(r));const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["createTime"]);l!=null&&v(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&v(e,["startTime"],c);const d=m(t,["endTime"]);d!=null&&v(e,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&v(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&v(e,["model"],p);const y=m(t,["inputConfig"]);y!=null&&v(e,["src"],mz(y));const _=m(t,["outputConfig"]);_!=null&&v(e,["dest"],hz(XM(_)));const b=m(t,["completionStats"]);return b!=null&&v(e,["completionStats"],b),e}function mz(t){const e={},n=m(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&v(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function gz(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&v(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>jz(t,l))),v(n,["requests","requests"],o)}return n}function vz(t){const e={},n=m(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&v(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&v(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yz(t){const e={},n=m(t,["data"]);if(n!=null&&v(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function _z(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function Tz(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function Ez(t){const e={},n=m(t,["content"]);n!=null&&v(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],Sz(i));const r=m(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&v(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&v(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&v(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&v(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(b=>b)),v(e,["safetyRatings"],_)}const y=m(t,["urlContextMetadata"]);return y!=null&&v(e,["urlContextMetadata"],y),e}function Sz(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function ZM(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Zz(o))),v(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function bz(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&v(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function wz(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&v(e,["outputConfig"],pz(dz(r))),n}function _I(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&v(n,["batch","inputConfig"],gz(t,WM(t,r)));const o=m(e,["config"]);return o!=null&&bz(o,n),n}function xz(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],yt(t,i));const r=m(e,["src"]);r!=null&&v(n,["inputConfig"],vz(WM(t,r)));const o=m(e,["config"]);return o!=null&&wz(o,n),n}function Az(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["batch","displayName"],i),n}function Cz(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&v(n,["batch","inputConfig"],kz(t,r));const o=m(e,["config"]);return o!=null&&Az(o,n),n}function Iz(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function Rz(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function Nz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);return o!=null&&v(e,["error"],o),e}function Dz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);return o!=null&&v(e,["error"],o),e}function Mz(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=ZT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),v(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(v(n,["_self"],Pz(r,n)),R9(n,{"requests[].*":"requests[].request.*"})),n}function Pz(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&v(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kz(t,e){const n={},i=m(e,["fileName"]);i!=null&&v(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&v(n,["requests"],Mz(t,r)),n}function Vz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Lz(t){const e={},n=m(t,["id"]);n!=null&&v(e,["id"],n);const i=m(t,["args"]);i!=null&&v(e,["args"],i);const r=m(t,["name"]);if(r!=null&&v(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Oz(t){const e={},n=m(t,["mode"]);n!=null&&v(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&v(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Uz(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],ZM(li(r)));const o=m(e,["temperature"]);o!=null&&v(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&v(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&v(i,["logprobs"],_);const b=m(e,["presencePenalty"]);b!=null&&v(i,["presencePenalty"],b);const A=m(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);const I=m(e,["seed"]);I!=null&&v(i,["seed"],I);const R=m(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&v(i,["responseSchema"],eE(V));const k=m(e,["responseJsonSchema"]);if(k!=null&&v(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=m(e,["safetySettings"]);if(n!==void 0&&O!=null){let U=O;Array.isArray(U)&&(U=U.map(ye=>eq(ye))),v(n,["safetySettings"],U)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let U=Ku(G);Array.isArray(U)&&(U=U.map(ye=>nq($u(ye)))),v(n,["tools"],U)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&v(n,["toolConfig"],tq(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&v(n,["cachedContent"],Js(t,H));const D=m(e,["responseModalities"]);D!=null&&v(i,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&v(i,["mediaResolution"],N);const M=m(e,["speechConfig"]);if(M!=null&&v(i,["speechConfig"],tE(M)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=m(e,["thinkingConfig"]);B!=null&&v(i,["thinkingConfig"],B);const q=m(e,["imageConfig"]);q!=null&&v(i,["imageConfig"],Gz(q));const F=m(e,["enableEnhancedCivicAnswers"]);return F!=null&&v(i,["enableEnhancedCivicAnswers"],F),i}function Fz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Ez(f))),v(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&v(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function Bz(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function zz(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Yu(t,i)),n}function qz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function Hz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function Gz(t){const e={},n=m(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jz(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["request","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=br(r);Array.isArray(c)&&(c=c.map(d=>ZM(d))),v(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&v(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&v(n,["request","generationConfig"],Uz(t,l,m(n,["request"],{}))),n}function $z(t){const e={},n=m(t,["response"]);n!=null&&v(e,["response"],Fz(n));const i=m(t,["error"]);return i!=null&&v(e,["error"],i),e}function Kz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Yz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&v(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&v(e,["_query","filter"],o),n}function Jz(t){const e={},n=m(t,["config"]);return n!=null&&Kz(n,e),e}function Wz(t){const e={},n=m(t,["config"]);return n!=null&&Yz(n,e),e}function Xz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Lp(l))),v(e,["batchJobs"],o)}return e}function Qz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>t_(l))),v(e,["batchJobs"],o)}return e}function Zz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&v(e,["fileData"],Vz(o));const l=m(t,["functionCall"]);l!=null&&v(e,["functionCall"],Lz(l));const c=m(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&v(e,["inlineData"],yz(d));const f=m(t,["text"]);f!=null&&v(e,["text"],f);const p=m(t,["thought"]);p!=null&&v(e,["thought"],p);const y=m(t,["thoughtSignature"]);y!=null&&v(e,["thoughtSignature"],y);const _=m(t,["videoMetadata"]);return _!=null&&v(e,["videoMetadata"],_),e}function eq(t){const e={},n=m(t,["category"]);if(n!=null&&v(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function tq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],Oz(n));const i=m(t,["retrievalConfig"]);return i!=null&&v(e,["retrievalConfig"],i),e}function nq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>y)),v(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&v(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&v(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&v(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&v(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],qz(c));const d=m(t,["googleSearch"]);d!=null&&v(e,["googleSearch"],Hz(d));const f=m(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $s;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})($s||($s={}));class fl{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iq extends Ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fl($s.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=_I(this.apiClient,e),i=n._url,r=Te("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const y=Object.assign({},p);if(y.systemInstruction){const _=y.systemInstruction;delete y.systemInstruction;const b=y.request;b.systemInstruction=_,y.request=b}f.push(y)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=xz(this.apiClient,e);return c=Te("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>t_(p))}else{const f=_I(this.apiClient,e);return c=Te("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Lp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Cz(this.apiClient,e);return o=Te("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Lp(d))}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=zz(this.apiClient,e);return c=Te("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>t_(p))}else{const f=Bz(this.apiClient,e);return c=Te("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Lp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=Tz(this.apiClient,e);l=Te("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=_z(this.apiClient,e);l=Te("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Wz(e);return c=Te("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=Qz(p),_=new mI;return Object.assign(_,y),_})}else{const f=Jz(e);return c=Te("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=Xz(p),_=new mI;return Object.assign(_,y),_})}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Rz(this.apiClient,e);return c=Te("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>Dz(p))}else{const f=Iz(this.apiClient,e);return c=Te("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>Nz(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rq(t){const e={},n=m(t,["data"]);if(n!=null&&v(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function TI(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Cq(o))),v(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function sq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&v(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=br(l);Array.isArray(p)&&(p=p.map(y=>TI(y))),v(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],TI(li(c)));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>Rq(y))),v(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&v(e,["toolConfig"],Iq(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function oq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&v(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let y=br(l);Array.isArray(y)&&(y=y.map(_=>_)),v(e,["contents"],y)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],li(c));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(_=>Nq(_))),v(e,["tools"],y)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&v(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&v(e,["encryption_spec","kmsKeyName"],p),n}function aq(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],zM(t,i));const r=m(e,["config"]);return r!=null&&sq(r,n),n}function lq(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["model"],zM(t,i));const r=m(e,["config"]);return r!=null&&oq(r,n),n}function uq(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Js(t,i)),n}function cq(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Js(t,i)),n}function dq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function fq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function hq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function pq(t){const e={},n=m(t,["id"]);n!=null&&v(e,["id"],n);const i=m(t,["args"]);i!=null&&v(e,["args"],i);const r=m(t,["name"]);if(r!=null&&v(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mq(t){const e={},n=m(t,["mode"]);n!=null&&v(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&v(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const r=m(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function vq(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Js(t,i)),n}function yq(t,e){const n={},i=m(e,["name"]);return i!=null&&v(n,["_url","name"],Js(t,i)),n}function _q(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function Tq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function Eq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function Sq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function bq(t){const e={},n=m(t,["config"]);return n!=null&&Eq(n,e),e}function wq(t){const e={},n=m(t,["config"]);return n!=null&&Sq(n,e),e}function xq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["cachedContents"],o)}return e}function Aq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["cachedContents"],o)}return e}function Cq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&v(e,["fileData"],hq(o));const l=m(t,["functionCall"]);l!=null&&v(e,["functionCall"],pq(l));const c=m(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&v(e,["inlineData"],rq(d));const f=m(t,["text"]);f!=null&&v(e,["text"],f);const p=m(t,["thought"]);p!=null&&v(e,["thought"],p);const y=m(t,["thoughtSignature"]);y!=null&&v(e,["thoughtSignature"],y);const _=m(t,["videoMetadata"]);return _!=null&&v(e,["videoMetadata"],_),e}function Iq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],mq(n));const i=m(t,["retrievalConfig"]);return i!=null&&v(e,["retrievalConfig"],i),e}function Rq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>y)),v(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&v(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&v(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&v(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&v(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],_q(c));const d=m(t,["googleSearch"]);d!=null&&v(e,["googleSearch"],Tq(d));const f=m(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function Nq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>gq(_))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&v(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&v(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&v(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&v(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function Dq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function Mq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function Pq(t,e){const n={},i=m(e,["name"]);i!=null&&v(n,["_url","name"],Js(t,i));const r=m(e,["config"]);return r!=null&&Dq(r,n),n}function kq(t,e){const n={},i=m(e,["name"]);i!=null&&v(n,["_url","name"],Js(t,i));const r=m(e,["config"]);return r!=null&&Mq(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vq extends Ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fl($s.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=lq(this.apiClient,e);return c=Te("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=aq(this.apiClient,e);return c=Te("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=yq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=vq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=cq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=fq(p),_=new hI;return Object.assign(_,y),_})}else{const f=uq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=dq(p),_=new hI;return Object.assign(_,y),_})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=kq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Pq(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=wq(e);return c=Te("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=Aq(p),_=new pI;return Object.assign(_,y),_})}else{const f=bq(e);return c=Te("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=xq(p),_=new pI;return Object.assign(_,y),_})}}}function vm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function EI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t){return this instanceof Ge?(this.v=t,this):new Ge(t)}function Hr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(A){return Promise.resolve(A).then(b,y)}}function c(b,A){i[b]&&(r[b]=function(I){return new Promise(function(R,V){o.push([b,I,R,V])>1||d(b,I)})},A&&(r[b]=A(r[b])))}function d(b,A){try{f(i[b](A))}catch(I){_(o[0][3],I)}}function f(b){b.value instanceof Ge?Promise.resolve(b.value.v).then(p,y):_(o[0][2],b)}function p(b){d("next",b)}function y(b){d("throw",b)}function _(b,A){b(A),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Gr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EI=="function"?EI(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lq(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:eP(n)}function eP(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Oq(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function SI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!eP(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class Uq{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Fq(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Fq{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),Oq(o)}async sendMessage(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await r,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let _=[];p!=null&&(_=(c=p.slice(y))!==null&&c!==void 0?c:[]);const b=f?[f]:[];this.recordHistory(i,b,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?SI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Hr(this,arguments,function*(){var r,o,l,c,d,f;const p=[];try{for(var y=!0,_=Gr(e),b;b=yield Ge(_.next()),r=b.done,!r;y=!0){c=b.value,y=!1;const A=c;if(Lq(A)){const I=(f=(d=A.candidates)===null||d===void 0?void 0:d[0])===null||f===void 0?void 0:f.content;I!==void 0&&p.push(I)}yield yield Ge(A)}}catch(A){o={error:A}}finally{try{!y&&!r&&(l=_.return)&&(yield Ge(l.call(_)))}finally{if(o)throw o.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...SI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bq(t){const e={},n=m(t,["file"]);return n!=null&&v(e,["file"],n),e}function zq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function qq(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","file"],KM(n)),e}function Hq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function Gq(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","file"],KM(n)),e}function jq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function $q(t){const e={},n=m(t,["config"]);return n!=null&&jq(n,e),e}function Kq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yq extends Ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fl($s.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$q(e);return o=Te("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Kq(d),p=new Q9;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Bq(e);return o=Te("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=zq(d),p=new Z9;return Object.assign(p,f),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Gq(e);return o=Te("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qq(e);return o=Te("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Hq(d),p=new ez;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Op(t){const e={},n=m(t,["data"]);if(n!=null&&v(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Jq(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>dH(o))),v(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function Wq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Xq(t){const e={},n=m(t,["id"]);n!=null&&v(e,["id"],n);const i=m(t,["args"]);i!=null&&v(e,["args"],i);const r=m(t,["name"]);if(r!=null&&v(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Qq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const r=m(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function Zq(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&v(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&v(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&v(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&v(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&v(e,["mediaResolution"],p);const y=m(t,["presencePenalty"]);y!=null&&v(e,["presencePenalty"],y);const _=m(t,["responseLogprobs"]);_!=null&&v(e,["responseLogprobs"],_);const b=m(t,["responseMimeType"]);b!=null&&v(e,["responseMimeType"],b);const A=m(t,["responseModalities"]);A!=null&&v(e,["responseModalities"],A);const I=m(t,["responseSchema"]);I!=null&&v(e,["responseSchema"],I);const R=m(t,["routingConfig"]);R!=null&&v(e,["routingConfig"],R);const V=m(t,["seed"]);V!=null&&v(e,["seed"],V);const k=m(t,["speechConfig"]);k!=null&&v(e,["speechConfig"],tP(k));const O=m(t,["stopSequences"]);O!=null&&v(e,["stopSequences"],O);const G=m(t,["temperature"]);G!=null&&v(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&v(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&v(e,["topK"],H);const D=m(t,["topP"]);if(D!=null&&v(e,["topP"],D),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function tH(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function nH(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],nE(y));const _=m(t,["thinkingConfig"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","thinkingConfig"],_);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],Jq(li(A)));const I=m(t,["tools"]);if(e!==void 0&&I!=null){let H=Ku(I);Array.isArray(H)&&(H=H.map(D=>hH($u(D)))),v(e,["setup","tools"],H)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],fH(R));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&v(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],k);const O=m(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&v(e,["setup","realtimeInputConfig"],O);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);if(e!==void 0&&K!=null&&v(e,["setup","proactivity"],K),m(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iH(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],Zq(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],tP(nE(y)));const _=m(t,["thinkingConfig"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","thinkingConfig"],_);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],li(A));const I=m(t,["tools"]);if(e!==void 0&&I!=null){let D=Ku(I);Array.isArray(D)&&(D=D.map(N=>pH($u(N)))),v(e,["setup","tools"],D)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],R);const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&v(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],k);const O=m(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&v(e,["setup","realtimeInputConfig"],O);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);e!==void 0&&K!=null&&v(e,["setup","proactivity"],K);const H=m(t,["explicitVadSignal"]);return e!==void 0&&H!=null&&v(e,["setup","explicitVadSignal"],H),n}function rH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&v(n,["config"],nH(r,n)),n}function sH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&v(n,["config"],iH(r,n)),n}function oH(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],n),e}function aH(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["weightedPrompts"],i)}return e}function lH(t){const e={},n=m(t,["media"]);if(n!=null){let f=qM(n);Array.isArray(f)&&(f=f.map(p=>Op(p))),v(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&v(e,["audio"],Op(GM(i)));const r=m(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&v(e,["video"],Op(HM(o)));const l=m(t,["text"]);l!=null&&v(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&v(e,["activityEnd"],d),e}function uH(t){const e={},n=m(t,["media"]);if(n!=null){let f=qM(n);Array.isArray(f)&&(f=f.map(p=>p)),v(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&v(e,["audio"],GM(i));const r=m(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&v(e,["video"],HM(o));const l=m(t,["text"]);l!=null&&v(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&v(e,["activityEnd"],d),e}function cH(t){const e={},n=m(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&v(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&v(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&v(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&v(e,["usageMetadata"],mH(l));const c=m(t,["goAway"]);c!=null&&v(e,["goAway"],c);const d=m(t,["sessionResumptionUpdate"]);d!=null&&v(e,["sessionResumptionUpdate"],d);const f=m(t,["voiceActivityDetectionSignal"]);return f!=null&&v(e,["voiceActivityDetectionSignal"],f),e}function dH(t){const e={},n=m(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&v(e,["fileData"],Wq(o));const l=m(t,["functionCall"]);l!=null&&v(e,["functionCall"],Xq(l));const c=m(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&v(e,["inlineData"],Op(d));const f=m(t,["text"]);f!=null&&v(e,["text"],f);const p=m(t,["thought"]);p!=null&&v(e,["thought"],p);const y=m(t,["thoughtSignature"]);y!=null&&v(e,["thoughtSignature"],y);const _=m(t,["videoMetadata"]);return _!=null&&v(e,["videoMetadata"],_),e}function fH(t){const e={},n=m(t,["handle"]);if(n!=null&&v(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tP(t){const e={},n=m(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],n);const i=m(t,["languageCode"]);if(i!=null&&v(e,["languageCode"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>y)),v(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&v(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&v(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&v(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&v(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],eH(c));const d=m(t,["googleSearch"]);d!=null&&v(e,["googleSearch"],tH(d));const f=m(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function pH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>Qq(_))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&v(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&v(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&v(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&v(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function mH(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&v(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&v(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&v(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&v(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&v(e,["totalTokenCount"],c);const d=m(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(A=>A)),v(e,["promptTokensDetails"],b)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(A=>A)),v(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(A=>A)),v(e,["responseTokensDetails"],b)}const y=m(t,["toolUsePromptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(A=>A)),v(e,["toolUsePromptTokensDetails"],b)}const _=m(t,["trafficType"]);return _!=null&&v(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gH(t){const e={},n=m(t,["data"]);if(n!=null&&v(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function vH(t){const e={},n=m(t,["content"]);n!=null&&v(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],yH(i));const r=m(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&v(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&v(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&v(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&v(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(b=>b)),v(e,["safetyRatings"],_)}const y=m(t,["urlContextMetadata"]);return y!=null&&v(e,["urlContextMetadata"],y),e}function yH(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function _H(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let o=br(r);Array.isArray(o)&&(o=o.map(l=>l)),v(n,["contents"],o)}return n}function TH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(e,["tokensInfo"],r)}return e}function EH(t){const e={},n=m(t,["values"]);n!=null&&v(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&v(e,["statistics"],SH(i)),e}function SH(t){const e={},n=m(t,["truncated"]);n!=null&&v(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&v(e,["tokenCount"],i),e}function fg(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>DG(o))),v(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function bH(t){const e={},n=m(t,["controlType"]);n!=null&&v(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&v(e,["computeControl"],i),e}function wH(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xH(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&v(e,["systemInstruction"],li(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>oP(c))),v(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&v(e,["generationConfig"],gG(o)),n}function AH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>fg(c))),v(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&wH(o),n}function CH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&xH(o,n),n}function IH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&v(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&v(e,["cachedContentTokenCount"],r),e}function RH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&v(e,["totalTokens"],i),e}function NH(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],yt(t,i)),n}function DH(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],yt(t,i)),n}function MH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function PH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function kH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&v(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&v(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&v(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&v(e,["parameters","includeSafetyAttributes"],y);const _=m(t,["includeRaiReason"]);e!==void 0&&_!=null&&v(e,["parameters","includeRaiReason"],_);const b=m(t,["language"]);e!==void 0&&b!=null&&v(e,["parameters","language"],b);const A=m(t,["outputMimeType"]);e!==void 0&&A!=null&&v(e,["parameters","outputOptions","mimeType"],A);const I=m(t,["outputCompressionQuality"]);e!==void 0&&I!=null&&v(e,["parameters","outputOptions","compressionQuality"],I);const R=m(t,["addWatermark"]);e!==void 0&&R!=null&&v(e,["parameters","addWatermark"],R);const V=m(t,["labels"]);e!==void 0&&V!=null&&v(e,["labels"],V);const k=m(t,["editMode"]);e!==void 0&&k!=null&&v(e,["parameters","editMode"],k);const O=m(t,["baseSteps"]);return e!==void 0&&O!=null&&v(e,["parameters","editConfig","baseSteps"],O),n}function VH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>OG(d))),v(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&kH(l,n),n}function LH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>hg(o))),v(e,["generatedImages"],r)}return e}function OH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&v(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function UH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&v(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&v(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&v(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&v(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&v(e,["parameters","autoTruncate"],c),n}function FH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=ZT(t,r);Array.isArray(c)&&(c=c.map(d=>d)),v(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&OH(o,n);const l=m(e,["model"]);return l!==void 0&&v(n,["requests[]","model"],yt(t,l)),n}function BH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=ZT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&UH(o,n),n}function zH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function qH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>EH(l))),v(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function HH(t){const e={},n=m(t,["endpoint"]);n!=null&&v(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&v(e,["deployedModelId"],i),e}function GH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function jH(t){const e={},n=m(t,["id"]);n!=null&&v(e,["id"],n);const i=m(t,["args"]);i!=null&&v(e,["args"],i);const r=m(t,["name"]);if(r!=null&&v(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $H(t){const e={},n=m(t,["mode"]);n!=null&&v(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&v(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&v(e,["description"],n);const i=m(t,["name"]);i!=null&&v(e,["name"],i);const r=m(t,["parameters"]);r!=null&&v(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&v(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&v(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&v(e,["responseJsonSchema"],c),e}function YH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],fg(li(r)));const o=m(e,["temperature"]);o!=null&&v(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&v(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&v(i,["logprobs"],_);const b=m(e,["presencePenalty"]);b!=null&&v(i,["presencePenalty"],b);const A=m(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);const I=m(e,["seed"]);I!=null&&v(i,["seed"],I);const R=m(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&v(i,["responseSchema"],eE(V));const k=m(e,["responseJsonSchema"]);if(k!=null&&v(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=m(e,["safetySettings"]);if(n!==void 0&&O!=null){let U=O;Array.isArray(U)&&(U=U.map(ye=>UG(ye))),v(n,["safetySettings"],U)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let U=Ku(G);Array.isArray(U)&&(U=U.map(ye=>jG($u(ye)))),v(n,["tools"],U)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&v(n,["toolConfig"],GG(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&v(n,["cachedContent"],Js(t,H));const D=m(e,["responseModalities"]);D!=null&&v(i,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&v(i,["mediaResolution"],N);const M=m(e,["speechConfig"]);if(M!=null&&v(i,["speechConfig"],tE(M)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=m(e,["thinkingConfig"]);B!=null&&v(i,["thinkingConfig"],B);const q=m(e,["imageConfig"]);q!=null&&v(i,["imageConfig"],EG(q));const F=m(e,["enableEnhancedCivicAnswers"]);return F!=null&&v(i,["enableEnhancedCivicAnswers"],F),i}function JH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],li(r));const o=m(e,["temperature"]);o!=null&&v(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&v(i,["topP"],l);const c=m(e,["topK"]);c!=null&&v(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&v(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&v(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&v(i,["stopSequences"],p);const y=m(e,["responseLogprobs"]);y!=null&&v(i,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&v(i,["logprobs"],_);const b=m(e,["presencePenalty"]);b!=null&&v(i,["presencePenalty"],b);const A=m(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);const I=m(e,["seed"]);I!=null&&v(i,["seed"],I);const R=m(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);const V=m(e,["responseSchema"]);V!=null&&v(i,["responseSchema"],eE(V));const k=m(e,["responseJsonSchema"]);k!=null&&v(i,["responseJsonSchema"],k);const O=m(e,["routingConfig"]);O!=null&&v(i,["routingConfig"],O);const G=m(e,["modelSelectionConfig"]);G!=null&&v(i,["modelConfig"],G);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let W=K;Array.isArray(W)&&(W=W.map(oe=>oe)),v(n,["safetySettings"],W)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let W=Ku(H);Array.isArray(W)&&(W=W.map(oe=>oP($u(oe)))),v(n,["tools"],W)}const D=m(e,["toolConfig"]);n!==void 0&&D!=null&&v(n,["toolConfig"],D);const N=m(e,["labels"]);n!==void 0&&N!=null&&v(n,["labels"],N);const M=m(e,["cachedContent"]);n!==void 0&&M!=null&&v(n,["cachedContent"],Js(t,M));const B=m(e,["responseModalities"]);B!=null&&v(i,["responseModalities"],B);const q=m(e,["mediaResolution"]);q!=null&&v(i,["mediaResolution"],q);const F=m(e,["speechConfig"]);F!=null&&v(i,["speechConfig"],sP(tE(F)));const U=m(e,["audioTimestamp"]);U!=null&&v(i,["audioTimestamp"],U);const ye=m(e,["thinkingConfig"]);ye!=null&&v(i,["thinkingConfig"],ye);const Ne=m(e,["imageConfig"]);if(Ne!=null&&v(i,["imageConfig"],SG(Ne)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function bI(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>fg(c))),v(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&v(n,["generationConfig"],YH(t,o,n)),n}function wI(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>c)),v(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&v(n,["generationConfig"],JH(t,o,n)),n}function xI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>vH(f))),v(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&v(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function AI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),v(e,["candidates"],f)}const r=m(t,["createTime"]);r!=null&&v(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&v(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&v(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&v(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&v(e,["usageMetadata"],d),e}function WH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&v(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&v(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&v(e,["parameters","includeSafetyAttributes"],d);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&v(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&v(e,["parameters","language"],p);const y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","mimeType"],y);const _=m(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&v(e,["parameters","outputOptions","compressionQuality"],_),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&v(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function XH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&v(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&v(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&v(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&v(e,["parameters","includeSafetyAttributes"],y);const _=m(t,["includeRaiReason"]);e!==void 0&&_!=null&&v(e,["parameters","includeRaiReason"],_);const b=m(t,["language"]);e!==void 0&&b!=null&&v(e,["parameters","language"],b);const A=m(t,["outputMimeType"]);e!==void 0&&A!=null&&v(e,["parameters","outputOptions","mimeType"],A);const I=m(t,["outputCompressionQuality"]);e!==void 0&&I!=null&&v(e,["parameters","outputOptions","compressionQuality"],I);const R=m(t,["addWatermark"]);e!==void 0&&R!=null&&v(e,["parameters","addWatermark"],R);const V=m(t,["labels"]);e!==void 0&&V!=null&&v(e,["labels"],V);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&v(e,["parameters","sampleImageSize"],k);const O=m(t,["enhancePrompt"]);return e!==void 0&&O!=null&&v(e,["parameters","enhancePrompt"],O),n}function QH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&WH(o,n),n}function ZH(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&XH(o,n),n}function eG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>fG(l))),v(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],iP(r)),e}function tG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>hg(l))),v(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],rP(r)),e}function nG(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&v(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&v(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&v(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=m(t,["negativePrompt"]);e!==void 0&&d!=null&&v(e,["parameters","negativePrompt"],d);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&v(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&v(e,["instances[0]","lastFrame"],pg(p));const y=m(t,["referenceImages"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(b=>r8(b))),v(e,["instances[0]","referenceImages"],_)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function iG(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&v(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&v(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);const d=m(t,["aspectRatio"]);e!==void 0&&d!=null&&v(e,["parameters","aspectRatio"],d);const f=m(t,["resolution"]);e!==void 0&&f!=null&&v(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&v(e,["parameters","personGeneration"],p);const y=m(t,["pubsubTopic"]);e!==void 0&&y!=null&&v(e,["parameters","pubsubTopic"],y);const _=m(t,["negativePrompt"]);e!==void 0&&_!=null&&v(e,["parameters","negativePrompt"],_);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&v(e,["parameters","enhancePrompt"],b);const A=m(t,["generateAudio"]);e!==void 0&&A!=null&&v(e,["parameters","generateAudio"],A);const I=m(t,["lastFrame"]);e!==void 0&&I!=null&&v(e,["instances[0]","lastFrame"],$r(I));const R=m(t,["referenceImages"]);if(e!==void 0&&R!=null){let O=R;Array.isArray(O)&&(O=O.map(G=>s8(G))),v(e,["instances[0]","referenceImages"],O)}const V=m(t,["mask"]);e!==void 0&&V!=null&&v(e,["instances[0]","mask"],i8(V));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&v(e,["parameters","compressionQuality"],k),n}function rG(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&v(e,["response"],lG(l)),e}function sG(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response"]);return l!=null&&v(e,["response"],uG(l)),e}function oG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&v(n,["instances[0]","image"],pg(o));const l=m(e,["video"]);l!=null&&v(n,["instances[0]","video"],aP(l));const c=m(e,["source"]);c!=null&&cG(c,n);const d=m(e,["config"]);return d!=null&&nG(d,n),n}function aG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&v(n,["instances[0]","image"],$r(o));const l=m(e,["video"]);l!=null&&v(n,["instances[0]","video"],lP(l));const c=m(e,["source"]);c!=null&&dG(c,n);const d=m(e,["config"]);return d!=null&&iG(d,n),n}function lG(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>pG(l))),v(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function uG(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>mG(l))),v(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function cG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],pg(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&v(e,["instances[0]","video"],aP(o)),n}function dG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],$r(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&v(e,["instances[0]","video"],lP(o)),n}function fG(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["image"],bG(n));const i=m(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&v(e,["safetyAttributes"],iP(r)),e}function hg(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["image"],nP(n));const i=m(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&v(e,["safetyAttributes"],rP(r));const o=m(t,["prompt"]);return o!=null&&v(e,["enhancedPrompt"],o),e}function hG(t){const e={},n=m(t,["_self"]);n!=null&&v(e,["mask"],nP(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(e,["labels"],r)}return e}function pG(t){const e={},n=m(t,["video"]);return n!=null&&v(e,["video"],t8(n)),e}function mG(t){const e={},n=m(t,["_self"]);return n!=null&&v(e,["video"],n8(n)),e}function gG(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&v(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&v(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&v(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&v(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&v(e,["mediaResolution"],p);const y=m(t,["presencePenalty"]);y!=null&&v(e,["presencePenalty"],y);const _=m(t,["responseLogprobs"]);_!=null&&v(e,["responseLogprobs"],_);const b=m(t,["responseMimeType"]);b!=null&&v(e,["responseMimeType"],b);const A=m(t,["responseModalities"]);A!=null&&v(e,["responseModalities"],A);const I=m(t,["responseSchema"]);I!=null&&v(e,["responseSchema"],I);const R=m(t,["routingConfig"]);R!=null&&v(e,["routingConfig"],R);const V=m(t,["seed"]);V!=null&&v(e,["seed"],V);const k=m(t,["speechConfig"]);k!=null&&v(e,["speechConfig"],sP(k));const O=m(t,["stopSequences"]);O!=null&&v(e,["stopSequences"],O);const G=m(t,["temperature"]);G!=null&&v(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&v(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&v(e,["topK"],H);const D=m(t,["topP"]);if(D!=null&&v(e,["topP"],D),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vG(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],yt(t,i)),n}function yG(t,e){const n={},i=m(e,["model"]);return i!=null&&v(n,["_url","name"],yt(t,i)),n}function _G(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function TG(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function EG(t){const e={},n=m(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function SG(t){const e={},n=m(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&v(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&v(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&v(e,["imageOutputOptions","compressionQuality"],o),e}function bG(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],ca(n));const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function nP(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["imageBytes"],ca(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function pg(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],ca(n));const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function $r(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&v(e,["bytesBase64Encoded"],ca(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function wG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&v(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&v(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],YM(t,c)),i}function xG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&v(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&v(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],YM(t,c)),i}function AG(t,e){const n={},i=m(e,["config"]);return i!=null&&wG(t,i,n),n}function CG(t,e){const n={},i=m(e,["config"]);return i!=null&&xG(t,i,n),n}function IG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=JM(r);Array.isArray(o)&&(o=o.map(l=>n_(l))),v(e,["models"],o)}return e}function RG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=JM(r);Array.isArray(o)&&(o=o.map(l=>i_(l))),v(e,["models"],o)}return e}function NG(t){const e={},n=m(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&v(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&v(e,["dilation"],r),e}function n_(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=m(t,["description"]);r!=null&&v(e,["description"],r);const o=m(t,["version"]);o!=null&&v(e,["version"],o);const l=m(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],$G(l));const c=m(t,["inputTokenLimit"]);c!=null&&v(e,["inputTokenLimit"],c);const d=m(t,["outputTokenLimit"]);d!=null&&v(e,["outputTokenLimit"],d);const f=m(t,["supportedGenerationMethods"]);f!=null&&v(e,["supportedActions"],f);const p=m(t,["temperature"]);p!=null&&v(e,["temperature"],p);const y=m(t,["maxTemperature"]);y!=null&&v(e,["maxTemperature"],y);const _=m(t,["topP"]);_!=null&&v(e,["topP"],_);const b=m(t,["topK"]);b!=null&&v(e,["topK"],b);const A=m(t,["thinking"]);return A!=null&&v(e,["thinking"],A),e}function i_(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["displayName"]);i!=null&&v(e,["displayName"],i);const r=m(t,["description"]);r!=null&&v(e,["description"],r);const o=m(t,["versionId"]);o!=null&&v(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>HH(_))),v(e,["endpoints"],y)}const c=m(t,["labels"]);c!=null&&v(e,["labels"],c);const d=m(t,["_self"]);d!=null&&v(e,["tunedModelInfo"],KG(d));const f=m(t,["defaultCheckpointId"]);f!=null&&v(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>_)),v(e,["checkpoints"],y)}return e}function DG(t){const e={},n=m(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&v(e,["fileData"],GH(o));const l=m(t,["functionCall"]);l!=null&&v(e,["functionCall"],jH(l));const c=m(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&v(e,["inlineData"],gH(d));const f=m(t,["text"]);f!=null&&v(e,["text"],f);const p=m(t,["thought"]);p!=null&&v(e,["thought"],p);const y=m(t,["thoughtSignature"]);y!=null&&v(e,["thoughtSignature"],y);const _=m(t,["videoMetadata"]);return _!=null&&v(e,["videoMetadata"],_),e}function MG(t){const e={},n=m(t,["productImage"]);return n!=null&&v(e,["image"],$r(n)),e}function PG(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&v(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&v(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&v(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&v(e,["parameters","outputOptions","mimeType"],p);const y=m(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const _=m(t,["enhancePrompt"]);e!==void 0&&_!=null&&v(e,["parameters","enhancePrompt"],_);const b=m(t,["labels"]);return e!==void 0&&b!=null&&v(e,["labels"],b),n}function kG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&LG(r,n);const o=m(e,["config"]);return o!=null&&PG(o,n),n}function VG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>hg(r))),v(e,["generatedImages"],i)}return e}function LG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&v(e,["instances[0]","personImage","image"],$r(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>MG(c))),v(e,["instances[0]","productImages"],l)}return n}function OG(t){const e={},n=m(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],$r(n));const i=m(t,["referenceId"]);i!=null&&v(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&v(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&v(e,["maskImageConfig"],NG(o));const l=m(t,["controlImageConfig"]);l!=null&&v(e,["controlImageConfig"],bH(l));const c=m(t,["styleImageConfig"]);c!=null&&v(e,["styleImageConfig"],c);const d=m(t,["subjectImageConfig"]);return d!=null&&v(e,["subjectImageConfig"],d),e}function iP(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function rP(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function UG(t){const e={},n=m(t,["category"]);if(n!=null&&v(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function FG(t){const e={},n=m(t,["image"]);return n!=null&&v(e,["image"],$r(n)),e}function BG(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&v(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&v(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&v(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&v(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&v(e,["parameters","binaryColorThreshold"],c);const d=m(t,["labels"]);return e!==void 0&&d!=null&&v(e,["labels"],d),n}function zG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&HG(r,n);const o=m(e,["config"]);return o!=null&&BG(o,n),n}function qG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>hG(r))),v(e,["generatedMasks"],i)}return e}function HG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],$r(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&v(e,["instances[0]","scribble"],FG(o)),n}function sP(t){const e={},n=m(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],n);const i=m(t,["languageCode"]);if(i!=null&&v(e,["languageCode"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function GG(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],$H(n));const i=m(t,["retrievalConfig"]);return i!=null&&v(e,["retrievalConfig"],i),e}function jG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>y)),v(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&v(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&v(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&v(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&v(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],_G(c));const d=m(t,["googleSearch"]);d!=null&&v(e,["googleSearch"],TG(d));const f=m(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}function oP(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>KH(_))),v(e,["functionDeclarations"],y)}const i=m(t,["retrieval"]);i!=null&&v(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&v(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&v(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&v(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&v(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&v(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&v(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function $G(t){const e={},n=m(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&v(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function KG(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&v(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function YG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&v(e,["defaultCheckpointId"],o),n}function JG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&v(e,["defaultCheckpointId"],o),n}function WG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","name"],yt(t,i));const r=m(e,["config"]);return r!=null&&YG(r,n),n}function XG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&JG(r,n),n}function QG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&v(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&v(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&v(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&v(e,["parameters","outputOptions","compressionQuality"],d);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const y=m(t,["labels"]);e!==void 0&&y!=null&&v(e,["labels"],y);const _=m(t,["numberOfImages"]);e!==void 0&&_!=null&&v(e,["parameters","sampleCount"],_);const b=m(t,["mode"]);return e!==void 0&&b!=null&&v(e,["parameters","mode"],b),n}function ZG(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["_url","model"],yt(t,i));const r=m(e,["image"]);r!=null&&v(n,["instances[0]","image"],$r(r));const o=m(e,["upscaleFactor"]);o!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&QG(l,n),n}function e8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>hg(o))),v(e,["generatedImages"],r)}return e}function t8(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],ca(i));const r=m(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function n8(t){const e={},n=m(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],ca(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function i8(t){const e={},n=m(t,["image"]);n!=null&&v(e,["_self"],$r(n));const i=m(t,["maskMode"]);return i!=null&&v(e,["maskMode"],i),e}function r8(t){const e={},n=m(t,["image"]);n!=null&&v(e,["image"],pg(n));const i=m(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function s8(t){const e={},n=m(t,["image"]);n!=null&&v(e,["image"],$r(n));const i=m(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function aP(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&v(e,["encodedVideo"],ca(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["encoding"],r),e}function lP(t){const e={},n=m(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&v(e,["bytesBase64Encoded"],ca(i));const r=m(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o8(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["displayName"],i),n}function a8(t){const e={},n=m(t,["config"]);return n!=null&&o8(n,e),e}function l8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function u8(t){const e={},n=m(t,["name"]);n!=null&&v(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&l8(i,e),e}function c8(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function d8(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&v(e,["chunkingConfig"],r),n}function f8(t){const e={},n=m(t,["name"]);n!=null&&v(e,["name"],n);const i=m(t,["metadata"]);i!=null&&v(e,["metadata"],i);const r=m(t,["done"]);r!=null&&v(e,["done"],r);const o=m(t,["error"]);o!=null&&v(e,["error"],o);const l=m(t,["response"]);return l!=null&&v(e,["response"],p8(l)),e}function h8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&v(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&d8(r,e),e}function p8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&v(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function m8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function g8(t){const e={},n=m(t,["config"]);return n!=null&&m8(n,e),e}function v8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["fileSearchStores"],o)}return e}function uP(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),v(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&v(e,["chunkingConfig"],l),n}function y8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&uP(i,e),e}function _8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T8="Content-Type",E8="X-Server-Timeout",S8="User-Agent",r_="x-goog-api-client",b8="1.33.0",w8=`google-genai-sdk/${b8}`,x8="v1beta1",A8="v1beta";class C8{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:x8,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:A8,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&I8(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await CI(r),new Z0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await CI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Hr(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";const c="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield Ge(r.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(p,{stream:!0});try{const A=JSON.parse(y);if("error"in A){const I=JSON.parse(JSON.stringify(A.error)),R=I.status,V=I.code,k=`got status: ${R}. ${JSON.stringify(A)}`;if(V>=400&&V<600)throw new dg({message:k,status:V})}}catch(A){if(A.name==="ApiError")throw A}l+=y;let _=-1,b=0;for(;;){_=-1,b=0;for(const R of d){const V=l.indexOf(R);V!==-1&&(_===-1||V<_)&&(_=V,b=R.length)}if(_===-1)break;const A=l.substring(0,_);l=l.substring(_+b);const I=A.trim();if(I.startsWith(c)){const R=I.substring(c.length).trim();try{const V=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ge(new Z0(V))}catch(V){throw new Error(`exception parsing stream chunk ${R}. ${V}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=w8+" "+this.clientOptions.userAgentExtra;return e[S8]=n,e[r_]=n,e[T8]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(E8,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const d={file:r},f=this.getFileName(e),p=Te("upload/v1beta/files",d._url),y=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),y={};i!=null&&uP(i,y);const _=await this.fetchUploadUrl(f,c,d,p,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function CI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new dg({message:r,status:n}):new Error(r)}}function I8(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R8="mcp_used/unknown";let N8=!1;function cP(t){for(const e of t)if(D8(e)||typeof e=="object"&&"inputSchema"in e)return!0;return N8}function dP(t){var e;const n=(e=t[r_])!==null&&e!==void 0?e:"";t[r_]=(n+` ${R8}`).trimStart()}function D8(t){return t!==null&&typeof t=="object"&&t instanceof iE}function M8(t){return Hr(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const l=yield Ge(n.listTools({cursor:r}));for(const c of l.tools)yield yield Ge(c),o++;if(!l.nextCursor)break;r=l.nextCursor}})}class iE{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new iE(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,Gr(M8(p))),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const y=r;l.push(y);const _=y.name;if(o[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);o[_]=p}}catch(y){n={error:y}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),cz(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P8(t,e,n){const i=new nz;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class k8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=O8(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(O=>{f=O}),y=e.callbacks,_=function(){f({})},b=this.apiClient,A={onopen:_,onmessage:O=>{P8(b,y.onmessage,O)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(O){}},I=this.webSocketFactory.create(d,L8(l),A);I.connect(),await p;const k={setup:{model:yt(this.apiClient,e.model)}};return I.send(JSON.stringify(k)),new V8(I,this.apiClient)}}class V8{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=aH(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oH(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(lu.PLAY)}pause(){this.sendPlaybackControl(lu.PAUSE)}stop(){this.sendPlaybackControl(lu.STOP)}resetContext(){this.sendPlaybackControl(lu.RESET_CONTEXT)}close(){this.conn.close()}}function L8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function O8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U8="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function F8(t,e,n){const i=new tz;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=cH(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class B8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new k8(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&cP(e.config.tools)&&dP(y);const _=G8(y);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,p);else{const M=this.apiClient.getApiKey();let B="BidiGenerateContent",q="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),B="BidiGenerateContentConstrained",q="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${B}?${q}=${M}`}let b=()=>{};const A=new Promise(M=>{b=M}),I=e.callbacks,R=function(){var M;(M=I==null?void 0:I.onopen)===null||M===void 0||M.call(I),b({})},V=this.apiClient,k={onopen:R,onmessage:M=>{F8(V,I.onmessage,M)},onerror:(n=I==null?void 0:I.onerror)!==null&&n!==void 0?n:function(M){},onclose:(i=I==null?void 0:I.onclose)!==null&&i!==void 0?i:function(M){}},O=this.webSocketFactory.create(p,H8(_),k);O.connect(),await A;let G=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const M=this.apiClient.getProject(),B=this.apiClient.getLocation();G=`projects/${M}/locations/${B}/`+G}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pm.AUDIO]}:e.config.responseModalities=[pm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],D=[];for(const M of H)if(this.isCallableTool(M)){const B=M;D.push(await B.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=sH(this.apiClient,N):K=rH(this.apiClient,N),delete K.config,O.send(JSON.stringify(K)),new q8(O,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const z8={turnComplete:!0};class q8{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=br(n.turns),e.isVertexAI()||(i=i.map(r=>fg(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(U8)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},z8),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:uH(e)}:n={realtimeInput:lH(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function H8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function G8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const II=10;function RI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Su(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Su(t){return"callTool"in t&&typeof t.callTool=="function"}function j8(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Su(r)))!==null&&i!==void 0?i:!1}function NI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Su(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function DI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $8 extends Ys{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!j8(n)||RI(n.config))return await this.generateContentInternal(d);const f=NI(n);if(f.length>0){const I=f.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let p,y;const _=br(d.contents),b=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:II;let A=0;for(;A<b&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const I=p.candidates[0].content,R=[];for(const V of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Su(V)){const O=await V.callTool(p.functionCalls);R.push(...O)}A++,y={role:"user",parts:R},d.contents=br(d.contents),d.contents.push(I),d.contents.push(y),DI(d.config)&&(_.push(I),_.push(y))}return DI(d.config)&&(p.automaticFunctionCallingHistory=_),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),RI(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const d=NI(n);if(d.length>0){const y=d.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new fl($s.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>Su(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&cP(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),dP(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Su(l)){const c=l,d=await c.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:II;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(f,p,y){return Hr(this,arguments,function*(){for(var _,b,A,I,R,V;c<o;){l&&(c++,l=!1);const K=yield Ge(f.processParamsMaybeAddMcpUsage(y)),H=yield Ge(f.generateContentStreamInternal(K)),D=[],N=[];try{for(var k=!0,O=(b=void 0,Gr(H)),G;G=yield Ge(O.next()),_=G.done,!_;k=!0){I=G.value,k=!1;const M=I;if(yield yield Ge(M),M.candidates&&(!((R=M.candidates[0])===null||R===void 0)&&R.content)){N.push(M.candidates[0].content);for(const B of(V=M.candidates[0].content.parts)!==null&&V!==void 0?V:[])if(c<o&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(B.functionCall.name)){const q=yield Ge(p.get(B.functionCall.name).callTool([B.functionCall]));D.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(M){b={error:M}}finally{try{!k&&!_&&(A=O.return)&&(yield Ge(A.call(O)))}finally{if(b)throw b.error}}if(D.length>0){l=!0;const M=new Wc;M.candidates=[{content:{role:"user",parts:D}}],yield yield Ge(M);const B=[];B.push(...N),B.push({role:"user",parts:D});const q=br(y.contents).concat(B);y.contents=q}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=wI(this.apiClient,e);return c=Te("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=AI(p),_=new Wc;return Object.assign(_,y),_})}else{const f=bI(this.apiClient,e);return c=Te("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=xI(p),_=new Wc;return Object.assign(_,y),_})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=wI(this.apiClient,e);return c=Te("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(y){return Hr(this,arguments,function*(){var _,b,A,I;try{for(var R=!0,V=Gr(y),k;k=yield Ge(V.next()),_=k.done,!_;R=!0){I=k.value,R=!1;const O=I,G=AI(yield Ge(O.json()));G.sdkHttpResponse={headers:O.headers};const K=new Wc;Object.assign(K,G),yield yield Ge(K)}}catch(O){b={error:O}}finally{try{!R&&!_&&(A=V.return)&&(yield Ge(A.call(V)))}finally{if(b)throw b.error}}})})}else{const f=bI(this.apiClient,e);return c=Te("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(y){return Hr(this,arguments,function*(){var _,b,A,I;try{for(var R=!0,V=Gr(y),k;k=yield Ge(V.next()),_=k.done,!_;R=!0){I=k.value,R=!1;const O=I,G=xI(yield Ge(O.json()));G.sdkHttpResponse={headers:O.headers};const K=new Wc;Object.assign(K,G),yield yield Ge(K)}}catch(O){b={error:O}}finally{try{!R&&!_&&(A=V.return)&&(yield Ge(A.call(V)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=BH(this.apiClient,e);return c=Te("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=qH(p),_=new oI;return Object.assign(_,y),_})}else{const f=FH(this.apiClient,e);return c=Te("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=zH(p),_=new oI;return Object.assign(_,y),_})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=ZH(this.apiClient,e);return c=Te("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=tG(p),_=new aI;return Object.assign(_,y),_})}else{const f=QH(this.apiClient,e);return c=Te("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=eG(p),_=new aI;return Object.assign(_,y),_})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=VH(this.apiClient,e);return o=Te("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=LH(d),p=new G9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=ZG(this.apiClient,e);return o=Te("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=e8(d),p=new j9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=kG(this.apiClient,e);return o=Te("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=VG(d),p=new $9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=zG(this.apiClient,e);return o=Te("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=qG(d),p=new K9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=yG(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>i_(p))}else{const f=vG(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>n_(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=CG(this.apiClient,e);return c=Te("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=RG(p),_=new lI;return Object.assign(_,y),_})}else{const f=AG(this.apiClient,e);return c=Te("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=IG(p),_=new lI;return Object.assign(_,y),_})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=XG(this.apiClient,e);return c=Te("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>i_(p))}else{const f=WG(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>n_(p))}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=DH(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=PH(p),_=new uI;return Object.assign(_,y),_})}else{const f=NH(this.apiClient,e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=MH(p),_=new uI;return Object.assign(_,y),_})}}async countTokens(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=CH(this.apiClient,e);return c=Te("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=RH(p),_=new cI;return Object.assign(_,y),_})}else{const f=AH(this.apiClient,e);return c=Te("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=IH(p),_=new cI;return Object.assign(_,y),_})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=_H(this.apiClient,e);return o=Te("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=TH(d),p=new Y9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=aG(this.apiClient,e);return c=Te("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const y=sG(p),_=new mm;return Object.assign(_,y),_})}else{const f=oG(this.apiClient,e);return c=Te("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const y=rG(p),_=new mm;return Object.assign(_,y),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K8 extends Ys{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=U9(e);return c=Te("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=O9(e);return c=Te("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=N9(e);return o=Te("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y8(t){const e={},n=m(t,["data"]);if(n!=null&&v(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function J8(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>rj(o))),v(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&v(e,["role"],i),e}function W8(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&v(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&v(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&v(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&v(n,["bidiGenerateContentSetup"],ij(t,c));const d=m(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&v(n,["fieldMask"],d),i}function X8(t,e){const n={},i=m(e,["config"]);return i!=null&&v(n,["config"],W8(t,i,n)),n}function Q8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Z8(t){const e={},n=m(t,["id"]);n!=null&&v(e,["id"],n);const i=m(t,["args"]);i!=null&&v(e,["args"],i);const r=m(t,["name"]);if(r!=null&&v(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ej(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function tj(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function nj(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&v(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","seed"],p);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&v(e,["setup","generationConfig","speechConfig"],nE(y));const _=m(t,["thinkingConfig"]);e!==void 0&&_!=null&&v(e,["setup","generationConfig","thinkingConfig"],_);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=m(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],J8(li(A)));const I=m(t,["tools"]);if(e!==void 0&&I!=null){let H=Ku(I);Array.isArray(H)&&(H=H.map(D=>oj($u(D)))),v(e,["setup","tools"],H)}const R=m(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],sj(R));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&v(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","outputAudioTranscription"],k);const O=m(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&v(e,["setup","realtimeInputConfig"],O);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&v(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);if(e!==void 0&&K!=null&&v(e,["setup","proactivity"],K),m(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ij(t,e){const n={},i=m(e,["model"]);i!=null&&v(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&v(n,["config"],nj(r,n)),n}function rj(t){const e={},n=m(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&v(e,["fileData"],Q8(o));const l=m(t,["functionCall"]);l!=null&&v(e,["functionCall"],Z8(l));const c=m(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&v(e,["inlineData"],Y8(d));const f=m(t,["text"]);f!=null&&v(e,["text"],f);const p=m(t,["thought"]);p!=null&&v(e,["thought"],p);const y=m(t,["thoughtSignature"]);y!=null&&v(e,["thoughtSignature"],y);const _=m(t,["videoMetadata"]);return _!=null&&v(e,["videoMetadata"],_),e}function sj(t){const e={},n=m(t,["handle"]);if(n!=null&&v(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oj(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>y)),v(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&v(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&v(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&v(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&v(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],ej(c));const d=m(t,["googleSearch"]);d!=null&&v(e,["googleSearch"],tj(d));const f=m(t,["urlContext"]);return f!=null&&v(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aj(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function lj(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=aj(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class uj extends Ys{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=X8(this.apiClient,e);o=Te("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=lj(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cj(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function dj(t){const e={},n=m(t,["name"]);n!=null&&v(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&cj(i,e),e}function fj(t){const e={},n=m(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function hj(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function pj(t){const e={},n=m(t,["parent"]);n!=null&&v(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&hj(i,e),e}function mj(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),v(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gj extends Ys{constructor(e){super(),this.apiClient=e,this.list=async n=>new fl($s.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fj(e);return o=Te("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dj(e);r=Te("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pj(e);return o=Te("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=mj(d),p=new J9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vj extends Ys{constructor(e,n=new gj(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new fl($s.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=a8(e);return o=Te("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c8(e);return o=Te("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=u8(e);r=Te("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=g8(e);return o=Te("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=v8(d),p=new W9;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=y8(e);return o=Te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=_8(d),p=new X9;return Object.assign(p,f),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=h8(e);return o=Te("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=f8(d),p=new XT;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fP=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return fP=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const yj=()=>fP();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s_(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const o_=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xr extends Error{}class xi extends xr{constructor(e,n,i,r){super(`${xi.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new mg({message:i,cause:o_(n)});const o=n;return e===400?new pP(e,o,i,r):e===401?new mP(e,o,i,r):e===403?new gP(e,o,i,r):e===404?new vP(e,o,i,r):e===409?new yP(e,o,i,r):e===422?new _P(e,o,i,r):e===429?new TP(e,o,i,r):e>=500?new EP(e,o,i,r):new xi(e,o,i,r)}}class a_ extends xi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class mg extends xi{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class hP extends mg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pP extends xi{}class mP extends xi{}class gP extends xi{}class vP extends xi{}class yP extends xi{}class _P extends xi{}class TP extends xi{}class EP extends xi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _j=/^[a-z][a-z0-9+.-]*:/i,Tj=t=>_j.test(t);let l_=t=>(l_=Array.isArray,l_(t));const Ej=l_;let Sj=Ej;const MI=Sj;function bj(t){if(!t)return!0;for(const e in t)return!1;return!0}function wj(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const xj=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xr(`${t} must be an integer`);if(e<0)throw new xr(`${t} must be a positive integer`);return e},Aj=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cj=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ou="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ij(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Rj=()=>{var t,e,n,i,r;const o=Ij();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ou,"X-Stainless-OS":kI(Deno.build.os),"X-Stainless-Arch":PI(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ou,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ou,"X-Stainless-OS":kI((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":PI((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const l=Nj();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ou,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ou,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Nj(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:e,version:`${r}.${o}.${l}`}}}return null}const PI=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",kI=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Zh;const Dj=()=>Zh??(Zh=Rj());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mj(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function SP(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Pj(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return SP({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function bP(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kj(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vj=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wP=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Wy(t,e,n){return wP(),new File(t,e??"unknown_file",n)}function Lj(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Oj=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xP=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Uj=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xP(t),Fj=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Bj(t,e,n){if(wP(),t=await t,Uj(t))return t instanceof File?t:Wy([await t.arrayBuffer()],t.name);if(Fj(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Wy(await u_(r),e,n)}const i=await u_(t);if(e||(e=Lj(t)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Wy(i,e,n)}async function u_(t){var e,n,i,r,o;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(xP(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(Oj(t))try{for(var c=!0,d=Gr(t),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const p=r;l.push(...await u_(p))}}catch(p){n={error:p}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const p=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${p?`; constructor: ${p}`:""}${zj(t)}`)}return l}function zj(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AP{constructor(e){this._client=e}}AP._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CP(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const VI=Object.freeze(Object.create(null)),qj=(t=CP)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],l=n.reduce((p,y,_)=>{var b,A,I;/[?#]/.test(y)&&(r=!0);const R=i[_];let V=(r?encodeURIComponent:t)(""+R);return _!==i.length&&(R==null||typeof R=="object"&&R.toString===((I=Object.getPrototypeOf((A=Object.getPrototypeOf((b=R.hasOwnProperty)!==null&&b!==void 0?b:VI))!==null&&A!==void 0?A:VI))===null||I===void 0?void 0:I.toString))&&(V=R+"",o.push({start:p.length+y.length,length:V.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),p+y+(_===i.length?"":V)},""),c=l.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=d.exec(c))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((p,y)=>p.start-y.start),o.length>0){let p=0;const y=o.reduce((_,b)=>{const A=" ".repeat(b.start-p),I="^".repeat(b.length);return p=b.start+b.length,_+A+I},"");throw new xr(`Path parameters result in path with invalid segments:
${o.map(_=>_.error).join(`
`)}
${l}
${y}`)}return l}),ep=qj(CP);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IP extends AP{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=vm(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new xr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new xr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ep`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(ep`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(ep`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:l=this._client.apiVersion}=o,c=vm(o,["api_version"]);return this._client.get(ep`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}IP._key=Object.freeze(["interactions"]);class RP extends IP{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hj(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let tp;function rE(t){let e;return(tp??(e=new globalThis.TextEncoder,tp=e.encode.bind(e)))(t)}let np;function LI(t){let e;return(np??(e=new globalThis.TextDecoder,np=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gg{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?rE(e):e;this.buffer=Hj([this.buffer,n]);const i=[];let r;for(;(r=Gj(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(LI(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,l=LI(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}gg.NEWLINE_CHARS=new Set([`
`,"\r"]);gg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Gj(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function jj(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ym={off:0,error:200,warn:300,info:400,debug:500},OI=(t,e,n)=>{if(t){if(wj(ym,t))return t;bi(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ym))}`)}};function ud(){}function ip(t,e,n){return!e||ym[t]>ym[n]?ud:e[t].bind(e)}const $j={error:ud,warn:ud,info:ud,debug:ud};let UI=new WeakMap;function bi(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return $j;const r=UI.get(n);if(r&&r[0]===i)return r[1];const o={error:ip("error",n,i),warn:ip("warn",n,i),info:ip("info",n,i),debug:ip("debug",n,i)};return UI.set(n,[i,o]),o}const za=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uu{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?bi(i):console;function l(){return Hr(this,arguments,function*(){var d,f,p,y;if(r)throw new xr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var b=!0,A=Gr(Kj(e,n)),I;I=yield Ge(A.next()),d=I.done,!d;b=!0){y=I.value,b=!1;const R=y;if(!_)if(R.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield Ge(JSON.parse(R.data))}catch(V){throw o.error("Could not parse message into JSON:",R.data),o.error("From chunk:",R.raw),V}}}catch(R){f={error:R}}finally{try{!b&&!d&&(p=A.return)&&(yield Ge(p.call(A)))}finally{if(f)throw f.error}}_=!0}catch(R){if(s_(R))return yield Ge(void 0);throw R}finally{_||n.abort()}})}return new uu(l,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Hr(this,arguments,function*(){var d,f,p,y;const _=new gg,b=bP(e);try{for(var A=!0,I=Gr(b),R;R=yield Ge(I.next()),d=R.done,!d;A=!0){y=R.value,A=!1;const V=y;for(const k of _.decode(V))yield yield Ge(k)}}catch(V){f={error:V}}finally{try{!A&&!d&&(p=I.return)&&(yield Ge(p.call(I)))}finally{if(f)throw f.error}}for(const V of _.flush())yield yield Ge(V)})}function l(){return Hr(this,arguments,function*(){var d,f,p,y;if(r)throw new xr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var b=!0,A=Gr(o()),I;I=yield Ge(A.next()),d=I.done,!d;b=!0){y=I.value,b=!1;const R=y;_||R&&(yield yield Ge(JSON.parse(R)))}}catch(R){f={error:R}}finally{try{!b&&!d&&(p=A.return)&&(yield Ge(p.call(A)))}finally{if(f)throw f.error}}_=!0}catch(R){if(s_(R))return yield Ge(void 0);throw R}finally{_||n.abort()}})}return new uu(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const l=i.next();e.push(l),n.push(l)}return o.shift()}});return[new uu(()=>r(e),this.controller,this.client),new uu(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return SP({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const l=rE(JSON.stringify(r)+`
`);i.enqueue(l)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function Kj(t,e){return Hr(this,arguments,function*(){var i,r,o,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xr("Attempted to iterate over a response with no body");const c=new Jj,d=new gg,f=bP(t.body);try{for(var p=!0,y=Gr(Yj(f)),_;_=yield Ge(y.next()),i=_.done,!i;p=!0){l=_.value,p=!1;const b=l;for(const A of d.decode(b)){const I=c.decode(A);I&&(yield yield Ge(I))}}}catch(b){r={error:b}}finally{try{!p&&!i&&(o=y.return)&&(yield Ge(o.call(y)))}finally{if(r)throw r.error}}for(const b of d.flush()){const A=c.decode(b);A&&(yield yield Ge(A))}})}function Yj(t){return Hr(this,arguments,function*(){var n,i,r,o;let l=new Uint8Array;try{for(var c=!0,d=Gr(t),f;f=yield Ge(d.next()),n=f.done,!n;c=!0){o=f.value,c=!1;const p=o;if(p==null)continue;const y=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?rE(p):p;let _=new Uint8Array(l.length+y.length);_.set(l),_.set(y,l.length),l=_;let b;for(;(b=jj(l))!==-1;)yield yield Ge(l.slice(0,b)),l=l.slice(b)}}catch(p){i={error:p}}finally{try{!c&&!n&&(r=d.return)&&(yield Ge(r.call(d)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Ge(l))})}class Jj{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=Wj(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function Wj(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xj(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,l=await(async()=>{var c;if(e.options.stream)return bi(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):uu.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),f=(c=d==null?void 0:d.split(";")[0])===null||c===void 0?void 0:c.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return bi(t).debug(`[${i}] response parsed`,za({retryOfRequestLogID:r,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sE extends Promise{constructor(e,n,i=Xj){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new sE(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NP=Symbol("brand.privateNullableHeaders");function*Qj(t){if(!t)return;if(NP in t){const{values:i,nulls:r}=t;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():MI(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=MI(i[1])?i[1]:[i[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const Xy=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[o,l]of Qj(i)){const c=o.toLowerCase();r.has(c)||(e.delete(o),r.add(c)),l===null?(e.delete(o),n.add(c)):(e.append(o,l),n.delete(c))}}return{[NP]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qy=t=>{var e,n,i,r,o,l;if(typeof globalThis.process<"u")return(i=(n=(e=w9)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DP;class vg{constructor(e){var n,i,r,o,l,c,d,f=e===void 0?{}:e,{baseURL:p=Qy("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Qy("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=f,b=vm(f,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:y,apiVersion:_},b),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(i=A.timeout)!==null&&i!==void 0?i:vg.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const I="warn";this.logLevel=I,this.logLevel=(l=(o=OI(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:OI(Qy("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:I,this.fetchOptions=A.fetchOptions,this.maxRetries=(c=A.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(d=A.fetch)!==null&&d!==void 0?d:Mj(),this.encoder=Vj,this._options=A,this.apiKey=y,this.apiVersion=_}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Xy([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new xr(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ou}`}defaultIdempotencyKey(){return`stainless-node-retry-${yj()}`}makeStatusError(e,n,i,r){return xi.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=Tj(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return bj(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new sE(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,l;const c=await e,d=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(c);const{req:f,url:p,timeout:y}=await this.buildRequest(c,{retryCount:d-n});await this.prepareRequest(f,{url:p,options:c});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=i===void 0?"":`, retryOf: ${i}`,A=Date.now();if(bi(this).debug(`[${_}] sending request`,za({retryOfRequestLogID:i,method:c.method,url:p,options:c,headers:f.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new a_;const I=new AbortController,R=await this.fetchWithTimeout(p,f,y,I).catch(o_),V=Date.now();if(R instanceof globalThis.Error){const O=`retrying, ${n} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new a_;const G=s_(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(n)return bi(this).info(`[${_}] connection ${G?"timed out":"failed"} - ${O}`),bi(this).debug(`[${_}] connection ${G?"timed out":"failed"} (${O})`,za({retryOfRequestLogID:i,url:p,durationMs:V-A,message:R.message})),this.retryRequest(c,n,i??_);throw bi(this).info(`[${_}] connection ${G?"timed out":"failed"} - error; no more retries left`),bi(this).debug(`[${_}] connection ${G?"timed out":"failed"} (error; no more retries left)`,za({retryOfRequestLogID:i,url:p,durationMs:V-A,message:R.message})),G?new hP:new mg({cause:R})}const k=`[${_}${b}] ${f.method} ${p} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${V-A}ms`;if(!R.ok){const O=await this.shouldRetry(R);if(n&&O){const M=`retrying, ${n} attempts remaining`;return await kj(R.body),bi(this).info(`${k} - ${M}`),bi(this).debug(`[${_}] response error (${M})`,za({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,durationMs:V-A})),this.retryRequest(c,n,i??_,R.headers)}const G=O?"error; no more retries left":"error; not retryable";bi(this).info(`${k} - ${G}`);const K=await R.text().catch(M=>o_(M).message),H=Aj(K),D=H?void 0:K;throw bi(this).debug(`[${_}] response error (${G})`,za({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,message:D,durationMs:Date.now()-A})),this.makeStatusError(R.status,H,D,R.headers)}return bi(this).info(k),bi(this).debug(`[${_}] response start`,za({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,durationMs:V-A})),{response:R,options:c,controller:I,requestLogID:_,retryOfRequestLogID:i,startTime:A}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:l,method:c}=o,d=vm(o,["signal","method"]);l&&l.addEventListener("abort",()=>r.abort());const f=setTimeout(()=>r.abort(),i),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,y=Object.assign(Object.assign(Object.assign({signal:r.signal},p?{duplex:"half"}:{}),{method:"GET"}),d);c&&(y.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,y)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let l;const c=r==null?void 0:r.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const d=r==null?void 0:r.get("retry-after");if(d&&!l){const f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Cj(l),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const l=Object.assign({},e),{method:c,path:d,query:f,defaultBaseURL:p}=l,y=this.buildURL(d,f,p);"timeout"in l&&xj("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:_,body:b}=this.buildBody({options:l}),A=await this.buildHeaders({options:e,method:c,bodyHeaders:_,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:A},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=Xy([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Dj()),await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Xy([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Pj(e)}:this.encoder({body:e,headers:i})}}vg.DEFAULT_TIMEOUT=6e4;class zn extends vg{constructor(){super(...arguments),this.interactions=new RP(this)}}DP=zn;zn.GeminiNextGenAPIClient=DP;zn.GeminiNextGenAPIClientError=xr;zn.APIError=xi;zn.APIConnectionError=mg;zn.APIConnectionTimeoutError=hP;zn.APIUserAbortError=a_;zn.NotFoundError=vP;zn.ConflictError=yP;zn.RateLimitError=TP;zn.BadRequestError=pP;zn.AuthenticationError=mP;zn.InternalServerError=EP;zn.PermissionDeniedError=gP;zn.UnprocessableEntityError=_P;zn.toFile=Bj;zn.Interactions=RP;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zj(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function e7(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function t7(t,e){const n={},i=m(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function n7(t,e){const n={},i=m(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function i7(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&v(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&v(e,["tuningTask","hyperparameters","batchSize"],c);const d=m(t,["learningRate"]);if(e!==void 0&&d!=null&&v(e,["tuningTask","hyperparameters","learningRate"],d),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function r7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&v(e,["supervisedTuningSpec"],FI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&v(e,["preferenceOptimizationSpec"],FI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&v(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&v(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&v(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=m(t,["labels"]);e!==void 0&&y!=null&&v(e,["labels"],y);const _=m(t,["beta"]);return e!==void 0&&_!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),i}function s7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&g7(o);const l=m(t,["config"]);return l!=null&&i7(l,n),n}function o7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&v7(o,n,e);const l=m(t,["config"]);return l!=null&&r7(l,n,e),n}function a7(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function l7(t,e){const n={},i=m(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function u7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&v(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&v(e,["_query","filter"],l),i}function c7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&v(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&v(e,["_query","filter"],l),i}function d7(t,e){const n={},i=m(t,["config"]);return i!=null&&u7(i,n),n}function f7(t,e){const n={},i=m(t,["config"]);return i!=null&&c7(i,n),n}function h7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>MP(c))),v(n,["tuningJobs"],l)}return n}function p7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c_(c))),v(n,["tuningJobs"],l)}return n}function m7(t,e){const n={},i=m(t,["name"]);i!=null&&v(n,["model"],i);const r=m(t,["name"]);return r!=null&&v(n,["endpoint"],r),n}function g7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),v(n,["examples","examples"],r)}return n}function v7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function MP(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&v(n,["name"],r);const o=m(t,["state"]);o!=null&&v(n,["state"],$M(o));const l=m(t,["createTime"]);l!=null&&v(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&v(n,["startTime"],c);const d=m(t,["tuningTask","completeTime"]);d!=null&&v(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&v(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&v(n,["description"],p);const y=m(t,["baseModel"]);y!=null&&v(n,["baseModel"],y);const _=m(t,["_self"]);return _!=null&&v(n,["tunedModel"],m7(_)),n}function c_(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&v(n,["name"],r);const o=m(t,["state"]);o!=null&&v(n,["state"],$M(o));const l=m(t,["createTime"]);l!=null&&v(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&v(n,["startTime"],c);const d=m(t,["endTime"]);d!=null&&v(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&v(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&v(n,["error"],p);const y=m(t,["description"]);y!=null&&v(n,["description"],y);const _=m(t,["baseModel"]);_!=null&&v(n,["baseModel"],_);const b=m(t,["tunedModel"]);b!=null&&v(n,["tunedModel"],b);const A=m(t,["preTunedModel"]);A!=null&&v(n,["preTunedModel"],A);const I=m(t,["supervisedTuningSpec"]);I!=null&&v(n,["supervisedTuningSpec"],I);const R=m(t,["preferenceOptimizationSpec"]);R!=null&&v(n,["preferenceOptimizationSpec"],R);const V=m(t,["tuningDataStats"]);V!=null&&v(n,["tuningDataStats"],V);const k=m(t,["encryptionSpec"]);k!=null&&v(n,["encryptionSpec"],k);const O=m(t,["partnerModelTuningSpec"]);O!=null&&v(n,["partnerModelTuningSpec"],O);const G=m(t,["customBaseModel"]);G!=null&&v(n,["customBaseModel"],G);const K=m(t,["experiment"]);K!=null&&v(n,["experiment"],K);const H=m(t,["labels"]);H!=null&&v(n,["labels"],H);const D=m(t,["outputUri"]);D!=null&&v(n,["outputUri"],D);const N=m(t,["pipelineJob"]);N!=null&&v(n,["pipelineJob"],N);const M=m(t,["serviceAccount"]);M!=null&&v(n,["serviceAccount"],M);const B=m(t,["tunedModelDisplayName"]);B!=null&&v(n,["tunedModelDisplayName"],B);const q=m(t,["veoTuningSpec"]);return q!=null&&v(n,["veoTuningSpec"],q),n}function y7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&v(n,["name"],r);const o=m(t,["metadata"]);o!=null&&v(n,["metadata"],o);const l=m(t,["done"]);l!=null&&v(n,["done"],l);const c=m(t,["error"]);return c!=null&&v(n,["error"],c),n}function FI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&v(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&v(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _7 extends Ys{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fl($s.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:Q0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=l7(e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>c_(p))}else{const f=a7(e);return c=Te("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>MP(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=f7(e);return c=Te("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=p7(p),_=new dI;return Object.assign(_,y),_})}else{const f=d7(e);return c=Te("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=h7(p),_=new dI;return Object.assign(_,y),_})}}async cancel(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=e7(e);return c=Te("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=n7(p),_=new fI;return Object.assign(_,y),_})}else{const f=Zj(e);return c=Te("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const _=y;return _.sdkHttpResponse={headers:p.headers},_})),l.then(p=>{const y=t7(p),_=new fI;return Object.assign(_,y),_})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=o7(e,e);return o=Te("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>c_(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=s7(e);return o=Te("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>y7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const E7=1024*1024*8,S7=3,b7=1e3,w7=2,_m="x-goog-upload-status";async function x7(t,e,n){var i;const r=await PP(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[_m])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function A7(t,e,n){var i;const r=await PP(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[_m])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=BM(o),c=new QT;return Object.assign(c,l),c}async function PP(t,e,n){var i,r;let o=0,l=0,c=new Z0(new Response),d="upload";for(o=t.size;l<o;){const f=Math.min(E7,o-l),p=t.slice(l,l+f);l+f>=o&&(d+=", finalize");let y=0,_=b7;for(;y<S7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[_m]));)y++,await I7(_),_=_*w7;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[_m])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function C7(t){return{size:t.size,type:t.type}}function I7(t){return new Promise(e=>setTimeout(e,t))}class R7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await x7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N7{create(e,n,i){return new D7(e,n,i)}}class D7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BI="x-goog-api-key";class M7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(BI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(BI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P7="gl-node/";class k7{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new zn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=I9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new M7(this.apiKey);this.apiClient=new C8({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:P7+"web",uploader:new R7,downloader:new T7}),this.models=new $8(this.apiClient),this.live=new B8(this.apiClient,r,new N7),this.batches=new iq(this.apiClient),this.chats=new Uq(this.models,this.apiClient),this.caches=new Vq(this.apiClient),this.files=new Yq(this.apiClient),this.operations=new K8(this.apiClient),this.authTokens=new uj(this.apiClient),this.tunings=new _7(this.apiClient),this.fileSearchStores=new vj(this.apiClient)}}const kP={geminiApiKey:"AIzaSyBnjUoCnyD2YCEyOglN5QzMGduSkDstBgo",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},yg=new k7({apiKey:kP.geminiApiKey});function _g(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function V7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await yg.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{items:{type:je.ARRAY,items:{type:je.OBJECT,properties:{analysis:{type:je.STRING},category:{type:je.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:je.STRING},material:{type:je.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=_g(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function L7(t,e,n,i){const r=new Set((e||[]).flatMap(_=>_.itemIds)),l=t.filter(_=>!r.has(_.id)).map(_=>`- ${_.analysis} (ID: ${_.id}, Cat: ${_.category}, Matire: ${_.material})`).join(`
`),c=e.map(_=>`- ${_.name} (Ensemble, ID: ${_.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),f=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses pour : "${n}".

Vtements disponibles :
${d}
${f}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 looks visuellement diffrents
- vite de rpter le mme pantalon 3 fois si possible


 ACCESSOIRES (recommands mais optionnels)


- Montre/bracelet si disponible
- Ceinture pour pantalon classique
- charpe si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Sois cratif dans les limites.`,y=await yg.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{tenues:{type:je.ARRAY,items:{type:je.OBJECT,properties:{titre:{type:je.STRING},description:{type:je.STRING},vetements:{type:je.ARRAY,items:{type:je.OBJECT,properties:{id:{type:je.STRING},description:{type:je.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const _=_g(y);return JSON.parse(_).tenues}catch(_){throw console.error("Erreur parsing Gemini:",_),new Error("Rponse malforme.")}}async function O7(t,e){const n={Hauts:t.filter(f=>f.category==="Hauts"),Bas:t.filter(f=>f.category==="Bas"),Chaussures:t.filter(f=>f.category==="Chaussures"),Accessoires:t.filter(f=>f.category==="Accessoires")},i=Object.entries(n).map(([f,p])=>`**${f}** (${p.length}) :
${p.map(y=>`  - ${y.analysis} (${y.color}, ${y.material})`).join(`
`)}`).join(`

`),r=t.length,o=e.length>0,l=`Tu es un expert styliste et conseiller en garde-robe avec 20 ans d'exprience. Ta mission : analyser cette garde-robe et suggrer des achats stratgiques pour maximiser la polyvalence.

 **INVENTAIRE ACTUEL** (${r} pices${o?`, ${e.length} ensembles`:""}) :

${i}

---

 **OBJECTIF DE L'ANALYSE** :
Identifier les **pices manquantes cls** qui permettront de crer le maximum de tenues diffrentes avec l'existant.

 **MTHODOLOGIE** :

1. **ANALYSE STRATGIQUE** :
   - quilibre entre catgories (ratio Hauts/Bas/Chaussures)
   - Diversit des couleurs (neutres vs. vives)
   - Polyvalence des pices existantes
   - Occasions couvertes (casual, formel, sport, etc.)
   - Saisons couvertes

2. **IDENTIFICATION DES GAPS CRITIQUES** :
   - Pices basiques manquantes (ex: chemise blanche, jean brut)
   - Couleurs absentes pour complter les palettes
   - Styles/occasions non couverts
   - Opportunits de layering (superposition)

3. **PRIORISATION** :
   - **HIGH** : Pice essentielle manquante qui dbloque 5+ nouvelles tenues
   - **MEDIUM** : Pice utile qui ajoute de la varit (3-5 tenues)
   - **LOW** : Pice "nice-to-have" pour occasions spcifiques

4. **SUGGESTIONS D'ACHATS** (4-6 pices maximum) :
   - Focus sur la **POLYVALENCE** : chaque suggestion doit se marier avec plusieurs pices existantes
   - Inclure des **pices basiques intemporelles** avant les tendances
   - quilibrer les priorits (au moins 1-2 high priority)
   - Pour chaque suggestion, fournis :
     * Une description prcise (ex: "Chemise oxford bleu clair en coton")
     * La raison stratgique (ex: "Se marie avec vos 3 pantalons et cre une base smart-casual")
     * Un prix estim raliste en 
     * Une requte de recherche optimise (mots-cls pour Zalando/autres boutiques)

---

 **RGLES CRITIQUES** :

- NE suggre PAS de pices similaires  l'existant
- Favorise les neutres (blanc, noir, beige, navy) pour maximiser les combinaisons
- vite les pices trs spcifiques/occasionnelles (sauf si totalement absentes)
- Sois concis mais prcis dans les descriptions
- Le champ \`searchQuery\` doit contenir des mots-cls optimiss pour recherche en ligne (ex: "chemise oxford homme coton bleu clair" ou "pull col V mrinos noir homme")

Retourne ton analyse au format JSON.`,c=await yg.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{summary:{type:je.STRING,description:"Rsum global de l'analyse en 2-3 phrases"},strengths:{type:je.ARRAY,items:{type:je.STRING},description:"2-3 points forts de la garde-robe actuelle"},gaps:{type:je.ARRAY,items:{type:je.STRING},description:"2-4 gaps/opportunits d'amlioration identifis"},suggestions:{type:je.ARRAY,items:{type:je.OBJECT,properties:{category:{type:je.STRING,description:"Catgorie du vtement suggr"},description:{type:je.STRING,description:"Description prcise du vtement suggr (style, couleur, matire)"},reason:{type:je.STRING,description:"Pourquoi cette pice est stratgique (combien de tenues elle permet)"},priority:{type:je.STRING,enum:["high","medium","low"],description:"Niveau de priorit bas sur l'impact"},estimatedPrice:{type:je.STRING,description:"Fourchette de prix estime (ex: '50-80')"},searchQuery:{type:je.STRING,description:"Mots-cls optimiss pour recherche en boutique en ligne"}},required:["category","description","reason","priority","estimatedPrice","searchQuery"]},description:"4-6 suggestions d'achats priorises"}},required:["summary","strengths","gaps","suggestions"]}}}),d=_g(c);return JSON.parse(d)}async function U7(t,e,n,i,r){const o=new Set((e||[]).flatMap(A=>A.itemIds)),c=t.filter(A=>!o.has(A.id)).map(A=>`- ${A.analysis} (ID: ${A.id}, Cat: ${A.category}, Couleur: ${A.color}, Matire: ${A.material})`).join(`
`),d=e.map(A=>`- ${A.name} (Ensemble, ID: ${A.id})`).join(`
`),f=[c,d].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${r} kg. Estime le poids moyen (t-shirt ~150g, jean ~600g, pull ~400g, chaussures ~800g).`:"",y=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`,_=await yg.models.generateContent({model:"gemini-2.5-flash",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{titre:{type:je.STRING},resume:{type:je.STRING},valise:{type:je.ARRAY,items:{type:je.OBJECT,properties:{id:{type:je.STRING},description:{type:je.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=_g(_);return JSON.parse(b)}const F7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),B7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),d_=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),z7=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Yd=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),oE=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),zI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),VP=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),q7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),H7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),G7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),j7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),wd=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),$7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Tg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),aE=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),K7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),LP=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),Tm=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Mu=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),OP=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),UP=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),Y7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(B7,{}):S.jsx(F7,{})})]})]})}),J7="DRESSMEUP2025",qI=({user:t})=>{var G,K,H;const[e,n]=z.useState(""),[i,r]=z.useState(""),[o,l]=z.useState(""),[c,d]=z.useState(!1),[f,p]=z.useState(!1),[y,_]=z.useState(null),[b,A]=z.useState(!1),I=z.useRef(null);z.useEffect(()=>{const D=N=>{I.current&&!I.current.contains(N.target)&&p(!1)};return f&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[f]);const R=async D=>{try{return(await lB(ju(sr,"allowedEmails",D.toLowerCase()))).exists()}catch(N){return console.error("Erreur vrification email:",N),!1}},V=async()=>{A(!0),_(null);try{const N=(await i3(Ba,b9)).user.email;if(!N){await qy(Ba),_("Impossible de rcuprer l'email du compte Google.");return}if(!await R(N)){await qy(Ba),_("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(D){console.error("Erreur de connexion Google:",D),_(D.message||"Erreur de connexion")}finally{A(!1)}},k=async D=>{D.preventDefault(),A(!0),_(null);try{if(c){if(o!==J7){_("Code d'invitation invalide."),A(!1);return}if(!await R(e)){_("Votre email n'est pas dans la liste des beta testeurs."),A(!1);return}await PU(Ba,e,i)}else{if(!await R(e)){_("Votre email n'est pas autoris  accder  la beta."),A(!1);return}await kU(Ba,e,i)}}catch(N){console.error("Erreur d'authentification:",N),N.code==="auth/user-not-found"?_("Aucun compte trouv avec cet email."):N.code==="auth/wrong-password"?_("Mot de passe incorrect."):N.code==="auth/email-already-in-use"?_("Cet email est dj utilis."):N.code==="auth/weak-password"?_("Le mot de passe doit contenir au moins 6 caractres."):_(N.message||"Erreur d'authentification")}finally{A(!1)}},O=async()=>{try{await qy(Ba)}catch(D){console.error("Erreur de dconnexion:",D)}};return t?S.jsxs("div",{className:"relative",ref:I,children:[S.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((G=t.displayName)==null?void 0:G[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((H=t.email)==null?void 0:H.split("@")[0])})]}),f&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:O,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),y&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:y}),S.jsx("button",{onClick:V,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:D=>n(D.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:D=>r(D.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:D=>l(D.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{d(!c),_(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},lE=z.createContext({});function uE(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const Eg=z.createContext(null),cE=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class W7 extends z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function X7({children:t,isPresent:e}){const n=z.useId(),i=z.useRef(null),r=z.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=z.useContext(cE);return z.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(W7,{isPresent:e,childRef:i,sizeRef:r,children:z.cloneElement(t,{ref:i})})}const Q7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=uE(Z7),d=z.useId(),f=z.useCallback(y=>{c.set(y,!0);for(const _ of c.values())if(!_)return;i&&i()},[c,i]),p=z.useMemo(()=>({id:d,initial:e,isPresent:n,custom:r,onExitComplete:f,register:y=>(c.set(y,!1),()=>c.delete(y))}),o?[Math.random(),f]:[n,f]);return z.useMemo(()=>{c.forEach((y,_)=>c.set(_,!1))},[n]),z.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(X7,{isPresent:n,children:t})),S.jsx(Eg.Provider,{value:p,children:t})};function Z7(){return new Map}function FP(t=!0){const e=z.useContext(Eg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=z.useId();z.useEffect(()=>{t&&r(o)},[t]);const l=z.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const rp=t=>t.key||"";function HI(t){const e=[];return z.Children.forEach(t,n=>{z.isValidElement(n)&&e.push(n)}),e}const dE=typeof window<"u",BP=dE?z.useLayoutEffect:z.useEffect,e$=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=FP(l),f=z.useMemo(()=>HI(t),[t]),p=l&&!c?[]:f.map(rp),y=z.useRef(!0),_=z.useRef(f),b=uE(()=>new Map),[A,I]=z.useState(f),[R,V]=z.useState(f);BP(()=>{y.current=!1,_.current=f;for(let G=0;G<R.length;G++){const K=rp(R[G]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[R,p.length,p.join("-")]);const k=[];if(f!==A){let G=[...f];for(let K=0;K<R.length;K++){const H=R[K],D=rp(H);p.includes(D)||(G.splice(K,0,H),k.push(H))}o==="wait"&&k.length&&(G=k),V(HI(G)),I(f);return}const{forceRender:O}=z.useContext(lE);return S.jsx(S.Fragment,{children:R.map(G=>{const K=rp(G),H=l&&!c?!1:f===R||p.includes(K),D=()=>{if(b.has(K))b.set(K,!0);else return;let N=!0;b.forEach(M=>{M||(N=!1)}),N&&(O==null||O(),V(_.current),l&&(d==null||d()),i&&i())};return S.jsx(Q7,{isPresent:H,initial:!y.current||n?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:H?void 0:D,children:G},K)})})},ir=t=>t;let zP=ir;function fE(t){let e;return()=>(e===void 0&&(e=t()),e)}const Pu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Bs=t=>t*1e3,zs=t=>t/1e3,t$={useManualTiming:!1};function n$(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,y=!1)=>{const b=y&&i?e:n;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const sp=["read","resolveKeyframes","update","preRender","render","postRender"],i$=40;function qP(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=sp.reduce((V,k)=>(V[k]=n$(o),V),{}),{read:c,resolveKeyframes:d,update:f,preRender:p,render:y,postRender:_}=l,b=()=>{const V=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(V-r.timestamp,i$),1),r.timestamp=V,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),y.process(r),_.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},A=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:sp.reduce((V,k)=>{const O=l[k];return V[k]=(G,K=!1,H=!1)=>(n||A(),O.schedule(G,K,H)),V},{}),cancel:V=>{for(let k=0;k<sp.length;k++)l[sp[k]].cancel(V)},state:r,steps:l}}const{schedule:$t,cancel:ta,state:Wn,steps:Zy}=qP(typeof requestAnimationFrame<"u"?requestAnimationFrame:ir,!0),HP=z.createContext({strict:!1}),GI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ku={};for(const t in GI)ku[t]={isEnabled:e=>GI[t].some(n=>!!e[n])};function r$(t){for(const e in t)ku[e]={...ku[e],...t[e]}}const s$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Em(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||s$.has(t)}let GP=t=>!Em(t);function o$(t){t&&(GP=e=>e.startsWith("on")?!Em(e):t(e))}try{o$(require("@emotion/is-prop-valid").default)}catch{}function a$(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(GP(r)||n===!0&&Em(r)||!e&&!Em(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function l$(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Sg=z.createContext({});function Jd(t){return typeof t=="string"||Array.isArray(t)}function bg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const hE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pE=["initial",...hE];function wg(t){return bg(t.animate)||pE.some(e=>Jd(t[e]))}function jP(t){return!!(wg(t)||t.variants)}function u$(t,e){if(wg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Jd(n)?n:void 0,animate:Jd(i)?i:void 0}}return t.inherit!==!1?e:{}}function c$(t){const{initial:e,animate:n}=u$(t,z.useContext(Sg));return z.useMemo(()=>({initial:e,animate:n}),[jI(e),jI(n)])}function jI(t){return Array.isArray(t)?t.join(" "):t}const d$=Symbol.for("motionComponentSymbol");function cu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function f$(t,e,n){return z.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):cu(n)&&(n.current=i))},[e])}const mE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),h$="framerAppearId",$P="data-"+mE(h$),{schedule:gE}=qP(queueMicrotask,!1),KP=z.createContext({});function p$(t,e,n,i,r){var o,l;const{visualElement:c}=z.useContext(Sg),d=z.useContext(HP),f=z.useContext(Eg),p=z.useContext(cE).reducedMotion,y=z.useRef(null);i=i||d.renderer,!y.current&&i&&(y.current=i(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const _=y.current,b=z.useContext(KP);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&m$(y.current,n,r,b);const A=z.useRef(!1);z.useInsertionEffect(()=>{_&&A.current&&_.update(n,f)});const I=n[$P],R=z.useRef(!!I&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,I))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,I)));return BP(()=>{_&&(A.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),gE.render(_.render),R.current&&_.animationState&&_.animationState.animateChanges())}),z.useEffect(()=>{_&&(!R.current&&_.animationState&&_.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,I)}),R.current=!1))}),_}function m$(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:YP(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&cu(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}function YP(t){if(t)return t.options.allowProjection!==!1?t.projection:YP(t.parent)}function g$({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&r$(t);function c(f,p){let y;const _={...z.useContext(cE),...f,layoutId:v$(f)},{isStatic:b}=_,A=c$(f),I=i(f,b);if(!b&&dE){y$();const R=_$(_);y=R.MeasureLayout,A.visualElement=p$(r,I,_,e,R.ProjectionNode)}return S.jsxs(Sg.Provider,{value:A,children:[y&&A.visualElement?S.jsx(y,{visualElement:A.visualElement,..._}):null,n(r,f,f$(I,A.visualElement,p),I,b,A.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const d=z.forwardRef(c);return d[d$]=r,d}function v$({layoutId:t}){const e=z.useContext(lE).id;return e&&t!==void 0?e+"-"+t:t}function y$(t,e){z.useContext(HP).strict}function _$(t){const{drag:e,layout:n}=ku;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const T$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vE(t){return typeof t!="string"||t.includes("-")?!1:!!(T$.indexOf(t)>-1||/[A-Z]/u.test(t))}function $I(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function yE(t,e,n,i){if(typeof e=="function"){const[r,o]=$I(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=$I(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const f_=t=>Array.isArray(t),E$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),S$=t=>f_(t)?t[t.length-1]||0:t,ui=t=>!!(t&&t.getVelocity);function Up(t){const e=ui(t)?t.get():t;return E$(e)?e.toValue():e}function b$({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:w$(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const JP=t=>(e,n)=>{const i=z.useContext(Sg),r=z.useContext(Eg),o=()=>b$(t,e,i,r);return n?o():uE(o)};function w$(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Up(o[_]);let{initial:l,animate:c}=t;const d=wg(t),f=jP(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const y=p?c:l;if(y&&typeof y!="boolean"&&!bg(y)){const _=Array.isArray(y)?y:[y];for(let b=0;b<_.length;b++){const A=yE(t,_[b]);if(A){const{transitionEnd:I,transition:R,...V}=A;for(const k in V){let O=V[k];if(Array.isArray(O)){const G=p?O.length-1:0;O=O[G]}O!==null&&(r[k]=O)}for(const k in I)r[k]=I[k]}}}return r}const Ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hl=new Set(Ju),WP=t=>e=>typeof e=="string"&&e.startsWith(t),XP=WP("--"),x$=WP("var(--"),_E=t=>x$(t)?A$.test(t.split("/*")[0].trim()):!1,A$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,QP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ks=(t,e,n)=>n>e?e:n<t?t:n,Wu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wd={...Wu,transform:t=>Ks(0,1,t)},op={...Wu,default:1},vf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Mo=vf("deg"),fs=vf("%"),Ue=vf("px"),C$=vf("vh"),I$=vf("vw"),KI={...fs,parse:t=>fs.parse(t)/100,transform:t=>fs.transform(t*100)},R$={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue},N$={rotate:Mo,rotateX:Mo,rotateY:Mo,rotateZ:Mo,scale:op,scaleX:op,scaleY:op,scaleZ:op,skew:Mo,skewX:Mo,skewY:Mo,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Wd,originX:KI,originY:KI,originZ:Ue},YI={...Wu,transform:Math.round},TE={...R$,...N$,zIndex:YI,size:Ue,fillOpacity:Wd,strokeOpacity:Wd,numOctaves:YI},D$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M$=Ju.length;function P$(t,e,n){let i="",r=!0;for(let o=0;o<M$;o++){const l=Ju[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=QP(c,TE[l]);if(!d){r=!1;const p=D$[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function EE(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const f=e[d];if(hl.has(d)){l=!0;continue}else if(XP(d)){r[d]=f;continue}else{const p=QP(f,TE[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(l||n?i.transform=P$(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const k$={offset:"stroke-dashoffset",array:"stroke-dasharray"},V$={offset:"strokeDashoffset",array:"strokeDasharray"};function L$(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?k$:V$;t[o.offset]=Ue.transform(-i);const l=Ue.transform(e),c=Ue.transform(n);t[o.array]=`${l} ${c}`}function JI(t,e,n){return typeof t=="string"?t:Ue.transform(e+n*t)}function O$(t,e,n){const i=JI(e,t.x,t.width),r=JI(n,t.y,t.height);return`${i} ${r}`}function SE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},p,y){if(EE(t,f,y),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:b,dimensions:A}=t;_.transform&&(A&&(b.transform=_.transform),delete _.transform),A&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=O$(A,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),i!==void 0&&(_.scale=i),l!==void 0&&L$(_,l,c,d,!1)}const bE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ZP=()=>({...bE(),attrs:{}}),wE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ek(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const tk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nk(t,e,n,i){ek(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(tk.has(r)?r:mE(r),e.attrs[r])}const Sm={};function U$(t){Object.assign(Sm,t)}function ik(t,{layout:e,layoutId:n}){return hl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sm[t]||t==="opacity")}function xE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(ui(r[l])||e.style&&ui(e.style[l])||ik(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function rk(t,e,n){const i=xE(t,e,n);for(const r in t)if(ui(t[r])||ui(e[r])){const o=Ju.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function F$(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const WI=["x","y","width","height","cx","cy","r"],B$={useVisualState:JP({scrapeMotionValuesFromProps:rk,createRenderState:ZP,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(hl.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<WI.length;c++){const d=WI[c];t[d]!==e[d]&&(l=!0)}l&&$t.read(()=>{F$(n,i),$t.render(()=>{SE(i,r,wE(n.tagName),t.transformTemplate),nk(n,i)})})}})},z$={useVisualState:JP({scrapeMotionValuesFromProps:xE,createRenderState:bE})};function sk(t,e,n){for(const i in e)!ui(e[i])&&!ik(i,n)&&(t[i]=e[i])}function q$({transformTemplate:t},e){return z.useMemo(()=>{const n=bE();return EE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function H$(t,e){const n=t.style||{},i={};return sk(i,n,t),Object.assign(i,q$(t,e)),i}function G$(t,e){const n={},i=H$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function j$(t,e,n,i){const r=z.useMemo(()=>{const o=ZP();return SE(o,e,wE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};sk(o,t.style,t),r.style={...o,...r.style}}return r}function $$(t=!1){return(n,i,r,{latestValues:o},l)=>{const d=(vE(n)?j$:G$)(i,o,l,n),f=a$(i,typeof n=="string",t),p=n!==z.Fragment?{...f,...d,ref:r}:{},{children:y}=i,_=z.useMemo(()=>ui(y)?y.get():y,[y]);return z.createElement(n,{...p,children:_})}}function K$(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...vE(i)?B$:z$,preloadedFeatures:t,useRender:$$(r),createVisualElement:e,Component:i};return g$(l)}}function ok(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function xg(t,e,n){const i=t.getProps();return yE(i,e,n!==void 0?n:i.custom,t)}const Y$=fE(()=>window.ScrollTimeline!==void 0);class J${constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(Y$()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class W$ extends J${then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function AE(t,e){return t?t[e]||t.default||t:void 0}const h_=2e4;function ak(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<h_;)e+=n,i=t.next(e);return e>=h_?1/0:e}function CE(t){return typeof t=="function"}function XI(t,e){t.timeline=e,t.onfinish=null}const IE=t=>Array.isArray(t)&&typeof t[0]=="number",X$={linearEasing:void 0};function Q$(t,e){const n=fE(t);return()=>{var i;return(i=X$[e])!==null&&i!==void 0?i:n()}}const bm=Q$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lk=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Pu(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function uk(t){return!!(typeof t=="function"&&bm()||!t||typeof t=="string"&&(t in p_||bm())||IE(t)||Array.isArray(t)&&t.every(uk))}const cd=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,p_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cd([0,.65,.55,1]),circOut:cd([.55,0,1,.45]),backIn:cd([.31,.01,.66,-.59]),backOut:cd([.33,1.53,.69,.99])};function ck(t,e){if(t)return typeof t=="function"&&bm()?lk(t,e):IE(t)?cd(t):Array.isArray(t)?t.map(n=>ck(n,e)||p_.easeOut):p_[t]}const Vr={x:!1,y:!1};function dk(){return Vr.x||Vr.y}function Z$(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function fk(t,e){const n=Z$(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function QI(t){return e=>{e.pointerType==="touch"||dk()||t(e)}}function eK(t,e,n={}){const[i,r,o]=fk(t,n),l=QI(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const p=QI(y=>{f(y),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const hk=(t,e)=>e?t===e?!0:hk(t,e.parentElement):!1,RE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,tK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nK(t){return tK.has(t.tagName)||t.tabIndex!==-1}const dd=new WeakSet;function ZI(t){return e=>{e.key==="Enter"&&t(e)}}function e0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iK=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=ZI(()=>{if(dd.has(n))return;e0(n,"down");const r=ZI(()=>{e0(n,"up")}),o=()=>e0(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function eR(t){return RE(t)&&!dk()}function rK(t,e,n={}){const[i,r,o]=fk(t,n),l=c=>{const d=c.currentTarget;if(!eR(c)||dd.has(d))return;dd.add(d);const f=e(c),p=(b,A)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),!(!eR(b)||!dd.has(d))&&(dd.delete(d),typeof f=="function"&&f(b,{success:A}))},y=b=>{p(b,n.useGlobalTarget||hk(d,b.target))},_=b=>{p(b,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",_,r)};return i.forEach(c=>{!nK(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",f=>iK(f,r),r)}),o}function sK(t){return t==="x"||t==="y"?Vr[t]?null:(Vr[t]=!0,()=>{Vr[t]=!1}):Vr.x||Vr.y?null:(Vr.x=Vr.y=!0,()=>{Vr.x=Vr.y=!1})}const pk=new Set(["width","height","top","left","right","bottom",...Ju]);let Fp;function oK(){Fp=void 0}const hs={now:()=>(Fp===void 0&&hs.set(Wn.isProcessing||t$.useManualTiming?Wn.timestamp:performance.now()),Fp),set:t=>{Fp=t,queueMicrotask(oK)}};function NE(t,e){t.indexOf(e)===-1&&t.push(e)}function DE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ME{constructor(){this.subscriptions=[]}add(e){return NE(this.subscriptions,e),()=>DE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function mk(t,e){return e?t*(1e3/e):0}const tR=30,aK=t=>!isNaN(parseFloat(t));class lK{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=hs.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ME);const i=this.events[e].add(n);return e==="change"?()=>{i(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tR);return mk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xd(t,e){return new lK(t,e)}function uK(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xd(n))}function cK(t,e){const n=xg(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=S$(o[l]);uK(t,l,c)}}function dK(t){return!!(ui(t)&&t.add)}function m_(t,e){const n=t.getValue("willChange");if(dK(n))return n.add(e)}function gk(t){return t.props[$P]}const vk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fK=1e-7,hK=12;function pK(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=vk(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>fK&&++c<hK);return l}function yf(t,e,n,i){if(t===e&&n===i)return ir;const r=o=>pK(o,0,1,t,n);return o=>o===0||o===1?o:vk(r(o),e,i)}const yk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_k=t=>e=>1-t(1-e),Tk=yf(.33,1.53,.69,.99),PE=_k(Tk),Ek=yk(PE),Sk=t=>(t*=2)<1?.5*PE(t):.5*(2-Math.pow(2,-10*(t-1))),kE=t=>1-Math.sin(Math.acos(t)),bk=_k(kE),wk=yk(kE),xk=t=>/^0[^.\s]+$/u.test(t);function mK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xk(t):!0}const xd=t=>Math.round(t*1e5)/1e5,VE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gK(t){return t==null}const vK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LE=(t,e)=>n=>!!(typeof n=="string"&&vK.test(n)&&n.startsWith(t)||e&&!gK(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ak=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(VE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},yK=t=>Ks(0,255,t),t0={...Wu,transform:t=>Math.round(yK(t))},Ka={test:LE("rgb","red"),parse:Ak("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+t0.transform(t)+", "+t0.transform(e)+", "+t0.transform(n)+", "+xd(Wd.transform(i))+")"};function _K(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const g_={test:LE("#"),parse:_K,transform:Ka.transform},du={test:LE("hsl","hue"),parse:Ak("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+fs.transform(xd(e))+", "+fs.transform(xd(n))+", "+xd(Wd.transform(i))+")"},ri={test:t=>Ka.test(t)||g_.test(t)||du.test(t),parse:t=>Ka.test(t)?Ka.parse(t):du.test(t)?du.parse(t):g_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ka.transform(t):du.transform(t)},TK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(VE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(TK))===null||n===void 0?void 0:n.length)||0)>0}const Ck="number",Ik="color",SK="var",bK="var(",nR="${}",wK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(wK,d=>(ri.test(d)?(i.color.push(o),r.push(Ik),n.push(ri.parse(d))):d.startsWith(bK)?(i.var.push(o),r.push(SK),n.push(d)):(i.number.push(o),r.push(Ck),n.push(parseFloat(d))),++o,nR)).split(nR);return{values:n,split:c,indexes:i,types:r}}function Rk(t){return Qd(t).values}function Nk(t){const{split:e,types:n}=Qd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===Ck?o+=xd(r[l]):c===Ik?o+=ri.transform(r[l]):o+=r[l]}return o}}const xK=t=>typeof t=="number"?0:t;function AK(t){const e=Rk(t);return Nk(t)(e.map(xK))}const na={test:EK,parse:Rk,createTransformer:Nk,getAnimatableNone:AK},CK=new Set(["brightness","contrast","saturate","opacity"]);function IK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(VE)||[];if(!i)return t;const r=n.replace(i,"");let o=CK.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const RK=/\b([a-z-]*)\(.*?\)/gu,v_={...na,getAnimatableNone:t=>{const e=t.match(RK);return e?e.map(IK).join(" "):t}},NK={...TE,color:ri,backgroundColor:ri,outlineColor:ri,fill:ri,stroke:ri,borderColor:ri,borderTopColor:ri,borderRightColor:ri,borderBottomColor:ri,borderLeftColor:ri,filter:v_,WebkitFilter:v_},OE=t=>NK[t];function Dk(t,e){let n=OE(t);return n!==v_&&(n=na),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const DK=new Set(["auto","none","0"]);function MK(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!DK.has(o)&&Qd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=Dk(n,r)}const iR=t=>t===Wu||t===Ue,rR=(t,e)=>parseFloat(t.split(", ")[e]),sR=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return rR(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?rR(o[1],t):0}},PK=new Set(["x","y","z"]),kK=Ju.filter(t=>!PK.has(t));function VK(t){const e=[];return kK.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Vu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:sR(4,13),y:sR(5,14)};Vu.translateX=Vu.x;Vu.translateY=Vu.y;const Wa=new Set;let y_=!1,__=!1;function Mk(){if(__){const t=Array.from(Wa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=VK(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}__=!1,y_=!1,Wa.forEach(t=>t.complete()),Wa.clear()}function Pk(){Wa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(__=!0)})}function LK(){Pk(),Mk()}class UE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wa.add(this),y_||(y_=!0,$t.read(Pk),$t.resolveKeyframes(Mk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),OK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UK(t){const e=OK.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function Vk(t,e,n=1){const[i,r]=UK(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return kk(l)?parseFloat(l):l}return _E(r)?Vk(r,e,n+1):r}const Lk=t=>e=>e.test(t),FK={test:t=>t==="auto",parse:t=>t},Ok=[Wu,Ue,fs,Mo,I$,C$,FK],oR=t=>Ok.find(Lk(t));class Uk extends UE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),_E(f))){const p=Vk(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!pk.has(i)||e.length!==2)return;const[r,o]=e,l=oR(r),c=oR(o);if(l!==c)if(iR(l)&&iR(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)mK(e[r])&&i.push(r);i.length&&MK(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Vu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{n.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const aR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(na.test(t)||t==="0")&&!t.startsWith("url("));function BK(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zK(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=aR(r,e),c=aR(o,e);return!l||!c?!1:BK(t)||(n==="spring"||CE(n))&&i}const qK=t=>t!==null;function Ag(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(qK),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const HK=40;class Fk{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=hs.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>HK?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&LK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=hs.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!zK(e,i,r,o))if(l)this.options.duration=0;else{d&&d(Ag(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zt=(t,e,n)=>t+(e-t)*n;function n0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GK({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=n0(d,c,t+1/3),o=n0(d,c,t),l=n0(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function wm(t,e){return n=>n>0?e:t}const i0=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},jK=[g_,Ka,du],$K=t=>jK.find(e=>e.test(t));function lR(t){const e=$K(t);if(!e)return!1;let n=e.parse(t);return e===du&&(n=GK(n)),n}const uR=(t,e)=>{const n=lR(t),i=lR(e);if(!n||!i)return wm(t,e);const r={...n};return o=>(r.red=i0(n.red,i.red,o),r.green=i0(n.green,i.green,o),r.blue=i0(n.blue,i.blue,o),r.alpha=Zt(n.alpha,i.alpha,o),Ka.transform(r))},KK=(t,e)=>n=>e(t(n)),_f=(...t)=>t.reduce(KK),T_=new Set(["none","hidden"]);function YK(t,e){return T_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function JK(t,e){return n=>Zt(t,e,n)}function FE(t){return typeof t=="number"?JK:typeof t=="string"?_E(t)?wm:ri.test(t)?uR:QK:Array.isArray(t)?Bk:typeof t=="object"?ri.test(t)?uR:WK:wm}function Bk(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>FE(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function WK(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=FE(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function XK(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=d,r[l]++}return i}const QK=(t,e)=>{const n=na.createTransformer(e),i=Qd(t),r=Qd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?T_.has(t)&&!r.values.length||T_.has(e)&&!i.values.length?YK(t,e):_f(Bk(XK(i,r),r.values),n):wm(t,e)};function zk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zt(t,e,n):FE(t)(t,e)}const ZK=5;function qk(t,e,n){const i=Math.max(e-ZK,0);return mk(n-t(i),e-i)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},r0=.001;function eY({duration:t=an.duration,bounce:e=an.bounce,velocity:n=an.velocity,mass:i=an.mass}){let r,o,l=1-e;l=Ks(an.minDamping,an.maxDamping,l),t=Ks(an.minDuration,an.maxDuration,zs(t)),l<1?(r=f=>{const p=f*l,y=p*t,_=p-n,b=E_(f,l),A=Math.exp(-y);return r0-_/b*A},o=f=>{const y=f*l*t,_=y*n+n,b=Math.pow(l,2)*Math.pow(f,2)*t,A=Math.exp(-y),I=E_(Math.pow(f,2),l);return(-r(f)+r0>0?-1:1)*((_-b)*A)/I}):(r=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-r0+p*y},o=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const c=5/t,d=nY(r,o,c);if(t=Bs(t),isNaN(d))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const tY=12;function nY(t,e,n){let i=n;for(let r=1;r<tY;r++)i=i-t(i)/e(i);return i}function E_(t,e){return t*Math.sqrt(1-e*e)}const iY=["duration","bounce"],rY=["stiffness","damping","mass"];function cR(t,e){return e.some(n=>t[n]!==void 0)}function sY(t){let e={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!cR(t,rY)&&cR(t,iY))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Ks(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:an.mass,stiffness:r,damping:o}}else{const n=eY(t);e={...e,...n,mass:an.mass},e.isResolvedFromDuration=!0}return e}function Hk(t=an.visualDuration,e=an.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:y,velocity:_,isResolvedFromDuration:b}=sY({...n,velocity:-zs(n.velocity||0)}),A=_||0,I=f/(2*Math.sqrt(d*p)),R=l-o,V=zs(Math.sqrt(d/p)),k=Math.abs(R)<5;i||(i=k?an.restSpeed.granular:an.restSpeed.default),r||(r=k?an.restDelta.granular:an.restDelta.default);let O;if(I<1){const K=E_(V,I);O=H=>{const D=Math.exp(-I*V*H);return l-D*((A+I*V*R)/K*Math.sin(K*H)+R*Math.cos(K*H))}}else if(I===1)O=K=>l-Math.exp(-V*K)*(R+(A+V*R)*K);else{const K=V*Math.sqrt(I*I-1);O=H=>{const D=Math.exp(-I*V*H),N=Math.min(K*H,300);return l-D*((A+I*V*R)*Math.sinh(N)+K*R*Math.cosh(N))/K}}const G={calculatedDuration:b&&y||null,next:K=>{const H=O(K);if(b)c.done=K>=y;else{let D=0;I<1&&(D=K===0?Bs(A):qk(O,K,H));const N=Math.abs(D)<=i,M=Math.abs(l-H)<=r;c.done=N&&M}return c.value=c.done?l:H,c},toString:()=>{const K=Math.min(ak(G),h_),H=lk(D=>G.next(K*D).value,K,30);return K+"ms "+H}};return G}function dR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:p}){const y=t[0],_={done:!1,value:y},b=N=>c!==void 0&&N<c||d!==void 0&&N>d,A=N=>c===void 0?d:d===void 0||Math.abs(c-N)<Math.abs(d-N)?c:d;let I=n*e;const R=y+I,V=l===void 0?R:l(R);V!==R&&(I=V-y);const k=N=>-I*Math.exp(-N/i),O=N=>V+k(N),G=N=>{const M=k(N),B=O(N);_.done=Math.abs(M)<=f,_.value=_.done?V:B};let K,H;const D=N=>{b(_.value)&&(K=N,H=Hk({keyframes:[_.value,A(_.value)],velocity:qk(O,N,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return D(0),{calculatedDuration:null,next:N=>{let M=!1;return!H&&K===void 0&&(M=!0,G(N),D(N)),K!==void 0&&N>=K?H.next(N-K):(!M&&G(N),_)}}}const oY=yf(.42,0,1,1),aY=yf(0,0,.58,1),Gk=yf(.42,0,.58,1),lY=t=>Array.isArray(t)&&typeof t[0]!="number",uY={linear:ir,easeIn:oY,easeInOut:Gk,easeOut:aY,circIn:kE,circInOut:wk,circOut:bk,backIn:PE,backInOut:Ek,backOut:Tk,anticipate:Sk},fR=t=>{if(IE(t)){zP(t.length===4);const[e,n,i,r]=t;return yf(e,n,i,r)}else if(typeof t=="string")return uY[t];return t};function cY(t,e,n){const i=[],r=n||zk,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||ir:e;c=_f(d,c)}i.push(c)}return i}function dY(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(zP(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=cY(e,i,r),d=c.length,f=p=>{if(l&&p<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const _=Pu(t[y],t[y+1],p);return c[y](_)};return n?p=>f(Ks(t[0],t[o-1],p)):f}function fY(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Pu(0,e,i);t.push(Zt(n,1,r))}}function hY(t){const e=[0];return fY(e,t.length-1),e}function pY(t,e){return t.map(n=>n*e)}function mY(t,e){return t.map(()=>e||Gk).splice(0,t.length-1)}function xm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=lY(i)?i.map(fR):fR(i),o={done:!1,value:e[0]},l=pY(n&&n.length===e.length?n:hY(e),t),c=dY(l,e,{ease:Array.isArray(r)?r:mY(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const gY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$t.update(e,!0),stop:()=>ta(e),now:()=>Wn.isProcessing?Wn.timestamp:hs.now()}},vY={decay:dR,inertia:dR,tween:xm,keyframes:xm,spring:Hk},yY=t=>t/100;class BE extends Fk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||UE,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=CE(n)?n:vY[n]||xm;let d,f;c!==xm&&typeof e[0]!="number"&&(d=_f(yY,zk(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=ak(p));const{calculatedDuration:y}=p,_=y+r,b=_*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:y,resolvedDuration:_,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:p,resolvedDuration:y}=i;if(this.startTime===null)return o.next(0);const{delay:_,repeat:b,repeatType:A,repeatDelay:I,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const V=this.currentTime-_*(this.speed>=0?1:-1),k=this.speed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let O=this.currentTime,G=o;if(b){const N=Math.min(this.currentTime,p)/y;let M=Math.floor(N),B=N%1;!B&&N>=1&&(B=1),B===1&&M--,M=Math.min(M,b+1),!!(M%2)&&(A==="reverse"?(B=1-B,I&&(B-=I/y)):A==="mirror"&&(G=l)),O=Ks(0,1,B)*y}const K=k?{done:!1,value:d[0]}:G.next(O);c&&(K.value=c(K.value));let{done:H}=K;!k&&f!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return D&&r!==void 0&&(K.value=Ag(d,this.options,r)),R&&R(K.value),D&&this.finish(),K}get duration(){const{resolved:e}=this;return e?zs(e.calculatedDuration):0}get time(){return zs(this.currentTime)}set time(e){e=Bs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=gY,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _Y=new Set(["opacity","clipPath","filter","transform"]);function TY(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:n};d&&(f.offset=d);const p=ck(c,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const EY=fE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Am=10,SY=2e4;function bY(t){return CE(t.type)||t.type==="spring"||!uk(t.ease)}function wY(t,e){const n=new BE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<SY;)i=n.sample(o),r.push(i.value),o+=Am;return{times:void 0,keyframes:r,duration:o-Am,ease:"linear"}}const jk={anticipate:Sk,backInOut:Ek,circInOut:wk};function xY(t){return t in jk}class hR extends Fk{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new Uk(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&bm()&&xY(o)&&(o=jk[o]),bY(this.options)){const{onComplete:y,onUpdate:_,motionValue:b,element:A,...I}=this.options,R=wY(e,I);e=R.keyframes,e.length===1&&(e[1]=e[0]),i=R.duration,r=R.times,o=R.ease,l="keyframes"}const p=TY(c.owner.current,d,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(XI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:y}=this.options;c.set(Ag(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return zs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return zs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Bs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ir;const{animation:i}=n;XI(i,e)}return ir}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:y,element:_,...b}=this.options,A=new BE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),I=Bs(this.time);f.setWithVelocity(A.sample(I-Am).value,A.sample(I).value,Am)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=n.owner.getProps();return EY()&&i&&_Y.has(i)&&!d&&!f&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const AY={type:"spring",stiffness:500,damping:25,restSpeed:10},CY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IY={type:"keyframes",duration:.8},RY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NY=(t,{keyframes:e})=>e.length>2?IY:hl.has(t)?t.startsWith("scale")?CY(e[1]):AY:RY;function DY({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const zE=(t,e,n,i={},r,o)=>l=>{const c=AE(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Bs(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:_=>{e.set(_),c.onUpdate&&c.onUpdate(_)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};DY(c)||(p={...p,...NY(t,p)}),p.duration&&(p.duration=Bs(p.duration)),p.repeatDelay&&(p.repeatDelay=Bs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),y&&!o&&e.get()!==void 0){const _=Ag(p.keyframes,c);if(_!==void 0)return $t.update(()=>{p.onUpdate(_),p.onComplete()}),new W$([])}return!o&&hR.supports(p)?new hR(p):new BE(p)};function MY({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function $k(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(l=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const y in d){const _=t.getValue(y,(o=t.latestValues[y])!==null&&o!==void 0?o:null),b=d[y];if(b===void 0||p&&MY(p,y))continue;const A={delay:n,...AE(l||{},y)};let I=!1;if(window.MotionHandoffAnimation){const V=gk(t);if(V){const k=window.MotionHandoffAnimation(V,y,$t);k!==null&&(A.startTime=k,I=!0)}}m_(t,y),_.start(zE(y,_,b,t.shouldReduceMotion&&pk.has(y)?{type:!1}:A,t,I));const R=_.animation;R&&f.push(R)}return c&&Promise.all(f).then(()=>{$t.update(()=>{c&&cK(t,c)})}),f}function S_(t,e,n={}){var i;const r=xg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all($k(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:_}=o;return PY(t,e,p+f,y,_,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function PY(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>c-f*i;return Array.from(t.variantChildren).sort(kY).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(S_(f,e,{...o,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function kY(t,e){return t.sortNodePosition(e)}function VY(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>S_(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=S_(t,e,n);else{const r=typeof e=="function"?xg(t,e,n.custom):e;i=Promise.all($k(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const LY=pE.length;function Kk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Kk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<LY;n++){const i=pE[n],r=t.props[i];(Jd(r)||r===!1)&&(e[i]=r)}return e}const OY=[...hE].reverse(),UY=hE.length;function FY(t){return e=>Promise.all(e.map(({animation:n,options:i})=>VY(t,n,i)))}function BY(t){let e=FY(t),n=pR(),i=!0;const r=d=>(f,p)=>{var y;const _=xg(t,p,d==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(_){const{transition:b,transitionEnd:A,...I}=_;f={...f,...I,...A}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,p=Kk(t.parent)||{},y=[],_=new Set;let b={},A=1/0;for(let R=0;R<UY;R++){const V=OY[R],k=n[V],O=f[V]!==void 0?f[V]:p[V],G=Jd(O),K=V===d?k.isActive:null;K===!1&&(A=R);let H=O===p[V]&&O!==f[V]&&G;if(H&&i&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...b},!k.isActive&&K===null||!O&&!k.prevProp||bg(O)||typeof O=="boolean")continue;const D=zY(k.prevProp,O);let N=D||V===d&&k.isActive&&!H&&G||R>A&&G,M=!1;const B=Array.isArray(O)?O:[O];let q=B.reduce(r(V),{});K===!1&&(q={});const{prevResolvedValues:F={}}=k,U={...F,...q},ye=oe=>{N=!0,_.has(oe)&&(M=!0,_.delete(oe)),k.needsAnimating[oe]=!0;const he=t.getValue(oe);he&&(he.liveStyle=!1)};for(const oe in U){const he=q[oe],xe=F[oe];if(b.hasOwnProperty(oe))continue;let Ae=!1;f_(he)&&f_(xe)?Ae=!ok(he,xe):Ae=he!==xe,Ae?he!=null?ye(oe):_.add(oe):he!==void 0&&_.has(oe)?ye(oe):k.protectedKeys[oe]=!0}k.prevProp=O,k.prevResolvedValues=q,k.isActive&&(b={...b,...q}),i&&t.blockInitialAnimation&&(N=!1),N&&(!(H&&D)||M)&&y.push(...B.map(oe=>({animation:oe,options:{type:V}})))}if(_.size){const R={};_.forEach(V=>{const k=t.getBaseTarget(V),O=t.getValue(V);O&&(O.liveStyle=!0),R[V]=k??null}),y.push({animation:R})}let I=!!y.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(I=!1),i=!1,I?e(y):Promise.resolve()}function c(d,f){var p;if(n[d].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(_=>{var b;return(b=_.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),n[d].isActive=f;const y=l(d);for(const _ in n)n[_].protectedKeys={};return y}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=pR(),i=!0}}}function zY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ok(e,t):!1}function La(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pR(){return{animate:La(!0),whileInView:La(),whileHover:La(),whileTap:La(),whileDrag:La(),whileFocus:La(),exit:La()}}class da{constructor(e){this.isMounted=!1,this.node=e}update(){}}class qY extends da{constructor(e){super(e),e.animationState||(e.animationState=BY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let HY=0;class GY extends da{constructor(){super(...arguments),this.id=HY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jY={animation:{Feature:qY},exit:{Feature:GY}};function Zd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Tf(t){return{point:{x:t.pageX,y:t.pageY}}}const $Y=t=>e=>RE(e)&&t(e,Tf(e));function Ad(t,e,n,i){return Zd(t,e,$Y(n),i)}const mR=(t,e)=>Math.abs(t-e);function KY(t,e){const n=mR(t.x,e.x),i=mR(t.y,e.y);return Math.sqrt(n**2+i**2)}class Yk{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=o0(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=KY(y.offset,{x:0,y:0})>=3;if(!_&&!b)return;const{point:A}=y,{timestamp:I}=Wn;this.history.push({...A,timestamp:I});const{onStart:R,onMove:V}=this.handlers;_||(R&&R(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=s0(_,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:b,onSessionEnd:A,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=o0(y.type==="pointercancel"?this.lastMoveEventInfo:s0(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,R),A&&A(y,R)},!RE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=Tf(e),c=s0(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=Wn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,o0(c,this.history)),this.removeListeners=_f(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ta(this.updatePoint)}}function s0(t,e){return e?{point:e(t.point)}:t}function gR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function o0({point:t},e){return{point:t,delta:gR(t,Jk(e)),offset:gR(t,YY(e)),velocity:JY(e,.1)}}function YY(t){return t[0]}function Jk(t){return t[t.length-1]}function JY(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=Jk(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Bs(e)));)n--;if(!i)return{x:0,y:0};const o=zs(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const Wk=1e-4,WY=1-Wk,XY=1+Wk,Xk=.01,QY=0-Xk,ZY=0+Xk;function rr(t){return t.max-t.min}function eJ(t,e,n){return Math.abs(t-e)<=n}function vR(t,e,n,i=.5){t.origin=i,t.originPoint=Zt(e.min,e.max,t.origin),t.scale=rr(n)/rr(e),t.translate=Zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=WY&&t.scale<=XY||isNaN(t.scale))&&(t.scale=1),(t.translate>=QY&&t.translate<=ZY||isNaN(t.translate))&&(t.translate=0)}function Cd(t,e,n,i){vR(t.x,e.x,n.x,i?i.originX:void 0),vR(t.y,e.y,n.y,i?i.originY:void 0)}function yR(t,e,n){t.min=n.min+e.min,t.max=t.min+rr(e)}function tJ(t,e,n){yR(t.x,e.x,n.x),yR(t.y,e.y,n.y)}function _R(t,e,n){t.min=e.min-n.min,t.max=t.min+rr(e)}function Id(t,e,n){_R(t.x,e.x,n.x),_R(t.y,e.y,n.y)}function nJ(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Zt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Zt(n,t,i.max):Math.min(t,n)),t}function TR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function iJ(t,{top:e,left:n,bottom:i,right:r}){return{x:TR(t.x,n,r),y:TR(t.y,e,i)}}function ER(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function rJ(t,e){return{x:ER(t.x,e.x),y:ER(t.y,e.y)}}function sJ(t,e){let n=.5;const i=rr(t),r=rr(e);return r>i?n=Pu(e.min,e.max-i,t.min):i>r&&(n=Pu(t.min,t.max-r,e.min)),Ks(0,1,n)}function oJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const b_=.35;function aJ(t=b_){return t===!1?t=0:t===!0&&(t=b_),{x:SR(t,"left","right"),y:SR(t,"top","bottom")}}function SR(t,e,n){return{min:bR(t,e),max:bR(t,n)}}function bR(t,e){return typeof t=="number"?t:t[e]||0}const wR=()=>({translate:0,scale:1,origin:0,originPoint:0}),fu=()=>({x:wR(),y:wR()}),xR=()=>({min:0,max:0}),pn=()=>({x:xR(),y:xR()});function Tr(t){return[t("x"),t("y")]}function Qk({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function lJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function a0(t){return t===void 0||t===1}function w_({scale:t,scaleX:e,scaleY:n}){return!a0(t)||!a0(e)||!a0(n)}function qa(t){return w_(t)||Zk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Zk(t){return AR(t.x)||AR(t.y)}function AR(t){return t&&t!=="0%"}function Cm(t,e,n){const i=t-n,r=e*i;return n+r}function CR(t,e,n,i,r){return r!==void 0&&(t=Cm(t,r,i)),Cm(t,n,i)+e}function x_(t,e=0,n=1,i,r){t.min=CR(t.min,e,n,i,r),t.max=CR(t.max,e,n,i,r)}function e2(t,{x:e,y:n}){x_(t.x,e.translate,e.scale,e.originPoint),x_(t.y,n.translate,n.scale,n.originPoint)}const IR=.999999999999,RR=1.0000000000001;function cJ(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&pu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,e2(t,l)),i&&qa(o.latestValues)&&pu(t,o.latestValues))}e.x<RR&&e.x>IR&&(e.x=1),e.y<RR&&e.y>IR&&(e.y=1)}function hu(t,e){t.min=t.min+e,t.max=t.max+e}function NR(t,e,n,i,r=.5){const o=Zt(t.min,t.max,r);x_(t,e,n,o,i)}function pu(t,e){NR(t.x,e.x,e.scaleX,e.scale,e.originX),NR(t.y,e.y,e.scaleY,e.scale,e.originY)}function t2(t,e){return Qk(uJ(t.getBoundingClientRect(),e))}function dJ(t,e,n){const i=t2(t,n),{scroll:r}=e;return r&&(hu(i.x,r.offset.x),hu(i.y,r.offset.y)),i}const n2=({current:t})=>t?t.ownerDocument.defaultView:null,fJ=new WeakMap;class hJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Tf(p).point)},o=(p,y)=>{const{drag:_,dragPropagation:b,onDragStart:A}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sK(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tr(R=>{let V=this.getAxisMotionValue(R).get()||0;if(fs.test(V)){const{projection:k}=this.visualElement;if(k&&k.layout){const O=k.layout.layoutBox[R];O&&(V=rr(O)*(parseFloat(V)/100))}}this.originPoint[R]=V}),A&&$t.postRender(()=>A(p,y)),m_(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},l=(p,y)=>{const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:A,onDrag:I}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:R}=y;if(b&&this.currentDirection===null){this.currentDirection=pJ(R),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",y.point,R),this.updateAxis("y",y.point,R),this.visualElement.render(),I&&I(p,y)},c=(p,y)=>this.stop(p,y),d=()=>Tr(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Yk(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:n2(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&$t.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!ap(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=nJ(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&cu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=iJ(r.layoutBox,n):this.constraints=!1,this.elastic=aJ(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Tr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=oJ(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=dJ(i,r.root,this.visualElement.getTransformPagePoint());let l=rJ(r.layout.layoutBox,o);if(n){const c=n(lJ(l));this.hasMutatedConstraints=!!c,c&&(l=Qk(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=Tr(p=>{if(!ap(p,n,this.currentDirection))return;let y=d&&d[p]||{};l&&(y={min:0,max:0});const _=r?200:1e6,b=r?40:1e7,A={type:"inertia",velocity:i?e[p]:0,bounceStiffness:_,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(p,A)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return m_(this.visualElement,e),i.start(zE(e,i,0,n,this.visualElement,!1))}stopAnimation(){Tr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Tr(n=>{const{drag:i}=this.getProps();if(!ap(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Zt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!cu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Tr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=sJ({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Tr(l=>{if(!ap(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(Zt(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;fJ.set(this.visualElement,this);const e=this.visualElement.current,n=Ad(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();cu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),$t.read(i);const l=Zd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Tr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=d[p].translate,y.set(y.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=b_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function ap(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class mJ extends da{constructor(e){super(e),this.removeGroupControls=ir,this.removeListeners=ir,this.controls=new hJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const DR=t=>(e,n)=>{t&&$t.postRender(()=>t(e,n))};class gJ extends da{constructor(){super(...arguments),this.removePointerDownListener=ir}onPointerDown(e){this.session=new Yk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:n2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:DR(e),onStart:DR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&$t.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function MR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const n=MR(t,e.target.x),i=MR(t,e.target.y);return`${n}% ${i}%`}},vJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=na.parse(t);if(r.length>5)return i;const o=na.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const f=Zt(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class yJ extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;U$(_J),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Bp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||$t.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function i2(t){const[e,n]=FP(),i=z.useContext(lE);return S.jsx(yJ,{...t,layoutGroup:i,switchLayoutGroup:z.useContext(KP),isPresent:e,safeToRemove:n})}const _J={borderRadius:{...Xc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xc,borderTopRightRadius:Xc,borderBottomLeftRadius:Xc,borderBottomRightRadius:Xc,boxShadow:vJ};function TJ(t,e,n){const i=ui(t)?t:Xd(t);return i.start(zE("",i,e,n)),i.animation}function EJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const SJ=(t,e)=>t.depth-e.depth;class bJ{constructor(){this.children=[],this.isDirty=!1}add(e){NE(this.children,e),this.isDirty=!0}remove(e){DE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SJ),this.isDirty=!1,this.children.forEach(e)}}function wJ(t,e){const n=hs.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ta(i),t(o-e))};return $t.read(i,!0),()=>ta(i)}const r2=["TopLeft","TopRight","BottomLeft","BottomRight"],xJ=r2.length,PR=t=>typeof t=="string"?parseFloat(t):t,kR=t=>typeof t=="number"||Ue.test(t);function AJ(t,e,n,i,r,o){r?(t.opacity=Zt(0,n.opacity!==void 0?n.opacity:1,CJ(i)),t.opacityExit=Zt(e.opacity!==void 0?e.opacity:1,0,IJ(i))):o&&(t.opacity=Zt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<xJ;l++){const c=`border${r2[l]}Radius`;let d=VR(e,c),f=VR(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||kR(d)===kR(f)?(t[c]=Math.max(Zt(PR(d),PR(f),i),0),(fs.test(f)||fs.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=Zt(e.rotate||0,n.rotate||0,i))}function VR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const CJ=s2(0,.5,bk),IJ=s2(.5,.95,ir);function s2(t,e,n){return i=>i<t?0:i>e?1:n(Pu(t,e,i))}function LR(t,e){t.min=e.min,t.max=e.max}function _r(t,e){LR(t.x,e.x),LR(t.y,e.y)}function OR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function UR(t,e,n,i,r){return t-=e,t=Cm(t,1/n,i),r!==void 0&&(t=Cm(t,1/r,i)),t}function RJ(t,e=0,n=1,i=.5,r,o=t,l=t){if(fs.test(e)&&(e=parseFloat(e),e=Zt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Zt(o.min,o.max,i);t===o&&(c-=e),t.min=UR(t.min,e,n,c,r),t.max=UR(t.max,e,n,c,r)}function FR(t,e,[n,i,r],o,l){RJ(t,e[n],e[i],e[r],e.scale,o,l)}const NJ=["x","scaleX","originX"],DJ=["y","scaleY","originY"];function BR(t,e,n,i){FR(t.x,e,NJ,n?n.x:void 0,i?i.x:void 0),FR(t.y,e,DJ,n?n.y:void 0,i?i.y:void 0)}function zR(t){return t.translate===0&&t.scale===1}function o2(t){return zR(t.x)&&zR(t.y)}function qR(t,e){return t.min===e.min&&t.max===e.max}function MJ(t,e){return qR(t.x,e.x)&&qR(t.y,e.y)}function HR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function a2(t,e){return HR(t.x,e.x)&&HR(t.y,e.y)}function GR(t){return rr(t.x)/rr(t.y)}function jR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PJ{constructor(){this.members=[]}add(e){NE(this.members,e),e.scheduleRender()}remove(e){if(DE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kJ(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:_,skewX:b,skewY:A}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),y&&(i+=`rotateX(${y}deg) `),_&&(i+=`rotateY(${_}deg) `),b&&(i+=`skewX(${b}deg) `),A&&(i+=`skewY(${A}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const Ha={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},fd=typeof window<"u"&&window.MotionDebug!==void 0,l0=["","X","Y","Z"],VJ={visibility:"hidden"},$R=1e3;let LJ=0;function u0(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function l2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$t,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&l2(i)}function u2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=LJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fd&&(Ha.totalNodes=Ha.resolvedTargetDeltas=Ha.recalculatedProjection=0),this.nodes.forEach(FJ),this.nodes.forEach(GJ),this.nodes.forEach(jJ),this.nodes.forEach(BJ),fd&&window.MotionDebug.record(Ha)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new bJ)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ME),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=EJ(l),this.instance=l;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),t){let y;const _=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=wJ(_,250),Bp.hasAnimatedSinceResize&&(Bp.hasAnimatedSinceResize=!1,this.nodes.forEach(YR))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:_,hasRelativeTargetChanged:b,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||p.getDefaultTransition()||WJ,{onLayoutAnimationStart:R,onLayoutAnimationComplete:V}=p.getProps(),k=!this.targetLayout||!a2(this.targetLayout,A)||b,O=!_&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||O||_&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,O);const G={...AE(I,"layout"),onPlay:R,onComplete:V};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else _||YR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ta(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($J),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&l2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KR);return}this.isUpdating||this.nodes.forEach(qJ),this.isUpdating=!1,this.nodes.forEach(HJ),this.nodes.forEach(OJ),this.nodes.forEach(UJ),this.clearAllSnapshots();const c=hs.now();Wn.delta=Ks(0,1e3/60,c-Wn.timestamp),Wn.timestamp=c,Wn.isProcessing=!0,Zy.update.process(Wn),Zy.preRender.process(Wn),Zy.render.process(Wn),Wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zJ),this.sharedNodes.forEach(KJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!o2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||qa(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),XJ(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return pn();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(QJ))){const{scroll:p}=this.root;p&&(hu(d.x,p.offset.x),hu(d.y,p.offset.y))}return d}removeElementScroll(l){var c;const d=pn();if(_r(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:_}=p;p!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&_r(d,l),hu(d.x,y.offset.x),hu(d.y,y.offset.y))}return d}applyTransform(l,c=!1){const d=pn();_r(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&pu(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),qa(p.latestValues)&&pu(d,p.latestValues)}return qa(this.latestValues)&&pu(d,this.latestValues),d}removeTransform(l){const c=pn();_r(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!qa(f.latestValues))continue;w_(f.latestValues)&&f.updateSnapshot();const p=pn(),y=f.measurePageBox();_r(p,y),BR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return qa(this.latestValues)&&BR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:_}=this.options;if(!(!this.layout||!(y||_))){if(this.resolvedRelativeTargetAt=Wn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Id(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),e2(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),Id(this.relativeTargetOrigin,this.target,b.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fd&&Ha.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||w_(this.parent.latestValues)||Zk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Wn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;_r(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,b=this.treeScale.y;cJ(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pn());const{target:A}=c;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OR(this.prevProjectionDelta.x,this.projectionDelta.x),OR(this.prevProjectionDelta.y,this.projectionDelta.y)),Cd(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==b||!jR(this.projectionDelta.x,this.prevProjectionDelta.x)||!jR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),fd&&Ha.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fu(),this.projectionDelta=fu(),this.projectionDeltaWithTransform=fu()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},y=fu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const _=pn(),b=d?d.source:void 0,A=this.layout?this.layout.source:void 0,I=b!==A,R=this.getStack(),V=!R||R.members.length<=1,k=!!(I&&!V&&this.options.crossfade===!0&&!this.path.some(JJ));this.animationProgress=0;let O;this.mixTargetDelta=G=>{const K=G/1e3;JR(y.x,l.x,K),JR(y.y,l.y,K),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Id(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YJ(this.relativeTarget,this.relativeTargetOrigin,_,K),O&&MJ(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=pn()),_r(O,this.relativeTarget)),I&&(this.animationValues=p,AJ(p,f,this.latestValues,K,k,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ta(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{Bp.hasAnimatedSinceResize=!0,this.currentAnimation=TJ(0,$R,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($R),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&c2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||pn();const y=rr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+y;const _=rr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}_r(c,d),pu(c,p),Cd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new PJ),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&u0("z",l,f,this.animationValues);for(let p=0;p<l0.length;p++)u0(`rotate${l0[p]}`,l,f,this.animationValues),u0(`skew${l0[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VJ;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Up(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Up(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!qa(this.latestValues)&&(I.transform=p?p({},""):"none",this.hasProjected=!1),I}const _=y.animationValues||y.latestValues;this.applyTransformsToTarget(),f.transform=kJ(this.projectionDeltaWithTransform,this.treeScale,_),p&&(f.transform=p(_,f.transform));const{x:b,y:A}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${A.origin*100}% 0`,y.animationValues?f.opacity=y===this?(d=(c=_.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=y===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const I in Sm){if(_[I]===void 0)continue;const{correct:R,applyTo:V}=Sm[I],k=f.transform==="none"?_[I]:R(_[I],y);if(V){const O=V.length;for(let G=0;G<O;G++)f[V[G]]=k}else f[I]=k}return this.options.layoutId&&(f.pointerEvents=y===this?Up(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(KR),this.root.sharedNodes.clear()}}}function OJ(t){t.updateLayout()}function UJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?Tr(y=>{const _=l?n.measuredBox[y]:n.layoutBox[y],b=rr(_);_.min=i[y].min,_.max=_.min+b}):c2(o,n.layoutBox,i)&&Tr(y=>{const _=l?n.measuredBox[y]:n.layoutBox[y],b=rr(i[y]);_.max=_.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const c=fu();Cd(c,i,n.layoutBox);const d=fu();l?Cd(d,t.applyTransform(r,!0),n.measuredBox):Cd(d,i,n.layoutBox);const f=!o2(c);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:b}=y;if(_&&b){const A=pn();Id(A,n.layoutBox,_.layoutBox);const I=pn();Id(I,i,b.layoutBox),a2(A,I)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=A,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function FJ(t){fd&&Ha.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zJ(t){t.clearSnapshot()}function KR(t){t.clearMeasurements()}function qJ(t){t.isLayoutDirty=!1}function HJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function YR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function GJ(t){t.resolveTargetDelta()}function jJ(t){t.calcProjection()}function $J(t){t.resetSkewAndRotation()}function KJ(t){t.removeLeadSnapshot()}function JR(t,e,n){t.translate=Zt(e.translate,0,n),t.scale=Zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function WR(t,e,n,i){t.min=Zt(e.min,n.min,i),t.max=Zt(e.max,n.max,i)}function YJ(t,e,n,i){WR(t.x,e.x,n.x,i),WR(t.y,e.y,n.y,i)}function JJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WJ={duration:.45,ease:[.4,0,.1,1]},XR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),QR=XR("applewebkit/")&&!XR("chrome/")?Math.round:ir;function ZR(t){t.min=QR(t.min),t.max=QR(t.max)}function XJ(t){ZR(t.x),ZR(t.y)}function c2(t,e,n){return t==="position"||t==="preserve-aspect"&&!eJ(GR(e),GR(n),.2)}function QJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const ZJ=u2({attachResizeListener:(t,e)=>Zd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),c0={current:void 0},d2=u2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!c0.current){const t=new ZJ({});t.mount(window),t.setOptions({layoutScroll:!0}),c0.current=t}return c0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eW={pan:{Feature:gJ},drag:{Feature:mJ,ProjectionNode:d2,MeasureLayout:i2}};function e1(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&$t.postRender(()=>o(e,Tf(e)))}class tW extends da{mount(){const{current:e}=this.node;e&&(this.unmount=eK(e,n=>(e1(this.node,n,"Start"),i=>e1(this.node,i,"End"))))}unmount(){}}class nW extends da{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_f(Zd(this.node.current,"focus",()=>this.onFocus()),Zd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function t1(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&$t.postRender(()=>o(e,Tf(e)))}class iW extends da{mount(){const{current:e}=this.node;e&&(this.unmount=rK(e,n=>(t1(this.node,n,"Start"),(i,{success:r})=>t1(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A_=new WeakMap,d0=new WeakMap,rW=t=>{const e=A_.get(t.target);e&&e(t)},sW=t=>{t.forEach(rW)};function oW({root:t,...e}){const n=t||document;d0.has(n)||d0.set(n,{});const i=d0.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(sW,{root:t,...e})),i[r]}function aW(t,e,n){const i=oW(e);return A_.set(t,n),i.observe(t),()=>{A_.delete(t),i.unobserve(t)}}const lW={some:0,all:1};class uW extends da{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:lW[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),_=f?p:y;_&&_(d)};return aW(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(cW(e,n))&&this.startObserver()}unmount(){}}function cW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dW={inView:{Feature:uW},tap:{Feature:iW},focus:{Feature:nW},hover:{Feature:tW}},fW={layout:{ProjectionNode:d2,MeasureLayout:i2}},C_={current:null},f2={current:!1};function hW(){if(f2.current=!0,!!dE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>C_.current=t.matches;t.addListener(e),e()}else C_.current=!1}const pW=[...Ok,ri,na],mW=t=>pW.find(Lk(t)),n1=new WeakMap;function gW(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ui(r))t.addValue(i,r);else if(ui(o))t.addValue(i,Xd(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,Xd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const i1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vW{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=UE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=hs.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,$t.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=wg(n),this.isVariantNode=jP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in _){const A=_[b];d[b]!==void 0&&ui(A)&&A.set(d[b],!1)}}mount(e){this.current=e,n1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),f2.current||hW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:C_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){n1.delete(this.current),this.projection&&this.projection.unmount(),ta(this.notifyUpdate),ta(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=hl.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&$t.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ku){const n=ku[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<i1.length;i++){const r=i1[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=gW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Xd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(kk(r)||xk(r))?r=parseFloat(r):!mW(r)&&na.test(n)&&(r=Dk(e,n)),this.setBaseTarget(e,ui(r)?r.get():r)),ui(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=yE(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ui(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ME),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class h2 extends vW{constructor(){super(...arguments),this.KeyframeResolver=Uk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ui(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function yW(t){return window.getComputedStyle(t)}class _W extends h2{constructor(){super(...arguments),this.type="html",this.renderInstance=ek}readValueFromInstance(e,n){if(hl.has(n)){const i=OE(n);return i&&i.default||0}else{const i=yW(e),r=(XP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return t2(e,n)}build(e,n,i){EE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return xE(e,n,i)}}class TW extends h2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hl.has(n)){const i=OE(n);return i&&i.default||0}return n=tk.has(n)?n:mE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return rk(e,n,i)}build(e,n,i){SE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){nk(e,n,i,r)}mount(e){this.isSVGTag=wE(e.tagName),super.mount(e)}}const EW=(t,e)=>vE(t)?new TW(e):new _W(e,{allowProjection:t!==z.Fragment}),SW=K$({...jY,...dW,...eW,...fW},EW),is=l$(SW),bW=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),wW=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),xW=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return S.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[S.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[S.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),S.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),S.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),S.jsxs(is.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[S.jsxs(is.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[S.jsx(Yd,{}),S.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),S.jsxs(is.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",S.jsx("br",{}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),S.jsxs(is.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,S.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),S.jsx(is.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:S.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[S.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",S.jsx(bW,{})]}),S.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),S.jsx(is.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),S.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),S.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),S.jsx(is.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),S.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})}),S.jsxs(is.div,{initial:{opacity:0},animate:{opacity:1,y:[0,10,0]},transition:{opacity:{delay:1.5,duration:.6},y:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})},children:[S.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Dcouvrir"}),S.jsx("div",{className:"text-gold",children:S.jsx(wW,{})})]})]}),S.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:S.jsxs("div",{className:"max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),S.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(f0,{icon:S.jsx(d_,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),S.jsx(f0,{icon:S.jsx(Yd,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),S.jsx(f0,{icon:S.jsx(LP,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),S.jsx("section",{className:"py-20 px-4 text-center",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),S.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},f0=({icon:t,title:e,description:n})=>S.jsxs(is.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[S.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:S.jsx("div",{className:"w-6 h-6",children:t})}),S.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),AW=({onAnalyze:t,isAnalyzing:e})=>{const n=z.useRef(null),[i,r]=z.useState([]),[o,l]=z.useState(!1),[c,d]=z.useState(!1);z.useEffect(()=>{const k=()=>d(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),z.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const f=k=>{const O=k.map(G=>({id:`${G.name}-${G.lastModified}-${Math.random()}`,file:G,preview:URL.createObjectURL(G)}));r(G=>[...G,...O])},p=k=>{k.target.files&&(f(Array.from(k.target.files)),k.target.value="")},y=()=>{var k;e||(k=n.current)==null||k.click()},_=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},A=k=>{c||(k.preventDefault(),k.stopPropagation())},I=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},R=k=>{const O=i.find(G=>G.id===k);O&&URL.revokeObjectURL(O.preview),r(G=>G.filter(K=>K.id!==k))},V=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:_,onDragLeave:b,onDragOver:A,onDrop:I,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:y,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(z7,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(d_,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(d_,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>R(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(oE,{})})]},k.id))}),S.jsxs("button",{onClick:V,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Yd,{}),"Analyser les ",i.length," article(s)"]})]})]})},CW=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),IW=({imageSrc:t,analysis:e,onClick:n,isSelected:i,isSet:r,isFavorite:o})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${i?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),i?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(aE,{})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Mu,{className:"w-4 h-4"})}):r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(Tg,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})})]}),RW={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},NW=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var j,ee;const[l,c]=z.useState("Hauts"),[d,f]=z.useState(RW),[p,y]=z.useState(""),[_,b]=z.useState("favorites"),[A,I]=z.useState(!1),[R,V]=z.useState(new Set),k=z.useMemo(()=>n||[],[n]),O=z.useMemo(()=>new Set(k.flatMap(ne=>ne.itemIds||[])),[k]),G=t.length,K=[{name:"Hauts",icon:S.jsx(q7,{})},{name:"Bas",icon:S.jsx(H7,{})},{name:"Chaussures",icon:S.jsx(G7,{})},{name:"Accessoires",icon:S.jsx(j7,{})}],H=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],D=ne=>{A?V(se=>{const ge=new Set(se);return ge.has(ne.id)?ge.delete(ne.id):ge.add(ne.id),ge}):i(ne)},N=ne=>[...ne].sort((se,ge)=>{switch(_){case"favorites":return(ge.isFavorite?1:0)-(se.isFavorite?1:0);case"newest":return!se.createdAt&&!ge.createdAt?0:se.createdAt?ge.createdAt?ge.createdAt-se.createdAt:-1:1;case"oldest":return!se.createdAt&&!ge.createdAt?0:se.createdAt?ge.createdAt?se.createdAt-ge.createdAt:-1:1;case"color":return se.color.localeCompare(ge.color);case"category":return se.category.localeCompare(ge.category);default:return 0}}),M=z.useMemo(()=>{if(!p.trim())return t;const ne=p.toLowerCase();return t.filter(se=>se.analysis.toLowerCase().includes(ne)||se.color.toLowerCase().includes(ne)||se.material.toLowerCase().includes(ne)||se.category.toLowerCase().includes(ne))},[t,p]),B=z.useMemo(()=>{if(!l)return[];const ne=M.filter(ge=>ge.category===l),se=d[l];return se?ne.filter(ge=>{const Oe=se.color==="Toutes"||ge.color===se.color,Ie=se.material==="Toutes"||ge.material===se.material;return Oe&&Ie}):ne},[M,l,(j=d[l])==null?void 0:j.color,(ee=d[l])==null?void 0:ee.material]),q=z.useMemo(()=>N(B),[B,_]),F=z.useMemo(()=>K.reduce((ne,{name:se})=>(ne[se]=M.filter(ge=>ge.category===se).length,ne),{}),[M]),U=z.useMemo(()=>{if(!l)return[];const ne=M.filter(se=>se.category===l).map(se=>se.color);return["Toutes",...Array.from(new Set(ne))]},[M,l]),ye=z.useMemo(()=>{if(!l)return[];const ne=M.filter(se=>se.category===l).map(se=>se.material);return["Toutes",...Array.from(new Set(ne))]},[M,l]),Ne=ne=>{l&&f(se=>({...se,[l]:{...se[l],color:ne}}))},W=ne=>{l&&f(se=>({...se,[l]:{...se[l],material:ne}}))},oe=ne=>{c(l===ne?null:ne)},he=()=>{I(!A),V(new Set)},xe=()=>{if(R.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const ne=window.prompt("Donnez un nom  cet ensemble :");ne&&(o(ne,Array.from(R)),he())},Ae=()=>{y("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((ne,se)=>S.jsx(CW,{},se))})]}):G===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(zI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(zI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[G," vtement",G>1?"s":""]})]})]}),A?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:he,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:xe,disabled:R.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",R.size,")"]})]}):S.jsxs("button",{onClick:he,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(Tg,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(OP,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:ne=>y(ne.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:Ae,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(oE,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(UP,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:_,onChange:ne=>b(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:H.map(ne=>S.jsx("option",{value:ne.value,children:ne.label},ne.value))}),S.jsx(wd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[M.length," rsultat",M.length>1?"s":"",' pour "',p,'"']}),A&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:ne,icon:se})=>{const ge=F[ne]||0,Oe=l===ne;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>oe(ne),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:se}),S.jsx("span",{className:"font-semibold text-lg",children:ne}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",ge,")"]})]}),S.jsx(wd,{className:`w-5 h-5 transition-transform ${Oe?"rotate-180":""}`})]}),Oe&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:d[ne].color,onChange:Ie=>Ne(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:U.map(Ie=>S.jsx("option",{value:Ie,children:Ie},Ie))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:d[ne].material,onChange:Ie=>W(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ye.map(Ie=>S.jsx("option",{value:Ie,children:Ie},Ie))})]})]}),q.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(e$,{mode:"popLayout",children:q.map((Ie,Vt)=>S.jsx(is.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Vt*.05,type:"spring",bounce:.3},children:S.jsx(IW,{imageSrc:Ie.imageSrc,analysis:Ie.analysis,onClick:()=>D(Ie),isSelected:R.has(Ie.id),isSet:O.has(Ie.id),isFavorite:Ie.isFavorite})},Ie.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},ne)})})]})},p2=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=Dn.useState(""),d=p=>{p.preventDefault(),n(l||"Casual")},f=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:d,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:f.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Yd,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},DW=!1,MW=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l,selectedOutfit:c,onSelectOutfit:d})=>{const[f,p]=z.useState(null);z.useEffect(()=>{if(!f)return;const _=b=>{b.key==="Escape"&&p(null)};return window.addEventListener("keydown",_),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",_),document.body.style.overflow="auto"}},[f]);const y=_=>{const{id:b,description:A}=_,I=b?b.trim():"",R=A?A.trim().toLowerCase():"";let V=e.find(O=>O.id===I);if(V)return V;let k=n.find(O=>O.id===I);if(k)return k;if(I&&(V=e.find(O=>O.analysis.toLowerCase().includes(I.toLowerCase())),V)||R&&(V=e.find(O=>{const G=O.analysis.toLowerCase();return G.includes(R)||R.includes(G)}),V))return V};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((_,b)=>{const A=i.some(R=>R.titre===_.titre&&R.description===_.description);_.titre;const I=(c==null?void 0:c.titre)===_.titre&&(c==null?void 0:c.description)===_.description;return S.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${I?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[I&&S.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[S.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:_.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>d(_),className:`p-1.5 transition-colors ${I?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":I?"Dslectionner cette tenue":"Choisir cette tenue",title:I?"Dslectionner cette tenue":"Choisir cette tenue",children:S.jsx("svg",{className:"w-6 h-6",fill:I?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),DW,S.jsx("button",{onClick:()=>r(_),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":A?"Retirer des favoris":"Ajouter aux favoris",children:A?S.jsx(Mu,{className:"w-6 h-6 text-gold"}):S.jsx(Tm,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:_.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:_.vetements.map((R,V)=>{const k=y(R),O=k?k.imageSrc:null;return S.jsx("button",{onClick:()=>O&&p(O),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!O,"aria-label":`Agrandir l'image de : ${R.description}`,title:R.description,children:O?S.jsx("img",{src:O,alt:R.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(VP,{})})},V)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:_.vetements.map((R,V)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:R.description},V))})]},b)})}),f&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>p(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:_=>_.stopPropagation(),children:[S.jsx("img",{src:f,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>p(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx($7,{})})]})})]})},bu=z.memo(MW);var m2=K1(),PW=kW()?z.useLayoutEffect:z.useEffect;function kW(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function VW(){var t=z.useState(Object.create(null)),e=t[1];return z.useCallback(function(){e(Object.create(null))},[])}var LW=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=z.useRef(null),l=z.useRef(null),c=VW();return PW(function(){if(o.current){var d=o.current.ownerDocument;return l.current=d==null?void 0:d.createElement(r),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?m2.createPortal(n,l.current):z.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _e=function(){return _e=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_e.apply(this,arguments)};function qE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function dt(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function Gt(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Mt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Mt||(Mt={}));var Lu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Lu||(Lu={}));var I_=Mt.Start,HE=Mt.Stop,Ef=Mt.Raise,Cg=Mt.Send,g2=Mt.Cancel,OW=Mt.NullEvent,GE=Mt.Assign;Mt.After;Mt.DoneState;var v2=Mt.Log,UW=Mt.Init,R_=Mt.Invoke;Mt.ErrorExecution;var r1=Mt.ErrorPlatform,FW=Mt.ErrorCustom,y2=Mt.Update,BW=Mt.Choose,zW=Mt.Pure,_2=".",s1={},N_="xstate.guard",qW="",lp;function jE(t,e,n){n===void 0&&(n=_2);var i=Rd(t,n),r=Rd(e,n);return St(r)?St(i)?r===i:!1:St(i)?i in r:Object.keys(i).every(function(o){return o in r?jE(i[o],r[o]):!1})}function T2(t){try{return St(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function D_(t,e){try{return Xu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function HW(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Rd(t,e){if(HW(t))return t.value;if(Xu(t))return Im(t);if(typeof t!="string")return t;var n=D_(t,e);return Im(n)}function Im(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function hd(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function o1(t,e,n){var i,r,o={};try{for(var l=dt(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];n(f)&&(o[d]=e(f,d,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var GW=function(t){return function(e){var n,i,r=e;try{for(var o=dt(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function jW(t,e){return function(n){var i,r,o=n;try{for(var l=dt(t),c=l.next();!c.done;c=l.next()){var d=c.value;o=o[e][d]}}catch(f){i={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function zp(t){if(!t)return[[]];if(St(t))return[[t]];var e=Qt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:zp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Qt(t){var e;return(e=[]).concat.apply(e,Gt([],vt(t),!1))}function E2(t){return Xu(t)?t:[t]}function Lr(t){return t===void 0?[]:E2(t)}function Rm(t,e,n){var i,r;if(Tt(t))return t(e,n.data);var o={};try{for(var l=dt(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];Tt(f)?o[d]=f(e,n.data):o[d]=f}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function $W(t){return/^(done|error)\./.test(t)}function a1(t){return!!(t instanceof Promise||t!==null&&(Tt(t)||typeof t=="object")&&Tt(t.then))}function KW(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function YW(t,e){var n,i,r=vt([[],[]],2),o=r[0],l=r[1];try{for(var c=dt(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function S2(t,e){return hd(t.states,function(n,i){if(n){var r=(St(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:S2(n,r)}}})}function JW(t,e){return{current:e,states:S2(t,e)}}function l1(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,d,f=l.assignment,p={state:i,action:l,_event:e},y={};if(Tt(f))y=f(o,e.data,p);else try{for(var _=dt(Object.keys(f)),b=_.next();!b.done;b=_.next()){var A=b.value,I=f[A];y[A]=Tt(I)?I(o,e.data,p):I}}catch(R){c={error:R}}finally{try{b&&!b.done&&(d=_.return)&&d.call(_)}finally{if(c)throw c.error}}return Object.assign({},o,y)},t);return r}var WW=function(){};function Xu(t){return Array.isArray(t)}function Tt(t){return typeof t=="function"}function St(t){return typeof t=="string"}function b2(t,e){if(t)return St(t)?{type:N_,name:t,predicate:e?e[t]:void 0}:Tt(t)?{type:N_,name:t.name,predicate:t}:t}function XW(t){try{return"subscribe"in t&&Tt(t.subscribe)}catch{return!1}}var Oo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();lp={},lp[Oo]=function(){return this},lp[Symbol.observable]=function(){return this};function Ou(t){return!!t&&"__xstatenode"in t}function QW(t){return!!t&&typeof t.send=="function"}function Ig(t,e){return St(t)||typeof t=="number"?_e({type:t},e):t}function Jn(t,e){if(!St(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Ig(t);return _e({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Xl(t,e){var n=E2(e).map(function(i){return typeof i>"u"||typeof i=="string"||Ou(i)?{target:i,event:t}:_e(_e({},i),{event:t})});return n}function ZW(t){if(!(t===void 0||t===qW))return Lr(t)}function w2(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===N_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function x2(t){return typeof t=="string"?{type:t}:t}function qp(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function up(t,e){return"".concat(t,":invocation[").concat(e,"]")}function M_(t){return(t.type===Ef||t.type===Cg&&t.to===Lu.Internal)&&typeof t.delay!="number"}var wu=Jn({type:UW});function P_(t,e){return e&&e[t]||void 0}function ef(t,e){var n;if(St(t)||typeof t=="number"){var i=P_(t,e);Tt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(Tt(t))n={type:t.name||t.toString(),exec:t};else{var i=P_(t.type,e);if(Tt(i))n=_e(_e({},t),{exec:i});else if(i){var r=i.type||t.type;n=_e(_e(_e({},i),t),{type:r})}else n=t}return n}var Uo=function(t,e){if(!t)return[];var n=Xu(t)?t:[t];return n.map(function(i){return ef(i,e)})};function $E(t){var e=ef(t);return _e(_e({id:St(t)?t:e.id},e),{type:e.type})}function eX(t,e){return{type:Ef,event:typeof t=="function"?t:Ig(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function tX(t,e,n,i){var r={_event:n},o=Jn(Tt(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=Tt(c)?c(e,n.data,r):c}else l=Tt(t.delay)?t.delay(e,n.data,r):t.delay;return _e(_e({},t),{type:Ef,_event:o,delay:l})}function nX(t,e){return{to:e?e.to:void 0,type:Cg,event:Tt(t)?t:Ig(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:Tt(t)?t.name:T2(t)}}function iX(t,e,n,i){var r={_event:n},o=Jn(Tt(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=Tt(c)?c(e,n.data,r):c}else l=Tt(t.delay)?t.delay(e,n.data,r):t.delay;var d=Tt(t.to)?t.to(e,n.data,r):t.to;return _e(_e({},t),{to:d,_event:o,event:o.data,delay:l})}var rX=function(t,e,n){return _e(_e({},t),{value:St(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},sX=function(t){return{type:g2,sendId:t}};function oX(t){var e=$E(t);return{type:Mt.Start,activity:e,exec:void 0}}function aX(t){var e=Tt(t)?t:$E(t);return{type:Mt.Stop,activity:e,exec:void 0}}function lX(t,e,n){var i=Tt(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Mt.Stop,activity:r};return o}var uX=function(t){return{type:GE,assignment:t}};function cX(t,e){var n=e?"#".concat(e):"";return"".concat(Mt.After,"(").concat(t,")").concat(n)}function cp(t,e){var n="".concat(Mt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function Hp(t,e){var n="".concat(Mt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function pd(t,e){var n="".concat(Mt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var dX=function(t){var e,n,i=[];try{for(var r=dt(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===GE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function Nm(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:dX(r),d=c.length?l1(n,i,c,e):n,f=l?[n]:void 0,p=[];function y(A,I){var R;switch(I.type){case Ef:{var V=tX(I,d,i,t.options.delays);return o&&typeof V.delay=="number"&&o(V,d,i),V}case Cg:var k=iX(I,d,i,t.options.delays);return o&&k.to!==Lu.Internal&&(A==="entry"?p.push(k):o(k,d,i)),k;case v2:{var O=rX(I,d,i);return o==null||o(O,d,i),O}case BW:{var G=I,K=(R=G.conds.find(function(W){var oe=b2(W.cond,t.options.guards);return!oe||w2(t,oe,d,i,o?void 0:e)}))===null||R===void 0?void 0:R.actions;if(!K)return[];var H=vt(Nm(t,e,d,i,[{type:A,actions:Uo(Lr(K),t.options.actions)}],o,l),2),D=H[0],N=H[1];return d=N,f==null||f.push(d),D}case zW:{var K=I.get(d,i.data);if(!K)return[];var M=vt(Nm(t,e,d,i,[{type:A,actions:Uo(Lr(K),t.options.actions)}],o,l),2),B=M[0],q=M[1];return d=q,f==null||f.push(d),B}case HE:{var O=lX(I,d,i);return o==null||o(O,n,i),O}case GE:{d=l1(d,i,[I],o?void 0:e),f==null||f.push(d);break}default:var F=ef(I,t.options.actions),U=F.exec;if(o)o(F,d,i);else if(U&&f){var ye=f.length-1,Ne=_e(_e({},F),{exec:function(W){for(var oe=[],he=1;he<arguments.length;he++)oe[he-1]=arguments[he];U.apply(void 0,Gt([f[ye]],vt(oe),!1))}});F=Ne}return F}}function _(A){var I,R,V=[];try{for(var k=dt(A.actions),O=k.next();!O.done;O=k.next()){var G=O.value,K=y(A.type,G);K&&(V=V.concat(K))}}catch(H){I={error:H}}finally{try{O&&!O.done&&(R=k.return)&&R.call(k)}finally{if(I)throw I.error}}return p.forEach(function(H){o(H,d,i)}),p.length=0,V}var b=Qt(r.map(_));return[b,d]}var au=function(t,e){var n=e(t);return n};function A2(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Oo]=function(){return this},e}function fX(t,e,n,i){var r,o=x2(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?Rm(t.data,n,i):void 0,d=l?C2(l,t.id,c):A2(t.id);return d.meta=t,d}function C2(t,e,n){var i=A2(e);if(i.deferred=!0,Ou(t)){var r=i.state=au(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function hX(t){try{return typeof t.send=="function"}catch{return!1}}function pX(t){return hX(t)&&"id"in t}function mX(t){var e;return _e((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Oo]=function(){return this},e),t)}var Dm=function(t){return t.type==="atomic"||t.type==="final"};function I2(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function tf(t){return I2(t).filter(function(e){return e.type!=="history"})}function R2(t){var e=[t];return Dm(t)?e:e.concat(Qt(tf(t).map(R2)))}function md(t,e){var n,i,r,o,l,c,d,f,p=new Set(t),y=k_(p),_=new Set(e);try{for(var b=dt(_),A=b.next();!A.done;A=b.next())for(var I=A.value,R=I.parent;R&&!_.has(R);)_.add(R),R=R.parent}catch(M){n={error:M}}finally{try{A&&!A.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var V=k_(_);try{for(var k=dt(_),O=k.next();!O.done;O=k.next()){var I=O.value;if(I.type==="compound"&&(!V.get(I)||!V.get(I).length))y.get(I)?y.get(I).forEach(function(B){return _.add(B)}):I.initialStateNodes.forEach(function(B){return _.add(B)});else if(I.type==="parallel")try{for(var G=(l=void 0,dt(tf(I))),K=G.next();!K.done;K=G.next()){var H=K.value;_.has(H)||(_.add(H),y.get(H)?y.get(H).forEach(function(B){return _.add(B)}):H.initialStateNodes.forEach(function(B){return _.add(B)}))}}catch(B){l={error:B}}finally{try{K&&!K.done&&(c=G.return)&&c.call(G)}finally{if(l)throw l.error}}}}catch(M){r={error:M}}finally{try{O&&!O.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var D=dt(_),N=D.next();!N.done;N=D.next())for(var I=N.value,R=I.parent;R&&!_.has(R);)_.add(R),R=R.parent}catch(M){d={error:M}}finally{try{N&&!N.done&&(f=D.return)&&f.call(D)}finally{if(d)throw d.error}}return _}function N2(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Dm(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=N2(o,e)}),r}function k_(t){var e,n,i=new Map;try{for(var r=dt(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function gX(t,e){var n=md([t],e);return N2(t,k_(n))}function gd(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function vX(t){return Gt([],vt(new Set(Qt(Gt([],vt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Gp(t,e){return e.type==="compound"?tf(e).some(function(n){return n.type==="final"&&gd(t,n)}):e.type==="parallel"?tf(e).every(function(n){return Gp(t,n)}):!1}function yX(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function u1(t){return new Set(Qt(t.map(function(e){return e.tags})))}function D2(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(St(t)||St(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return D2(t[r],e[r])})}function _X(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function TX(t,e){var n=t.exec,i=_e(_e({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var Er=(function(){function t(e){var n=this,i;this.actions=[],this.activities=s1,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||s1,this.meta=yX(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return vX(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=wu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=wu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),St(e))return[e];var r=Object.keys(e);return r.concat.apply(r,Gt([],vt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=qE(e,["configuration","transitions","tags","machine"]);return _e(_e({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return jE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;WW(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),EX={deferEvents:!1},c1=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=_e(_e({},EX),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),h0=new Map,SX=0,Qc={bookId:function(){return"x:".concat(SX++)},register:function(t,e){return h0.set(t,e),t},get:function(t){return h0.get(t)},free:function(t){h0.delete(t)}};function KE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function bX(){var t=KE();if(t&&"__xstate__"in t)return t.__xstate__}function wX(t){if(KE()){var e=bX();e&&e.register(t)}}function xX(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var f=r.shift();n=t.transition(n,f,d),i.forEach(function(p){return p.next(n)})}o=!1}},c=mX({id:e.id,send:function(f){r.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,p,y){var _=qp(f,p,y);return i.add(_),_.next(n),{unsubscribe:function(){i.delete(_)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var AX={sync:!1,autoForward:!1},Fn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Fn||(Fn={}));var CX=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Fn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,y){if(Xu(p))return i.batch(p),i.state;var _=Jn(Ig(p,y));if(i.status===Fn.Stopped)return i.state;if(i.status!==Fn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(_.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(_.data)));return i.scheduler.schedule(function(){i.forward(_);var b=i._nextState(_);i.update(b,_)}),i._state},this.sendTo=function(p,y,_){var b=i.parent&&(y===Lu.Parent||i.parent.id===y),A=b?i.parent:St(y)?y===Lu.Internal?i:i.children.get(y)||Qc.get(y):QW(y)?y:void 0;if(!A){if(!b)throw new Error("Unable to send event to child '".concat(y,"' from service '").concat(i.id,"'."));return}if("machine"in A){if(i.status!==Fn.Stopped||i.parent!==A||i.state.done){var I=_e(_e({},p),{name:p.name===FW?"".concat(pd(i.id)):p.name,origin:i.sessionId});!_&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([A,I]):A.send(I)}}else!_&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([A,p.data]):A.send(p.data)},this._exec=function(p,y,_,b){b===void 0&&(b=i.machine.options.actions);var A=p.exec||P_(p.type,b),I=Tt(A)?A:A?A.exec:p.exec;if(I)try{return I(y,_.data,i.machine.config.predictableActionArguments?{action:p,_event:_}:{action:p,state:i.state,_event:_})}catch(ye){throw i.parent&&i.parent.send({type:"xstate.error",data:ye}),ye}switch(p.type){case Ef:{var R=p;i.defer(R);break}case Cg:var V=p;if(typeof V.delay=="number"){i.defer(V);return}else V.to?i.sendTo(V._event,V.to,_===wu):i.send(V._event);break;case g2:i.cancel(p.sendId);break;case I_:{if(i.status!==Fn.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Mt.Invoke){var O=x2(k.src),G=i.machine.options.services?i.machine.options.services[O.type]:void 0,K=k.id,H=k.data,D="autoForward"in k?k.autoForward:!!k.forward;if(!G)return;var N=H?Rm(H,y,_):void 0;if(typeof G=="string")return;var M=Tt(G)?G(y,_.data,{data:N,src:O,meta:k.meta}):G;if(!M)return;var B=void 0;Ou(M)&&(M=N?M.withContext(N):M,B={autoForward:D}),i.spawn(M,K,B)}else i.spawnActivity(k);break}case HE:{i.stopChild(p.activity.id);break}case v2:var q=p,F=q.label,U=q.value;F?i.logger(F,U):i.logger(U);break}};var r=_e(_e({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,d=r.id,f=d!==void 0?d:e.id;this.id=f,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new c1({deferEvents:this.options.deferEvents}),this.sessionId=Qc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:au(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=dt(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,d,f,p,y=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===wu)&&this.options.execute)this.execute(this.state);else for(var _=void 0;_=this._outgoingQueue.shift();)_[0].send(_[1]);if(this.children.forEach(function(M){y.state.children[M.id]=M}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=dt(this.eventListeners),A=b.next();!A.done;A=b.next()){var I=A.value;I(e.event)}}catch(M){i={error:M}}finally{try{A&&!A.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var R=dt(this.listeners),V=R.next();!V.done;V=R.next()){var I=V.value;I(e,e.event)}}catch(M){o={error:M}}finally{try{V&&!V.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}try{for(var k=dt(this.contextListeners),O=k.next();!O.done;O=k.next()){var G=O.value;G(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(M){c={error:M}}finally{try{O&&!O.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(M){return M.type==="final"&&M.parent===y.machine}),H=K&&K.doneData?Rm(K.doneData,e.context,n):void 0;this._doneEvent=Hp(this.id,H);try{for(var D=dt(this.doneListeners),N=D.next();!N.done;N=D.next()){var I=N.value;I(this._doneEvent)}}catch(M){f={error:M}}finally{try{N&&!N.done&&(p=D.return)&&p.call(D)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Qc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Fn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=qp(e,n,i);this.listeners.add(o.next),this.status!==Fn.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Fn.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Fn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Fn.Running)return this;this.machine._init(),Qc.register(this.sessionId,this),this.initialized=!0,this.status=Fn.Running;var i=e===void 0?this.initialState:au(this,function(){return _X(e)?n.machine.resolveState(e):n.machine.resolveState(Er.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,wu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){Tt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,d,f,p;try{for(var y=dt(this.listeners),_=y.next();!_.done;_=y.next()){var b=_.value;this.listeners.delete(b)}}catch(D){e={error:D}}finally{try{_&&!_.done&&(n=y.return)&&n.call(y)}finally{if(e)throw e.error}}try{for(var A=dt(this.stopListeners),I=A.next();!I.done;I=A.next()){var b=I.value;b(),this.stopListeners.delete(b)}}catch(D){i={error:D}}finally{try{I&&!I.done&&(r=A.return)&&r.call(A)}finally{if(i)throw i.error}}try{for(var R=dt(this.contextListeners),V=R.next();!V.done;V=R.next()){var b=V.value;this.contextListeners.delete(b)}}catch(D){o={error:D}}finally{try{V&&!V.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}try{for(var k=dt(this.doneListeners),O=k.next();!O.done;O=k.next()){var b=O.value;this.doneListeners.delete(b)}}catch(D){c={error:D}}finally{try{O&&!O.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Fn.Stopped,this._initialState=void 0;try{for(var G=dt(Object.keys(this.delayedEventsMap)),K=G.next();!K.done;K=G.next()){var H=K.value;this.clock.clearTimeout(this.delayedEventsMap[H])}}catch(D){f={error:D}}finally{try{K&&!K.done&&(p=G.return)&&p.call(G)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new c1({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Jn({type:"xstate.stop"}),o=au(e,function(){var l=Qt(Gt([],vt(e.state.configuration),!1).sort(function(y,_){return _.order-y.order}).map(function(y){return Uo(y.onExit,e.machine.options.actions)})),c=vt(Nm(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],f=c[1],p=new Er({value:e.state.value,context:f,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(y){return!M_(y)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Qc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Fn.NotStarted&&this.options.deferEvents)){if(this.status!==Fn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,d=[],f=function(b){var A=Jn(b);n.forward(A),l=au(n,function(){return n.machine.transition(l,A,void 0,i||void 0)}),d.push.apply(d,Gt([],vt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(I){return TX(I,l)})),!1)),c=c||!!l.changed};try{for(var p=dt(e),y=p.next();!y.done;y=p.next()){var _=y.value;f(_)}}catch(b){r={error:b}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=d,n.update(l,Jn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Jn(e);if(r.name.indexOf(r1)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(r1)===0}))throw r.data.data;var o=au(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=dt(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),Tt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Fn.Running)return C2(e,n);if(a1(e))return this.spawnPromise(Promise.resolve(e),n);if(Tt(e))return this.spawnCallback(e,n);if(pX(e))return this.spawnActor(e,n);if(XW(e))return this.spawnObservable(e,n);if(Ou(e))return this.spawnMachine(e,_e(_e({},i),{id:n}));if(KW(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,_e(_e({},this.options),{parent:this,id:n.id||e.id})),o=_e(_e({},AX),n);o.sync&&r.onTransition(function(c){i.send(y2,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Jn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=xX(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(d){o||(l=d,r.removeChild(n),r.send(Jn(Hp(n,d),{origin:n})))},function(d){if(!o){r.removeChild(n);var f=pd(n,d);try{r.send(Jn(f,{origin:n}))}catch{r.devTools&&r.devTools.send(f,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,f,p){var y=qp(d,f,p),_=!1;return e.then(function(b){_||(y.next(b),!_&&y.complete())},function(b){_||y.error(b)}),{unsubscribe:function(){return _=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Oo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,d,f=function(_){d=_,c.forEach(function(b){return b(_)}),!o&&r.send(Jn(_,{origin:n}))},p;try{p=e(f,function(_){l.add(_)})}catch(_){this.send(pd(n,_))}if(a1(p))return this.spawnPromise(p,n);var y=(i={id:n,send:function(_){return l.forEach(function(b){return b(_)})},subscribe:function(_){var b=qp(_);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,Tt(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[Oo]=function(){return this},i);return this.children.set(n,y),y},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(d){o=d,r.send(Jn(d,{origin:n}))},function(d){r.removeChild(n),r.send(Jn(pd(n,d),{origin:n}))},function(){r.removeChild(n),r.send(Jn(Hp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,f,p){return e.subscribe(d,f,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Oo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Oo]=function(){return this},i))},t.prototype.attachDev=function(){var e=KE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(_e(_e({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:_e({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}wX(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Oo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Fn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=M2,t})();function M2(t,e){var n=new CX(t,e);return n}function IX(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function dp(t){return _e(_e({type:R_},t),{toJSON:function(){t.onDone,t.onError;var e=qE(t,["onDone","onError"]);return _e(_e({},e),{type:R_,src:IX(t.src)})}})}var fp="",V_="#",p0="*",Ql={},Zl=function(t){return t[0]===V_},RX=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},NX=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(RX(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:_2),this.id=this.config.id||Gt([this.machine.key],vt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?hd(this.config.states,function(f,p){var y,_=new t(f,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,_e((y={},y[_.id]=_,y),_.idMap)),_}):Ql;var c=0;function d(f){var p,y;f.order=c++;try{for(var _=dt(I2(f)),b=_.next();!b.done;b=_.next()){var A=b.value;d(A)}}catch(I){p={error:I}}finally{try{b&&!b.done&&(y=_.return)&&y.call(_)}finally{if(p)throw p.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var p=f.event;return p===fp}):fp in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Lr(this.config.entry||this.config.onEntry).map(function(f){return ef(f)}),this.onExit=Lr(this.config.exit||this.config.onExit).map(function(f){return ef(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Lr(this.config.invoke).map(function(f,p){var y,_;if(Ou(f)){var b=up(o.id,p);return o.machine.options.services=_e((y={},y[b]=f,y),o.machine.options.services),dp({src:b,id:b})}else if(St(f.src)){var b=f.id||up(o.id,p);return dp(_e(_e({},f),{id:b,src:f.src}))}else if(Ou(f.src)||Tt(f.src)){var b=f.id||up(o.id,p);return o.machine.options.services=_e((_={},_[b]=f.src,_),o.machine.options.services),dp(_e(_e({id:b},f),{src:b}))}else{var A=f.src;return dp(_e(_e({id:up(o.id,p)},f),{src:A}))}}),this.activities=Lr(this.config.activities).concat(this.invoke).map(function(f){return $E(f)}),this.transition=this.transition.bind(this),this.tags=Lr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||R2(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:_e(_e({},r),e.actions),activities:_e(_e({},o),e.activities),guards:_e(_e({},l),e.guards),services:_e(_e({},c),e.services),delays:_e(_e({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return Tt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:hd(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===fp,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===p0});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=Tt(o)?"".concat(e.id,":delay[").concat(l,"]"):o,d=cX(c,e.id);return e.onEntry.push(nX(d,{delay:o})),e.onExit.push(sX(d)),d},r=Xu(n)?n.map(function(o,l){var c=i(o.delay,l);return _e(_e({},o),{event:c})}):Qt(Object.keys(n).map(function(o,l){var c=n[o],d=St(c)?{target:c}:c,f=isNaN(+o)?o:+o,p=i(f,l);return Lr(d).map(function(y){return _e(_e({},y),{event:p,delay:f})})}));return r.map(function(o){var l=o.delay;return _e(_e({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof Er?e.value:Rd(e,this.delimiter);if(St(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,Gt([],vt(Qt(l.map(function(d){return i.getStateNode(d).getStateNodes(r[d])}))),!1)),c},t.prototype.handles=function(e){var n=T2(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof Er?e:Er.create(e),i=Array.from(md([],this.getStateNodes(n.value)));return new Er(_e(_e({},n),{value:this.resolve(n.value),configuration:i,done:Gp(i,this),tags:u1(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=dt(Object.keys(e)),d=c.next();!d.done;d=c.next()){var f=d.value,p=e[f];if(p){var y=this.getStateNode(f),_=y._transition(p,n,i);_&&(l[f]=_)}}}catch(V){r={error:V}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(V){return l[V]}),A=Qt(b.map(function(V){return V.transitions})),I=b.some(function(V){return V.transitions.length>0});if(!I)return this.next(n,i);var R=Qt(Object.keys(l).map(function(V){return l[V].configuration}));return{transitions:A,exitSet:Qt(b.map(function(V){return V.exitSet})),configuration:R,source:n,actions:Qt(Object.keys(l).map(function(V){return l[V].actions}))}},t.prototype._transition=function(e,n,i){return St(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Jn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],d=[],f;try{for(var p=dt(this.getCandidates(l)),y=p.next();!y.done;y=p.next()){var _=y.value,b=_.cond,A=_.in,I=e.context,R=A?St(A)&&Zl(A)?e.matches(Rd(this.getStateNodeById(A).path,this.delimiter)):jE(Rd(A,this.delimiter),GW(this.path.slice(0,-2))(e.value)):!0,V=!1;try{V=!b||w2(this.machine,b,I,n,e)}catch(G){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(G.message))}if(V&&R){_.target!==void 0&&(d=_.target),c.push.apply(c,Gt([],vt(_.actions),!1)),f=_;break}}}catch(G){i={error:G}}finally{try{y&&!y.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Qt(d.map(function(G){return o.getRelativeStateNodes(G,e.historyValue)})),O=!!f.internal;return{transitions:[f],exitSet:O?[]:Qt(d.map(function(G){return o.getPotentiallyReenteringNodes(G)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var d,f,p,y,_=this,b=l?md([],this.getStateNodes(l.value)):[],A=new Set;try{for(var I=dt(Array.from(e).sort(function(q,F){return q.order-F.order})),R=I.next();!R.done;R=I.next()){var V=R.value;(!gd(b,V)||gd(i.exitSet,V)||V.parent&&A.has(V.parent))&&A.add(V)}}catch(q){d={error:q}}finally{try{R&&!R.done&&(f=I.return)&&f.call(I)}finally{if(d)throw d.error}}try{for(var k=dt(b),O=k.next();!O.done;O=k.next()){var V=O.value;(!gd(e,V)||gd(i.exitSet,V.parent))&&i.exitSet.push(V)}}catch(q){p={error:q}}finally{try{O&&!O.done&&(y=k.return)&&y.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(q,F){return F.order-q.order});var G=Array.from(A).sort(function(q,F){return q.order-F.order}),K=new Set(i.exitSet),H=Qt(G.map(function(q){var F=[];if(q.type!=="final")return F;var U=q.parent;if(!U.parent)return F;F.push(cp(q.id,q.doneData),cp(U.id,q.doneData?Rm(q.doneData,r,o):void 0));var ye=U.parent;return ye.type==="parallel"&&tf(ye).every(function(Ne){return Gp(i.configuration,Ne)})&&F.push(cp(ye.id)),F})),D=G.map(function(q){var F=q.onEntry,U=q.activities.map(function(ye){return oX(ye)});return{type:"entry",actions:Uo(c?Gt(Gt([],vt(F),!1),vt(U),!1):Gt(Gt([],vt(U),!1),vt(F),!1),_.machine.options.actions)}}).concat({type:"state_done",actions:H.map(function(q){return eX(q)})}),N=Array.from(K).map(function(q){return{type:"exit",actions:Uo(Gt(Gt([],vt(q.onExit),!1),vt(q.activities.map(function(F){return aX(F)})),!1),_.machine.options.actions)}}),M=N.concat({type:"transition",actions:Uo(i.actions,this.machine.options.actions)}).concat(D);if(n){var B=Uo(Qt(Gt([],vt(e),!1).sort(function(q,F){return F.order-q.order}).map(function(q){return q.onExit})),this.machine.options.actions).filter(function(q){return!M_(q)});return M.concat({type:"stop",actions:B})}return M},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Jn(n),l;if(e instanceof Er)l=i===void 0?e:this.resolveState(Er.from(e,i));else{var c=St(e)?this.resolve(Im(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(Er.from(c,d))}if(this.strict&&!this.events.includes(o.name)&&!$W(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=md([],this.getStateNodes(l.value)),y=f.configuration.length?md(p,f.configuration):p;return f.configuration=Gt([],vt(y),!1),this.resolveTransition(f,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,Gt([],vt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,d,f,p=this;o===void 0&&(o=wu);var y=e.configuration,_=!n||e.transitions.length>0,b=_?e.configuration:n?n.configuration:[],A=Gp(b,this),I=_?gX(this.machine,y):void 0,R=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,V=this.getActions(new Set(b),A,e,i,o,n,r),k=n?_e({},n.activities):{};try{for(var O=dt(V),G=O.next();!G.done;G=O.next()){var K=G.value;try{for(var H=(d=void 0,dt(K.actions)),D=H.next();!D.done;D=H.next()){var N=D.value;N.type===I_?k[N.activity.id||N.activity.type]=N:N.type===HE&&(k[N.activity.id||N.activity.type]=!1)}}catch(se){d={error:se}}finally{try{D&&!D.done&&(f=H.return)&&f.call(H)}finally{if(d)throw d.error}}}}catch(se){l={error:se}}finally{try{G&&!G.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}var M=vt(Nm(this,n,i,o,V,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),B=M[0],q=M[1],F=vt(YW(B,M_),2),U=F[0],ye=F[1],Ne=B.filter(function(se){var ge;return se.type===I_&&((ge=se.activity)===null||ge===void 0?void 0:ge.type)===R_}),W=Ne.reduce(function(se,ge){return se[ge.activity.id]=fX(ge.activity,p.machine,q,o),se},n?_e({},n.children):{}),oe=new Er({value:I||n.value,context:q,_event:o,_sessionid:n?n._sessionid:null,historyValue:I?R?JW(R,I):void 0:n?n.historyValue:void 0,history:!I||e.source?n:void 0,actions:I?ye:[],activities:I?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:W,done:A,tags:u1(b),machine:this}),he=i!==q;oe.changed=o.name===y2||he;var xe=oe.history;xe&&delete xe.history;var Ae=!A&&(this._transient||y.some(function(se){return se._transient}));if(!_&&(!Ae||o.name===fp))return oe;var j=oe;if(!A)for(Ae&&(j=this.resolveRaisedTransition(j,{type:OW},o,r));U.length;){var ee=U.shift();j=this.resolveRaisedTransition(j,ee._event,o,r)}var ne=j.changed||(xe?!!j.actions.length||he||typeof xe.value!=typeof j.value||!D2(j.value,xe.value):void 0);return j.changed=ne,j.history=xe,j},t.prototype.getStateNode=function(e){if(Zl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Zl(e)?e.slice(V_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Zl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=D_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||Ql;switch(this.type){case"parallel":return hd(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):Ql});case"compound":if(St(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?hd(e,function(o,l){return o?i.getStateNode(l).resolve(o):Ql}):this.initialStateValue||{};default:return e||Ql}},t.prototype.getResolvedPath=function(e){if(Zl(e)){var n=this.machine.idMap[e.slice(V_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return D_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=o1(this.states,function(i){return i.initialStateValue||Ql},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Dm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;St(n.target)?e=Zl(n.target)?Im(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Dm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=zp(this.initialStateValue);return Qt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=vt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:o1(this.states,function(n,i){if(!e)return n.historyValue();var r=St(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Qt(zp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=jW(i.path,"states")(e).current;return St(o)?[i.getStateNode(o)]:Qt(zp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Qt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=dt(Object.keys(o)),d=c.next();!d.done;d=c.next()){var f=d.value,p=o[f];if(p.states)try{for(var y=(i=void 0,dt(p.events)),_=y.next();!_.done;_=y.next()){var b=_.value;l.add("".concat(b))}}catch(A){i={error:A}}finally{try{_&&!_.done&&(r=y.return)&&r.call(y)}finally{if(i)throw i.error}}}}catch(A){e={error:A}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!St(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=ZW(e.target),r="internal"in e?e.internal:i?i.some(function(d){return St(d)&&d[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=_e(_e({},e),{actions:Uo(Lr(e.actions)),cond:b2(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return _e(_e({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=p0,c=o[l],d=c===void 0?[]:c,f=qE(o,[typeof l=="symbol"?l:l+""]);r=Qt(Object.keys(f).map(function(k){var O=Xl(k,f[k]);return O}).concat(Xl(p0,d)))}var p=this.config.always?Xl("",this.config.always):[],y=this.config.onDone?Xl(String(cp(this.id)),this.config.onDone):[],_=Qt(this.invoke.map(function(k){var O=[];return k.onDone&&O.push.apply(O,Gt([],vt(Xl(String(Hp(k.id)),k.onDone)),!1)),k.onError&&O.push.apply(O,Gt([],vt(Xl(String(pd(k.id)),k.onError)),!1)),O})),b=this.after,A=Qt(Gt(Gt(Gt(Gt([],vt(y),!1),vt(_),!1),vt(r),!1),vt(p),!1).map(function(k){return Lr(k).map(function(O){return i.formatTransition(O)})}));try{for(var I=dt(b),R=I.next();!R.done;R=I.next()){var V=R.value;A.push(V)}}catch(k){e={error:k}}finally{try{R&&!R.done&&(n=I.return)&&n.call(I)}finally{if(e)throw e.error}}return A},t})();function DX(t,e,n){return n===void 0&&(n=t.context),new NX(t,e,n)}var MX=uX,L_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(L_||(L_={}));var Nd=z.useLayoutEffect;function d1(t){var e=z.useRef();return e.current||(e.current={v:t()}),e.current.v}var PX=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},kX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function VX(t,e){var n,i,r=PX([[],[]],2),o=r[0],l=r[1];try{for(var c=kX(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var Zc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},f1=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function h1(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function LX(t){var e=z.useRef([]),n=z.useRef([]);Nd(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(y){return typeof y.exec=="function"&&"__effect"in y.exec}),d=Zc(VX(c,function(y){return y.exec.__effect===L_.Effect}),2),f=d[0],p=d[1];(o=e.current).push.apply(o,f1([],Zc(f.map(function(y){return[y,r]})),!1)),(l=n.current).push.apply(l,f1([],Zc(p.map(function(y){return[y,r]})),!1))}});return function(){i.unsubscribe()}},[]),Nd(function(){for(;n.current.length;){var i=Zc(n.current.shift(),2),r=i[0],o=i[1];h1(r,o)}}),z.useEffect(function(){for(;e.current.length;){var i=Zc(e.current.shift(),2),r=i[0],o=i[1];h1(r,o)}})}var Dd=function(){return Dd=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Dd.apply(this,arguments)},OX=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function UX(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function FX(t,e,n){e===void 0&&(e={});var i=d1(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,d=e.services,f=e.delays,p=e.state,y=OX(e,["context","guards","actions","activities","services","delays","state"]),_=d1(function(){var b={context:r,guards:o,actions:l,activities:c,services:d,delays:f},A=i.withConfig(b,function(){return Dd(Dd({},i.context),r)});return M2(A,Dd({deferEvents:!0},y))});return Nd(function(){var b;return n&&(b=_.subscribe(UX(n))),function(){b==null||b.unsubscribe()}},[n]),Nd(function(){return _.start(p?Er.create(p):void 0),function(){_.stop()}},[]),Nd(function(){Object.assign(_.machine.options.actions,l),Object.assign(_.machine.options.guards,o),Object.assign(_.machine.options.activities,c),Object.assign(_.machine.options.services,d),Object.assign(_.machine.options.delays,f)},[l,o,c,d,f]),LX(_),_}var BX=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function zX(t,e){e===void 0&&(e={});var n=z.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=FX(t,e,n),r=BX(z.useState(function(){var c=i.machine.initialState;return e.state?Er.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},on.apply(null,arguments)}function xu(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const st={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(st.str(t)||st.num(t))return t===e;if(st.obj(t)&&st.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return st.und(n)?t===e:!0}};function qX(t,e){return n=>(st.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function HX(){const t=z.useState(!1),e=t[1];return z.useCallback(()=>e(i=>!i),[])}function Oa(t,e){return st.und(t)||st.nul(t)?e:t}function hp(t){return st.und(t)?[]:st.arr(t)?t:[t]}function mu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return st.fun(t)?t(...n):t}function GX(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,xu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function m0(t){const e=GX(t);if(st.und(e))return on({to:e},t);const n=Object.keys(t).reduce((i,r)=>st.und(e[r])?on({},i,{[r]:t[r]}):i,{});return on({to:e},n)}function jX(t,e){return e&&(st.fun(e)?e(t):st.obj(e)&&(e.current=t)),t}class Or{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class O_ extends Or{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Or&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Or&&e.removeChild(this))}}class P2 extends Or{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Or&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Or&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Or)||(n[i]=r instanceof Or?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let YE;function $X(t,e){YE={fn:t,transform:e}}let k2;function KX(t){k2=t}let V2=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Mm;function YX(t){Mm=t}let L2=()=>Date.now(),JX=t=>t.current,O2;function WX(t){O2=t}class XX extends P2{constructor(e,n){super(),this.update=void 0,this.payload=e.style?on({},e,{style:O2(e.style)}):e,this.update=n,this.attach()}}const QX=t=>st.fun(t)&&!(t.prototype instanceof Dn.Component),ZX=t=>z.forwardRef((n,i)=>{const r=HX(),o=z.useRef(!0),l=z.useRef(null),c=z.useRef(null),d=z.useCallback(_=>{const b=l.current,A=()=>{let I=!1;c.current&&(I=YE.fn(c.current,l.current.getAnimatedValue())),(!c.current||I===!1)&&r()};l.current=new XX(_,A),b&&b.detach()},[]);z.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),z.useImperativeHandle(i,()=>JX(c)),d(n);const f=l.current.getValue();f.scrollTop,f.scrollLeft;const p=xu(f,["scrollTop","scrollLeft"]),y=QX(t)?void 0:_=>c.current=jX(_,i);return Dn.createElement(t,on({},p,{ref:y}))});let Md=!1;const Xa=new Set,U2=()=>{if(!Md)return!1;let t=L2();for(let e of Xa){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let d=r.animatedValues[c];if(d.done)continue;let f=r.fromValues[c],p=r.toValues[c],y=d.lastPosition,_=p instanceof Or,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(_&&(p=p.getValue()),r.immediate){d.setValue(p),d.done=!0;continue}if(typeof f=="string"||typeof p=="string"){d.setValue(p),d.done=!0;continue}if(r.duration!==void 0)y=f+r.easing((t-d.startTime)/r.duration)*(p-f),o=t>=d.startTime+r.duration;else if(r.decay)y=f+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),o=Math.abs(d.lastPosition-y)<.1,o&&(p=y);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let A=Math.floor(t-l);for(let k=0;k<A;++k){let O=-r.tension*(y-p),G=-r.friction*b,K=(O+G)/r.mass;b=b+K*1/1e3,y=y+b*1/1e3}let I=r.clamp&&r.tension!==0?f<p?y>p:y<p:!1,R=Math.abs(b)<=r.precision,V=r.tension!==0?Math.abs(p-y)<=r.precision:!0;o=I||R&&V,d.lastVelocity=b,d.lastTime=t}_&&!r.toValues[c].done&&(o=!1),o?(d.value!==p&&(y=p),d.done=!0):n=!0,d.setValue(y),d.lastPosition=y}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Xa.delete(e),e.stop(!0))}return Xa.size?V2(U2):Md=!1,Md},eQ=t=>{Xa.has(t)||Xa.add(t),Md||(Md=!0,V2(U2))},tQ=t=>{Xa.has(t)&&Xa.delete(t)};function Pm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Pm({range:t,output:e,extrapolate:n});if(Mm&&typeof t.output[0]=="string")return Mm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(f=>f);return f=>{const p=iQ(f,o);return nQ(f,o[p],o[p+1],r[p],r[p+1],d,l,c,i.map)}}function nQ(t,e,n,i,r,o,l,c,d){let f=d?d(t):t;if(f<e){if(l==="identity")return f;l==="clamp"&&(f=e)}if(f>n){if(c==="identity")return f;c==="clamp"&&(f=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function iQ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Uu extends O_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof O_&&!(e instanceof Uu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Pm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Pm(e,n,i)}interpolate(e,n,i){return new Uu(this,e,n,i)}}const eu=(t,e,n)=>t&&new Uu(t,e,n),rQ={default:{tension:170,friction:26}};function F2(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>F2(n,e))}class U_ extends Or{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&F2(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Uu(this,e,n,i)}}class sQ extends O_{constructor(e){super(),this.payload=e.map(n=>new U_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Uu(this,e,n)}}let oQ=0,aQ=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=oQ++}update(e){if(!e)return this;const n=m0(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=xu(n,["delay","to"]);if(st.arr(o)||st.fun(o))this.queue.push(on({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(d=>{let f=d[0],p=d[1];const y=on({to:{[f]:p},delay:mu(r,f)},l),_=c[y.delay]&&c[y.delay].to;c[y.delay]=on({},c[y.delay],y,{to:on({},_,y.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,d=c===void 0?{}:c;st.obj(l)&&(this.merged=on({},l,this.merged)),st.obj(d)&&(this.merged=on({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=xu(r,["delay"]);const d=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=st.arr(c.to)||st.fun(c.to);l?setTimeout(()=>{n===this.guid&&(f?this.runAsync(c,d):this.diff(c).start(d))},l):f?this.runAsync(c,d):this.diff(c).start(d)})}else st.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),eQ(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&tQ(this),this}runAsync(e,n){var i=this;e.delay;let r=xu(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(st.arr(r.to))for(let c=0;c<r.to.length;c++){const d=c,f=on({},r,m0(r.to[d]));st.arr(f.config)&&(f.config=f.config[d]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(f).start(p))})}else if(st.fun(r.to)){let c=0,d;l=l.then(()=>r.to(f=>{const p=on({},r,m0(f));if(st.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return d=new Promise(y=>this.diff(p).start(y))},function(f){return f===void 0&&(f=!0),i.stop(f)}).then(()=>d))}l.then(n)}diff(e){this.props=on({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,d=c===void 0?{}:c,f=n.reverse,p=n.attach,y=n.reset,_=n.immediate;if(f){var b=[l,r];r=b[0],l=b[1]}this.merged=on({},r,this.merged,l),this.hasChanged=!1;let A=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((I,R)=>{let V=R[0],k=R[1],O=I[V]||{};const G=st.num(k),K=st.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!k2[k],H=st.arr(k),D=!G&&!H&&!K;let N=st.und(r[V])?k:r[V],M=G||H||K?k:1,B=mu(d,V);A&&(M=A.animations[V].parent);let q=O.parent,F=O.interpolation,U=hp(A?M.getPayload():M),ye,Ne=k;D&&(Ne=Mm({range:[0,1],output:[k,k]})(1));let W=F&&F.getValue();const he=!st.und(q)&&O.animatedValues.some(ee=>!ee.done),xe=!st.equ(Ne,W),Ae=!st.equ(Ne,O.previous),j=!st.equ(B,O.config);if(y||Ae&&xe||j){if(G||K)q=F=O.parent||new U_(N);else if(H)q=F=O.parent||new sQ(N);else if(D){let ee=O.interpolation&&O.interpolation.calc(O.parent.value);ee=ee!==void 0&&!y?ee:N,O.parent?(q=O.parent,q.setValue(0,!1)):q=new U_(0);const ne={output:[ee,k]};O.interpolation?(F=O.interpolation,O.interpolation.updateConfig(ne)):F=q.interpolate(ne)}return U=hp(A?M.getPayload():M),ye=hp(q.getPayload()),y&&!D&&q.setValue(N,!1),this.hasChanged=!0,ye.forEach(ee=>{ee.startPosition=ee.value,ee.lastPosition=ee.value,ee.lastVelocity=he?ee.lastVelocity:void 0,ee.lastTime=he?ee.lastTime:void 0,ee.startTime=L2(),ee.done=!1,ee.animatedStyles.clear()}),mu(_,V)&&q.setValue(D?M:k,!1),on({},I,{[V]:on({},O,{name:V,parent:q,interpolation:F,animatedValues:ye,toValues:U,previous:Ne,config:B,fromValues:hp(q.getValue()),immediate:mu(_,V),initialVelocity:Oa(B.velocity,0),clamp:Oa(B.clamp,!1),precision:Oa(B.precision,.01),tension:Oa(B.tension,170),friction:Oa(B.friction,26),mass:Oa(B.mass,1),duration:B.duration,easing:Oa(B.easing,ee=>ee),decay:B.decay})})}else return xe?I:(D&&(q.setValue(1,!1),F.updateConfig({output:[Ne,Ne]})),q.done=!0,this.hasChanged=!0,on({},I,{[V]:on({},I[V],{previous:Ne})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let I in this.animations)this.interpolations[I]=this.animations[I].interpolation,this.values[I]=this.animations[I].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const lQ=(t,e)=>{const n=z.useRef(!1),i=z.useRef(),r=st.fun(e),o=z.useMemo(()=>{i.current&&(i.current.map(y=>y.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((y,_)=>{const b=new aQ,A=r?mu(e,_,b):e[_];return _===0&&(p=A.ref),b.update(A),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,z.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(y=>p.start(y)))),stop:p=>i.current.forEach(y=>y.stop(p)),get controllers(){return i.current}}));const d=z.useMemo(()=>p=>i.current.map((y,_)=>{y.update(r?mu(p,_,y):p[_]),c||y.start()}),[t]);z.useEffect(()=>{n.current?r||d(e):c||i.current.forEach(p=>p.start())}),z.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const f=i.current.map(p=>p.getValues());return r?[f,d,p=>i.current.forEach(y=>y.pause(p))]:f},uQ=t=>{const e=st.fun(t),n=lQ(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class cQ extends P2{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Or)&&(e=YE.transform(e)),this.payload=e}}const km={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Br="[-+]?\\d*\\.?\\d+",Vm=Br+"%";function Rg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const dQ=new RegExp("rgb"+Rg(Br,Br,Br)),fQ=new RegExp("rgba"+Rg(Br,Br,Br,Br)),hQ=new RegExp("hsl"+Rg(Br,Vm,Vm)),pQ=new RegExp("hsla"+Rg(Br,Vm,Vm,Br)),mQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,vQ=/^#([0-9a-fA-F]{6})$/,yQ=/^#([0-9a-fA-F]{8})$/;function _Q(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=vQ.exec(t))?parseInt(e[1]+"ff",16)>>>0:km.hasOwnProperty(t)?km[t]:(e=dQ.exec(t))?(tu(e[1])<<24|tu(e[2])<<16|tu(e[3])<<8|255)>>>0:(e=fQ.exec(t))?(tu(e[1])<<24|tu(e[2])<<16|tu(e[3])<<8|g1(e[4]))>>>0:(e=mQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=yQ.exec(t))?parseInt(e[1],16)>>>0:(e=gQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=hQ.exec(t))?(p1(m1(e[1]),pp(e[2]),pp(e[3]))|255)>>>0:(e=pQ.exec(t))?(p1(m1(e[1]),pp(e[2]),pp(e[3]))|g1(e[4]))>>>0:null}function g0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function p1(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=g0(r,i,t+1/3),l=g0(r,i,t),c=g0(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function tu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function m1(t){return(parseFloat(t)%360+360)%360/360}function g1(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function pp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function v1(t){let e=_Q(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const mp=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,TQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,EQ=new RegExp(`(${Object.keys(km).join("|")})`,"g"),SQ=t=>{const e=t.output.map(r=>r.replace(TQ,v1)).map(r=>r.replace(EQ,v1)),n=e[0].match(mp).map(()=>[]);e.forEach(r=>{r.match(mp).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(mp).map((r,o)=>Pm(on({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(mp,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,f,p)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(f)}, ${p})`)}};let Pd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const bQ=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),wQ=["Webkit","Ms","Moz","O"];Pd=Object.keys(Pd).reduce((t,e)=>(wQ.forEach(n=>t[bQ(n,e)]=t[e]),t),Pd);function xQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(Pd.hasOwnProperty(t)&&Pd[t])?e+"px":(""+e).trim()}const y1={};WX(t=>new cQ(t));YX(SQ);KX(km);$X((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,d=xu(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=xQ(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in d){const y=f?p:y1[p]||(y1[p]=p.replace(/([A-Z])/g,_=>"-"+_.toLowerCase()));typeof t.getAttribute(y)<"u"&&t.setAttribute(y,d[p])}return}else return!1},t=>t);const AQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],CQ=qX(ZX),IQ=CQ(AQ);function _1(t,e){return t.map(function(n,i){return n+e[i]})}function B2(t,e){return t.map(function(n,i){return n-e[i]})}function F_(t){return Math.hypot.apply(Math,t)}function RQ(t,e,n){var i=F_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),d=e.map(function(p){return r*p}),f=F_(t);return{velocities:c,velocity:l,distance:f,direction:d}}function B_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function NQ(t,e,n){return Math.max(e,Math.min(t,n))}function DQ(t,e){return Math.pow(t,e*5)}function T1(t,e,n){return e===0||Math.abs(e)===1/0?DQ(t,n):t*e*n/(e+n*t)}function kd(t,e,n,i){return i===void 0&&(i=.15),i===0?NQ(t,e,n):t<e?-T1(e-t,n-e,i)+e:t>n?+T1(t-n,n-e,i)+n:t}function MQ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function PQ(t,e,n){return e&&MQ(t.prototype,e),t}function wi(){return wi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wi.apply(this,arguments)}function z2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function kQ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function gp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VQ(t,e){if(t){if(typeof t=="string")return E1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E1(t,e)}}function E1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ng(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=VQ(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function q2(){}function H2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?q2:e.length===1?e[0]:function(){for(var i,r=Ng(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Fo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function vp(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function JE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=JE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var LQ=180,OQ=.15,UQ=.5,FQ=60,BQ={threshold:function(e){return e===void 0&&(e=0),Fo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Fo(OQ);case!1:return Fo(0);default:return Fo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Fo(e)}},G2=wi({},BQ,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(y){return G2.bounds(e(y))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,d=c===void 0?-1/0:c,f=n.bottom,p=f===void 0?1/0:f;return[[r,l],[d,p]]}}),zQ=typeof window<"u"&&window.document&&window.document.createElement,qQ={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=zQ?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},HQ=wi({},G2,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,f=d===void 0?void 0:d,p=Fo(e,o?3:c||f?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=UQ),Fo(e)},swipeDistance:function(e){return e===void 0&&(e=FQ),Fo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return LQ;case!1:return 0;default:return e}}});function GQ(t){return t===void 0&&(t={}),JE(t,qQ)}function jQ(t){return t===void 0&&(t={}),JE(t,HQ)}function $Q(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=kQ(t,["domTarget","eventOptions","window","enabled"]),l=GQ({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=jQ(o),l}function ed(t){return wi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:q2,canceled:!1,memo:void 0,args:void 0},t)}function j2(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=ed({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=ed({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=ed({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=ed({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=ed({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var Ga=new Map,KQ=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(f))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var d=wi({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),f=r.handler(d);return r.state.memo=f!==void 0?f:r.state.memo,r.state._active||r.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,d=r.threshold,f=this.state,p=f._bounds,y=f._initial,_=f._active,b=f._intentional,A=f.lastOffset,I=f.movement,R=this.getInternalMovement(i,this.state),V=b[0]===!1?S1(R[0],d[0]):b[0],k=b[1]===!1?S1(R[1],d[1]):b[1],O=this.checkIntentionality([V,k],R);if(O._blocked)return wi({},O,{_movement:R,delta:[0,0]});var G=O._intentional,K=R,H,D;if(G[0]!==!1&&b[0]===!1&&(D=vp(o,this.state),H=vp(l,this.state),y[0]=D[0],p[0]=H[0]),G[1]!==!1&&b[1]===!1){var N,M;D=(N=D)!=null?N:vp(o,this.state),H=(M=H)!=null?M:vp(l,this.state),y[1]=D[1],p[1]=H[1]}var B=[G[0]!==!1?R[0]-G[0]:y[0],G[1]!==!1?R[1]-G[1]:y[1]],q=_1(B,A),F=_?c:[0,0];return B=b1(p,_1(B,y),F),wi({},O,{intentional:G[0]!==!1||G[1]!==!1,_initial:y,_movement:K,movement:B,values:i,offset:b1(p,q,F),delta:B2(B,I)})},e.clean=function(){this.clearTimeout()},PQ(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function S1(t,e){return Math.abs(t)>=e?B_(t)*e:!1}function b1(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],d=c[0],f=c[1],p=t[1],y=p[0],_=p[1];return[kd(i,d,f,o),kd(r,y,_,l)]}function v0(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,d=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:d,args:r,previous:c}}function YQ(t,e,n){var i=t.state.offset,r=n.timeStamp;return wi({},j2()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function JQ(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,wi({},e,{event:n})].concat(r))}}var WQ=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=Ng(n.classes),d;!(d=c()).done;){var f=d.value;new f(n,o).addBindings(i)}for(var p=0,y=Object.entries(n.nativeRefs);p<y.length;p++){var _=y[p],b=_[0],A=_[1];z_(i,b,JQ(A,wi({},n.state.shared,{args:o})))}return n.config.domTarget?eZ(n,i):tZ(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=K2(n.config),r=n.config.eventOptions;i&&Sf(i,$2(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),XQ(n)},this.state=j2(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function XQ(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];Sf(n,l,i)}t.windowListeners={}}}function QQ(t,e){var n=t.config,i=t.windowListeners;n.window&&(Sf(n.window,i[e],n.eventOptions),delete i[e])}function ZQ(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(Sf(i.window,r[e],i.eventOptions),Y2(i.window,r[e]=n,i.eventOptions))}function eZ(t,e){var n=t.config,i=t.domListeners,r=K2(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;Sf(r,$2(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],f=d[0],p=d[1],y=f.slice(2).toLowerCase();i.push([y,H2.apply(void 0,p)])}Y2(r,i,o)}function tZ(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],d=c[0],f=c[1],p=Array.isArray(f)?f:[f],y=d+r;i[y]=H2.apply(void 0,p)}return i}function $2(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function K2(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function z_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function Y2(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Ng(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function Sf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Ng(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function nZ(t,e,n){n===void 0&&(n={});var i=rZ(t),r=Dn.useMemo(function(){return new WQ(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,Dn.useEffect(r.effect,[]),r.config.domTarget?iZ:r.bind}function iZ(){}function rZ(t){var e=new Set;return t.drag&&e.add(Ga.get("drag")),t.wheel&&e.add(Ga.get("wheel")),t.scroll&&e.add(Ga.get("scroll")),t.move&&e.add(Ga.get("move")),t.pinch&&e.add(Ga.get("pinch")),t.hover&&e.add(Ga.get("hover")),e}var sZ=(function(t){z2(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return B2(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],d=l[1],f=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:r,_blocked:!0,axis:f}:(r[f==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,RQ(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(KQ);function J2(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function w1(t){var e="buttons"in t?t.buttons:0,n=J2(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:d}}function x1(t){var e=J2(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var oZ=3,aZ=220,lZ=(function(t){z2(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(ZQ(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(gp(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=w1(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=x1(r),c=i.getKinematics(l,r),d=v0(gp(i),r),f=i.state._isTap,p=F_(c._movement);f&&p>=oZ&&(f=!1),i.updateGestureState(wi({},d,c,{_isTap:f})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],f=i.state.movement,p=f[0],y=f[1],_=i.state._intentional,b=_[0],A=_[1],I=i.config.swipeVelocity,R=I[0],V=I[1],k=i.config.swipeDistance,O=k[0],G=k[1],K=wi({},v0(gp(i),r),i.getMovement(i.state.values)),H=[0,0];K.elapsedTime<aZ&&(b!==!1&&Math.abs(c)>R&&Math.abs(p)>O&&(H[0]=B_(c)),A!==!1&&Math.abs(d)>V&&Math.abs(y)>G&&(H[1]=B_(d))),i.updateGestureState(wi({},K,{tap:o,swipe:H})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(gp(i)),i.state._delayedEvent=!1,QQ(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=x1(r);this.updateSharedState(w1(r)),this.updateGestureState(wi({},YQ(this,o,r),v0(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(z_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";z_(r,o,this.onClick)}},e})(sZ);function uZ(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return o&&n===this&&e(d,i)||(r=t.apply(this,d),o=!0,n=this,i=d),r}return l}function jp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!jp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!jp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!jp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function cZ(t,e){try{return jp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function dZ(t,e){e===void 0&&(e={}),Ga.set("drag",lZ);var n=z.useRef();return n.current||(n.current=uZ($Q,cZ)),nZ({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var W2=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Lm=W2.join(","),X2=typeof Element>"u",ll=X2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,q_=!X2&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},Q2=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(Lm));return n&&ll.call(e,Lm)&&r.unshift(e),r=r.filter(i),r},Z2=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,f=t(d,!0,i);i.flatten?r.push.apply(r,f):r.push({scope:l,candidates:f})}else{var p=ll.call(l,Lm);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var y=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),_=!i.shadowRootFilter||i.shadowRootFilter(l);if(y&&_){var b=t(y===!0?l.children:y.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},eV=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},fZ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},tV=function(e){return e.tagName==="INPUT"},hZ=function(e){return tV(e)&&e.type==="hidden"},pZ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},mZ=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},gZ=function(e){if(!e.name)return!0;var n=e.form||q_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=mZ(r,e.form);return!o||o===e},vZ=function(e){return tV(e)&&e.type==="radio"},yZ=function(e){return vZ(e)&&!gZ(e)},A1=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},_Z=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=ll.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(ll.call(l,"details:not([open]) *"))return!0;var c=q_(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var f=e;e;){var p=e.parentElement,y=q_(e);if(p&&!p.shadowRoot&&r(p)===!0)return A1(e);e.assignedSlot?e=e.assignedSlot:!p&&y!==e.ownerDocument?e=y.host:e=p}e=f}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return A1(e);return!1},TZ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return ll.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Om=function(e,n){return!(n.disabled||hZ(n)||_Z(n,e)||pZ(n)||TZ(n))},H_=function(e,n){return!(yZ(n)||eV(n)<0||!Om(e,n))},EZ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},SZ=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,d=eV(c,l),f=l?t(r.candidates):c;d===0?l?n.push.apply(n,f):n.push(c):i.push({documentOrder:o,tabIndex:d,item:r,isScope:l,content:f})}),i.sort(fZ).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},bZ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Z2([e],n.includeContainer,{filter:H_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:EZ}):i=Q2(e,n.includeContainer,H_.bind(null,n)),SZ(i)},wZ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Z2([e],n.includeContainer,{filter:Om.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=Q2(e,n.includeContainer,Om.bind(null,n)),i},yp=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ll.call(e,Lm)===!1?!1:H_(n,e)},xZ=W2.concat("iframe").join(","),y0=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ll.call(e,xZ)===!1?!1:Om(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function C1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function I1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C1(Object(n),!0).forEach(function(i){AZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function AZ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),CZ=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},IZ=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},RZ=function(e){return e.key==="Tab"||e.keyCode===9},N1=function(e){return setTimeout(e,0)},D1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},td=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},_p=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},NZ=function(e,n){var i=(n==null?void 0:n.document)||document,r=I1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(H,D,N){return H&&H[D]!==void 0?H[D]:r[N||D]},d=function(H){return o.containerGroups.findIndex(function(D){var N=D.container,M=D.tabbableNodes;return N.contains(H)||M.find(function(B){return B===H})})},f=function(H){var D=r[H];if(typeof D=="function"){for(var N=arguments.length,M=new Array(N>1?N-1:0),B=1;B<N;B++)M[B-1]=arguments[B];D=D.apply(void 0,M)}if(D===!0&&(D=void 0),!D){if(D===void 0||D===!1)return D;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var q=D;if(typeof D=="string"&&(q=i.querySelector(D),!q))throw new Error("`".concat(H,"` as selector refers to no known node"));return q},p=function(){var H=f("initialFocus");if(H===!1)return!1;if(H===void 0)if(d(i.activeElement)>=0)H=i.activeElement;else{var D=o.tabbableGroups[0],N=D&&D.firstTabbableNode;H=N||f("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},y=function(){if(o.containerGroups=o.containers.map(function(H){var D=bZ(H,r.tabbableOptions),N=wZ(H,r.tabbableOptions);return{container:H,tabbableNodes:D,focusableNodes:N,firstTabbableNode:D.length>0?D[0]:null,lastTabbableNode:D.length>0?D[D.length-1]:null,nextTabbableNode:function(B){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F=N.findIndex(function(U){return U===B});if(!(F<0))return q?N.slice(F+1).find(function(U){return yp(U,r.tabbableOptions)}):N.slice(0,F).reverse().find(function(U){return yp(U,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},_=function K(H){if(H!==!1&&H!==i.activeElement){if(!H||!H.focus){K(p());return}H.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=H,CZ(H)&&H.select()}},b=function(H){var D=f("setReturnFocus",H);return D||(D===!1?!1:H)},A=function(H){var D=_p(H);if(!(d(D)>=0)){if(td(r.clickOutsideDeactivates,H)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!y0(D,r.tabbableOptions)});return}td(r.allowOutsideClick,H)||H.preventDefault()}},I=function(H){var D=_p(H),N=d(D)>=0;N||D instanceof Document?N&&(o.mostRecentlyFocusedNode=D):(H.stopImmediatePropagation(),_(o.mostRecentlyFocusedNode||p()))},R=function(H){var D=_p(H);y();var N=null;if(o.tabbableGroups.length>0){var M=d(D),B=M>=0?o.containerGroups[M]:void 0;if(M<0)H.shiftKey?N=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:N=o.tabbableGroups[0].firstTabbableNode;else if(H.shiftKey){var q=D1(o.tabbableGroups,function(oe){var he=oe.firstTabbableNode;return D===he});if(q<0&&(B.container===D||y0(D,r.tabbableOptions)&&!yp(D,r.tabbableOptions)&&!B.nextTabbableNode(D,!1))&&(q=M),q>=0){var F=q===0?o.tabbableGroups.length-1:q-1,U=o.tabbableGroups[F];N=U.lastTabbableNode}}else{var ye=D1(o.tabbableGroups,function(oe){var he=oe.lastTabbableNode;return D===he});if(ye<0&&(B.container===D||y0(D,r.tabbableOptions)&&!yp(D,r.tabbableOptions)&&!B.nextTabbableNode(D))&&(ye=M),ye>=0){var Ne=ye===o.tabbableGroups.length-1?0:ye+1,W=o.tabbableGroups[Ne];N=W.firstTabbableNode}}}else N=f("fallbackFocus");N&&(H.preventDefault(),_(N))},V=function(H){if(IZ(H)&&td(r.escapeDeactivates,H)!==!1){H.preventDefault(),l.deactivate();return}if(RZ(H)){R(H);return}},k=function(H){var D=_p(H);d(D)>=0||td(r.clickOutsideDeactivates,H)||td(r.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},O=function(){if(o.active)return R1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?N1(function(){_(p())}):_(p()),i.addEventListener("focusin",I,!0),i.addEventListener("mousedown",A,{capture:!0,passive:!1}),i.addEventListener("touchstart",A,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",V,{capture:!0,passive:!1}),l},G=function(){if(o.active)return i.removeEventListener("focusin",I,!0),i.removeEventListener("mousedown",A,!0),i.removeEventListener("touchstart",A,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",V,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(H){if(o.active)return this;var D=c(H,"onActivate"),N=c(H,"onPostActivate"),M=c(H,"checkCanFocusTrap");M||y(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,D&&D();var B=function(){M&&y(),O(),N&&N()};return M?(M(o.containers.concat()).then(B,B),this):(B(),this)},deactivate:function(H){if(!o.active)return this;var D=I1({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},H);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,G(),o.active=!1,o.paused=!1,R1.deactivateTrap(l);var N=c(D,"onDeactivate"),M=c(D,"onPostDeactivate"),B=c(D,"checkCanReturnFocus"),q=c(D,"returnFocus","returnFocusOnDeactivate");N&&N();var F=function(){N1(function(){q&&_(b(o.nodeFocusedBeforeActivation)),M&&M()})};return q&&B?(B(b(o.nodeFocusedBeforeActivation)).then(F,F),this):(F(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,G(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,y(),O(),this)},updateContainerElements:function(H){var D=[].concat(H).filter(Boolean);return o.containers=D.map(function(N){return typeof N=="string"?i.querySelector(N):N}),o.active&&y(),this}},l.updateContainerElements(e),l};function DZ(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var WE=!1;if(typeof window<"u"){var M1={get passive(){WE=!0}};window.addEventListener("testPassive",null,M1),window.removeEventListener("testPassive",null,M1)}var nV=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),zo=[],Um=!1,iV=-1,Vd=void 0,Ld=void 0,rV=function(e){return zo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Fm=function(e){var n=e||window.event;return rV(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},MZ=function(e){if(Ld===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Ld=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Vd===void 0&&(Vd=document.body.style.overflow,document.body.style.overflow="hidden")},PZ=function(){Ld!==void 0&&(document.body.style.paddingRight=Ld,Ld=void 0),Vd!==void 0&&(document.body.style.overflow=Vd,Vd=void 0)},kZ=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},VZ=function(e,n){var i=e.targetTouches[0].clientY-iV;return rV(e.target)?!1:n&&n.scrollTop===0&&i>0||kZ(n)&&i<0?Fm(e):(e.stopPropagation(),!0)},LZ=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!zo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};zo=[].concat(DZ(zo),[i]),nV?(e.ontouchstart=function(r){r.targetTouches.length===1&&(iV=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&VZ(r,e)},Um||(document.addEventListener("touchmove",Fm,WE?{passive:!1}:void 0),Um=!0)):MZ(n)}},OZ=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}zo=zo.filter(function(n){return n.targetElement!==e}),nV?(e.ontouchstart=null,e.ontouchmove=null,Um&&zo.length===0&&(document.removeEventListener("touchmove",Fm,WE?{passive:!1}:void 0),Um=!1)):zo.length||PZ()},Qa=[],UZ=function(){return Qa.some(function(t){return t.activeTargets.length>0})},FZ=function(){return Qa.some(function(t){return t.skippedTargets.length>0})},P1="ResizeObserver loop completed with undelivered notifications.",BZ=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:P1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=P1),window.dispatchEvent(t)},nf;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(nf||(nf={}));var Za=function(t){return Object.freeze(t)},zZ=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Za(this)}return t})(),sV=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Za(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,d=e.width,f=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:d,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),XE=function(t){return t instanceof SVGElement&&"getBBox"in t},oV=function(t){if(XE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},k1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},qZ=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Od=typeof window<"u"?window:{},Tp=new WeakMap,V1=/auto|scroll/,HZ=/^tb|vertical/,GZ=/msie|trident/i.test(Od.navigator&&Od.navigator.userAgent),ns=function(t){return parseFloat(t||"0")},Au=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new zZ((n?e:t)||0,(n?t:e)||0)},L1=Za({devicePixelContentBoxSize:Au(),borderBoxSize:Au(),contentBoxSize:Au(),contentRect:new sV(0,0,0,0)}),aV=function(t,e){if(e===void 0&&(e=!1),Tp.has(t)&&!e)return Tp.get(t);if(oV(t))return Tp.set(t,L1),L1;var n=getComputedStyle(t),i=XE(t)&&t.ownerSVGElement&&t.getBBox(),r=!GZ&&n.boxSizing==="border-box",o=HZ.test(n.writingMode||""),l=!i&&V1.test(n.overflowY||""),c=!i&&V1.test(n.overflowX||""),d=i?0:ns(n.paddingTop),f=i?0:ns(n.paddingRight),p=i?0:ns(n.paddingBottom),y=i?0:ns(n.paddingLeft),_=i?0:ns(n.borderTopWidth),b=i?0:ns(n.borderRightWidth),A=i?0:ns(n.borderBottomWidth),I=i?0:ns(n.borderLeftWidth),R=y+f,V=d+p,k=I+b,O=_+A,G=c?t.offsetHeight-O-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,H=r?R+k:0,D=r?V+O:0,N=i?i.width:ns(n.width)-H-K,M=i?i.height:ns(n.height)-D-G,B=N+R+K+k,q=M+V+G+O,F=Za({devicePixelContentBoxSize:Au(Math.round(N*devicePixelRatio),Math.round(M*devicePixelRatio),o),borderBoxSize:Au(B,q,o),contentBoxSize:Au(N,M,o),contentRect:new sV(y,d,N,M)});return Tp.set(t,F),F},lV=function(t,e,n){var i=aV(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case nf.DEVICE_PIXEL_CONTENT_BOX:return l;case nf.BORDER_BOX:return r;default:return o}},jZ=(function(){function t(e){var n=aV(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Za([n.borderBoxSize]),this.contentBoxSize=Za([n.contentBoxSize]),this.devicePixelContentBoxSize=Za([n.devicePixelContentBoxSize])}return t})(),uV=function(t){if(oV(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},$Z=function(){var t=1/0,e=[];Qa.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(f){var p=new jZ(f.target),y=uV(f.target);c.push(p),f.lastReportedSize=lV(f.target,f.observedBox),y<t&&(t=y)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},O1=function(t){Qa.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(uV(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},KZ=function(){var t=0;for(O1(t);UZ();)t=$Z(),O1(t);return FZ()&&BZ(),t>0},_0,cV=[],YZ=function(){return cV.splice(0).forEach(function(t){return t()})},JZ=function(t){if(!_0){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return YZ()}).observe(n,i),_0=function(){n.textContent="".concat(e?e--:e++)}}cV.push(t),_0()},WZ=function(t){JZ(function(){requestAnimationFrame(t)})},$p=0,XZ=function(){return!!$p},QZ=250,ZZ={attributes:!0,characterData:!0,childList:!0,subtree:!0},U1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],F1=function(t){return t===void 0&&(t=0),Date.now()+t},T0=!1,eee=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=QZ),!T0){T0=!0;var i=F1(e);WZ(function(){var r=!1;try{r=KZ()}finally{if(T0=!1,e=i-F1(),!XZ())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,ZZ)};document.body?n():Od.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),U1.forEach(function(n){return Od.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),U1.forEach(function(n){return Od.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),G_=new eee,B1=function(t){!$p&&t>0&&G_.start(),$p+=t,!$p&&G_.stop()},tee=function(t){return!XE(t)&&!qZ(t)&&getComputedStyle(t).display==="inline"},nee=(function(){function t(e,n){this.target=e,this.observedBox=n||nf.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=lV(this.target,this.observedBox,!0);return tee(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),iee=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Ep=new WeakMap,z1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Sp=(function(){function t(){}return t.connect=function(e,n){var i=new iee(e,n);Ep.set(e,i)},t.observe=function(e,n,i){var r=Ep.get(e),o=r.observationTargets.length===0;z1(r.observationTargets,n)<0&&(o&&Qa.push(r),r.observationTargets.push(new nee(n,i&&i.box)),B1(1),G_.schedule())},t.unobserve=function(e,n){var i=Ep.get(e),r=z1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Qa.splice(Qa.indexOf(i),1),i.observationTargets.splice(r,1),B1(-1))},t.disconnect=function(e){var n=this,i=Ep.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),ree=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Sp.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!k1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Sp.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!k1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Sp.unobserve(this,e)},t.prototype.disconnect=function(){Sp.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function si(){return si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},si.apply(this,arguments)}function Kp(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var Ud=typeof window<"u"?z.useLayoutEffect:z.useEffect;function nd(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function bp(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var see={box:"border-box"};function E0(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=z.useState(0),l=o[0],c=o[1];z.useDebugValue(n+": "+l);var d=z.useCallback(function(f){c(f[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return Ud(function(){if(t.current&&i){var f=new ree(d);return f.observe(t.current,see),function(){f.disconnect()}}},[t,d,i]),i?l:0}function ii(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var q1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},H1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},oee=DX({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:si({},q1,H1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:si({},q1,H1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:si({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[MX({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),aee=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],lee=["velocity"],uee=["onRest","config"],dV=rQ.default,cee=dV.tension,wp=dV.friction,dee=Dn.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,d=t.initialState,f=t.lastSnapRef,p=t.initialFocusRef,y=t.onDismiss,_=t.maxHeight,b=t.defaultSnap,A=b===void 0?hee:b,I=t.snapPoints,R=I===void 0?pee:I,V=t.blocking,k=V===void 0||V,O=t.scrollLocking,G=O===void 0||O,K=t.style,H=t.onSpringStart,D=t.onSpringCancel,N=t.onSpringEnd,M=t.reserveScrollBarGap,B=M===void 0?k:M,q=t.expandOnContentDrag,F=q!==void 0&&q,U=Kp(t,aee),ye=(function(){var le=z.useState(!1),pe=le[0],Ee=le[1],qe=z.useState({}),Ve=qe[0],Qe=qe[1],Je=z.useCallback(function(tt){return Qe(function(nt){var Pe;return si({},nt,((Pe={})[tt]=!1,Pe))}),function(){Qe(function(nt){var Pe;return si({},nt,((Pe={})[tt]=!0,Pe))})}},[]);return z.useEffect(function(){var tt=Object.values(Ve);tt.length!==0&&tt.every(Boolean)&&Ee(!0)},[Ve]),{ready:pe,registerReady:Je}})(),Ne=ye.ready,W=ye.registerReady,oe=z.useRef(!1),he=z.useRef(H),xe=z.useRef(D),Ae=z.useRef(N);z.useEffect(function(){he.current=H,xe.current=D,Ae.current=N},[D,H,N]);var j,ee,ne=uQ(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),se=ne[0],ge=ne[1],Oe=z.useRef(null),Ie=z.useRef(null),Vt=z.useRef(null),Ct=z.useRef(null),qn=z.useRef(null),Ai=z.useRef(null),Ft=z.useRef(0),Hn=z.useRef(),Cn=z.useRef(!1),Pn=(j=z.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),ee=z.useRef(j==null?void 0:j.matches),z.useDebugValue(ee.current?"reduce":"no-preference"),z.useEffect(function(){var le=function(pe){ee.current=pe.matches};return j==null||j.addListener(le),function(){return j==null?void 0:j.removeListener(le)}},[j]),ee),di=(function(le){var pe=le.targetRef,Ee=le.enabled,qe=le.reserveScrollBarGap,Ve=z.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return z.useDebugValue(Ee?"Enabled":"Disabled"),z.useEffect(function(){if(!Ee)return Ve.current.deactivate(),void(Ve.current={activate:function(){},deactivate:function(){}});var Qe=pe.current,Je=!1;Ve.current={activate:function(){Je||(Je=!0,LZ(Qe,{allowTouchMove:function(tt){return tt.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:qe}))},deactivate:function(){Je&&(Je=!1,OZ(Qe))}}},[Ee,pe,qe]),Ve})({targetRef:Ie,enabled:Ne&&G,reserveScrollBarGap:B}),or=(function(le){var pe=le.targetRef,Ee=le.enabled,qe=z.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return z.useDebugValue(Ee?"Enabled":"Disabled"),z.useEffect(function(){if(!Ee)return qe.current.deactivate(),void(qe.current={activate:function(){},deactivate:function(){}});var Ve=pe.current,Qe=!1,Je=[],tt=[];qe.current={activate:function(){if(!Qe){Qe=!0;var nt=Ve.parentNode;document.querySelectorAll("body > *").forEach(function(Pe){if(Pe!==nt){var He=Pe.getAttribute("aria-hidden");He!==null&&He!=="false"||(Je.push(He),tt.push(Pe),Pe.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Qe&&(Qe=!1,tt.forEach(function(nt,Pe){var He=Je[Pe];He===null?nt.removeAttribute("aria-hidden"):nt.setAttribute("aria-hidden",He)}),Je=[],tt=[])}}},[pe,Ee]),qe})({targetRef:Oe,enabled:Ne&&k}),Ci=(function(le){var pe=le.targetRef,Ee=le.fallbackRef,qe=le.initialFocusRef,Ve=le.enabled,Qe=z.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return z.useDebugValue(Ve?"Enabled":"Disabled"),z.useEffect(function(){if(!Ve)return Qe.current.deactivate(),void(Qe.current={activate:function(){},deactivate:function(){}});var Je=Ee.current,tt=NZ(pe.current,{onActivate:void 0,initialFocus:qe?function(){return(qe==null?void 0:qe.current)||Je}:void 0,fallbackFocus:Je,escapeDeactivates:!1,clickOutsideDeactivates:!1}),nt=!1;Qe.current={activate:function(){try{return nt?Promise.resolve():(nt=!0,Promise.resolve(tt.activate()).then(function(){return Promise.resolve(new Promise(function(Pe){return setTimeout(function(){return Pe(void 0)},0)})).then(function(){})}))}catch(Pe){return Promise.reject(Pe)}},deactivate:function(){nt&&(nt=!1,tt.deactivate())}}},[Ve,Ee,qe,pe]),Qe})({targetRef:Oe,fallbackRef:Ai,initialFocusRef:p||void 0,enabled:Ne&&k&&p!==!1}),Ii=(function(le){var pe=le.getSnapPoints,Ee=le.heightRef,qe=le.lastSnapRef,Ve=le.ready,Qe=(function(It){var ht=It.contentRef,Gn=It.controlledMaxHeight,Ot=It.footerEnabled,dn=It.footerRef,Ni=It.headerEnabled,Rn=It.headerRef,yn=It.registerReady,ji=It.resizeSourceRef,me=z.useMemo(function(){return yn("contentHeight")},[yn]),be=(function(mi,Mi,ar){var Pi=z.useMemo(function(){return Mi("maxHeight")},[Mi]),lr=z.useState(function(){return bp(mi)||typeof window<"u"?window.innerHeight:0}),Kr=lr[0],gi=lr[1],Yt=Kr>0,Rr=z.useRef(0);return z.useDebugValue(mi?"controlled":"auto"),z.useEffect(function(){Yt&&Pi()},[Yt,Pi]),Ud(function(){if(mi)return gi(bp(mi)),void(ar.current="maxheightprop");var Nr=function(){Rr.current||(Rr.current=requestAnimationFrame(function(){gi(window.innerHeight),ar.current="window",Rr.current=0}))};return window.addEventListener("resize",Nr),gi(window.innerHeight),ar.current="window",Pi(),function(){window.removeEventListener("resize",Nr),cancelAnimationFrame(Rr.current)}},[mi,Pi,ar]),Kr})(Gn,yn,ji),ze=E0(Rn,{label:"headerHeight",enabled:Ni,resizeSourceRef:ji}),Pt=E0(ht,{label:"contentHeight",enabled:!0,resizeSourceRef:ji}),Di=E0(dn,{label:"footerHeight",enabled:Ot,resizeSourceRef:ji}),pi=Math.min(be-ze-Di,Pt)+ze+Di;z.useDebugValue("minHeight: "+pi);var Ir=Pt>0;return z.useEffect(function(){Ir&&me()},[Ir,me]),{maxHeight:be,minHeight:pi,headerHeight:ze,footerHeight:Di}})({contentRef:le.contentRef,controlledMaxHeight:le.controlledMaxHeight,footerEnabled:le.footerEnabled,footerRef:le.footerRef,headerEnabled:le.headerEnabled,headerRef:le.headerRef,registerReady:le.registerReady,resizeSourceRef:le.resizeSourceRef}),Je=Qe.maxHeight,tt=Qe.minHeight,nt=Qe.headerHeight,Pe=Qe.footerHeight,He=(function(It,ht){var Gn=[].concat(It).map(bp).reduce(function(Rn,yn){return Rn.add(nd(yn,0,ht)),Rn},new Set),Ot=Array.from(Gn),dn=Math.min.apply(Math,Ot);if(Number.isNaN(dn))throw new TypeError("minSnap is NaN");var Ni=Math.max.apply(Math,Ot);if(Number.isNaN(Ni))throw new TypeError("maxSnap is NaN");return{snapPoints:Ot,minSnap:dn,maxSnap:Ni}})(Ve?pe({height:Ee.current,footerHeight:Pe,headerHeight:nt,minHeight:tt,maxHeight:Je}):[0],Je),cn=He.snapPoints,Ri=He.minSnap,Kt=He.maxSnap;return z.useDebugValue("minSnap: "+Ri+", maxSnap:"+Kt),{minSnap:Ri,maxSnap:Kt,findSnap:function(It){var ht=bp(typeof It=="function"?It({footerHeight:Pe,headerHeight:nt,height:Ee.current,minHeight:tt,maxHeight:Je,snapPoints:cn,lastSnap:qe.current}):It);return cn.reduce(function(Gn,Ot){return Math.abs(Ot-ht)<Math.abs(Gn-ht)?Ot:Gn},Ri)},maxHeight:Je}})({contentRef:Vt,controlledMaxHeight:_,footerEnabled:!!o,footerRef:qn,getSnapPoints:R,headerEnabled:l!==!1,headerRef:Ct,heightRef:Ft,lastSnapRef:f,ready:Ne,registerReady:W,resizeSourceRef:Hn}),kn=Ii.minSnap,fi=Ii.maxSnap,Ar=Ii.maxHeight,Gi=Ii.findSnap,wt=z.useRef(Ar),vn=z.useRef(kn),ke=z.useRef(fi),Lt=z.useRef(Gi),Xt=z.useRef(0);Ud(function(){wt.current=Ar,ke.current=fi,vn.current=kn,Lt.current=Gi,Xt.current=Gi(A)},[Gi,A,Ar,fi,kn]);var tn=z.useCallback(function(le){var pe=le.onRest,Ee=le.config,qe=(Ee=Ee===void 0?{}:Ee).velocity,Ve=qe===void 0?1:qe,Qe=Kp(Ee,lee),Je=Kp(le,uee);return new Promise(function(tt){return ge(si({},Je,{config:si({velocity:Ve},Qe,{mass:1,tension:cee,friction:Math.max(wp,wp+(wp-wp*Ve))}),onRest:function(){var nt=[].slice.call(arguments);tt.apply(void 0,nt),pe==null||pe.apply(void 0,nt)}}))})},[ge]),Cr=zX(oee,{devTools:!1,actions:{onOpenCancel:z.useCallback(function(){return xe.current==null?void 0:xe.current({type:"OPEN"})},[]),onSnapCancel:z.useCallback(function(le){return xe.current==null?void 0:xe.current({type:"SNAP",source:le.snapSource})},[]),onCloseCancel:z.useCallback(function(){return xe.current==null?void 0:xe.current({type:"CLOSE"})},[]),onResizeCancel:z.useCallback(function(){return xe.current==null?void 0:xe.current({type:"RESIZE",source:Hn.current})},[]),onOpenEnd:z.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"OPEN"})},[]),onSnapEnd:z.useCallback(function(le,pe){return Ae.current==null?void 0:Ae.current({type:"SNAP",source:le.snapSource})},[]),onResizeEnd:z.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"RESIZE",source:Hn.current})},[])},context:{initialState:d},services:{onSnapStart:z.useCallback(function(le,pe){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:pe.payload.source||"custom"}))}catch(Ee){return Promise.reject(Ee)}},[]),onOpenStart:z.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseStart:z.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeStart:z.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:Hn.current}))}catch(le){return Promise.reject(le)}},[]),onSnapEnd:z.useCallback(function(le,pe){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"SNAP",source:le.snapSource}))}catch(Ee){return Promise.reject(Ee)}},[]),onOpenEnd:z.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseEnd:z.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeEnd:z.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"RESIZE",source:Hn.current}))}catch(le){return Promise.reject(le)}},[]),renderVisuallyHidden:z.useCallback(function(le,pe){try{return Promise.resolve(tn({y:Xt.current,ready:0,maxHeight:wt.current,maxSnap:ke.current,minSnap:Xt.current,immediate:!0})).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[tn]),activate:z.useCallback(function(le,pe){try{return oe.current=!0,Promise.resolve(Promise.all([di.current.activate(),Ci.current.activate(),or.current.activate()])).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[or,Ci,di]),deactivate:z.useCallback(function(){try{return di.current.deactivate(),Ci.current.deactivate(),or.current.deactivate(),oe.current=!1,Promise.resolve()}catch(le){return Promise.reject(le)}},[or,Ci,di]),openImmediately:z.useCallback(function(){try{return Ft.current=Xt.current,Promise.resolve(tn({y:Xt.current,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:Xt.current,immediate:!0})).then(function(){})}catch(le){return Promise.reject(le)}},[tn]),openSmoothly:z.useCallback(function(){try{return Promise.resolve(tn({y:0,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:Xt.current,immediate:!0})).then(function(){return Ft.current=Xt.current,Promise.resolve(tn({y:Xt.current,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:Xt.current,immediate:Pn.current})).then(function(){})})}catch(le){return Promise.reject(le)}},[tn,Pn]),snapSmoothly:z.useCallback(function(le,pe){try{var Ee=Lt.current(le.y);return Ft.current=Ee,f.current=Ee,Promise.resolve(tn({y:Ee,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:vn.current,immediate:Pn.current,config:{velocity:le.velocity}})).then(function(){})}catch(qe){return Promise.reject(qe)}},[tn,f,Pn]),resizeSmoothly:z.useCallback(function(){try{var le=Lt.current(Ft.current);return Ft.current=le,f.current=le,Promise.resolve(tn({y:le,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:vn.current,immediate:Hn.current!=="element"||Pn.current})).then(function(){})}catch(pe){return Promise.reject(pe)}},[tn,f,Pn]),closeSmoothly:z.useCallback(function(le,pe){try{return tn({minSnap:Ft.current,immediate:!0}),Ft.current=0,Promise.resolve(tn({y:0,maxHeight:wt.current,maxSnap:ke.current,immediate:Pn.current})).then(function(){return Promise.resolve(tn({ready:0,immediate:!0})).then(function(){})})}catch(Ee){return Promise.reject(Ee)}},[tn,Pn])}}),fa=Cr[0],In=Cr[1];z.useEffect(function(){Ne&&In(c?"OPEN":"CLOSE")},[c,In,Ne]),Ud(function(){(Ar||fi||kn)&&In("RESIZE")},[Ar,fi,kn,In]),z.useEffect(function(){return function(){di.current.deactivate(),Ci.current.deactivate(),or.current.deactivate()}},[or,Ci,di]),z.useImperativeHandle(e,function(){return{snapTo:function(le,pe){var Ee=pe===void 0?{}:pe,qe=Ee.velocity,Ve=qe===void 0?1:qe,Qe=Ee.source,Je=Qe===void 0?"custom":Qe;In("SNAP",{payload:{y:Lt.current(le),velocity:Ve,source:Je}})},get height(){return Ft.current}}},[In]),z.useEffect(function(){var le=Ie.current,pe=function(qe){Cn.current&&qe.preventDefault()},Ee=function(qe){le.scrollTop<0&&(requestAnimationFrame(function(){le.style.overflow="hidden",le.scrollTop=0,le.style.removeProperty("overflow")}),qe.preventDefault())};return F&&(le.addEventListener("scroll",pe),le.addEventListener("touchmove",pe),le.addEventListener("touchstart",Ee)),function(){le.removeEventListener("scroll",pe),le.removeEventListener("touchmove",pe),le.removeEventListener("touchstart",Ee)}},[F,Ie]);var hi=dZ(function(le){var pe=le.args,Ee=(pe=pe===void 0?[]:pe)[0],qe=(Ee=Ee===void 0?{}:Ee).closeOnTap,Ve=qe!==void 0&&qe,Qe=Ee.isContentDragging,Je=Qe!==void 0&&Qe,tt=le.cancel,nt=le.direction[1],Pe=le.down,He=le.first,cn=le.last,Ri=le.memo,Kt=Ri===void 0?se.y.getValue():Ri,It=le.tap,ht=le.velocity,Gn=-1*le.movement[1];if(!oe.current)return tt(),Kt;if(y&&Ve&&It)return tt(),setTimeout(function(){return y()},0),Kt;if(It)return Kt;var Ot=Kt+Gn,dn=Gn*ht,Ni=Math.max(vn.current,Math.min(ke.current,Ot+2*dn));if(!Pe&&y&&nt>0&&Ot+dn<vn.current/2)return tt(),y(),Kt;var Rn=Pe?y||vn.current!==ke.current?kd(Ot,y?0:vn.current,ke.current,.55):Ot<vn.current?kd(Ot,vn.current,2*ke.current,.55):kd(Ot,vn.current/2,ke.current,.55):Ni;return F&&Je?(Rn>=ke.current&&(Rn=ke.current),Kt===ke.current&&Ie.current.scrollTop>0&&(Rn=ke.current),Cn.current=Rn<ke.current):Cn.current=!1,He&&In("DRAG"),cn?(In("SNAP",{payload:{y:Rn,velocity:ht>.05?ht:1,source:"dragging"}}),Kt):(ge({y:Rn,ready:1,maxHeight:wt.current,maxSnap:ke.current,minSnap:vn.current,immediate:!0,config:{velocity:ht}}),Kt)},{filterTaps:!0});if(Number.isNaN(ke.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(vn.current))throw new TypeError("minSnapRef is NaN!!");var Bt=(function(le){var pe,Ee=le.spring,qe=eu([Ee.y,Ee.maxHeight],function(Pe,He){return Math.round(nd(He-Pe,0,16))+"px"}),Ve=eu([Ee.y,Ee.minSnap,Ee.maxSnap],function(Pe,He,cn){return nd(Pe,He,cn)+"px"}),Qe=eu([Ee.y,Ee.minSnap,Ee.maxSnap],function(Pe,He,cn){return Pe<He?He-Pe+"px":Pe>cn?cn-Pe+"px":"0px"}),Je=eu([Ee.y,Ee.maxSnap],function(Pe,He){return Pe>=He?Math.ceil(Pe-He):0}),tt=eu([Ee.y,Ee.minSnap],function(Pe,He){if(!He)return 0;var cn=Math.max(He/2-45,0);return nd((Pe-cn)*(1/(Math.min(He/2+45,He)-cn)+0),0,1)}),nt=eu([Ee.y,Ee.minSnap],function(Pe,He){return He?nd(Pe/He,0,1):0});return(pe={})["--rsbs-content-opacity"]=tt,pe["--rsbs-backdrop-opacity"]=nt,pe["--rsbs-antigap-scale-y"]=Je,pe["--rsbs-overlay-translate-y"]=Qe,pe["--rsbs-overlay-rounded"]=qe,pe["--rsbs-overlay-h"]=Ve,pe})({spring:se});return Dn.createElement(IQ.div,si({},U,{"data-rsbs-root":!0,"data-rsbs-state":fee.find(fa.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!y,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Oe,style:si({},Bt,K,{opacity:se.ready})}),i,k&&Dn.createElement("div",si({key:"backdrop","data-rsbs-backdrop":!0},hi({closeOnTap:!0}))),Dn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Ai,onKeyDown:function(le){le.key==="Escape"&&(le.stopPropagation(),y&&y())}},l!==!1&&Dn.createElement("div",si({key:"header","data-rsbs-header":!0,ref:Ct},hi()),l),Dn.createElement("div",si({key:"scroll","data-rsbs-scroll":!0,ref:Ie},F?hi({isContentDragging:!0}):{}),Dn.createElement("div",{"data-rsbs-content":!0,ref:Vt},n)),o&&Dn.createElement("div",si({key:"footer",ref:qn,"data-rsbs-footer":!0},hi()),o)))}),fee=["closed","opening","open","closing","dragging","snapping","resizing"];function hee(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function pee(t){return t.minHeight}var mee=["onSpringStart","onSpringEnd","skipInitialTransition"],Qu=z.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Kp(t,mee),l=z.useState(!1),c=l[0],d=l[1],f=z.useRef(),p=z.useRef(null),y=z.useRef(r&&o.open?"OPEN":"CLOSED");Ud(function(){if(o.open)return cancelAnimationFrame(f.current),d(!0),function(){y.current="CLOSED"}},[o.open]);var _=z.useCallback(function(A){return Promise.resolve(n==null?void 0:n(A)).then(function(){A.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),b=z.useCallback(function(A){return Promise.resolve(i==null?void 0:i(A)).then(function(){A.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?Dn.createElement(LW,{"data-rsbs-portal":!0},Dn.createElement(dee,si({},o,{lastSnapRef:p,ref:e,initialState:y.current,onSpringStart:_,onSpringEnd:b}))):null});const gee=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l,getItemWearCount:c})=>{const[d,f]=z.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[p,y]=z.useState(!1),[_,b]=z.useState(window.innerWidth<768),[A,I]=z.useState(!1),[R,V]=z.useState(!1),k=document.documentElement.classList.contains("dark"),O=e.find(F=>F.itemIds.includes(t.id));z.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),I(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{I(!0)})})},[t]),z.useEffect(()=>{const F=()=>b(window.innerWidth<768);return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),z.useEffect(()=>{if(!_){const F=U=>{U.key==="Escape"&&n()};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)}},[_,n]);const G=F=>{const{name:U,value:ye}=F.target;f(Ne=>({...Ne,[U]:ye}))},K=F=>{F.preventDefault(),i({...t,...d}),y(!0),setTimeout(()=>{y(!1)},2e3)},H=()=>{V(!0)},D=()=>{l(t.id),V(!1),n()},N=()=>{V(!1)},M=F=>{F.stopPropagation(),i({...t,isFavorite:!t.isFavorite})},B=S.jsxs("div",{className:"bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("div",{className:"relative px-4 pt-2 pb-4",children:S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg"})}),S.jsxs("form",{onSubmit:K,className:"p-6",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:d.analysis,onChange:G,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:d.category,onChange:G,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(F=>S.jsx("option",{value:F,children:F},F))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:d.color,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:d.material,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),S.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),S.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",S.jsx("span",{className:"font-bold text-lg text-gold",children:c(t.id)})," fois ces 30 derniers jours"]})]}),S.jsx("div",{className:"text-3xl",children:""})]})}),O&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:O.name,children:O.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(O.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(K7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:H,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(oE,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(Yd,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:p,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${p?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:p?S.jsxs(S.Fragment,{children:[S.jsx(aE,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]}),q=R?m2.createPortal(S.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 transition-opacity duration-200",style:{zIndex:999999,pointerEvents:"auto"},onClick:N,children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 scale-100",onClick:F=>F.stopPropagation(),children:[S.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("h3",{className:"text-lg font-bold text-raisin-black dark:text-snow mb-1",children:"Supprimer cet article ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.analysis})]})]}),S.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Cette action est irrversible"}),S.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"L'article sera dfinitivement supprim de votre garde-robe et ne pourra pas tre rcupr."})]})]})}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:F=>{F.stopPropagation(),N()},className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),S.jsx("button",{onClick:F=>{F.stopPropagation(),D()},className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/30",children:"Supprimer"})]})]})}),document.body):null;return _?S.jsxs(S.Fragment,{children:[S.jsx(Qu,{open:!!t&&!R,onDismiss:n,className:k?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-2",children:[S.jsx("h2",{className:"text-lg font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),S.jsx("button",{onClick:M,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Mu,{className:"w-6 h-6 text-red-500"}):S.jsx(Tm,{className:"w-6 h-6"})})]}),defaultSnap:({maxHeight:F})=>F*.85,snapPoints:({maxHeight:F})=>[F*.5,F*.85,F*.95],children:B}),q]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${A?"opacity-100":"opacity-0"}`,style:R?{pointerEvents:"none"}:void 0,onClick:n,children:S.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-200 ${A?"opacity-100 scale-100":"opacity-0 scale-95"}`,style:R?{pointerEvents:"none"}:void 0,onClick:F=>F.stopPropagation(),children:[S.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Mu,{className:"w-6 h-6 text-red-500"}):S.jsx(Tm,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),B]})}),q]})},fV=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=z.useState(3),[l,c]=z.useState(""),[d,f]=z.useState(""),p=y=>{y.preventDefault();const _=l||"",b=d?parseFloat(d):void 0;_.trim()&&r>0&&n(r,_,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:y=>o(parseInt(y.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:d,onChange:y=>f(y.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(LP,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},hV=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(f=>f.id===o);if(c)return c;let d=n.find(f=>f.id===o);if(d)return d;if(c=e.find(f=>f.analysis===o),c||(c=e.find(f=>f.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(VP,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},vee=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=z.useState(!1),o=z.useRef(null),l=z.useRef(null),c=y=>{const _=Array.from(y.target.files||[]);_.length>0&&(t(_),r(!1)),y.target.value=""},d=()=>{r(!i)},f=()=>{var y;(y=o.current)==null||y.click()},p=()=>{var y;(y=l.current)==null||y.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:d,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},yee=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,onShowWornOutfits:o,isAnalyzingWardrobe:l,clothingCount:c,favoriteOutfitCount:d,wornOutfitCount:f})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[c," vtement",c>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[c>=3&&S.jsx("button",{onClick:t,disabled:l,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:l?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("button",{onClick:o,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-blue-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("p",{className:"text-2xl font-bold",children:f}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Portes (7j)"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-red-500",children:S.jsx(Tm,{})}),S.jsx("p",{className:"text-2xl font-bold",children:d}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),_ee=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},Tee=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),S.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]}),S.jsxs("a",{href:`https://www.google.com/search?q=${encodeURIComponent(r.searchQuery+" achat en ligne")}&tbm=shop`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm hover:shadow-md",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher en ligne"]})]})]},o))})]})]})]})})},Eee=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:y,generatingVisualFor:_,selectedOutfit:b,onSelectOutfit:A})=>{const I=document.documentElement.classList.contains("dark"),R=z.useRef(null);return z.useEffect(()=>{!r&&o.length>0&&R.current&&R.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(Qu,{open:t,onDismiss:l,className:I?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:V})=>V*.65,snapPoints:({minHeight:V,maxHeight:k})=>[V,k*.65,k*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(p2,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:d}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:R,children:o.length>0&&S.jsx(bu,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:y,generatingVisualFor:_,selectedOutfit:b,onSelectOutfit:A})})]})})},See=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(Qu,{open:t,onDismiss:c,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.6,snapPoints:({maxHeight:f})=>[f*.55,f*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(fV,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(hV,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},bee=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=z.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),f=e.filter(b=>!c.has(b.id)).reduce((b,A)=>(b[A.category]||(b[A.category]=[]),b[A.category].push(A),b),{}),p=b=>{l(A=>{const I=new Set(A);return I.has(b)?I.delete(b):I.add(b),I})},y=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},_=document.documentElement.classList.contains("dark");return S.jsx(Qu,{open:t,onDismiss:i,className:_?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:y,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(Tg,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(f).map(b=>f[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[b].map(A=>{const I=o.has(A.id);return S.jsxs("button",{onClick:()=>p(A.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:I?"#D4AF37":"transparent"},children:[I&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(aE,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:A.imageSrc,alt:A.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:A.analysis})]},A.id)})})]},b))})]})})},wee=(t,e)=>{const n=ua(sr,"users",t,"items"),i=ag(n);return cg(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},xee=async(t,e)=>{try{const n=ua(sr,"users",t,"items");return(await ug(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},G1=async(t,e,n)=>{try{const i=ju(sr,"users",t,"items",e);await uB(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},j1=async(t,e)=>{try{const n=ju(sr,"users",t,"items",e);await qT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},Aee=(t,e)=>{const n=ua(sr,"users",t,"favoriteOutfits"),i=ag(n);return cg(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},Cee=async(t,e)=>{try{const n=ua(sr,"users",t,"favoriteOutfits");return(await ug(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},Iee=async(t,e)=>{try{const n=ju(sr,"users",t,"favoriteOutfits",e);await qT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},Ree=(t,e)=>{const n=ua(sr,"users",t,"sets"),i=ag(n);return cg(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},Nee=async(t,e)=>{try{const n=ua(sr,"users",t,"sets");return(await ug(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},Dee=async(t,e)=>{try{const n=ju(sr,"users",t,"sets",e);await qT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},Mee=async(t,e,n,i)=>{try{const r=ua(sr,"users",t,"wearHistory");return(await ug(r,{outfitTitle:e,outfitDescription:n,itemIds:i,wornAt:Date.now()})).id}catch(r){throw console.error("Erreur lors de l'ajout de l'historique de port:",r),r}},Pee=(t,e)=>{const n=ua(sr,"users",t,"wearHistory"),i=Date.now()-720*60*60*1e3,r=ag(n,rB("wornAt",">=",i));return cg(r,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));e(c)},l=>{console.error("Erreur (wearHistory listener):",l)})},kee=async(t,e,n)=>{try{const i=UM(FM,`users/${t}/clothing/${n}.jpg`);return await v9(i,e,"data_url"),await OM(i)}catch(i){throw console.error("Erreur upload vtement:",i),i}},Vee=async(t,e)=>{try{const n=await Lee(e,1024),i=UM(FM,`users/${t}/profile/model_photo.jpg`);return await g9(i,n),await OM(i)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},Lee=(t,e)=>new Promise((n,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=o=>{var c;const l=new Image;l.src=(c=o.target)==null?void 0:c.result,l.onload=()=>{const d=e/l.width,f=document.createElement("canvas");f.width=e,f.height=l.height*d;const p=f.getContext("2d");p?(p.drawImage(l,0,0,f.width,f.height),f.toBlob(y=>{y?n(y):i(new Error("Blob creation failed"))},"image/jpeg",.85)):i(new Error("Canvas error"))}},r.onerror=o=>i(o)}),pV=z.createContext(void 0),Oee=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),d=800,f=d/o.width;c.width=d,c.height=o.height*f;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),Uee=({children:t,user:e})=>{const[n,i]=z.useState([]),[r,o]=z.useState([]),[l,c]=z.useState([]),[d,f]=z.useState([]),[p,y]=z.useState(localStorage.getItem("dressmup_user_model_url")),[_,b]=z.useState(!1),[A,I]=z.useState(!0);z.useEffect(()=>{p&&localStorage.setItem("dressmup_user_model_url",p)},[p]),z.useEffect(()=>{if(e){const F=wee(e.uid,W=>{i(W),I(!1)}),U=Ree(e.uid,W=>{o(W)}),ye=Aee(e.uid,W=>{c(W)}),Ne=Pee(e.uid,W=>{f(W)});return()=>{F(),U(),ye(),Ne()}}else i([]),o([]),c([]),f([]),I(!1)},[e]);const R=z.useCallback(async F=>{if(e)try{const U=await Vee(e.uid,F);y(U)}catch(U){throw console.error("Erreur mise  jour photo modle:",U),U}},[e]),V=z.useCallback(async F=>{if(!(F.length===0||!e)){b(!0);try{const U=F.map(he=>Oee(he)),ye=await Promise.all(U),Ne=ye.map(he=>he.split(",")[1]),W=await V7(Ne),oe=Math.min(W.length,F.length);for(let he=0;he<oe;he++){const xe=W[he];let Ae="";try{Ae=await xee(e.uid,{...xe,createdAt:Date.now()});const j=await kee(e.uid,ye[he],Ae);await G1(e.uid,Ae,{imageSrc:j})}catch(j){console.error(`chec pour ${F[he].name}.`,j),Ae&&await j1(e.uid,Ae)}}}catch(U){console.error("Erreur lot:",U)}finally{b(!1)}}},[e]),k=z.useCallback(async F=>{e&&await j1(e.uid,F)},[e]),O=z.useCallback(async F=>{e&&await G1(e.uid,F.id,F)},[e]),G=z.useCallback(async F=>{if(!e)return;const{id:U,...ye}=F;await Cee(e.uid,ye)},[e]),K=z.useCallback(async F=>{e&&await Iee(e.uid,F)},[e]),H=z.useCallback(async(F,U)=>{var W;if(!e)return;const ye=((W=n.find(oe=>oe.id===U[0]))==null?void 0:W.imageSrc)||"",Ne={name:F,itemIds:U,imageSrc:ye};await Nee(e.uid,Ne)},[e,n]),D=z.useCallback(async F=>{e&&await Dee(e.uid,F)},[e]),N=z.useCallback(async(F,U,ye)=>{e&&await Mee(e.uid,F,U,ye)},[e]),M=z.useCallback(F=>d.filter(U=>U.itemIds.includes(F)).length,[d]),B=z.useCallback(()=>{const F=Date.now()-6048e5;return d.filter(U=>U.wornAt>=F).sort((U,ye)=>ye.wornAt-U.wornAt)},[d]),q={clothingItems:n,clothingSets:r,favoriteOutfits:l,wearHistory:d,userModelImage:p,setUserModelImage:y,updateUserModelPhoto:R,isAnalyzing:_,analyzeClothingItems:V,deleteClothingItem:k,updateClothingItem:O,createClothingSet:H,deleteClothingSet:D,addFavoriteOutfit:G,deleteFavoriteOutfit:K,recordOutfitWear:N,getItemWearCount:M,getWornOutfitsLast7Days:B,loading:A};return S.jsx(pV.Provider,{value:q,children:t})},Fee=()=>{const t=z.useContext(pV);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},Bee=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f})=>{const p=document.documentElement.classList.contains("dark");return S.jsx(Qu,{open:t,onDismiss:e,className:p?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:y})=>y*.65,snapPoints:({maxHeight:y})=>[y*.65,y*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(bu,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},zee=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,wornOutfits:r,favoriteOutfits:o,onToggleFavorite:l,onGenerateVisual:c,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:p})=>{const y=document.documentElement.classList.contains("dark"),_=z.useMemo(()=>r.map(b=>{const A=b.itemIds.map(I=>{const R=n.find(V=>V.id===I);return R?{id:R.id,description:R.analysis}:{id:I,description:"Article supprim"}});return{titre:b.outfitTitle,description:b.outfitDescription,vetements:A}}),[r,n]);return S.jsx(Qu,{open:t,onDismiss:e,className:y?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Portes"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:b})=>b*.65,snapPoints:({maxHeight:b})=>[b*.65,b*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:_.length>0?S.jsxs(S.Fragment,{children:[S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Vos tenues portes ces 7 derniers jours"}),S.jsx(bu,{outfits:_,allClothingItems:n,allClothingSets:i,favoriteOutfits:o,onToggleFavorite:l,onGenerateVisual:c,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:p})]}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore port de tenue cette semaine."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Slectionnez une tenue en cliquant sur  pour l'ajouter  votre historique"})]})})})},xp=!1,Ua=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},qee=()=>{const[t,e]=z.useState(null),[n,i]=z.useState(null),[r,o]=z.useState([]),[l,c]=z.useState(null),[d,f]=z.useState(!1),[p,y]=z.useState(null),[_,b]=z.useState(!1),[A,I]=z.useState(null),[R,V]=z.useState(!1),[k,O]=z.useState("home"),[G,K]=z.useState(!1),[H,D]=z.useState(!1),[N,M]=z.useState(!1),[B,q]=z.useState(!1),[F,U]=z.useState(!1),[ye,Ne]=z.useState(!1),[W,oe]=z.useState(null),[he,xe]=z.useState(null),[Ae,j]=z.useState(!1),[ee,ne]=z.useState(0),[se,ge]=z.useState(null),[Oe,Ie]=z.useState(null),[Vt,Ct]=z.useState(!1),[qn,Ai]=z.useState(!1),[Ft,Hn]=z.useState(""),[Cn,Pn]=z.useState("favorites");z.useEffect(()=>{if(n){const me=n.includes("Accs refus")?1e4:5e3,be=setTimeout(()=>i(null),me);return()=>clearTimeout(be)}},[n]);const[di,or]=z.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:Ci,clothingSets:Ii,isAnalyzing:kn,analyzeClothingItems:fi,deleteClothingItem:Ar,createClothingSet:Gi,updateClothingItem:wt,deleteClothingSet:vn,favoriteOutfits:ke,addFavoriteOutfit:Lt,deleteFavoriteOutfit:Xt,userModelImage:tn,recordOutfitWear:Cr,getItemWearCount:fa,getWornOutfitsLast7Days:In,loading:hi}=Fee(),[Bt,le]=z.useState(null),pe=Dn.useMemo(()=>(Ci||[]).sort((be,ze)=>(ze.isFavorite?1:0)-(be.isFavorite?1:0)),[Ci]),Ee=z.useCallback(me=>{const be=ke.find(ze=>ze.titre===me.titre&&ze.description===me.description);be?(Xt(be.id),le("Retir des favoris")):(Lt(me),le("Ajout aux favoris ")),setTimeout(()=>le(null),2e3)},[ke,Lt,Xt]),qe=z.useCallback(me=>{if((l==null?void 0:l.titre)===me.titre&&(l==null?void 0:l.description)===me.description)c(null),le("Slection annule");else{c(me),le("Tenue choisie ");const ze=me.vetements.map(Pt=>Pt.id);Cr(me.titre,me.description,ze)}setTimeout(()=>le(null),2e3)},[l,Cr]),Ve=Dn.useMemo(()=>Ii||[],[Ii]),Qe=Dn.useMemo(()=>new Set(Ve.flatMap(me=>me.itemIds||[])),[Ve]),Je=z.useMemo(()=>In(),[In]);z.useEffect(()=>{const me=async be=>{const ze=be.coords.latitude,Pt=be.coords.longitude,Di=kP.openWeatherApiKey,pi=`https://api.openweathermap.org/data/2.5/weather?lat=${ze}&lon=${Pt}&appid=${Di}&units=metric&lang=fr`;try{const Ir=await fetch(pi);if(!Ir.ok)throw new Error("Impossible de rcuprer la mto.");const mi=await Ir.json(),Mi=`${Math.round(mi.main.temp)}C, ${mi.weather[0].description},  ${mi.name}`;oe(Mi),xe(null)}catch{xe("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(me,()=>xe("Activez la golocalisation pour la mto.")):xe("Golocalisation non supporte.")},[]);const tt=z.useCallback(async(me,be)=>{if(pe.length===0){i("Veuillez d'abord ajouter des vtements.");return}f(!0),i(null);const ze=W?`Mto actuelle : ${W}. Occasion : ${me}`:`Occasion : ${me}`;try{const Pt=await L7(pe,Ve,ze,be);o(Pt)}catch(Pt){i(Ua(Pt))}finally{f(!1)}},[pe,Ve,W]),nt=z.useCallback(async(me,be,ze)=>{if(pe.length===0){i("Veuillez d'abord ajouter des vtements.");return}b(!0),i(null);try{const Pt=await U7(pe,Ve,me,be,ze);y(Pt)}catch(Pt){i(Ua(Pt))}finally{b(!1)}},[pe,Ve]),Pe=z.useCallback(async()=>{if(pe.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}V(!0),i(null);try{const me=await O7(pe,Ve);I(me)}catch(me){i(Ua(me))}finally{V(!1)}},[pe,Ve]),He=z.useCallback(async me=>{},[pe,tn]),cn=z.useCallback(()=>K(!0),[]),Ri=z.useCallback(()=>D(!0),[]),Kt=me=>e(me),It=()=>e(null),ht=me=>{Ar(me).catch(be=>i(Ua(be))),e(null)},Gn=me=>{wt(me).catch(be=>i(Ua(be))),e(me)},Ot=me=>{const be=`Focus sur l'article : ${me.analysis}`;tt(be,me),e(null),window.innerWidth<768&&K(!0)},dn=z.useCallback((me,be)=>{Gi(me,be).catch(ze=>i(Ua(ze)))},[Gi]),Ni=z.useCallback(me=>{vn(me).catch(be=>i(Ua(be)))},[vn]);z.useCallback(async()=>{j(!0),await new Promise(me=>setTimeout(me,1e3)),j(!1)},[]);const Rn={hauts:pe.filter(me=>me.category==="Hauts").length,bas:pe.filter(me=>me.category==="Bas").length,chaussures:pe.filter(me=>me.category==="Chaussures").length,accessoires:pe.filter(me=>me.category==="Accessoires").length},yn=z.useMemo(()=>{if(k==="home")return[];let me=pe.filter(be=>k==="hauts"?be.category==="Hauts":k==="bas"?be.category==="Bas":k==="chaussures"?be.category==="Chaussures":k==="accessoires"?be.category==="Accessoires":!1);if(Ft.trim()){const be=Ft.toLowerCase();me=me.filter(ze=>ze.analysis.toLowerCase().includes(be)||ze.color.toLowerCase().includes(be)||ze.material.toLowerCase().includes(be))}return[...me].sort((be,ze)=>{switch(Cn){case"favorites":return(ze.isFavorite?1:0)-(be.isFavorite?1:0);case"newest":return(ze.createdAt||0)-(be.createdAt||0);case"oldest":return(be.createdAt||0)-(ze.createdAt||0);case"color":return be.color.localeCompare(ze.color);default:return 0}})},[k,pe,Ft,Cn]),ji=G||H||N||!!t||!!A||!!Oe||ye;return z.useEffect(()=>{const me=document.querySelector("header");me&&(me.style.zIndex=ji?"10":"50")},[ji]),z.useEffect(()=>{if(!kn&&pe.length>ee&&ee>0){const me=pe.length-ee;le(`${me} vtement${me>1?"s":""} ajout${me>1?"s":""} `),setTimeout(()=>le(null),2e3)}ne(pe.length)},[kn,pe.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[xp,n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[S.jsxs("div",{className:"flex-1 mr-2",children:[S.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),S.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[xp,pe.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:Pe,disabled:R,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:R?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(AW,{onAnalyze:fi,isAnalyzing:kn})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(NW,{clothingItems:pe,clothingSets:Ve,onItemClick:Kt,onDeleteItem:ht,onCreateSet:dn,isLoading:hi})}),S.jsxs("div",{className:"md:hidden",children:[k==="home"&&S.jsx(yee,{onAnalyzeWardrobe:Pe,onScrollToOutfits:cn,onScrollToVacation:Ri,onStartSetCreation:()=>M(!0),onShowFavorites:()=>q(!0),onShowWornOutfits:()=>U(!0),isAnalyzingWardrobe:R,clothingCount:pe.length,favoriteOutfitCount:ke.length,wornOutfitCount:Je.length}),k!=="home"&&S.jsxs("div",{className:"pb-24",children:[Ae&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:k}),S.jsxs("p",{className:"text-sm text-gray-500",children:[yn.length," vtement",yn.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(OP,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:Ft,onChange:me=>Hn(me.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Ft&&S.jsx("button",{onClick:()=>Hn(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(UP,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Cn,onChange:me=>Pn(me.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(wd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),yn.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:yn.map(me=>S.jsxs("div",{onClick:()=>Kt(me),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[me.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Mu,{className:"w-4 h-4"})}):Qe.has(me.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(Tg,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:me.imageSrc,alt:me.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:me.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.color})]})]},me.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:Ft?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Ft,'"']}),S.jsx("button",{onClick:()=>Hn(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(p2,{clothingItems:pe,clothingSets:Ve,onGenerate:tt,isGenerating:d,weatherInfo:W,weatherError:he})}),r.length>0&&S.jsx(bu,{outfits:r,allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe}),ke.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>Ct(!Vt),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Mu,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",ke.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${Vt?"rotate-180":""} text-gray-400`,children:S.jsx(wd,{})})]}),Vt&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(bu,{outfits:ke,allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe})})]}),Je.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>Ai(!qn),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Tenues Portes ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(7 derniers jours - ",Je.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${qn?"rotate-180":""} text-gray-400`,children:S.jsx(wd,{})})]}),qn&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(bu,{outfits:Je.map(me=>({titre:me.outfitTitle,description:me.outfitDescription,vetements:me.itemIds.map(be=>{const ze=pe.find(Pt=>Pt.id===be);return{id:be,description:ze?ze.analysis:"Article supprim"}})})),allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(fV,{clothingItems:pe,clothingSets:Ve,onGeneratePlan:nt,isGenerating:_})}),p&&S.jsx(hV,{plan:p,allClothingItems:pe,allClothingSets:Ve,onCreateSet:dn})]})]}),t&&S.jsx(gee,{item:t,clothingSets:Ve,onClose:It,onUpdate:Gn,onGenerateFrom:Ot,onRemoveSet:Ni,onDelete:ht,getItemWearCount:fa}),A&&S.jsx(Tee,{analysis:A,onClose:()=>I(null)}),xp,S.jsx(vee,{onFilesSelected:fi,isAnalyzing:kn,isOtherModalOpen:ji}),S.jsx(_ee,{activeTab:k,onTabChange:O,counts:Rn}),S.jsx(Eee,{open:G,clothingItems:pe,clothingSets:Ve,onGenerate:tt,isGenerating:d,suggestedOutfits:r,onClose:()=>K(!1),weatherInfo:W,weatherError:he,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe}),S.jsx(See,{open:H,clothingItems:pe,clothingSets:Ve,onGeneratePlan:nt,isGenerating:_,vacationPlan:p,onCreateSet:dn,onClose:()=>D(!1)}),S.jsx(bee,{open:N,clothingItems:pe,clothingSets:Ve,onClose:()=>M(!1),onCreateSet:(me,be)=>{dn(me,be),M(!1)}}),S.jsx(Bee,{open:B,onClose:()=>q(!1),allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe}),S.jsx(zee,{open:F,onClose:()=>U(!1),allClothingItems:pe,allClothingSets:Ve,wornOutfits:Je,favoriteOutfits:ke,onToggleFavorite:Ee,onGenerateVisual:He,generatingVisualFor:se,selectedOutfit:l,onSelectOutfit:qe}),xp,di&&S.jsx(ZL,{onComplete:()=>or(!1)}),Bt&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Bt.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),Bt.includes("Retir")&&S.jsx("span",{children:""}),Bt.includes("ajout")&&!Bt.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:Bt.replace("","").trim()})]})})]})},Hee=()=>{const[t,e]=z.useState(null),[n,i]=z.useState("dark"),[r,o]=z.useState(!1);z.useEffect(()=>{const c=OU(Ba,d=>{e(d),d&&o(!1)});return()=>c()},[]),z.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const l=()=>{i(c=>c==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx(Y7,{theme:n,toggleTheme:l,children:S.jsx(qI,{user:t})}),S.jsx(Uee,{user:t,children:S.jsx(qee,{})})]}):r?S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:S.jsxs("div",{className:"w-full max-w-md",children:[S.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),S.jsx(qI,{user:t})]})}):S.jsx(xW,{onGetStarted:()=>o(!0)})})},mV=document.getElementById("root");if(!mV)throw new Error("L'lment root est introuvable dans le DOM");const Gee=QL.createRoot(mV);Gee.render(S.jsx(Dn.StrictMode,{children:S.jsx(Hee,{})}));
